{"version":3,"file":"actions-42459e52.js","sources":["../../src/ui/utils/avatar.ts","../../src/ui/atoms/avatar/Avatar.tsx","../../res/ic/peoples.svg","../../src/ui/atoms/badge/BadgeWrapper.tsx","../../src/ui/atoms/badge/NotificationBadge.tsx","../../src/ui/hooks/useObservable.ts","../../src/ui/state/overlayWindow.ts","../../res/ic/info.svg","../../src/ui/hooks/useAsync.ts","../../src/ui/hooks/useSearchProfile.tsx","../../src/ui/views/session/dialogs/ProfileSuggestion.tsx","../../src/ui/hooks/useRoomViewModel.ts","../../src/ui/hooks/useEmbedTimeline.ts","../../src/ui/hooks/useObservableMap.ts","../../src/ui/views/components/world-preview-card/WorldPreviewCard.tsx","../../src/ui/hooks/useRoom.ts","../../res/ic/add-user.svg","../../res/ic/volume-up.svg","../../src/ui/views/components/member-tile/MemberTile.tsx","../../src/ui/hooks/useRoomMembers.ts","../../res/ic/more-horizontal.svg","../../res/ic/chevron-right.svg","../../src/ui/views/components/category/Category.tsx","../../src/ui/views/components/category/CategoryHeader.tsx","../../src/ui/hooks/useStateEventKeyCallback.ts","../../src/ui/hooks/usePowerLevels.ts","../../src/ui/views/session/dialogs/InviteDialog.tsx","../../src/ui/hooks/useCalls.ts","../../src/ui/hooks/useRoomCall.ts","../../src/engine/utils/interpolation.ts","../../src/ui/views/session/nametags/Nametags.tsx","../../src/ui/views/session/dialogs/MemberListDialog.tsx","../../src/ui/hooks/usePermissionState.ts","../../src/ui/hooks/useStreamRequest.ts","../../src/ui/hooks/useWorld.ts","../../src/ui/atoms/thumbnail/ThumbnailImg.tsx","../../node_modules/@radix-ui/react-progress/node_modules/@radix-ui/react-primitive/dist/index.module.js","../../node_modules/@radix-ui/react-progress/node_modules/@radix-ui/react-context/dist/index.module.js","../../node_modules/@radix-ui/react-progress/dist/index.module.js","../../src/ui/atoms/progress/Progress.tsx","../../src/ui/hooks/useWorldNavigator.ts","../../src/ui/hooks/useRoomTimeline.ts","../../src/ui/hooks/useRecentMessage.ts","../../res/ic/mic.svg","../../res/ic/mic-off.svg","../../res/ic/call-cross.svg","../../res/ic/message.svg","../../src/ui/hooks/useMicrophoneState.ts","../../src/ui/hooks/useCallMute.ts","../../src/ui/views/components/MuteButtonProvider.tsx","../../src/ui/hooks/useDisableInput.ts","../../src/ui/state/worldChatVisibility.ts","../../src/ui/atoms/keyboard/Kbd.tsx","../../src/engine/player/nametags.common.ts","../../src/ui/views/session/world/ShortcutUI.tsx","../../src/ui/views/session/cmd-panel/actions.tsx"],"sourcesContent":["/*\nCopyright 2020 Bruno Windels <bruno@windels.cloud>\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { Session, Platform, MediaRepository } from \"@thirdroom/hydrogen-view-sdk\";\n\nexport function avatarInitials(name: string): string {\n  let firstChar = name.charAt(0);\n  if (firstChar === \"!\" || firstChar === \"@\" || firstChar === \"#\") {\n    firstChar = name.charAt(1);\n  }\n  return firstChar.toUpperCase();\n}\n\n/**\n * calculates a numeric hash for a given string\n *\n * @param {string} str string to hash\n *\n * @return {number}\n */\nfunction hashCode(str: string): number {\n  let hash = 0;\n  let i: number;\n  let chr: number;\n  if (str.length === 0) {\n    return hash;\n  }\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0;\n  }\n  return Math.abs(hash);\n}\n\nexport function getIdentifierColorNumber(id: string): number {\n  return (hashCode(id) % 8) + 1;\n}\n\nexport function getAvatarHttpUrl(\n  avatarUrl: string,\n  cssSize: number,\n  platform: Platform,\n  mediaRepository: MediaRepository\n): string | null {\n  if (avatarUrl) {\n    const imageSize = cssSize * platform.devicePixelRatio;\n    return mediaRepository.mxcUrlThumbnail(avatarUrl, imageSize, imageSize, \"crop\");\n  }\n  return null;\n}\n\nexport function getHttpUrl(session: Session, avatarUrl: any) {\n  try {\n    return session.mediaRepository.mxcUrl(avatarUrl);\n  } catch {\n    return undefined;\n  }\n}\n","import { useState, CSSProperties, MouseEvent, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport \"./Avatar.css\";\n\nimport { Text } from \"../text/Text\";\n\ninterface IAvatar {\n  className?: string;\n  style?: CSSProperties;\n  name: string;\n  bgColor: string;\n  fgColor?: string;\n  shape?: \"rounded\" | \"circle\";\n  imageSrc?: string | null;\n  size?: \"xl\" | \"lg\" | \"md\" | \"sm\" | \"xs\" | \"xxs\";\n  onClick?: (event: MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport function Avatar({\n  className,\n  style,\n  name,\n  bgColor,\n  fgColor = \"white\",\n  shape = \"rounded\",\n  imageSrc,\n  size = \"md\",\n  onClick,\n}: IAvatar) {\n  const [isFallback, setIsFallback] = useState(false);\n\n  let textSize: \"h2\" | \"s1\" | \"b1\" | \"b3\" = \"h2\";\n  if (size === \"xl\") textSize = \"h2\";\n  else if (size === \"lg\") textSize = \"s1\";\n  else if (size === \"md\" || size == \"sm\") textSize = \"b1\";\n  else textSize = \"b3\";\n\n  const avatarClass = classNames(\n    \"Avatar\",\n    `Avatar--${size}`,\n    { \"Avatar--circle\": shape === \"circle\" },\n    className,\n    \"noselect\"\n  );\n\n  style = style ?? {};\n  if (isFallback || !imageSrc) style.backgroundColor = bgColor;\n  const props = {\n    className: avatarClass,\n    \"aria-label\": name,\n    style,\n  };\n\n  useEffect(() => {\n    setIsFallback(false);\n  }, [imageSrc]);\n\n  const content =\n    !isFallback && imageSrc ? (\n      <img draggable=\"false\" src={imageSrc} alt=\"\" onError={() => setIsFallback(true)} />\n    ) : (\n      <Text style={{ color: fgColor }} variant={textSize} weight=\"medium\" type=\"span\">\n        {[...name][0]}\n      </Text>\n    );\n\n  if (onClick)\n    return (\n      <button onClick={onClick} {...props}>\n        {content}\n      </button>\n    );\n  return <div {...props}>{content}</div>;\n}\n","export default \"__VITE_ASSET__9488e757__\"","import { ReactNode } from \"react\";\nimport classNames from \"classnames\";\n\nimport \"./BadgeWrapper.css\";\n\ninterface IBadgeWrapper {\n  className?: string;\n  badge?: ReactNode;\n  children: ReactNode;\n}\n\nexport function BadgeWrapper({ className, badge, children }: IBadgeWrapper) {\n  if (!badge) return <>{children}</>;\n  return (\n    <div className={classNames(\"BadgeWrapper\", className)}>\n      {children}\n      <div className=\"BadgeWrapper__item\">{badge}</div>\n    </div>\n  );\n}\n","import classNames from \"classnames\";\nimport { ReactNode } from \"react\";\n\nimport { Text } from \"../text/Text\";\n\nimport \"./NotificationBadge.css\";\n\ninterface INotificationBadge {\n  className?: string;\n  variant?: \"primary\" | \"secondary\" | \"danger\";\n  content?: string | number | ReactNode;\n}\n\nexport function NotificationBadge({ className, variant = \"primary\", content }: INotificationBadge) {\n  const hasContent = content !== undefined;\n  const notifClass = classNames(\n    \"NotificationBadge\",\n    `NotificationBadge--${variant}`,\n    { \"NotificationBadge--with-content\": hasContent },\n    className\n  );\n\n  return (\n    <span className={notifClass}>\n      {hasContent &&\n        (typeof content === \"string\" || typeof content === \"number\" ? (\n          <Text variant=\"b3\" color={`on-${variant}`} type=\"span\" weight=\"semi-bold\">\n            {content}\n          </Text>\n        ) : (\n          content\n        ))}\n    </span>\n  );\n}\n","import { BaseObservable } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useEffect, useReducer, useRef, useMemo } from \"react\";\n\nimport { useIsMounted } from \"./useIsMounted\";\n\nexport function useObservable<O extends BaseObservable<H>, H, T>(\n  observableFactory: () => O,\n  createHandler: (update: (value: T) => void, observable: O) => H,\n  getInitialValue: (observable: O) => T,\n  deps: unknown[]\n): T {\n  const isMounted = useIsMounted();\n  const [, forceUpdate] = useReducer((v) => v + 1, 0);\n  const valueRef = useRef<T>();\n\n  const subscriptionHandle = useMemo(() => {\n    const update = (value: T) => {\n      if (isMounted()) {\n        valueRef.current = value;\n        forceUpdate();\n      }\n    };\n\n    const observable = observableFactory();\n\n    const unsubscribe = observable.subscribe(createHandler(update, observable));\n\n    valueRef.current = getInitialValue(observable);\n\n    return unsubscribe;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n\n  useEffect(() => subscriptionHandle, [subscriptionHandle]);\n\n  return valueRef.current as T;\n}\n","import { atom } from \"jotai\";\n\nexport enum OverlayWindow {\n  None = \"none\",\n  CreateWorld = \"create_world\",\n  UserProfile = \"user_profile\",\n  WorldSettings = \"world_settings\",\n  Discover = \"discover\",\n}\n\ntype OverlayWindowValue =\n  | {\n      type: OverlayWindow.None;\n    }\n  | {\n      type: OverlayWindow.CreateWorld;\n    }\n  | {\n      type: OverlayWindow.UserProfile;\n    }\n  | {\n      type: OverlayWindow.WorldSettings;\n      roomId: string;\n    }\n  | {\n      type: OverlayWindow.Discover;\n    };\n\nexport const overlayWindowAtom = atom<OverlayWindowValue>({ type: OverlayWindow.None });\n","export default \"__VITE_ASSET__98ffb9cc__\"","import { useEffect, useState } from \"react\";\n\nexport type UseAsyncState<T> =\n  | {\n      loading: boolean;\n      error?: Error | undefined;\n      value?: T | undefined;\n    }\n  | {\n      loading: true;\n      error: undefined;\n      value: undefined;\n    }\n  | {\n      loading: false;\n      error: Error;\n      value: undefined;\n    }\n  | {\n      loading: false;\n      error: undefined;\n      value: T;\n    };\n\nconst initialState = {\n  loading: true,\n  error: undefined,\n  value: undefined,\n};\n\nexport function useAsync<T>(promiseFactory: () => Promise<T>, deps: unknown[]): UseAsyncState<T> {\n  const [state, setState] = useState<UseAsyncState<T>>(initialState);\n\n  useEffect(() => {\n    setState(initialState);\n\n    let cancelled = false;\n\n    promiseFactory()\n      .then((value) => {\n        if (!cancelled) {\n          setState({\n            loading: false,\n            error: undefined,\n            value,\n          });\n        }\n      })\n      .catch((error) => {\n        if (!cancelled) {\n          setState({\n            loading: false,\n            error,\n            value: undefined,\n          });\n        }\n      });\n\n    return () => {\n      cancelled = true;\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n\n  return state;\n}\n","import { Session } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useState } from \"react\";\n\nimport { useAsync } from \"./useAsync\";\n\nexport interface UserProfile {\n  userId: string;\n  displayName?: string;\n  avatarUrl?: string;\n}\n\nexport interface SearchProfileResult {\n  limited: boolean;\n  results: UserProfile[];\n}\n\nexport function useSearchProfile(session: Session, limit?: number) {\n  const hsApi = session.hsApi;\n  const [searchTerm, setSearchTerm] = useState<string>();\n\n  const { loading, error, value } = useAsync<SearchProfileResult | undefined>(async () => {\n    if (typeof searchTerm !== \"string\" || searchTerm.trim() === \"\") {\n      return Promise.resolve(undefined);\n    }\n    const data = await hsApi.searchProfile(searchTerm, limit).response();\n    if (data.limited === undefined) return undefined;\n    const searchData: SearchProfileResult = {\n      limited: data.limited,\n      results: [],\n    };\n    data?.results.forEach((profile: { user_id: string; avatar_url?: string; display_name?: string }) => {\n      if (profile.user_id === session.userId) return;\n      searchData.results.push({\n        userId: profile.user_id,\n        avatarUrl: profile.avatar_url,\n        displayName: profile.display_name,\n      });\n    });\n    return searchData;\n  }, [hsApi, searchTerm, limit]);\n\n  return { loading, error, value, setSearchTerm };\n}\n","import { Label } from \"../../../atoms/text/Label\";\nimport { SettingTile } from \"../../components/setting-tile/SettingTile\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport { useHydrogen } from \"../../../hooks/useHydrogen\";\nimport { Chip } from \"../../../atoms/chip/Chip\";\nimport { Avatar } from \"../../../atoms/avatar/Avatar\";\nimport { getAvatarHttpUrl, getIdentifierColorNumber } from \"../../../utils/avatar\";\nimport { Scroll } from \"../../../atoms/scroll/Scroll\";\nimport { UserProfile } from \"../../../hooks/useSearchProfile\";\nimport { Tooltip } from \"../../../atoms/tooltip/Tooltip\";\n\nexport function ProfileSuggestion({\n  loading,\n  suggestion,\n  onSelect,\n}: {\n  loading: boolean;\n  onSelect: (userProfile: UserProfile) => void;\n  suggestion?: UserProfile[];\n}) {\n  const { session, platform } = useHydrogen(true);\n  return (\n    <SettingTile label={<Label>Suggestions</Label>}>\n      {loading ? (\n        <Text variant=\"b3\">Looking for suggestion...</Text>\n      ) : !suggestion ? (\n        <Text variant=\"b3\">Type username for suggestions.</Text>\n      ) : suggestion.length === 0 ? (\n        <Text variant=\"b3\">No suggestion found.</Text>\n      ) : (\n        <Scroll type=\"hover\" orientation=\"horizontal\">\n          <div style={{ paddingBottom: \"var(--sp-sm)\" }} className=\"flex flex-wrap items-center gap-xs\">\n            {(() => {\n              return suggestion.map((profile, index) => {\n                return (\n                  <Tooltip delayDuration={0} key={profile.userId} side=\"top\" content={profile.userId}>\n                    <Chip onClick={(e) => onSelect(profile)}>\n                      <Avatar\n                        imageSrc={\n                          profile.avatarUrl\n                            ? getAvatarHttpUrl(profile.avatarUrl, 16, platform, session.mediaRepository)\n                            : undefined\n                        }\n                        name={profile.displayName ?? profile.userId.slice(1)}\n                        bgColor={`var(--usercolor${getIdentifierColorNumber(profile.userId)})`}\n                        size=\"xxs\"\n                        shape=\"circle\"\n                      />\n                      <Text className=\"truncate\" variant=\"b3\" weight=\"medium\">\n                        {suggestion\n                          .slice(0, index)\n                          .find((p) => profile.displayName?.toLowerCase() === p.displayName?.toLowerCase())\n                          ? profile.userId.slice(1)\n                          : profile.displayName ?? profile.userId.slice(1)}\n                      </Text>\n                    </Chip>\n                  </Tooltip>\n                );\n              });\n            })()}\n          </div>\n        </Scroll>\n      )}\n    </SettingTile>\n  );\n}\n","import {\n  ComposerViewModel,\n  IRoomViewModel,\n  Room,\n  ViewModel,\n  TimelineViewModel,\n  ViewModelOptions,\n  TileOptions,\n  TimelineEntry,\n  TileConstructor,\n  Session,\n  GapTile,\n  TextTile,\n  ImageTile,\n  RoomMemberTile,\n  EncryptedEventTile,\n} from \"@thirdroom/hydrogen-view-sdk\";\nimport { useEffect } from \"react\";\n\nimport { useAsync } from \"./useAsync\";\nimport { useHydrogen } from \"./useHydrogen\";\n\ntype tileClassForEntryType = (entry: TimelineEntry) => TileConstructor | undefined;\n\nexport function chatTileClassForEntry(entry: TimelineEntry): TileConstructor | undefined {\n  if (entry.isGap) {\n    return GapTile;\n  } else if (entry.eventType) {\n    switch (entry.eventType) {\n      case \"m.room.message\": {\n        if (entry.isRedacted) {\n          return undefined;\n        }\n        const content = entry.content;\n        const msgtype = content && content.msgtype;\n        switch (msgtype) {\n          case \"m.text\":\n          case \"m.notice\":\n          case \"m.emote\":\n            return TextTile;\n          case \"m.image\":\n            return ImageTile;\n          default:\n            // unknown msgtype not rendered\n            return undefined;\n        }\n      }\n      case \"m.room.member\":\n        return RoomMemberTile;\n      case \"m.room.encrypted\":\n        if (entry.isRedacted) {\n          return undefined;\n        }\n        return EncryptedEventTile;\n      default:\n        // unknown type not rendered\n        return undefined;\n    }\n  }\n}\n\nexport function worldChatTileClassForEntry(entry: TimelineEntry): TileConstructor | undefined {\n  if (entry.isGap) {\n    return GapTile;\n  } else if (entry.eventType) {\n    switch (entry.eventType) {\n      case \"m.room.message\": {\n        if (entry.isRedacted) {\n          return undefined;\n        }\n        const content = entry.content;\n        const msgtype = content && content.msgtype;\n        switch (msgtype) {\n          case \"m.text\":\n          case \"m.notice\":\n          case \"m.emote\":\n            return TextTile;\n          default:\n            // unknown msgtype not rendered\n            return undefined;\n        }\n      }\n      case \"m.room.member\":\n        return RoomMemberTile;\n      case \"m.room.encrypted\":\n        if (entry.isRedacted) {\n          return undefined;\n        }\n        return EncryptedEventTile;\n      default:\n        // unknown type not rendered\n        return undefined;\n    }\n  }\n}\n\ninterface TRRoomViewModelOptions extends ViewModelOptions {\n  room: Room;\n  session: Session;\n  tileClassForEntry: tileClassForEntryType;\n}\n\nexport class TRRoomViewModel extends ViewModel implements IRoomViewModel {\n  public _room: Room;\n  private _session: Session;\n  private _timelineVM: TimelineViewModel | null;\n  private _composerVM: ComposerViewModel;\n  private _tileClassForEntry: tileClassForEntryType;\n  private _tileOptions?: TileOptions;\n\n  constructor(options: TRRoomViewModelOptions) {\n    super(options);\n    const { room, session, tileClassForEntry } = options;\n    this._session = session;\n    this._room = room;\n    this._tileClassForEntry = tileClassForEntry;\n    this._timelineVM = null;\n    this._composerVM = new ComposerViewModel(this);\n  }\n\n  async load() {\n    let timeline;\n    if (this._room._timeline) {\n      timeline = this._room._timeline;\n    } else {\n      timeline = await this._room.openTimeline();\n    }\n    this._tileOptions = this.childOptions({\n      session: this._session,\n      roomVM: this,\n      timeline,\n      tileClassForEntry: this._tileClassForEntry,\n    });\n\n    // NOTE: We are not tracking TimelineViewModel to dispose\n    // Cause when it dispose it also closes timeline of current room\n    this._timelineVM = new TimelineViewModel(\n      this.childOptions({\n        tileOptions: this._tileOptions,\n        timeline,\n      })\n    );\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  _createTile(entry: any) {\n    if (this._tileOptions) {\n      const Tile = this._tileClassForEntry(entry);\n      if (Tile) {\n        return new Tile(entry, this._tileOptions);\n      }\n    }\n  }\n\n  async _sendMessage(message: string): Promise<boolean> {\n    if (!message) return false;\n    try {\n      let msgtype = \"m.text\";\n      if (message.startsWith(\"/me \")) {\n        message = message.slice(4).trim();\n        msgtype = \"m.emote\";\n      }\n      await this._room.sendEvent(\"m.room.message\", { msgtype, body: message });\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  async _pickAndSendFile() {}\n\n  async _sendFile() {}\n\n  async _pickAndSendVideo() {}\n\n  async _pickAndSendPicture() {}\n\n  get room() {\n    return this._room;\n  }\n\n  get composerViewModel() {\n    return this._composerVM;\n  }\n\n  get timelineViewModel() {\n    return this._timelineVM;\n  }\n\n  get isEncrypted(): boolean {\n    return this._room.isEncrypted;\n  }\n\n  startReply(entry: any) {}\n}\n\nexport function useRoomViewModel(room: Room, tileClassForEntry: tileClassForEntryType) {\n  const { platform, logger, session, urlRouter, navigation } = useHydrogen(true);\n\n  const {\n    loading,\n    error,\n    value: roomViewModel,\n  } = useAsync(async () => {\n    const roomViewModel = new TRRoomViewModel({\n      session,\n      room,\n      tileClassForEntry,\n      platform,\n      logger,\n      urlCreator: urlRouter,\n      navigation,\n    });\n\n    await roomViewModel.load();\n\n    return roomViewModel;\n  }, [room, session, platform, logger, urlRouter, navigation]);\n\n  useEffect(\n    () => () => {\n      if (roomViewModel) {\n        roomViewModel.dispose();\n      }\n    },\n    [roomViewModel]\n  );\n\n  return { loading, error, roomViewModel };\n}\n","import { RefObject, useEffect } from \"react\";\nimport {\n  TimelineView as HydrogenTimelineView,\n  TimelineViewModel,\n  SimpleTile,\n  TileViewConstructor,\n} from \"@thirdroom/hydrogen-view-sdk\";\n\nexport function useEmbedTimeline(\n  host: RefObject<HTMLDivElement>,\n  timelineViewModel: TimelineViewModel,\n  viewClassForTile: (vm: SimpleTile) => TileViewConstructor\n) {\n  useEffect(() => {\n    const timelineView = new HydrogenTimelineView(timelineViewModel, viewClassForTile);\n    if (host.current) {\n      const tvDOM = timelineView.mount() as Element;\n      const tvScroll = tvDOM.querySelector(\".Timeline_scroller\")!;\n      tvScroll.classList.add(\"legacy-scroll\", \"legacy-scroll--vertical\", \"legacy-scroll--invisible\");\n      while (host.current.lastChild) {\n        host.current.removeChild(host.current.lastChild);\n      }\n      host.current.append(tvDOM);\n    }\n\n    return () => {\n      timelineView.unmount();\n    };\n  }, [host, timelineViewModel, viewClassForTile]);\n}\n","import { BaseObservableMap } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { useObservable } from \"./useObservable\";\n\nexport function useObservableMap<K, V>(observableFactory: () => BaseObservableMap<K, V>, deps: unknown[]): Map<K, V> {\n  return useObservable(\n    observableFactory,\n    (update, observable) => ({\n      onReset: () => update(new Map(observable)),\n      onAdd: () => update(new Map(observable)),\n      onUpdate: () => update(new Map(observable)),\n      onRemove: () => update(new Map(observable)),\n    }),\n    (observable) => new Map(observable),\n    deps\n  );\n}\n","import { ReactNode } from \"react\";\n\nimport { Text } from \"../../../atoms/text/Text\";\nimport { Icon } from \"../../../atoms/icon/Icon\";\nimport PeoplesIC from \"../../../../../res/ic/peoples.svg\";\n\nimport \"./WorldPreviewCard.css\";\n\nexport interface IWorldPreviewCard {\n  title: string;\n  desc?: string;\n  content?: ReactNode;\n  memberCount?: number | string;\n  onMembersClick?: () => void;\n  options?: ReactNode;\n}\n\nexport function WorldPreviewCard({ title, desc, content, memberCount, onMembersClick, options }: IWorldPreviewCard) {\n  return (\n    <div className=\"WorldPreviewCard flex flex-column gap-sm\">\n      <div className=\"flex items-center gap-md\">\n        <div className=\"WorldPreviewCard__content grow\">\n          <Text className=\"truncate\" variant=\"s1\" weight=\"semi-bold\">\n            {title}\n          </Text>\n          {desc && (\n            <Text className=\"\" variant=\"b3\" color=\"surface-low\">\n              {desc}\n            </Text>\n          )}\n        </div>\n\n        {memberCount !== undefined && (\n          <div\n            role={onMembersClick ? \"button\" : undefined}\n            tabIndex={onMembersClick ? 0 : -1}\n            onClick={onMembersClick}\n            className=\"WorldPreviewCard__memberCount flex items-center\"\n            style={{ cursor: onMembersClick ? \"pointer\" : \"inherit\" }}\n          >\n            <Icon size=\"sm\" src={PeoplesIC} />\n            <Text variant=\"b3\" weight=\"bold\" type=\"span\">\n              {memberCount}\n            </Text>\n          </div>\n        )}\n        {options && <div className=\"shrink-0\">{options}</div>}\n      </div>\n      {content && <div>{content}</div>}\n    </div>\n  );\n}\n","import { Room, Session } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { aliasToRoomId } from \"../utils/matrixUtils\";\nimport { useObservableMap } from \"./useObservableMap\";\n\nexport function useRoom(session: Session, roomIdOrAlias: string | undefined): Room | undefined {\n  const roomId = roomIdOrAlias?.startsWith(\"#\") ? aliasToRoomId(session.rooms, roomIdOrAlias) : roomIdOrAlias;\n\n  const rooms = useObservableMap(() => session.rooms, [session.rooms]);\n  return roomId ? rooms.get(roomId) : undefined;\n}\n","export default \"__VITE_ASSET__023db34d__\"","export default \"__VITE_ASSET__c2ea9e9a__\"","import { ReactNode } from \"react\";\n\nimport \"./MemberTile.css\";\n\ninterface MemberTileProps {\n  avatar: ReactNode;\n  content: ReactNode;\n  options?: ReactNode;\n}\n\nexport function MemberTile({ avatar, content, options }: MemberTileProps) {\n  return (\n    <div className=\"MemberTile items-center flex gap-sm\">\n      <div className=\"shrink-0 flex\">{avatar}</div>\n      <div className=\"grow\">{content}</div>\n      {options && <div className=\"shrink-0\">{options}</div>}\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { ObservableMap, Room, RoomMember } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { useIsMounted } from \"./useIsMounted\";\nimport { useHydrogen } from \"./useHydrogen\";\nimport { getRoomCall } from \"../utils/matrixUtils\";\n\ninterface MembersType {\n  invited: RoomMember[];\n  joined: RoomMember[];\n  leaved: RoomMember[];\n  banned: RoomMember[];\n}\n\nexport function useRoomMembers(room: Room) {\n  const { session } = useHydrogen(true);\n  const [members, setMembers] = useState<MembersType>();\n  const [activeMembers, setActiveMembers] = useState<RoomMember[]>([]);\n  const isMounted = useIsMounted();\n\n  useEffect(() => {\n    const getMembers = (m: ObservableMap<string, RoomMember>) => {\n      const members: MembersType = {\n        invited: [],\n        joined: [],\n        leaved: [],\n        banned: [],\n      };\n\n      for (const [, member] of m) {\n        if (member.membership === \"invite\") members.invited.push(member);\n        else if (member.membership === \"join\") members.joined.push(member);\n        else if (member.membership === \"leave\") members.leaved.push(member);\n        else if (member.membership === \"ban\") members.banned.push(member);\n      }\n\n      return members;\n    };\n\n    let unsubscribeMemberListObservable: () => void | undefined;\n\n    room.loadMemberList().then((mList) => {\n      if (!isMounted()) return;\n      const { members } = mList;\n      setMembers(getMembers(members));\n\n      unsubscribeMemberListObservable = members.subscribe({\n        onReset: () => setMembers(getMembers(members)),\n        onAdd: () => setMembers(getMembers(members)),\n        onUpdate: () => setMembers(getMembers(members)),\n        onRemove: () => setMembers(getMembers(members)),\n      });\n    });\n\n    const groupCall = getRoomCall(session.callHandler.calls, room.id);\n    let unsubscribeCallMemberListObservable: () => void | undefined;\n\n    if (groupCall) {\n      const getActiveMembers = () => {\n        const activeMembers = new Map<string, RoomMember>();\n\n        for (const [, callMember] of groupCall.members) {\n          const member = callMember.member;\n          if (!activeMembers.has(member.userId)) {\n            activeMembers.set(member.userId, member);\n          }\n        }\n\n        return Array.from(activeMembers.values());\n      };\n\n      unsubscribeCallMemberListObservable = groupCall.members.subscribe({\n        onReset: () => setActiveMembers(getActiveMembers()),\n        onAdd: () => setActiveMembers(getActiveMembers()),\n        onUpdate: () => setActiveMembers(getActiveMembers()),\n        onRemove: () => setActiveMembers(getActiveMembers()),\n      });\n\n      setActiveMembers(getActiveMembers());\n    }\n\n    return () => {\n      unsubscribeMemberListObservable?.();\n      unsubscribeCallMemberListObservable?.();\n    };\n  }, [room, isMounted, session]);\n\n  return { ...members, active: activeMembers };\n}\n","export default \"__VITE_ASSET__2e888fc5__\"","export default \"__VITE_ASSET__ea646552__\"","import { ReactNode } from \"react\";\n\nimport \"./Category.css\";\n\ninterface CategoryProps {\n  header: ReactNode;\n  children: ReactNode;\n}\n\nexport function Category({ header, children }: CategoryProps) {\n  return (\n    <div className=\"Category\">\n      {header}\n      {children}\n    </div>\n  );\n}\n","import { ReactNode, MouseEvent } from \"react\";\n\nimport { Text } from \"../../../atoms/text/Text\";\n\nimport \"./CategoryHeader.css\";\ninterface ICategoryHeader {\n  before?: ReactNode;\n  title: string;\n  after?: ReactNode;\n  options?: ReactNode;\n  onClick?: (event: MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport function CategoryHeader({ before, title, after, options, onClick }: ICategoryHeader) {\n  const catContent = (\n    <>\n      {before}\n      <Text className=\"truncate\" variant=\"b3\" weight=\"bold\">\n        {title}\n      </Text>\n      {after}\n    </>\n  );\n\n  return (\n    <div className=\"CategoryHeader flex items-center\">\n      {typeof onClick === \"function\" ? (\n        <button className=\"CategoryHeader__content grow flex items-center gap-xxs\" onClick={onClick}>\n          {catContent}\n        </button>\n      ) : (\n        <div className=\"CategoryHeader__content grow flex items-center gap-xxs\">{catContent}</div>\n      )}\n      {options && <div className=\"CategoryHeader__options shrink-0\">{options}</div>}\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\nimport { Room, StateEvent } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { useIsMounted } from \"./useIsMounted\";\n\nexport function useStateEventKeyCallback(\n  room: Room,\n  eventType: string,\n  stateKey: string,\n  callback: (stateEvent: StateEvent | undefined) => void\n) {\n  const isMounted = useIsMounted();\n\n  useEffect(() => {\n    let unSub: () => void;\n    room.observeStateTypeAndKey(eventType, stateKey).then((stateObservable) => {\n      if (!isMounted()) return;\n      const event = stateObservable.get();\n      callback(event);\n      unSub = stateObservable.subscribe(callback);\n    });\n    return () => unSub?.();\n  }, [room, eventType, stateKey, callback, isMounted]);\n}\n","import { Room, StateEvent } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useCallback, useState } from \"react\";\n\nimport { useStateEventKeyCallback } from \"./useStateEventKeyCallback\";\n\nenum DefaultPowerLevels {\n  usersDefault = 0,\n  stateDefault = 50,\n  eventsDefault = 0,\n  invite = 0,\n  redact = 50,\n  kick = 50,\n  ban = 50,\n  historical = 0,\n}\n\ninterface IPowerLevels {\n  users_default?: number;\n  state_default?: number;\n  events_default?: number;\n  historical?: number;\n  invite?: number;\n  redact?: number;\n  kick?: number;\n  ban?: number;\n\n  events?: Record<string, number>;\n  users?: Record<string, number>;\n  notifications?: Record<string, number>;\n}\n\nexport function usePowerLevels(room: Room) {\n  const [powerLevels, setPowerLevels] = useState<IPowerLevels>();\n\n  const callback = useCallback((stateEvent: StateEvent | undefined) => {\n    const { content } = stateEvent ?? {};\n    setPowerLevels(content);\n  }, []);\n\n  useStateEventKeyCallback(room, \"m.room.power_levels\", \"\", callback);\n\n  const getPowerLevel = useCallback(\n    (userId: string) => {\n      if (!powerLevels) return 0;\n      const { users_default: usersDefault, users } = powerLevels;\n      if (users && users[userId] !== undefined) {\n        return users[userId];\n      }\n      return usersDefault ?? DefaultPowerLevels.usersDefault;\n    },\n    [powerLevels]\n  );\n\n  const canSendEvent = useCallback(\n    (eventType: string | undefined, powerLevel: number) => {\n      if (!powerLevels) return powerLevel >= 0;\n      const { events, events_default: eventsDefault } = powerLevels;\n      if (events && eventType && events[eventType] !== undefined) {\n        return powerLevel >= events[eventType];\n      }\n      return powerLevel >= (eventsDefault ?? DefaultPowerLevels.eventsDefault);\n    },\n    [powerLevels]\n  );\n\n  const canSendStateEvent = useCallback(\n    (eventType: string | undefined, powerLevel: number) => {\n      if (!powerLevels) return powerLevel >= 0;\n      const { events, state_default: stateDefault } = powerLevels;\n      if (events && eventType && events[eventType] !== undefined) {\n        return powerLevel >= events[eventType];\n      }\n      return powerLevel >= (stateDefault ?? DefaultPowerLevels.stateDefault);\n    },\n    [powerLevels]\n  );\n\n  const canDoAction = useCallback(\n    (action: \"invite\" | \"redact\" | \"kick\" | \"ban\" | \"historical\", powerLevel: number) => {\n      const requiredPL = powerLevels?.[action];\n      if (requiredPL !== undefined) {\n        return powerLevel >= requiredPL;\n      }\n      return powerLevel >= DefaultPowerLevels[action];\n    },\n    [powerLevels]\n  );\n\n  return {\n    getPowerLevel,\n    canSendEvent,\n    canSendStateEvent,\n    canDoAction,\n  };\n}\n","import { useState, FormEvent, useCallback, useRef, KeyboardEvent } from \"react\";\nimport { produce } from \"immer\";\n\nimport { Header } from \"../../../atoms/header/Header\";\nimport { HeaderTitle } from \"../../../atoms/header/HeaderTitle\";\nimport { Input } from \"../../../atoms/input/Input\";\nimport { Label } from \"../../../atoms/text/Label\";\nimport { SettingTile } from \"../../components/setting-tile/SettingTile\";\nimport { IconButton } from \"../../../atoms/button/IconButton\";\nimport { Button } from \"../../../atoms/button/Button\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport { Dots } from \"../../../atoms/loading/Dots\";\nimport { Icon } from \"../../../atoms/icon/Icon\";\nimport { useHydrogen } from \"../../../hooks/useHydrogen\";\nimport CrossIC from \"../../../../../res/ic/cross.svg\";\nimport InfoIC from \"../../../../../res/ic/info.svg\";\nimport { Tooltip } from \"../../../atoms/tooltip/Tooltip\";\nimport { useDebounce } from \"../../../hooks/useDebounce\";\nimport { UserProfile, useSearchProfile } from \"../../../hooks/useSearchProfile\";\nimport { ProfileSuggestion } from \"./ProfileSuggestion\";\nimport { Chip } from \"../../../atoms/chip/Chip\";\nimport { getAvatarHttpUrl, getIdentifierColorNumber } from \"../../../utils/avatar\";\nimport { Avatar } from \"../../../atoms/avatar/Avatar\";\n\nconst MXID_REG = /^@(\\S+):(\\S+)$/;\ninterface InviteDialogProps {\n  roomId: string;\n  requestClose: () => void;\n}\n\nexport function InviteDialog({ roomId, requestClose }: InviteDialogProps) {\n  const { session, platform } = useHydrogen(true);\n\n  const formRef = useRef<HTMLFormElement>(null);\n  const [inviting, setInviting] = useState(false);\n  const [inviteList, setInviteList] = useState<UserProfile[]>([]);\n\n  const { loading, value: searchResult, setSearchTerm } = useSearchProfile(session);\n\n  const addInvite = (profile: UserProfile) => {\n    if (inviteList.find((p) => p.userId === profile.userId)) {\n      return;\n    }\n    setInviteList(\n      produce(inviteList, (draftList) => {\n        draftList.push(profile);\n      })\n    );\n  };\n\n  const removeInvite = (profile: UserProfile) => {\n    const index = inviteList.findIndex((p) => p.userId === profile.userId);\n    if (index >= 0) {\n      setInviteList(\n        produce(inviteList, (draftList) => {\n          draftList.splice(index, 1);\n        })\n      );\n    }\n  };\n\n  const handleAddInvite = (profile: UserProfile) => {\n    if (formRef.current) {\n      const form = formRef.current.elements as typeof formRef.current.elements & {\n        userIdInput: HTMLInputElement;\n      };\n      form.userIdInput.value = \"\";\n      form.userIdInput.focus();\n    }\n    addInvite(profile);\n  };\n\n  const inviteUser = async (userId: string) => {\n    if (inviting) return;\n    const userIds = inviteList.map((profile) => profile.userId);\n    if (userId.match(MXID_REG)) {\n      userIds.push(userId);\n    }\n    if (userIds.length === 0) return;\n\n    setInviting(true);\n    const promise = Promise.allSettled(userIds.map((id) => session.hsApi.invite(roomId, id).response()));\n    try {\n      await promise;\n    } catch {}\n    setInviting(false);\n    requestClose();\n  };\n\n  const handleSubmit = async (evt: FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n\n    const value = evt.currentTarget.userIdInput.value as string;\n    inviteUser(value.trim());\n  };\n\n  const debouncedSuggestProfile = useDebounce(\n    useCallback(\n      (term: string) => {\n        setSearchTerm(term);\n      },\n      [setSearchTerm]\n    ),\n    { wait: 400 }\n  );\n\n  const handleInputChange = (evt: FormEvent<HTMLInputElement>) => {\n    const value = evt.currentTarget.value;\n    if (!value.startsWith(\"@\")) debouncedSuggestProfile(value);\n  };\n\n  const handleKeyDown = (evt: KeyboardEvent<HTMLInputElement>) => {\n    const value = evt.currentTarget.value.trim();\n\n    if (evt.key === \" \" && value.match(MXID_REG)) {\n      evt.preventDefault();\n      handleAddInvite({ userId: value });\n    }\n    if (evt.key === \"Enter\") {\n      if (value.length > 0) evt.preventDefault();\n      if (value.match(MXID_REG)) handleAddInvite({ userId: value });\n    }\n    if (evt.key === \"Backspace\" && inviteList.length > 0 && value === \"\") {\n      setInviteList(\n        produce(inviteList, (draftList) => {\n          draftList.pop();\n        })\n      );\n    }\n  };\n\n  return (\n    <div className=\"flex flex-column\">\n      <Header\n        className=\"shrink-0\"\n        left={<HeaderTitle size=\"lg\">Invite</HeaderTitle>}\n        right={<IconButton iconSrc={CrossIC} onClick={requestClose} label=\"Close\" />}\n      />\n      <form\n        ref={formRef}\n        onSubmit={handleSubmit}\n        className=\"grow flex flex-column gap-sm\"\n        style={{ padding: \"var(--sp-md)\" }}\n      >\n        <div className=\"flex flex-column gap-sm\">\n          <SettingTile\n            label={\n              <>\n                <Label>User Id</Label>\n                <Tooltip content=\"User id looks like @user:server.name\" side=\"right\">\n                  <Icon src={InfoIC} color=\"surface-low\" size=\"sm\" />\n                </Tooltip>\n              </>\n            }\n          >\n            <Input\n              className=\"flex-wrap\"\n              onChange={handleInputChange}\n              name=\"userIdInput\"\n              maxLength={255}\n              autoFocus\n              onKeyDown={handleKeyDown}\n              placeholder=\"@user:server.name\"\n              before={\n                inviteList.length > 0 && (\n                  <div className=\"flex gap-xs flex-wrap\" style={{ width: \"100%\", marginTop: \"var(--sp-xs)\" }}>\n                    {inviteList.map((profile) => (\n                      <Chip key={profile.userId}>\n                        <Avatar\n                          imageSrc={\n                            profile.avatarUrl\n                              ? getAvatarHttpUrl(profile.avatarUrl, 16, platform, session.mediaRepository)\n                              : undefined\n                          }\n                          name={profile.displayName ?? profile.userId.slice(1)}\n                          bgColor={`var(--usercolor${getIdentifierColorNumber(profile.userId)})`}\n                          size=\"xxs\"\n                          shape=\"circle\"\n                        />\n                        <Text className=\"truncate\" variant=\"b3\" weight=\"medium\">\n                          {profile.userId.slice(1)}\n                        </Text>\n                        <IconButton onClick={() => removeInvite(profile)} size=\"sm\" iconSrc={CrossIC} label=\"Remove\" />\n                      </Chip>\n                    ))}\n                  </div>\n                )\n              }\n            />\n          </SettingTile>\n          <div style={{ minHeight: \"74px\" }}>\n            <ProfileSuggestion\n              loading={loading}\n              suggestion={searchResult?.results.filter((result) => !inviteList.find((p) => p.userId === result.userId))}\n              onSelect={handleAddInvite}\n            />\n          </div>\n        </div>\n        <Button size=\"lg\" type=\"submit\">\n          {inviting && <Dots color=\"on-primary\" />}\n          {inviting ? \"Inviting\" : \"Invite\"}\n        </Button>\n      </form>\n    </div>\n  );\n}\n","import { Session } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { useObservableMap } from \"./useObservableMap\";\n\nexport function useCalls(session: Session) {\n  return useObservableMap(() => session.callHandler.calls, [session]);\n}\n","import { GroupCall } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useMemo } from \"react\";\n\nimport { getRoomCall } from \"../utils/matrixUtils\";\n\nexport function useRoomCall(calls: Map<string, GroupCall>, roomId: string | undefined) {\n  return useMemo(() => {\n    return getRoomCall(calls, roomId);\n  }, [calls, roomId]);\n}\n","import { clamp } from \"../common/math\";\n\nexport const lerp = (x: number, y: number, a: number) => x * (1 - a) + y * a;\nexport const invlerp = (x: number, y: number, a: number) => clamp((a - x) / (y - x), 0, 1);\nexport const range = (x1: number, y1: number, x2: number, y2: number, a: number) => lerp(x2, y2, invlerp(x1, y1, a));\n\n// src: https://en.wikipedia.org/wiki/Smoothstep\nexport function smoothstep(min: number, max: number, alpha: number) {\n  if (alpha < min) return 0;\n  if (alpha >= max) return 1;\n  alpha = (alpha - min) / (max - min);\n  return alpha * alpha * (3 - 2 * alpha);\n}\nexport function smootherstep(min: number, max: number, alpha: number) {\n  if (alpha <= min) return 0;\n  if (alpha >= max) return 1;\n  alpha = (alpha - min) / (max - min);\n  return alpha * alpha * alpha * (alpha * (alpha * 6 - 15) + 10);\n}\n","import { GroupCall, Member, Room } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport classNames from \"classnames\";\nimport { useAtomValue } from \"jotai\";\n\nimport \"./Nametags.css\";\nimport { getModule } from \"../../../../engine/module/module.common\";\nimport { range } from \"../../../../engine/utils/interpolation\";\nimport { useMainThreadContext } from \"../../../hooks/useMainThread\";\nimport { useRoomMembers } from \"../../../hooks/useRoomMembers\";\nimport { useHydrogen } from \"../../../hooks/useHydrogen\";\nimport { Avatar } from \"../../../atoms/avatar/Avatar\";\nimport { getAvatarHttpUrl, getIdentifierColorNumber } from \"../../../utils/avatar\";\nimport { AudioModule } from \"../../../../engine/audio/audio.main\";\nimport { getRoomCall } from \"../../../utils/matrixUtils\";\nimport { MainNametag } from \"../../../../engine/resource/resource.main\";\nimport { worldAtom } from \"../../../state/world\";\n\n// src: https://css-tricks.com/using-requestanimationframe-with-react-hooks/\nexport const useAnimationFrame = (callback: Function, enabled = true) => {\n  const requestRef = useRef<number>();\n  const previousTimeRef = useRef<number>();\n\n  const animate = useCallback(\n    (time: number) => {\n      if (previousTimeRef.current != undefined) {\n        const deltaTime = time - previousTimeRef.current;\n        callback(deltaTime);\n      }\n      previousTimeRef.current = time;\n      requestRef.current = requestAnimationFrame(animate);\n    },\n    [callback]\n  );\n\n  useEffect(() => {\n    if (enabled) {\n      requestRef.current = requestAnimationFrame(animate);\n      return () => cancelAnimationFrame(requestRef.current || 0);\n    }\n  }, [enabled, animate]);\n};\n\nconst opacityRange = (a: number) => range(30, 10, 0, 1, a);\nconst scaleRange = (a: number) => range(40, 0, 0.01, 1, a);\n\ntype SpeakingRoomMember = Member & { volumeDetector: { isSpeaking: boolean } };\n\ninterface NametagProps {\n  room: Room;\n  nametag: MainNametag;\n  groupCall: GroupCall;\n}\n\nfunction Nametag({ room, nametag, groupCall }: NametagProps) {\n  const { joined } = useRoomMembers(room) ?? {};\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [speaking, setSpeaking] = useState<boolean>(false);\n\n  const member = joined?.find((m) => m.userId === nametag.name);\n\n  const memberCall = member\n    ? Array.from(new Map(groupCall.members).values()).find((m) => m.userId === member?.userId && m.isConnected)\n    : undefined;\n\n  const avatarUrl = member?.avatarUrl;\n  const userId = member?.userId || nametag.name;\n\n  const { platform, session } = useHydrogen(true);\n  const volumeDetector =\n    (memberCall && (memberCall as SpeakingRoomMember).volumeDetector) ||\n    (memberCall?.remoteMedia?.userMedia &&\n      ((memberCall as SpeakingRoomMember).volumeDetector = (platform.mediaDevices as any).createVolumeMeasurer(\n        memberCall?.remoteMedia?.userMedia,\n        () => {}\n      )));\n\n  useAnimationFrame(() => {\n    if (containerRef.current) {\n      const screenX = nametag.screenX;\n      const screenY = nametag.screenY;\n      const distanceFromCamera = nametag.distanceFromCamera;\n      const inFrustum = nametag.inFrustum;\n\n      const el = containerRef.current;\n\n      if (inFrustum) {\n        const opacity = opacityRange(distanceFromCamera);\n        const scale = scaleRange(distanceFromCamera);\n        el.style.transform = `translate(${screenX}px, ${screenY}px) scale(${scale})`;\n        el.style.opacity = `${opacity}`;\n      } else {\n        el.style.opacity = \"0\";\n      }\n\n      setSpeaking(volumeDetector?.isSpeaking);\n    }\n  });\n\n  return (\n    <div className=\"Nametag\" ref={containerRef}>\n      <div className=\"Nametag--inner Text-b1\">\n        <Avatar\n          size=\"xxs\"\n          shape=\"circle\"\n          name={member?.displayName?.toUpperCase() || nametag.name.replace(\"@\", \"\").toUpperCase()}\n          imageSrc={avatarUrl ? getAvatarHttpUrl(avatarUrl, 25, platform, session.mediaRepository) : undefined}\n          bgColor={`var(--usercolor${getIdentifierColorNumber(userId)})`}\n          className={classNames(\"\", { [\"Nametag--image\"]: avatarUrl, [\"Speaking\"]: speaking })}\n        />\n        {member?.displayName || nametag.name}\n      </div>\n    </div>\n  );\n}\n\nexport function Nametags({ room, show }: { room: Room; show: boolean }) {\n  const engine = useMainThreadContext();\n  const worldId = useAtomValue(worldAtom).worldId;\n\n  const [nametags, setNametags] = useState<MainNametag[]>([]);\n\n  const onNametagsChanged = useCallback((nametags: MainNametag[]) => {\n    setNametags([...nametags]);\n  }, []);\n\n  useEffect(() => {\n    const audioModule = getModule(engine, AudioModule);\n\n    audioModule.eventEmitter.addListener(\"nametags-changed\", onNametagsChanged);\n\n    return () => {\n      audioModule.eventEmitter.removeListener(\"nametags-changed\", onNametagsChanged);\n    };\n  }, [engine, onNametagsChanged]);\n\n  const { session } = useHydrogen(true);\n\n  const groupCall = getRoomCall(session.callHandler.calls, worldId);\n\n  return (\n    <div>\n      {show &&\n        groupCall &&\n        nametags.map((nametag) => (\n          <Nametag key={nametag.eid} room={room} nametag={nametag} groupCall={groupCall as GroupCall} />\n        ))}\n    </div>\n  );\n}\n","import { useState, ReactNode, useReducer } from \"react\";\nimport { Member, Room, RoomMember } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { Header } from \"../../../atoms/header/Header\";\nimport { HeaderTitle } from \"../../../atoms/header/HeaderTitle\";\nimport { IconButton } from \"../../../atoms/button/IconButton\";\nimport CrossIC from \".././../../../../res/ic/cross.svg\";\nimport AddUserIC from \".././../../../../res/ic/add-user.svg\";\nimport VolumeUpIC from \".././../../../../res/ic/volume-up.svg\";\nimport { MemberTile } from \"../../components/member-tile/MemberTile\";\nimport { Avatar } from \"../../../atoms/avatar/Avatar\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport { Scroll } from \"../../../atoms/scroll/Scroll\";\nimport { useRoomMembers } from \"../../../hooks/useRoomMembers\";\nimport { getAvatarHttpUrl, getIdentifierColorNumber } from \"../../../utils/avatar\";\nimport { useHydrogen } from \"../../../hooks/useHydrogen\";\nimport { DropdownMenu } from \"../../../atoms/menu/DropdownMenu\";\nimport MoreHorizontalIC from \"../../../../../res/ic/more-horizontal.svg\";\nimport ChevronBottomIC from \"../../../../../res/ic/chevron-bottom.svg\";\nimport ChevronRightIC from \"../../../../../res/ic/chevron-right.svg\";\nimport { DropdownMenuItem } from \"../../../atoms/menu/DropdownMenuItem\";\nimport { Category } from \"../../components/category/Category\";\nimport { CategoryHeader } from \"../../components/category/CategoryHeader\";\nimport { Icon } from \"../../../atoms/icon/Icon\";\nimport { usePowerLevels } from \"../../../hooks/usePowerLevels\";\nimport { Dots } from \"../../../atoms/loading/Dots\";\nimport { isPeerMuted, removePeer, toggleMutePeer } from \"../../../../engine/network/network.main\";\nimport { useMainThreadContext } from \"../../../hooks/useMainThread\";\nimport { Dialog } from \"../../../atoms/dialog/Dialog\";\nimport { InviteDialog } from \"./InviteDialog\";\nimport { useCalls } from \"../../../hooks/useCalls\";\nimport { useRoomCall } from \"../../../hooks/useRoomCall\";\nimport { BadgeWrapper } from \"../../../atoms/badge/BadgeWrapper\";\nimport { NotificationBadge } from \"../../../atoms/badge/NotificationBadge\";\nimport { useAnimationFrame } from \"../nametags/Nametags\";\nimport { setPowerLevel } from \"../../../utils/matrixUtils\";\n\ninterface MemberListDialogProps {\n  room: Room;\n  requestClose: () => void;\n}\n\ntype SpeakingRoomMember = Member & { volumeDetector: { isSpeaking: boolean } };\n\nfunction ActiveMemberTile({\n  members,\n  renderTile,\n  isSpeaking,\n}: {\n  members: RoomMember[];\n  renderTile: (member: RoomMember, isSpeaking: boolean) => JSX.Element;\n  isSpeaking: (userId: string) => boolean;\n}) {\n  const [, forceUpdate] = useReducer((state) => state + 1, 0);\n\n  useAnimationFrame(() => {\n    forceUpdate();\n  });\n\n  return <>{members.map((member) => renderTile(member, isSpeaking(member.userId)))}</>;\n}\n\nexport function MemberListDialog({ room, requestClose }: MemberListDialogProps) {\n  const { session, platform } = useHydrogen(true);\n\n  const { active, invited, joined, leaved, banned } = useRoomMembers(room) ?? {};\n  const [inviteOpen, setInviteOpen] = useState(false);\n\n  const isWorld = room.type === \"org.matrix.msc3815.world\";\n  const filteredJoined = joined?.filter((member) => !active?.find((m) => m.userId === member.userId));\n\n  const { canDoAction, getPowerLevel } = usePowerLevels(room);\n  const myPL = getPowerLevel(session.userId);\n  const canInvite = canDoAction(\"invite\", myPL);\n  const canKick = canDoAction(\"kick\", myPL);\n  const canBan = canDoAction(\"ban\", myPL);\n\n  const [activeCat, setActiveCat] = useState(true);\n  const [joinedCat, setJoinedCat] = useState(true);\n  const [invitedCat, setInvitedCat] = useState(true);\n  const [leaveCat, setLeaveCat] = useState(true);\n  const [banCat, setBanCat] = useState(true);\n\n  const invite = (roomId: string, userId: string) => session.hsApi.invite(roomId, userId);\n  const disInvite = (roomId: string, userId: string) => session.hsApi.kick(roomId, userId);\n  const kick = (roomId: string, userId: string) => session.hsApi.kick(roomId, userId);\n  const ban = (roomId: string, userId: string) => session.hsApi.ban(roomId, userId);\n  const unban = (roomId: string, userId: string) => session.hsApi.unban(roomId, userId);\n  const makeMember = (roomId: string, userId: string) => setPowerLevel(session, roomId, userId, 0);\n  const makeMod = (roomId: string, userId: string) => setPowerLevel(session, roomId, userId, 50);\n  const makeAdmin = (roomId: string, userId: string) => setPowerLevel(session, roomId, userId, 100);\n\n  const engine = useMainThreadContext();\n  const toggleMute = (userId: string) => toggleMutePeer(engine, userId);\n\n  const calls = useCalls(session);\n  const groupCall = useRoomCall(calls, room.id);\n  const callMembers = Array.from(new Map(groupCall?.members).values());\n\n  const isSpeaking = (userId: string) => {\n    const memberCall = callMembers.find((m) => m.userId === userId && m.isConnected);\n    const volumeDetector =\n      (memberCall && (memberCall as SpeakingRoomMember).volumeDetector) ||\n      (memberCall?.remoteMedia?.userMedia &&\n        ((memberCall as SpeakingRoomMember).volumeDetector = (platform.mediaDevices as any).createVolumeMeasurer(\n          memberCall?.remoteMedia?.userMedia,\n          () => {}\n        )));\n\n    return volumeDetector?.isSpeaking;\n  };\n\n  const renderMemberTile = (member: RoomMember, isSpeaking?: boolean) => {\n    const { userId, name, avatarUrl, membership } = member;\n    const userPL = getPowerLevel(userId);\n\n    const menuItems: ReactNode[] = [\n      // todo: how to get this to rerender right away?\n      <DropdownMenuItem key=\"mute\" onSelect={() => toggleMute(userId)}>\n        {isPeerMuted(engine, userId) ? \"Unmute\" : \"Mute\"}\n      </DropdownMenuItem>,\n      <DropdownMenuItem key=\"ignore\" onSelect={() => removePeer(engine, userId)}>\n        Ignore\n      </DropdownMenuItem>,\n    ];\n    switch (membership) {\n      case \"join\":\n        if (canKick && myPL > userPL)\n          menuItems.push(\n            <DropdownMenuItem key=\"kick\" onSelect={() => kick(room.id, userId)}>\n              Kick\n            </DropdownMenuItem>\n          );\n        if (canBan && myPL > userPL)\n          menuItems.push(\n            <DropdownMenuItem key=\"ban\" onSelect={() => ban(room.id, userId)}>\n              Ban\n            </DropdownMenuItem>\n          );\n        if (myPL === 100) {\n          menuItems.push(\n            <DropdownMenuItem key=\"make-member\" disabled={userPL === 0} onSelect={() => makeMember(room.id, userId)}>\n              Make Member\n            </DropdownMenuItem>\n          );\n          menuItems.push(\n            <DropdownMenuItem key=\"make-mod\" disabled={userPL === 50} onSelect={() => makeMod(room.id, userId)}>\n              Make Moderator\n            </DropdownMenuItem>\n          );\n          menuItems.push(\n            <DropdownMenuItem key=\"make-admin\" disabled={userPL === 100} onSelect={() => makeAdmin(room.id, userId)}>\n              Make Admin\n            </DropdownMenuItem>\n          );\n        }\n        break;\n      case \"ban\":\n        if (canKick && myPL > userPL)\n          menuItems.push(\n            <DropdownMenuItem key=\"unban\" onSelect={() => unban(room.id, userId)}>\n              Unban\n            </DropdownMenuItem>\n          );\n        break;\n      case \"invite\":\n        if (canKick && myPL > userPL)\n          menuItems.push(\n            <DropdownMenuItem key=\"disinvite\" onSelect={() => disInvite(room.id, userId)}>\n              Disinvite\n            </DropdownMenuItem>\n          );\n        break;\n      case \"leave\":\n        if (canInvite)\n          menuItems.push(\n            <DropdownMenuItem key=\"invite\" onSelect={() => invite(room.id, userId)}>\n              Invite\n            </DropdownMenuItem>\n          );\n        break;\n    }\n\n    return (\n      <MemberTile\n        key={userId}\n        avatar={\n          <BadgeWrapper\n            badge={\n              isSpeaking ? (\n                <NotificationBadge\n                  variant=\"secondary\"\n                  content={<Icon color=\"on-secondary\" size=\"xs\" src={VolumeUpIC} />}\n                />\n              ) : null\n            }\n          >\n            <Avatar\n              shape=\"circle\"\n              name={name}\n              imageSrc={avatarUrl ? getAvatarHttpUrl(avatarUrl, 40, platform, session.mediaRepository) : undefined}\n              bgColor={`var(--usercolor${getIdentifierColorNumber(userId)})`}\n            />\n          </BadgeWrapper>\n        }\n        content={\n          <>\n            <Text className=\"truncate\" weight=\"medium\">\n              {name}\n            </Text>\n            <Text className=\"truncate\" color=\"surface-low\" variant=\"b3\">\n              {userId}\n            </Text>\n          </>\n        }\n        options={\n          menuItems.length > 0 &&\n          userId !== session.userId && (\n            <DropdownMenu content={menuItems}>\n              <IconButton variant=\"surface-low\" label=\"Options\" iconSrc={MoreHorizontalIC} />\n            </DropdownMenu>\n          )\n        }\n      />\n    );\n  };\n\n  return (\n    <>\n      <Header\n        left={<HeaderTitle size=\"lg\">Members</HeaderTitle>}\n        right={\n          <div className=\"flex gap-sm\">\n            <Dialog open={inviteOpen} onOpenChange={setInviteOpen}>\n              <InviteDialog roomId={room.id} requestClose={() => setInviteOpen(false)} />\n            </Dialog>\n            {canDoAction(\"invite\", myPL) && (\n              <IconButton iconSrc={AddUserIC} onClick={() => setInviteOpen(true)} label=\"Invite\" />\n            )}\n            <IconButton iconSrc={CrossIC} onClick={requestClose} label=\"Close\" />\n          </div>\n        }\n      />\n      <div className=\"flex\" style={{ height: \"600px\" }}>\n        {joined === undefined ? (\n          <div className=\"grow flex items-center justify-center\">\n            <Dots size=\"lg\" />\n          </div>\n        ) : (\n          <Scroll type=\"hover\" style={{ paddingBottom: \"var(--sp-lg)\" }}>\n            <div className=\"flex flex-column gap-sm\">\n              {!!invited?.length && (\n                <Category\n                  header={\n                    <CategoryHeader\n                      title=\"Invited\"\n                      onClick={() => setInvitedCat(!invitedCat)}\n                      after={<Icon src={invitedCat ? ChevronBottomIC : ChevronRightIC} />}\n                    />\n                  }\n                >\n                  {invitedCat && invited.map((member) => renderMemberTile(member))}\n                </Category>\n              )}\n\n              {!!active?.length && (\n                <Category\n                  header={\n                    <CategoryHeader\n                      title=\"Connected\"\n                      onClick={() => setActiveCat(!activeCat)}\n                      after={<Icon src={activeCat ? ChevronBottomIC : ChevronRightIC} />}\n                    />\n                  }\n                >\n                  {activeCat && (\n                    <ActiveMemberTile members={active} renderTile={renderMemberTile} isSpeaking={isSpeaking} />\n                  )}\n                </Category>\n              )}\n\n              {!!filteredJoined?.length && (\n                <Category\n                  header={\n                    <CategoryHeader\n                      title={isWorld ? \"Disconnected\" : \"Joined\"}\n                      onClick={() => setJoinedCat(!joinedCat)}\n                      after={<Icon src={joinedCat ? ChevronBottomIC : ChevronRightIC} />}\n                    />\n                  }\n                >\n                  {joinedCat && filteredJoined.map((member) => renderMemberTile(member))}\n                </Category>\n              )}\n\n              {!!banned?.length && (\n                <Category\n                  header={\n                    <CategoryHeader\n                      title=\"Banned\"\n                      onClick={() => setBanCat(!banCat)}\n                      after={<Icon src={banCat ? ChevronBottomIC : ChevronRightIC} />}\n                    />\n                  }\n                >\n                  {banCat && banned.map((member) => renderMemberTile(member))}\n                </Category>\n              )}\n              {!!leaved?.length && (\n                <Category\n                  header={\n                    <CategoryHeader\n                      title=\"Archived\"\n                      onClick={() => setLeaveCat(!leaveCat)}\n                      after={<Icon src={leaveCat ? ChevronBottomIC : ChevronRightIC} />}\n                    />\n                  }\n                >\n                  {leaveCat && leaved.map((member) => renderMemberTile(member))}\n                </Category>\n              )}\n            </div>\n          </Scroll>\n        )}\n      </div>\n    </>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\ntype PermissionName =\n  | \"geolocation\"\n  | \"notifications\"\n  | \"push\"\n  | \"midi\"\n  | \"camera\"\n  | \"microphone\"\n  | \"speaker\"\n  | \"device-info\"\n  | \"background-sync\"\n  | \"bluetooth\"\n  | \"persistent-storage\"\n  | \"ambient-light-sensor\"\n  | \"accelerometer\"\n  | \"gyroscope\"\n  | \"magnetometer\"\n  | \"clipboard\"\n  | \"geolocation\"\n  | \"notifications\"\n  | \"push\"\n  | \"midi\"\n  | \"camera\"\n  | \"microphone\"\n  | \"speaker\"\n  | \"device-info\"\n  | \"background-sync\"\n  | \"bluetooth\"\n  | \"persistent-storage\"\n  | \"ambient-light-sensor\"\n  | \"accelerometer\"\n  | \"gyroscope\"\n  | \"magnetometer\"\n  | \"accessibility-events\"\n  | \"clipboard-read\"\n  | \"clipboard-write\"\n  | \"payment-handler\";\n\nexport function usePermissionState(name: PermissionName) {\n  const [state, setState] = useState<PermissionState>(\"prompt\");\n\n  useEffect(() => {\n    let permissionStatus: PermissionStatus;\n\n    function handlePermissionChange(this: PermissionStatus) {\n      setState(this.state);\n    }\n\n    navigator.permissions\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore https://github.com/microsoft/TypeScript/issues/33923\n      .query({ name })\n      .then((permStatus: PermissionStatus) => {\n        permissionStatus = permStatus;\n        handlePermissionChange.apply(permStatus);\n        permStatus.addEventListener(\"change\", handlePermissionChange);\n      })\n      .catch(() => {\n        // Silence error since FF doesn't support microphone permission\n      });\n\n    return () => {\n      permissionStatus?.removeEventListener(\"change\", handlePermissionChange);\n    };\n  }, [name]);\n\n  return state;\n}\n","import { Platform, Stream } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useCallback } from \"react\";\n\nexport type RequestStream = (\n  audio: true,\n  video: boolean\n) => Promise<[stream: Stream | undefined, exception: RequestException | undefined]>;\n\nexport enum RequestException {\n  NotAllowed = \"NotAllowedError\",\n  NotFound = \"NotFoundError\",\n  Unknown = \"Unknown\",\n}\n\nexport function exceptionToString(exception: RequestException) {\n  if (exception === RequestException.NotAllowed)\n    return \"Access to microphone was denied. Please allow it from browser address bar.\";\n  if (exception === RequestException.NotFound) return \"No microphone found.\";\n  return \"Unable to connect access microphone. Please connect a microphone and refresh the page.\";\n}\n\nexport function useStreamRequest(platform: Platform, permissionState: PermissionState) {\n  const requestStream: RequestStream = useCallback(\n    (audio, video) =>\n      new Promise((resolve) => {\n        if (permissionState === \"denied\") {\n          resolve([undefined, RequestException.NotAllowed]);\n          return;\n        }\n        platform.mediaDevices\n          .getMediaTracks(audio, video)\n          .then((stream) => {\n            resolve([stream, undefined]);\n          })\n          .catch((e) => {\n            let exception = RequestException.Unknown;\n            if (e.name === RequestException.NotAllowed) {\n              exception = RequestException.NotAllowed;\n            }\n            if (e.name === RequestException.NotFound) {\n              exception = RequestException.NotFound;\n            }\n            resolve([undefined, exception]);\n          });\n      }),\n    [platform, permissionState]\n  );\n\n  return requestStream;\n}\n","import { useLocation, useMatch } from \"react-router-dom\";\n\nimport { aliasToRoomId } from \"../utils/matrixUtils\";\nimport { useHydrogen } from \"./useHydrogen\";\n\nfunction useWorld(): [string | undefined, string | undefined, string | undefined] {\n  const location = useLocation();\n\n  const worldMatch = useMatch({ path: \"world/:worldId/*\" });\n  const [alias, hashSearch] = location.hash.split(\"?\");\n  const reloadId = new URLSearchParams(location.search || hashSearch).get(\"reload\") ?? undefined;\n\n  const worldId = worldMatch?.params[\"worldId\"] ?? undefined;\n  return [worldId, alias.match(/^(#|!)\\S+:\\S+/) ? alias : undefined, reloadId];\n}\n\nexport function useWorldPath(): [string | undefined, string | undefined] {\n  const { session } = useHydrogen(true);\n  const [worldId, alias, reloadId] = useWorld();\n\n  const roomId = alias ? aliasToRoomId(session.rooms, alias) : worldId;\n  if (!roomId || !session.rooms.get(roomId)) return [undefined, undefined];\n  return [roomId, reloadId];\n}\n\nexport function useUnknownWorldPath(): [string | undefined, string | undefined] {\n  const { session } = useHydrogen(true);\n  const [worldId, alias] = useWorld();\n\n  if (worldId && session.rooms.get(worldId) === undefined) {\n    return [worldId, undefined];\n  }\n  if (alias && aliasToRoomId(session.rooms, alias) === undefined) {\n    return [undefined, alias];\n  }\n\n  return [undefined, undefined];\n}\n","import \"./ThumbnailImg.css\";\n\ninterface ThumbnailImgProps {\n  src: string;\n  alt?: string;\n}\n\nexport function ThumbnailImg({ src, alt }: ThumbnailImgProps) {\n  return <img className=\"ThumbnailImg\" draggable=\"false\" src={src} alt={alt} />;\n}\n","import{Slot as e}from\"@radix-ui/react-slot\";import*as r from\"react\";import t from\"@babel/runtime/helpers/esm/extends\";export const Primitive=[\"a\",\"button\",\"div\",\"h2\",\"h3\",\"img\",\"li\",\"nav\",\"ol\",\"p\",\"span\",\"svg\",\"ul\"].reduce(((o,i)=>({...o,[i]:/*#__PURE__*/r.forwardRef(((o,m)=>{const{asChild:a,...s}=o,n=a?e:i;return r.useEffect((()=>{window[Symbol.for(\"radix-ui\")]=!0}),[]),/*#__PURE__*/r.createElement(n,t({},s,{ref:m}))}))})),{});export const Root=Primitive;\n//# sourceMappingURL=index.module.js.map\n","import*as e from\"react\";export function createContext(t,n){const o=/*#__PURE__*/e.createContext(n);function r(t){const{children:n,...r}=t,c=e.useMemo((()=>r),Object.values(r));/*#__PURE__*/return e.createElement(o.Provider,{value:c},n)}return r.displayName=t+\"Provider\",[r,function(r){const c=e.useContext(o);if(c)return c;if(void 0!==n)return n;throw new Error(`\\`${r}\\` must be used within \\`${t}\\``)}]}export function createContextScope(n,o=[]){let r=[];const c=()=>{const t=r.map((t=>/*#__PURE__*/e.createContext(t)));return function(o){const r=(null==o?void 0:o[n])||t;return e.useMemo((()=>({[`__scope${n}`]:{...o,[n]:r}})),[o,r])}};return c.scopeName=n,[function(t,o){const c=/*#__PURE__*/e.createContext(o),u=r.length;function s(t){const{scope:o,children:r,...s}=t,i=(null==o?void 0:o[n][u])||c,a=e.useMemo((()=>s),Object.values(s));/*#__PURE__*/return e.createElement(i.Provider,{value:a},r)}return r=[...r,o],s.displayName=t+\"Provider\",[s,function(r,s){const i=(null==s?void 0:s[n][u])||c,a=e.useContext(i);if(a)return a;if(void 0!==o)return o;throw new Error(`\\`${r}\\` must be used within \\`${t}\\``)}]},t(c,...o)]}function t(...t){const n=t[0];if(1===t.length)return n;const o=()=>{const o=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const r=o.reduce(((e,{useScope:n,scopeName:o})=>({...e,...n(t)[`__scope${o}`]})),{});return e.useMemo((()=>({[`__scope${n.scopeName}`]:r})),[r])}};return o.scopeName=n.scopeName,o}\n//# sourceMappingURL=index.module.js.map\n","import{Primitive as e}from\"@radix-ui/react-primitive\";import{createContextScope as r}from\"@radix-ui/react-context\";import*as t from\"react\";import a from\"@babel/runtime/helpers/esm/extends\";const[n,o]=r(\"Progress\");export{o as createProgressScope};const[s,i]=n(\"Progress\");export const Progress=/*#__PURE__*/t.forwardRef(((r,n)=>{const{__scopeProgress:o,value:i,max:d,getValueLabel:v=u,...f}=r,x=p(d)?d:100,g=c(i,x)?i:null,P=m(g)?v(g,x):void 0;/*#__PURE__*/return t.createElement(s,{scope:o,value:g,max:x},/*#__PURE__*/t.createElement(e.div,a({\"aria-valuemax\":x,\"aria-valuemin\":0,\"aria-valuenow\":m(g)?g:void 0,\"aria-valuetext\":P,role:\"progressbar\",\"data-state\":l(g,x),\"data-value\":null!=g?g:void 0,\"data-max\":x},f,{ref:n})))}));/*#__PURE__*/Progress.propTypes={max(e,r,t){const a=e[r],n=String(a);return a&&!p(a)?new Error(function(e,r){return`Invalid prop \\`max\\` of value \\`${e}\\` supplied to \\`${r}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`100\\`.`}(n,t)):null},value(e,r,t){const a=e[r],n=String(a),o=p(e.max)?e.max:100;return null==a||c(a,o)?null:new Error(function(e,r){return`Invalid prop \\`value\\` of value \\`${e}\\` supplied to \\`${r}\\`. The \\`value\\` prop must be:\\n  - a positive number\\n  - less than the value passed to \\`max\\` (or 100 if no \\`max\\` prop is set)\\n  - \\`null\\` if the progress is indeterminate.\\n\\nDefaulting to \\`null\\`.`}(n,t))}};export const ProgressIndicator=/*#__PURE__*/t.forwardRef(((r,n)=>{var o;const{__scopeProgress:s,...u}=r,m=i(\"ProgressIndicator\",s);/*#__PURE__*/return t.createElement(e.div,a({\"data-state\":l(m.value,m.max),\"data-value\":null!==(o=m.value)&&void 0!==o?o:void 0,\"data-max\":m.max},u,{ref:n}))}));/*#__PURE__*/function u(e,r){return`${Math.round(e/r*100)}%`}function l(e,r){return null==e?\"indeterminate\":e===r?\"complete\":\"loading\"}function m(e){return\"number\"==typeof e}function p(e){return m(e)&&!isNaN(e)&&e>0}function c(e,r){return m(e)&&!isNaN(e)&&e<=r&&e>=0}export const Root=Progress;export const Indicator=ProgressIndicator;\n//# sourceMappingURL=index.module.js.map\n","import classNames from \"classnames\";\nimport * as RadixProgress from \"@radix-ui/react-progress\";\n\nimport \"./Progress.css\";\n\ninterface ProgressProps {\n  className?: string;\n  variant?: \"primary\" | \"secondary\" | \"danger\";\n  value: number;\n  max: number;\n  getValueLabel?: (value: number, max: number) => string;\n}\n\nexport function Progress({ className, variant = \"primary\", value, max, getValueLabel }: ProgressProps) {\n  const getWidth = (max: number, value: number) => Math.round((value / max) * 100);\n\n  return (\n    <RadixProgress.Root\n      className={classNames(\"Progress\", `Progress--${variant}`, className)}\n      value={value}\n      max={max}\n      getValueLabel={getValueLabel}\n    >\n      <RadixProgress.Indicator style={{ width: `${getWidth(max, value)}%` }} className=\"Progress__indicator\" />\n    </RadixProgress.Root>\n  );\n}\n","import { Room, Session } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { roomIdToAlias } from \"../utils/matrixUtils\";\nimport { useWorldLoader } from \"./useWorldLoader\";\n\nlet worldReloadId = 0;\n\nexport function useWorldNavigator(session: Session) {\n  const navigate = useNavigate();\n  const { exitWorld } = useWorldLoader();\n\n  const navigateEnterWorld = useCallback(\n    (\n      world: Room,\n      options?: {\n        reload?: boolean;\n      }\n    ) => {\n      const { reload } = options ?? {};\n\n      const worldAlias = roomIdToAlias(session.rooms, world.id);\n      const reloadPath = reload ? `?reload=${++worldReloadId}` : \"\";\n\n      navigate(`/world/${worldAlias ?? world.id}${reloadPath}`);\n    },\n    [session.rooms, navigate]\n  );\n\n  const navigateExitWorld = useCallback(() => {\n    exitWorld();\n    navigate(\"/\");\n  }, [navigate, exitWorld]);\n\n  return {\n    navigateEnterWorld,\n    navigateExitWorld,\n  };\n}\n","import { useEffect, useState } from \"react\";\nimport { Room, Timeline } from \"@thirdroom/hydrogen-view-sdk\";\n\nexport type TimelineType = Array<any>;\n\nexport function useRoomTimeline(room?: Room) {\n  const [timeline, setTimeline] = useState<TimelineType>([]);\n\n  useEffect(() => {\n    if (!room) return;\n    let unSub: () => void;\n    const handleLoad = (timeline: Timeline) => {\n      const entries = timeline.entries;\n      unSub = entries.subscribe({\n        onReset: () => setTimeline(Array.from(entries)),\n        onAdd: () => setTimeline(Array.from(entries)),\n        onUpdate: () => setTimeline(Array.from(entries)),\n        onMove: () => setTimeline(Array.from(entries)),\n        onRemove: () => setTimeline(Array.from(entries)),\n      });\n      setTimeline(Array.from(entries));\n    };\n\n    if (room._timeline?.entries) {\n      handleLoad(room._timeline);\n    } else {\n      room.openTimeline().then(handleLoad);\n    }\n    return () => {\n      unSub?.();\n    };\n  }, [room]);\n\n  return timeline;\n}\n","import { Room } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { useRoomTimeline, TimelineType } from \"./useRoomTimeline\";\n\nexport function useRecentMessage(room?: Room) {\n  const getRecentMessage = (timeline?: TimelineType) => {\n    if (!timeline || timeline.length === 0) return undefined;\n    for (let i = timeline.length - 1; i >= 0; i -= 1) {\n      const entry = timeline[i];\n      const event = entry?.event;\n      if (event?.type === \"m.room.encrypted\") return entry;\n      if (event?.type === \"m.room.message\") return entry;\n    }\n    return undefined;\n  };\n\n  return getRecentMessage(useRoomTimeline(room));\n}\n","export default \"__VITE_ASSET__b9cb5e7d__\"","export default \"__VITE_ASSET__02935834__\"","export default \"__VITE_ASSET__d140265e__\"","export default \"__VITE_ASSET__0ef3308d__\"","import { useState } from \"react\";\n\nexport function useMicrophoneState(): [isUsable: boolean, setState: (nextState: boolean) => void] {\n  const [mic, setMic] = useState(localStorage.getItem(\"microphone\") === \"true\");\n  localStorage.setItem(\"microphone\", mic.toString());\n\n  return [mic, setMic];\n}\n","import { useState, useCallback, useEffect } from \"react\";\nimport { GroupCall, Stream } from \"@thirdroom/hydrogen-view-sdk\";\n\nexport type MuteHandler = (requestStream: () => Promise<Stream | undefined>) => void;\n\nexport function useCallMute(call?: GroupCall) {\n  const getMuteState = useCallback(() => {\n    return call?.muteSettings?.microphone ?? false;\n  }, [call]);\n\n  const [mute, setMute] = useState(getMuteState());\n\n  useEffect(() => {\n    setMute(getMuteState());\n    return call?.disposableOn(\"change\", () => {\n      setMute(getMuteState());\n    });\n  }, [call, getMuteState]);\n\n  const toggleMute = useCallback(() => {\n    if (!call) return;\n\n    const { muteSettings } = call;\n\n    const newMuteState = !getMuteState();\n\n    setMute(newMuteState);\n\n    if (!muteSettings) {\n      setMute(getMuteState());\n      return;\n    }\n\n    setTimeout(async () => {\n      await call.setMuted(muteSettings.toggleMicrophone());\n      setMute(getMuteState());\n    });\n\n    return newMuteState;\n  }, [call, getMuteState]);\n\n  const handleMute: MuteHandler = async (requestStream) => {\n    if (!call) return;\n    if (call.localMedia?.userMedia) {\n      toggleMute();\n      return;\n    }\n\n    const stream = await requestStream();\n    if (!stream) return;\n    const localMedia = call.localMedia?.withUserMedia(stream);\n    if (!localMedia) return;\n    call.setMedia(localMedia);\n  };\n\n  return { mute, toggleMute, handleMute };\n}\n","import { useState } from \"react\";\nimport { GroupCall, Stream } from \"@thirdroom/hydrogen-view-sdk\";\n\nimport { usePermissionState } from \"../../hooks/usePermissionState\";\nimport { useMicrophoneState } from \"../../hooks/useMicrophoneState\";\nimport { useHydrogen } from \"../../hooks/useHydrogen\";\nimport { exceptionToString, RequestException, RequestStream, useStreamRequest } from \"../../hooks/useStreamRequest\";\nimport { AlertDialog } from \"../session/dialogs/AlertDialog\";\nimport { MuteHandler, useCallMute } from \"../../hooks/useCallMute\";\nimport { Text } from \"../../atoms/text/Text\";\n\nexport const MicExceptionDialog = ({\n  micException,\n  setMicException,\n}: {\n  micException: RequestException | undefined;\n  setMicException: (value: undefined | RequestException) => void;\n}) => {\n  return micException ? (\n    <AlertDialog\n      open={!!micException}\n      title=\"Microphone\"\n      content={<Text variant=\"b2\">{exceptionToString(micException)}</Text>}\n      requestClose={() => setMicException(undefined)}\n    />\n  ) : null;\n};\n\nexport const useMuteButton = (\n  activeCall?: GroupCall\n): {\n  mute: boolean;\n  requestStream: RequestStream;\n  handleMute: MuteHandler;\n  micException: RequestException | undefined;\n  setMicException: (value: RequestException | undefined) => void;\n} => {\n  const { platform } = useHydrogen(true);\n  const micPermission = usePermissionState(\"microphone\");\n  const requestStream = useStreamRequest(platform, micPermission);\n  const [micException, setMicException] = useState<RequestException>();\n  const [microphone, setMicrophone] = useMicrophoneState();\n  const { mute: callMute, handleMute } = useCallMute(activeCall);\n  if (callMute === microphone) {\n    setMicrophone(!microphone);\n  }\n\n  return { mute: callMute, requestStream, handleMute, micException, setMicException };\n};\n\nexport const manageMuteRequest = async (\n  requestStream: RequestStream,\n  setMicException: (value: undefined | RequestException) => void\n): Promise<Stream | undefined> => {\n  const [stream, exception] = await requestStream(true, false);\n  if (stream) return stream;\n  setMicException(exception);\n  return undefined;\n};\n","import { useEffect } from \"react\";\n\nimport { InputModule } from \"../../engine/input/input.main\";\nimport { getModule } from \"../../engine/module/module.common\";\nimport { PlayerModule } from \"../../engine/player/Player.main\";\nimport { useMainThreadContext } from \"./useMainThread\";\n\nexport function useDisableInput(state = true) {\n  const mainThread = useMainThreadContext();\n\n  useEffect(() => {\n    if (!state) {\n      return;\n    }\n\n    const inputModule = getModule(mainThread, InputModule);\n    const cameraRigModule = getModule(mainThread, PlayerModule);\n\n    if (\n      inputModule.disableInputStack.length === 0 &&\n      !cameraRigModule.orbiting &&\n      document.pointerLockElement === mainThread.canvas\n    ) {\n      document.exitPointerLock();\n    }\n\n    const stackId = inputModule.nextStackId++;\n\n    inputModule.disableInputStack.push(stackId);\n\n    return () => {\n      const index = inputModule.disableInputStack.indexOf(stackId);\n\n      if (index !== -1) {\n        inputModule.disableInputStack.splice(index, 1);\n      }\n\n      if (inputModule.disableInputStack.length === 0 && !cameraRigModule.orbiting && mainThread.canvas.isConnected) {\n        mainThread.canvas.requestPointerLock();\n      }\n    };\n  }, [state, mainThread]);\n}\n","import { atom } from \"jotai\";\n\nexport const worldChatVisibilityAtom = atom<boolean>(false);\n","import { ReactNode } from \"react\";\nimport classNames from \"classnames\";\n\nimport { Text } from \"../text/Text\";\nimport \"./Kbd.css\";\n\ninterface KbdProps {\n  className?: string;\n  variant?: \"surface\" | \"world\";\n  size?: \"xs\" | \"sm\" | \"md\" | \"lg\";\n  children: ReactNode;\n}\n\nexport function Kbd({ variant = \"surface\", size = \"md\", children }: KbdProps) {\n  let textSize: \"b1\" | \"b2\" | \"b3\" = \"b1\";\n  if (size === \"sm\") textSize = \"b2\";\n  if (size === \"xs\") textSize = \"b3\";\n\n  return (\n    <kbd className={classNames(\"Kbd\", `Kbd--${variant} Kbd--${size}`)}>\n      {typeof children === \"string\" ? (\n        <Text weight=\"medium\" variant={textSize} color={variant} type=\"span\">\n          {children}\n        </Text>\n      ) : (\n        children\n      )}\n    </kbd>\n  );\n}\n","export const NametagsEnableMessage = \"nametags-enable-message\";\nexport const NametagsMessage = \"nametags-message\";\n\n// main->game\nexport type NametagsEnableMessageType = {\n  type: typeof NametagsEnableMessage;\n  enabled: boolean;\n};\n","import { ReactNode } from \"react\";\n\nimport { Kbd } from \"../../../atoms/keyboard/Kbd\";\nimport { Icon } from \"../../../atoms/icon/Icon\";\nimport MouseIC from \"../../../../../res/ic/mouse-left.svg\";\nimport { Category } from \"../../components/category/Category\";\nimport { CategoryHeader } from \"../../components/category/CategoryHeader\";\nimport { Label } from \"../../../atoms/text/Label\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport \"./ShortcutUI.css\";\n\nexport function ShortcutUI() {\n  const renderItem = (name: string, kbd: ReactNode) => (\n    <div className=\"flex items-center\">\n      <Text variant=\"b2\" className=\"grow\">\n        {name}\n      </Text>\n      <div className=\"inline-flex items-center gap-xs\">{kbd}</div>\n    </div>\n  );\n\n  return (\n    <div className=\"ShortcutUI\">\n      <div className=\"ShortcutUI__main\">\n        <Text className=\"flex flex-column items-center gap-xs\">\n          <Kbd size=\"lg\">W</Kbd>\n          <span className=\"flex items-center gap-xs\">\n            <Kbd size=\"lg\">A</Kbd>\n            <Kbd size=\"lg\">S</Kbd>\n            <Kbd size=\"lg\">D</Kbd>\n          </span>\n        </Text>\n        <Text className=\"text-center\" style={{ marginTop: \"var(--sp-lg)\" }}>\n          Use the WASD keys and mouse to move around and explore worlds.\n        </Text>\n      </div>\n      <Category header={<CategoryHeader title=\"Action\" options={<Label>Key</Label>} />}>\n        <div className=\"ShortcutUI__list\">\n          {renderItem(\"Run\", <Kbd size=\"xs\">Shift</Kbd>)}\n          {renderItem(\"Jump\", <Kbd size=\"xs\">Space</Kbd>)}\n          {renderItem(\n            \"Spawn Objects\",\n            <>\n              <Kbd size=\"xs\">1</Kbd> - <Kbd size=\"xs\">6</Kbd>\n            </>\n          )}\n          {renderItem(\n            \"Grab/Drop Object\",\n            <>\n              <Kbd size=\"xs\">E</Kbd>\n            </>\n          )}\n          {renderItem(\n            \"Grab/Throw Object\",\n            <>\n              <Icon src={MouseIC} />\n            </>\n          )}\n          {renderItem(\"Delete Object\", <Kbd size=\"xs\">X</Kbd>)}\n          {renderItem(\"Fly Mode\", <Kbd size=\"xs\">B</Kbd>)}\n          {renderItem(\"Third Person Camera Toggle\", <Kbd size=\"xs\">V</Kbd>)}\n          {renderItem(\n            \"Show Statistics\",\n            <>\n              <Kbd size=\"xs\">Ctrl</Kbd>\n              <span>+</span>\n              <Kbd size=\"xs\">Shift</Kbd>\n              <span>+</span>\n              <Kbd size=\"xs\">S</Kbd>\n            </>\n          )}\n        </div>\n      </Category>\n    </div>\n  );\n}\n","import { GroupCall, Room } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useSetAtom } from \"jotai\";\nimport { useRegisterActions } from \"kbar\";\nimport { useCallback, useState } from \"react\";\n\nimport { Thread } from \"../../../../engine/module/module.common\";\nimport { NametagsEnableMessage, NametagsEnableMessageType } from \"../../../../engine/player/nametags.common\";\nimport { IconButton } from \"../../../atoms/button/IconButton\";\nimport { Dialog } from \"../../../atoms/dialog/Dialog\";\nimport { Header } from \"../../../atoms/header/Header\";\nimport { HeaderTitle } from \"../../../atoms/header/HeaderTitle\";\nimport { Scroll } from \"../../../atoms/scroll/Scroll\";\nimport { useHydrogen } from \"../../../hooks/useHydrogen\";\nimport { useMainThreadContext } from \"../../../hooks/useMainThread\";\nimport { OverlayWindow, overlayWindowAtom } from \"../../../state/overlayWindow\";\nimport { overlayVisibilityAtom } from \"../../../state/overlayVisibility\";\nimport { manageMuteRequest, MicExceptionDialog, useMuteButton } from \"../../components/MuteButtonProvider\";\nimport { MemberListDialog } from \"../dialogs/MemberListDialog\";\nimport { ShortcutUI } from \"../world/ShortcutUI\";\nimport CrossIC from \"../../../../../res/ic/cross.svg\";\nimport { useDisableInput } from \"../../../hooks/useDisableInput\";\nimport { togglePhysicsDebug } from \"../../../../engine/renderer/renderer.main\";\n\nenum ActionSection {\n  Global = \"Global\",\n  World = \"World\",\n}\n\nexport const useUserProfileAction = () => {\n  const setOverlayWindow = useSetAtom(overlayWindowAtom);\n  const setOverlayVisibilityAtom = useSetAtom(overlayVisibilityAtom);\n\n  useRegisterActions(\n    [\n      {\n        id: \"user-profile\",\n        name: \"User Profile\",\n        shortcut: undefined,\n        keywords: \"user profile\",\n        section: ActionSection.Global,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => {\n          setOverlayVisibilityAtom(true);\n          setOverlayWindow({ type: OverlayWindow.UserProfile });\n        },\n        parent: undefined,\n      },\n    ],\n    []\n  );\n};\n\nexport const useAccountManagementAction = () => {\n  const { session } = useHydrogen(true);\n  const { accountManagementUrl } = session.sessionInfo;\n\n  useRegisterActions(\n    [\n      {\n        id: \"manage-account\",\n        name: \"Manage Account\",\n        shortcut: undefined,\n        keywords: \"account\",\n        section: ActionSection.Global,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => window.open(accountManagementUrl),\n        parent: undefined,\n      },\n    ],\n    [accountManagementUrl]\n  );\n};\n\nexport const useLandingPageAction = () => {\n  useRegisterActions(\n    [\n      {\n        id: \"landing-page\",\n        name: \"Landing Page\",\n        shortcut: undefined,\n        keywords: \"landing home preview\",\n        section: ActionSection.Global,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => {\n          document.location = \"/landing\";\n        },\n        parent: undefined,\n      },\n    ],\n    []\n  );\n};\n\nexport const MuteButtonAction = ({\n  activeCall,\n  showToast,\n}: {\n  activeCall?: GroupCall;\n  showToast?: (text: string) => void;\n}) => {\n  const { mute, requestStream, handleMute, micException, setMicException } = useMuteButton(activeCall);\n\n  useRegisterActions(\n    [\n      {\n        id: \"toggle-mute\",\n        name: \"Toggle Mute\",\n        shortcut: [\"M\"],\n        keywords: \"mute\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => {\n          showToast?.(!mute ? \"Microphone Muted\" : \"Microphone Unmuted\");\n          handleMute(async () => manageMuteRequest(requestStream, setMicException));\n        },\n        parent: undefined,\n      },\n    ],\n    [requestStream, showToast, mute]\n  );\n\n  return <MicExceptionDialog micException={micException} setMicException={setMicException} />;\n};\n\nexport const useToggleNamesAction = (\n  showNames: boolean,\n  setShowNames: (value: boolean) => void,\n  showToast?: (text: string) => void\n) => {\n  const mainThread = useMainThreadContext();\n\n  const toggleShowNames = useCallback(() => {\n    const enabled = !showNames;\n    setShowNames(enabled);\n    mainThread.sendMessage<NametagsEnableMessageType>(Thread.Game, { type: NametagsEnableMessage, enabled });\n    showToast?.(enabled ? \"Show Names\" : \"Hide Names\");\n  }, [mainThread, showNames, showToast, setShowNames]);\n\n  useRegisterActions(\n    [\n      {\n        id: \"toggle-names\",\n        name: \"Toggle Names\",\n        shortcut: [\"N\"],\n        keywords: \"preview\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => toggleShowNames(),\n        parent: undefined,\n      },\n    ],\n    [toggleShowNames]\n  );\n};\n\nexport const MembersDialogAction = ({ world }: { world: Room }) => {\n  const [showActiveMembers, setShowActiveMembers] = useState<boolean>(false);\n\n  useDisableInput(showActiveMembers);\n\n  useRegisterActions(\n    [\n      {\n        id: \"members-dialog\",\n        name: \"Members\",\n        shortcut: [\"P\"],\n        keywords: \"members\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => setShowActiveMembers((state) => !state),\n        parent: undefined,\n      },\n    ],\n    []\n  );\n\n  return (\n    <Dialog open={showActiveMembers} onOpenChange={setShowActiveMembers}>\n      <MemberListDialog room={world} requestClose={() => setShowActiveMembers(false)} />\n    </Dialog>\n  );\n};\n\nexport const ShortcutDialogAction = () => {\n  const [shortcutUI, setShortcutUI] = useState(false);\n\n  useRegisterActions(\n    [\n      {\n        id: \"shortcuts-dialog\",\n        name: \"Shortcuts\",\n        shortcut: [\"/\"],\n        keywords: \"shortcuts\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => setShortcutUI((state) => !state),\n        parent: undefined,\n      },\n    ],\n    []\n  );\n\n  useDisableInput(shortcutUI);\n\n  return (\n    <Dialog open={shortcutUI} onOpenChange={setShortcutUI}>\n      <Header\n        left={<HeaderTitle size=\"lg\">Controls</HeaderTitle>}\n        right={<IconButton iconSrc={CrossIC} onClick={() => setShortcutUI((state) => !state)} label=\"Close\" />}\n      />\n      <div className=\"flex\" style={{ height: \"600px\" }}>\n        <Scroll type=\"hover\">\n          <ShortcutUI />\n        </Scroll>\n      </div>\n    </Dialog>\n  );\n};\n\nexport const useToggleEditorAction = (\n  setOpen: (value: boolean | ((value: boolean) => boolean)) => void,\n  havePermission: boolean,\n  showToast?: (text: string) => void\n) => {\n  useRegisterActions(\n    [\n      {\n        id: \"editor\",\n        name: \"Toggle Editor\",\n        shortcut: [\"`\"],\n        keywords: \"editor\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => {\n          if (havePermission) {\n            setOpen((state) => !state);\n          } else {\n            showToast?.(\"You don't have permission to edit this scene.\");\n          }\n        },\n        parent: undefined,\n      },\n    ],\n    [havePermission]\n  );\n};\n\nexport const useTogglePhysicsDebugAction = () => {\n  const mainThread = useMainThreadContext();\n\n  useRegisterActions(\n    [\n      {\n        id: \"physics-debug\",\n        name: \"Toggle Physics Debug\",\n        keywords: \"physics debug\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => {\n          togglePhysicsDebug(mainThread);\n        },\n        parent: undefined,\n      },\n    ],\n    [mainThread]\n  );\n};\n\nexport const useToggleStatsAction = (setOpen: (value: boolean | ((value: boolean) => boolean)) => void) => {\n  useRegisterActions(\n    [\n      {\n        id: \"stats\",\n        name: \"Toggle Stats\",\n        shortcut: [\"Shift+Control+S\"],\n        keywords: \"stats\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => setOpen((state) => !state),\n        parent: undefined,\n      },\n    ],\n    []\n  );\n};\n\nexport const EnterWebXRAction = ({ enter }: { enter: () => void }) => {\n  useRegisterActions(\n    [\n      {\n        id: \"webxr\",\n        name: \"Enter WebXR\",\n        shortcut: [\"Alt+X\"],\n        keywords: \"webxr\",\n        section: ActionSection.World,\n        icon: undefined,\n        subtitle: undefined,\n        perform: () => enter(),\n        parent: undefined,\n      },\n    ],\n    []\n  );\n\n  return null;\n};\n"],"names":["hashCode","str","hash","i","chr","getIdentifierColorNumber","id","getAvatarHttpUrl","avatarUrl","cssSize","platform","mediaRepository","imageSize","getHttpUrl","session","Avatar","className","style","name","bgColor","fgColor","shape","imageSrc","size","onClick","isFallback","setIsFallback","useState","textSize","avatarClass","classNames","props","useEffect","content","jsx","Text","PeopleIC","BadgeWrapper","badge","children","NotificationBadge","variant","hasContent","notifClass","useObservable","observableFactory","createHandler","getInitialValue","deps","isMounted","useIsMounted","forceUpdate","useReducer","v","valueRef","useRef","subscriptionHandle","useMemo","update","value","observable","unsubscribe","OverlayWindow","overlayWindowAtom","atom","InfoIC","initialState","useAsync","promiseFactory","state","setState","cancelled","error","useSearchProfile","limit","hsApi","searchTerm","setSearchTerm","loading","data","searchData","profile","ProfileSuggestion","suggestion","onSelect","useHydrogen","SettingTile","Label","Scroll","index","Tooltip","jsxs","Chip","e","p","_a","_b","chatTileClassForEntry","entry","GapTile","TextTile","ImageTile","RoomMemberTile","EncryptedEventTile","worldChatTileClassForEntry","TRRoomViewModel","ViewModel","options","__publicField","room","tileClassForEntry","ComposerViewModel","timeline","TimelineViewModel","Tile","message","msgtype","useRoomViewModel","logger","urlRouter","navigation","roomViewModel","useEmbedTimeline","host","timelineViewModel","viewClassForTile","timelineView","HydrogenTimelineView","tvDOM","useObservableMap","WorldPreviewCard","title","desc","memberCount","onMembersClick","Icon","PeoplesIC","useRoom","roomIdOrAlias","roomId","aliasToRoomId","rooms","AddUserIC","VolumeUpIC","MemberTile","avatar","useRoomMembers","members","setMembers","activeMembers","setActiveMembers","getMembers","m","member","unsubscribeMemberListObservable","mList","groupCall","getRoomCall","unsubscribeCallMemberListObservable","getActiveMembers","callMember","MoreHorizontalIC","ChevronRightIC","Category","header","CategoryHeader","before","after","catContent","Fragment","useStateEventKeyCallback","eventType","stateKey","callback","unSub","stateObservable","event","DefaultPowerLevels","usePowerLevels","powerLevels","setPowerLevels","useCallback","stateEvent","getPowerLevel","userId","usersDefault","users","canSendEvent","powerLevel","events","eventsDefault","canSendStateEvent","stateDefault","canDoAction","action","requiredPL","MXID_REG","InviteDialog","requestClose","formRef","inviting","setInviting","inviteList","setInviteList","searchResult","addInvite","produce","draftList","removeInvite","handleAddInvite","form","inviteUser","userIds","promise","handleSubmit","evt","debouncedSuggestProfile","useDebounce","term","Header","HeaderTitle","IconButton","CrossIC","Input","result","Button","Dots","useCalls","useRoomCall","calls","lerp","x","y","a","invlerp","clamp","range","x1","y1","x2","y2","useAnimationFrame","enabled","requestRef","previousTimeRef","animate","time","deltaTime","opacityRange","scaleRange","Nametag","nametag","joined","containerRef","speaking","setSpeaking","memberCall","volumeDetector","screenX","screenY","distanceFromCamera","inFrustum","el","opacity","scale","_c","Nametags","show","engine","useMainThreadContext","worldId","useAtomValue","worldAtom","nametags","setNametags","onNametagsChanged","audioModule","getModule","AudioModule","ActiveMemberTile","renderTile","isSpeaking","MemberListDialog","active","invited","leaved","banned","inviteOpen","setInviteOpen","isWorld","filteredJoined","myPL","canInvite","canKick","canBan","activeCat","setActiveCat","joinedCat","setJoinedCat","invitedCat","setInvitedCat","leaveCat","setLeaveCat","banCat","setBanCat","invite","disInvite","kick","ban","unban","makeMember","setPowerLevel","makeMod","makeAdmin","toggleMute","toggleMutePeer","callMembers","renderMemberTile","membership","userPL","menuItems","DropdownMenuItem","isPeerMuted","removePeer","DropdownMenu","Dialog","ChevronBottomIC","usePermissionState","permissionStatus","handlePermissionChange","permStatus","exceptionToString","exception","useStreamRequest","permissionState","audio","video","resolve","stream","useWorld","location","useLocation","worldMatch","useMatch","alias","hashSearch","reloadId","useWorldPath","useUnknownWorldPath","ThumbnailImg","src","alt","Primitive","o","r.forwardRef","s","n","r.useEffect","r.createElement","t","createContextScope","r","c","e.createContext","e.useMemo","u","e.createElement","e.useContext","Progress","t.forwardRef","d","f","g","P","t.createElement","l","ProgressIndicator","Root","Indicator","max","getValueLabel","getWidth","RadixProgress.Root","RadixProgress.Indicator","worldReloadId","useWorldNavigator","navigate","useNavigate","exitWorld","useWorldLoader","navigateEnterWorld","world","reload","worldAlias","roomIdToAlias","reloadPath","navigateExitWorld","useRoomTimeline","setTimeline","handleLoad","entries","useRecentMessage","MicIC","MicOffIC","CallCrossIC","MessageIC","useMicrophoneState","mic","setMic","useCallMute","call","getMuteState","mute","setMute","muteSettings","newMuteState","requestStream","localMedia","MicExceptionDialog","micException","setMicException","AlertDialog","useMuteButton","activeCall","micPermission","microphone","setMicrophone","callMute","handleMute","manageMuteRequest","useDisableInput","mainThread","inputModule","InputModule","cameraRigModule","PlayerModule","stackId","worldChatVisibilityAtom","Kbd","NametagsEnableMessage","ShortcutUI","renderItem","kbd","MouseIC","useUserProfileAction","setOverlayWindow","useSetAtom","setOverlayVisibilityAtom","overlayVisibilityAtom","useRegisterActions","useAccountManagementAction","accountManagementUrl","useLandingPageAction","MuteButtonAction","showToast","useToggleNamesAction","showNames","setShowNames","toggleShowNames","Thread","MembersDialogAction","showActiveMembers","setShowActiveMembers","ShortcutDialogAction","shortcutUI","setShortcutUI","useToggleEditorAction","setOpen","havePermission","useTogglePhysicsDebugAction","togglePhysicsDebug","useToggleStatsAction","EnterWebXRAction","enter"],"mappings":"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","x_google_ignoreList":[36,37,38]}