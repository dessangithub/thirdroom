import{k as a,b as y,r as W,d as x,a as l,F as T,c as I}from"./main.cc7980d7.js";import{o as U,w as A,c as E}from"./overlayVisibility-d52fa692.js";import{o as P}from"./common-1b4c5772.js";function N(){const d=a(U),{worldId:m,entered:g}=a(A),w=a(E),r=d??m,{session:t}=y(!0),[e,s]=W.useState(),c=x();return W.useEffect(()=>{let u=!1;const f=r?t.rooms.get(r):void 0;return f?f.getStateEvent("org.matrix.msc3815.world").then(n=>{var h,b;const o=(b=(h=n==null?void 0:n.event)==null?void 0:h.content)==null?void 0:b.scene_preview_url;let i=o;if(typeof o=="string"&&o.startsWith("mxc:")){i=t.mediaRepository.mxcUrlThumbnail(o,32,32,"crop");const v=t.mediaRepository.mxcUrl(o);v&&P(v).then(p=>{u||!c()||s({url:p,thumbnail:p})})}typeof i=="string"&&s({thumbnail:i})}):s(void 0),()=>{u=!0}},[t,r,c]),(!w||m===d)&&g?l(T,{}):l("div",{className:I("WorldThumbnail",{"WorldThumbnail--blur":e&&!(e!=null&&e.url)}),children:e&&l("img",{alt:"World Preview",src:e.url??e.thumbnail})})}export{N as W};
//# sourceMappingURL=WorldThumbnail-72ae1991.js.map
