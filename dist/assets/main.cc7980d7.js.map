{"version":3,"mappings":"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","names":["getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","toObject","val","shouldUseNative","test1","test2","i","order2","n","test3","letter","objectAssign","target","source","from","to","symbols","key","l","require$$0","p","react_production_min","q","r","t","u","v","w","x","y","a","z","b","c","A","B","C","D","E","F","G","H","I","J","e","d","k","h","g","f","m","K","L","escape","M","N","O","P","Q","R","S","T","reactModule","require$$1","reactJsxRuntime_production_min","jsxRuntimeModule","exports","U","V","W","schedulerModule","aa","require$$2","ba","ca","da","ea","fa","ha","ia","ja","ka","la","ma","na","oa","pa","qa","ra","sa","ta","ua","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","$a","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","oc","pc","qc","rc","sc","tc","uc","vc","wc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","If","Jf","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Kg","Hg","Ig","Jg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","X","Y","qj","rj","sj","tj","uj","vj","wj","Z","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","va","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","reactDom_production_min","checkDCE","err","reactDomModule","_extends","Action","readOnly","obj","BeforeUnloadEventType","PopStateEventType","createBrowserHistory","options","_options","_options$window","window","globalHistory","getIndexAndLocation","_window$location","pathname","search","hash","state","blockedPopTx","handlePop","blockers","nextAction","_getIndexAndLocation","nextIndex","nextLocation","delta","index","go","applyTx","action","_getIndexAndLocation2","location","listeners","createEvents","createHref","createPath","getNextLocation","parsePath","createKey","getHistoryStateAndUrl","allowTx","retry","_getIndexAndLocation3","push","_getHistoryStateAndUr","historyState","url","replace","_getHistoryStateAndUr2","history","listener","blocker","unblock","promptBeforeUnload","event","handlers","fn","handler","arg","_ref","_ref$pathname","_ref$search","_ref$hash","path","parsedPath","hashIndex","searchIndex","NavigationContext","createContext","LocationContext","RouteContext","invariant","cond","message","matchRoutes","routes","locationArg","basename","stripBasename","branches","flattenRoutes","rankRouteBranches","matches","matchRouteBranch","parentsMeta","parentPath","route","meta","joinPaths","routesMeta","computeScore","compareIndexes","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","s","segments","initialScore","score","segment","branch","matchedParams","matchedPathname","end","remainingPathname","match","matchPath","normalizePathname","pattern","matcher","paramNames","compilePath","pathnameBase","captureGroups","memo","paramName","splatValue","safelyDecodeURIComponent","caseSensitive","regexpSource","_","value","resolvePath","fromPathname","toPathname","resolvePathname","normalizeSearch","normalizeHash","relativePath","resolveTo","toArg","routePathnames","locationPathname","routePathnameIndex","toSegments","nextChar","paths","useInRouterContext","useContext","useLocation","useNavigationType","useMatch","useMemo","useNavigate","navigator","routePathnamesJson","activeRef","useRef","useEffect","useCallback","OutletContext","useOutlet","context","outlet","createElement","useRoutes","parentMatches","routeMatch","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","_renderMatches","Navigate","_ref2","navigate","Outlet","props","Route","_props","Router","_ref3","basenameProp","children","locationProp","navigationType","staticProp","navigationContext","trailingPathname","Routes","_ref4","createRoutesFromChildren","Children","element","isValidElement","Fragment","BrowserRouter","historyRef","setState","useState","useLayoutEffect","useSearchParams","defaultInit","defaultSearchParamsRef","createSearchParams","searchParams","setSearchParams","nextInit","navigateOptions","init","o","nn","rn","tn","j","en","on","un","an","isBrowserBundle","isNodeEnv","dynamicRequire","mod","request","loadModule","moduleName","cwd","fallbackGlobalObject","getGlobalObject","getGlobalSingleton","name","creator","global","__SENTRY__","singleton","objectToString","isError","wat","isInstanceOf","isBuiltin","className","isErrorEvent","isDOMError","isDOMException","isString","isPrimitive","isPlainObject","isEvent","isElement","isRegExp","isThenable","isSyntheticEvent","isNaN","base","htmlTreeAsString","elem","keyAttrs","currentElem","MAX_TRAVERSE_HEIGHT","MAX_OUTPUT_LEN","out","height","len","separator","sepLength","nextStr","_htmlElementAsString","el","classes","attr","keyAttrPairs","keyAttr","keyAttrPair","allowedAttrs","getLocationHref","getDomElement","selector","SentryError","logLevel","DSN_REGEX","isValidProtocol","protocol","dsnToString","dsn","withPassword","host","pass","port","projectId","publicKey","dsnFromString","str","lastPath","split","projectMatch","dsnFromComponents","components","validateDsn","requiredComponents","component","makeDsn","PREFIX","CONSOLE_LEVELS","consoleSandbox","callback","originalConsole","wrappedLevels","level","originalWrappedFunc","makeLogger","enabled","logger","args","truncate","max","safeJoin","input","delimiter","output","isMatchingPattern","fill","replacementFactory","original","wrapped","markFunctionWrapped","addNonEnumerableProperty","proto","getOriginalFunction","func","urlEncode","object","convertToPlainObject","getOwnProperties","newObj","serializeEventTarget","extractedProps","property","extractExceptionKeysForMessage","exception","maxLength","keys","includedKeys","serialized","dropUndefinedKeys","inputValue","memoizationMap","_dropUndefinedKeys","memoVal","returnValue","item","_nullishCoalesce","lhs","rhsFn","_optionalChain","ops","lastAccessLHS","op","STACKTRACE_LIMIT","createStackParser","parsers","sortedParsers","stack","skipFirst","frames","line","cleanedLine","parser","frame","stripSentryFramesAndReverse","stackParserFromStackParserOptions","stackParser","localStack","firstFrameFunction","lastFrameFunction","defaultFunctionName","getFunctionName","supportsFetch","isNativeFetch","supportsNativeFetch","result","doc","sandbox","supportsHistory","chrome","isChromePackagedApp","hasHistoryApi","instrumented","instrument","type","instrumentConsole","instrumentDOM","instrumentXHR","instrumentFetch","instrumentHistory","instrumentError","instrumentUnhandledRejection","addInstrumentationHandler","triggerHandlers","data","originalConsoleMethod","originalFetch","handlerData","getFetchMethod","getFetchUrl","response","error","fetchArgs","xhrproto","originalOpen","xhr","xhrInfo","onreadystatechangeHandler","readyStateArgs","originalSend","lastHref","oldOnPopState","historyReplacementFunction","originalHistoryFunction","debounceDuration","debounceTimerID","lastCapturedEvent","shouldShortcircuitPreviousDebounce","previous","current","shouldSkipDOMEvent","makeDOMEventHandler","globalListener","triggerDOMHandler","globalDOMEventHandler","originalAddEventListener","handlerForType","originalRemoveEventListener","_oldOnErrorHandler","msg","column","_oldOnUnhandledRejectionHandler","memoBuilder","hasWeakSet","inner","memoize","unmemoize","uuid4","crypto","getRandomByte","getFirstException","getEventDescription","eventId","firstException","addExceptionTypeValue","values","addExceptionMechanism","newMechanism","defaultMechanism","currentMechanism","mergedData","checkOrSetAlreadyCaught","arrayify","maybeArray","normalize","depth","maxProperties","visit","normalizeToSize","maxSize","normalized","jsonSize","stringified","stringifyValue","valueWithToJSON","jsonValue","numAdded","visitable","visitKey","visitValue","utf8Length","States","PENDING","RESOLVED","REJECTED","resolvedSyncPromise","SyncPromise","resolve","rejectedSyncPromise","reason","reject","executor","onfulfilled","onrejected","onfinally","isRejected","cachedHandlers","makePromiseBuffer","limit","buffer","isReady","remove","task","add","taskProducer","drain","timeout","counter","capturedSetTimeout","parseUrl","query","fragment","getNumberOfUrlSegments","validSeverityLevels","severityLevelFromString","dateTimestampSource","getBrowserPerformance","performance","timeOrigin","getNodePerformance","perfHooks","platformPerformance","timestampSource","dateTimestampInSeconds","timestampInSeconds","timestampWithMs","browserPerformanceTimeOrigin","threshold","performanceNow","dateNow","timeOriginDelta","timeOriginIsReliable","navigationStart","hasNavigationStart","navigationStartDelta","navigationStartIsReliable","TRACEPARENT_REGEXP","extractTraceparentData","traceparent","parentSampled","createEnvelope","headers","items","addItemToEnvelope","envelope","newItem","forEachEnvelopeItem","envelopeItems","envelopeItem","envelopeItemType","encodeUTF8","textEncoder","utf8","serializeEnvelope","envHeaders","parts","append","next","itemHeaders","payload","concatBuffers","buffers","totalLength","acc","buf","merged","offset","createAttachmentEnvelopeItem","attachment","ITEM_TYPE_TO_DATA_CATEGORY_MAP","envelopeItemTypeToDataCategory","createClientReportEnvelope","discarded_events","timestamp","clientReportItem","DEFAULT_RETRY_AFTER","parseRetryAfterHeader","header","now","headerDelay","headerDate","disabledUntil","limits","category","isRateLimited","updateRateLimits","statusCode","updatedRateLimits","rateLimitHeader","retryAfterHeader","retryAfter","categories","delay","BAGGAGE_HEADER_NAME","SENTRY_BAGGAGE_KEY_PREFIX","SENTRY_BAGGAGE_KEY_PREFIX_REGEX","MAX_BAGGAGE_STRING_LENGTH","baggageHeaderToDynamicSamplingContext","baggageHeader","baggageObject","curr","currBaggageObject","baggageHeaderToObject","dynamicSamplingContext","nonPrefixedKey","dynamicSamplingContextToSentryBaggageHeader","sentryPrefixedDSC","dscKey","dscValue","objectToBaggageHeader","baggageEntry","keyOrValue","objectKey","objectValue","currentIndex","newBaggageHeader","makeSession","startingTime","session","sessionToJSON","updateSession","duration","closeSession","status","MAX_BREADCRUMBS","Scope","scope","newScope","user","requestSession","tags","extras","extra","fingerprint","span","captureContext","updatedScope","breadcrumb","maxBreadcrumbs","maxCrumbs","mergedBreadcrumb","hint","transactionName","getGlobalEventProcessors","newData","processors","processor","final","addGlobalEventProcessor","API_VERSION","DEFAULT_BREADCRUMBS","Hub","client","_version","version","top","syntheticException","beforeBreadcrumb","finalBreadcrumb","oldHub","makeMain","integration","customSamplingContext","endSession","layer","release","environment","userAgent","currentSession","method","carrier","getMainCarrier","sentry","hub","registry","getHubFromCarrier","setHubOnCarrier","getCurrentHub","hasHubOnCarrier","getHubFromActiveDomain","activeDomain","registryHubTopStack","captureException","withScope","SENTRY_API_VERSION","getBaseApiEndpoint","_getIngestEndpoint","_encodedAuth","sdkInfo","getEnvelopeEndpointWithUrlEncodedAuth","tunnelOrOptions","tunnel","getSdkMetadataForEnvelopeHeader","metadata","enhanceEventWithSdkInfo","createSessionEnvelope","envelopeHeaders","createEventEnvelope","eventType","transactionSampling","samplingMethod","sampleRate","createEventEnvelopeHeaders","eventItem","installedIntegrations","filterDuplicates","integrations","integrationsByName","currentInstance","existingInstance","getIntegrationsToSetup","defaultIntegrations","userIntegrations","finalIntegrations","debugIndex","debugInstance","setupIntegrations","integrationIndex","ALREADY_SEEN_ERROR","BaseClient","promisedEvent","transport","clientFinished","transportFlushed","integrationId","env","crashed","errored","exceptions","ex","mechanism","sessionNonTerminal","shouldUpdateAndSend","ticked","tick","interval","normalizeDepth","normalizeMaxBreadth","prepared","finalScope","attachments","evt","maxBreadth","dist","maxValueLength","integrationsArray","finalEvent","sentryError","beforeSend","isTransaction","isInternalException","beforeSendResult","_ensureBeforeSendRv","processedEvent","transactionInfo","promise","outcomes","rv","nullErr","initAndBind","clientClass","DEFAULT_TRANSPORT_BUFFER_SIZE","createTransport","makeRequest","rateLimits","flush","send","filteredEnvelopeItems","envelopeItemDataCategory","filteredEnvelope","recordEnvelopeLoss","requestTask","SDK_VERSION","originalFunctionToString","FunctionToString","DEFAULT_IGNORE_ERRORS","InboundFilters","eventProcess","self","clientOptions","_mergeOptions","_shouldDropEvent","internalOptions","_isSentryError","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","ignoreErrors","_getPossibleEventMessages","denyUrls","allowUrls","_getLastValidUrl","exceptionFromError","parseStackFrames","extractMessage","eventFromPlainObject","isUnhandledRejection","eventFromError","stacktrace","popSize","getPopSize","reactMinifiedRegexp","eventFromException","attachStacktrace","eventFromUnknownInput","eventFromMessage","eventFromString","errorEvent","domException","objectException","BREADCRUMB_INTEGRATION_ID","Breadcrumbs","_consoleBreadcrumb","_domBreadcrumb","_xhrBreadcrumb","_fetchBreadcrumb","_historyBreadcrumb","dom","_innerDomBreadcrumb","status_code","body","parsedLoc","parsedFrom","parsedTo","cachedFetchImpl","getNativeFetchImplementation","document","fetchImpl","contentWindow","sendReport","isRealNavigator","hasSendBeacon","sendBeacon","fetch","globalObject","BrowserClient","breadcrumbIntegration","makeFetchTransport","nativeFetch","requestOptions","XHR_READYSTATE_DONE","makeXHRTransport","UNKNOWN_FUNCTION","CHROME_PRIORITY","WINJS_PRIORITY","GECKO_PRIORITY","createFrame","filename","lineno","colno","chromeRegex","chromeEvalRegex","isEval","subMatch","extractSafariExtensionDetails","chromeStackLineParser","geckoREgex","geckoEvalRegex","gecko","geckoStackLineParser","winjsRegex","winjs","winjsStackLineParser","defaultStackLineParsers","defaultStackParser","isSafariExtension","isSafariWebExtension","ignoreOnError","shouldIgnoreOnError","ignoreNextOnError","wrap","before","wrapper","sentryWrapped","wrappedArguments","descriptor","GlobalHandlers","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","installFunc","globalHandlerLog","getHubAndOptions","_eventFromIncompleteOnError","_enhanceEventWithInitialFrame","addMechanismAndCapture","_eventFromRejectionWithPrimitive","ERROR_TYPES_RE","groups","ev","ev0","ev0s","ev0sf","DEFAULT_EVENT_TARGET","TryCatch","_wrapTimeFunction","_wrapRAF","_wrapXHR","eventTargetOption","eventTarget","_wrapEventTarget","originalCallback","xmlHttpRequestProps","prop","wrapOptions","originalFunction","eventName","wrappedEventHandler","originalEventHandler","DEFAULT_KEY","DEFAULT_LIMIT","LinkedErrors","_handler","linkedErrors","_walkErrorTree","HttpContext","referrer","Dedupe","eventProcessor","currentEvent","previousEvent","_isSameMessageEvent","_isSameExceptionEvent","currentMessage","previousMessage","_isSameFingerprint","_isSameStacktrace","previousException","_getExceptionFromEvent","currentException","currentFrames","_getFramesFromEvent","previousFrames","frameA","frameB","currentFingerprint","previousFingerprint","Integrations.InboundFilters","Integrations.FunctionToString","startSessionTracking","startSessionOnHub","init$1","reactIs_production_min","reactIsModule","reactIs","REACT_STATICS","KNOWN_STATICS","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","defineProperty","getOwnPropertyNames","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","hoistNonReactStatics_cjs","_jsxFileName","activeTransaction","_useEffect","_useLocation","_useNavigationType","_createRoutesFromChildren","_matchRoutes","_customStartTransaction","_startTransactionOnLocationChange","SENTRY_TAGS","reactRouterV6Instrumentation","customStartTransaction","startTransactionOnPageLoad","startTransactionOnLocationChange","initPathName","getNormalizedName","pathBuilder","newPath","updatePageloadTransaction","handleNavigation","isBaseLocation","withSentryReactRouterV6Routing","SentryRoutes","React__default","hasTracingEnabled","maybeOptions","getActiveTransaction","maybeHub","msToSec","time","registerErrorInstrumentation","errorCallback","SpanRecorder","maxlen","Span","spanContext","childSpan","opStr","nameStr","idStr","logMessage","httpStatus","spanStatus","spanStatusfromHttpCode","endTimestamp","sampledString","Transaction","transactionContext","incomingDynamicSamplingContext","newName","unit","newMetadata","finishedSpans","prev","transaction","hasMeasurements","public_key","maybeSampleRate","sample_rate","user_segment","dsc","DEFAULT_IDLE_TIMEOUT","DEFAULT_FINAL_TIMEOUT","HEARTBEAT_INTERVAL","IdleTransactionSpanRecorder","_pushActivity","_popActivity","transactionSpanId","IdleTransaction","_idleHub","_idleTimeout","_finalTimeout","_onScope","clearActiveTransaction","keepSpan","pushActivity","popActivity","spanId","heartbeatString","traceHeaders","sample","samplingContext","isValidSampleRate","rate","_startTransaction","startIdleTransaction","idleTimeout","finalTimeout","onScope","_addTracingExtensions","_autoloadDatabaseIntegrations","packageToIntegrationMapping","mappedPackages","pkg","addExtensionMethods","registerBackgroundTabDetection","statusType","bindReporter","metric","reportAllChanges","prevValue","forceReport","generateUniqueID","initMetric","observe","po","onHidden","once","onHiddenOrPageHide","getCLS","onReport","report","sessionValue","sessionEntries","entryHandler","entry","firstSessionEntry","lastSessionEntry","firstHiddenTime","initHiddenTime","trackChanges","timeStamp","getVisibilityWatcher","getFID","visibilityWatcher","reportedMetricIDs","getLCP","stopListening","isMeasurementValue","_startChild","startTimestamp","ctx","getBrowserPerformanceAPI","_performanceCursor","_measurements","_lcpEntry","_clsEntry","startTrackingWebVitals","_trackCLS","_trackLCP","_trackFID","startTrackingLongTasks","startTime","addPerformanceEntries","performanceEntries","responseStartTimestamp","requestStartTimestamp","_addNavigationSpans","_addMeasureSpans","firstHidden","shouldRecord","resourceName","_addResourceSpans","_trackNavigator","oldValue","measurementTimestamp","normalizedValue","fidMark","measurementName","_tagMetricInfo","measureStartTimestamp","measureEndTimestamp","_addPerformanceNavigationTiming","_addRequest","description","eventEnd","start","connection","DEFAULT_TRACING_ORIGINS","defaultRequestInstrumentationOptions","instrumentOutgoingRequests","traceFetch","traceXHR","tracingOrigins","shouldCreateSpanForRequest","urlMap","defaultShouldCreateSpan","origins","origin","shouldCreateSpan","spans","fetchCallback","xhrCallback","addTracingHeadersToFetchRequest","sentryBaggageHeader","sentryTraceHeader","newHeaders","existingBaggageHeader","newBaggageHeaders","instrumentRoutingWithDefaults","startingUrl","BROWSER_TRACING_INTEGRATION_ID","DEFAULT_BROWSER_TRACING_OPTIONS","BrowserTracing","_metricOptions","_2","_3","_4","instrumentRouting","markBackgroundTransactions","beforeNavigate","isPageloadTransaction","sentryTraceMetaTagValue","getMetaContent","baggageMetaTagValue","traceParentData","expandedContext","modifiedContext","finalContext","idleTransaction","metaName","metaTag","$parcel$export","$704cf1d3b684cc5c$exports","$704cf1d3b684cc5c$export$9f8ac96af4b1b2ae","$704cf1d3b684cc5c$export$619500959fc48b26","$704cf1d3b684cc5c$export$535bd6ca7f90a273","$704cf1d3b684cc5c$var$defaultContext","$704cf1d3b684cc5c$var$SSRContext","$89yE2$react","cur","$89yE2$useContext","$89yE2$useMemo","$704cf1d3b684cc5c$var$canUseDOM","defaultId","isInSSRContext","isSSR","setIsSSR","$89yE2$useState","$89yE2$useLayoutEffect","clsx","$458b0a5536c1a7cf$exports","$458b0a5536c1a7cf$export$40bfa8c7b0832715","value1","defaultValue","onChange","stateValue","setStateValue","$6imuh$useState","ref","$6imuh$useRef","wasControlled","isControlled","stateRef","setValue","$6imuh$useCallback","value2","onChangeCaller","onChangeArgs","functionArgs","interceptedValue","$9446cca9a3875146$exports","$9446cca9a3875146$export$7d15b64cf5a3a4c4","$9446cca9a3875146$export$cb6e0bb50bc19463","$9446cca9a3875146$export$b6268554fba451f","min","step","remainder","snappedValue","string","precision","pow","digits","$bdb11010cef70236$exports","$bdb11010cef70236$export$f680877a34711e37","$bdb11010cef70236$export$cd8c9cb68f842629","$bdb11010cef70236$export$b4cc09c592e8fdb8","$f0a04ccd8dbdd83b$exports","$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c","$12uGp$react","$bdb11010cef70236$var$idsUpdaterMap","$12uGp$useState","nextId","$12uGp$useRef","res","$12uGp$useSSRSafeId","updateValue","$12uGp$useCallback","$12uGp$useEffect","newId","idA","idB","setIdA","setIdB","depArray","resolvedId","setResolvedId","$1dbecbe27a04f9af$export$14d238f342723f25","updateId","$ff5963eb1fccf552$exports","$ff5963eb1fccf552$export$e08e3b67e392101e","callbacks","$3ef42575df84b30b$exports","$3ef42575df84b30b$export$9d1611c77c2fe928","$12uGp$clsx","$5dc95899b306f630$exports","$5dc95899b306f630$export$c9058316764c140e","refs","$65484d02dcb7eb3e$exports","$65484d02dcb7eb3e$export$457c3d6518dd4c6f","$65484d02dcb7eb3e$var$DOMPropNames","$65484d02dcb7eb3e$var$labelablePropNames","$65484d02dcb7eb3e$var$propRe","opts","labelable","propNames","filteredProps","$7215afc6de606d6b$exports","$7215afc6de606d6b$export$de79e2c695e052f3","$7215afc6de606d6b$var$supportsPreventScroll","scrollableElements","$7215afc6de606d6b$var$getScrollableElements","$7215afc6de606d6b$var$restoreScrollPosition","$7215afc6de606d6b$var$supportsPreventScrollCached","focusElem","parent","rootScrollingElement","scrollTop","scrollLeft","$ab71dadb03a6fb2e$exports","$ab71dadb03a6fb2e$export$622cea445a1c5b7d","reverse","orientation","rect","$103b0e103f1b5952$exports","$103b0e103f1b5952$re_export$clamp","$103b0e103f1b5952$re_export$snapValueToStep","$bbed8b41f857bcc0$exports","$bbed8b41f857bcc0$export$24490316f764c430","$bbed8b41f857bcc0$var$transitionsByElement","$bbed8b41f857bcc0$var$transitionCallbacks","$bbed8b41f857bcc0$var$setupGlobalEvents","onTransitionStart","transitions","onTransitionEnd","properties","$9cc09df9fd7676be$exports","$9cc09df9fd7676be$export$7bbed75feba39706","$9cc09df9fd7676be$var$draggingElements","containerRef","onHover","onDrag","onPositionChange","onIncrement","onDecrement","onIncrementToMax","onDecrementToMin","onCollapseToggle","getPosition","getNextOffset","containerOffset","mouseOffset","dragging","prevPosition","onMouseDragged","nextOffset","onMouseUp","elt","$03deb23ff14920c4$exports","$03deb23ff14920c4$export$4eaf04e54aa8eed6","globalListeners","addGlobalListener","removeGlobalListener","removeAllGlobalListeners","$313b98861ee5dd6c$exports","$313b98861ee5dd6c$export$d6875122194c7b44","defaultLabel","label","labelledBy","$df56164dff5785e2$exports","$df56164dff5785e2$export$4338b53315abf666","forwardedRef","objRef","$4f58c5f72bcf79f7$exports","$4f58c5f72bcf79f7$export$496315a1608d9602","effect","dependencies","isInitialMount","$9daab02d461809db$exports","$9daab02d461809db$export$683480f191c0e3ea","$9daab02d461809db$var$hasResizeObserver","onResize","resizeObserverInstance","entries","$e7801be82b4b2a53$exports","$e7801be82b4b2a53$export$4debdb1a3f0fa79e","$62d8ded9296f3872$exports","$62d8ded9296f3872$export$cfa2225e87938781","node","$62d8ded9296f3872$var$isScrollable","style","$5df64b3807dc15ee$exports","$5df64b3807dc15ee$export$d699905dd57c73ca","$5df64b3807dc15ee$var$visualViewport","size1","setSize","$5df64b3807dc15ee$var$getViewportSize","size","newSize","$ef06256079686ba0$exports","$ef06256079686ba0$export$f8aeda7b10753fa1","$ef06256079686ba0$var$descriptionId","$ef06256079686ba0$var$descriptionNodes","id1","setId","desc","$c87311424ea30a05$exports","$c87311424ea30a05$export$9ac100e40613ea10","$c87311424ea30a05$export$186c6964ca17d99","$c87311424ea30a05$export$7bef049ce92e4224","$c87311424ea30a05$export$fedb369cb70207f1","$c87311424ea30a05$export$e1865c3bedcd822b","$c87311424ea30a05$export$78551043582a6a98","$c87311424ea30a05$export$6446a186d09e379e","$c87311424ea30a05$export$a11b0059900ceec8","$c87311424ea30a05$var$testUserAgent","brand","$c87311424ea30a05$var$testPlatform","$e9faafb641e167db$exports","$e9faafb641e167db$export$90fc3a17d93f704c","handler1","handlerRef","isDisabled","$1dbecbe27a04f9af$exports","valueRef","nextRef","newValue","queue","$2f04cbc44ee30ce0$exports","$2f04cbc44ee30ce0$export$53a0910f038337bd","scrollView","offsetX","$2f04cbc44ee30ce0$var$relativeOffset","offsetY","width","maxX","maxY","ancestor","child","axis","sum","$3b117e43dc0ca95d$exports","$3b117e43dc0ca95d$export$27c701ed9e449e99","$f6c31cce2adf654f$exports","$f6c31cce2adf654f$export$45712eceda6fad21","$14c0b72509d70225$var$state","$14c0b72509d70225$var$savedUserSelect","$14c0b72509d70225$var$modifiedElementMap","$14c0b72509d70225$export$16a4697467175487","$bx7SL$isIOS","$14c0b72509d70225$export$b0d6fa1ab32e3295","$bx7SL$runAfterTransition","targetOldUserSelect","$8a9cb279dc87e130$export$60278871457622de","$8a9cb279dc87e130$export$905e7fc544a71f36","nativeEvent","$8a9cb279dc87e130$export$715c682d09d639cc","onBlur","$bx7SL$useRef","$bx7SL$useLayoutEffect","$bx7SL$useCallback","e1","onBlurHandler","_current","$ae1eeba8b9eafd08$export$5165eccb35aaadb5","$bx7SL$react","$f6c31cce2adf654f$var$usePressResponderContext","$bx7SL$useContext","register","contextProps","$bx7SL$mergeProps","$bx7SL$useSyncRef","onPress1","onPressChange1","onPressStart1","onPressEnd1","onPressUp1","isDisabled1","isPressedProp","preventFocusOnPress","shouldCancelOnPointerExit","allowTextSelectionOnPress","domProps","propsRef","isPressed","setPressed","$bx7SL$useState","$bx7SL$useGlobalListeners","pressProps1","$bx7SL$useMemo","triggerPressStart","originalEvent","pointerType","onPressStart","onPressChange","triggerPressEnd","wasPressed","onPressEnd","onPress","triggerPressUp","onPressUp","cancel","$f6c31cce2adf654f$var$createEvent","pressProps","$f6c31cce2adf654f$var$isValidKeyboardEvent","$f6c31cce2adf654f$var$shouldPreventDefaultKeyboard","onKeyUp","$bx7SL$focusWithoutScrolling","$f6c31cce2adf654f$var$isHTMLAnchorLink","$f6c31cce2adf654f$var$isVirtualPointerEvent","$f6c31cce2adf654f$var$shouldPreventDefault","onPointerMove","onPointerUp","onPointerCancel","$f6c31cce2adf654f$var$isOverTarget","touch","$f6c31cce2adf654f$var$getTouchFromEvent","onScroll","$f6c31cce2adf654f$var$getTouchById","$bx7SL$useEffect","code","tagName","isContentEditable","role","targetTouches","pointerId","changedTouches","$f6c31cce2adf654f$var$getPointClientRect","point","$f6c31cce2adf654f$var$areRectanglesOverlapping","pointRect","newRef","$f1ab8c75478c6f73$exports","$f1ab8c75478c6f73$export$3351871ee4b288b8","isRegistered","prevContext","$a1ea59d68270f0dd$exports","$a1ea59d68270f0dd$export$f8168d8dd8fd66e6","onFocusProp","onBlurProp","onFocusChange","onSyntheticFocus","onFocus","$507fabe10e71c6fb$exports","$507fabe10e71c6fb$export$b9b3dfddab17db27","$507fabe10e71c6fb$export$630ff653c5ada6a9","$507fabe10e71c6fb$export$8397ddfc504fdb9a","$507fabe10e71c6fb$export$98e20ec92f614cfe","$507fabe10e71c6fb$export$ffd9e5021c1fb2d6","$507fabe10e71c6fb$export$ec71b4b83ac08ec3","$507fabe10e71c6fb$var$currentModality","$507fabe10e71c6fb$var$changeHandlers","$507fabe10e71c6fb$var$hasSetupGlobalListeners","$507fabe10e71c6fb$var$hasEventBeforeFocus","$507fabe10e71c6fb$var$hasBlurredWindowRecently","$507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS","$507fabe10e71c6fb$var$triggerChangeHandlers","modality","$507fabe10e71c6fb$var$isValidKey","$bx7SL$isMac","$507fabe10e71c6fb$var$handleKeyboardEvent","$507fabe10e71c6fb$var$handlePointerEvent","$507fabe10e71c6fb$var$handleClickEvent","$507fabe10e71c6fb$var$handleFocusEvent","$507fabe10e71c6fb$var$handleWindowBlur","$507fabe10e71c6fb$var$setupGlobalFocusEvents","focus","setModality","$507fabe10e71c6fb$var$isKeyboardFocusEvent","isTextInput","autoFocus","isFocusVisibleState","setFocusVisible","deps","$9ab94262bd0047c7$exports","$9ab94262bd0047c7$export$420e68273165f4ec","onBlurWithin","onFocusWithin","onFocusWithinChange","$6179b936705e76d3$exports","$6179b936705e76d3$export$ae780daf29e6d456","$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents","$6179b936705e76d3$var$hoverCount","$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents","$6179b936705e76d3$var$handleGlobalPointerEvent","$6179b936705e76d3$var$setupGlobalTouchEvents","onHoverStart","onHoverChange","onHoverEnd","isHovered","setHovered","hoverProps1","triggerHoverEnd1","triggerHoverStart","triggerHoverEnd","hoverProps","$e0b6e0b68ec7f50f$exports","$e0b6e0b68ec7f50f$export$872b660ac5a1ff98","onInteractOutside","onInteractOutsideStart","onPointerDown","$e0b6e0b68ec7f50f$var$isValidEvent","onTouchEnd","ownerDocument","$46d819fcbaf35654$exports","$46d819fcbaf35654$export$8f71654801c2f7cd","$93925083ecbb358c$export$48d1ea6320830260","shouldStopPropagation","$e8a7022cf87cba2a$exports","$e8a7022cf87cba2a$export$36da96379f79f245","onMoveStart","onMove","onMoveEnd","moveProps","move","deltaX","deltaY","onMouseMove","onTouchMove","identifier","pageX","pageY","triggerKeyboardMove","$7d0a636d7a4dcefd$exports","$7d0a636d7a4dcefd$export$2123ff2b87c81ca","onScrollHandler","$bx7SL$useEvent","$8a26561d2877236e$exports","$8a26561d2877236e$export$c24ed0104d07eab9","$8a26561d2877236e$var$DEFAULT_THRESHOLD","onLongPressStart","onLongPressEnd","onLongPress","accessibilityDescription","timeRef","onContextMenu","descriptionProps","$bx7SL$useDescription","keyCount","atom","read","write","config","get","set","hasInitialValue","isActuallyWritableAtom","cancelPromiseMap","registerCancelPromise","cancelPromise","resolvePromise","rejectPromise","isEqualAtomValue","isEqualAtomError","hasPromiseAtomValue","returnAtomValue","atomState","createStore","_a","_b","atomStateMap","mountedMap","pendingMap","stateListeners","mountedAtoms","getAtomState","setAtomState","_a2","prevAtomState","updateDependencies","nextAtomState","depSet","changed","aState","setAtomValue","setAtomError","readAtomState","isSync","getter","aState2","controller","setSelf","_a3","writeAtom","continuePromise","settled","readAtom","addAtom","mounted","mountAtom","canUnmountAtom","delAtom","unmountAtom","recomputeDependents","dependent","writeAtomState","setter","args2","flushPending","initialDependent","aMounted","onUnmount","_b2","_c","mountDependencies","prevDependencies","pending","subscribeAtom","defaultStore","getDefaultStore","StoreContext","useStore","store","Provider","storeRef","isPromise","use","ReactExports","useAtomValue","valueFromReducer","storeFromReducer","atomFromReducer","rerender","useReducer","nextValue","unsub","useDebugValue","useSetAtom","useAtom","escaped","escapes","escapeString","stringify","stringifyArray","stringifyObject","array","sep","anotherJson","__viteBrowserExternal","Olm","olm_exports","onInitSuccess","onInitFail","Module","_scriptDir","module","fs","olmInitPromise","chars","lookup","base64Arraybuffer","arraybuffer","bytes","base64","bufferLength","encoded1","encoded2","encoded3","encoded4","_toConsumableArray","arr","arr2","setPrototypeOf","isFrozen","freeze","seal","create","apply","construct","fun","thisValue","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","typeErrorCreate","unconstruct","thisArg","_len","_key","_len2","_key2","addToSet","lcElement","clone","newObject","lookupGetter","fallbackValue","html","svg","svgFilters","svgDisallowed","mathMl","mathMlDisallowed","text","html$1","svg$1","mathMl$1","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","_typeof","_toConsumableArray$1","getGlobal","_createTrustedTypesPolicy","trustedTypes","suffix","ATTR_NAME","policyName","html$$1","createDOMPurify","DOMPurify","root","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","_window$NamedNodeMap","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","documentMode","hooks","MUSTACHE_EXPR$$1","ERB_EXPR$$1","DATA_ATTR$$1","ARIA_ATTR$$1","IS_SCRIPT_OR_DATA$$1","ATTR_WHITESPACE$$1","IS_ALLOWED_URI$$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","transformCaseFunc","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parentTagName","commonSvgAndHTMLElements","_forceRemove","_removeAttribute","_initDocument","dirty","leadingWhitespace","dirtyPayload","_createIterator","_isClobbered","elm","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","content","_basicCustomElementTest","parentNode","childNodes","childCount","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attributes","hookEvent","_attr","namespaceURI","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","oldNode","returnNode","nodeIterator","serializedHTML","tag","hookFunction","purify","index_min","offColorModule","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","__objRest","exclude","_d","LogLevel","LogLevel2","LogFilter","parentFilter","LogItem","labelOrValues","filterCreator","logItem","durationOfType","filter","parentStartTime","forced","promiseResult","Logger","platform","DeferredPersistRootLogItem","wantResult","finishItem","reporter","openItem","StoreNames","StoreNames2","STORE_NAMES","StorageError","cause","KeyLimits","_sourceName","_sourceDatabase","_c2","_d2","_e","IDBError","sourceOrCursor","storeName","databaseName","fullMessage","IDBRequestError","IDBRequestAttemptError","params","AbortError","DONE","NOT_DONE","encodeUint32","hex","decodeUint32","openDatabase","createObjectStore","idbFactory","req","req2","txn","oldVersion","reqAsPromise","event2","txnAsPromise","iterateCursor","cursorRequest","processValue","cursor","done","jumpTo","fetchResults","isDone","results","IDBLogPersister","queuedItem","logs","storedItems","openItems","allItems","IDBLogExport","amount","itemCount","deleteAmount","__","json","serializedItem","queuedIdx","log","ConsoleReporter","printToConsole","excludedKeysFromTable","filterValues","hasChildWithError","itemCaption","filteredValues","shouldGroup","WrappedError","HomeServerError","ConnectionError","isTimeout","BaseObservable","BaseObservableValue$1","argument","predicate","ResolvedWaitForHandle$1","WaitForHandle$1","mapper","FlatMapObservableValue$1","observable","ObservableValue$1","initialValue","sourceValue","mapped","RetainedObservableValue","freeCallback","startCallback","BaseObservableList","fromIdx","toIdx","sortedIndex","comparator","low","high","mid","cmpResult","ObservableArray","initialValues","idx","findAndUpdateInArray","updater","SortedArray","updateParams","existingItem","Iterator","sortedArray","BaseMappedList","sourceList","removeCallback","runAdd","list","mappedValue","runUpdate","runRemove","runMove","runReset","AsyncMappedList","AddEvent","ResetEvent","UpdateEvent","RemoveEvent","MoveEvent","ConcatList","sourceLists","listIdx","sourceUnsubscribe","sourceListIdx","it","SortedMapList","sourceMap","pair","oldIdx","newIdx","BaseObservableMap","otherMaps","JoinedMap","MappedMap","FilteredMap","MapSizeObservableValue","silent","oldIncluded","isIncluded","wasIncluded","included","FilterIterator","count","map","sourceResult","sources","occludingValue","occludedValue","SourceSubscriptionHandler","JoinedIterator","joinedMap","emitSpontaneousUpdate","ObservableMap","abortOnTimeout","createTimeout","timeoutAmount","requestResult","responsePromise","timedOut","addCacheBuster","urlStr","random","mapAsFormData","formData","RequestResult$1","createXhr","format","uploadProgress","xhrAsPromise","xhrRequest","cache","xhr2","body2","RequestResult","abortPromise","createFetchRequest","serviceWorkerHandler","fetchHeaders","noop","NullLogger","NullLogItem","_callback","Instance","QueryTarget","range","direction","methodName","keyRange","keyPath","key2","reducer","maxKey","backwards","compareKeys","sortedKeys","firstKey","lastKey","cursor2","reducedValue","passesPredicate","found2","LOG_REQUESTS","logRequest","QueryTargetWrapper","qt","Store","idbStore","indexName","keyOrKeyRange","operationName","field","part","DecryptionSource","DecryptionSource2","SESSION_E2EE_KEY_PREFIX","OLM_ALGORITHM","MEGOLM_ALGORITHM","DecryptionError$1","detailsObj","SIGNATURE_ALGORITHM","getDeviceEd25519Key","deviceKey","getDeviceCurve25519Key","getEd25519Signature","signedValue","userId","deviceOrKeyId","SignatureVerification","SignatureVerification2","verifyEd25519Signature","olmUtil","ed25519Key","signature","canonicalJson","anotherjson","createRoomEncryptionEvent","shouldShareKey","membership","historyVisibility","encodeValue","parse","decodeValue","getLocalStorageKeyPrefix","clearKeysFromLocalStorage","localStorage2","SessionStore","sessionStore","lsKey","lsValue","success","lsPrefix","prefix2","hasKey","RoomSummaryStore","summaryStore","summary","roomId","fetchedKey","InviteStore","inviteStore","invite","EventKey","fragmentId","eventIndex","other","createEventEntry","directionalAppend","directionalConcat","otherArray","encodeKey$b","decodeKey$5","encodeEventIdKey","decodeEventIdKey","eventIdKey","Range$1","_IDBKeyRange","only","lower","upper","lowerOpen","upperOpen","TimelineEventStore","timelineStore","eventKey","open","idbRange","events","eventIds","byEventId","indexKey","firstFoundKey","firstFoundAndPrecedingResolved","found","minKey","MIN_UNICODE","MAX_UNICODE","encodeKey$a","targetEventId","relType","sourceEventId","decodeKey$4","TimelineRelationStore","targetId","encodeKey$9","stateKey","RoomStateStore","encodeKey$8","decodeKey$3","RoomMemberStore","roomMembersStore","member","userIds","decodedKey","encodeKey$7","TimelineFragmentStore","encodeKey$6","queueIndex","decodeKey$2","encodedQueueIndex","PendingEventStore","eventStore","pendingEvent","UserIdentityStore","userIdentity","encodeKey$5","deviceId","decodeKey$1","DeviceKeyStore","device","deviceIds","curve25519Key","encodeKey$4","usage","CrossSigningKeyStore","crossSigningKey","encodeKey$3","senderKey","sessionId","decodeKey","OlmSessionStore","sessionIds","BackupStatus","BackupStatus2","KeySource","KeySource2","encodeKey$2","InboundGroupSessionStore","storageEntry","backedUpKey","OutboundGroupSessionStore","encodeKey$1","messageIndex","GroupSessionDecryptionStore","decryption","encodeScopeTypeKey","OperationStore","operation","AccountDataStore","encodeKey","intent","callId","decodeStorageEntry","CallStore","WriteErrorInfo","refItem","allowedStoreNames","storage","mapStore","parentItem","errorGroupItem","info","WEBKITEARLYCLOSETXNBUG_BOGUS_KEY","Storage","idbDatabase","hasWebkitEarlyCloseTxnBug","storeNames","exportSession","importSession","getPrevContentFromStateEvent","REDACTION_TYPE","isRedacted","RoomStatus","RoomStatus2","RoomVisibility","RoomVisibility2","RoomType","RoomType2","iterateResponseStateEvents","roomResponse","promises","callCallback","stateEvent","stateEvents","timelineEvents","EVENT_TYPE$1","RoomMember","memberEvent","prevContent","displayName","avatarUrl","otherData","MemberChange","previousMembership","pkSign","pubKey","createdKey","keyObj","sigs","unsigned","mysigs","BaseSASVerificationStage","stage","VerificationEventType","VerificationEventType2","CancelReason","CancelReason2","KEY_AGREEMENT_LIST","HASHES_LIST","MAC_LIST","SAS_LIST","SAS_SET","emojiMapping","generateEmojiSas","sasBytes","num","macMethods","createCalculateMAC","olmSAS","SendDoneStage","VerifyMacStage","macMethod","calculateMAC","baseInfo","calculatedMAC","keyId","keyInfo","calculatedMAC2","verifier","deviceIdOrMSK","log2","signedKey","KeyUsage","masterKey","getKeyEd25519Key","SendMacStage","mac","keyList","deviceKeyId","deviceKeys","crossSigningKeyId","VerificationCancelledError","calculateKeyAgreement","sas","ourInfo","theirInfo","sasInfo","CalculateSASStage","emojiConfirmationPromise","rej","acceptMessage","commitmentStr","receivedCommitment","keyAgreement","otherUserDeviceId","SendKeyStage","ourSasKey","intersection","anArray","aSet","SendAcceptVerificationStage","startMessage","hashMethod","sasMethod","SelectVerificationMethodStage","receivedStartMessage","sentStartMessage","our","their","startMessageToUse","SendRequestVerificationStage","SendReadyStage","EventEmitter","SASVerification","olm","channel","clock","olmSas","stageOptions","groupBy","groupFn","groupByWithCreator","array2","createCollectionFn","addCollectionFn","collection","countBy","counts","makeTxnId","makeId","isTxnId","txnId","formatToDeviceMessagesPayload","messages","messagesByUser","userMap","messages2","deviceMap","disposeValue","isDisposable","Disposables","disposable","foundValue","Deferred","_resolve","_reject","messageFromErrorType","ToDeviceChannel","startingMessage","unencrypted","fromDevice","otherDevices","cancelMessage","deviceMessages","cancellationType","wait","receivedMessage","existingWait","deferred","SASRequest","KeyUsage2","CrossSigning","allowNetwork","privateMasterKey","signing","derivedPublicKey","publishedMasterKey","publisedEd25519Key","requestOrUserId","otherUserId","ownDeviceKey","keyToSign","signingKey","logResult","trust","ourMSK","log3","ourUSK","theirMSK","theirMSKVerification","theirSSK","lowestDeviceVerification","lowest","verification","existingValue","seedStr","getKeyUsage","algorithm","prefix","ed25519KeyIds","keyId2","getKeyUserId","KeysTrackingStatus","KeysTrackingStatus2","createUserIdentity","initialRoomId","addRoomToIdentity","identity","DeviceTracker","changedUserIds","userIdentities","room","memberChanges","added","removed","memberChange","memberList","isTrackingChanges","members","hsApi","syncTxn","updatedIdentity","deviceKeyResponse","deviceKeysMap","masterKeys","selfSigningKeys","userSigningKeys","totalCount","deviceKeysForUser","knownDeviceIds","allDeviceKeys","deviceKeysToStore","existingDevice","crossSigningKeysResponse","keyQueryDeviceKeysResponse","parentLog","curve25519Keys","keysByDevice","verifiedKeys","userIdFromServer","deviceIdFromServer","isValid","upToDateIdentities","outdatedUserIds","verifiedKey","txn2","userIdentityTxn","identities","devices","queriedDeviceKeys","deviceTxn","flattenedDevices","all","devicesForUser","schema","createInitialStores","createMemberStore","migrateSession","createE2EEStores","migrateEncryptionFlag","createAccountDataStore","createInviteStore","createArchivedRoomSummaryStore","migrateOperationScopeIndex","createTimelineRelationsStore","fixMissingRoomsInUserIdentities","changeSSSSKeyPrefix","backupAndRestoreE2EEAccountToLocalStorage","clearAllStores","addInboundSessionBackupIndex","migrateBackupStatus","createCallStore","applyCrossSigningChanges","createDatabaseNameHelper","roomMembers","roomState","syncToken","syncFilterId","serverVersions","roomSummary","summaries","encryptionEntry","operations","typeScopeKey","ssssKey","restored","inboundGroupSessions","countWithSession","countWithoutSession","detectWebkitEarlyCloseTxnBug","dbName","db2","readTxn","writeTxn","sessionName","openDatabaseWithSessionId","createStores","requestPersistedStorage","glob","StorageFactory","persisted","startIdx","migrationFunc","SessionInfoStorage","sessionsJson","sessions","session2","accessToken","accessTokenExpiresAt","refreshToken","sessionInfo","SettingsStorage","UTF8","Base64","paddingIdx","getAugmentedNamespace","Buffer2","arrayBuffer","safeBuffer","_Buffer","ALPHABET2","BASE_MAP","xc","BASE","LEADER","FACTOR","iFACTOR","encode","zeroes","length","pbegin","pend","b58","carry","i2","it1","it2","decodeUnsafe","psz","b256","it3","it4","vch","j2","decode","src","basex","ALPHABET","bs58","Base58","Encoding","OlmWorker","workerPool","ciphertext","sessionKey","account","otkAmount","randomValues","pickle","newSession","theirIdentityKey","theirOneTimeKey","accountPickle","sessionPickle","isChildren","classNames","cn","setAttribute","el2","elementName","elNS","HTML_NS","ns","SVG_NS","TAG_NAMES","mountView","view","mountArgs","errorToDOM","callee","insertAt","childNode","nextDomNode","removeChildren","disableTargetCallback$1","ListView","onItemClick","parentProvidesUpdates","childCreator","childView","childIdx","fromChildIdx","toChildIdx","instance","oldChild","BaseUpdateView","changedProps","objHasFns","TemplateView","useCapture","builder","TemplateBuilder","binding","bindingFn","templateView","renderNode","newNode","attributesOrChildren","mountOptions","mapFn","viewCreator","prevNode","subViews","viewIdx","view2","renderFn","InlineTemplateView","vm","rootNode","sideEffect","tag2","render","renderStaticAvatar","extraClasses","hasAvatar","avatarClasses","avatarContent","renderImg","avatar","sizeStr","isAvatarEvent","handleAvatarError","avatarColorNumber","avatarLetter","AvatarView","bgColorClass","container","spinner","RoomTileView","vm2","busy","Menu","MenuOption","Popup","closeCallback","appContainer","popupContainer","verticalPadding","findScrollParent","targetPosition","popupWidth","popupHeight","viewport","overflowY","FilterField","clear","filterInput","clearButton","LeftPanelView","gridButtonLabel","roomList","tileVM","utilitiesRow","bottom","findFirstNodeIndexAtOrBelow","tiles","startIndex","TimelineView","viewClassForTile2","TilesListView","scrollNode","tilesNode","missingTilesHeight","newAnchoredBottom","bottomDiff","scrollHeight","clientHeight","bottomNodeIndex","viewportBottom","anchoredNodeIndex","topNodeIndex","endIndex","firstVisibleChild","lastVisibleChild","onChanged","tileView","tile","TileView","param","ExpectedClass","TimelineLoadingView","MessageComposer","viewModel","replyPreview","rvm","t2","restoreValue","DisabledComposerView","ErrorView$1","submitLogsButton","closeButton","CallView","StreamView","disableTargetCallback","flag","ar","isTall","isSquare","isWide","video","stream","RoomView","callViewModel","timelineViewModel","composerViewModel","UnknownRoomView","StaticView","LoadingView","label2","RoomBeingCreatedView","ErrorView","InviteView","inviteNodes","inviterNodes","LightboxView","close","image","loading","details","dialog","trapFocus","elements","focusables","first","last","SessionStatusView","RoomGridView","roomVM","ViewModel","explicitOptions","unsubscribe","expr","KeyDescription","keyDescription","otherMac","calculateKeyMac","kdOther","Key","binaryKey","ivStr","crypto2","encoding","base642","derive2","aes","hmac","iv","zerosalt","ZERO_STR","keybits","aesKey","hmacKey","DEFAULT_ITERATIONS","DEFAULT_BITSIZE","keyFromPassphrase","passphrase","passphraseParams","keyBits","OLM_RECOVERY_KEY_PREFIX","keyFromRecoveryKey","recoveryKey","parity","SSSS_KEY","BACKUPVERSION_KEY","readDefaultKeyDescription","defaultKeyEvent","keyAccountData","writeKey","keyBackupVersion","existingVersion","readKey","keyData","removeKey","keyFromCredential","credential","keyFromCredentialAndDescription","keyFromDehydratedDeviceKey","Status","Status2","BackupWriteStatus","BackupWriteStatus2","KeyBackupSettingsView","renderEnabled","renderNewVersionAvailable","renderEnableFromPhrase","renderEnableFromKey","progress","vm3","useASecurityPhrase","renderError","renderEnableFieldRow","setupDehydratedDevice","useASecurityKey","phrase","setupDehydrationCheck","eventHandler","moreInfo","FeaturesView","FeatureView","SettingsView","row","extraClass","settingNodes","supported","buttonLabel","t3","logButtons","updateSetting","activeThemeName","activeThemeVariant","optionTags","select","themeName","colorScheme","darkRadioButton","lightRadioButton","radioButtonCallback","selectedThemeName","isDarkSelected","isLightSelected","defaultRadioButton","radioButtons","CreateRoomView","RoomDetailsView","encryptionString","isEncrypted","EncryptionIconView","labelClass","labelClassString","onClick","Range","RangeIterator","ReverseRangeIterator","RangeZone","RangeZone2","skipOnIterator","pos","getIteratorValueAtIdx","ResultType","ResultType2","ListRange","_totalLength","_viewportItemCount","newStart","newEnd","listLength","itemHeight","listHeight","topCount","itemsAfterTop","viewportItemCount","renderCount","maxAddIdx","addIdx","addValue","removeIdx","fromZone","toZone","newRange","totalLengthInc","viewportItemCountDecr","startDecr","LazyListView","overflowItems","visibleRange","prevRenderRange","prevRange","idxInList","localIdx","paddingTop","paddingBottom","listElement","MemberTileView","MemberListView","tileViewModel","MemberDetailsView","securityNodes","RightPanelView","ButtonsView","ReactionsView","reactionsViewModel","reactionView","reactionVM","ReactionView","BaseMessageView","renderFlags","isContinuation","wasContinuation","sender","reactionsView","reactions","button","onClose","QuickReactionsMenuOption","emojiButtons","emoji","customButton","ReplyPreviewView","ReplyPreviewError","TextMessageView","container2","replyTile","shouldRemove","renderPart","renderList","listBlock","renderParts","renderImage","imagePart","renderPill","pillPart","renderTable","tablePart","cell","rows","formatFunction","headerBlock","codeBlock","tableBlock","codePart","textPart","linkPart","formatPart","BaseMediaView","spacerStyle","ImageView","img","domEventAsPromise","successEvent","detach","handleError","handleSuccess","copyPlaintext","text2","textArea","selection","successful","VideoView","loadPromise","FileView","LocationView","MissingAttachmentView","AnnouncementView","RedactedView","TileShape","TileShape2","GapView","CallTileView","DateHeaderView","viewClassForTile","JoinRoomView","WaitingForOtherUserView","VerificationCancelledView","headerTextStart","isCancelledByUs","descriptionsWhenWeCancelled","descriptionsWhenTheyCancelled","SelectMethodView","hasProceeded","VerifyEmojisView","emojiList","emojiCollection","isWaiting","VerificationCompleteView","DeviceVerificationView","CallToastNotificationView","VerificationToastNotificationView","toastViewModelToView","ToastCollectionView","lightboxViewModel","rightPanelViewModel","hydrogenGithubLink","PasswordLoginView","disabled","username","password","evnt","AccountSetupView","decrypted","SessionLoadStatusView","exportLogsButtonIfFailed","logoutButtonIfFailed","CompleteSSOView","loadViewModel","StartSSOLoginView","StartOIDCLoginView","StartOIDCGuestLoginView","LogoutView","confirmView","progressView","showConfirm","ForcedLogoutView","showStatus","SessionLoadView","SessionPickerItemView","SessionPickerView","sessionList","RootView","activeSection","SessionView","LoginView","Timeout","ms","Interval","TimeMeasure","Clock","ServiceWorkerHandler","navigation","replyTo","hasOpen","hasSessionOpen","hasRoomOpen","worker","NotificationService","pushConfig","pusherFactory","defaultPayload","registration","subscriptionData","pushkey","subscription","title","History","OnlineStatus","subtleCryptoResult","promiseOrOp","HMACCrypto","subtleCrypto","hashName","DeriveCrypto","cryptoExtras","iterations","salt","hkdfkey","AESCrypto","jwkKey","counterLength","selectedKey","plaintext","cryptoKey","generateIV","randomBytes","ivArray","jwkKeyToRaw","base64Key","encodeUnpaddedBase64","encodeUrlBase64","rawKeyToJwk","AESLegacyCrypto","aesjs","aesCtr","Crypto","estimateStorageUsage","quota","WorkerState","pool","Request$1","WorkerPool","ALLOWED_BLOB_MIMETYPES","DEFAULT_MIMETYPE","BlobHandle","blob","mimetype","reader","ImageHandle","loadImgFromBlob","imgElement","maxDimension","aspectRatio","scaleFactor","scaledWidth","scaledHeight","canvas","drawableElement","mimeType","nativeBlob","VideoHandle","loadVideoFromBlob","videoWidth","videoHeight","hasReadPixelPermission","rgb","seekPromise","downloadInIframe","iframeSrc","blobHandle","isIOS","iframe","HTMLParseResult","bodyNode","sanitizeConfig","parseHTML","sanitized","POLLING_INTERVAL","SPEAKING_THRESHOLD","SPEAKING_SAMPLE_COUNT","MediaDevicesWrapper","mediaDevices","audio","isWebkit","WebAudioVolumeMeasurer","maxVolume","newSpeaking","AudioContext","EventType","EventType2","SDPStreamMetadataKey","SDPStreamMetadataPurpose","SDPStreamMetadataPurpose2","CallErrorCode","CallErrorCode2","CallIntent","CallIntent2","DOMWebRTC","forceTURN","turnServers","iceCandidatePoolSize","peerConn","receiver","peerConnection","purpose","_f","recvCodecs","codecs","codec","rtxCodecIndex","transceiver","ColorSchemePreference","ColorSchemePreference2","getColoredSvgString","svgString","primaryColor","secondaryColor","coloredSVGCode","IconColorizer","iconVariables","resolvedVariables","manifestLocation","parsedStructure","variable","urlObject","pathWithoutQueryParams","coloredVariables","primary","secondary","svgCode","coloredSvgCode","dataURI","offColor","pkg.offColor","pkg.default","derive","isDark","argumentAsNumber","DerivedVariables","baseVariables","variablesToDerive","resolvedValue","alias","newVariablesToDerive","RE_VARIABLE_VALUE","baseVariable","RuntimeThemeParser","preferredColorScheme","manifest","baseManifest","baseManifestLocation","cssLocation","derivedVariables","icons","defaultDarkVariant","defaultLightVariant","variant","variantDetails","themeId","variantName","isDefault","dark","variables","themeDisplayName","defaultVariant","location2","runtimeCSSLocation","BuiltThemeParser","builtAssets","ThemeLoader","manifestLocations","noManifestsAvailable","failedManifestLoads","parseErrors","runtimeThemeParser","builtThemeParser","runtimeThemePromises","indexOfBaseManifest","result2","themeVariant","themeDetails","themeData","defaultThemeId","TimeScope","TimeScope2","formatDuration","milliseconds","days","hours","minutes","seconds","TimeFormatter","date","daysDiff","capitalizeFirstLetter","addScript","src2","loadOlm","olmPaths","assetAbsPath","assetPath","loadOlmWorker","assetPaths","adaptUIOnVisualViewportResize","sessionView","scrollable","scrollTopBefore","heightBefore","heightAfter","offsetTop","Platform","configURL","isIE11","manifests","isDevelopment","transformer","logPersister","checkFile","file","error2","head","styleTag","FeatureFlag","FeatureFlag2","FeatureSet","flags","settingsStorage","createEnum","normalizeHomeserver","homeserver","getWellKnownResponse","wellKnownUrl","lookupHomeserver","issuer","wellKnownResponse","wellKnownHomeserver","wellKnownIssuer","wellKnownAccount","AbortableOperation","run","setAbortable","abortable","setProgress","encodeQueryParams","queryParams","encodeBody","HomeServerRequest","sourceRequest","err2","CS_R0_PREFIX","CS_V3_PREFIX","DEHYDRATION_PREFIX","HomeServerApi","reconnector","csPath","accessTokenSource","queryString","encodedBody","encoded","hsRequest","since","receiptType","initialDeviceDisplayName","auth","inhibitLogin","loginToken","dehydratedDeviceId","queryRequest","versionPart","pusher","roomIdOrAlias","searchTerm","ownUserId","WELL_KNOWN","RANDOM_CHARSET","randomChar","randomString","isValidBearerToken","assert","condition","OidcApi","urlRouter","clientId","staticClients","authority","codeVerifier","digest","redirectUri","nonce","idTokenHint","logoutHint","endpoint","token","revocationEndpoint","BaseObservableValue","ResolvedWaitForHandle","WaitForHandle","FlatMapObservableValue","MappedObservableValue","ObservableValue","TokenRefresher","oidcApi","anticipation","anticipated","ExponentialRetryDelay","ConnectionStatus","ConnectionStatus2","Reconnector","retryDelay","createMeasure","onlineStatus","onlineStatusSubscription","online","versionsRequest","decryptAttachment","ciphertextBuffer","expectedSha256base64","digestResult","encryptAttachment","MediaRepository","serverName","mediaId","fileEntry","encryptedBuffer","decryptedBuffer","mxcUrl","Request$2","responseCode","HomeServerApiWrapper","scheduler","RequestScheduler","Request","INCREMENTAL_TIMEOUT","SyncStatus","timelineIsEmpty","Sync","roomStates","sessionChanges","wasCatchupOrInitial","syncResult","isCatchupSync","sessionPromise","roomsPromises","rs","totalRequestTimeout","isInitialSync","sessionState","SessionSyncProcessState","inviteStates","archivedRoomStates","toDeviceEvents","prepareTxn","newKeysByRoom","RoomSyncProcessState","newKeys","is","ars","summaryChanges","roomsSection","allMemberships","membershipSection","InviteSyncProcessState","isNewRoom","archivedRoom","ArchivedRoomSyncProcessState","isNewInvite","applyTimelineEntries","timelineEntries","canMarkUnread","data2","processTimelineEvent","applySyncResponse","updateSummary","processRoomAccountData","processStateEvent","unreadNotifications","processNotificationCounts","highlightCount","notificationCount","algorithm2","newUrl","eventEntry","heroes","joinCount","inviteCount","SummaryData","copy","oldData","RoomSummary","PENDING_FRAGMENT_ID","BaseEntry","_fragmentIdComparer","otherEntry","REACTION_TYPE","ANNOTATION_RELATION_TYPE","createAnnotation","getRelationTarget","relation","setRelationTarget","getRelatedEventId","getRelation","getRelationFromContent","PendingAnnotation","ts","lastEntry","lastEntry2","htmlEscape","fallbackForNonTextualMessage","msgtype","fallbackPrefix","_createReplyContent","formattedBody","createReplyContent","nonTextual","formattedFallback","bodyLines","newBody","newFormattedBody","BaseEventEntry","fragmentIdComparer","relationEntry","countBefore","annotation","pee","haveRemoteReaction","pendingAnnotation","willAnnotate","PendingEventEntry","redactingEntry","SendStatus","unencryptedContentFields","PendingEvent","emitUpdate","into","a1","a2","urlPath","EventEntry","redactionEvent","originalContent","isValidFragmentId","_REDACT_KEEP_KEY_MAP","ret","_REDACT_KEEP_CONTENT_MAP","redactEvent","redactedEvent","keepMap","findBackwardSiblingFragments","byId","sortedSiblings","findForwardSiblingFragments","createIslands","fragments","islands","previousSiblings","nextSiblings","island","Island","previousId","sortedFragments","sortIndexA","sortIndexB","CompareError","FragmentIdComparer","islandA","islandB","prevFragment","nextFragment","RelationWriter","sourceEntry","relatedEventId","updatedStorageEntries","relations","relationStorageEntry","targetStorageEntry","updated","relationTargetStorageEntry","redactedStorageEntry","annotationEvent","annotations","sentByMe","redactedRelationEvent","redactedRelation","isObjectEmpty","Direction","isForward","_forward","_backward","FragmentBoundaryEntry","isFragmentStart","reached","neighbour","deduplicateEvents","SyncWriter","memberWriter","relationWriter","liveFragment","lastEvent","previousToken","oldFragmentId","newFragmentId","oldFragment","newFragment","currentKey","timeline","nonMemberStateEvents","memberSync","updatedEntries","timelineStateEventCount","updatedRelationTargetEntries","lastEventId","isRejoin","hasFetchedMembers","newLiveKey","BaseLRUCache","findEntryFn","indexToRemove","LRUCache","keyFn","MemberWriter","MemberSync","existingMember","memberData","newTimelineMembers","GapWriter","fragmentEntry","existingEventKeyMap","nonOverlappingEvents","neighbourFragmentEntry","neighbourFragment","firstEvent","startKey","eventStorageEntry","isOurUser","inc","stateMemberEvent","changedFragments","fromToken","chunk","ReaderRequest","readRawTimelineEntriesWithTxn","fragmentStore","eventsWithinFragment","eventEntries","nextFragmentEntry","TimelineReader","decryptEntries","stores","existingTxn","liveFragmentEntry","NonPersistedEventEntry","User","Timeline","pendingEvents","powerLevelsObservable","powerLevels","readerRequest","updateOrFalse","relatedTxnId","relationTarget","existingEntry","oldEntry","newEntries","relatedEntry","fetchedEntry","contextEvent","firstEventEntry","loadMembers","fetchMembers","setChangedMembersMap","changedMembersDuringSync","memberResponse","memberEvents","changedMember","fetchOrLoadMembers","fetchOrLoadMember","loadMember","fetchMember","RetainedValue","MemberList","calculateRoomName","sortedMembers","summaryData","countWithoutMe","lastMember","otherMember","Heroes","newHeroes","updatedHeroMembers","removedUserIds","existingUserId","ObservedEventMap","notifyEmpty","ObservedEvent","eventMap","ensureLogItem","EVENT_TYPE","STATE_DEFAULT_POWER_LEVEL","PowerLevels","powerLevelEvent","createEvent","userLevel","level2","ObservedStateTypeMap","ObservedStateKeyValue","EVENT_ENCRYPTED_TYPE$1","BaseRoom","mediaRepository","emitCollectionChange","createRoomEncryption","getSyncToken","stateObserver","retryEntries","otherRetryEntries","roomKeys","retryTimelineEntries","existingIds","ids","roomKey","changes","roomEncryption","inboundSessionTxn","DecryptionRequest","isTimelineOpen","newlyVerifiedDecryption","verifiedEntries","retryEventIds","allEntries","retryTimelineEntriesCopies","mapMember","observableMember","extraGapFillChanges","gapResult","powerLevelsState","createState","keyBackup","entry2","decryptFn","SendQueue","encryptionContent","remoteId","relatedEventWithoutRemoteId","relatedPE","eventIdOrTxnId","pe2","pendingEventsStore","maxStorageQueueIndex","needsEncryption","AttachmentUpload","progressCallback","sentBytes","content_uri","setPath","propKey","EVENT_ENCRYPTED_TYPE","Room","decryptPreparation","eventsToDecrypt","preparation","decryptChanges","encryptionChanges","heroChanges","removedPendingEvents","powerLevelsEvent","emitChange","oldName","newPowerLevels","shouldFlushKeys","shouldFetchUnverifiedSenders","updateCallback","pendingOperations","roomKeyShares","gapChunk","ArchivedRoom","senderMember","archivedRoomSummary","kickDetails","joinedSummaryData","newKickDetails","findKickDetails","kickedBy","kickEvent","loadProfiles","profiles","Profile","UserIdProfile","defaultE2EEStatusForType","presetForType","RoomBeingCreated","userIdProfiles","avatarEventContent","createOptions","DM_MAP_TYPE","mapEntry","userRooms","Invite","emitCollectionRemove","emitCollectionUpdate","inviteData","inviteState","myInvite","inviter","avatarColorId","otherMembers","otherUserIds","countSummary","inviterMemberEvent","Pusher","host2","appId","deleteDescription","DeviceMessageHandler","callHandler","olmDecryption","megolmDecryption","lock","encryptedEvents","olmEvents","olmDecryptChanges","newRoomKeys","SyncPreparation","prep","didWrite","decryptionResults","deviceTracker","callMessages","dr","unencryptedEvents","ACCOUNT_SESSION_KEY","DEVICE_KEY_FLAG_SESSION_KEY","SERVER_OTK_COUNT_SESSION_KEY","initiallyStoreAccount","pickleKey","areDeviceKeysUploaded","serverOTKCount","pickledAccount","Account","olmWorker","dehydratedDevice","oneTimeKeys","isDehydratedDevice","oneTimeKeysEntries","identityKeys","maxOTKs","keyLimit","unpublishedOTKCount","newKeyCount","deviceOneTimeKeysCount","otkCount","DEHYDRATION_LIBOLM_PICKLE_ALGORITHM","getDehydratedDevice","EncryptedDehydratedDevice","uploadAccountAsDehydratedDevice","deviceDisplayName","keyType","DehydratedDevice","Lock","MultiLock","locks","createSessionEntry","olmSession","Session$1","isNew","DecryptionResult","senderCurve25519Key","claimedEd25519Key","encryptedEvent","OlmPayloadType","OlmPayloadType2","SESSION_LIMIT_PER_SENDER_KEY","sortSessions","Decryption$1","senderKeyLock","senderKeys","eventsPerSenderKey","senderKeyOperations","events2","errors","senderKeyDecryptions","DecryptionChanges$2","readSessionsTxn","senderKeyDecryption","SenderKeyDecryption","createResult","skd","findFirstSessionId","OTK_ALGORITHM","MAX_BATCH_SIZE","Encryption$1","takenLocks","batchDevices","batchLock","batchMessages","devicesWithoutSession","existingEncryptionTargets","encryptionTargets","newEncryptionTargets","encryptLog","encryptedContent","EncryptedMessage","sessionIdsForDevice","EncryptionTarget","oneTimeKey","deviceIdentities","devicesByUser","usersObj","devicesObj","claimResponse","userKeyMap","verifiedEncryptionTargets","userSection","deviceSection","firstPropName","keySection","keyAlgorithm","failed","encryptionTarget","sessionEntry","DecryptionChanges$1","replayEntries","replayEntry","badEventId","mergeMap","dst","DecryptionPreparation$1","sessionDecryptions","sessionDecryption","sessionResult","ReplayDetectionEntry","SessionDecryption","keyLoader","decryptionResult","getSenderKey","getSessionId","getCiphertext","validateEvent","SessionKeyGroup","groupEventsBySession","group","RoomKey","isBetterThan","existingSession","IncomingRoomKey","loader","pickledSession","existingKey","storageKey","keyFromStorage","DeviceMessageRoomKey","OutboundRoomKey","_roomId","outboundSession","BackupRoomKey","_sessionId","_backupInfo","StoredRoomKey","keyFromDeviceMessage","keyFromBackup","backupInfo","existingSessionEntry","Decryption","uniqueEventIds","validEvents","eventsBySession","cachedKey","KeyLoader","keyOp","KeyOperation","bestIdx","bestOp","worstIdx","worst","Algorithm","BackupEncryption","encryption","authData","privateKey","expectedPubKey","sessionData","KEYS_PER_REQUEST","BackupConfig","KeyBackup","maxDelay","backupConfig","sessionResponse","sessionKeyInfo","secretStorage","base64PrivateKey","total","amountFinished","waitMs","Progress","keysNeedingBackup","uploadRequest","payloadRooms","roomPayload","firstMessageIndex","finished","Encryption","ownDeviceId","roomMessage","encryptionParams","roomKeyMessage","createdAt","EncryptionResult","rotationPeriodMs","rotationPeriodMsgs","ENCRYPTED_TYPE","ROOM_HISTORY_VISIBILITY_TYPE","MIN_PRESHARE_INTERVAL","RoomEncryption","olmEncryption","megolmEncryption","notifyMissingMegolmSession","hasSessions","missingSessions","addedMembers","removedMembers","newHistoryVisibility","shouldFlush","visibilityEntry","DecryptionPreparation","missingSessionEvents","missingEventsBySession","resultsWithoutDevice","sendersWithoutDevice","senders","resultsToEventIdMap","BatchDecryptionResult","keyIsBestOne","megolmResult","writeOpTxn","missingDevices","unsentUserIds","withheldMessage","devices2","megolmDecryptionPreparation","extraErrors","DecryptionChanges","megolmDecryptionChanges","LockMap","DecryptionError","SecretStorage","allAccountData","accountData","secret","encryptedData","hkdfKey","ciphertextBytes","plaintextBytes","recursivelyAssign","ignoreNullish","sourceKey","TrackKind","TrackKind2","getStreamAudioTrack","getStreamVideoTrack","mute","localMedia","localMuteSettings","userMediaAudio","userMediaVideo","MuteSettings","isMicrophoneMuted","isCameraMuted","hasMicrophoneTrack","hasCameraTrack","userMedia","CALL_LOG_TYPE","CALL_MEMBER_VALIDITY_PERIOD_MS","IncomingMessageAction","IncomingMessageAction2","RemoteMedia","screenShare","PeerCall","CallState","logStats","stats","statsObj","turnServer","listen","options2","newListener","dispose","signalingState","promiseCreator","CallDirection","myAnswer","CallParty","errorCode","callIdMatches","partyId","offer","CALL_TIMEOUT_MS","timeoutLog","newCallId","shouldReplace","sdpStreamMetadata","candidate","candidates","fromPartyId","bufferedCandidates","polite","offerCollision","content2","localDescription","answerContent","flushCandidatesLog","states","hangupParty","hangupReason","streamId","kind","track","streams","streamDetails","disposeListener","metaData","audioReceiver","videoReceiver","applyStream","oldStream","streamPurpose","applyTrack","oldTrack","newTrack","oldSender","streamToKeep","newSender","timeoutMs","CallParty2","CallState2","CallDirection2","handlesEventType","ErrorBoundary","errorValue","errorCodesWithoutRetry","MemberConnection","firstSeq","Member","callDeviceMembership","_deviceIndex","_eventTimestamp","updateMemberLog","peerCall","answerLog","retryCount","retryLog","disconnectLogItem","groupMessage","encryptedMessages","activeFoci","expiresAt","memberExpiresAt","expiresFromNow","isMemberExpired","memberLogItem","connectLogItem","shouldInitiateCall","hangup","deviceIndex","eventTimestamp","causeItem","roomMember","syncLog","destSessionId","hasNewMessageBeenDequeued","newMessage","isNewMsg","seq","previousMedia","muteSettings","margin","getMemberKey","memberKeyIsForUser","getDeviceFromMemberKey","JoinedData","membersLogItem","localPreviewMedia","GroupCall","isLoadedFromStorage","newCall","callContent","memberKey","joinLog","joinedData","memberContent","oldMedia","prevMuteSettings","change","callMember","callMembership","previousDeviceIds","member2","sessionIdChanged","newDeviceIds","call","previousDeviceId","bufferedMessages","includeOwn","stateContent","callsInfo","callInfo","connectItem","timeToRenewBeforeExpiration","renewFromNow","DEFAULT_TTL","DEFAULT_SETTINGS","TurnServerSource","defaultSettings","settings","iceServer","toIceServer","initialTtl","ttl","shouldUpdate","currentSettings","currentUrls","newUrls","uri","getRoomMemberKey","CallHandler","groupCall","callEntries","names","callEntry","roomIds","callsMemberEvents","roomMemberState","roomMemberKey","calls","newCallIdsMemberOf","previousCallIdsMemberOf","previousCallId","RoomStateHandlerSet","PICKLE_KEY","PUSHER_KEY","Session","features","rbc","device2","crossSigning","backupVersion","previousBackupVersion","amountMarked","dehydrationAccount","pendingEventsByRoomId","invites","inviteLoadPromise","rooms","roomLoadPromise","lastVersionResponse","operationsByScope","roomOperationsByType","roomOperations","roomBeingCreated","syncResponse","syncInfo","deviceLists","hasNewRoomKeys","e2eeAccountChanges","observableStatus","statusObservable","withInvited","withoutInvited","enable","pusherData","myPusher","serverPushersData","isInvited","isArchived","roomStateHandler","activeArchivedRoom","PasswordLoginMethod","deviceName","TokenLoginMethod","SSOLoginHelper","returnURL","BaseRegistrationStage","DummyAuth","TermsAuth","TokenAuth","Registration","accountDetails","flowSelector","flows","registrationResponse","flow","firstStage","lastStage","registrationStage","currentStage","LoadStatus","LoginFailure","Client","flow2","initialHomeserver","guestAvailable","loginMethod","inspectAccountSetup","currentStatus","loginData","expiresIn","idToken","oidcIssuer","oidcClientId","accountManagementUrl","lastUsed","filteredSessionInfo","lastVersionsResponse","encryptedDehydratedDevice","resolveStageFinish","promiseStageFinish","AccountSetup","endSessionRedirectEndpoint","finishStage","OIDCLoginMethod","_deviceName","access_token","refresh_token","expires_in","id_token","user_id","device_id","oidc_issuer","oidc_client_id","submitLogsToRageshakeServer","logsBlob","submitUrl","submitLogsFromSessionToDefaultServer","bugReportEndpointUrl","exportReporter","logExport","Navigation","allowsChild2","Path","Segment","oldPath","SegmentObservable","segmentValueEqual","newSegments","avatarInitials","firstChar","hashCode","chr","getIdentifierColorNumber","getAvatarHttpUrl","cssSize","imageSize","UpdateAction","update","newParams","TilesCollection","tileOptions","Tile","tileIdx","currentTile","prevTile","nextTile","newTile","hasDateSeparator","existingTile","searchTile","searchTile2","foundTile","TimelineViewModel","startTile","endTile","loadTop","hasReachedEnd","show","ComposerViewModel","wasEmpty","ErrorViewModel","ErrorReportViewModel","LocalMedia","dataChannelOptions","media","audioTrack","oldClone","oldOriginal","cloneOrAdoptStream","oldOriginalStream","oldCloneStream","newStream","DateTile","_firstTileInDay","prevDateString","SimpleTile","renderedAsRedacted","GapTile","isRetrying","canFillMore","isAtTop","dir","ReactionsViewModel","parentTile","pendingAnnotations","reaction","ReactionViewModel","hasPending","hasRemote","oneSetAndOtherNot","areDifferent","cmp","BaseMessageTile","myTimestamp","otherTimestamp","replyEntry","tileClassForEntry2","ReplyTile","redaction","scheme","noSpaceNorPunctuation","hostCharacter","pathOrFragment","urlRegex","regex","linkify","precedingText","remainingText","parsePlainBody","lines","linkifyCallback","isLink","LinkPart","TextPart","NewLinePart","MessageBody","stringAsBody","HeaderBlock","inlines","CodeBlock","language","ListBlock","startOffset","TableBlock","RulePart","FormatPart","ImagePart","alt","PillPart","href","isBlockquote","sourceString","BodyFormat","BaseTextTile","basicInline","basicBlock","safeSchemas","baseUrl","linkPrefix","Deserializer","link","contents","lcUrl","schema2","pillId","codeNode","cl","clname","cells","headRow","blocks","nodes","htmlNode","parseHTMLBody","parseResult","TextTile","messageBody","MAX_HEIGHT","MAX_WIDTH","BaseMediaTile","thumbnailMxc","thumbnailFile","scaleHeightFactor","scaleWidthFactor","ImageTile","RoomMemberTile","senderName","targetName","prevMembership","EncryptedEventTile","parentResult","decryptionError","downloadSandboxPath","workerPath","olmWasmPath","olmJsPath","olmLegacyJsPath","hasOwn","argType","Text","color","weight","htmlFor","textClass","jsx","HydrogenContext","HydrogenContextProvider","useHydrogen","ensureAuth","useAsyncCallback","Dots","paused","CoverScreen","LoadingScreen","Button","btnClass","textColor","renderChild","getText","MX_PATH_PREFIX","getMxIdDomain","mxId","getMxIdUsername","resolveRoomAlias","isRoomAliasAvailable","aliasToRoomId","roomIdToAlias","getProfileRoom","isValidUserId","isValidRoomId","waitToCreateRoom","unSubs","uploadAttachment","onRequest","onProgress","errcode","SegmentToSigil","parseMatrixUri","sigil1","mxid1","mxid2","parsedMatrixUriToString","getRoomCall","roomCalls","_callId","eventByOrderKey","ev1","ev2","o1","o2","ts1","ts2","setPowerLevel","powerLevel","useIsMounted","isMounted","baseUserProfileAtom","userProfileAtom","useUserProfile","setUserProfile","profileRoom","setProfileRoom","updateProfile","updateFromServer","listenProfileChange","memberObserver","initProfileRoom","sync","prevStatus","syncStatus","registerThirdroomGlobalFn","registerThirdroomGlobalVar","downloadFile","fileName","allowsChild","parentType","MockRouter","asset","hydrogenInstance","initHydrogen","configData","logViewer","onReady","getSessionInfo","waitToLoadClient","loadStatus","loginFailureToMsg","loginFailure","loadClient","getOidcLoginMethod","urlCreator","storageKeys","useOidcComplete","login","completeOidc","useSession","sessionRef","loadingInitialSession","initialSessionLoadError","loadInitialSession","loggingIn","errorLoggingIn","loggingOut","errorLoggingOut","logout","logoutChain","oidcCompleteError","errorMsg","HydrogenRootView","containerEl","landingPath","loginPath","WORLD_PATH_REG","jsxs","onLoginRedirectPath","LogoFullSVG","SplashScreen","PageNotFound","Sentry.withSentryReactRouterV6Routing","serviceWorkerFile","reg","FocusOutlineManager","isFocusVisible","useFocusVisible","LandingPage","lazy","__vitePreload","PreviewBlog","GLTFViewer","AssetPipeline","WorldRootView","MainMenuRootView","App","JotaiProvider","Suspense","Sentry.init","Sentry.reactRouterV6Instrumentation","React","enableMapSet","rootId","rootEl","ReactDOM"],"sources":["../../node_modules/object-assign/index.js","../../node_modules/react/cjs/react.production.min.js","../../node_modules/react/index.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/scheduler/cjs/scheduler.production.min.js","../../node_modules/scheduler/index.js","../../node_modules/react-dom/cjs/react-dom.production.min.js","../../node_modules/react-dom/index.js","../../node_modules/@babel/runtime/helpers/esm/extends.js","../../node_modules/history/index.js","../../node_modules/react-router/index.js","../../node_modules/react-router-dom/index.js","../../node_modules/immer/dist/immer.esm.js","../../node_modules/@sentry/utils/esm/env.js","../../node_modules/@sentry/utils/esm/node.js","../../node_modules/@sentry/utils/esm/global.js","../../node_modules/@sentry/utils/esm/is.js","../../node_modules/@sentry/utils/esm/browser.js","../../node_modules/@sentry/utils/esm/error.js","../../node_modules/@sentry/utils/esm/dsn.js","../../node_modules/@sentry/utils/esm/logger.js","../../node_modules/@sentry/utils/esm/string.js","../../node_modules/@sentry/utils/esm/object.js","../../node_modules/@sentry/utils/esm/buildPolyfills/_nullishCoalesce.js","../../node_modules/@sentry/utils/esm/buildPolyfills/_optionalChain.js","../../node_modules/@sentry/utils/esm/stacktrace.js","../../node_modules/@sentry/utils/esm/supports.js","../../node_modules/@sentry/utils/esm/instrument.js","../../node_modules/@sentry/utils/esm/memo.js","../../node_modules/@sentry/utils/esm/misc.js","../../node_modules/@sentry/utils/esm/normalize.js","../../node_modules/@sentry/utils/esm/syncpromise.js","../../node_modules/@sentry/utils/esm/promisebuffer.js","../../node_modules/@sentry/utils/esm/url.js","../../node_modules/@sentry/utils/esm/severity.js","../../node_modules/@sentry/utils/esm/time.js","../../node_modules/@sentry/utils/esm/tracing.js","../../node_modules/@sentry/utils/esm/envelope.js","../../node_modules/@sentry/utils/esm/clientreport.js","../../node_modules/@sentry/utils/esm/ratelimit.js","../../node_modules/@sentry/utils/esm/baggage.js","../../node_modules/@sentry/hub/esm/session.js","../../node_modules/@sentry/hub/esm/scope.js","../../node_modules/@sentry/hub/esm/hub.js","../../node_modules/@sentry/hub/esm/exports.js","../../node_modules/@sentry/core/esm/api.js","../../node_modules/@sentry/core/esm/envelope.js","../../node_modules/@sentry/core/esm/integration.js","../../node_modules/@sentry/core/esm/baseclient.js","../../node_modules/@sentry/core/esm/sdk.js","../../node_modules/@sentry/core/esm/transports/base.js","../../node_modules/@sentry/core/esm/version.js","../../node_modules/@sentry/core/esm/integrations/functiontostring.js","../../node_modules/@sentry/core/esm/integrations/inboundfilters.js","../../node_modules/@sentry/browser/esm/eventbuilder.js","../../node_modules/@sentry/browser/esm/integrations/breadcrumbs.js","../../node_modules/@sentry/browser/esm/transports/utils.js","../../node_modules/@sentry/browser/esm/client.js","../../node_modules/@sentry/browser/esm/transports/fetch.js","../../node_modules/@sentry/browser/esm/transports/xhr.js","../../node_modules/@sentry/browser/esm/stack-parsers.js","../../node_modules/@sentry/browser/esm/helpers.js","../../node_modules/@sentry/browser/esm/integrations/globalhandlers.js","../../node_modules/@sentry/browser/esm/integrations/trycatch.js","../../node_modules/@sentry/browser/esm/integrations/linkederrors.js","../../node_modules/@sentry/browser/esm/integrations/httpcontext.js","../../node_modules/@sentry/browser/esm/integrations/dedupe.js","../../node_modules/@sentry/browser/esm/sdk.js","../../node_modules/@sentry/react/esm/sdk.js","../../node_modules/hoist-non-react-statics/node_modules/react-is/cjs/react-is.production.min.js","../../node_modules/hoist-non-react-statics/node_modules/react-is/index.js","../../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../../node_modules/@sentry/react/esm/reactrouterv6.js","../../node_modules/@sentry/tracing/esm/utils.js","../../node_modules/@sentry/tracing/esm/errors.js","../../node_modules/@sentry/tracing/esm/span.js","../../node_modules/@sentry/tracing/esm/transaction.js","../../node_modules/@sentry/tracing/esm/idletransaction.js","../../node_modules/@sentry/tracing/esm/hubextensions.js","../../node_modules/@sentry/tracing/esm/browser/backgroundtab.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/bindReporter.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/generateUniqueID.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/initMetric.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/observe.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/onHidden.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getCLS.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/getVisibilityWatcher.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getFID.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getLCP.js","../../node_modules/@sentry/tracing/esm/browser/metrics/utils.js","../../node_modules/@sentry/tracing/esm/browser/metrics/index.js","../../node_modules/@sentry/tracing/esm/browser/request.js","../../node_modules/@sentry/tracing/esm/browser/router.js","../../node_modules/@sentry/tracing/esm/browser/browsertracing.js","../../node_modules/@sentry/tracing/esm/index.js","../../node_modules/@react-aria/ssr/dist/module.js","../../node_modules/clsx/dist/clsx.m.js","../../node_modules/@react-stately/utils/dist/module.js","../../node_modules/@react-aria/utils/dist/module.js","../../node_modules/@react-aria/interactions/dist/module.js","../../node_modules/jotai/esm/vanilla.mjs","../../node_modules/jotai/esm/react.mjs","../../node_modules/another-json/another-json.js","../../__vite-browser-external","../../node_modules/@matrix-org/olm/olm.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/dompurify/dist/purify.es.js","../../node_modules/off-color/cjs/index.min.js","../../node_modules/off-color/index.js","../../node_modules/@thirdroom/hydrogen-view-sdk/lib-build/hydrogen.es.js","../../node_modules/@thirdroom/hydrogen-view-sdk/asset-build/assets/download-sandbox.html?url","../../node_modules/@thirdroom/hydrogen-view-sdk/asset-build/assets/main.js?url","../../node_modules/@matrix-org/olm/olm.wasm?url","../../node_modules/@matrix-org/olm/olm.js?url","../../node_modules/@matrix-org/olm/olm_legacy.js?url","../../node_modules/classnames/index.js","../../src/ui/atoms/text/Text.tsx","../../src/ui/hooks/useHydrogen.tsx","../../src/ui/hooks/useAsyncCallback.ts","../../src/ui/atoms/loading/Dots.tsx","../../src/ui/views/components/cover-screen/CoverScreen.tsx","../../src/ui/views/components/loading-screen/LoadingScreen.tsx","../../src/ui/atoms/button/Button.tsx","../../src/ui/utils/matrixUtils.ts","../../src/ui/hooks/useIsMounted.ts","../../src/ui/state/userProfile.ts","../../src/ui/hooks/useUserProfile.ts","../../src/engine/utils/registerThirdroomGlobal.ts","../../src/engine/utils/downloadFile.ts","../../src/ui/views/HydrogenRootView.tsx","../../res/svg/logo-full.svg","../../src/ui/views/components/splash-screen/SplashScreen.tsx","../../src/ui/views/components/page-not-found/PageNotFound.tsx","../../src/ui/App.tsx","../../src/main.tsx"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import _extends from '@babel/runtime/helpers/esm/extends';\n\n/**\r\n * Actions represent the type of change to a location value.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#action\r\n */\nvar Action;\n\n(function (Action) {\n  /**\r\n   * A POP indicates a change to an arbitrary index in the history stack, such\r\n   * as a back or forward navigation. It does not describe the direction of the\r\n   * navigation, only that the current index changed.\r\n   *\r\n   * Note: This is the default action for newly created history objects.\r\n   */\n  Action[\"Pop\"] = \"POP\";\n  /**\r\n   * A PUSH indicates a new entry being added to the history stack, such as when\r\n   * a link is clicked and a new page loads. When this happens, all subsequent\r\n   * entries in the stack are lost.\r\n   */\n\n  Action[\"Push\"] = \"PUSH\";\n  /**\r\n   * A REPLACE indicates the entry at the current index in the history stack\r\n   * being replaced by a new one.\r\n   */\n\n  Action[\"Replace\"] = \"REPLACE\";\n})(Action || (Action = {}));\n\nvar readOnly = process.env.NODE_ENV !== \"production\" ? function (obj) {\n  return Object.freeze(obj);\n} : function (obj) {\n  return obj;\n};\n\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== 'undefined') console.warn(message);\n\n    try {\n      // Welcome to debugging history!\n      //\n      // This error is thrown as a convenience so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message); // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\n\nvar BeforeUnloadEventType = 'beforeunload';\nvar HashChangeEventType = 'hashchange';\nvar PopStateEventType = 'popstate';\n/**\r\n * Browser history stores the location in regular URLs. This is the standard for\r\n * most web apps, but it requires some configuration on the server to ensure you\r\n * serve the same app at multiple URLs.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createbrowserhistory\r\n */\n\nfunction createBrowserHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$window = _options.window,\n      window = _options$window === void 0 ? document.defaultView : _options$window;\n  var globalHistory = window.history;\n\n  function getIndexAndLocation() {\n    var _window$location = window.location,\n        pathname = _window$location.pathname,\n        search = _window$location.search,\n        hash = _window$location.hash;\n    var state = globalHistory.state || {};\n    return [state.idx, readOnly({\n      pathname: pathname,\n      search: search,\n      hash: hash,\n      state: state.usr || null,\n      key: state.key || 'default'\n    })];\n  }\n\n  var blockedPopTx = null;\n\n  function handlePop() {\n    if (blockedPopTx) {\n      blockers.call(blockedPopTx);\n      blockedPopTx = null;\n    } else {\n      var nextAction = Action.Pop;\n\n      var _getIndexAndLocation = getIndexAndLocation(),\n          nextIndex = _getIndexAndLocation[0],\n          nextLocation = _getIndexAndLocation[1];\n\n      if (blockers.length) {\n        if (nextIndex != null) {\n          var delta = index - nextIndex;\n\n          if (delta) {\n            // Revert the POP\n            blockedPopTx = {\n              action: nextAction,\n              location: nextLocation,\n              retry: function retry() {\n                go(delta * -1);\n              }\n            };\n            go(delta);\n          }\n        } else {\n          // Trying to POP to a location with no index. We did not create\n          // this location, so we can't effectively block the navigation.\n          process.env.NODE_ENV !== \"production\" ? warning(false, // TODO: Write up a doc that explains our blocking strategy in\n          // detail and link to it here so people can understand better what\n          // is going on and how to avoid it.\n          \"You are trying to block a POP navigation to a location that was not \" + \"created by the history library. The block will fail silently in \" + \"production, but in general you should do all navigation with the \" + \"history library (instead of using window.history.pushState directly) \" + \"to avoid this situation.\") : void 0;\n        }\n      } else {\n        applyTx(nextAction);\n      }\n    }\n  }\n\n  window.addEventListener(PopStateEventType, handlePop);\n  var action = Action.Pop;\n\n  var _getIndexAndLocation2 = getIndexAndLocation(),\n      index = _getIndexAndLocation2[0],\n      location = _getIndexAndLocation2[1];\n\n  var listeners = createEvents();\n  var blockers = createEvents();\n\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState(_extends({}, globalHistory.state, {\n      idx: index\n    }), '');\n  }\n\n  function createHref(to) {\n    return typeof to === 'string' ? to : createPath(to);\n  } // state defaults to `null` because `window.history.state` does\n\n\n  function getNextLocation(to, state) {\n    if (state === void 0) {\n      state = null;\n    }\n\n    return readOnly(_extends({\n      pathname: location.pathname,\n      hash: '',\n      search: ''\n    }, typeof to === 'string' ? parsePath(to) : to, {\n      state: state,\n      key: createKey()\n    }));\n  }\n\n  function getHistoryStateAndUrl(nextLocation, index) {\n    return [{\n      usr: nextLocation.state,\n      key: nextLocation.key,\n      idx: index\n    }, createHref(nextLocation)];\n  }\n\n  function allowTx(action, location, retry) {\n    return !blockers.length || (blockers.call({\n      action: action,\n      location: location,\n      retry: retry\n    }), false);\n  }\n\n  function applyTx(nextAction) {\n    action = nextAction;\n\n    var _getIndexAndLocation3 = getIndexAndLocation();\n\n    index = _getIndexAndLocation3[0];\n    location = _getIndexAndLocation3[1];\n    listeners.call({\n      action: action,\n      location: location\n    });\n  }\n\n  function push(to, state) {\n    var nextAction = Action.Push;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      push(to, state);\n    }\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      var _getHistoryStateAndUr = getHistoryStateAndUrl(nextLocation, index + 1),\n          historyState = _getHistoryStateAndUr[0],\n          url = _getHistoryStateAndUr[1]; // TODO: Support forced reloading\n      // try...catch because iOS limits us to 100 pushState calls :/\n\n\n      try {\n        globalHistory.pushState(historyState, '', url);\n      } catch (error) {\n        // They are going to lose state here, but there is no real\n        // way to warn them about it since the page will refresh...\n        window.location.assign(url);\n      }\n\n      applyTx(nextAction);\n    }\n  }\n\n  function replace(to, state) {\n    var nextAction = Action.Replace;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      replace(to, state);\n    }\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      var _getHistoryStateAndUr2 = getHistoryStateAndUrl(nextLocation, index),\n          historyState = _getHistoryStateAndUr2[0],\n          url = _getHistoryStateAndUr2[1]; // TODO: Support forced reloading\n\n\n      globalHistory.replaceState(historyState, '', url);\n      applyTx(nextAction);\n    }\n  }\n\n  function go(delta) {\n    globalHistory.go(delta);\n  }\n\n  var history = {\n    get action() {\n      return action;\n    },\n\n    get location() {\n      return location;\n    },\n\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    back: function back() {\n      go(-1);\n    },\n    forward: function forward() {\n      go(1);\n    },\n    listen: function listen(listener) {\n      return listeners.push(listener);\n    },\n    block: function block(blocker) {\n      var unblock = blockers.push(blocker);\n\n      if (blockers.length === 1) {\n        window.addEventListener(BeforeUnloadEventType, promptBeforeUnload);\n      }\n\n      return function () {\n        unblock(); // Remove the beforeunload listener so the document may\n        // still be salvageable in the pagehide event.\n        // See https://html.spec.whatwg.org/#unloading-documents\n\n        if (!blockers.length) {\n          window.removeEventListener(BeforeUnloadEventType, promptBeforeUnload);\n        }\n      };\n    }\n  };\n  return history;\n}\n/**\r\n * Hash history stores the location in window.location.hash. This makes it ideal\r\n * for situations where you don't want to send the location to the server for\r\n * some reason, either because you do cannot configure it or the URL space is\r\n * reserved for something else.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createhashhistory\r\n */\n\nfunction createHashHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options2 = options,\n      _options2$window = _options2.window,\n      window = _options2$window === void 0 ? document.defaultView : _options2$window;\n  var globalHistory = window.history;\n\n  function getIndexAndLocation() {\n    var _parsePath = parsePath(window.location.hash.substr(1)),\n        _parsePath$pathname = _parsePath.pathname,\n        pathname = _parsePath$pathname === void 0 ? '/' : _parsePath$pathname,\n        _parsePath$search = _parsePath.search,\n        search = _parsePath$search === void 0 ? '' : _parsePath$search,\n        _parsePath$hash = _parsePath.hash,\n        hash = _parsePath$hash === void 0 ? '' : _parsePath$hash;\n\n    var state = globalHistory.state || {};\n    return [state.idx, readOnly({\n      pathname: pathname,\n      search: search,\n      hash: hash,\n      state: state.usr || null,\n      key: state.key || 'default'\n    })];\n  }\n\n  var blockedPopTx = null;\n\n  function handlePop() {\n    if (blockedPopTx) {\n      blockers.call(blockedPopTx);\n      blockedPopTx = null;\n    } else {\n      var nextAction = Action.Pop;\n\n      var _getIndexAndLocation4 = getIndexAndLocation(),\n          nextIndex = _getIndexAndLocation4[0],\n          nextLocation = _getIndexAndLocation4[1];\n\n      if (blockers.length) {\n        if (nextIndex != null) {\n          var delta = index - nextIndex;\n\n          if (delta) {\n            // Revert the POP\n            blockedPopTx = {\n              action: nextAction,\n              location: nextLocation,\n              retry: function retry() {\n                go(delta * -1);\n              }\n            };\n            go(delta);\n          }\n        } else {\n          // Trying to POP to a location with no index. We did not create\n          // this location, so we can't effectively block the navigation.\n          process.env.NODE_ENV !== \"production\" ? warning(false, // TODO: Write up a doc that explains our blocking strategy in\n          // detail and link to it here so people can understand better\n          // what is going on and how to avoid it.\n          \"You are trying to block a POP navigation to a location that was not \" + \"created by the history library. The block will fail silently in \" + \"production, but in general you should do all navigation with the \" + \"history library (instead of using window.history.pushState directly) \" + \"to avoid this situation.\") : void 0;\n        }\n      } else {\n        applyTx(nextAction);\n      }\n    }\n  }\n\n  window.addEventListener(PopStateEventType, handlePop); // popstate does not fire on hashchange in IE 11 and old (trident) Edge\n  // https://developer.mozilla.org/de/docs/Web/API/Window/popstate_event\n\n  window.addEventListener(HashChangeEventType, function () {\n    var _getIndexAndLocation5 = getIndexAndLocation(),\n        nextLocation = _getIndexAndLocation5[1]; // Ignore extraneous hashchange events.\n\n\n    if (createPath(nextLocation) !== createPath(location)) {\n      handlePop();\n    }\n  });\n  var action = Action.Pop;\n\n  var _getIndexAndLocation6 = getIndexAndLocation(),\n      index = _getIndexAndLocation6[0],\n      location = _getIndexAndLocation6[1];\n\n  var listeners = createEvents();\n  var blockers = createEvents();\n\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState(_extends({}, globalHistory.state, {\n      idx: index\n    }), '');\n  }\n\n  function getBaseHref() {\n    var base = document.querySelector('base');\n    var href = '';\n\n    if (base && base.getAttribute('href')) {\n      var url = window.location.href;\n      var hashIndex = url.indexOf('#');\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n\n    return href;\n  }\n\n  function createHref(to) {\n    return getBaseHref() + '#' + (typeof to === 'string' ? to : createPath(to));\n  }\n\n  function getNextLocation(to, state) {\n    if (state === void 0) {\n      state = null;\n    }\n\n    return readOnly(_extends({\n      pathname: location.pathname,\n      hash: '',\n      search: ''\n    }, typeof to === 'string' ? parsePath(to) : to, {\n      state: state,\n      key: createKey()\n    }));\n  }\n\n  function getHistoryStateAndUrl(nextLocation, index) {\n    return [{\n      usr: nextLocation.state,\n      key: nextLocation.key,\n      idx: index\n    }, createHref(nextLocation)];\n  }\n\n  function allowTx(action, location, retry) {\n    return !blockers.length || (blockers.call({\n      action: action,\n      location: location,\n      retry: retry\n    }), false);\n  }\n\n  function applyTx(nextAction) {\n    action = nextAction;\n\n    var _getIndexAndLocation7 = getIndexAndLocation();\n\n    index = _getIndexAndLocation7[0];\n    location = _getIndexAndLocation7[1];\n    listeners.call({\n      action: action,\n      location: location\n    });\n  }\n\n  function push(to, state) {\n    var nextAction = Action.Push;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      push(to, state);\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(nextLocation.pathname.charAt(0) === '/', \"Relative pathnames are not supported in hash history.push(\" + JSON.stringify(to) + \")\") : void 0;\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      var _getHistoryStateAndUr3 = getHistoryStateAndUrl(nextLocation, index + 1),\n          historyState = _getHistoryStateAndUr3[0],\n          url = _getHistoryStateAndUr3[1]; // TODO: Support forced reloading\n      // try...catch because iOS limits us to 100 pushState calls :/\n\n\n      try {\n        globalHistory.pushState(historyState, '', url);\n      } catch (error) {\n        // They are going to lose state here, but there is no real\n        // way to warn them about it since the page will refresh...\n        window.location.assign(url);\n      }\n\n      applyTx(nextAction);\n    }\n  }\n\n  function replace(to, state) {\n    var nextAction = Action.Replace;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      replace(to, state);\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(nextLocation.pathname.charAt(0) === '/', \"Relative pathnames are not supported in hash history.replace(\" + JSON.stringify(to) + \")\") : void 0;\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      var _getHistoryStateAndUr4 = getHistoryStateAndUrl(nextLocation, index),\n          historyState = _getHistoryStateAndUr4[0],\n          url = _getHistoryStateAndUr4[1]; // TODO: Support forced reloading\n\n\n      globalHistory.replaceState(historyState, '', url);\n      applyTx(nextAction);\n    }\n  }\n\n  function go(delta) {\n    globalHistory.go(delta);\n  }\n\n  var history = {\n    get action() {\n      return action;\n    },\n\n    get location() {\n      return location;\n    },\n\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    back: function back() {\n      go(-1);\n    },\n    forward: function forward() {\n      go(1);\n    },\n    listen: function listen(listener) {\n      return listeners.push(listener);\n    },\n    block: function block(blocker) {\n      var unblock = blockers.push(blocker);\n\n      if (blockers.length === 1) {\n        window.addEventListener(BeforeUnloadEventType, promptBeforeUnload);\n      }\n\n      return function () {\n        unblock(); // Remove the beforeunload listener so the document may\n        // still be salvageable in the pagehide event.\n        // See https://html.spec.whatwg.org/#unloading-documents\n\n        if (!blockers.length) {\n          window.removeEventListener(BeforeUnloadEventType, promptBeforeUnload);\n        }\n      };\n    }\n  };\n  return history;\n}\n/**\r\n * Memory history stores the current location in memory. It is designed for use\r\n * in stateful non-browser environments like tests and React Native.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#creatememoryhistory\r\n */\n\nfunction createMemoryHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options3 = options,\n      _options3$initialEntr = _options3.initialEntries,\n      initialEntries = _options3$initialEntr === void 0 ? ['/'] : _options3$initialEntr,\n      initialIndex = _options3.initialIndex;\n  var entries = initialEntries.map(function (entry) {\n    var location = readOnly(_extends({\n      pathname: '/',\n      search: '',\n      hash: '',\n      state: null,\n      key: createKey()\n    }, typeof entry === 'string' ? parsePath(entry) : entry));\n    process.env.NODE_ENV !== \"production\" ? warning(location.pathname.charAt(0) === '/', \"Relative pathnames are not supported in createMemoryHistory({ initialEntries }) (invalid entry: \" + JSON.stringify(entry) + \")\") : void 0;\n    return location;\n  });\n  var index = clamp(initialIndex == null ? entries.length - 1 : initialIndex, 0, entries.length - 1);\n  var action = Action.Pop;\n  var location = entries[index];\n  var listeners = createEvents();\n  var blockers = createEvents();\n\n  function createHref(to) {\n    return typeof to === 'string' ? to : createPath(to);\n  }\n\n  function getNextLocation(to, state) {\n    if (state === void 0) {\n      state = null;\n    }\n\n    return readOnly(_extends({\n      pathname: location.pathname,\n      search: '',\n      hash: ''\n    }, typeof to === 'string' ? parsePath(to) : to, {\n      state: state,\n      key: createKey()\n    }));\n  }\n\n  function allowTx(action, location, retry) {\n    return !blockers.length || (blockers.call({\n      action: action,\n      location: location,\n      retry: retry\n    }), false);\n  }\n\n  function applyTx(nextAction, nextLocation) {\n    action = nextAction;\n    location = nextLocation;\n    listeners.call({\n      action: action,\n      location: location\n    });\n  }\n\n  function push(to, state) {\n    var nextAction = Action.Push;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      push(to, state);\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(location.pathname.charAt(0) === '/', \"Relative pathnames are not supported in memory history.push(\" + JSON.stringify(to) + \")\") : void 0;\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      applyTx(nextAction, nextLocation);\n    }\n  }\n\n  function replace(to, state) {\n    var nextAction = Action.Replace;\n    var nextLocation = getNextLocation(to, state);\n\n    function retry() {\n      replace(to, state);\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(location.pathname.charAt(0) === '/', \"Relative pathnames are not supported in memory history.replace(\" + JSON.stringify(to) + \")\") : void 0;\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      entries[index] = nextLocation;\n      applyTx(nextAction, nextLocation);\n    }\n  }\n\n  function go(delta) {\n    var nextIndex = clamp(index + delta, 0, entries.length - 1);\n    var nextAction = Action.Pop;\n    var nextLocation = entries[nextIndex];\n\n    function retry() {\n      go(delta);\n    }\n\n    if (allowTx(nextAction, nextLocation, retry)) {\n      index = nextIndex;\n      applyTx(nextAction, nextLocation);\n    }\n  }\n\n  var history = {\n    get index() {\n      return index;\n    },\n\n    get action() {\n      return action;\n    },\n\n    get location() {\n      return location;\n    },\n\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    back: function back() {\n      go(-1);\n    },\n    forward: function forward() {\n      go(1);\n    },\n    listen: function listen(listener) {\n      return listeners.push(listener);\n    },\n    block: function block(blocker) {\n      return blockers.push(blocker);\n    }\n  };\n  return history;\n} ////////////////////////////////////////////////////////////////////////////////\n// UTILS\n////////////////////////////////////////////////////////////////////////////////\n\nfunction clamp(n, lowerBound, upperBound) {\n  return Math.min(Math.max(n, lowerBound), upperBound);\n}\n\nfunction promptBeforeUnload(event) {\n  // Cancel the event.\n  event.preventDefault(); // Chrome (and legacy IE) requires returnValue to be set.\n\n  event.returnValue = '';\n}\n\nfunction createEvents() {\n  var handlers = [];\n  return {\n    get length() {\n      return handlers.length;\n    },\n\n    push: function push(fn) {\n      handlers.push(fn);\n      return function () {\n        handlers = handlers.filter(function (handler) {\n          return handler !== fn;\n        });\n      };\n    },\n    call: function call(arg) {\n      handlers.forEach(function (fn) {\n        return fn && fn(arg);\n      });\n    }\n  };\n}\n\nfunction createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n/**\r\n * Creates a string URL path from the given pathname, search, and hash components.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createpath\r\n */\n\n\nfunction createPath(_ref) {\n  var _ref$pathname = _ref.pathname,\n      pathname = _ref$pathname === void 0 ? '/' : _ref$pathname,\n      _ref$search = _ref.search,\n      search = _ref$search === void 0 ? '' : _ref$search,\n      _ref$hash = _ref.hash,\n      hash = _ref$hash === void 0 ? '' : _ref$hash;\n  if (search && search !== '?') pathname += search.charAt(0) === '?' ? search : '?' + search;\n  if (hash && hash !== '#') pathname += hash.charAt(0) === '#' ? hash : '#' + hash;\n  return pathname;\n}\n/**\r\n * Parses a string URL path into its separate pathname, search, and hash components.\r\n *\r\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#parsepath\r\n */\n\nfunction parsePath(path) {\n  var parsedPath = {};\n\n  if (path) {\n    var hashIndex = path.indexOf('#');\n\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substr(hashIndex);\n      path = path.substr(0, hashIndex);\n    }\n\n    var searchIndex = path.indexOf('?');\n\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substr(searchIndex);\n      path = path.substr(0, searchIndex);\n    }\n\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n\n  return parsedPath;\n}\n\nexport { Action, createBrowserHistory, createHashHistory, createMemoryHistory, createPath, parsePath };\n//# sourceMappingURL=index.js.map\n","/**\n * React Router v6.3.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { parsePath, createMemoryHistory, Action } from 'history';\nexport { Action as NavigationType, createPath, parsePath } from 'history';\nimport { createContext, useContext, useMemo, useRef, useEffect, useCallback, createElement, useState, useLayoutEffect, Children, isValidElement, Fragment } from 'react';\n\nconst NavigationContext = /*#__PURE__*/createContext(null);\n\nif (process.env.NODE_ENV !== \"production\") {\n  NavigationContext.displayName = \"Navigation\";\n}\n\nconst LocationContext = /*#__PURE__*/createContext(null);\n\nif (process.env.NODE_ENV !== \"production\") {\n  LocationContext.displayName = \"Location\";\n}\n\nconst RouteContext = /*#__PURE__*/createContext({\n  outlet: null,\n  matches: []\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  RouteContext.displayName = \"Route\";\n}\n\nfunction invariant(cond, message) {\n  if (!cond) throw new Error(message);\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n\n    try {\n      // Welcome to debugging React Router!\n      //\n      // This error is thrown as a convenience so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message); // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\nconst alreadyWarned = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned[key]) {\n    alreadyWarned[key] = true;\n    process.env.NODE_ENV !== \"production\" ? warning(false, message) : void 0;\n  }\n}\n\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/docs/en/v6/api#generatepath\n */\nfunction generatePath(path, params) {\n  if (params === void 0) {\n    params = {};\n  }\n\n  return path.replace(/:(\\w+)/g, (_, key) => {\n    !(params[key] != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Missing \\\":\" + key + \"\\\" param\") : invariant(false) : void 0;\n    return params[key];\n  }).replace(/\\/*\\*$/, _ => params[\"*\"] == null ? \"\" : params[\"*\"].replace(/^\\/*/, \"/\"));\n}\n/**\n * A RouteMatch contains info about how a route matched a URL.\n */\n\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/docs/en/v6/api#matchroutes\n */\nfunction matchRoutes(routes, locationArg, basename) {\n  if (basename === void 0) {\n    basename = \"/\";\n  }\n\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n\n  if (pathname == null) {\n    return null;\n  }\n\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    matches = matchRouteBranch(branches[i], pathname);\n  }\n\n  return matches;\n}\n\nfunction flattenRoutes(routes, branches, parentsMeta, parentPath) {\n  if (branches === void 0) {\n    branches = [];\n  }\n\n  if (parentsMeta === void 0) {\n    parentsMeta = [];\n  }\n\n  if (parentPath === void 0) {\n    parentPath = \"\";\n  }\n\n  routes.forEach((route, index) => {\n    let meta = {\n      relativePath: route.path || \"\",\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n\n    if (meta.relativePath.startsWith(\"/\")) {\n      !meta.relativePath.startsWith(parentPath) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Absolute route path \\\"\" + meta.relativePath + \"\\\" nested under path \" + (\"\\\"\" + parentPath + \"\\\" is not valid. An absolute child route path \") + \"must start with the combined path of all its parent routes.\") : invariant(false) : void 0;\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta); // Add the children before adding this route to the array so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n\n    if (route.children && route.children.length > 0) {\n      !(route.index !== true) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Index routes must not have child routes. Please remove \" + (\"all child routes from route path \\\"\" + path + \"\\\".\")) : invariant(false) : void 0;\n      flattenRoutes(route.children, branches, routesMeta, path);\n    } // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n\n\n    if (route.path == null && !route.index) {\n      return;\n    }\n\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  });\n  return branches;\n}\n\nfunction rankRouteBranches(branches) {\n  branches.sort((a, b) => a.score !== b.score ? b.score - a.score // Higher score first\n  : compareIndexes(a.routesMeta.map(meta => meta.childrenIndex), b.routesMeta.map(meta => meta.childrenIndex)));\n}\n\nconst paramRe = /^:\\w+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\n\nconst isSplat = s => s === \"*\";\n\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n\n  return segments.filter(s => !isSplat(s)).reduce((score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue), initialScore);\n}\n\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ? // If two routes are siblings, we should try to match the earlier sibling\n  // first. This allows people to have fine-grained control over the matching\n  // behavior by simply putting routes with identical paths in the order they\n  // want them tried.\n  a[a.length - 1] - b[b.length - 1] : // Otherwise, it doesn't really make sense to rank non-siblings by index,\n  // so they sort equally.\n  0;\n}\n\nfunction matchRouteBranch(branch, pathname) {\n  let {\n    routesMeta\n  } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath({\n      path: meta.relativePath,\n      caseSensitive: meta.caseSensitive,\n      end\n    }, remainingPathname);\n    if (!match) return null;\n    Object.assign(matchedParams, match.params);\n    let route = meta.route;\n    matches.push({\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(joinPaths([matchedPathname, match.pathnameBase])),\n      route\n    });\n\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n\n  return matches;\n}\n/**\n * A PathPattern is used to match on some portion of a URL pathname.\n */\n\n\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/docs/en/v6/api#matchpath\n */\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = {\n      path: pattern,\n      caseSensitive: false,\n      end: true\n    };\n  }\n\n  let [matcher, paramNames] = compilePath(pattern.path, pattern.caseSensitive, pattern.end);\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = paramNames.reduce((memo, paramName, index) => {\n    // We need to compute the pathnameBase here using the raw splat value\n    // instead of using params[\"*\"] later because it will be decoded then\n    if (paramName === \"*\") {\n      let splatValue = captureGroups[index] || \"\";\n      pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n    }\n\n    memo[paramName] = safelyDecodeURIComponent(captureGroups[index] || \"\", paramName);\n    return memo;\n  }, {});\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\n\nfunction compilePath(path, caseSensitive, end) {\n  if (caseSensitive === void 0) {\n    caseSensitive = false;\n  }\n\n  if (end === void 0) {\n    end = true;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"), \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\")) : void 0;\n  let paramNames = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n  .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n  .replace(/[\\\\.*+^$?{}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n  .replace(/:(\\w+)/g, (_, paramName) => {\n    paramNames.push(paramName);\n    return \"([^\\\\/]+)\";\n  });\n\n  if (path.endsWith(\"*\")) {\n    paramNames.push(\"*\");\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" // Already matched the initial /, just match the rest\n    : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else {\n    regexpSource += end ? \"\\\\/*$\" // When matching to the end, ignore trailing slashes\n    : // Otherwise, match a word boundary or a proceeding /. The word boundary restricts\n    // parent routes to matching only their own words and nothing more, e.g. parent\n    // route \"/home\" should not match \"/home2\".\n    // Additionally, allow paths starting with `.`, `-`, `~`, and url-encoded entities,\n    // but do not consume the character in the matched path so they can match against\n    // nested paths.\n    \"(?:(?=[.~-]|%[0-9A-F]{2})|\\\\b|\\\\/|$)\";\n  }\n\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n  return [matcher, paramNames];\n}\n\nfunction safelyDecodeURIComponent(value, paramName) {\n  try {\n    return decodeURIComponent(value);\n  } catch (error) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"The value for the URL param \\\"\" + paramName + \"\\\" will not be decoded because\" + (\" the string \\\"\" + value + \"\\\" is a malformed URL segment. This is probably\") + (\" due to a bad percent encoding (\" + error + \").\")) : void 0;\n    return value;\n  }\n}\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/docs/en/v6/api#resolvepath\n */\n\n\nfunction resolvePath(to, fromPathname) {\n  if (fromPathname === void 0) {\n    fromPathname = \"/\";\n  }\n\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname = toPathname ? toPathname.startsWith(\"/\") ? toPathname : resolvePathname(toPathname, fromPathname) : fromPathname;\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\n\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach(segment => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\n\nfunction resolveTo(toArg, routePathnames, locationPathname) {\n  let to = typeof toArg === \"string\" ? parsePath(toArg) : toArg;\n  let toPathname = toArg === \"\" || to.pathname === \"\" ? \"/\" : to.pathname; // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n\n  let from;\n\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n\n    if (toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\"); // Each leading .. segment means \"go up one route\" instead of \"go up one\n      // URL segment\".  This is a key difference from how <a href> works and a\n      // major reason we call this a \"to\" value instead of a \"href\".\n\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n\n      to.pathname = toSegments.join(\"/\");\n    } // If there are more \"..\" segments than parent routes, resolve relative to\n    // the root / URL.\n\n\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n\n  let path = resolvePath(to, from); // Ensure the pathname has a trailing slash if the original to value had one.\n\n  if (toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\") && !path.pathname.endsWith(\"/\")) {\n    path.pathname += \"/\";\n  }\n\n  return path;\n}\nfunction getToPathname(to) {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || to.pathname === \"\" ? \"/\" : typeof to === \"string\" ? parsePath(to).pathname : to.pathname;\n}\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n\n  let nextChar = pathname.charAt(basename.length);\n\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n\n  return pathname.slice(basename.length) || \"/\";\n}\nconst joinPaths = paths => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\nconst normalizePathname = pathname => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n\nconst normalizeSearch = search => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\n\nconst normalizeHash = hash => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usehref\n */\n\nfunction useHref(to) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useHref() may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  let {\n    basename,\n    navigator\n  } = useContext(NavigationContext);\n  let {\n    hash,\n    pathname,\n    search\n  } = useResolvedPath(to);\n  let joinedPathname = pathname;\n\n  if (basename !== \"/\") {\n    let toPathname = getToPathname(to);\n    let endsWithSlash = toPathname != null && toPathname.endsWith(\"/\");\n    joinedPathname = pathname === \"/\" ? basename + (endsWithSlash ? \"/\" : \"\") : joinPaths([basename, pathname]);\n  }\n\n  return navigator.createHref({\n    pathname: joinedPathname,\n    search,\n    hash\n  });\n}\n/**\n * Returns true if this component is a descendant of a <Router>.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useinroutercontext\n */\n\nfunction useInRouterContext() {\n  return useContext(LocationContext) != null;\n}\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/docs/en/v6/api#uselocation\n */\n\nfunction useLocation() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useLocation() may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  return useContext(LocationContext).location;\n}\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usenavigationtype\n */\n\nfunction useNavigationType() {\n  return useContext(LocationContext).navigationType;\n}\n/**\n * Returns true if the URL for the given \"to\" value matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * <NavLink>.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usematch\n */\n\nfunction useMatch(pattern) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useMatch() may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  let {\n    pathname\n  } = useLocation();\n  return useMemo(() => matchPath(pattern, pathname), [pathname, pattern]);\n}\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\n\n/**\n * Returns an imperative method for changing the location. Used by <Link>s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#usenavigate\n */\nfunction useNavigate() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useNavigate() may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  let {\n    basename,\n    navigator\n  } = useContext(NavigationContext);\n  let {\n    matches\n  } = useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(matches.map(match => match.pathnameBase));\n  let activeRef = useRef(false);\n  useEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(activeRef.current, \"You should call navigate() in a React.useEffect(), not when \" + \"your component is first rendered.\") : void 0;\n    if (!activeRef.current) return;\n\n    if (typeof to === \"number\") {\n      navigator.go(to);\n      return;\n    }\n\n    let path = resolveTo(to, JSON.parse(routePathnamesJson), locationPathname);\n\n    if (basename !== \"/\") {\n      path.pathname = joinPaths([basename, path.pathname]);\n    }\n\n    (!!options.replace ? navigator.replace : navigator.push)(path, options.state);\n  }, [basename, navigator, routePathnamesJson, locationPathname]);\n  return navigate;\n}\nconst OutletContext = /*#__PURE__*/createContext(null);\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/docs/en/v6/api#useoutletcontext\n */\n\nfunction useOutletContext() {\n  return useContext(OutletContext);\n}\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by <Outlet> to render child routes.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useoutlet\n */\n\nfunction useOutlet(context) {\n  let outlet = useContext(RouteContext).outlet;\n\n  if (outlet) {\n    return /*#__PURE__*/createElement(OutletContext.Provider, {\n      value: context\n    }, outlet);\n  }\n\n  return outlet;\n}\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useparams\n */\n\nfunction useParams() {\n  let {\n    matches\n  } = useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useresolvedpath\n */\n\nfunction useResolvedPath(to) {\n  let {\n    matches\n  } = useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(matches.map(match => match.pathnameBase));\n  return useMemo(() => resolveTo(to, JSON.parse(routePathnamesJson), locationPathname), [to, routePathnamesJson, locationPathname]);\n}\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an <Outlet> to render their child route's\n * element.\n *\n * @see https://reactrouter.com/docs/en/v6/api#useroutes\n */\n\nfunction useRoutes(routes, locationArg) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useRoutes() may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  let {\n    matches: parentMatches\n  } = useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(parentPathname, !parentRoute || parentPath.endsWith(\"*\"), \"You rendered descendant <Routes> (or called `useRoutes()`) at \" + (\"\\\"\" + parentPathname + \"\\\" (under <Route path=\\\"\" + parentPath + \"\\\">) but the \") + \"parent route path has no trailing \\\"*\\\". This means if you navigate \" + \"deeper, the parent won't match anymore and therefore the child \" + \"routes will never render.\\n\\n\" + (\"Please change the parent <Route path=\\\"\" + parentPath + \"\\\"> to <Route \") + (\"path=\\\"\" + (parentPath === \"/\" ? \"*\" : parentPath + \"/*\") + \"\\\">.\"));\n  }\n\n  let locationFromContext = useLocation();\n  let location;\n\n  if (locationArg) {\n    var _parsedLocationArg$pa;\n\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    !(parentPathnameBase === \"/\" || ((_parsedLocationArg$pa = parsedLocationArg.pathname) == null ? void 0 : _parsedLocationArg$pa.startsWith(parentPathnameBase))) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, \" + \"the location pathname must begin with the portion of the URL pathname that was \" + (\"matched by all parent routes. The current pathname base is \\\"\" + parentPathnameBase + \"\\\" \") + (\"but pathname \\\"\" + parsedLocationArg.pathname + \"\\\" was given in the `location` prop.\")) : invariant(false) : void 0;\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = parentPathnameBase === \"/\" ? pathname : pathname.slice(parentPathnameBase.length) || \"/\";\n  let matches = matchRoutes(routes, {\n    pathname: remainingPathname\n  });\n\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? warning(parentRoute || matches != null, \"No routes matched location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \") : void 0;\n    process.env.NODE_ENV !== \"production\" ? warning(matches == null || matches[matches.length - 1].route.element !== undefined, \"Matched leaf route at location \\\"\" + location.pathname + location.search + location.hash + \"\\\" does not have an element. \" + \"This means it will render an <Outlet /> with a null value by default resulting in an \\\"empty\\\" page.\") : void 0;\n  }\n\n  return _renderMatches(matches && matches.map(match => Object.assign({}, match, {\n    params: Object.assign({}, parentParams, match.params),\n    pathname: joinPaths([parentPathnameBase, match.pathname]),\n    pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([parentPathnameBase, match.pathnameBase])\n  })), parentMatches);\n}\nfunction _renderMatches(matches, parentMatches) {\n  if (parentMatches === void 0) {\n    parentMatches = [];\n  }\n\n  if (matches == null) return null;\n  return matches.reduceRight((outlet, match, index) => {\n    return /*#__PURE__*/createElement(RouteContext.Provider, {\n      children: match.route.element !== undefined ? match.route.element : outlet,\n      value: {\n        outlet,\n        matches: parentMatches.concat(matches.slice(0, index + 1))\n      }\n    });\n  }, null);\n}\n\n/**\n * A <Router> that stores all entries in memory.\n *\n * @see https://reactrouter.com/docs/en/v6/api#memoryrouter\n */\nfunction MemoryRouter(_ref) {\n  let {\n    basename,\n    children,\n    initialEntries,\n    initialIndex\n  } = _ref;\n  let historyRef = useRef();\n\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex\n    });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = useState({\n    action: history.action,\n    location: history.location\n  });\n  useLayoutEffect(() => history.listen(setState), [history]);\n  return /*#__PURE__*/createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history\n  });\n}\n\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/docs/en/v6/api#navigate\n */\nfunction Navigate(_ref2) {\n  let {\n    to,\n    replace,\n    state\n  } = _ref2;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, // TODO: This error is probably because they somehow have 2 versions of\n  // the router loaded. We can help them understand how to avoid that.\n  \"<Navigate> may be used only in the context of a <Router> component.\") : invariant(false) : void 0;\n  process.env.NODE_ENV !== \"production\" ? warning(!useContext(NavigationContext).static, \"<Navigate> must not be used on the initial render in a <StaticRouter>. \" + \"This is a no-op, but you should modify your code so the <Navigate> is \" + \"only ever rendered in response to some user interaction or state change.\") : void 0;\n  let navigate = useNavigate();\n  useEffect(() => {\n    navigate(to, {\n      replace,\n      state\n    });\n  });\n  return null;\n}\n\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/docs/en/v6/api#outlet\n */\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\n\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/docs/en/v6/api#route\n */\nfunction Route(_props) {\n   process.env.NODE_ENV !== \"production\" ? invariant(false, \"A <Route> is only ever to be used as the child of <Routes> element, \" + \"never rendered directly. Please wrap your <Route> in a <Routes>.\") : invariant(false) ;\n}\n\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a <Router> directly. Instead, you'll render a\n * router that is more specific to your environment such as a <BrowserRouter>\n * in web browsers or a <StaticRouter> for server rendering.\n *\n * @see https://reactrouter.com/docs/en/v6/api#router\n */\nfunction Router(_ref3) {\n  let {\n    basename: basenameProp = \"/\",\n    children = null,\n    location: locationProp,\n    navigationType = Action.Pop,\n    navigator,\n    static: staticProp = false\n  } = _ref3;\n  !!useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"You cannot render a <Router> inside another <Router>.\" + \" You should never have more than one in your app.\") : invariant(false) : void 0;\n  let basename = normalizePathname(basenameProp);\n  let navigationContext = useMemo(() => ({\n    basename,\n    navigator,\n    static: staticProp\n  }), [basename, navigator, staticProp]);\n\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let location = useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n\n    if (trailingPathname == null) {\n      return null;\n    }\n\n    return {\n      pathname: trailingPathname,\n      search,\n      hash,\n      state,\n      key\n    };\n  }, [basename, pathname, search, hash, state, key]);\n  process.env.NODE_ENV !== \"production\" ? warning(location != null, \"<Router basename=\\\"\" + basename + \"\\\"> is not able to match the URL \" + (\"\\\"\" + pathname + search + hash + \"\\\" because it does not start with the \") + \"basename, so the <Router> won't render anything.\") : void 0;\n\n  if (location == null) {\n    return null;\n  }\n\n  return /*#__PURE__*/createElement(NavigationContext.Provider, {\n    value: navigationContext\n  }, /*#__PURE__*/createElement(LocationContext.Provider, {\n    children: children,\n    value: {\n      location,\n      navigationType\n    }\n  }));\n}\n\n/**\n * A container for a nested tree of <Route> elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/docs/en/v6/api#routes\n */\nfunction Routes(_ref4) {\n  let {\n    children,\n    location\n  } = _ref4;\n  return useRoutes(createRoutesFromChildren(children), location);\n} ///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/docs/en/v6/api#createroutesfromchildren\n */\n\nfunction createRoutesFromChildren(children) {\n  let routes = [];\n  Children.forEach(children, element => {\n    if (! /*#__PURE__*/isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n\n    if (element.type === Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(routes, createRoutesFromChildren(element.props.children));\n      return;\n    }\n\n    !(element.type === Route) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"[\" + (typeof element.type === \"string\" ? element.type : element.type.name) + \"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>\") : invariant(false) : void 0;\n    let route = {\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      index: element.props.index,\n      path: element.props.path\n    };\n\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(element.props.children);\n    }\n\n    routes.push(route);\n  });\n  return routes;\n}\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\n\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\n\nexport { MemoryRouter, Navigate, Outlet, Route, Router, Routes, LocationContext as UNSAFE_LocationContext, NavigationContext as UNSAFE_NavigationContext, RouteContext as UNSAFE_RouteContext, createRoutesFromChildren, generatePath, matchPath, matchRoutes, renderMatches, resolvePath, useHref, useInRouterContext, useLocation, useMatch, useNavigate, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRoutes };\n//# sourceMappingURL=index.js.map\n","/**\n * React Router DOM v6.3.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { useRef, useState, useLayoutEffect, createElement, forwardRef, useCallback, useMemo } from 'react';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { Router, useHref, createPath, useLocation, useResolvedPath, useNavigate } from 'react-router';\nexport { MemoryRouter, Navigate, NavigationType, Outlet, Route, Router, Routes, UNSAFE_LocationContext, UNSAFE_NavigationContext, UNSAFE_RouteContext, createPath, createRoutesFromChildren, generatePath, matchPath, matchRoutes, parsePath, renderMatches, resolvePath, useHref, useInRouterContext, useLocation, useMatch, useNavigate, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRoutes } from 'react-router';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded = [\"onClick\", \"reloadDocument\", \"replace\", \"state\", \"target\", \"to\"],\n      _excluded2 = [\"aria-current\", \"caseSensitive\", \"className\", \"end\", \"style\", \"to\", \"children\"];\n\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n\n    try {\n      // Welcome to debugging React Router!\n      //\n      // This error is thrown as a convenience so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message); // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n} ////////////////////////////////////////////////////////////////////////////////\n// COMPONENTS\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nfunction BrowserRouter(_ref) {\n  let {\n    basename,\n    children,\n    window\n  } = _ref;\n  let historyRef = useRef();\n\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({\n      window\n    });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = useState({\n    action: history.action,\n    location: history.location\n  });\n  useLayoutEffect(() => history.listen(setState), [history]);\n  return /*#__PURE__*/createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history\n  });\n}\n\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nfunction HashRouter(_ref2) {\n  let {\n    basename,\n    children,\n    window\n  } = _ref2;\n  let historyRef = useRef();\n\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({\n      window\n    });\n  }\n\n  let history = historyRef.current;\n  let [state, setState] = useState({\n    action: history.action,\n    location: history.location\n  });\n  useLayoutEffect(() => history.listen(setState), [history]);\n  return /*#__PURE__*/createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history\n  });\n}\n\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter(_ref3) {\n  let {\n    basename,\n    children,\n    history\n  } = _ref3;\n  const [state, setState] = useState({\n    action: history.action,\n    location: history.location\n  });\n  useLayoutEffect(() => history.listen(setState), [history]);\n  return /*#__PURE__*/createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history\n  });\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * The public API for rendering a history-aware <a>.\n */\nconst Link = /*#__PURE__*/forwardRef(function LinkWithRef(_ref4, ref) {\n  let {\n    onClick,\n    reloadDocument,\n    replace = false,\n    state,\n    target,\n    to\n  } = _ref4,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded);\n\n  let href = useHref(to);\n  let internalOnClick = useLinkClickHandler(to, {\n    replace,\n    state,\n    target\n  });\n\n  function handleClick(event) {\n    if (onClick) onClick(event);\n\n    if (!event.defaultPrevented && !reloadDocument) {\n      internalOnClick(event);\n    }\n  }\n\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\n    createElement(\"a\", _extends({}, rest, {\n      href: href,\n      onClick: handleClick,\n      ref: ref,\n      target: target\n    }))\n  );\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  Link.displayName = \"Link\";\n}\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = /*#__PURE__*/forwardRef(function NavLinkWithRef(_ref5, ref) {\n  let {\n    \"aria-current\": ariaCurrentProp = \"page\",\n    caseSensitive = false,\n    className: classNameProp = \"\",\n    end = false,\n    style: styleProp,\n    to,\n    children\n  } = _ref5,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded2);\n\n  let location = useLocation();\n  let path = useResolvedPath(to);\n  let locationPathname = location.pathname;\n  let toPathname = path.pathname;\n\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLowerCase();\n    toPathname = toPathname.toLowerCase();\n  }\n\n  let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(toPathname.length) === \"/\";\n  let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n  let className;\n\n  if (typeof classNameProp === \"function\") {\n    className = classNameProp({\n      isActive\n    });\n  } else {\n    // If the className prop is not a function, we use a default `active`\n    // class for <NavLink />s that are active. In v5 `active` was the default\n    // value for `activeClassName`, but we are removing that API and can still\n    // use the old default behavior for a cleaner upgrade path and keep the\n    // simple styling rules working as they currently do.\n    className = [classNameProp, isActive ? \"active\" : null].filter(Boolean).join(\" \");\n  }\n\n  let style = typeof styleProp === \"function\" ? styleProp({\n    isActive\n  }) : styleProp;\n  return /*#__PURE__*/createElement(Link, _extends({}, rest, {\n    \"aria-current\": ariaCurrent,\n    className: className,\n    ref: ref,\n    style: style,\n    to: to\n  }), typeof children === \"function\" ? children({\n    isActive\n  }) : children);\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  NavLink.displayName = \"NavLink\";\n} ////////////////////////////////////////////////////////////////////////////////\n// HOOKS\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\n\n\nfunction useLinkClickHandler(to, _temp) {\n  let {\n    target,\n    replace: replaceProp,\n    state\n  } = _temp === void 0 ? {} : _temp;\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to);\n  return useCallback(event => {\n    if (event.button === 0 && ( // Ignore everything but left clicks\n    !target || target === \"_self\") && // Let browser handle \"target=_blank\" etc.\n    !isModifiedEvent(event) // Ignore clicks with modifier keys\n    ) {\n      event.preventDefault(); // If the URL hasn't changed, a regular <a> will do a replace instead of\n      // a push, so do the same here.\n\n      let replace = !!replaceProp || createPath(location) === createPath(path);\n      navigate(to, {\n        replace,\n        state\n      });\n    }\n  }, [location, navigate, path, replaceProp, state, target, to]);\n}\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\n\nfunction useSearchParams(defaultInit) {\n  process.env.NODE_ENV !== \"production\" ? warning(typeof URLSearchParams !== \"undefined\", \"You cannot use the `useSearchParams` hook in a browser that does not \" + \"support the URLSearchParams API. If you need to support Internet \" + \"Explorer 11, we recommend you load a polyfill such as \" + \"https://github.com/ungap/url-search-params\\n\\n\" + \"If you're unsure how to load polyfills, we recommend you check out \" + \"https://polyfill.io/v3/ which provides some recommendations about how \" + \"to load polyfills only for users that need them, instead of for every \" + \"user.\") : void 0;\n  let defaultSearchParamsRef = useRef(createSearchParams(defaultInit));\n  let location = useLocation();\n  let searchParams = useMemo(() => {\n    let searchParams = createSearchParams(location.search);\n\n    for (let key of defaultSearchParamsRef.current.keys()) {\n      if (!searchParams.has(key)) {\n        defaultSearchParamsRef.current.getAll(key).forEach(value => {\n          searchParams.append(key, value);\n        });\n      }\n    }\n\n    return searchParams;\n  }, [location.search]);\n  let navigate = useNavigate();\n  let setSearchParams = useCallback((nextInit, navigateOptions) => {\n    navigate(\"?\" + createSearchParams(nextInit), navigateOptions);\n  }, [navigate]);\n  return [searchParams, setSearchParams];\n}\n\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nfunction createSearchParams(init) {\n  if (init === void 0) {\n    init = \"\";\n  }\n\n  return new URLSearchParams(typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo, key) => {\n    let value = init[key];\n    return memo.concat(Array.isArray(value) ? value.map(v => [key, v]) : [[key, value]]);\n  }, []));\n}\n\nexport { BrowserRouter, HashRouter, Link, NavLink, createSearchParams, HistoryRouter as unstable_HistoryRouter, useLinkClickHandler, useSearchParams };\n//# sourceMappingURL=index.js.map\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","/*\n * This module exists for optimizations in the build process through rollup and terser.  We define some global\n * constants, which can be overridden during build. By guarding certain pieces of code with functions that return these\n * constants, we can control whether or not they appear in the final bundle. (Any code guarded by a false condition will\n * never run, and will hence be dropped during treeshaking.) The two primary uses for this are stripping out calls to\n * `logger` and preventing node-related code from appearing in browser bundles.\n *\n * Attention:\n * This file should not be used to define constants/flags that are intended to be used for tree-shaking conducted by\n * users. These fags should live in their respective packages, as we identified user tooling (specifically webpack)\n * having issues tree-shaking these constants across package boundaries.\n * An example for this is the __SENTRY_DEBUG__ constant. It is declared in each package individually because we want\n * users to be able to shake away expressions that it guards.\n */\n\n/**\n * Figures out if we're building a browser bundle.\n *\n * @returns true if this is a browser bundle build.\n */\nfunction isBrowserBundle() {\n  return typeof __SENTRY_BROWSER_BUNDLE__ !== 'undefined' && !!__SENTRY_BROWSER_BUNDLE__;\n}\n\nexport { isBrowserBundle };\n//# sourceMappingURL=env.js.map\n","import { isBrowserBundle } from './env.js';\n\n/**\n * NOTE: In order to avoid circular dependencies, if you add a function to this module and it needs to print something,\n * you must either a) use `console.log` rather than the logger, or b) put your function elsewhere.\n */\n\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nfunction isNodeEnv() {\n  // explicitly check for browser bundles as those can be optimized statically\n  // by terser/rollup.\n  return (\n    !isBrowserBundle() &&\n    Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]'\n  );\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\nfunction dynamicRequire(mod, request) {\n    return mod.require(request);\n}\n\n/**\n * Helper for dynamically loading module that should work with linked dependencies.\n * The problem is that we _should_ be using `require(require.resolve(moduleName, { paths: [cwd()] }))`\n * However it's _not possible_ to do that with Webpack, as it has to know all the dependencies during\n * build time. `require.resolve` is also not available in any other way, so we cannot create,\n * a fake helper like we do with `dynamicRequire`.\n *\n * We always prefer to use local package, thus the value is not returned early from each `try/catch` block.\n * That is to mimic the behavior of `require.resolve` exactly.\n *\n * @param moduleName module name to require\n * @returns possibly required module\n */\nfunction loadModule(moduleName) {\n  let mod;\n\n  try {\n    mod = dynamicRequire(module, moduleName);\n  } catch (e) {\n    // no-empty\n  }\n\n  try {\n    const { cwd } = dynamicRequire(module, 'process');\n    mod = dynamicRequire(module, `${cwd()}/node_modules/${moduleName}`) ;\n  } catch (e) {\n    // no-empty\n  }\n\n  return mod;\n}\n\nexport { dynamicRequire, isNodeEnv, loadModule };\n//# sourceMappingURL=node.js.map\n","import { isNodeEnv } from './node.js';\n\n/** Internal */\n\nvar fallbackGlobalObject = {};\n\n/**\n * Safely get global scope object\n *\n * @returns Global scope object\n */\nfunction getGlobalObject() {\n  return (\n    isNodeEnv()\n      ? global\n      : typeof window !== 'undefined'       ? window       : typeof self !== 'undefined'\n      ? self\n      : fallbackGlobalObject\n  ) ;\n}\n\n/**\n * Returns a global singleton contained in the global `__SENTRY__` object.\n *\n * If the singleton doesn't already exist in `__SENTRY__`, it will be created using the given factory\n * function and added to the `__SENTRY__` object.\n *\n * @param name name of the global singleton on __SENTRY__\n * @param creator creator Factory function to create the singleton if it doesn't already exist on `__SENTRY__`\n * @param obj (Optional) The global object on which to look for `__SENTRY__`, if not `getGlobalObject`'s return value\n * @returns the singleton\n */\nfunction getGlobalSingleton(name, creator, obj) {\n  var global = (obj || getGlobalObject()) ;\n  var __SENTRY__ = (global.__SENTRY__ = global.__SENTRY__ || {});\n  var singleton = __SENTRY__[name] || (__SENTRY__[name] = creator());\n  return singleton;\n}\n\nexport { getGlobalObject, getGlobalSingleton };\n//# sourceMappingURL=global.js.map\n","var objectToString = Object.prototype.toString;\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isError(wat) {\n  switch (objectToString.call(wat)) {\n    case '[object Error]':\n    case '[object Exception]':\n    case '[object DOMException]':\n      return true;\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n/**\n * Checks whether given value is an instance of the given built-in class.\n *\n * @param wat The value to be checked\n * @param className\n * @returns A boolean representing the result.\n */\nfunction isBuiltin(wat, className) {\n  return objectToString.call(wat) === `[object ${className}]`;\n}\n\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isErrorEvent(wat) {\n  return isBuiltin(wat, 'ErrorEvent');\n}\n\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMError(wat) {\n  return isBuiltin(wat, 'DOMError');\n}\n\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMException(wat) {\n  return isBuiltin(wat, 'DOMException');\n}\n\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isString(wat) {\n  return isBuiltin(wat, 'String');\n}\n\n/**\n * Checks whether given value is a primitive (undefined, null, number, boolean, string, bigint, symbol)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPrimitive(wat) {\n  return wat === null || (typeof wat !== 'object' && typeof wat !== 'function');\n}\n\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPlainObject(wat) {\n  return isBuiltin(wat, 'Object');\n}\n\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isEvent(wat) {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isElement(wat) {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isRegExp(wat) {\n  return isBuiltin(wat, 'RegExp');\n}\n\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\nfunction isThenable(wat) {\n    return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isSyntheticEvent(wat) {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n\n/**\n * Checks whether given value is NaN\n * {@link isNaN}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isNaN(wat) {\n  return typeof wat === 'number' && wat !== wat;\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\nfunction isInstanceOf(wat, base) {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}\n\nexport { isDOMError, isDOMException, isElement, isError, isErrorEvent, isEvent, isInstanceOf, isNaN, isPlainObject, isPrimitive, isRegExp, isString, isSyntheticEvent, isThenable };\n//# sourceMappingURL=is.js.map\n","import { getGlobalObject } from './global.js';\nimport { isString } from './is.js';\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction htmlTreeAsString(elem, keyAttrs) {\n  \n\n  // try/catch both:\n  // - accessing event.target (see getsentry/raven-js#838, #768)\n  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n  // - can throw an exception in some circumstances.\n  try {\n    let currentElem = elem ;\n    var MAX_TRAVERSE_HEIGHT = 5;\n    var MAX_OUTPUT_LEN = 80;\n    var out = [];\n    let height = 0;\n    let len = 0;\n    var separator = ' > ';\n    var sepLength = separator.length;\n    let nextStr;\n\n        while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {\n      nextStr = _htmlElementAsString(currentElem, keyAttrs);\n      // bail out if\n      // - nextStr is the 'html' element\n      // - the length of the string that would be created exceeds MAX_OUTPUT_LEN\n      //   (ignore this limit if we are on the first iteration)\n      if (nextStr === 'html' || (height > 1 && len + out.length * sepLength + nextStr.length >= MAX_OUTPUT_LEN)) {\n        break;\n      }\n\n      out.push(nextStr);\n\n      len += nextStr.length;\n      currentElem = currentElem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction _htmlElementAsString(el, keyAttrs) {\n  var elem = el \n\n;\n\n  var out = [];\n  let className;\n  let classes;\n  let key;\n  let attr;\n  let i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n\n  // Pairs of attribute keys defined in `serializeAttribute` and their values on element.\n  var keyAttrPairs =\n    keyAttrs && keyAttrs.length\n      ? keyAttrs.filter(keyAttr => elem.getAttribute(keyAttr)).map(keyAttr => [keyAttr, elem.getAttribute(keyAttr)])\n      : null;\n\n  if (keyAttrPairs && keyAttrPairs.length) {\n    keyAttrPairs.forEach(keyAttrPair => {\n      out.push(`[${keyAttrPair[0]}=\"${keyAttrPair[1]}\"]`);\n    });\n  } else {\n    if (elem.id) {\n      out.push(`#${elem.id}`);\n    }\n\n        className = elem.className;\n    if (className && isString(className)) {\n      classes = className.split(/\\s+/);\n      for (i = 0; i < classes.length; i++) {\n        out.push(`.${classes[i]}`);\n      }\n    }\n  }\n  var allowedAttrs = ['type', 'name', 'title', 'alt'];\n  for (i = 0; i < allowedAttrs.length; i++) {\n    key = allowedAttrs[i];\n    attr = elem.getAttribute(key);\n    if (attr) {\n      out.push(`[${key}=\"${attr}\"]`);\n    }\n  }\n  return out.join('');\n}\n\n/**\n * A safe form of location.href\n */\nfunction getLocationHref() {\n  var global = getGlobalObject();\n  try {\n    return global.document.location.href;\n  } catch (oO) {\n    return '';\n  }\n}\n\n/**\n * Gets a DOM element by using document.querySelector.\n *\n * This wrapper will first check for the existance of the function before\n * actually calling it so that we don't have to take care of this check,\n * every time we want to access the DOM.\n *\n * Reason: DOM/querySelector is not available in all environments.\n *\n * We have to cast to any because utils can be consumed by a variety of environments,\n * and we don't want to break TS users. If you know what element will be selected by\n * `document.querySelector`, specify it as part of the generic call. For example,\n * `var element = getDomElement<Element>('selector');`\n *\n * @param selector the selector string passed on to document.querySelector\n */\nfunction getDomElement(selector) {\n  var global = getGlobalObject();\n  if (global.document && global.document.querySelector) {\n    return global.document.querySelector(selector) ;\n  }\n  return null;\n}\n\nexport { getDomElement, getLocationHref, htmlTreeAsString };\n//# sourceMappingURL=browser.js.map\n","/** An error emitted by Sentry SDKs and related utilities. */\nclass SentryError extends Error {\n  /** Display name of this error instance. */\n  \n\n   constructor( message, logLevel = 'warn') {\n    super(message);this.message = message;;\n\n    this.name = new.target.prototype.constructor.name;\n    // This sets the prototype to be `Error`, not `SentryError`. It's unclear why we do this, but commenting this line\n    // out causes various (seemingly totally unrelated) playwright tests consistently time out. FYI, this makes\n    // instances of `SentryError` fail `obj instanceof SentryError` checks.\n    Object.setPrototypeOf(this, new.target.prototype);\n    this.logLevel = logLevel;\n  }\n}\n\nexport { SentryError };\n//# sourceMappingURL=error.js.map\n","import { SentryError } from './error.js';\n\n/** Regular expression used to parse a Dsn. */\nvar DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+))?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n\nfunction isValidProtocol(protocol) {\n  return protocol === 'http' || protocol === 'https';\n}\n\n/**\n * Renders the string representation of this Dsn.\n *\n * By default, this will render the public representation without the password\n * component. To get the deprecated private representation, set `withPassword`\n * to true.\n *\n * @param withPassword When set to true, the password will be included.\n */\nfunction dsnToString(dsn, withPassword = false) {\n  const { host, path, pass, port, projectId, protocol, publicKey } = dsn;\n  return (\n    `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` +\n    `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`\n  );\n}\n\n/**\n * Parses a Dsn from a given string.\n *\n * @param str A Dsn as string\n * @returns Dsn as DsnComponents\n */\nfunction dsnFromString(str) {\n  var match = DSN_REGEX.exec(str);\n\n  if (!match) {\n    throw new SentryError(`Invalid Sentry Dsn: ${str}`);\n  }\n\n  const [protocol, publicKey, pass = '', host, port = '', lastPath] = match.slice(1);\n  let path = '';\n  let projectId = lastPath;\n\n  var split = projectId.split('/');\n  if (split.length > 1) {\n    path = split.slice(0, -1).join('/');\n    projectId = split.pop() ;\n  }\n\n  if (projectId) {\n    var projectMatch = projectId.match(/^\\d+/);\n    if (projectMatch) {\n      projectId = projectMatch[0];\n    }\n  }\n\n  return dsnFromComponents({ host, pass, path, projectId, port, protocol: protocol , publicKey });\n}\n\nfunction dsnFromComponents(components) {\n  return {\n    protocol: components.protocol,\n    publicKey: components.publicKey || '',\n    pass: components.pass || '',\n    host: components.host,\n    port: components.port || '',\n    path: components.path || '',\n    projectId: components.projectId,\n  };\n}\n\nfunction validateDsn(dsn) {\n  if (!(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    return;\n  }\n\n  const { port, projectId, protocol } = dsn;\n\n  var requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];\n  requiredComponents.forEach(component => {\n    if (!dsn[component]) {\n      throw new SentryError(`Invalid Sentry Dsn: ${component} missing`);\n    }\n  });\n\n  if (!projectId.match(/^\\d+$/)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);\n  }\n\n  if (!isValidProtocol(protocol)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);\n  }\n\n  if (port && isNaN(parseInt(port, 10))) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid port ${port}`);\n  }\n\n  return true;\n}\n\n/** The Sentry Dsn, identifying a Sentry instance and project. */\nfunction makeDsn(from) {\n  var components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);\n  validateDsn(components);\n  return components;\n}\n\nexport { dsnFromString, dsnToString, makeDsn };\n//# sourceMappingURL=dsn.js.map\n","import { getGlobalObject, getGlobalSingleton } from './global.js';\n\n// TODO: Implement different loggers for different environments\nvar global = getGlobalObject();\n\n/** Prefix for logging strings */\nvar PREFIX = 'Sentry Logger ';\n\nvar CONSOLE_LEVELS = ['debug', 'info', 'warn', 'error', 'log', 'assert', 'trace'] ;\n\n/**\n * Temporarily disable sentry console instrumentations.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\nfunction consoleSandbox(callback) {\n  var global = getGlobalObject();\n\n  if (!('console' in global)) {\n    return callback();\n  }\n\n  var originalConsole = global.console ;\n  var wrappedLevels = {};\n\n  // Restore all wrapped console methods\n  CONSOLE_LEVELS.forEach(level => {\n    // TODO(v7): Remove this check as it's only needed for Node 6\n    var originalWrappedFunc =\n      originalConsole[level] && (originalConsole[level] ).__sentry_original__;\n    if (level in global.console && originalWrappedFunc) {\n      wrappedLevels[level] = originalConsole[level] ;\n      originalConsole[level] = originalWrappedFunc ;\n    }\n  });\n\n  try {\n    return callback();\n  } finally {\n    // Revert restoration to wrapped state\n    Object.keys(wrappedLevels).forEach(level => {\n      originalConsole[level] = wrappedLevels[level ];\n    });\n  }\n}\n\nfunction makeLogger() {\n  let enabled = false;\n  var logger = {\n    enable: () => {\n      enabled = true;\n    },\n    disable: () => {\n      enabled = false;\n    },\n  };\n\n  if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    CONSOLE_LEVELS.forEach(name => {\n            logger[name] = (...args) => {\n        if (enabled) {\n          consoleSandbox(() => {\n            global.console[name](`${PREFIX}[${name}]:`, ...args);\n          });\n        }\n      };\n    });\n  } else {\n    CONSOLE_LEVELS.forEach(name => {\n      logger[name] = () => undefined;\n    });\n  }\n\n  return logger ;\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nlet logger;\nif ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n  logger = getGlobalSingleton('logger', makeLogger);\n} else {\n  logger = makeLogger();\n}\n\nexport { CONSOLE_LEVELS, consoleSandbox, logger };\n//# sourceMappingURL=logger.js.map\n","import { isString, isRegExp } from './is.js';\n\n/**\n * Truncates given string to the maximum characters count\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string (0 = unlimited)\n * @returns string Encoded\n */\nfunction truncate(str, max = 0) {\n  if (typeof str !== 'string' || max === 0) {\n    return str;\n  }\n  return str.length <= max ? str : `${str.substr(0, max)}...`;\n}\n\n/**\n * This is basically just `trim_line` from\n * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\nfunction snipLine(line, colno) {\n  let newLine = line;\n  var lineLength = newLine.length;\n  if (lineLength <= 150) {\n    return newLine;\n  }\n  if (colno > lineLength) {\n        colno = lineLength;\n  }\n\n  let start = Math.max(colno - 60, 0);\n  if (start < 5) {\n    start = 0;\n  }\n\n  let end = Math.min(start + 140, lineLength);\n  if (end > lineLength - 5) {\n    end = lineLength;\n  }\n  if (end === lineLength) {\n    start = Math.max(end - 140, 0);\n  }\n\n  newLine = newLine.slice(start, end);\n  if (start > 0) {\n    newLine = `'{snip} ${newLine}`;\n  }\n  if (end < lineLength) {\n    newLine += ' {snip}';\n  }\n\n  return newLine;\n}\n\n/**\n * Join values in array\n * @param input array of values to be joined together\n * @param delimiter string to be placed in-between values\n * @returns Joined values\n */\nfunction safeJoin(input, delimiter) {\n  if (!Array.isArray(input)) {\n    return '';\n  }\n\n  var output = [];\n    for (let i = 0; i < input.length; i++) {\n    var value = input[i];\n    try {\n      output.push(String(value));\n    } catch (e) {\n      output.push('[value cannot be serialized]');\n    }\n  }\n\n  return output.join(delimiter);\n}\n\n/**\n * Checks if the value matches a regex or includes the string\n * @param value The string value to be checked against\n * @param pattern Either a regex or a string that must be contained in value\n */\nfunction isMatchingPattern(value, pattern) {\n  if (!isString(value)) {\n    return false;\n  }\n\n  if (isRegExp(pattern)) {\n    return pattern.test(value);\n  }\n  if (typeof pattern === 'string') {\n    return value.indexOf(pattern) !== -1;\n  }\n  return false;\n}\n\n/**\n * Given a string, escape characters which have meaning in the regex grammar, such that the result is safe to feed to\n * `new RegExp()`.\n *\n * Based on https://github.com/sindresorhus/escape-string-regexp. Vendored to a) reduce the size by skipping the runtime\n * type-checking, and b) ensure it gets down-compiled for old versions of Node (the published package only supports Node\n * 12+).\n *\n * @param regexString The string to escape\n * @returns An version of the string with all special regex characters escaped\n */\nfunction escapeStringForRegex(regexString) {\n  // escape the hyphen separately so we can also replace it with a unicode literal hyphen, to avoid the problems\n  // discussed in https://github.com/sindresorhus/escape-string-regexp/issues/20.\n  return regexString.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d');\n}\n\nexport { escapeStringForRegex, isMatchingPattern, safeJoin, snipLine, truncate };\n//# sourceMappingURL=string.js.map\n","import { htmlTreeAsString } from './browser.js';\nimport { isError, isEvent, isInstanceOf, isElement, isPlainObject, isPrimitive } from './is.js';\nimport { truncate } from './string.js';\n\n/**\n * Replace a method in an object with a wrapped version of itself.\n *\n * @param source An object that contains a method to be wrapped.\n * @param name The name of the method to be wrapped.\n * @param replacementFactory A higher-order function that takes the original version of the given method and returns a\n * wrapped version. Note: The function returned by `replacementFactory` needs to be a non-arrow function, in order to\n * preserve the correct value of `this`, and the original method must be called using `origMethod.call(this, <other\n * args>)` or `origMethod.apply(this, [<other args>])` (rather than being called directly), again to preserve `this`.\n * @returns void\n */\nfunction fill(source, name, replacementFactory) {\n  if (!(name in source)) {\n    return;\n  }\n\n  var original = source[name] ;\n  var wrapped = replacementFactory(original) ;\n\n  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n  if (typeof wrapped === 'function') {\n    try {\n      markFunctionWrapped(wrapped, original);\n    } catch (_Oo) {\n      // This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n\n/**\n * Defines a non-enumerable property on the given object.\n *\n * @param obj The object on which to set the property\n * @param name The name of the property to be set\n * @param value The value to which to set the property\n */\nfunction addNonEnumerableProperty(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it\n    value: value,\n    writable: true,\n    configurable: true,\n  });\n}\n\n/**\n * Remembers the original function on the wrapped function and\n * patches up the prototype.\n *\n * @param wrapped the wrapper function\n * @param original the original function that gets wrapped\n */\nfunction markFunctionWrapped(wrapped, original) {\n  var proto = original.prototype || {};\n  wrapped.prototype = original.prototype = proto;\n  addNonEnumerableProperty(wrapped, '__sentry_original__', original);\n}\n\n/**\n * This extracts the original function if available.  See\n * `markFunctionWrapped` for more information.\n *\n * @param func the function to unwrap\n * @returns the unwrapped version of the function if available.\n */\nfunction getOriginalFunction(func) {\n  return func.__sentry_original__;\n}\n\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\nfunction urlEncode(object) {\n  return Object.keys(object)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)\n    .join('&');\n}\n\n/**\n * Transforms any `Error` or `Event` into a plain object with all of their enumerable properties, and some of their\n * non-enumerable properties attached.\n *\n * @param value Initial source that we have to transform in order for it to be usable by the serializer\n * @returns An Event or Error turned into an object - or the value argurment itself, when value is neither an Event nor\n *  an Error.\n */\nfunction convertToPlainObject(\n  value,\n)\n\n {\n  if (isError(value)) {\n    return {\n      message: value.message,\n      name: value.name,\n      stack: value.stack,\n      ...getOwnProperties(value),\n    };\n  } else if (isEvent(value)) {\n    var newObj\n\n = {\n      type: value.type,\n      target: serializeEventTarget(value.target),\n      currentTarget: serializeEventTarget(value.currentTarget),\n      ...getOwnProperties(value),\n    };\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      newObj.detail = value.detail;\n    }\n\n    return newObj;\n  } else {\n    return value;\n  }\n}\n\n/** Creates a string representation of the target of an `Event` object */\nfunction serializeEventTarget(target) {\n  try {\n    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/** Filters out all but an object's own properties */\nfunction getOwnProperties(obj) {\n  if (typeof obj === 'object' && obj !== null) {\n    var extractedProps = {};\n    for (var property in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, property)) {\n        extractedProps[property] = (obj )[property];\n      }\n    }\n    return extractedProps;\n  } else {\n    return {};\n  }\n}\n\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\nfunction extractExceptionKeysForMessage(exception, maxLength = 40) {\n  var keys = Object.keys(convertToPlainObject(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    var serialized = keys.slice(0, includedKeys).join(', ');\n    if (serialized.length > maxLength) {\n      continue;\n    }\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n\n/**\n * Given any object, return a new object having removed all fields whose value was `undefined`.\n * Works recursively on objects and arrays.\n *\n * Attention: This function keeps circular references in the returned object.\n */\nfunction dropUndefinedKeys(inputValue) {\n  // This map keeps track of what already visited nodes map to.\n  // Our Set - based memoBuilder doesn't work here because we want to the output object to have the same circular\n  // references as the input object.\n  var memoizationMap = new Map();\n\n  // This function just proxies `_dropUndefinedKeys` to keep the `memoBuilder` out of this function's API\n  return _dropUndefinedKeys(inputValue, memoizationMap);\n}\n\nfunction _dropUndefinedKeys(inputValue, memoizationMap) {\n  if (isPlainObject(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the object it was mapped to in the new object\n    var memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    var returnValue = {};\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    for (var key of Object.keys(inputValue)) {\n      if (typeof inputValue[key] !== 'undefined') {\n        returnValue[key] = _dropUndefinedKeys(inputValue[key], memoizationMap);\n      }\n    }\n\n    return returnValue ;\n  }\n\n  if (Array.isArray(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the array it was mapped to in the new object\n    var memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    var returnValue = [];\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    inputValue.forEach((item) => {\n      returnValue.push(_dropUndefinedKeys(item, memoizationMap));\n    });\n\n    return returnValue ;\n  }\n\n  return inputValue;\n}\n\n/**\n * Ensure that something is an object.\n *\n * Turns `undefined` and `null` into `String`s and all other primitives into instances of their respective wrapper\n * classes (String, Boolean, Number, etc.). Acts as the identity function on non-primitives.\n *\n * @param wat The subject of the objectification\n * @returns A version of `wat` which can safely be used with `Object` class methods\n */\nfunction objectify(wat) {\n  let objectified;\n  switch (true) {\n    case wat === undefined || wat === null:\n      objectified = new String(wat);\n      break;\n\n    // Though symbols and bigints do have wrapper classes (`Symbol` and `BigInt`, respectively), for whatever reason\n    // those classes don't have constructors which can be used with the `new` keyword. We therefore need to cast each as\n    // an object in order to wrap it.\n    case typeof wat === 'symbol' || typeof wat === 'bigint':\n      objectified = Object(wat);\n      break;\n\n    // this will catch the remaining primitives: `String`, `Number`, and `Boolean`\n    case isPrimitive(wat):\n            objectified = new (wat ).constructor(wat);\n      break;\n\n    // by process of elimination, at this point we know that `wat` must already be an object\n    default:\n      objectified = wat;\n      break;\n  }\n  return objectified;\n}\n\nexport { addNonEnumerableProperty, convertToPlainObject, dropUndefinedKeys, extractExceptionKeysForMessage, fill, getOriginalFunction, markFunctionWrapped, objectify, urlEncode };\n//# sourceMappingURL=object.js.map\n","/**\n * Polyfill for the nullish coalescing operator (`??`).\n *\n * Note that the RHS is wrapped in a function so that if it's a computed value, that evaluation won't happen unless the\n * LHS evaluates to a nullish value, to mimic the operator's short-circuiting behavior.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n *\n * @param lhs The value of the expression to the left of the `??`\n * @param rhsFn A function returning the value of the expression to the right of the `??`\n * @returns The LHS value, unless it's `null` or `undefined`, in which case, the RHS value\n */\nfunction _nullishCoalesce(lhs, rhsFn) {\n  // by checking for loose equality to `null`, we catch both `null` and `undefined`\n  return lhs != null ? lhs : rhsFn();\n}\n\n// Sucrase version:\n// function _nullishCoalesce(lhs, rhsFn) {\n//   if (lhs != null) {\n//     return lhs;\n//   } else {\n//     return rhsFn();\n//   }\n// }\n\nexport { _nullishCoalesce };\n//# sourceMappingURL=_nullishCoalesce.js.map\n","/**\n * Polyfill for the optional chain operator, `?.`, given previous conversion of the expression into an array of values,\n * descriptors, and functions.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n * See https://github.com/alangpierce/sucrase/blob/265887868966917f3b924ce38dfad01fbab1329f/src/transformers/OptionalChainingNullishTransformer.ts#L15\n *\n * @param ops Array result of expression conversion\n * @returns The value of the expression\n */\nfunction _optionalChain(ops) {\n  let lastAccessLHS = undefined;\n  let value = ops[0];\n  let i = 1;\n  while (i < ops.length) {\n    var op = ops[i] ;\n    var fn = ops[i + 1] ;\n    i += 2;\n    // by checking for loose equality to `null`, we catch both `null` and `undefined`\n    if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n      // really we're meaning to return `undefined` as an actual value here, but it saves bytes not to write it\n      return;\n    }\n    if (op === 'access' || op === 'optionalAccess') {\n      lastAccessLHS = value;\n      value = fn(value);\n    } else if (op === 'call' || op === 'optionalCall') {\n      value = fn((...args) => (value ).call(lastAccessLHS, ...args));\n      lastAccessLHS = undefined;\n    }\n  }\n  return value;\n}\n\n// Sucrase version\n// function _optionalChain(ops) {\n//   let lastAccessLHS = undefined;\n//   let value = ops[0];\n//   let i = 1;\n//   while (i < ops.length) {\n//     var op = ops[i];\n//     var fn = ops[i + 1];\n//     i += 2;\n//     if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n//       return undefined;\n//     }\n//     if (op === 'access' || op === 'optionalAccess') {\n//       lastAccessLHS = value;\n//       value = fn(value);\n//     } else if (op === 'call' || op === 'optionalCall') {\n//       value = fn((...args) => value.call(lastAccessLHS, ...args));\n//       lastAccessLHS = undefined;\n//     }\n//   }\n//   return value;\n// }\n\nexport { _optionalChain };\n//# sourceMappingURL=_optionalChain.js.map\n","import { _optionalChain } from './buildPolyfills';\n\nvar STACKTRACE_LIMIT = 50;\n\n/**\n * Creates a stack parser with the supplied line parsers\n *\n * StackFrames are returned in the correct order for Sentry Exception\n * frames and with Sentry SDK internal frames removed from the top and bottom\n *\n */\nfunction createStackParser(...parsers) {\n  var sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n\n  return (stack, skipFirst = 0) => {\n    var frames = [];\n\n    for (var line of stack.split('\\n').slice(skipFirst)) {\n      // https://github.com/getsentry/sentry-javascript/issues/5459\n      // Remove webpack (error: *) wrappers\n      var cleanedLine = line.replace(/\\(error: (.*)\\)/, '$1');\n\n      for (var parser of sortedParsers) {\n        var frame = parser(cleanedLine);\n\n        if (frame) {\n          frames.push(frame);\n          break;\n        }\n      }\n    }\n\n    return stripSentryFramesAndReverse(frames);\n  };\n}\n\n/**\n * Gets a stack parser implementation from Options.stackParser\n * @see Options\n *\n * If options contains an array of line parsers, it is converted into a parser\n */\nfunction stackParserFromStackParserOptions(stackParser) {\n  if (Array.isArray(stackParser)) {\n    return createStackParser(...stackParser);\n  }\n  return stackParser;\n}\n\n/**\n * @hidden\n */\nfunction stripSentryFramesAndReverse(stack) {\n  if (!stack.length) {\n    return [];\n  }\n\n  let localStack = stack;\n\n  var firstFrameFunction = localStack[0].function || '';\n  var lastFrameFunction = localStack[localStack.length - 1].function || '';\n\n  // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n  if (firstFrameFunction.indexOf('captureMessage') !== -1 || firstFrameFunction.indexOf('captureException') !== -1) {\n    localStack = localStack.slice(1);\n  }\n\n  // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n  if (lastFrameFunction.indexOf('sentryWrapped') !== -1) {\n    localStack = localStack.slice(0, -1);\n  }\n\n  // The frame where the crash happened, should be the last entry in the array\n  return localStack\n    .slice(0, STACKTRACE_LIMIT)\n    .map(frame => ({\n      ...frame,\n      filename: frame.filename || localStack[0].filename,\n      function: frame.function || '?',\n    }))\n    .reverse();\n}\n\nvar defaultFunctionName = '<anonymous>';\n\n/**\n * Safely extract function name from itself\n */\nfunction getFunctionName(fn) {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n\nfunction node(getModule) {\n  var FILENAME_MATCH = /^\\s*[-]{4,}$/;\n  var FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\n\n    return (line) => {\n    if (line.match(FILENAME_MATCH)) {\n      return {\n        filename: line,\n      };\n    }\n\n    var lineMatch = line.match(FULL_MATCH);\n    if (!lineMatch) {\n      return undefined;\n    }\n\n    let object;\n    let method;\n    let functionName;\n    let typeName;\n    let methodName;\n\n    if (lineMatch[1]) {\n      functionName = lineMatch[1];\n\n      let methodStart = functionName.lastIndexOf('.');\n      if (functionName[methodStart - 1] === '.') {\n                methodStart--;\n      }\n\n      if (methodStart > 0) {\n        object = functionName.substr(0, methodStart);\n        method = functionName.substr(methodStart + 1);\n        var objectEnd = object.indexOf('.Module');\n        if (objectEnd > 0) {\n          functionName = functionName.substr(objectEnd + 1);\n          object = object.substr(0, objectEnd);\n        }\n      }\n      typeName = undefined;\n    }\n\n    if (method) {\n      typeName = object;\n      methodName = method;\n    }\n\n    if (method === '<anonymous>') {\n      methodName = undefined;\n      functionName = undefined;\n    }\n\n    if (functionName === undefined) {\n      methodName = methodName || '<anonymous>';\n      functionName = typeName ? `${typeName}.${methodName}` : methodName;\n    }\n\n    var filename = _optionalChain([lineMatch, 'access', _ => _[2], 'optionalAccess', _2 => _2.startsWith, 'call', _3 => _3('file://')]) ? lineMatch[2].substr(7) : lineMatch[2];\n    var isNative = lineMatch[5] === 'native';\n    var isInternal =\n      isNative || (filename && !filename.startsWith('/') && !filename.startsWith('.') && filename.indexOf(':\\\\') !== 1);\n\n    // in_app is all that's not an internal Node function or a module within node_modules\n    // note that isNative appears to return true even for node core libraries\n    // see https://github.com/getsentry/raven-node/issues/176\n    var in_app = !isInternal && filename !== undefined && !filename.includes('node_modules/');\n\n    return {\n      filename,\n      module: _optionalChain([getModule, 'optionalCall', _4 => _4(filename)]),\n      function: functionName,\n      lineno: parseInt(lineMatch[3], 10) || undefined,\n      colno: parseInt(lineMatch[4], 10) || undefined,\n      in_app,\n    };\n  };\n}\n\n/**\n * Node.js stack line parser\n *\n * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n */\nfunction nodeStackLineParser(getModule) {\n  return [90, node(getModule)];\n}\n\nexport { createStackParser, getFunctionName, nodeStackLineParser, stackParserFromStackParserOptions, stripSentryFramesAndReverse };\n//# sourceMappingURL=stacktrace.js.map\n","import { getGlobalObject } from './global.js';\nimport { logger } from './logger.js';\n\n/**\n * Tells whether current environment supports ErrorEvent objects\n * {@link supportsErrorEvent}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMError objects\n * {@link supportsDOMError}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMError() {\n  try {\n    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':\n    // 1 argument required, but only 0 present.\n    // @ts-ignore It really needs 1 argument, not 0.\n    new DOMError('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMException objects\n * {@link supportsDOMException}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMException() {\n  try {\n    new DOMException('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports Fetch API\n * {@link supportsFetch}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsFetch() {\n  if (!('fetch' in getGlobalObject())) {\n    return false;\n  }\n\n  try {\n    new Headers();\n    new Request('http://www.example.com');\n    new Response();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * isNativeFetch checks if the given function is a native implementation of fetch()\n */\nfunction isNativeFetch(func) {\n  return func && /^function fetch\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(func.toString());\n}\n\n/**\n * Tells whether current environment supports Fetch API natively\n * {@link supportsNativeFetch}.\n *\n * @returns true if `window.fetch` is natively implemented, false otherwise\n */\nfunction supportsNativeFetch() {\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  var global = getGlobalObject();\n\n  // Fast path to avoid DOM I/O\n    if (isNativeFetch(global.fetch)) {\n    return true;\n  }\n\n  // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)\n  // so create a \"pure\" iframe to see if that has native fetch\n  let result = false;\n  var doc = global.document;\n    if (doc && typeof (doc.createElement ) === 'function') {\n    try {\n      var sandbox = doc.createElement('iframe');\n      sandbox.hidden = true;\n      doc.head.appendChild(sandbox);\n      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {\n                result = isNativeFetch(sandbox.contentWindow.fetch);\n      }\n      doc.head.removeChild(sandbox);\n    } catch (err) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Tells whether current environment supports ReportingObserver API\n * {@link supportsReportingObserver}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReportingObserver() {\n  return 'ReportingObserver' in getGlobalObject();\n}\n\n/**\n * Tells whether current environment supports Referrer Policy API\n * {@link supportsReferrerPolicy}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReferrerPolicy() {\n  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default'\n  // (see https://caniuse.com/#feat=referrer-policy),\n  // it doesn't. And it throws an exception instead of ignoring this parameter...\n  // REF: https://github.com/getsentry/raven-js/issues/1233\n\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  try {\n    new Request('_', {\n      referrerPolicy: 'origin' ,\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports History API\n * {@link supportsHistory}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  var global = getGlobalObject();\n      var chrome = (global ).chrome;\n  var isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n    var hasHistoryApi = 'history' in global && !!global.history.pushState && !!global.history.replaceState;\n\n  return !isChromePackagedApp && hasHistoryApi;\n}\n\nexport { isNativeFetch, supportsDOMError, supportsDOMException, supportsErrorEvent, supportsFetch, supportsHistory, supportsNativeFetch, supportsReferrerPolicy, supportsReportingObserver };\n//# sourceMappingURL=supports.js.map\n","import { getGlobalObject } from './global.js';\nimport { isInstanceOf, isString } from './is.js';\nimport { logger, CONSOLE_LEVELS } from './logger.js';\nimport { fill } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\nimport { supportsNativeFetch, supportsHistory } from './supports.js';\n\nvar global = getGlobalObject();\n\n/**\n * Instrument native APIs to call handlers that can be used to create breadcrumbs, APM spans etc.\n *  - Console API\n *  - Fetch API\n *  - XHR API\n *  - History API\n *  - DOM API (click/typing)\n *  - Error API\n *  - UnhandledRejection API\n */\n\nvar handlers = {};\nvar instrumented = {};\n\n/** Instruments given API */\nfunction instrument(type) {\n  if (instrumented[type]) {\n    return;\n  }\n\n  instrumented[type] = true;\n\n  switch (type) {\n    case 'console':\n      instrumentConsole();\n      break;\n    case 'dom':\n      instrumentDOM();\n      break;\n    case 'xhr':\n      instrumentXHR();\n      break;\n    case 'fetch':\n      instrumentFetch();\n      break;\n    case 'history':\n      instrumentHistory();\n      break;\n    case 'error':\n      instrumentError();\n      break;\n    case 'unhandledrejection':\n      instrumentUnhandledRejection();\n      break;\n    default:\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('unknown instrumentation type:', type);\n      return;\n  }\n}\n\n/**\n * Add handler that will be called when given type of instrumentation triggers.\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\nfunction addInstrumentationHandler(type, callback) {\n  handlers[type] = handlers[type] || [];\n  (handlers[type] ).push(callback);\n  instrument(type);\n}\n\n/** JSDoc */\nfunction triggerHandlers(type, data) {\n  if (!type || !handlers[type]) {\n    return;\n  }\n\n  for (var handler of handlers[type] || []) {\n    try {\n      handler(data);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.error(\n          `Error while triggering instrumentation handler.\\nType: ${type}\\nName: ${getFunctionName(handler)}\\nError:`,\n          e,\n        );\n    }\n  }\n}\n\n/** JSDoc */\nfunction instrumentConsole() {\n  if (!('console' in global)) {\n    return;\n  }\n\n  CONSOLE_LEVELS.forEach(function (level) {\n    if (!(level in global.console)) {\n      return;\n    }\n\n    fill(global.console, level, function (originalConsoleMethod) {\n      return function (...args) {\n        triggerHandlers('console', { args, level });\n\n        // this fails for some browsers. :(\n        if (originalConsoleMethod) {\n          originalConsoleMethod.apply(global.console, args);\n        }\n      };\n    });\n  });\n}\n\n/** JSDoc */\nfunction instrumentFetch() {\n  if (!supportsNativeFetch()) {\n    return;\n  }\n\n  fill(global, 'fetch', function (originalFetch) {\n    return function (...args) {\n      var handlerData = {\n        args,\n        fetchData: {\n          method: getFetchMethod(args),\n          url: getFetchUrl(args),\n        },\n        startTimestamp: Date.now(),\n      };\n\n      triggerHandlers('fetch', {\n        ...handlerData,\n      });\n\n            return originalFetch.apply(global, args).then(\n        (response) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            response,\n          });\n          return response;\n        },\n        (error) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            error,\n          });\n          // NOTE: If you are a Sentry user, and you are seeing this stack frame,\n          //       it means the sentry.javascript SDK caught an error invoking your application code.\n          //       This is expected behavior and NOT indicative of a bug with sentry.javascript.\n          throw error;\n        },\n      );\n    };\n  });\n}\n\n/** Extract `method` from fetch call arguments */\nfunction getFetchMethod(fetchArgs = []) {\n  if ('Request' in global && isInstanceOf(fetchArgs[0], Request) && fetchArgs[0].method) {\n    return String(fetchArgs[0].method).toUpperCase();\n  }\n  if (fetchArgs[1] && fetchArgs[1].method) {\n    return String(fetchArgs[1].method).toUpperCase();\n  }\n  return 'GET';\n}\n\n/** Extract `url` from fetch call arguments */\nfunction getFetchUrl(fetchArgs = []) {\n  if (typeof fetchArgs[0] === 'string') {\n    return fetchArgs[0];\n  }\n  if ('Request' in global && isInstanceOf(fetchArgs[0], Request)) {\n    return fetchArgs[0].url;\n  }\n  return String(fetchArgs[0]);\n}\n\n/** JSDoc */\nfunction instrumentXHR() {\n  if (!('XMLHttpRequest' in global)) {\n    return;\n  }\n\n  var xhrproto = XMLHttpRequest.prototype;\n\n  fill(xhrproto, 'open', function (originalOpen) {\n    return function ( ...args) {\n            var xhr = this;\n      var url = args[1];\n      var xhrInfo = (xhr.__sentry_xhr__ = {\n                method: isString(args[0]) ? args[0].toUpperCase() : args[0],\n        url: args[1],\n      });\n\n      // if Sentry key appears in URL, don't capture it as a request\n            if (isString(url) && xhrInfo.method === 'POST' && url.match(/sentry_key/)) {\n        xhr.__sentry_own_request__ = true;\n      }\n\n      var onreadystatechangeHandler = function () {\n        if (xhr.readyState === 4) {\n          try {\n            // touching statusCode in some platforms throws\n            // an exception\n            xhrInfo.status_code = xhr.status;\n          } catch (e) {\n            /* do nothing */\n          }\n\n          triggerHandlers('xhr', {\n            args,\n            endTimestamp: Date.now(),\n            startTimestamp: Date.now(),\n            xhr,\n          });\n        }\n      };\n\n      if ('onreadystatechange' in xhr && typeof xhr.onreadystatechange === 'function') {\n        fill(xhr, 'onreadystatechange', function (original) {\n          return function (...readyStateArgs) {\n            onreadystatechangeHandler();\n            return original.apply(xhr, readyStateArgs);\n          };\n        });\n      } else {\n        xhr.addEventListener('readystatechange', onreadystatechangeHandler);\n      }\n\n      return originalOpen.apply(xhr, args);\n    };\n  });\n\n  fill(xhrproto, 'send', function (originalSend) {\n    return function ( ...args) {\n      if (this.__sentry_xhr__ && args[0] !== undefined) {\n        this.__sentry_xhr__.body = args[0];\n      }\n\n      triggerHandlers('xhr', {\n        args,\n        startTimestamp: Date.now(),\n        xhr: this,\n      });\n\n      return originalSend.apply(this, args);\n    };\n  });\n}\n\nlet lastHref;\n\n/** JSDoc */\nfunction instrumentHistory() {\n  if (!supportsHistory()) {\n    return;\n  }\n\n  var oldOnPopState = global.onpopstate;\n  global.onpopstate = function ( ...args) {\n    var to = global.location.href;\n    // keep track of the current URL state, as we always receive only the updated state\n    var from = lastHref;\n    lastHref = to;\n    triggerHandlers('history', {\n      from,\n      to,\n    });\n    if (oldOnPopState) {\n      // Apparently this can throw in Firefox when incorrectly implemented plugin is installed.\n      // https://github.com/getsentry/sentry-javascript/issues/3344\n      // https://github.com/bugsnag/bugsnag-js/issues/469\n      try {\n        return oldOnPopState.apply(this, args);\n      } catch (_oO) {\n        // no-empty\n      }\n    }\n  };\n\n  /** @hidden */\n  function historyReplacementFunction(originalHistoryFunction) {\n    return function ( ...args) {\n      var url = args.length > 2 ? args[2] : undefined;\n      if (url) {\n        // coerce to string (this is what pushState does)\n        var from = lastHref;\n        var to = String(url);\n        // keep track of the current URL state, as we always receive only the updated state\n        lastHref = to;\n        triggerHandlers('history', {\n          from,\n          to,\n        });\n      }\n      return originalHistoryFunction.apply(this, args);\n    };\n  }\n\n  fill(global.history, 'pushState', historyReplacementFunction);\n  fill(global.history, 'replaceState', historyReplacementFunction);\n}\n\nvar debounceDuration = 1000;\nlet debounceTimerID;\nlet lastCapturedEvent;\n\n/**\n * Decide whether the current event should finish the debounce of previously captured one.\n * @param previous previously captured event\n * @param current event to be captured\n */\nfunction shouldShortcircuitPreviousDebounce(previous, current) {\n  // If there was no previous event, it should always be swapped for the new one.\n  if (!previous) {\n    return true;\n  }\n\n  // If both events have different type, then user definitely performed two separate actions. e.g. click + keypress.\n  if (previous.type !== current.type) {\n    return true;\n  }\n\n  try {\n    // If both events have the same type, it's still possible that actions were performed on different targets.\n    // e.g. 2 clicks on different buttons.\n    if (previous.target !== current.target) {\n      return true;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  // If both events have the same type _and_ same `target` (an element which triggered an event, _not necessarily_\n  // to which an event listener was attached), we treat them as the same action, as we want to capture\n  // only one breadcrumb. e.g. multiple clicks on the same button, or typing inside a user input box.\n  return false;\n}\n\n/**\n * Decide whether an event should be captured.\n * @param event event to be captured\n */\nfunction shouldSkipDOMEvent(event) {\n  // We are only interested in filtering `keypress` events for now.\n  if (event.type !== 'keypress') {\n    return false;\n  }\n\n  try {\n    var target = event.target ;\n\n    if (!target || !target.tagName) {\n      return true;\n    }\n\n    // Only consider keypress events on actual input elements. This will disregard keypresses targeting body\n    // e.g.tabbing through elements, hotkeys, etc.\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n      return false;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  return true;\n}\n\n/**\n * Wraps addEventListener to capture UI breadcrumbs\n * @param handler function that will be triggered\n * @param globalListener indicates whether event was captured by the global event listener\n * @returns wrapped breadcrumb events handler\n * @hidden\n */\nfunction makeDOMEventHandler(handler, globalListener = false) {\n  return (event) => {\n    // It's possible this handler might trigger multiple times for the same\n    // event (e.g. event propagation through node ancestors).\n    // Ignore if we've already captured that event.\n    if (!event || lastCapturedEvent === event) {\n      return;\n    }\n\n    // We always want to skip _some_ events.\n    if (shouldSkipDOMEvent(event)) {\n      return;\n    }\n\n    var name = event.type === 'keypress' ? 'input' : event.type;\n\n    // If there is no debounce timer, it means that we can safely capture the new event and store it for future comparisons.\n    if (debounceTimerID === undefined) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n    // If there is a debounce awaiting, see if the new event is different enough to treat it as a unique one.\n    // If that's the case, emit the previous event and store locally the newly-captured DOM event.\n    else if (shouldShortcircuitPreviousDebounce(lastCapturedEvent, event)) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n\n    // Start a new debounce timer that will prevent us from capturing multiple events that should be grouped together.\n    clearTimeout(debounceTimerID);\n    debounceTimerID = global.setTimeout(() => {\n      debounceTimerID = undefined;\n    }, debounceDuration);\n  };\n}\n\n/** JSDoc */\nfunction instrumentDOM() {\n  if (!('document' in global)) {\n    return;\n  }\n\n  // Make it so that any click or keypress that is unhandled / bubbled up all the way to the document triggers our dom\n  // handlers. (Normally we have only one, which captures a breadcrumb for each click or keypress.) Do this before\n  // we instrument `addEventListener` so that we don't end up attaching this handler twice.\n  var triggerDOMHandler = triggerHandlers.bind(null, 'dom');\n  var globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);\n  global.document.addEventListener('click', globalDOMEventHandler, false);\n  global.document.addEventListener('keypress', globalDOMEventHandler, false);\n\n  // After hooking into click and keypress events bubbled up to `document`, we also hook into user-handled\n  // clicks & keypresses, by adding an event listener of our own to any element to which they add a listener. That\n  // way, whenever one of their handlers is triggered, ours will be, too. (This is needed because their handler\n  // could potentially prevent the event from bubbling up to our global listeners. This way, our handler are still\n  // guaranteed to fire at least once.)\n  ['EventTarget', 'Node'].forEach((target) => {\n        var proto = (global )[target] && (global )[target].prototype;\n        if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n\n    fill(proto, 'addEventListener', function (originalAddEventListener) {\n      return function (\n        \n        type,\n        listener,\n        options,\n      ) {\n        if (type === 'click' || type == 'keypress') {\n          try {\n            var el = this ;\n            var handlers = (el.__sentry_instrumentation_handlers__ = el.__sentry_instrumentation_handlers__ || {});\n            var handlerForType = (handlers[type] = handlers[type] || { refCount: 0 });\n\n            if (!handlerForType.handler) {\n              var handler = makeDOMEventHandler(triggerDOMHandler);\n              handlerForType.handler = handler;\n              originalAddEventListener.call(this, type, handler, options);\n            }\n\n            handlerForType.refCount += 1;\n          } catch (e) {\n            // Accessing dom properties is always fragile.\n            // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n          }\n        }\n\n        return originalAddEventListener.call(this, type, listener, options);\n      };\n    });\n\n    fill(\n      proto,\n      'removeEventListener',\n      function (originalRemoveEventListener) {\n        return function (\n          \n          type,\n          listener,\n          options,\n        ) {\n          if (type === 'click' || type == 'keypress') {\n            try {\n              var el = this ;\n              var handlers = el.__sentry_instrumentation_handlers__ || {};\n              var handlerForType = handlers[type];\n\n              if (handlerForType) {\n                handlerForType.refCount -= 1;\n                // If there are no longer any custom handlers of the current type on this element, we can remove ours, too.\n                if (handlerForType.refCount <= 0) {\n                  originalRemoveEventListener.call(this, type, handlerForType.handler, options);\n                  handlerForType.handler = undefined;\n                  delete handlers[type];                 }\n\n                // If there are no longer any custom handlers of any type on this element, cleanup everything.\n                if (Object.keys(handlers).length === 0) {\n                  delete el.__sentry_instrumentation_handlers__;\n                }\n              }\n            } catch (e) {\n              // Accessing dom properties is always fragile.\n              // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n            }\n          }\n\n          return originalRemoveEventListener.call(this, type, listener, options);\n        };\n      },\n    );\n  });\n}\n\nlet _oldOnErrorHandler = null;\n/** JSDoc */\nfunction instrumentError() {\n  _oldOnErrorHandler = global.onerror;\n\n  global.onerror = function (msg, url, line, column, error) {\n    triggerHandlers('error', {\n      column,\n      error,\n      line,\n      msg,\n      url,\n    });\n\n    if (_oldOnErrorHandler) {\n            return _oldOnErrorHandler.apply(this, arguments);\n    }\n\n    return false;\n  };\n}\n\nlet _oldOnUnhandledRejectionHandler = null;\n/** JSDoc */\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = global.onunhandledrejection;\n\n  global.onunhandledrejection = function (e) {\n    triggerHandlers('unhandledrejection', e);\n\n    if (_oldOnUnhandledRejectionHandler) {\n            return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n}\n\nexport { addInstrumentationHandler };\n//# sourceMappingURL=instrument.js.map\n","/**\n * Helper to decycle json objects\n */\nfunction memoBuilder() {\n  var hasWeakSet = typeof WeakSet === 'function';\n  var inner = hasWeakSet ? new WeakSet() : [];\n  function memoize(obj) {\n    if (hasWeakSet) {\n      if (inner.has(obj)) {\n        return true;\n      }\n      inner.add(obj);\n      return false;\n    }\n        for (let i = 0; i < inner.length; i++) {\n      var value = inner[i];\n      if (value === obj) {\n        return true;\n      }\n    }\n    inner.push(obj);\n    return false;\n  }\n\n  function unmemoize(obj) {\n    if (hasWeakSet) {\n      inner.delete(obj);\n    } else {\n      for (let i = 0; i < inner.length; i++) {\n        if (inner[i] === obj) {\n          inner.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n  return [memoize, unmemoize];\n}\n\nexport { memoBuilder };\n//# sourceMappingURL=memo.js.map\n","import { getGlobalObject } from './global.js';\nimport { addNonEnumerableProperty } from './object.js';\nimport { snipLine } from './string.js';\n\n/**\n * Extended Window interface that allows for Crypto API usage in IE browsers\n */\n\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\nfunction uuid4() {\n  var global = getGlobalObject() ;\n  var crypto = (global.crypto || global.msCrypto) ;\n\n  if (crypto && crypto.randomUUID) {\n    return crypto.randomUUID().replace(/-/g, '');\n  }\n\n  var getRandomByte =\n    crypto && crypto.getRandomValues ? () => crypto.getRandomValues(new Uint8Array(1))[0] : () => Math.random() * 16;\n\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n  // Concatenating the following numbers as strings results in '10000000100040008000100000000000'\n  return (([1e7] ) + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, c =>\n        ((c ) ^ ((getRandomByte() & 15) >> ((c ) / 4))).toString(16),\n  );\n}\n\nfunction getFirstException(event) {\n  return event.exception && event.exception.values ? event.exception.values[0] : undefined;\n}\n\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\nfunction getEventDescription(event) {\n  const { message, event_id: eventId } = event;\n  if (message) {\n    return message;\n  }\n\n  var firstException = getFirstException(event);\n  if (firstException) {\n    if (firstException.type && firstException.value) {\n      return `${firstException.type}: ${firstException.value}`;\n    }\n    return firstException.type || firstException.value || eventId || '<unknown>';\n  }\n  return eventId || '<unknown>';\n}\n\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\nfunction addExceptionTypeValue(event, value, type) {\n  var exception = (event.exception = event.exception || {});\n  var values = (exception.values = exception.values || []);\n  var firstException = (values[0] = values[0] || {});\n  if (!firstException.value) {\n    firstException.value = value || '';\n  }\n  if (!firstException.type) {\n    firstException.type = type || 'Error';\n  }\n}\n\n/**\n * Adds exception mechanism data to a given event. Uses defaults if the second parameter is not passed.\n *\n * @param event The event to modify.\n * @param newMechanism Mechanism data to add to the event.\n * @hidden\n */\nfunction addExceptionMechanism(event, newMechanism) {\n  var firstException = getFirstException(event);\n  if (!firstException) {\n    return;\n  }\n\n  var defaultMechanism = { type: 'generic', handled: true };\n  var currentMechanism = firstException.mechanism;\n  firstException.mechanism = { ...defaultMechanism, ...currentMechanism, ...newMechanism };\n\n  if (newMechanism && 'data' in newMechanism) {\n    var mergedData = { ...(currentMechanism && currentMechanism.data), ...newMechanism.data };\n    firstException.mechanism.data = mergedData;\n  }\n}\n\n// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\nvar SEMVER_REGEXP =\n  /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\n/**\n * Represents Semantic Versioning object\n */\n\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\nfunction parseSemver(input) {\n  var match = input.match(SEMVER_REGEXP) || [];\n  var major = parseInt(match[1], 10);\n  var minor = parseInt(match[2], 10);\n  var patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4],\n  };\n}\n\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\nfunction addContextToFrame(lines, frame, linesOfContext = 5) {\n  var lineno = frame.lineno || 0;\n  var maxLines = lines.length;\n  var sourceLine = Math.max(Math.min(maxLines, lineno - 1), 0);\n\n  frame.pre_context = lines\n    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)\n    .map((line) => snipLine(line, 0));\n\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n\n  frame.post_context = lines\n    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)\n    .map((line) => snipLine(line, 0));\n}\n\n/**\n * Checks whether or not we've already captured the given exception (note: not an identical exception - the very object\n * in question), and marks it captured if not.\n *\n * This is useful because it's possible for an error to get captured by more than one mechanism. After we intercept and\n * record an error, we rethrow it (assuming we've intercepted it before it's reached the top-level global handlers), so\n * that we don't interfere with whatever effects the error might have had were the SDK not there. At that point, because\n * the error has been rethrown, it's possible for it to bubble up to some other code we've instrumented. If it's not\n * caught after that, it will bubble all the way up to the global handlers (which of course we also instrument). This\n * function helps us ensure that even if we encounter the same error more than once, we only record it the first time we\n * see it.\n *\n * Note: It will ignore primitives (always return `false` and not mark them as seen), as properties can't be set on\n * them. {@link: Object.objectify} can be used on exceptions to convert any that are primitives into their equivalent\n * object wrapper forms so that this check will always work. However, because we need to flag the exact object which\n * will get rethrown, and because that rethrowing happens outside of the event processing pipeline, the objectification\n * must be done before the exception captured.\n *\n * @param A thrown exception to check or flag as having been seen\n * @returns `true` if the exception has already been captured, `false` if not (with the side effect of marking it seen)\n */\nfunction checkOrSetAlreadyCaught(exception) {\n    if (exception && (exception ).__sentry_captured__) {\n    return true;\n  }\n\n  try {\n    // set it this way rather than by assignment so that it's not ennumerable and therefore isn't recorded by the\n    // `ExtraErrorData` integration\n    addNonEnumerableProperty(exception , '__sentry_captured__', true);\n  } catch (err) {\n    // `exception` is a primitive, so we can't mark it seen\n  }\n\n  return false;\n}\n\n/**\n * Checks whether the given input is already an array, and if it isn't, wraps it in one.\n *\n * @param maybeArray Input to turn into an array, if necessary\n * @returns The input, if already an array, or an array with the input as the only element, if not\n */\nfunction arrayify(maybeArray) {\n  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n}\n\nexport { addContextToFrame, addExceptionMechanism, addExceptionTypeValue, arrayify, checkOrSetAlreadyCaught, getEventDescription, parseSemver, uuid4 };\n//# sourceMappingURL=misc.js.map\n","import { isNaN, isSyntheticEvent } from './is.js';\nimport { memoBuilder } from './memo.js';\nimport { convertToPlainObject } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\n\n/**\n * Recursively normalizes the given object.\n *\n * - Creates a copy to prevent original input mutation\n * - Skips non-enumerable properties\n * - When stringifying, calls `toJSON` if implemented\n * - Removes circular references\n * - Translates non-serializable values (`undefined`/`NaN`/functions) to serializable format\n * - Translates known global objects/classes to a string representations\n * - Takes care of `Error` object serialization\n * - Optionally limits depth of final output\n * - Optionally limits number of properties/elements included in any single object/array\n *\n * @param input The object to be normalized.\n * @param depth The max depth to which to normalize the object. (Anything deeper stringified whole.)\n * @param maxProperties The max number of elements or properties to be included in any single array or\n * object in the normallized output.\n * @returns A normalized version of the object, or `\"**non-serializable**\"` if any errors are thrown during normalization.\n */\nfunction normalize(input, depth = +Infinity, maxProperties = +Infinity) {\n  try {\n    // since we're at the outermost level, we don't provide a key\n    return visit('', input, depth, maxProperties);\n  } catch (err) {\n    return { ERROR: `**non-serializable** (${err})` };\n  }\n}\n\n/** JSDoc */\nfunction normalizeToSize(\n    object,\n  // Default Node.js REPL depth\n  depth = 3,\n  // 100kB, as 200kB is max payload size, so half sounds reasonable\n  maxSize = 100 * 1024,\n) {\n  var normalized = normalize(object, depth);\n\n  if (jsonSize(normalized) > maxSize) {\n    return normalizeToSize(object, depth - 1, maxSize);\n  }\n\n  return normalized ;\n}\n\n/**\n * Visits a node to perform normalization on it\n *\n * @param key The key corresponding to the given node\n * @param value The node to be visited\n * @param depth Optional number indicating the maximum recursion depth\n * @param maxProperties Optional maximum number of properties/elements included in any single object/array\n * @param memo Optional Memo class handling decycling\n */\nfunction visit(\n  key,\n  value,\n  depth = +Infinity,\n  maxProperties = +Infinity,\n  memo = memoBuilder(),\n) {\n  const [memoize, unmemoize] = memo;\n\n  // Get the simple cases out of the way first\n  if (value === null || (['number', 'boolean', 'string'].includes(typeof value) && !isNaN(value))) {\n    return value ;\n  }\n\n  var stringified = stringifyValue(key, value);\n\n  // Anything we could potentially dig into more (objects or arrays) will have come back as `\"[object XXXX]\"`.\n  // Everything else will have already been serialized, so if we don't see that pattern, we're done.\n  if (!stringified.startsWith('[object ')) {\n    return stringified;\n  }\n\n  // From here on, we can assert that `value` is either an object or an array.\n\n  // Do not normalize objects that we know have already been normalized. As a general rule, the\n  // \"__sentry_skip_normalization__\" property should only be used sparingly and only should only be set on objects that\n  // have already been normalized.\n  if ((value )['__sentry_skip_normalization__']) {\n    return value ;\n  }\n\n  // We're also done if we've reached the max depth\n  if (depth === 0) {\n    // At this point we know `serialized` is a string of the form `\"[object XXXX]\"`. Clean it up so it's just `\"[XXXX]\"`.\n    return stringified.replace('object ', '');\n  }\n\n  // If we've already visited this branch, bail out, as it's circular reference. If not, note that we're seeing it now.\n  if (memoize(value)) {\n    return '[Circular ~]';\n  }\n\n  // If the value has a `toJSON` method, we call it to extract more information\n  var valueWithToJSON = value ;\n  if (valueWithToJSON && typeof valueWithToJSON.toJSON === 'function') {\n    try {\n      var jsonValue = valueWithToJSON.toJSON();\n      // We need to normalize the return value of `.toJSON()` in case it has circular references\n      return visit('', jsonValue, depth - 1, maxProperties, memo);\n    } catch (err) {\n      // pass (The built-in `toJSON` failed, but we can still try to do it ourselves)\n    }\n  }\n\n  // At this point we know we either have an object or an array, we haven't seen it before, and we're going to recurse\n  // because we haven't yet reached the max depth. Create an accumulator to hold the results of visiting each\n  // property/entry, and keep track of the number of items we add to it.\n  var normalized = (Array.isArray(value) ? [] : {}) ;\n  let numAdded = 0;\n\n  // Before we begin, convert`Error` and`Event` instances into plain objects, since some of each of their relevant\n  // properties are non-enumerable and otherwise would get missed.\n  var visitable = convertToPlainObject(value );\n\n  for (var visitKey in visitable) {\n    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.\n    if (!Object.prototype.hasOwnProperty.call(visitable, visitKey)) {\n      continue;\n    }\n\n    if (numAdded >= maxProperties) {\n      normalized[visitKey] = '[MaxProperties ~]';\n      break;\n    }\n\n    // Recursively visit all the child nodes\n    var visitValue = visitable[visitKey];\n    normalized[visitKey] = visit(visitKey, visitValue, depth - 1, maxProperties, memo);\n\n    numAdded += 1;\n  }\n\n  // Once we've visited all the branches, remove the parent from memo storage\n  unmemoize(value);\n\n  // Return accumulated values\n  return normalized;\n}\n\n/**\n * Stringify the given value. Handles various known special values and types.\n *\n * Not meant to be used on simple primitives which already have a string representation, as it will, for example, turn\n * the number 1231 into \"[Object Number]\", nor on `null`, as it will throw.\n *\n * @param value The value to stringify\n * @returns A stringified representation of the given value\n */\nfunction stringifyValue(\n  key,\n  // this type is a tiny bit of a cheat, since this function does handle NaN (which is technically a number), but for\n  // our internal use, it'll do\n  value,\n) {\n  try {\n    if (key === 'domain' && value && typeof value === 'object' && (value )._events) {\n      return '[Domain]';\n    }\n\n    if (key === 'domainEmitter') {\n      return '[DomainEmitter]';\n    }\n\n    // It's safe to use `global`, `window`, and `document` here in this manner, as we are asserting using `typeof` first\n    // which won't throw if they are not present.\n\n    if (typeof global !== 'undefined' && value === global) {\n      return '[Global]';\n    }\n\n        if (typeof window !== 'undefined' && value === window) {\n      return '[Window]';\n    }\n\n        if (typeof document !== 'undefined' && value === document) {\n      return '[Document]';\n    }\n\n    // React's SyntheticEvent thingy\n    if (isSyntheticEvent(value)) {\n      return '[SyntheticEvent]';\n    }\n\n    if (typeof value === 'number' && value !== value) {\n      return '[NaN]';\n    }\n\n    // this catches `undefined` (but not `null`, which is a primitive and can be serialized on its own)\n    if (value === void 0) {\n      return '[undefined]';\n    }\n\n    if (typeof value === 'function') {\n      return `[Function: ${getFunctionName(value)}]`;\n    }\n\n    if (typeof value === 'symbol') {\n      return `[${String(value)}]`;\n    }\n\n    // stringified BigInts are indistinguishable from regular numbers, so we need to label them to avoid confusion\n    if (typeof value === 'bigint') {\n      return `[BigInt: ${String(value)}]`;\n    }\n\n    // Now that we've knocked out all the special cases and the primitives, all we have left are objects. Simply casting\n    // them to strings means that instances of classes which haven't defined their `toStringTag` will just come out as\n    // `\"[object Object]\"`. If we instead look at the constructor's name (which is the same as the name of the class),\n    // we can make sure that only plain objects come out that way.\n    return `[object ${(Object.getPrototypeOf(value) ).constructor.name}]`;\n  } catch (err) {\n    return `**non-serializable** (${err})`;\n  }\n}\n\n/** Calculates bytes size of input string */\nfunction utf8Length(value) {\n    return ~-encodeURI(value).split(/%..|./).length;\n}\n\n/** Calculates bytes size of input object */\nfunction jsonSize(value) {\n  return utf8Length(JSON.stringify(value));\n}\n\nexport { normalize, normalizeToSize, visit as walk };\n//# sourceMappingURL=normalize.js.map\n","import { isThenable } from './is.js';\n\n/** SyncPromise internal states */\nvar States; (function (States) {\n  /** Pending */\n  var PENDING = 0; States[States[\"PENDING\"] = PENDING] = \"PENDING\";\n  /** Resolved / OK */\n  var RESOLVED = 1; States[States[\"RESOLVED\"] = RESOLVED] = \"RESOLVED\";\n  /** Rejected / Error */\n  var REJECTED = 2; States[States[\"REJECTED\"] = REJECTED] = \"REJECTED\";\n})(States || (States = {}));\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nfunction resolvedSyncPromise(value) {\n  return new SyncPromise(resolve => {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nfunction rejectedSyncPromise(reason) {\n  return new SyncPromise((_, reject) => {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise {\n   __init() {this._state = States.PENDING;}\n   __init2() {this._handlers = [];}\n  \n\n   constructor(\n    executor,\n  ) {;SyncPromise.prototype.__init.call(this);SyncPromise.prototype.__init2.call(this);SyncPromise.prototype.__init3.call(this);SyncPromise.prototype.__init4.call(this);SyncPromise.prototype.__init5.call(this);SyncPromise.prototype.__init6.call(this);\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n   then(\n    onfulfilled,\n    onrejected,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      this._handlers.push([\n        false,\n        result => {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result );\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n        reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n      ]);\n      this._executeHandlers();\n    });\n  }\n\n  /** JSDoc */\n   catch(\n    onrejected,\n  ) {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n   finally(onfinally) {\n    return new SyncPromise((resolve, reject) => {\n      let val;\n      let isRejected;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val );\n      });\n    });\n  }\n\n  /** JSDoc */\n    __init3() {this._resolve = (value) => {\n    this._setResult(States.RESOLVED, value);\n  };}\n\n  /** JSDoc */\n    __init4() {this._reject = (reason) => {\n    this._setResult(States.REJECTED, reason);\n  };}\n\n  /** JSDoc */\n    __init5() {this._setResult = (state, value) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      void (value ).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };}\n\n  /** JSDoc */\n    __init6() {this._executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    var cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler[0]) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n                handler[1](this._value );\n      }\n\n      if (this._state === States.REJECTED) {\n        handler[2](this._value);\n      }\n\n      handler[0] = true;\n    });\n  };}\n}\n\nexport { SyncPromise, rejectedSyncPromise, resolvedSyncPromise };\n//# sourceMappingURL=syncpromise.js.map\n","import { SentryError } from './error.js';\nimport { rejectedSyncPromise, SyncPromise, resolvedSyncPromise } from './syncpromise.js';\n\n/**\n * Creates an new PromiseBuffer object with the specified limit\n * @param limit max number of promises that can be stored in the buffer\n */\nfunction makePromiseBuffer(limit) {\n  var buffer = [];\n\n  function isReady() {\n    return limit === undefined || buffer.length < limit;\n  }\n\n  /**\n   * Remove a promise from the queue.\n   *\n   * @param task Can be any PromiseLike<T>\n   * @returns Removed promise.\n   */\n  function remove(task) {\n    return buffer.splice(buffer.indexOf(task), 1)[0];\n  }\n\n  /**\n   * Add a promise (representing an in-flight action) to the queue, and set it to remove itself on fulfillment.\n   *\n   * @param taskProducer A function producing any PromiseLike<T>; In previous versions this used to be `task:\n   *        PromiseLike<T>`, but under that model, Promises were instantly created on the call-site and their executor\n   *        functions therefore ran immediately. Thus, even if the buffer was full, the action still happened. By\n   *        requiring the promise to be wrapped in a function, we can defer promise creation until after the buffer\n   *        limit check.\n   * @returns The original promise.\n   */\n  function add(taskProducer) {\n    if (!isReady()) {\n      return rejectedSyncPromise(new SentryError('Not adding Promise because buffer limit was reached.'));\n    }\n\n    // start the task and add its promise to the queue\n    var task = taskProducer();\n    if (buffer.indexOf(task) === -1) {\n      buffer.push(task);\n    }\n    void task\n      .then(() => remove(task))\n      // Use `then(null, rejectionHandler)` rather than `catch(rejectionHandler)` so that we can use `PromiseLike`\n      // rather than `Promise`. `PromiseLike` doesn't have a `.catch` method, making its polyfill smaller. (ES5 didn't\n      // have promises, so TS has to polyfill when down-compiling.)\n      .then(null, () =>\n        remove(task).then(null, () => {\n          // We have to add another catch here because `remove()` starts a new promise chain.\n        }),\n      );\n    return task;\n  }\n\n  /**\n   * Wait for all promises in the queue to resolve or for timeout to expire, whichever comes first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the queue is still non-empty. Passing `0` (or\n   * not passing anything) will make the promise wait as long as it takes for the queue to drain before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if the queue is already empty or drains before the timeout, and\n   * `false` otherwise\n   */\n  function drain(timeout) {\n    return new SyncPromise((resolve, reject) => {\n      let counter = buffer.length;\n\n      if (!counter) {\n        return resolve(true);\n      }\n\n      // wait for `timeout` ms and then resolve to `false` (if not cancelled first)\n      var capturedSetTimeout = setTimeout(() => {\n        if (timeout && timeout > 0) {\n          resolve(false);\n        }\n      }, timeout);\n\n      // if all promises resolve in time, cancel the timer and resolve to `true`\n      buffer.forEach(item => {\n        void resolvedSyncPromise(item).then(() => {\n                    if (!--counter) {\n            clearTimeout(capturedSetTimeout);\n            resolve(true);\n          }\n        }, reject);\n      });\n    });\n  }\n\n  return {\n    $: buffer,\n    add,\n    drain,\n  };\n}\n\nexport { makePromiseBuffer };\n//# sourceMappingURL=promisebuffer.js.map\n","/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\nfunction parseUrl(url)\n\n {\n  if (!url) {\n    return {};\n  }\n\n  var match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  }\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  var query = match[6] || '';\n  var fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\n\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\nfunction stripUrlQueryAndFragment(urlPath) {\n    return urlPath.split(/[\\?#]/, 1)[0];\n}\n\n/**\n * Returns number of URL segments of a passed string URL.\n */\nfunction getNumberOfUrlSegments(url) {\n  // split at '/' or at '\\/' to split regex urls correctly\n  return url.split(/\\\\?\\//).filter(s => s.length > 0 && s !== ',').length;\n}\n\nexport { getNumberOfUrlSegments, parseUrl, stripUrlQueryAndFragment };\n//# sourceMappingURL=url.js.map\n","// Note: Ideally the `SeverityLevel` type would be derived from `validSeverityLevels`, but that would mean either\n//\n// a) moving `validSeverityLevels` to `@sentry/types`,\n// b) moving the`SeverityLevel` type here, or\n// c) importing `validSeverityLevels` from here into `@sentry/types`.\n//\n// Option A would make `@sentry/types` a runtime dependency of `@sentry/utils` (not good), and options B and C would\n// create a circular dependency between `@sentry/types` and `@sentry/utils` (also not good). So a TODO accompanying the\n// type, reminding anyone who changes it to change this list also, will have to do.\n\nvar validSeverityLevels = ['fatal', 'error', 'warning', 'log', 'info', 'debug'];\n\n/**\n * Converts a string-based level into a member of the deprecated {@link Severity} enum.\n *\n * @deprecated `severityFromString` is deprecated. Please use `severityLevelFromString` instead.\n *\n * @param level String representation of Severity\n * @returns Severity\n */\nfunction severityFromString(level) {\n  return severityLevelFromString(level) ;\n}\n\n/**\n * Converts a string-based level into a `SeverityLevel`, normalizing it along the way.\n *\n * @param level String representation of desired `SeverityLevel`.\n * @returns The `SeverityLevel` corresponding to the given string, or 'log' if the string isn't a valid level.\n */\nfunction severityLevelFromString(level) {\n  return (level === 'warn' ? 'warning' : validSeverityLevels.includes(level) ? level : 'log') ;\n}\n\nexport { severityFromString, severityLevelFromString, validSeverityLevels };\n//# sourceMappingURL=severity.js.map\n","import { getGlobalObject } from './global.js';\nimport { dynamicRequire, isNodeEnv } from './node.js';\n\n/**\n * An object that can return the current timestamp in seconds since the UNIX epoch.\n */\n\n/**\n * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n *\n * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n */\nvar dateTimestampSource = {\n  nowSeconds: () => Date.now() / 1000,\n};\n\n/**\n * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n * for accessing a high-resolution monotonic clock.\n */\n\n/**\n * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n * support the API.\n *\n * Wrapping the native API works around differences in behavior from different browsers.\n */\nfunction getBrowserPerformance() {\n  const { performance } = getGlobalObject();\n  if (!performance || !performance.now) {\n    return undefined;\n  }\n\n  // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n  //\n  // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n  // performance.now() gives a date arbitrarily in the past.\n  //\n  // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n  // undefined.\n  //\n  // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n  // interact with data coming out of performance entries.\n  //\n  // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n  // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n  // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n  // observed skews that can be as long as days, weeks or months.\n  //\n  // See https://github.com/getsentry/sentry-javascript/issues/2590.\n  //\n  // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n  // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n  // transactions of long-lived web pages.\n  var timeOrigin = Date.now() - performance.now();\n\n  return {\n    now: () => performance.now(),\n    timeOrigin,\n  };\n}\n\n/**\n * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n * implement the API.\n */\nfunction getNodePerformance() {\n  try {\n    var perfHooks = dynamicRequire(module, 'perf_hooks') ;\n    return perfHooks.performance;\n  } catch (_) {\n    return undefined;\n  }\n}\n\n/**\n * The Performance API implementation for the current platform, if available.\n */\nvar platformPerformance = isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n\nvar timestampSource =\n  platformPerformance === undefined\n    ? dateTimestampSource\n    : {\n        nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000,\n      };\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n */\nvar dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n * availability of the Performance API.\n *\n * See `usingPerformanceAPI` to test whether the Performance API is used.\n *\n * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n * skew can grow to arbitrary amounts like days, weeks or months.\n * See https://github.com/getsentry/sentry-javascript/issues/2590.\n */\nvar timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n// Re-exported with an old name for backwards-compatibility.\nvar timestampWithMs = timestampInSeconds;\n\n/**\n * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n */\nvar usingPerformanceAPI = platformPerformance !== undefined;\n\n/**\n * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n */\nlet _browserPerformanceTimeOriginMode;\n\n/**\n * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n * performance API is available.\n */\nvar browserPerformanceTimeOrigin = (() => {\n  // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n  // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n  // data as reliable if they are within a reasonable threshold of the current time.\n\n  const { performance } = getGlobalObject();\n  if (!performance || !performance.now) {\n    _browserPerformanceTimeOriginMode = 'none';\n    return undefined;\n  }\n\n  var threshold = 3600 * 1000;\n  var performanceNow = performance.now();\n  var dateNow = Date.now();\n\n  // if timeOrigin isn't available set delta to threshold so it isn't used\n  var timeOriginDelta = performance.timeOrigin\n    ? Math.abs(performance.timeOrigin + performanceNow - dateNow)\n    : threshold;\n  var timeOriginIsReliable = timeOriginDelta < threshold;\n\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n  // Date API.\n    var navigationStart = performance.timing && performance.timing.navigationStart;\n  var hasNavigationStart = typeof navigationStart === 'number';\n  // if navigationStart isn't available set delta to threshold so it isn't used\n  var navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n  var navigationStartIsReliable = navigationStartDelta < threshold;\n\n  if (timeOriginIsReliable || navigationStartIsReliable) {\n    // Use the more reliable time origin\n    if (timeOriginDelta <= navigationStartDelta) {\n      _browserPerformanceTimeOriginMode = 'timeOrigin';\n      return performance.timeOrigin;\n    } else {\n      _browserPerformanceTimeOriginMode = 'navigationStart';\n      return navigationStart;\n    }\n  }\n\n  // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n  _browserPerformanceTimeOriginMode = 'dateNow';\n  return dateNow;\n})();\n\nexport { _browserPerformanceTimeOriginMode, browserPerformanceTimeOrigin, dateTimestampInSeconds, timestampInSeconds, timestampWithMs, usingPerformanceAPI };\n//# sourceMappingURL=time.js.map\n","var TRACEPARENT_REGEXP = new RegExp(\n  '^[ \\\\t]*' + // whitespace\n    '([0-9a-f]{32})?' + // trace_id\n    '-?([0-9a-f]{16})?' + // span_id\n    '-?([01])?' + // sampled\n    '[ \\\\t]*$', // whitespace\n);\n\n/**\n * Extract transaction context data from a `sentry-trace` header.\n *\n * @param traceparent Traceparent string\n *\n * @returns Object containing data from the header, or undefined if traceparent string is malformed\n */\nfunction extractTraceparentData(traceparent) {\n  var matches = traceparent.match(TRACEPARENT_REGEXP);\n\n  if (!traceparent || !matches) {\n    // empty string or no matches is invalid traceparent data\n    return undefined;\n  }\n\n  let parentSampled;\n  if (matches[3] === '1') {\n    parentSampled = true;\n  } else if (matches[3] === '0') {\n    parentSampled = false;\n  }\n\n  return {\n    traceId: matches[1],\n    parentSampled,\n    parentSpanId: matches[2],\n  };\n}\n\nexport { TRACEPARENT_REGEXP, extractTraceparentData };\n//# sourceMappingURL=tracing.js.map\n","import { dropUndefinedKeys } from './object.js';\n\n/**\n * Creates an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction createEnvelope(headers, items = []) {\n  return [headers, items] ;\n}\n\n/**\n * Add an item to an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction addItemToEnvelope(envelope, newItem) {\n  const [headers, items] = envelope;\n  return [headers, [...items, newItem]] ;\n}\n\n/**\n * Convenience function to loop through the items and item types of an envelope.\n * (This function was mostly created because working with envelope types is painful at the moment)\n */\nfunction forEachEnvelopeItem(\n  envelope,\n  callback,\n) {\n  var envelopeItems = envelope[1];\n  envelopeItems.forEach((envelopeItem) => {\n    var envelopeItemType = envelopeItem[0].type;\n    callback(envelopeItem, envelopeItemType);\n  });\n}\n\nfunction encodeUTF8(input, textEncoder) {\n  var utf8 = textEncoder || new TextEncoder();\n  return utf8.encode(input);\n}\n\n/**\n * Serializes an envelope.\n */\nfunction serializeEnvelope(envelope, textEncoder) {\n  const [envHeaders, items] = envelope;\n\n  // Initially we construct our envelope as a string and only convert to binary chunks if we encounter binary data\n  let parts = JSON.stringify(envHeaders);\n\n  function append(next) {\n    if (typeof parts === 'string') {\n      parts = typeof next === 'string' ? parts + next : [encodeUTF8(parts, textEncoder), next];\n    } else {\n      parts.push(typeof next === 'string' ? encodeUTF8(next, textEncoder) : next);\n    }\n  }\n\n  for (var item of items) {\n    const [itemHeaders, payload] = item ;\n    append(`\\n${JSON.stringify(itemHeaders)}\\n`);\n    append(typeof payload === 'string' || payload instanceof Uint8Array ? payload : JSON.stringify(payload));\n  }\n\n  return typeof parts === 'string' ? parts : concatBuffers(parts);\n}\n\nfunction concatBuffers(buffers) {\n  var totalLength = buffers.reduce((acc, buf) => acc + buf.length, 0);\n\n  var merged = new Uint8Array(totalLength);\n  let offset = 0;\n  for (var buffer of buffers) {\n    merged.set(buffer, offset);\n    offset += buffer.length;\n  }\n\n  return merged;\n}\n\n/**\n * Creates attachment envelope items\n */\nfunction createAttachmentEnvelopeItem(\n  attachment,\n  textEncoder,\n) {\n  var buffer = typeof attachment.data === 'string' ? encodeUTF8(attachment.data, textEncoder) : attachment.data;\n\n  return [\n    dropUndefinedKeys({\n      type: 'attachment',\n      length: buffer.length,\n      filename: attachment.filename,\n      content_type: attachment.contentType,\n      attachment_type: attachment.attachmentType,\n    }),\n    buffer,\n  ];\n}\n\nvar ITEM_TYPE_TO_DATA_CATEGORY_MAP = {\n  session: 'session',\n  sessions: 'session',\n  attachment: 'attachment',\n  transaction: 'transaction',\n  event: 'error',\n  client_report: 'internal',\n  user_report: 'default',\n};\n\n/**\n * Maps the type of an envelope item to a data category.\n */\nfunction envelopeItemTypeToDataCategory(type) {\n  return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type];\n}\n\nexport { addItemToEnvelope, createAttachmentEnvelopeItem, createEnvelope, envelopeItemTypeToDataCategory, forEachEnvelopeItem, serializeEnvelope };\n//# sourceMappingURL=envelope.js.map\n","import { createEnvelope } from './envelope.js';\nimport { dateTimestampInSeconds } from './time.js';\n\n/**\n * Creates client report envelope\n * @param discarded_events An array of discard events\n * @param dsn A DSN that can be set on the header. Optional.\n */\nfunction createClientReportEnvelope(\n  discarded_events,\n  dsn,\n  timestamp,\n) {\n  var clientReportItem = [\n    { type: 'client_report' },\n    {\n      timestamp: timestamp || dateTimestampInSeconds(),\n      discarded_events,\n    },\n  ];\n  return createEnvelope(dsn ? { dsn } : {}, [clientReportItem]);\n}\n\nexport { createClientReportEnvelope };\n//# sourceMappingURL=clientreport.js.map\n","// Intentionally keeping the key broad, as we don't know for sure what rate limit headers get returned from backend\n\nvar DEFAULT_RETRY_AFTER = 60 * 1000; // 60 seconds\n\n/**\n * Extracts Retry-After value from the request header or returns default value\n * @param header string representation of 'Retry-After' header\n * @param now current unix timestamp\n *\n */\nfunction parseRetryAfterHeader(header, now = Date.now()) {\n  var headerDelay = parseInt(`${header}`, 10);\n  if (!isNaN(headerDelay)) {\n    return headerDelay * 1000;\n  }\n\n  var headerDate = Date.parse(`${header}`);\n  if (!isNaN(headerDate)) {\n    return headerDate - now;\n  }\n\n  return DEFAULT_RETRY_AFTER;\n}\n\n/**\n * Gets the time that given category is disabled until for rate limiting\n */\nfunction disabledUntil(limits, category) {\n  return limits[category] || limits.all || 0;\n}\n\n/**\n * Checks if a category is rate limited\n */\nfunction isRateLimited(limits, category, now = Date.now()) {\n  return disabledUntil(limits, category) > now;\n}\n\n/**\n * Update ratelimits from incoming headers.\n * Returns true if headers contains a non-empty rate limiting header.\n */\nfunction updateRateLimits(\n  limits,\n  { statusCode, headers },\n  now = Date.now(),\n) {\n  var updatedRateLimits = {\n    ...limits,\n  };\n\n  // \"The name is case-insensitive.\"\n  // https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n  var rateLimitHeader = headers && headers['x-sentry-rate-limits'];\n  var retryAfterHeader = headers && headers['retry-after'];\n\n  if (rateLimitHeader) {\n    /**\n     * rate limit headers are of the form\n     *     <header>,<header>,..\n     * where each <header> is of the form\n     *     <retry_after>: <categories>: <scope>: <reason_code>\n     * where\n     *     <retry_after> is a delay in seconds\n     *     <categories> is the event type(s) (error, transaction, etc) being rate limited and is of the form\n     *         <category>;<category>;...\n     *     <scope> is what's being limited (org, project, or key) - ignored by SDK\n     *     <reason_code> is an arbitrary string like \"org_quota\" - ignored by SDK\n     */\n    for (var limit of rateLimitHeader.trim().split(',')) {\n      const [retryAfter, categories] = limit.split(':', 2);\n      var headerDelay = parseInt(retryAfter, 10);\n      var delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1000; // 60sec default\n      if (!categories) {\n        updatedRateLimits.all = now + delay;\n      } else {\n        for (var category of categories.split(';')) {\n          updatedRateLimits[category] = now + delay;\n        }\n      }\n    }\n  } else if (retryAfterHeader) {\n    updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);\n  } else if (statusCode === 429) {\n    updatedRateLimits.all = now + 60 * 1000;\n  }\n\n  return updatedRateLimits;\n}\n\nexport { DEFAULT_RETRY_AFTER, disabledUntil, isRateLimited, parseRetryAfterHeader, updateRateLimits };\n//# sourceMappingURL=ratelimit.js.map\n","import { isString } from './is.js';\nimport { logger } from './logger.js';\n\nvar BAGGAGE_HEADER_NAME = 'baggage';\n\nvar SENTRY_BAGGAGE_KEY_PREFIX = 'sentry-';\n\nvar SENTRY_BAGGAGE_KEY_PREFIX_REGEX = /^sentry-/;\n\n/**\n * Max length of a serialized baggage string\n *\n * https://www.w3.org/TR/baggage/#limits\n */\nvar MAX_BAGGAGE_STRING_LENGTH = 8192;\n\n/**\n * Takes a baggage header and turns it into Dynamic Sampling Context, by extracting all the \"sentry-\" prefixed values\n * from it.\n *\n * @param baggageHeader A very bread definition of a baggage header as it might appear in various frameworks.\n * @returns The Dynamic Sampling Context that was found on `baggageHeader`, if there was any, `undefined` otherwise.\n */\nfunction baggageHeaderToDynamicSamplingContext(\n  // Very liberal definition of what any incoming header might look like\n  baggageHeader,\n) {\n  if (!isString(baggageHeader) && !Array.isArray(baggageHeader)) {\n    return undefined;\n  }\n\n  // Intermediary object to store baggage key value pairs of incoming baggage headers on.\n  // It is later used to read Sentry-DSC-values from.\n  let baggageObject = {};\n\n  if (Array.isArray(baggageHeader)) {\n    // Combine all baggage headers into one object containing the baggage values so we can later read the Sentry-DSC-values from it\n    baggageObject = baggageHeader.reduce((acc, curr) => {\n      var currBaggageObject = baggageHeaderToObject(curr);\n      return {\n        ...acc,\n        ...currBaggageObject,\n      };\n    }, {});\n  } else {\n    // Return undefined if baggage header is an empty string (technically an empty baggage header is not spec conform but\n    // this is how we choose to handle it)\n    if (!baggageHeader) {\n      return undefined;\n    }\n\n    baggageObject = baggageHeaderToObject(baggageHeader);\n  }\n\n  // Read all \"sentry-\" prefixed values out of the baggage object and put it onto a dynamic sampling context object.\n  var dynamicSamplingContext = Object.entries(baggageObject).reduce((acc, [key, value]) => {\n    if (key.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)) {\n      var nonPrefixedKey = key.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);\n      acc[nonPrefixedKey] = value;\n    }\n    return acc;\n  }, {});\n\n  // Only return a dynamic sampling context object if there are keys in it.\n  // A keyless object means there were no sentry values on the header, which means that there is no DSC.\n  if (Object.keys(dynamicSamplingContext).length > 0) {\n    return dynamicSamplingContext ;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Turns a Dynamic Sampling Object into a baggage header by prefixing all the keys on the object with \"sentry-\".\n *\n * @param dynamicSamplingContext The Dynamic Sampling Context to turn into a header. For convenience and compatibility\n * with the `getDynamicSamplingContext` method on the Transaction class ,this argument can also be `undefined`. If it is\n * `undefined` the function will return `undefined`.\n * @returns a baggage header, created from `dynamicSamplingContext`, or `undefined` either if `dynamicSamplingContext`\n * was `undefined`, or if `dynamicSamplingContext` didn't contain any values.\n */\nfunction dynamicSamplingContextToSentryBaggageHeader(\n  // this also takes undefined for convenience and bundle size in other places\n  dynamicSamplingContext,\n) {\n  // Prefix all DSC keys with \"sentry-\" and put them into a new object\n  var sentryPrefixedDSC = Object.entries(dynamicSamplingContext).reduce(\n    (acc, [dscKey, dscValue]) => {\n      if (dscValue) {\n        acc[`${SENTRY_BAGGAGE_KEY_PREFIX}${dscKey}`] = dscValue;\n      }\n      return acc;\n    },\n    {},\n  );\n\n  return objectToBaggageHeader(sentryPrefixedDSC);\n}\n\n/**\n * Will parse a baggage header, which is a simple key-value map, into a flat object.\n *\n * @param baggageHeader The baggage header to parse.\n * @returns a flat object containing all the key-value pairs from `baggageHeader`.\n */\nfunction baggageHeaderToObject(baggageHeader) {\n  return baggageHeader\n    .split(',')\n    .map(baggageEntry => baggageEntry.split('=').map(keyOrValue => decodeURIComponent(keyOrValue.trim())))\n    .reduce((acc, [key, value]) => {\n      acc[key] = value;\n      return acc;\n    }, {});\n}\n\n/**\n * Turns a flat object (key-value pairs) into a baggage header, which is also just key-value pairs.\n *\n * @param object The object to turn into a baggage header.\n * @returns a baggage header string, or `undefined` if the object didn't have any values, since an empty baggage header\n * is not spec compliant.\n */\nfunction objectToBaggageHeader(object) {\n  if (Object.keys(object).length === 0) {\n    // An empty baggage header is not spec compliant: We return undefined.\n    return undefined;\n  }\n\n  return Object.entries(object).reduce((baggageHeader, [objectKey, objectValue], currentIndex) => {\n    var baggageEntry = `${encodeURIComponent(objectKey)}=${encodeURIComponent(objectValue)}`;\n    var newBaggageHeader = currentIndex === 0 ? baggageEntry : `${baggageHeader},${baggageEntry}`;\n    if (newBaggageHeader.length > MAX_BAGGAGE_STRING_LENGTH) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `Not adding key: ${objectKey} with val: ${objectValue} to baggage header due to exceeding baggage size limits.`,\n        );\n      return baggageHeader;\n    } else {\n      return newBaggageHeader;\n    }\n  }, '');\n}\n\nexport { BAGGAGE_HEADER_NAME, MAX_BAGGAGE_STRING_LENGTH, SENTRY_BAGGAGE_KEY_PREFIX, SENTRY_BAGGAGE_KEY_PREFIX_REGEX, baggageHeaderToDynamicSamplingContext, dynamicSamplingContextToSentryBaggageHeader };\n//# sourceMappingURL=baggage.js.map\n","import { timestampInSeconds, uuid4, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Creates a new `Session` object by setting certain default parameters. If optional @param context\n * is passed, the passed properties are applied to the session object.\n *\n * @param context (optional) additional properties to be applied to the returned session object\n *\n * @returns a new `Session` object\n */\nfunction makeSession(context) {\n  // Both timestamp and started are in seconds since the UNIX epoch.\n  var startingTime = timestampInSeconds();\n\n  var session = {\n    sid: uuid4(),\n    init: true,\n    timestamp: startingTime,\n    started: startingTime,\n    duration: 0,\n    status: 'ok',\n    errors: 0,\n    ignoreDuration: false,\n    toJSON: () => sessionToJSON(session),\n  };\n\n  if (context) {\n    updateSession(session, context);\n  }\n\n  return session;\n}\n\n/**\n * Updates a session object with the properties passed in the context.\n *\n * Note that this function mutates the passed object and returns void.\n * (Had to do this instead of returning a new and updated session because closing and sending a session\n * makes an update to the session after it was passed to the sending logic.\n * @see BaseClient.captureSession )\n *\n * @param session the `Session` to update\n * @param context the `SessionContext` holding the properties that should be updated in @param session\n */\nfunction updateSession(session, context = {}) {\n  if (context.user) {\n    if (!session.ipAddress && context.user.ip_address) {\n      session.ipAddress = context.user.ip_address;\n    }\n\n    if (!session.did && !context.did) {\n      session.did = context.user.id || context.user.email || context.user.username;\n    }\n  }\n\n  session.timestamp = context.timestamp || timestampInSeconds();\n\n  if (context.ignoreDuration) {\n    session.ignoreDuration = context.ignoreDuration;\n  }\n  if (context.sid) {\n    // Good enough uuid validation. — Kamil\n    session.sid = context.sid.length === 32 ? context.sid : uuid4();\n  }\n  if (context.init !== undefined) {\n    session.init = context.init;\n  }\n  if (!session.did && context.did) {\n    session.did = `${context.did}`;\n  }\n  if (typeof context.started === 'number') {\n    session.started = context.started;\n  }\n  if (session.ignoreDuration) {\n    session.duration = undefined;\n  } else if (typeof context.duration === 'number') {\n    session.duration = context.duration;\n  } else {\n    var duration = session.timestamp - session.started;\n    session.duration = duration >= 0 ? duration : 0;\n  }\n  if (context.release) {\n    session.release = context.release;\n  }\n  if (context.environment) {\n    session.environment = context.environment;\n  }\n  if (!session.ipAddress && context.ipAddress) {\n    session.ipAddress = context.ipAddress;\n  }\n  if (!session.userAgent && context.userAgent) {\n    session.userAgent = context.userAgent;\n  }\n  if (typeof context.errors === 'number') {\n    session.errors = context.errors;\n  }\n  if (context.status) {\n    session.status = context.status;\n  }\n}\n\n/**\n * Closes a session by setting its status and updating the session object with it.\n * Internally calls `updateSession` to update the passed session object.\n *\n * Note that this function mutates the passed session (@see updateSession for explanation).\n *\n * @param session the `Session` object to be closed\n * @param status the `SessionStatus` with which the session was closed. If you don't pass a status,\n *               this function will keep the previously set status, unless it was `'ok'` in which case\n *               it is changed to `'exited'`.\n */\nfunction closeSession(session, status) {\n  let context = {};\n  if (status) {\n    context = { status };\n  } else if (session.status === 'ok') {\n    context = { status: 'exited' };\n  }\n\n  updateSession(session, context);\n}\n\n/**\n * Serializes a passed session object to a JSON object with a slightly different structure.\n * This is necessary because the Sentry backend requires a slightly different schema of a session\n * than the one the JS SDKs use internally.\n *\n * @param session the session to be converted\n *\n * @returns a JSON object of the passed session\n */\nfunction sessionToJSON(session) {\n  return dropUndefinedKeys({\n    sid: `${session.sid}`,\n    init: session.init,\n    // Make sure that sec is converted to ms for date constructor\n    started: new Date(session.started * 1000).toISOString(),\n    timestamp: new Date(session.timestamp * 1000).toISOString(),\n    status: session.status,\n    errors: session.errors,\n    did: typeof session.did === 'number' || typeof session.did === 'string' ? `${session.did}` : undefined,\n    duration: session.duration,\n    attrs: {\n      release: session.release,\n      environment: session.environment,\n      ip_address: session.ipAddress,\n      user_agent: session.userAgent,\n    },\n  });\n}\n\nexport { closeSession, makeSession, updateSession };\n//# sourceMappingURL=session.js.map\n","import { isPlainObject, dateTimestampInSeconds, getGlobalSingleton, SyncPromise, logger, isThenable, arrayify } from '@sentry/utils';\nimport { updateSession } from './session.js';\n\n/**\n * Absolute maximum number of breadcrumbs added to an event.\n * The `maxBreadcrumbs` option cannot be higher than this value.\n */\nvar MAX_BREADCRUMBS = 100;\n\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\nclass Scope  {\n  /** Flag if notifying is happening. */\n  \n\n  /** Callback for client to receive scope changes. */\n  \n\n  /** Callback list that will be called after {@link applyToEvent}. */\n  \n\n  /** Array of breadcrumbs. */\n  \n\n  /** User */\n  \n\n  /** Tags */\n  \n\n  /** Extra */\n  \n\n  /** Contexts */\n  \n\n  /** Attachments */\n  \n\n  /**\n   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get\n   * sent to Sentry\n   */\n  \n\n  /** Fingerprint */\n  \n\n  /** Severity */\n    \n\n  /** Transaction Name */\n  \n\n  /** Span */\n  \n\n  /** Session */\n  \n\n  /** Request Mode Session Status */\n  \n\n   constructor() {\n    this._notifyingListeners = false;\n    this._scopeListeners = [];\n    this._eventProcessors = [];\n    this._breadcrumbs = [];\n    this._attachments = [];\n    this._user = {};\n    this._tags = {};\n    this._extra = {};\n    this._contexts = {};\n    this._sdkProcessingMetadata = {};\n  }\n\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n   static clone(scope) {\n    var newScope = new Scope();\n    if (scope) {\n      newScope._breadcrumbs = [...scope._breadcrumbs];\n      newScope._tags = { ...scope._tags };\n      newScope._extra = { ...scope._extra };\n      newScope._contexts = { ...scope._contexts };\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._session = scope._session;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = [...scope._eventProcessors];\n      newScope._requestSession = scope._requestSession;\n      newScope._attachments = [...scope._attachments];\n    }\n    return newScope;\n  }\n\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n   addScopeListener(callback) {\n    this._scopeListeners.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addEventProcessor(callback) {\n    this._eventProcessors.push(callback);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    this._user = user || {};\n    if (this._session) {\n      updateSession(this._session, { user });\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getUser() {\n    return this._user;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getRequestSession() {\n    return this._requestSession;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setRequestSession(requestSession) {\n    this._requestSession = requestSession;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    this._tags = {\n      ...this._tags,\n      ...tags,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this._tags = { ...this._tags, [key]: value };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    this._extra = {\n      ...this._extra,\n      ...extras,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    this._extra = { ...this._extra, [key]: extra };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setFingerprint(fingerprint) {\n    this._fingerprint = fingerprint;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setLevel(\n        level,\n  ) {\n    this._level = level;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTransactionName(name) {\n    this._transactionName = name;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n            delete this._contexts[key];\n    } else {\n      this._contexts = { ...this._contexts, [key]: context };\n    }\n\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSpan(span) {\n    this._span = span;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSpan() {\n    return this._span;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransaction() {\n    // Often, this span (if it exists at all) will be a transaction, but it's not guaranteed to be. Regardless, it will\n    // have a pointer to the currently-active transaction.\n    var span = this.getSpan();\n    return span && span.transaction;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSession(session) {\n    if (!session) {\n      delete this._session;\n    } else {\n      this._session = session;\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSession() {\n    return this._session;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   update(captureContext) {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      var updatedScope = (captureContext )(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = { ...this._tags, ...captureContext._tags };\n      this._extra = { ...this._extra, ...captureContext._extra };\n      this._contexts = { ...this._contexts, ...captureContext._contexts };\n      if (captureContext._user && Object.keys(captureContext._user).length) {\n        this._user = captureContext._user;\n      }\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n      if (captureContext._requestSession) {\n        this._requestSession = captureContext._requestSession;\n      }\n    } else if (isPlainObject(captureContext)) {\n            captureContext = captureContext ;\n      this._tags = { ...this._tags, ...captureContext.tags };\n      this._extra = { ...this._extra, ...captureContext.extra };\n      this._contexts = { ...this._contexts, ...captureContext.contexts };\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n      if (captureContext.requestSession) {\n        this._requestSession = captureContext.requestSession;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clear() {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._requestSession = undefined;\n    this._span = undefined;\n    this._session = undefined;\n    this._notifyScopeListeners();\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, maxBreadcrumbs) {\n    var maxCrumbs = typeof maxBreadcrumbs === 'number' ? Math.min(maxBreadcrumbs, MAX_BREADCRUMBS) : MAX_BREADCRUMBS;\n\n    // No data has been changed, so don't notify scope listeners\n    if (maxCrumbs <= 0) {\n      return this;\n    }\n\n    var mergedBreadcrumb = {\n      timestamp: dateTimestampInSeconds(),\n      ...breadcrumb,\n    };\n    this._breadcrumbs = [...this._breadcrumbs, mergedBreadcrumb].slice(-maxCrumbs);\n    this._notifyScopeListeners();\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearBreadcrumbs() {\n    this._breadcrumbs = [];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addAttachment(attachment) {\n    this._attachments.push(attachment);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getAttachments() {\n    return this._attachments;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearAttachments() {\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * Applies data from the scope to the event and runs all event processors on it.\n   *\n   * @param event Event\n   * @param hint Object containing additional information about the original exception, for use by the event processors.\n   * @hidden\n   */\n   applyToEvent(event, hint = {}) {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = { ...this._extra, ...event.extra };\n    }\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = { ...this._tags, ...event.tags };\n    }\n    if (this._user && Object.keys(this._user).length) {\n      event.user = { ...this._user, ...event.user };\n    }\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = { ...this._contexts, ...event.contexts };\n    }\n    if (this._level) {\n      event.level = this._level;\n    }\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    }\n\n    // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relies on that.\n    if (this._span) {\n      event.contexts = { trace: this._span.getTraceContext(), ...event.contexts };\n      var transactionName = this._span.transaction && this._span.transaction.name;\n      if (transactionName) {\n        event.tags = { transaction: transactionName, ...event.tags };\n      }\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = [...(event.breadcrumbs || []), ...this._breadcrumbs];\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n\n    event.sdkProcessingMetadata = { ...event.sdkProcessingMetadata, ...this._sdkProcessingMetadata };\n\n    return this._notifyEventProcessors([...getGlobalEventProcessors(), ...this._eventProcessors], event, hint);\n  }\n\n  /**\n   * Add data which will be accessible during event processing but won't get sent to Sentry\n   */\n   setSDKProcessingMetadata(newData) {\n    this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...newData };\n\n    return this;\n  }\n\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n   _notifyEventProcessors(\n    processors,\n    event,\n    hint,\n    index = 0,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      var processor = processors[index];\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        var result = processor({ ...event }, hint) ;\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          processor.id &&\n          result === null &&\n          logger.log(`Event processor \"${processor.id}\" dropped event`);\n\n        if (isThenable(result)) {\n          void result\n            .then(final => this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve))\n            .then(null, reject);\n        } else {\n          void this._notifyEventProcessors(processors, result, hint, index + 1)\n            .then(resolve)\n            .then(null, reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will be called on every set call.\n   */\n   _notifyScopeListeners() {\n    // We need this check for this._notifyingListeners to be able to work on scope during updates\n    // If this check is not here we'll produce endless recursion when something is done with the scope\n    // during the callback.\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      this._scopeListeners.forEach(callback => {\n        callback(this);\n      });\n      this._notifyingListeners = false;\n    }\n  }\n\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n   _applyFingerprint(event) {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint ? arrayify(event.fingerprint) : [];\n\n    // If we have something on the scope, then merge it with event\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    }\n\n    // If we have no data at all, remove empty array default\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  }\n}\n\n/**\n * Returns the global event processors.\n */\nfunction getGlobalEventProcessors() {\n  return getGlobalSingleton('globalEventProcessors', () => []);\n}\n\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\nfunction addGlobalEventProcessor(callback) {\n  getGlobalEventProcessors().push(callback);\n}\n\nexport { Scope, addGlobalEventProcessor };\n//# sourceMappingURL=scope.js.map\n","import { uuid4, dateTimestampInSeconds, consoleSandbox, logger, getGlobalObject, getGlobalSingleton, isNodeEnv } from '@sentry/utils';\nimport { Scope } from './scope.js';\nimport { closeSession, makeSession, updateSession } from './session.js';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nvar API_VERSION = 4;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nvar DEFAULT_BREADCRUMBS = 100;\n\n/**\n * A layer in the process stack.\n * @hidden\n */\n\n/**\n * @inheritDoc\n */\nclass Hub  {\n  /** Is a {@link Layer}[] containing the client and scope */\n    __init() {this._stack = [{}];}\n\n  /** Contains the last event id of a captured event.  */\n  \n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n   constructor(client, scope = new Scope(),   _version = API_VERSION) {;this._version = _version;Hub.prototype.__init.call(this);\n    this.getStackTop().scope = scope;\n    if (client) {\n      this.bindClient(client);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isOlderThan(version) {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   bindClient(client) {\n    var top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   pushScope() {\n    // We want to clone the content of prev scope\n    var scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   popScope() {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   withScope(callback) {\n    var scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getClient() {\n    return this.getStackTop().client ;\n  }\n\n  /** Returns the scope of the top stack. */\n   getScope() {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n   getStack() {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n   getStackTop() {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n     captureException(exception, hint) {\n    var eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    var syntheticException = new Error('Sentry syntheticException');\n    this._withClient((client, scope) => {\n      client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n        level,\n    hint,\n  ) {\n    var eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    var syntheticException = new Error(message);\n    this._withClient((client, scope) => {\n      client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint) {\n    var eventId = hint && hint.event_id ? hint.event_id : uuid4();\n    if (event.type !== 'transaction') {\n      this._lastEventId = eventId;\n    }\n\n    this._withClient((client, scope) => {\n      client.captureEvent(event, { ...hint, event_id: eventId }, scope);\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   lastEventId() {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, hint) {\n    const { scope, client } = this.getStackTop();\n\n    if (!scope || !client) return;\n\n        const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    var timestamp = dateTimestampInSeconds();\n    var mergedBreadcrumb = { timestamp, ...breadcrumb };\n    var finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    scope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    var scope = this.getScope();\n    if (scope) scope.setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    var scope = this.getScope();\n    if (scope) scope.setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    var scope = this.getScope();\n    if (scope) scope.setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    var scope = this.getScope();\n    if (scope) scope.setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    var scope = this.getScope();\n    if (scope) scope.setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n     setContext(name, context) {\n    var scope = this.getScope();\n    if (scope) scope.setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   configureScope(callback) {\n    const { scope, client } = this.getStackTop();\n    if (scope && client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   run(callback) {\n    var oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    var client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startTransaction(context, customSamplingContext) {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   traceHeaders() {\n    return this._callExtensionMethod('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(endSession = false) {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   endSession() {\n    var layer = this.getStackTop();\n    var scope = layer && layer.scope;\n    var session = scope && scope.getSession();\n    if (session) {\n      closeSession(session);\n    }\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    if (scope) {\n      scope.setSession();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startSession(context) {\n    const { scope, client } = this.getStackTop();\n    const { release, environment } = (client && client.getOptions()) || {};\n\n    // Will fetch userAgent if called from browser sdk\n    var global = getGlobalObject();\n    const { userAgent } = global.navigator || {};\n\n    var session = makeSession({\n      release,\n      environment,\n      ...(scope && { user: scope.getUser() }),\n      ...(userAgent && { userAgent }),\n      ...context,\n    });\n\n    if (scope) {\n      // End existing session if there's one\n      var currentSession = scope.getSession && scope.getSession();\n      if (currentSession && currentSession.status === 'ok') {\n        updateSession(currentSession, { status: 'exited' });\n      }\n      this.endSession();\n\n      // Afterwards we set the new session on the scope\n      scope.setSession(session);\n    }\n\n    return session;\n  }\n\n  /**\n   * Returns if default PII should be sent to Sentry and propagated in ourgoing requests\n   * when Tracing is used.\n   */\n   shouldSendDefaultPii() {\n    var client = this.getClient();\n    var options = client && client.getOptions();\n    return Boolean(options && options.sendDefaultPii);\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n   _sendSessionUpdate() {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    var session = scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n   _withClient(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(client, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n     _callExtensionMethod(method, ...args) {\n    var carrier = getMainCarrier();\n    var sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/**\n * Returns the global shim registry.\n *\n * FIXME: This function is problematic, because despite always returning a valid Carrier,\n * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check\n * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.\n **/\nfunction getMainCarrier() {\n  var carrier = getGlobalObject();\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return carrier;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nfunction makeMain(hub) {\n  var registry = getMainCarrier();\n  var oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nfunction getCurrentHub() {\n  // Get main carrier (global for every environment)\n  var registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry) {\n  try {\n    var sentry = getMainCarrier().__SENTRY__;\n    var activeDomain = sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      var registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier) {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nfunction getHubFromCarrier(carrier) {\n  return getGlobalSingleton('hub', () => new Hub(), carrier);\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nfunction setHubOnCarrier(carrier, hub) {\n  if (!carrier) return false;\n  var __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});\n  __SENTRY__.hub = hub;\n  return true;\n}\n\nexport { API_VERSION, Hub, getCurrentHub, getHubFromCarrier, getMainCarrier, makeMain, setHubOnCarrier };\n//# sourceMappingURL=hub.js.map\n","import { getCurrentHub } from './hub.js';\n\n// Note: All functions in this file are typed with a return value of `ReturnType<Hub[HUB_FUNCTION]>`,\n// where HUB_FUNCTION is some method on the Hub class.\n//\n// This is done to make sure the top level SDK methods stay in sync with the hub methods.\n// Although every method here has an explicit return type, some of them (that map to void returns) do not\n// contain `return` keywords. This is done to save on bundle size, as `return` is not minifiable.\n\n/**\n * Captures an exception event and sends it to Sentry.\n *\n * @param exception An exception-like object.\n * @param captureContext Additional scope data to apply to exception event.\n * @returns The generated eventId.\n */\nfunction captureException(exception, captureContext) {\n  return getCurrentHub().captureException(exception, { captureContext });\n}\n\n/**\n * Captures a message event and sends it to Sentry.\n *\n * @param message The message to send to Sentry.\n * @param Severity Define the level of the message.\n * @returns The generated eventId.\n */\nfunction captureMessage(\n  message,\n    captureContext,\n) {\n  // This is necessary to provide explicit scopes upgrade, without changing the original\n  // arity of the `captureMessage(message, level)` method.\n  var level = typeof captureContext === 'string' ? captureContext : undefined;\n  var context = typeof captureContext !== 'string' ? { captureContext } : undefined;\n  return getCurrentHub().captureMessage(message, level, context);\n}\n\n/**\n * Captures a manually created event and sends it to Sentry.\n *\n * @param event The event to send to Sentry.\n * @returns The generated eventId.\n */\nfunction captureEvent(event, hint) {\n  return getCurrentHub().captureEvent(event, hint);\n}\n\n/**\n * Callback to set context information onto the scope.\n * @param callback Callback function that receives Scope.\n */\nfunction configureScope(callback) {\n  getCurrentHub().configureScope(callback);\n}\n\n/**\n * Records a new breadcrumb which will be attached to future events.\n *\n * Breadcrumbs will be added to subsequent events to provide more context on\n * user's actions prior to an error or crash.\n *\n * @param breadcrumb The breadcrumb to record.\n */\nfunction addBreadcrumb(breadcrumb) {\n  getCurrentHub().addBreadcrumb(breadcrumb);\n}\n\n/**\n * Sets context data with the given name.\n * @param name of the context\n * @param context Any kind of data. This data will be normalized.\n */\nfunction setContext(name, context) {\n  getCurrentHub().setContext(name, context);\n}\n\n/**\n * Set an object that will be merged sent as extra data with the event.\n * @param extras Extras object to merge into current context.\n */\nfunction setExtras(extras) {\n  getCurrentHub().setExtras(extras);\n}\n\n/**\n * Set key:value that will be sent as extra data with the event.\n * @param key String of extra\n * @param extra Any kind of data. This data will be normalized.\n */\nfunction setExtra(key, extra) {\n  getCurrentHub().setExtra(key, extra);\n}\n\n/**\n * Set an object that will be merged sent as tags data with the event.\n * @param tags Tags context object to merge into current context.\n */\nfunction setTags(tags) {\n  getCurrentHub().setTags(tags);\n}\n\n/**\n * Set key:value that will be sent as tags data with the event.\n *\n * Can also be used to unset a tag, by passing `undefined`.\n *\n * @param key String key of tag\n * @param value Value of tag\n */\nfunction setTag(key, value) {\n  getCurrentHub().setTag(key, value);\n}\n\n/**\n * Updates user context information for future events.\n *\n * @param user User context object to be set in the current context. Pass `null` to unset the user.\n */\nfunction setUser(user) {\n  getCurrentHub().setUser(user);\n}\n\n/**\n * Creates a new scope with and executes the given operation within.\n * The scope is automatically removed once the operation\n * finishes or throws.\n *\n * This is essentially a convenience function for:\n *\n *     pushScope();\n *     callback();\n *     popScope();\n *\n * @param callback that will be enclosed into push/popScope.\n */\nfunction withScope(callback) {\n  getCurrentHub().withScope(callback);\n}\n\n/**\n * Starts a new `Transaction` and returns it. This is the entry point to manual tracing instrumentation.\n *\n * A tree structure can be built by adding child spans to the transaction, and child spans to other spans. To start a\n * new child span within the transaction or any span, call the respective `.startChild()` method.\n *\n * Every child span must be finished before the transaction is finished, otherwise the unfinished spans are discarded.\n *\n * The transaction must be finished with a call to its `.finish()` method, at which point the transaction with all its\n * finished child spans will be sent to Sentry.\n *\n * NOTE: This function should only be used for *manual* instrumentation. Auto-instrumentation should call\n * `startTransaction` directly on the hub.\n *\n * @param context Properties of the new `Transaction`.\n * @param customSamplingContext Information given to the transaction sampling function (along with context-dependent\n * default values). See {@link Options.tracesSampler}.\n *\n * @returns The transaction which was just started\n */\nfunction startTransaction(\n  context,\n  customSamplingContext,\n) {\n  return getCurrentHub().startTransaction({ ...context }, customSamplingContext);\n}\n\nexport { addBreadcrumb, captureEvent, captureException, captureMessage, configureScope, setContext, setExtra, setExtras, setTag, setTags, setUser, startTransaction, withScope };\n//# sourceMappingURL=exports.js.map\n","import { urlEncode, makeDsn, dsnToString } from '@sentry/utils';\n\nvar SENTRY_API_VERSION = '7';\n\n/** Returns the prefix to construct Sentry ingestion API endpoints. */\nfunction getBaseApiEndpoint(dsn) {\n  var protocol = dsn.protocol ? `${dsn.protocol}:` : '';\n  var port = dsn.port ? `:${dsn.port}` : '';\n  return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ''}/api/`;\n}\n\n/** Returns the ingest API endpoint for target. */\nfunction _getIngestEndpoint(dsn) {\n  return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;\n}\n\n/** Returns a URL-encoded string with auth config suitable for a query string. */\nfunction _encodedAuth(dsn, sdkInfo) {\n  return urlEncode({\n    // We send only the minimum set of required information. See\n    // https://github.com/getsentry/sentry-javascript/issues/2572.\n    sentry_key: dsn.publicKey,\n    sentry_version: SENTRY_API_VERSION,\n    ...(sdkInfo && { sentry_client: `${sdkInfo.name}/${sdkInfo.version}` }),\n  });\n}\n\n/**\n * Returns the envelope endpoint URL with auth in the query string.\n *\n * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n */\nfunction getEnvelopeEndpointWithUrlEncodedAuth(\n  dsn,\n  // TODO (v8): Remove `tunnelOrOptions` in favor of `options`, and use the substitute code below\n  // options: ClientOptions = {} as ClientOptions,\n  tunnelOrOptions = {} ,\n) {\n  // TODO (v8): Use this code instead\n  // const { tunnel, _metadata = {} } = options;\n  // return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, _metadata.sdk)}`;\n\n  var tunnel = typeof tunnelOrOptions === 'string' ? tunnelOrOptions : tunnelOrOptions.tunnel;\n  var sdkInfo =\n    typeof tunnelOrOptions === 'string' || !tunnelOrOptions._metadata ? undefined : tunnelOrOptions._metadata.sdk;\n\n  return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;\n}\n\n/** Returns the url to the report dialog endpoint. */\nfunction getReportDialogEndpoint(\n  dsnLike,\n  dialogOptions\n\n,\n) {\n  var dsn = makeDsn(dsnLike);\n  var endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;\n\n  let encodedOptions = `dsn=${dsnToString(dsn)}`;\n  for (var key in dialogOptions) {\n    if (key === 'dsn') {\n      continue;\n    }\n\n    if (key === 'user') {\n      var user = dialogOptions.user;\n      if (!user) {\n        continue;\n      }\n      if (user.name) {\n        encodedOptions += `&name=${encodeURIComponent(user.name)}`;\n      }\n      if (user.email) {\n        encodedOptions += `&email=${encodeURIComponent(user.email)}`;\n      }\n    } else {\n      encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key] )}`;\n    }\n  }\n\n  return `${endpoint}?${encodedOptions}`;\n}\n\nexport { getEnvelopeEndpointWithUrlEncodedAuth, getReportDialogEndpoint };\n//# sourceMappingURL=api.js.map\n","import { dsnToString, createEnvelope, dropUndefinedKeys } from '@sentry/utils';\n\n/** Extract sdk info from from the API metadata */\nfunction getSdkMetadataForEnvelopeHeader(metadata) {\n  if (!metadata || !metadata.sdk) {\n    return;\n  }\n  const { name, version } = metadata.sdk;\n  return { name, version };\n}\n\n/**\n * Apply SdkInfo (name, version, packages, integrations) to the corresponding event key.\n * Merge with existing data if any.\n **/\nfunction enhanceEventWithSdkInfo(event, sdkInfo) {\n  if (!sdkInfo) {\n    return event;\n  }\n  event.sdk = event.sdk || {};\n  event.sdk.name = event.sdk.name || sdkInfo.name;\n  event.sdk.version = event.sdk.version || sdkInfo.version;\n  event.sdk.integrations = [...(event.sdk.integrations || []), ...(sdkInfo.integrations || [])];\n  event.sdk.packages = [...(event.sdk.packages || []), ...(sdkInfo.packages || [])];\n  return event;\n}\n\n/** Creates an envelope from a Session */\nfunction createSessionEnvelope(\n  session,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  var sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  var envelopeHeaders = {\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n  };\n\n  var envelopeItem =\n    'aggregates' in session ? [{ type: 'sessions' }, session] : [{ type: 'session' }, session];\n\n  return createEnvelope(envelopeHeaders, [envelopeItem]);\n}\n\n/**\n * Create an Envelope from an event.\n */\nfunction createEventEnvelope(\n  event,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  var sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  var eventType = event.type || 'event';\n\n  const { transactionSampling } = event.sdkProcessingMetadata || {};\n  const { method: samplingMethod, rate: sampleRate } = transactionSampling || {};\n\n  enhanceEventWithSdkInfo(event, metadata && metadata.sdk);\n\n  var envelopeHeaders = createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn);\n\n  // Prevent this data (which, if it exists, was used in earlier steps in the processing pipeline) from being sent to\n  // sentry. (Note: Our use of this property comes and goes with whatever we might be debugging, whatever hacks we may\n  // have temporarily added, etc. Even if we don't happen to be using it at some point in the future, let's not get rid\n  // of this `delete`, lest we miss putting it back in the next time the property is in use.)\n  delete event.sdkProcessingMetadata;\n\n  var eventItem = [\n    {\n      type: eventType,\n      sample_rates: [{ id: samplingMethod, rate: sampleRate }],\n    },\n    event,\n  ];\n  return createEnvelope(envelopeHeaders, [eventItem]);\n}\n\nfunction createEventEnvelopeHeaders(\n  event,\n  sdkInfo,\n  tunnel,\n  dsn,\n) {\n  var dynamicSamplingContext = event.sdkProcessingMetadata && event.sdkProcessingMetadata.dynamicSamplingContext;\n\n  return {\n    event_id: event.event_id ,\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n    ...(event.type === 'transaction' &&\n      dynamicSamplingContext && {\n        trace: dropUndefinedKeys({ ...dynamicSamplingContext }),\n      }),\n  };\n}\n\nexport { createEventEnvelope, createSessionEnvelope };\n//# sourceMappingURL=envelope.js.map\n","import { addGlobalEventProcessor, getCurrentHub } from '@sentry/hub';\nimport { arrayify, logger } from '@sentry/utils';\n\nvar installedIntegrations = [];\n\n/** Map of integrations assigned to a client */\n\n/**\n * Remove duplicates from the given array, preferring the last instance of any duplicate. Not guaranteed to\n * preseve the order of integrations in the array.\n *\n * @private\n */\nfunction filterDuplicates(integrations) {\n  var integrationsByName = {};\n\n  integrations.forEach(currentInstance => {\n    const { name } = currentInstance;\n\n    var existingInstance = integrationsByName[name];\n\n    // We want integrations later in the array to overwrite earlier ones of the same type, except that we never want a\n    // default instance to overwrite an existing user instance\n    if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) {\n      return;\n    }\n\n    integrationsByName[name] = currentInstance;\n  });\n\n  return Object.values(integrationsByName);\n}\n\n/** Gets integrations to install */\nfunction getIntegrationsToSetup(options) {\n  var defaultIntegrations = options.defaultIntegrations || [];\n  var userIntegrations = options.integrations;\n\n  // We flag default instances, so that later we can tell them apart from any user-created instances of the same class\n  defaultIntegrations.forEach(integration => {\n    integration.isDefaultInstance = true;\n  });\n\n  let integrations;\n\n  if (Array.isArray(userIntegrations)) {\n    integrations = [...defaultIntegrations, ...userIntegrations];\n  } else if (typeof userIntegrations === 'function') {\n    integrations = arrayify(userIntegrations(defaultIntegrations));\n  } else {\n    integrations = defaultIntegrations;\n  }\n\n  var finalIntegrations = filterDuplicates(integrations);\n\n  // The `Debug` integration prints copies of the `event` and `hint` which will be passed to `beforeSend`. It therefore\n  // has to run after all other integrations, so that the changes of all event processors will be reflected in the\n  // printed values. For lack of a more elegant way to guarantee that, we therefore locate it and, assuming it exists,\n  // pop it out of its current spot and shove it onto the end of the array.\n  var debugIndex = finalIntegrations.findIndex(integration => integration.name === 'Debug');\n  if (debugIndex !== -1) {\n    const [debugInstance] = finalIntegrations.splice(debugIndex, 1);\n    finalIntegrations.push(debugInstance);\n  }\n\n  return finalIntegrations;\n}\n\n/**\n * Given a list of integration instances this installs them all. When `withDefaults` is set to `true` then all default\n * integrations are added unless they were already provided before.\n * @param integrations array of integration instances\n * @param withDefault should enable default integrations\n */\nfunction setupIntegrations(integrations) {\n  var integrationIndex = {};\n\n  integrations.forEach(integration => {\n    integrationIndex[integration.name] = integration;\n\n    if (installedIntegrations.indexOf(integration.name) === -1) {\n      integration.setupOnce(addGlobalEventProcessor, getCurrentHub);\n      installedIntegrations.push(integration.name);\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Integration installed: ${integration.name}`);\n    }\n  });\n\n  return integrationIndex;\n}\n\nexport { getIntegrationsToSetup, installedIntegrations, setupIntegrations };\n//# sourceMappingURL=integration.js.map\n","import { updateSession, Scope } from '@sentry/hub';\nimport { makeDsn, logger, checkOrSetAlreadyCaught, isPrimitive, resolvedSyncPromise, addItemToEnvelope, createAttachmentEnvelopeItem, SyncPromise, uuid4, dateTimestampInSeconds, normalize, truncate, rejectedSyncPromise, SentryError, isThenable, isPlainObject } from '@sentry/utils';\nimport { getEnvelopeEndpointWithUrlEncodedAuth } from './api.js';\nimport { createEventEnvelope, createSessionEnvelope } from './envelope.js';\nimport { setupIntegrations } from './integration.js';\n\nvar ALREADY_SEEN_ERROR = \"Not capturing exception because it's already been captured.\";\n\n/**\n * Base implementation for all JavaScript SDK clients.\n *\n * Call the constructor with the corresponding options\n * specific to the client subclass. To access these options later, use\n * {@link Client.getOptions}.\n *\n * If a Dsn is specified in the options, it will be parsed and stored. Use\n * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is\n * invalid, the constructor will throw a {@link SentryException}. Note that\n * without a valid Dsn, the SDK will not send any events to Sentry.\n *\n * Before sending an event, it is passed through\n * {@link BaseClient._prepareEvent} to add SDK information and scope data\n * (breadcrumbs and context). To add more custom information, override this\n * method and extend the resulting prepared event.\n *\n * To issue automatically created events (e.g. via instrumentation), use\n * {@link Client.captureEvent}. It will prepare the event and pass it through\n * the callback lifecycle. To issue auto-breadcrumbs, use\n * {@link Client.addBreadcrumb}.\n *\n * @example\n * class NodeClient extends BaseClient<NodeOptions> {\n *   public constructor(options: NodeOptions) {\n *     super(options);\n *   }\n *\n *   // ...\n * }\n */\nclass BaseClient {\n  /** Options passed to the SDK. */\n  \n\n  /** The client Dsn, if specified in options. Without this Dsn, the SDK will be disabled. */\n  \n\n  /** Array of set up integrations. */\n   __init() {this._integrations = {};}\n\n  /** Indicates whether this client's integrations have been set up. */\n   __init2() {this._integrationsInitialized = false;}\n\n  /** Number of calls being processed */\n   __init3() {this._numProcessing = 0;}\n\n  /** Holds flushable  */\n   __init4() {this._outcomes = {};}\n\n  /**\n   * Initializes this client instance.\n   *\n   * @param options Options for the client.\n   */\n   constructor(options) {;BaseClient.prototype.__init.call(this);BaseClient.prototype.__init2.call(this);BaseClient.prototype.__init3.call(this);BaseClient.prototype.__init4.call(this);\n    this._options = options;\n    if (options.dsn) {\n      this._dsn = makeDsn(options.dsn);\n      var url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, options);\n      this._transport = options.transport({\n        recordDroppedEvent: this.recordDroppedEvent.bind(this),\n        ...options.transportOptions,\n        url,\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('No DSN provided, client will not do anything.');\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n     captureException(exception, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (checkOrSetAlreadyCaught(exception)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this.eventFromException(exception, hint)\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n        level,\n    hint,\n    scope,\n  ) {\n    let eventId = hint && hint.event_id;\n\n    var promisedEvent = isPrimitive(message)\n      ? this.eventFromMessage(String(message), level, hint)\n      : this.eventFromException(message, hint);\n\n    this._process(\n      promisedEvent\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (hint && hint.originalException && checkOrSetAlreadyCaught(hint.originalException)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this._captureEvent(event, hint, scope).then(result => {\n        eventId = result;\n      }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(session) {\n    if (!this._isEnabled()) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('SDK not enabled, will not capture session.');\n      return;\n    }\n\n    if (!(typeof session.release === 'string')) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Discarded session because of missing or non-string release');\n    } else {\n      this.sendSession(session);\n      // After sending, we set init false to indicate it's not the first occurrence\n      updateSession(session, { init: false });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getDsn() {\n    return this._dsn;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getOptions() {\n    return this._options;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransport() {\n    return this._transport;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   flush(timeout) {\n    var transport = this._transport;\n    if (transport) {\n      return this._isClientDoneProcessing(timeout).then(clientFinished => {\n        return transport.flush(timeout).then(transportFlushed => clientFinished && transportFlushed);\n      });\n    } else {\n      return resolvedSyncPromise(true);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   close(timeout) {\n    return this.flush(timeout).then(result => {\n      this.getOptions().enabled = false;\n      return result;\n    });\n  }\n\n  /**\n   * Sets up the integrations\n   */\n   setupIntegrations() {\n    if (this._isEnabled() && !this._integrationsInitialized) {\n      this._integrations = setupIntegrations(this._options.integrations);\n      this._integrationsInitialized = true;\n    }\n  }\n\n  /**\n   * Gets an installed integration by its `id`.\n   *\n   * @returns The installed integration or `undefined` if no integration with that `id` was installed.\n   */\n   getIntegrationById(integrationId) {\n    return this._integrations[integrationId];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    try {\n      return (this._integrations[integration.id] ) || null;\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Client`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint = {}) {\n    if (this._dsn) {\n      let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);\n\n      for (var attachment of hint.attachments || []) {\n        env = addItemToEnvelope(\n          env,\n          createAttachmentEnvelopeItem(\n            attachment,\n            this._options.transportOptions && this._options.transportOptions.textEncoder,\n          ),\n        );\n      }\n\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendSession(session) {\n    if (this._dsn) {\n      var env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   recordDroppedEvent(reason, category) {\n    if (this._options.sendClientReports) {\n      // We want to track each category (error, transaction, session) separately\n      // but still keep the distinction between different type of outcomes.\n      // We could use nested maps, but it's much easier to read and type this way.\n      // A correct type for map-based implementation if we want to go that route\n      // would be `Partial<Record<SentryRequestType, Partial<Record<Outcome, number>>>>`\n      // With typescript 4.1 we could even use template literal types\n      var key = `${reason}:${category}`;\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Adding outcome: \"${key}\"`);\n\n      // The following works because undefined + 1 === NaN and NaN is falsy\n      this._outcomes[key] = this._outcomes[key] + 1 || 1;\n    }\n  }\n\n  /** Updates existing session based on the provided event */\n   _updateSessionFromEvent(session, event) {\n    let crashed = false;\n    let errored = false;\n    var exceptions = event.exception && event.exception.values;\n\n    if (exceptions) {\n      errored = true;\n\n      for (var ex of exceptions) {\n        var mechanism = ex.mechanism;\n        if (mechanism && mechanism.handled === false) {\n          crashed = true;\n          break;\n        }\n      }\n    }\n\n    // A session is updated and that session update is sent in only one of the two following scenarios:\n    // 1. Session with non terminal status and 0 errors + an error occurred -> Will set error count to 1 and send update\n    // 2. Session with non terminal status and 1 error + a crash occurred -> Will set status crashed and send update\n    var sessionNonTerminal = session.status === 'ok';\n    var shouldUpdateAndSend = (sessionNonTerminal && session.errors === 0) || (sessionNonTerminal && crashed);\n\n    if (shouldUpdateAndSend) {\n      updateSession(session, {\n        ...(crashed && { status: 'crashed' }),\n        errors: session.errors || Number(errored || crashed),\n      });\n      this.captureSession(session);\n    }\n  }\n\n  /**\n   * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying\n   * \"no\" (resolving to `false`) in order to give the client a chance to potentially finish first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not\n   * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and\n   * `false` otherwise\n   */\n   _isClientDoneProcessing(timeout) {\n    return new SyncPromise(resolve => {\n      let ticked = 0;\n      var tick = 1;\n\n      var interval = setInterval(() => {\n        if (this._numProcessing == 0) {\n          clearInterval(interval);\n          resolve(true);\n        } else {\n          ticked += tick;\n          if (timeout && ticked >= timeout) {\n            clearInterval(interval);\n            resolve(false);\n          }\n        }\n      }, tick);\n    });\n  }\n\n  /** Determines whether this SDK is enabled and a valid Dsn is present. */\n   _isEnabled() {\n    return this.getOptions().enabled !== false && this._dsn !== undefined;\n  }\n\n  /**\n   * Adds common information to events.\n   *\n   * The information includes release and environment from `options`,\n   * breadcrumbs and context (extra, tags and user) from the scope.\n   *\n   * Information that is already present in the event is never overwritten. For\n   * nested objects, such as the context, keys are merged.\n   *\n   * @param event The original event.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A new event with more information.\n   */\n   _prepareEvent(event, hint, scope) {\n    const { normalizeDepth = 3, normalizeMaxBreadth = 1000 } = this.getOptions();\n    var prepared = {\n      ...event,\n      event_id: event.event_id || hint.event_id || uuid4(),\n      timestamp: event.timestamp || dateTimestampInSeconds(),\n    };\n\n    this._applyClientOptions(prepared);\n    this._applyIntegrationsMetadata(prepared);\n\n    // If we have scope given to us, use it as the base for further modifications.\n    // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.\n    let finalScope = scope;\n    if (hint.captureContext) {\n      finalScope = Scope.clone(finalScope).update(hint.captureContext);\n    }\n\n    // We prepare the result here with a resolved Event.\n    let result = resolvedSyncPromise(prepared);\n\n    // This should be the last thing called, since we want that\n    // {@link Hub.addEventProcessor} gets the finished prepared event.\n    if (finalScope) {\n      // Collect attachments from the hint and scope\n      var attachments = [...(hint.attachments || []), ...finalScope.getAttachments()];\n\n      if (attachments.length) {\n        hint.attachments = attachments;\n      }\n\n      // In case we have a hub we reassign it.\n      result = finalScope.applyToEvent(prepared, hint);\n    }\n\n    return result.then(evt => {\n      if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {\n        return this._normalizeEvent(evt, normalizeDepth, normalizeMaxBreadth);\n      }\n      return evt;\n    });\n  }\n\n  /**\n   * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.\n   * Normalized keys:\n   * - `breadcrumbs.data`\n   * - `user`\n   * - `contexts`\n   * - `extra`\n   * @param event Event\n   * @returns Normalized event\n   */\n   _normalizeEvent(event, depth, maxBreadth) {\n    if (!event) {\n      return null;\n    }\n\n    var normalized = {\n      ...event,\n      ...(event.breadcrumbs && {\n        breadcrumbs: event.breadcrumbs.map(b => ({\n          ...b,\n          ...(b.data && {\n            data: normalize(b.data, depth, maxBreadth),\n          }),\n        })),\n      }),\n      ...(event.user && {\n        user: normalize(event.user, depth, maxBreadth),\n      }),\n      ...(event.contexts && {\n        contexts: normalize(event.contexts, depth, maxBreadth),\n      }),\n      ...(event.extra && {\n        extra: normalize(event.extra, depth, maxBreadth),\n      }),\n    };\n\n    // event.contexts.trace stores information about a Transaction. Similarly,\n    // event.spans[] stores information about child Spans. Given that a\n    // Transaction is conceptually a Span, normalization should apply to both\n    // Transactions and Spans consistently.\n    // For now the decision is to skip normalization of Transactions and Spans,\n    // so this block overwrites the normalized event to add back the original\n    // Transaction information prior to normalization.\n    if (event.contexts && event.contexts.trace && normalized.contexts) {\n      normalized.contexts.trace = event.contexts.trace;\n\n      // event.contexts.trace.data may contain circular/dangerous data so we need to normalize it\n      if (event.contexts.trace.data) {\n        normalized.contexts.trace.data = normalize(event.contexts.trace.data, depth, maxBreadth);\n      }\n    }\n\n    // event.spans[].data may contain circular/dangerous data so we need to normalize it\n    if (event.spans) {\n      normalized.spans = event.spans.map(span => {\n        // We cannot use the spread operator here because `toJSON` on `span` is non-enumerable\n        if (span.data) {\n          span.data = normalize(span.data, depth, maxBreadth);\n        }\n        return span;\n      });\n    }\n\n    return normalized;\n  }\n\n  /**\n   *  Enhances event using the client configuration.\n   *  It takes care of all \"static\" values like environment, release and `dist`,\n   *  as well as truncating overly long values.\n   * @param event event instance to be enhanced\n   */\n   _applyClientOptions(event) {\n    var options = this.getOptions();\n    const { environment, release, dist, maxValueLength = 250 } = options;\n\n    if (!('environment' in event)) {\n      event.environment = 'environment' in options ? environment : 'production';\n    }\n\n    if (event.release === undefined && release !== undefined) {\n      event.release = release;\n    }\n\n    if (event.dist === undefined && dist !== undefined) {\n      event.dist = dist;\n    }\n\n    if (event.message) {\n      event.message = truncate(event.message, maxValueLength);\n    }\n\n    var exception = event.exception && event.exception.values && event.exception.values[0];\n    if (exception && exception.value) {\n      exception.value = truncate(exception.value, maxValueLength);\n    }\n\n    var request = event.request;\n    if (request && request.url) {\n      request.url = truncate(request.url, maxValueLength);\n    }\n  }\n\n  /**\n   * This function adds all used integrations to the SDK info in the event.\n   * @param event The event that will be filled with all integrations.\n   */\n   _applyIntegrationsMetadata(event) {\n    var integrationsArray = Object.keys(this._integrations);\n    if (integrationsArray.length > 0) {\n      event.sdk = event.sdk || {};\n      event.sdk.integrations = [...(event.sdk.integrations || []), ...integrationsArray];\n    }\n  }\n\n  /**\n   * Processes the event and logs an error in case of rejection\n   * @param event\n   * @param hint\n   * @param scope\n   */\n   _captureEvent(event, hint = {}, scope) {\n    return this._processEvent(event, hint, scope).then(\n      finalEvent => {\n        return finalEvent.event_id;\n      },\n      reason => {\n        if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n          // If something's gone wrong, log the error as a warning. If it's just us having used a `SentryError` for\n          // control flow, log just the message (no stack) as a log-level log.\n          var sentryError = reason ;\n          if (sentryError.logLevel === 'log') {\n            logger.log(sentryError.message);\n          } else {\n            logger.warn(sentryError);\n          }\n        }\n        return undefined;\n      },\n    );\n  }\n\n  /**\n   * Processes an event (either error or message) and sends it to Sentry.\n   *\n   * This also adds breadcrumbs and context information to the event. However,\n   * platform specific meta data (such as the User's IP address) must be added\n   * by the SDK implementor.\n   *\n   *\n   * @param event The event to send to Sentry.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.\n   */\n   _processEvent(event, hint, scope) {\n    const { beforeSend, sampleRate } = this.getOptions();\n\n    if (!this._isEnabled()) {\n      return rejectedSyncPromise(new SentryError('SDK not enabled, will not capture event.', 'log'));\n    }\n\n    var isTransaction = event.type === 'transaction';\n    // 1.0 === 100% events are sent\n    // 0.0 === 0% events are sent\n    // Sampling for transaction happens somewhere else\n    if (!isTransaction && typeof sampleRate === 'number' && Math.random() > sampleRate) {\n      this.recordDroppedEvent('sample_rate', 'error');\n      return rejectedSyncPromise(\n        new SentryError(\n          `Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,\n          'log',\n        ),\n      );\n    }\n\n    return this._prepareEvent(event, hint, scope)\n      .then(prepared => {\n        if (prepared === null) {\n          this.recordDroppedEvent('event_processor', event.type || 'error');\n          throw new SentryError('An event processor returned null, will not send event.', 'log');\n        }\n\n        var isInternalException = hint.data && (hint.data ).__sentry__ === true;\n        if (isInternalException || isTransaction || !beforeSend) {\n          return prepared;\n        }\n\n        var beforeSendResult = beforeSend(prepared, hint);\n        return _ensureBeforeSendRv(beforeSendResult);\n      })\n      .then(processedEvent => {\n        if (processedEvent === null) {\n          this.recordDroppedEvent('before_send', event.type || 'error');\n          throw new SentryError('`beforeSend` returned `null`, will not send event.', 'log');\n        }\n\n        var session = scope && scope.getSession();\n        if (!isTransaction && session) {\n          this._updateSessionFromEvent(session, processedEvent);\n        }\n\n        // None of the Sentry built event processor will update transaction name,\n        // so if the transaction name has been changed by an event processor, we know\n        // it has to come from custom event processor added by a user\n        var transactionInfo = processedEvent.transaction_info;\n        if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {\n          var source = 'custom';\n          processedEvent.transaction_info = {\n            ...transactionInfo,\n            source,\n            changes: [\n              ...transactionInfo.changes,\n              {\n                source,\n                // use the same timestamp as the processed event.\n                timestamp: processedEvent.timestamp ,\n                propagations: transactionInfo.propagations,\n              },\n            ],\n          };\n        }\n\n        this.sendEvent(processedEvent, hint);\n        return processedEvent;\n      })\n      .then(null, reason => {\n        if (reason instanceof SentryError) {\n          throw reason;\n        }\n\n        this.captureException(reason, {\n          data: {\n            __sentry__: true,\n          },\n          originalException: reason ,\n        });\n        throw new SentryError(\n          `Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${reason}`,\n        );\n      });\n  }\n\n  /**\n   * Occupies the client with processing and event\n   */\n   _process(promise) {\n    this._numProcessing += 1;\n    void promise.then(\n      value => {\n        this._numProcessing -= 1;\n        return value;\n      },\n      reason => {\n        this._numProcessing -= 1;\n        return reason;\n      },\n    );\n  }\n\n  /**\n   * @inheritdoc\n   */\n   _sendEnvelope(envelope) {\n    if (this._transport && this._dsn) {\n      this._transport.send(envelope).then(null, reason => {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Error while sending event:', reason);\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Transport disabled');\n    }\n  }\n\n  /**\n   * Clears outcomes on this client and returns them.\n   */\n   _clearOutcomes() {\n    var outcomes = this._outcomes;\n    this._outcomes = {};\n    return Object.keys(outcomes).map(key => {\n      const [reason, category] = key.split(':') ;\n      return {\n        reason,\n        category,\n        quantity: outcomes[key],\n      };\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n    \n\n}\n\n/**\n * Verifies that return value of configured `beforeSend` is of expected type.\n */\nfunction _ensureBeforeSendRv(rv) {\n  var nullErr = '`beforeSend` method has to return `null` or a valid event.';\n  if (isThenable(rv)) {\n    return rv.then(\n      event => {\n        if (!(isPlainObject(event) || event === null)) {\n          throw new SentryError(nullErr);\n        }\n        return event;\n      },\n      e => {\n        throw new SentryError(`beforeSend rejected with ${e}`);\n      },\n    );\n  } else if (!(isPlainObject(rv) || rv === null)) {\n    throw new SentryError(nullErr);\n  }\n  return rv;\n}\n\nexport { BaseClient };\n//# sourceMappingURL=baseclient.js.map\n","import { getCurrentHub } from '@sentry/hub';\nimport { logger } from '@sentry/utils';\n\n/** A class object that can instantiate Client objects. */\n\n/**\n * Internal function to create a new SDK client instance. The client is\n * installed and then bound to the current scope.\n *\n * @param clientClass The client class to instantiate.\n * @param options Options to pass to the client.\n */\nfunction initAndBind(\n  clientClass,\n  options,\n) {\n  if (options.debug === true) {\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n      logger.enable();\n    } else {\n      // use `console.warn` rather than `logger.warn` since by non-debug bundles have all `logger.x` statements stripped\n            console.warn('[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.');\n    }\n  }\n  var hub = getCurrentHub();\n  var scope = hub.getScope();\n  if (scope) {\n    scope.update(options.initialScope);\n  }\n\n  var client = new clientClass(options);\n  hub.bindClient(client);\n}\n\nexport { initAndBind };\n//# sourceMappingURL=sdk.js.map\n","import { makePromiseBuffer, forEachEnvelopeItem, envelopeItemTypeToDataCategory, isRateLimited, resolvedSyncPromise, createEnvelope, serializeEnvelope, logger, updateRateLimits, SentryError } from '@sentry/utils';\n\nvar DEFAULT_TRANSPORT_BUFFER_SIZE = 30;\n\n/**\n * Creates an instance of a Sentry `Transport`\n *\n * @param options\n * @param makeRequest\n */\nfunction createTransport(\n  options,\n  makeRequest,\n  buffer = makePromiseBuffer(options.bufferSize || DEFAULT_TRANSPORT_BUFFER_SIZE),\n) {\n  let rateLimits = {};\n\n  var flush = (timeout) => buffer.drain(timeout);\n\n  function send(envelope) {\n    var filteredEnvelopeItems = [];\n\n    // Drop rate limited items from envelope\n    forEachEnvelopeItem(envelope, (item, type) => {\n      var envelopeItemDataCategory = envelopeItemTypeToDataCategory(type);\n      if (isRateLimited(rateLimits, envelopeItemDataCategory)) {\n        options.recordDroppedEvent('ratelimit_backoff', envelopeItemDataCategory);\n      } else {\n        filteredEnvelopeItems.push(item);\n      }\n    });\n\n    // Skip sending if envelope is empty after filtering out rate limited events\n    if (filteredEnvelopeItems.length === 0) {\n      return resolvedSyncPromise();\n    }\n\n        var filteredEnvelope = createEnvelope(envelope[0], filteredEnvelopeItems );\n\n    // Creates client report for each item in an envelope\n    var recordEnvelopeLoss = (reason) => {\n      forEachEnvelopeItem(filteredEnvelope, (_, type) => {\n        options.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type));\n      });\n    };\n\n    var requestTask = () =>\n      makeRequest({ body: serializeEnvelope(filteredEnvelope, options.textEncoder) }).then(\n        response => {\n          // We don't want to throw on NOK responses, but we want to at least log them\n          if (response.statusCode !== undefined && (response.statusCode < 200 || response.statusCode >= 300)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);\n          }\n\n          rateLimits = updateRateLimits(rateLimits, response);\n        },\n        error => {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Failed while sending event:', error);\n          recordEnvelopeLoss('network_error');\n        },\n      );\n\n    return buffer.add(requestTask).then(\n      result => result,\n      error => {\n        if (error instanceof SentryError) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Skipped sending event because buffer is full.');\n          recordEnvelopeLoss('queue_overflow');\n          return resolvedSyncPromise();\n        } else {\n          throw error;\n        }\n      },\n    );\n  }\n\n  return {\n    send,\n    flush,\n  };\n}\n\nexport { DEFAULT_TRANSPORT_BUFFER_SIZE, createTransport };\n//# sourceMappingURL=base.js.map\n","var SDK_VERSION = '7.13.0';\n\nexport { SDK_VERSION };\n//# sourceMappingURL=version.js.map\n","import { getOriginalFunction } from '@sentry/utils';\n\nlet originalFunctionToString;\n\n/** Patch toString calls to return proper name for wrapped functions */\nclass FunctionToString  {constructor() { FunctionToString.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'FunctionToString';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = FunctionToString.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n        originalFunctionToString = Function.prototype.toString;\n\n        Function.prototype.toString = function ( ...args) {\n      var context = getOriginalFunction(this) || this;\n      return originalFunctionToString.apply(context, args);\n    };\n  }\n} FunctionToString.__initStatic();\n\nexport { FunctionToString };\n//# sourceMappingURL=functiontostring.js.map\n","import { logger, getEventDescription, isMatchingPattern } from '@sentry/utils';\n\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nvar DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n\n/** Options for the InboundFilters integration */\n\n/** Inbound filters configurable by the user */\nclass InboundFilters  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'InboundFilters';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = InboundFilters.id;}\n\n   constructor(  _options = {}) {;this._options = _options;InboundFilters.prototype.__init.call(this);}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    var eventProcess = (event) => {\n      var hub = getCurrentHub();\n      if (hub) {\n        var self = hub.getIntegration(InboundFilters);\n        if (self) {\n          var client = hub.getClient();\n          var clientOptions = client ? client.getOptions() : {};\n          var options = _mergeOptions(self._options, clientOptions);\n          return _shouldDropEvent(event, options) ? null : event;\n        }\n      }\n      return event;\n    };\n\n    eventProcess.id = this.name;\n    addGlobalEventProcessor(eventProcess);\n  }\n} InboundFilters.__initStatic();\n\n/** JSDoc */\nfunction _mergeOptions(\n  internalOptions = {},\n  clientOptions = {},\n) {\n  return {\n    allowUrls: [...(internalOptions.allowUrls || []), ...(clientOptions.allowUrls || [])],\n    denyUrls: [...(internalOptions.denyUrls || []), ...(clientOptions.denyUrls || [])],\n    ignoreErrors: [\n      ...(internalOptions.ignoreErrors || []),\n      ...(clientOptions.ignoreErrors || []),\n      ...DEFAULT_IGNORE_ERRORS,\n    ],\n    ignoreInternal: internalOptions.ignoreInternal !== undefined ? internalOptions.ignoreInternal : true,\n  };\n}\n\n/** JSDoc */\nfunction _shouldDropEvent(event, options) {\n  if (options.ignoreInternal && _isSentryError(event)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`Event dropped due to being internal Sentry Error.\\nEvent: ${getEventDescription(event)}`);\n    return true;\n  }\n  if (_isIgnoredError(event, options.ignoreErrors)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`ignoreErrors\\` option.\\nEvent: ${getEventDescription(event)}`,\n      );\n    return true;\n  }\n  if (_isDeniedUrl(event, options.denyUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`denyUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  if (!_isAllowedUrl(event, options.allowUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to not being matched by \\`allowUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  return false;\n}\n\nfunction _isIgnoredError(event, ignoreErrors) {\n  if (!ignoreErrors || !ignoreErrors.length) {\n    return false;\n  }\n\n  return _getPossibleEventMessages(event).some(message =>\n    ignoreErrors.some(pattern => isMatchingPattern(message, pattern)),\n  );\n}\n\nfunction _isDeniedUrl(event, denyUrls) {\n  // TODO: Use Glob instead?\n  if (!denyUrls || !denyUrls.length) {\n    return false;\n  }\n  var url = _getEventFilterUrl(event);\n  return !url ? false : denyUrls.some(pattern => isMatchingPattern(url, pattern));\n}\n\nfunction _isAllowedUrl(event, allowUrls) {\n  // TODO: Use Glob instead?\n  if (!allowUrls || !allowUrls.length) {\n    return true;\n  }\n  var url = _getEventFilterUrl(event);\n  return !url ? true : allowUrls.some(pattern => isMatchingPattern(url, pattern));\n}\n\nfunction _getPossibleEventMessages(event) {\n  if (event.message) {\n    return [event.message];\n  }\n  if (event.exception) {\n    try {\n      const { type = '', value = '' } = (event.exception.values && event.exception.values[0]) || {};\n      return [`${value}`, `${type}: ${value}`];\n    } catch (oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract message for event ${getEventDescription(event)}`);\n      return [];\n    }\n  }\n  return [];\n}\n\nfunction _isSentryError(event) {\n  try {\n    // @ts-ignore can't be a sentry error if undefined\n        return event.exception.values[0].type === 'SentryError';\n  } catch (e) {\n    // ignore\n  }\n  return false;\n}\n\nfunction _getLastValidUrl(frames = []) {\n  for (let i = frames.length - 1; i >= 0; i--) {\n    var frame = frames[i];\n\n    if (frame && frame.filename !== '<anonymous>' && frame.filename !== '[native code]') {\n      return frame.filename || null;\n    }\n  }\n\n  return null;\n}\n\nfunction _getEventFilterUrl(event) {\n  try {\n    let frames;\n    try {\n      // @ts-ignore we only care about frames if the whole thing here is defined\n      frames = event.exception.values[0].stacktrace.frames;\n    } catch (e) {\n      // ignore\n    }\n    return frames ? _getLastValidUrl(frames) : null;\n  } catch (oO) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract url for event ${getEventDescription(event)}`);\n    return null;\n  }\n}\n\nexport { InboundFilters, _mergeOptions, _shouldDropEvent };\n//# sourceMappingURL=inboundfilters.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { isEvent, extractExceptionKeysForMessage, normalizeToSize, addExceptionMechanism, resolvedSyncPromise, isErrorEvent, isDOMError, isDOMException, addExceptionTypeValue, isError, isPlainObject } from '@sentry/utils';\n\n/**\n * This function creates an exception from a JavaScript Error\n */\nfunction exceptionFromError(stackParser, ex) {\n  // Get the frames first since Opera can lose the stack if we touch anything else first\n  var frames = parseStackFrames(stackParser, ex);\n\n  var exception = {\n    type: ex && ex.name,\n    value: extractMessage(ex),\n  };\n\n  if (frames.length) {\n    exception.stacktrace = { frames };\n  }\n\n  if (exception.type === undefined && exception.value === '') {\n    exception.value = 'Unrecoverable error caught';\n  }\n\n  return exception;\n}\n\n/**\n * @hidden\n */\nfunction eventFromPlainObject(\n  stackParser,\n  exception,\n  syntheticException,\n  isUnhandledRejection,\n) {\n  var hub = getCurrentHub();\n  var client = hub.getClient();\n  var normalizeDepth = client && client.getOptions().normalizeDepth;\n\n  var event = {\n    exception: {\n      values: [\n        {\n          type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? 'UnhandledRejection' : 'Error',\n          value: `Non-Error ${\n            isUnhandledRejection ? 'promise rejection' : 'exception'\n          } captured with keys: ${extractExceptionKeysForMessage(exception)}`,\n        },\n      ],\n    },\n    extra: {\n      __serialized__: normalizeToSize(exception, normalizeDepth),\n    },\n  };\n\n  if (syntheticException) {\n    var frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      // event.exception.values[0] has been set above\n      (event.exception ).values[0].stacktrace = { frames };\n    }\n  }\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromError(stackParser, ex) {\n  return {\n    exception: {\n      values: [exceptionFromError(stackParser, ex)],\n    },\n  };\n}\n\n/** Parses stack frames from an error */\nfunction parseStackFrames(\n  stackParser,\n  ex,\n) {\n  // Access and store the stacktrace property before doing ANYTHING\n  // else to it because Opera is not very good at providing it\n  // reliably in other circumstances.\n  var stacktrace = ex.stacktrace || ex.stack || '';\n\n  var popSize = getPopSize(ex);\n\n  try {\n    return stackParser(stacktrace, popSize);\n  } catch (e) {\n    // no-empty\n  }\n\n  return [];\n}\n\n// Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108\nvar reactMinifiedRegexp = /Minified React error #\\d+;/i;\n\nfunction getPopSize(ex) {\n  if (ex) {\n    if (typeof ex.framesToPop === 'number') {\n      return ex.framesToPop;\n    }\n\n    if (reactMinifiedRegexp.test(ex.message)) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * There are cases where stacktrace.message is an Event object\n * https://github.com/getsentry/sentry-javascript/issues/1949\n * In this specific case we try to extract stacktrace.message.error.message\n */\nfunction extractMessage(ex) {\n  var message = ex && ex.message;\n  if (!message) {\n    return 'No error message';\n  }\n  if (message.error && typeof message.error.message === 'string') {\n    return message.error.message;\n  }\n  return message;\n}\n\n/**\n * Creates an {@link Event} from all inputs to `captureException` and non-primitive inputs to `captureMessage`.\n * @hidden\n */\nfunction eventFromException(\n  stackParser,\n  exception,\n  hint,\n  attachStacktrace,\n) {\n  var syntheticException = (hint && hint.syntheticException) || undefined;\n  var event = eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace);\n  addExceptionMechanism(event); // defaults to { type: 'generic', handled: true }\n  event.level = 'error';\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * Builds and Event from a Message\n * @hidden\n */\nfunction eventFromMessage(\n  stackParser,\n  message,\n    level = 'info',\n  hint,\n  attachStacktrace,\n) {\n  var syntheticException = (hint && hint.syntheticException) || undefined;\n  var event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n  event.level = level;\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * @hidden\n */\nfunction eventFromUnknownInput(\n  stackParser,\n  exception,\n  syntheticException,\n  attachStacktrace,\n  isUnhandledRejection,\n) {\n  let event;\n\n  if (isErrorEvent(exception ) && (exception ).error) {\n    // If it is an ErrorEvent with `error` property, extract it to get actual Error\n    var errorEvent = exception ;\n    return eventFromError(stackParser, errorEvent.error );\n  }\n\n  // If it is a `DOMError` (which is a legacy API, but still supported in some browsers) then we just extract the name\n  // and message, as it doesn't provide anything else. According to the spec, all `DOMExceptions` should also be\n  // `Error`s, but that's not the case in IE11, so in that case we treat it the same as we do a `DOMError`.\n  //\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMError\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMException\n  // https://webidl.spec.whatwg.org/#es-DOMException-specialness\n  if (isDOMError(exception ) || isDOMException(exception )) {\n    var domException = exception ;\n\n    if ('stack' in (exception )) {\n      event = eventFromError(stackParser, exception );\n    } else {\n      var name = domException.name || (isDOMError(domException) ? 'DOMError' : 'DOMException');\n      var message = domException.message ? `${name}: ${domException.message}` : name;\n      event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n      addExceptionTypeValue(event, message);\n    }\n    if ('code' in domException) {\n      event.tags = { ...event.tags, 'DOMException.code': `${domException.code}` };\n    }\n\n    return event;\n  }\n  if (isError(exception)) {\n    // we have a real Error object, do nothing\n    return eventFromError(stackParser, exception);\n  }\n  if (isPlainObject(exception) || isEvent(exception)) {\n    // If it's a plain object or an instance of `Event` (the built-in JS kind, not this SDK's `Event` type), serialize\n    // it manually. This will allow us to group events based on top-level keys which is much better than creating a new\n    // group on any key/value change.\n    var objectException = exception ;\n    event = eventFromPlainObject(stackParser, objectException, syntheticException, isUnhandledRejection);\n    addExceptionMechanism(event, {\n      synthetic: true,\n    });\n    return event;\n  }\n\n  // If none of previous checks were valid, then it means that it's not:\n  // - an instance of DOMError\n  // - an instance of DOMException\n  // - an instance of Event\n  // - an instance of Error\n  // - a valid ErrorEvent (one with an error property)\n  // - a plain Object\n  //\n  // So bail out and capture it as a simple message:\n  event = eventFromString(stackParser, exception , syntheticException, attachStacktrace);\n  addExceptionTypeValue(event, `${exception}`, undefined);\n  addExceptionMechanism(event, {\n    synthetic: true,\n  });\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromString(\n  stackParser,\n  input,\n  syntheticException,\n  attachStacktrace,\n) {\n  var event = {\n    message: input,\n  };\n\n  if (attachStacktrace && syntheticException) {\n    var frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      event.exception = {\n        values: [{ value: input, stacktrace: { frames } }],\n      };\n    }\n  }\n\n  return event;\n}\n\nexport { eventFromError, eventFromException, eventFromMessage, eventFromPlainObject, eventFromString, eventFromUnknownInput, exceptionFromError, parseStackFrames };\n//# sourceMappingURL=eventbuilder.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, htmlTreeAsString, severityLevelFromString, safeJoin, getGlobalObject, parseUrl } from '@sentry/utils';\n\n/** JSDoc */\n\nvar BREADCRUMB_INTEGRATION_ID = 'Breadcrumbs';\n\n/**\n * Default Breadcrumbs instrumentations\n * TODO: Deprecated - with v6, this will be renamed to `Instrument`\n */\nclass Breadcrumbs  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = BREADCRUMB_INTEGRATION_ID;}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Breadcrumbs.id;}\n\n  /**\n   * Options of the breadcrumbs integration.\n   */\n  // This field is public, because we use it in the browser client to check if the `sentry` option is enabled.\n  \n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;Breadcrumbs.prototype.__init.call(this);\n    this.options = {\n      console: true,\n      dom: true,\n      fetch: true,\n      history: true,\n      sentry: true,\n      xhr: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Instrument browser built-ins w/ breadcrumb capturing\n   *  - Console API\n   *  - DOM API (click/typing)\n   *  - XMLHttpRequest API\n   *  - Fetch API\n   *  - History API\n   */\n   setupOnce() {\n    if (this.options.console) {\n      addInstrumentationHandler('console', _consoleBreadcrumb);\n    }\n    if (this.options.dom) {\n      addInstrumentationHandler('dom', _domBreadcrumb(this.options.dom));\n    }\n    if (this.options.xhr) {\n      addInstrumentationHandler('xhr', _xhrBreadcrumb);\n    }\n    if (this.options.fetch) {\n      addInstrumentationHandler('fetch', _fetchBreadcrumb);\n    }\n    if (this.options.history) {\n      addInstrumentationHandler('history', _historyBreadcrumb);\n    }\n  }\n} Breadcrumbs.__initStatic();\n\n/**\n * A HOC that creaes a function that creates breadcrumbs from DOM API calls.\n * This is a HOC so that we get access to dom options in the closure.\n */\nfunction _domBreadcrumb(dom) {\n    function _innerDomBreadcrumb(handlerData) {\n    let target;\n    let keyAttrs = typeof dom === 'object' ? dom.serializeAttribute : undefined;\n\n    if (typeof keyAttrs === 'string') {\n      keyAttrs = [keyAttrs];\n    }\n\n    // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n    try {\n      target = handlerData.event.target\n        ? htmlTreeAsString(handlerData.event.target , keyAttrs)\n        : htmlTreeAsString(handlerData.event , keyAttrs);\n    } catch (e) {\n      target = '<unknown>';\n    }\n\n    if (target.length === 0) {\n      return;\n    }\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: `ui.${handlerData.name}`,\n        message: target,\n      },\n      {\n        event: handlerData.event,\n        name: handlerData.name,\n        global: handlerData.global,\n      },\n    );\n  }\n\n  return _innerDomBreadcrumb;\n}\n\n/**\n * Creates breadcrumbs from console API calls\n */\nfunction _consoleBreadcrumb(handlerData) {\n  var breadcrumb = {\n    category: 'console',\n    data: {\n      arguments: handlerData.args,\n      logger: 'console',\n    },\n    level: severityLevelFromString(handlerData.level),\n    message: safeJoin(handlerData.args, ' '),\n  };\n\n  if (handlerData.level === 'assert') {\n    if (handlerData.args[0] === false) {\n      breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), ' ') || 'console.assert'}`;\n      breadcrumb.data.arguments = handlerData.args.slice(1);\n    } else {\n      // Don't capture a breadcrumb for passed assertions\n      return;\n    }\n  }\n\n  getCurrentHub().addBreadcrumb(breadcrumb, {\n    input: handlerData.args,\n    level: handlerData.level,\n  });\n}\n\n/**\n * Creates breadcrumbs from XHR API calls\n */\nfunction _xhrBreadcrumb(handlerData) {\n  if (handlerData.endTimestamp) {\n    // We only capture complete, non-sentry requests\n    if (handlerData.xhr.__sentry_own_request__) {\n      return;\n    }\n\n    const { method, url, status_code, body } = handlerData.xhr.__sentry_xhr__ || {};\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'xhr',\n        data: {\n          method,\n          url,\n          status_code,\n        },\n        type: 'http',\n      },\n      {\n        xhr: handlerData.xhr,\n        input: body,\n      },\n    );\n\n    return;\n  }\n}\n\n/**\n * Creates breadcrumbs from fetch API calls\n */\nfunction _fetchBreadcrumb(handlerData) {\n  // We only capture complete fetch requests\n  if (!handlerData.endTimestamp) {\n    return;\n  }\n\n  if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === 'POST') {\n    // We will not create breadcrumbs for fetch requests that contain `sentry_key` (internal sentry requests)\n    return;\n  }\n\n  if (handlerData.error) {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: handlerData.fetchData,\n        level: 'error',\n        type: 'http',\n      },\n      {\n        data: handlerData.error,\n        input: handlerData.args,\n      },\n    );\n  } else {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: {\n          ...handlerData.fetchData,\n          status_code: handlerData.response.status,\n        },\n        type: 'http',\n      },\n      {\n        input: handlerData.args,\n        response: handlerData.response,\n      },\n    );\n  }\n}\n\n/**\n * Creates breadcrumbs from history API calls\n */\nfunction _historyBreadcrumb(handlerData) {\n  var global = getGlobalObject();\n  let from = handlerData.from;\n  let to = handlerData.to;\n  var parsedLoc = parseUrl(global.location.href);\n  let parsedFrom = parseUrl(from);\n  var parsedTo = parseUrl(to);\n\n  // Initial pushState doesn't provide `from` information\n  if (!parsedFrom.path) {\n    parsedFrom = parsedLoc;\n  }\n\n  // Use only the path component of the URL if the URL matches the current\n  // document (almost all the time when using pushState)\n  if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {\n    to = parsedTo.relative;\n  }\n  if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {\n    from = parsedFrom.relative;\n  }\n\n  getCurrentHub().addBreadcrumb({\n    category: 'navigation',\n    data: {\n      from,\n      to,\n    },\n  });\n}\n\nexport { BREADCRUMB_INTEGRATION_ID, Breadcrumbs };\n//# sourceMappingURL=breadcrumbs.js.map\n","import { getGlobalObject, isNativeFetch, logger, supportsFetch } from '@sentry/utils';\n\nvar global = getGlobalObject();\nlet cachedFetchImpl;\n\n/**\n * A special usecase for incorrectly wrapped Fetch APIs in conjunction with ad-blockers.\n * Whenever someone wraps the Fetch API and returns the wrong promise chain,\n * this chain becomes orphaned and there is no possible way to capture it's rejections\n * other than allowing it bubble up to this very handler. eg.\n *\n * var f = window.fetch;\n * window.fetch = function () {\n *   var p = f.apply(this, arguments);\n *\n *   p.then(function() {\n *     console.log('hi.');\n *   });\n *\n *   return p;\n * }\n *\n * `p.then(function () { ... })` is producing a completely separate promise chain,\n * however, what's returned is `p` - the result of original `fetch` call.\n *\n * This mean, that whenever we use the Fetch API to send our own requests, _and_\n * some ad-blocker blocks it, this orphaned chain will _always_ reject,\n * effectively causing another event to be captured.\n * This makes a whole process become an infinite loop, which we need to somehow\n * deal with, and break it in one way or another.\n *\n * To deal with this issue, we are making sure that we _always_ use the real\n * browser Fetch API, instead of relying on what `window.fetch` exposes.\n * The only downside to this would be missing our own requests as breadcrumbs,\n * but because we are already not doing this, it should be just fine.\n *\n * Possible failed fetch error messages per-browser:\n *\n * Chrome:  Failed to fetch\n * Edge:    Failed to Fetch\n * Firefox: NetworkError when attempting to fetch resource\n * Safari:  resource blocked by content blocker\n */\nfunction getNativeFetchImplementation() {\n  if (cachedFetchImpl) {\n    return cachedFetchImpl;\n  }\n\n  // Fast path to avoid DOM I/O\n  if (isNativeFetch(global.fetch)) {\n    return (cachedFetchImpl = global.fetch.bind(global));\n  }\n\n  var document = global.document;\n  let fetchImpl = global.fetch;\n    if (document && typeof document.createElement === 'function') {\n    try {\n      var sandbox = document.createElement('iframe');\n      sandbox.hidden = true;\n      document.head.appendChild(sandbox);\n      var contentWindow = sandbox.contentWindow;\n      if (contentWindow && contentWindow.fetch) {\n        fetchImpl = contentWindow.fetch;\n      }\n      document.head.removeChild(sandbox);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', e);\n    }\n  }\n\n  return (cachedFetchImpl = fetchImpl.bind(global));\n  }\n\n/**\n * Sends sdk client report using sendBeacon or fetch as a fallback if available\n *\n * @param url report endpoint\n * @param body report payload\n */\nfunction sendReport(url, body) {\n  var isRealNavigator = Object.prototype.toString.call(global && global.navigator) === '[object Navigator]';\n  var hasSendBeacon = isRealNavigator && typeof global.navigator.sendBeacon === 'function';\n\n  if (hasSendBeacon) {\n    // Prevent illegal invocations - https://xgwang.me/posts/you-may-not-know-beacon/#it-may-throw-error%2C-be-sure-to-catch\n    var sendBeacon = global.navigator.sendBeacon.bind(global.navigator);\n    sendBeacon(url, body);\n  } else if (supportsFetch()) {\n    var fetch = getNativeFetchImplementation();\n    fetch(url, {\n      body,\n      method: 'POST',\n      credentials: 'omit',\n      keepalive: true,\n    }).then(null, error => {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(error);\n    });\n  }\n}\n\nexport { getNativeFetchImplementation, sendReport };\n//# sourceMappingURL=utils.js.map\n","import { BaseClient, SDK_VERSION, getCurrentHub, getEnvelopeEndpointWithUrlEncodedAuth } from '@sentry/core';\nimport { getGlobalObject, getEventDescription, logger, createClientReportEnvelope, dsnToString, serializeEnvelope } from '@sentry/utils';\nimport { eventFromException, eventFromMessage } from './eventbuilder.js';\nimport { BREADCRUMB_INTEGRATION_ID } from './integrations/breadcrumbs.js';\nimport { sendReport } from './transports/utils.js';\n\nvar globalObject = getGlobalObject();\n\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nclass BrowserClient extends BaseClient {\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n   constructor(options) {\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.browser',\n      packages: [\n        {\n          name: 'npm:@sentry/browser',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    };\n\n    super(options);\n\n    if (options.sendClientReports && globalObject.document) {\n      globalObject.document.addEventListener('visibilitychange', () => {\n        if (globalObject.document.visibilityState === 'hidden') {\n          this._flushOutcomes();\n        }\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromException(exception, hint) {\n    return eventFromException(this._options.stackParser, exception, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromMessage(\n    message,\n        level = 'info',\n    hint,\n  ) {\n    return eventFromMessage(this._options.stackParser, message, level, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint) {\n    // We only want to add the sentry event breadcrumb when the user has the breadcrumb integration installed and\n    // activated its `sentry` option.\n    // We also do not want to use the `Breadcrumbs` class here directly, because we do not want it to be included in\n    // bundles, if it is not used by the SDK.\n    // This all sadly is a bit ugly, but we currently don't have a \"pre-send\" hook on the integrations so we do it this\n    // way for now.\n    var breadcrumbIntegration = this.getIntegrationById(BREADCRUMB_INTEGRATION_ID) ;\n    if (\n      breadcrumbIntegration &&\n      // We check for definedness of `options`, even though it is not strictly necessary, because that access to\n      // `.sentry` below does not throw, in case users provided their own integration with id \"Breadcrumbs\" that does\n      // not have an`options` field\n      breadcrumbIntegration.options &&\n      breadcrumbIntegration.options.sentry\n    ) {\n      getCurrentHub().addBreadcrumb(\n        {\n          category: `sentry.${event.type === 'transaction' ? 'transaction' : 'event'}`,\n          event_id: event.event_id,\n          level: event.level,\n          message: getEventDescription(event),\n        },\n        {\n          event,\n        },\n      );\n    }\n\n    super.sendEvent(event, hint);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   _prepareEvent(event, hint, scope) {\n    event.platform = event.platform || 'javascript';\n    return super._prepareEvent(event, hint, scope);\n  }\n\n  /**\n   * Sends client reports as an envelope.\n   */\n   _flushOutcomes() {\n    var outcomes = this._clearOutcomes();\n\n    if (outcomes.length === 0) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No outcomes to send');\n      return;\n    }\n\n    if (!this._dsn) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No dsn provided, will not send outcomes');\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Sending outcomes:', outcomes);\n\n    var url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, this._options);\n    var envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsnToString(this._dsn));\n\n    try {\n      sendReport(url, serializeEnvelope(envelope));\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(e);\n    }\n  }\n}\n\nexport { BrowserClient };\n//# sourceMappingURL=client.js.map\n","import { createTransport } from '@sentry/core';\nimport { getNativeFetchImplementation } from './utils.js';\n\n/**\n * Creates a Transport that uses the Fetch API to send events to Sentry.\n */\nfunction makeFetchTransport(\n  options,\n  nativeFetch = getNativeFetchImplementation(),\n) {\n  function makeRequest(request) {\n    var requestOptions = {\n      body: request.body,\n      method: 'POST',\n      referrerPolicy: 'origin',\n      headers: options.headers,\n      // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n      // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n      // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n      // frequently sending events right before the user is switching pages (eg. whenfinishing navigation transactions).\n      // Gotchas:\n      // - `keepalive` isn't supported by Firefox\n      // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch), a request with `keepalive: true`\n      //   and a content length of > 64 kibibytes returns a network error. We will therefore only activate the flag when\n      //   we're below that limit.\n      keepalive: request.body.length <= 65536,\n      ...options.fetchOptions,\n    };\n\n    return nativeFetch(options.url, requestOptions).then(response => ({\n      statusCode: response.status,\n      headers: {\n        'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n        'retry-after': response.headers.get('Retry-After'),\n      },\n    }));\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeFetchTransport };\n//# sourceMappingURL=fetch.js.map\n","import { createTransport } from '@sentry/core';\nimport { SyncPromise } from '@sentry/utils';\n\n/**\n * The DONE ready state for XmlHttpRequest\n *\n * Defining it here as a constant b/c XMLHttpRequest.DONE is not always defined\n * (e.g. during testing, it is `undefined`)\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState}\n */\nvar XHR_READYSTATE_DONE = 4;\n\n/**\n * Creates a Transport that uses the XMLHttpRequest API to send events to Sentry.\n */\nfunction makeXHRTransport(options) {\n  function makeRequest(request) {\n    return new SyncPromise((resolve, reject) => {\n      var xhr = new XMLHttpRequest();\n\n      xhr.onerror = reject;\n\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === XHR_READYSTATE_DONE) {\n          resolve({\n            statusCode: xhr.status,\n            headers: {\n              'x-sentry-rate-limits': xhr.getResponseHeader('X-Sentry-Rate-Limits'),\n              'retry-after': xhr.getResponseHeader('Retry-After'),\n            },\n          });\n        }\n      };\n\n      xhr.open('POST', options.url);\n\n      for (var header in options.headers) {\n        if (Object.prototype.hasOwnProperty.call(options.headers, header)) {\n          xhr.setRequestHeader(header, options.headers[header]);\n        }\n      }\n\n      xhr.send(request.body);\n    });\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeXHRTransport };\n//# sourceMappingURL=xhr.js.map\n","import { createStackParser } from '@sentry/utils';\n\n// global reference to slice\nvar UNKNOWN_FUNCTION = '?';\n\nvar OPERA10_PRIORITY = 10;\nvar OPERA11_PRIORITY = 20;\nvar CHROME_PRIORITY = 30;\nvar WINJS_PRIORITY = 40;\nvar GECKO_PRIORITY = 50;\n\nfunction createFrame(filename, func, lineno, colno) {\n  var frame = {\n    filename,\n    function: func,\n    // All browser frames are considered in_app\n    in_app: true,\n  };\n\n  if (lineno !== undefined) {\n    frame.lineno = lineno;\n  }\n\n  if (colno !== undefined) {\n    frame.colno = colno;\n  }\n\n  return frame;\n}\n\n// Chromium based browsers: Chrome, Brave, new Opera, new Edge\nvar chromeRegex =\n  /^\\s*at (?:(.*\\).*?|.*?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nvar chromeEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\n\nvar chrome = line => {\n  var parts = chromeRegex.exec(line);\n\n  if (parts) {\n    var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n\n    if (isEval) {\n      var subMatch = chromeEvalRegex.exec(parts[2]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = subMatch[1]; // url\n        parts[3] = subMatch[2]; // line\n        parts[4] = subMatch[3]; // column\n      }\n    }\n\n    // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now\n    // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)\n    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2]);\n\n    return createFrame(filename, func, parts[3] ? +parts[3] : undefined, parts[4] ? +parts[4] : undefined);\n  }\n\n  return;\n};\n\nvar chromeStackLineParser = [CHROME_PRIORITY, chrome];\n\n// gecko regex: `(?:bundle|\\d+\\.js)`: `bundle` is for react native, `\\d+\\.js` also but specifically for ram bundles because it\n// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js\n// We need this specific case for now because we want no other regex to match.\nvar geckoREgex =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar geckoEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nvar gecko = line => {\n  var parts = geckoREgex.exec(line);\n\n  if (parts) {\n    var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    if (isEval) {\n      var subMatch = geckoEvalRegex.exec(parts[3]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line number\n        parts[1] = parts[1] || 'eval';\n        parts[3] = subMatch[1];\n        parts[4] = subMatch[2];\n        parts[5] = ''; // no column when eval\n      }\n    }\n\n    let filename = parts[3];\n    let func = parts[1] || UNKNOWN_FUNCTION;\n    [func, filename] = extractSafariExtensionDetails(func, filename);\n\n    return createFrame(filename, func, parts[4] ? +parts[4] : undefined, parts[5] ? +parts[5] : undefined);\n  }\n\n  return;\n};\n\nvar geckoStackLineParser = [GECKO_PRIORITY, gecko];\n\nvar winjsRegex =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\n\nvar winjs = line => {\n  var parts = winjsRegex.exec(line);\n\n  return parts\n    ? createFrame(parts[2], parts[1] || UNKNOWN_FUNCTION, +parts[3], parts[4] ? +parts[4] : undefined)\n    : undefined;\n};\n\nvar winjsStackLineParser = [WINJS_PRIORITY, winjs];\n\nvar opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i;\n\nvar opera10 = line => {\n  var parts = opera10Regex.exec(line);\n  return parts ? createFrame(parts[2], parts[3] || UNKNOWN_FUNCTION, +parts[1]) : undefined;\n};\n\nvar opera10StackLineParser = [OPERA10_PRIORITY, opera10];\n\nvar opera11Regex =\n  / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\\(.*\\))? in (.*):\\s*$/i;\n\nvar opera11 = line => {\n  var parts = opera11Regex.exec(line);\n  return parts ? createFrame(parts[5], parts[3] || parts[4] || UNKNOWN_FUNCTION, +parts[1], +parts[2]) : undefined;\n};\n\nvar opera11StackLineParser = [OPERA11_PRIORITY, opera11];\n\nvar defaultStackLineParsers = [chromeStackLineParser, geckoStackLineParser, winjsStackLineParser];\n\nvar defaultStackParser = createStackParser(...defaultStackLineParsers);\n\n/**\n * Safari web extensions, starting version unknown, can produce \"frames-only\" stacktraces.\n * What it means, is that instead of format like:\n *\n * Error: wat\n *   at function@url:row:col\n *   at function@url:row:col\n *   at function@url:row:col\n *\n * it produces something like:\n *\n *   function@url:row:col\n *   function@url:row:col\n *   function@url:row:col\n *\n * Because of that, it won't be captured by `chrome` RegExp and will fall into `Gecko` branch.\n * This function is extracted so that we can use it in both places without duplicating the logic.\n * Unfortunately \"just\" changing RegExp is too complicated now and making it pass all tests\n * and fix this case seems like an impossible, or at least way too time-consuming task.\n */\nvar extractSafariExtensionDetails = (func, filename) => {\n  var isSafariExtension = func.indexOf('safari-extension') !== -1;\n  var isSafariWebExtension = func.indexOf('safari-web-extension') !== -1;\n\n  return isSafariExtension || isSafariWebExtension\n    ? [\n        func.indexOf('@') !== -1 ? func.split('@')[0] : UNKNOWN_FUNCTION,\n        isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`,\n      ]\n    : [func, filename];\n};\n\nexport { chromeStackLineParser, defaultStackLineParsers, defaultStackParser, geckoStackLineParser, opera10StackLineParser, opera11StackLineParser, winjsStackLineParser };\n//# sourceMappingURL=stack-parsers.js.map\n","import { withScope, captureException } from '@sentry/core';\nimport { getOriginalFunction, addExceptionTypeValue, addExceptionMechanism, markFunctionWrapped, addNonEnumerableProperty } from '@sentry/utils';\n\nlet ignoreOnError = 0;\n\n/**\n * @hidden\n */\nfunction shouldIgnoreOnError() {\n  return ignoreOnError > 0;\n}\n\n/**\n * @hidden\n */\nfunction ignoreNextOnError() {\n  // onerror should trigger before setTimeout\n  ignoreOnError += 1;\n  setTimeout(() => {\n    ignoreOnError -= 1;\n  });\n}\n\n/**\n * Instruments the given function and sends an event to Sentry every time the\n * function throws an exception.\n *\n * @param fn A function to wrap. It is generally safe to pass an unbound function, because the returned wrapper always\n * has a correct `this` context.\n * @returns The wrapped function.\n * @hidden\n */\nfunction wrap(\n  fn,\n  options\n\n = {},\n  before,\n  ) {\n  // for future readers what this does is wrap a function and then create\n  // a bi-directional wrapping between them.\n  //\n  // example: wrapped = wrap(original);\n  //  original.__sentry_wrapped__ -> wrapped\n  //  wrapped.__sentry_original__ -> original\n\n  if (typeof fn !== 'function') {\n    return fn;\n  }\n\n  try {\n    // if we're dealing with a function that was previously wrapped, return\n    // the original wrapper.\n    var wrapper = fn.__sentry_wrapped__;\n    if (wrapper) {\n      return wrapper;\n    }\n\n    // We don't wanna wrap it twice\n    if (getOriginalFunction(fn)) {\n      return fn;\n    }\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    // Bail on wrapping and return the function as-is (defers to window.onerror).\n    return fn;\n  }\n\n    // It is important that `sentryWrapped` is not an arrow function to preserve the context of `this`\n  var sentryWrapped = function () {\n    var args = Array.prototype.slice.call(arguments);\n\n    try {\n      if (before && typeof before === 'function') {\n        before.apply(this, arguments);\n      }\n\n            var wrappedArguments = args.map((arg) => wrap(arg, options));\n\n      // Attempt to invoke user-land function\n      // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n      //       means the sentry.javascript SDK caught an error invoking your application code. This\n      //       is expected behavior and NOT indicative of a bug with sentry.javascript.\n      return fn.apply(this, wrappedArguments);\n    } catch (ex) {\n      ignoreNextOnError();\n\n      withScope((scope) => {\n        scope.addEventProcessor((event) => {\n          if (options.mechanism) {\n            addExceptionTypeValue(event, undefined, undefined);\n            addExceptionMechanism(event, options.mechanism);\n          }\n\n          event.extra = {\n            ...event.extra,\n            arguments: args,\n          };\n\n          return event;\n        });\n\n        captureException(ex);\n      });\n\n      throw ex;\n    }\n  };\n  \n  // Accessing some objects may throw\n  // ref: https://github.com/getsentry/sentry-javascript/issues/1168\n  try {\n    for (var property in fn) {\n      if (Object.prototype.hasOwnProperty.call(fn, property)) {\n        sentryWrapped[property] = fn[property];\n      }\n    }\n  } catch (_oO) {} \n  // Signal that this function has been wrapped/filled already\n  // for both debugging and to prevent it to being wrapped/filled twice\n  markFunctionWrapped(sentryWrapped, fn);\n\n  addNonEnumerableProperty(fn, '__sentry_wrapped__', sentryWrapped);\n\n  // Restore original function name (not all browsers allow that)\n  try {\n    var descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, 'name') ;\n    if (descriptor.configurable) {\n      Object.defineProperty(sentryWrapped, 'name', {\n        get() {\n          return fn.name;\n        },\n      });\n    }\n      } catch (_oO) {}\n\n  return sentryWrapped;\n}\n\n/**\n * All properties the report dialog supports\n */\n\nexport { ignoreNextOnError, shouldIgnoreOnError, wrap };\n//# sourceMappingURL=helpers.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, isString, isPrimitive, isErrorEvent, getLocationHref, logger, addExceptionMechanism } from '@sentry/utils';\nimport { eventFromUnknownInput } from '../eventbuilder.js';\nimport { shouldIgnoreOnError } from '../helpers.js';\n\n/** Global handlers */\nclass GlobalHandlers  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'GlobalHandlers';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = GlobalHandlers.id;}\n\n  /** JSDoc */\n  \n\n  /**\n   * Stores references functions to installing handlers. Will set to undefined\n   * after they have been run so that they are not used twice.\n   */\n   __init2() {this._installFunc = {\n    onerror: _installGlobalOnErrorHandler,\n    onunhandledrejection: _installGlobalOnUnhandledRejectionHandler,\n  };}\n\n  /** JSDoc */\n   constructor(options) {;GlobalHandlers.prototype.__init.call(this);GlobalHandlers.prototype.__init2.call(this);\n    this._options = {\n      onerror: true,\n      onunhandledrejection: true,\n      ...options,\n    };\n  }\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    Error.stackTraceLimit = 50;\n    var options = this._options;\n\n    // We can disable guard-for-in as we construct the options object above + do checks against\n    // `this._installFunc` for the property.\n        for (var key in options) {\n      var installFunc = this._installFunc[key ];\n      if (installFunc && options[key ]) {\n        globalHandlerLog(key);\n        installFunc();\n        this._installFunc[key ] = undefined;\n      }\n    }\n  }\n} GlobalHandlers.__initStatic();\n\n/** JSDoc */\nfunction _installGlobalOnErrorHandler() {\n  addInstrumentationHandler(\n    'error',\n        (data) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      const { msg, url, line, column, error } = data;\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return;\n      }\n\n      var event =\n        error === undefined && isString(msg)\n          ? _eventFromIncompleteOnError(msg, url, line, column)\n          : _enhanceEventWithInitialFrame(\n              eventFromUnknownInput(stackParser, error || msg, undefined, attachStacktrace, false),\n              url,\n              line,\n              column,\n            );\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onerror');\n    },\n  );\n}\n\n/** JSDoc */\nfunction _installGlobalOnUnhandledRejectionHandler() {\n  addInstrumentationHandler(\n    'unhandledrejection',\n        (e) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      let error = e;\n\n      // dig the object of the rejection out of known event types\n      try {\n        // PromiseRejectionEvents store the object of the rejection under 'reason'\n        // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n        if ('reason' in e) {\n          error = e.reason;\n        }\n        // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n        // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n        // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n        // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n        // https://github.com/getsentry/sentry-javascript/issues/2380\n        else if ('detail' in e && 'reason' in e.detail) {\n          error = e.detail.reason;\n        }\n      } catch (_oO) {\n        // no-empty\n      }\n\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return true;\n      }\n\n      var event = isPrimitive(error)\n        ? _eventFromRejectionWithPrimitive(error)\n        : eventFromUnknownInput(stackParser, error, undefined, attachStacktrace, true);\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onunhandledrejection');\n      return;\n    },\n  );\n}\n\n/**\n * Create an event from a promise rejection where the `reason` is a primitive.\n *\n * @param reason: The `reason` property of the promise rejection\n * @returns An Event object with an appropriate `exception` value\n */\nfunction _eventFromRejectionWithPrimitive(reason) {\n  return {\n    exception: {\n      values: [\n        {\n          type: 'UnhandledRejection',\n          // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)\n          value: `Non-Error promise rejection captured with value: ${String(reason)}`,\n        },\n      ],\n    },\n  };\n}\n\n/**\n * This function creates a stack from an old, error-less onerror handler.\n */\nfunction _eventFromIncompleteOnError(msg, url, line, column) {\n  var ERROR_TYPES_RE =\n    /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n\n  // If 'message' is ErrorEvent, get real message from inside\n  let message = isErrorEvent(msg) ? msg.message : msg;\n  let name = 'Error';\n\n  var groups = message.match(ERROR_TYPES_RE);\n  if (groups) {\n    name = groups[1];\n    message = groups[2];\n  }\n\n  var event = {\n    exception: {\n      values: [\n        {\n          type: name,\n          value: message,\n        },\n      ],\n    },\n  };\n\n  return _enhanceEventWithInitialFrame(event, url, line, column);\n}\n\n/** JSDoc */\nfunction _enhanceEventWithInitialFrame(event, url, line, column) {\n  // event.exception\n  var e = (event.exception = event.exception || {});\n  // event.exception.values\n  var ev = (e.values = e.values || []);\n  // event.exception.values[0]\n  var ev0 = (ev[0] = ev[0] || {});\n  // event.exception.values[0].stacktrace\n  var ev0s = (ev0.stacktrace = ev0.stacktrace || {});\n  // event.exception.values[0].stacktrace.frames\n  var ev0sf = (ev0s.frames = ev0s.frames || []);\n\n  var colno = isNaN(parseInt(column, 10)) ? undefined : column;\n  var lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n  var filename = isString(url) && url.length > 0 ? url : getLocationHref();\n\n  // event.exception.values[0].stacktrace.frames\n  if (ev0sf.length === 0) {\n    ev0sf.push({\n      colno,\n      filename,\n      function: '?',\n      in_app: true,\n      lineno,\n    });\n  }\n\n  return event;\n}\n\nfunction globalHandlerLog(type) {\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Global Handler attached: ${type}`);\n}\n\nfunction addMechanismAndCapture(hub, error, event, type) {\n  addExceptionMechanism(event, {\n    handled: false,\n    type,\n  });\n  hub.captureEvent(event, {\n    originalException: error,\n  });\n}\n\nfunction getHubAndOptions() {\n  var hub = getCurrentHub();\n  var client = hub.getClient();\n  var options = (client && client.getOptions()) || {\n    stackParser: () => [],\n    attachStacktrace: false,\n  };\n  return [hub, options.stackParser, options.attachStacktrace];\n}\n\nexport { GlobalHandlers };\n//# sourceMappingURL=globalhandlers.js.map\n","import { getGlobalObject, fill, getFunctionName, getOriginalFunction } from '@sentry/utils';\nimport { wrap } from '../helpers.js';\n\nvar DEFAULT_EVENT_TARGET = [\n  'EventTarget',\n  'Window',\n  'Node',\n  'ApplicationCache',\n  'AudioTrackList',\n  'ChannelMergerNode',\n  'CryptoOperation',\n  'EventSource',\n  'FileReader',\n  'HTMLUnknownElement',\n  'IDBDatabase',\n  'IDBRequest',\n  'IDBTransaction',\n  'KeyOperation',\n  'MediaController',\n  'MessagePort',\n  'ModalWindow',\n  'Notification',\n  'SVGElementInstance',\n  'Screen',\n  'TextTrack',\n  'TextTrackCue',\n  'TextTrackList',\n  'WebSocket',\n  'WebSocketWorker',\n  'Worker',\n  'XMLHttpRequest',\n  'XMLHttpRequestEventTarget',\n  'XMLHttpRequestUpload',\n];\n\n/** Wrap timer functions and event targets to catch errors and provide better meta data */\nclass TryCatch  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'TryCatch';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = TryCatch.id;}\n\n  /** JSDoc */\n  \n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;TryCatch.prototype.__init.call(this);\n    this._options = {\n      XMLHttpRequest: true,\n      eventTarget: true,\n      requestAnimationFrame: true,\n      setInterval: true,\n      setTimeout: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Wrap timer functions and event targets to catch errors\n   * and provide better metadata.\n   */\n   setupOnce() {\n    var global = getGlobalObject();\n\n    if (this._options.setTimeout) {\n      fill(global, 'setTimeout', _wrapTimeFunction);\n    }\n\n    if (this._options.setInterval) {\n      fill(global, 'setInterval', _wrapTimeFunction);\n    }\n\n    if (this._options.requestAnimationFrame) {\n      fill(global, 'requestAnimationFrame', _wrapRAF);\n    }\n\n    if (this._options.XMLHttpRequest && 'XMLHttpRequest' in global) {\n      fill(XMLHttpRequest.prototype, 'send', _wrapXHR);\n    }\n\n    var eventTargetOption = this._options.eventTarget;\n    if (eventTargetOption) {\n      var eventTarget = Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET;\n      eventTarget.forEach(_wrapEventTarget);\n    }\n  }\n} TryCatch.__initStatic();\n\n/** JSDoc */\nfunction _wrapTimeFunction(original) {\n    return function ( ...args) {\n    var originalCallback = args[0];\n    args[0] = wrap(originalCallback, {\n      mechanism: {\n        data: { function: getFunctionName(original) },\n        handled: true,\n        type: 'instrument',\n      },\n    });\n    return original.apply(this, args);\n  };\n}\n\n/** JSDoc */\nfunction _wrapRAF(original) {\n    return function ( callback) {\n        return original.apply(this, [\n      wrap(callback, {\n        mechanism: {\n          data: {\n            function: 'requestAnimationFrame',\n            handler: getFunctionName(original),\n          },\n          handled: true,\n          type: 'instrument',\n        },\n      }),\n    ]);\n  };\n}\n\n/** JSDoc */\nfunction _wrapXHR(originalSend) {\n    return function ( ...args) {\n        var xhr = this;\n    var xmlHttpRequestProps = ['onload', 'onerror', 'onprogress', 'onreadystatechange'];\n\n    xmlHttpRequestProps.forEach(prop => {\n      if (prop in xhr && typeof xhr[prop] === 'function') {\n                fill(xhr, prop, function (original) {\n          var wrapOptions = {\n            mechanism: {\n              data: {\n                function: prop,\n                handler: getFunctionName(original),\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          };\n\n          // If Instrument integration has been called before TryCatch, get the name of original function\n          var originalFunction = getOriginalFunction(original);\n          if (originalFunction) {\n            wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);\n          }\n\n          // Otherwise wrap directly\n          return wrap(original, wrapOptions);\n        });\n      }\n    });\n\n    return originalSend.apply(this, args);\n  };\n}\n\n/** JSDoc */\nfunction _wrapEventTarget(target) {\n    var global = getGlobalObject() ;\n    var proto = global[target] && global[target].prototype;\n\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n    return;\n  }\n\n  fill(proto, 'addEventListener', function (original)\n\n {\n    return function (\n            \n      eventName,\n      fn,\n      options,\n    ) {\n      try {\n        if (typeof fn.handleEvent === 'function') {\n          // ESlint disable explanation:\n          //  First, it is generally safe to call `wrap` with an unbound function. Furthermore, using `.bind()` would\n          //  introduce a bug here, because bind returns a new function that doesn't have our\n          //  flags(like __sentry_original__) attached. `wrap` checks for those flags to avoid unnecessary wrapping.\n          //  Without those flags, every call to addEventListener wraps the function again, causing a memory leak.\n                    fn.handleEvent = wrap(fn.handleEvent, {\n            mechanism: {\n              data: {\n                function: 'handleEvent',\n                handler: getFunctionName(fn),\n                target,\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          });\n        }\n      } catch (err) {\n        // can sometimes get 'Permission denied to access property \"handle Event'\n      }\n\n      return original.apply(this, [\n        eventName,\n                wrap(fn , {\n          mechanism: {\n            data: {\n              function: 'addEventListener',\n              handler: getFunctionName(fn),\n              target,\n            },\n            handled: true,\n            type: 'instrument',\n          },\n        }),\n        options,\n      ]);\n    };\n  });\n\n  fill(\n    proto,\n    'removeEventListener',\n    function (\n      originalRemoveEventListener,\n          ) {\n      return function (\n                \n        eventName,\n        fn,\n        options,\n      ) {\n        /**\n         * There are 2 possible scenarios here:\n         *\n         * 1. Someone passes a callback, which was attached prior to Sentry initialization, or by using unmodified\n         * method, eg. `document.addEventListener.call(el, name, handler). In this case, we treat this function\n         * as a pass-through, and call original `removeEventListener` with it.\n         *\n         * 2. Someone passes a callback, which was attached after Sentry was initialized, which means that it was using\n         * our wrapped version of `addEventListener`, which internally calls `wrap` helper.\n         * This helper \"wraps\" whole callback inside a try/catch statement, and attached appropriate metadata to it,\n         * in order for us to make a distinction between wrapped/non-wrapped functions possible.\n         * If a function was wrapped, it has additional property of `__sentry_wrapped__`, holding the handler.\n         *\n         * When someone adds a handler prior to initialization, and then do it again, but after,\n         * then we have to detach both of them. Otherwise, if we'd detach only wrapped one, it'd be impossible\n         * to get rid of the initial handler and it'd stick there forever.\n         */\n        var wrappedEventHandler = fn ;\n        try {\n          var originalEventHandler = wrappedEventHandler && wrappedEventHandler.__sentry_wrapped__;\n          if (originalEventHandler) {\n            originalRemoveEventListener.call(this, eventName, originalEventHandler, options);\n          }\n        } catch (e) {\n          // ignore, accessing __sentry_wrapped__ will throw in some Selenium environments\n        }\n        return originalRemoveEventListener.call(this, eventName, wrappedEventHandler, options);\n      };\n    },\n  );\n}\n\nexport { TryCatch };\n//# sourceMappingURL=trycatch.js.map\n","import { getCurrentHub, addGlobalEventProcessor } from '@sentry/core';\nimport { isInstanceOf } from '@sentry/utils';\nimport { exceptionFromError } from '../eventbuilder.js';\n\nvar DEFAULT_KEY = 'cause';\nvar DEFAULT_LIMIT = 5;\n\n/** Adds SDK info to an event. */\nclass LinkedErrors  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'LinkedErrors';}\n\n  /**\n   * @inheritDoc\n   */\n    __init() {this.name = LinkedErrors.id;}\n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {;LinkedErrors.prototype.__init.call(this);\n    this._key = options.key || DEFAULT_KEY;\n    this._limit = options.limit || DEFAULT_LIMIT;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    var client = getCurrentHub().getClient();\n    if (!client) {\n      return;\n    }\n    addGlobalEventProcessor((event, hint) => {\n      var self = getCurrentHub().getIntegration(LinkedErrors);\n      return self ? _handler(client.getOptions().stackParser, self._key, self._limit, event, hint) : event;\n    });\n  }\n} LinkedErrors.__initStatic();\n\n/**\n * @inheritDoc\n */\nfunction _handler(\n  parser,\n  key,\n  limit,\n  event,\n  hint,\n) {\n  if (!event.exception || !event.exception.values || !hint || !isInstanceOf(hint.originalException, Error)) {\n    return event;\n  }\n  var linkedErrors = _walkErrorTree(parser, limit, hint.originalException , key);\n  event.exception.values = [...linkedErrors, ...event.exception.values];\n  return event;\n}\n\n/**\n * JSDOC\n */\nfunction _walkErrorTree(\n  parser,\n  limit,\n  error,\n  key,\n  stack = [],\n) {\n  if (!isInstanceOf(error[key], Error) || stack.length + 1 >= limit) {\n    return stack;\n  }\n  var exception = exceptionFromError(parser, error[key]);\n  return _walkErrorTree(parser, limit, error[key], key, [exception, ...stack]);\n}\n\nexport { LinkedErrors, _handler, _walkErrorTree };\n//# sourceMappingURL=linkederrors.js.map\n","import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { getGlobalObject } from '@sentry/utils';\n\nvar global = getGlobalObject();\n\n/** HttpContext integration collects information about HTTP request headers */\nclass HttpContext  {constructor() { HttpContext.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'HttpContext';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = HttpContext.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    addGlobalEventProcessor((event) => {\n      if (getCurrentHub().getIntegration(HttpContext)) {\n        // if none of the information we want exists, don't bother\n        if (!global.navigator && !global.location && !global.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        var url = (event.request && event.request.url) || (global.location && global.location.href);\n        const { referrer } = global.document || {};\n        const { userAgent } = global.navigator || {};\n\n        var headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && { Referer: referrer }),\n          ...(userAgent && { 'User-Agent': userAgent }),\n        };\n        var request = { ...(url && { url }), headers };\n\n        return { ...event, request };\n      }\n      return event;\n    });\n  }\n} HttpContext.__initStatic();\n\nexport { HttpContext };\n//# sourceMappingURL=httpcontext.js.map\n","import { logger } from '@sentry/utils';\n\n/** Deduplication filter */\nclass Dedupe  {constructor() { Dedupe.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Dedupe';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Dedupe.id;}\n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    var eventProcessor = currentEvent => {\n      var self = getCurrentHub().getIntegration(Dedupe);\n      if (self) {\n        // Juuust in case something goes wrong\n        try {\n          if (_shouldDropEvent(currentEvent, self._previousEvent)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Event dropped due to being a duplicate of previously captured event.');\n            return null;\n          }\n        } catch (_oO) {\n          return (self._previousEvent = currentEvent);\n        }\n\n        return (self._previousEvent = currentEvent);\n      }\n      return currentEvent;\n    };\n\n    eventProcessor.id = this.name;\n    addGlobalEventProcessor(eventProcessor);\n  }\n} Dedupe.__initStatic();\n\n/** JSDoc */\nfunction _shouldDropEvent(currentEvent, previousEvent) {\n  if (!previousEvent) {\n    return false;\n  }\n\n  if (_isSameMessageEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  if (_isSameExceptionEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  return false;\n}\n\n/** JSDoc */\nfunction _isSameMessageEvent(currentEvent, previousEvent) {\n  var currentMessage = currentEvent.message;\n  var previousMessage = previousEvent.message;\n\n  // If neither event has a message property, they were both exceptions, so bail out\n  if (!currentMessage && !previousMessage) {\n    return false;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentMessage && !previousMessage) || (!currentMessage && previousMessage)) {\n    return false;\n  }\n\n  if (currentMessage !== previousMessage) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameExceptionEvent(currentEvent, previousEvent) {\n  var previousException = _getExceptionFromEvent(previousEvent);\n  var currentException = _getExceptionFromEvent(currentEvent);\n\n  if (!previousException || !currentException) {\n    return false;\n  }\n\n  if (previousException.type !== currentException.type || previousException.value !== currentException.value) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameStacktrace(currentEvent, previousEvent) {\n  let currentFrames = _getFramesFromEvent(currentEvent);\n  let previousFrames = _getFramesFromEvent(previousEvent);\n\n  // If neither event has a stacktrace, they are assumed to be the same\n  if (!currentFrames && !previousFrames) {\n    return true;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentFrames && !previousFrames) || (!currentFrames && previousFrames)) {\n    return false;\n  }\n\n  currentFrames = currentFrames ;\n  previousFrames = previousFrames ;\n\n  // If number of frames differ, they are not the same\n  if (previousFrames.length !== currentFrames.length) {\n    return false;\n  }\n\n  // Otherwise, compare the two\n  for (let i = 0; i < previousFrames.length; i++) {\n    var frameA = previousFrames[i];\n    var frameB = currentFrames[i];\n\n    if (\n      frameA.filename !== frameB.filename ||\n      frameA.lineno !== frameB.lineno ||\n      frameA.colno !== frameB.colno ||\n      frameA.function !== frameB.function\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameFingerprint(currentEvent, previousEvent) {\n  let currentFingerprint = currentEvent.fingerprint;\n  let previousFingerprint = previousEvent.fingerprint;\n\n  // If neither event has a fingerprint, they are assumed to be the same\n  if (!currentFingerprint && !previousFingerprint) {\n    return true;\n  }\n\n  // If only one event has a fingerprint, but not the other one, they are not the same\n  if ((currentFingerprint && !previousFingerprint) || (!currentFingerprint && previousFingerprint)) {\n    return false;\n  }\n\n  currentFingerprint = currentFingerprint ;\n  previousFingerprint = previousFingerprint ;\n\n  // Otherwise, compare the two\n  try {\n    return !!(currentFingerprint.join('') === previousFingerprint.join(''));\n  } catch (_oO) {\n    return false;\n  }\n}\n\n/** JSDoc */\nfunction _getExceptionFromEvent(event) {\n  return event.exception && event.exception.values && event.exception.values[0];\n}\n\n/** JSDoc */\nfunction _getFramesFromEvent(event) {\n  var exception = event.exception;\n\n  if (exception) {\n    try {\n      // @ts-ignore Object could be undefined\n      return exception.values[0].stacktrace.frames;\n    } catch (_oO) {\n      return undefined;\n    }\n  }\n  return undefined;\n}\n\nexport { Dedupe };\n//# sourceMappingURL=dedupe.js.map\n","import { Integrations, getIntegrationsToSetup, initAndBind, getCurrentHub, getReportDialogEndpoint } from '@sentry/core';\nimport { getGlobalObject, stackParserFromStackParserOptions, supportsFetch, logger, resolvedSyncPromise, addInstrumentationHandler } from '@sentry/utils';\nimport { BrowserClient } from './client.js';\nimport { wrap as wrap$1 } from './helpers.js';\nimport './integrations/index.js';\nimport { defaultStackParser } from './stack-parsers.js';\nimport './transports/index.js';\nimport { TryCatch } from './integrations/trycatch.js';\nimport { Breadcrumbs } from './integrations/breadcrumbs.js';\nimport { GlobalHandlers } from './integrations/globalhandlers.js';\nimport { LinkedErrors } from './integrations/linkederrors.js';\nimport { Dedupe } from './integrations/dedupe.js';\nimport { HttpContext } from './integrations/httpcontext.js';\nimport { makeFetchTransport } from './transports/fetch.js';\nimport { makeXHRTransport } from './transports/xhr.js';\n\nvar defaultIntegrations = [\n  new Integrations.InboundFilters(),\n  new Integrations.FunctionToString(),\n  new TryCatch(),\n  new Breadcrumbs(),\n  new GlobalHandlers(),\n  new LinkedErrors(),\n  new Dedupe(),\n  new HttpContext(),\n];\n\n/**\n * The Sentry Browser SDK Client.\n *\n * To use this SDK, call the {@link init} function as early as possible when\n * loading the web page. To set context information or send manual events, use\n * the provided methods.\n *\n * @example\n *\n * ```\n *\n * import { init } from '@sentry/browser';\n *\n * init({\n *   dsn: '__DSN__',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { configureScope } from '@sentry/browser';\n * configureScope((scope: Scope) => {\n *   scope.setExtra({ battery: 0.7 });\n *   scope.setTag({ user_mode: 'admin' });\n *   scope.setUser({ id: '4711' });\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { addBreadcrumb } from '@sentry/browser';\n * addBreadcrumb({\n *   message: 'My Breadcrumb',\n *   // ...\n * });\n * ```\n *\n * @example\n *\n * ```\n *\n * import * as Sentry from '@sentry/browser';\n * Sentry.captureMessage('Hello, world!');\n * Sentry.captureException(new Error('Good bye'));\n * Sentry.captureEvent({\n *   message: 'Manual',\n *   stacktrace: [\n *     // ...\n *   ],\n * });\n * ```\n *\n * @see {@link BrowserOptions} for documentation on configuration options.\n */\nfunction init(options = {}) {\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n  if (options.release === undefined) {\n    var window = getGlobalObject();\n    // This supports the variable that sentry-webpack-plugin injects\n    if (window.SENTRY_RELEASE && window.SENTRY_RELEASE.id) {\n      options.release = window.SENTRY_RELEASE.id;\n    }\n  }\n  if (options.autoSessionTracking === undefined) {\n    options.autoSessionTracking = true;\n  }\n  if (options.sendClientReports === undefined) {\n    options.sendClientReports = true;\n  }\n\n  var clientOptions = {\n    ...options,\n    stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),\n    integrations: getIntegrationsToSetup(options),\n    transport: options.transport || (supportsFetch() ? makeFetchTransport : makeXHRTransport),\n  };\n\n  initAndBind(BrowserClient, clientOptions);\n\n  if (options.autoSessionTracking) {\n    startSessionTracking();\n  }\n}\n\n/**\n * Present the user with a report dialog.\n *\n * @param options Everything is optional, we try to fetch all info need from the global scope.\n */\nfunction showReportDialog(options = {}, hub = getCurrentHub()) {\n  // doesn't work without a document (React Native)\n  var global = getGlobalObject();\n  if (!global.document) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Global document not defined in showReportDialog call');\n    return;\n  }\n\n  const { client, scope } = hub.getStackTop();\n  var dsn = options.dsn || (client && client.getDsn());\n  if (!dsn) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('DSN not configured for showReportDialog call');\n    return;\n  }\n\n  if (scope) {\n    options.user = {\n      ...scope.getUser(),\n      ...options.user,\n    };\n  }\n\n  if (!options.eventId) {\n    options.eventId = hub.lastEventId();\n  }\n\n  var script = global.document.createElement('script');\n  script.async = true;\n  script.src = getReportDialogEndpoint(dsn, options);\n\n  if (options.onLoad) {\n        script.onload = options.onLoad;\n  }\n\n  var injectionPoint = global.document.head || global.document.body;\n  if (injectionPoint) {\n    injectionPoint.appendChild(script);\n  } else {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Not injecting report dialog. No injection point found in HTML');\n  }\n}\n\n/**\n * This is the getter for lastEventId.\n *\n * @returns The last event id of a captured event.\n */\nfunction lastEventId() {\n  return getCurrentHub().lastEventId();\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction forceLoad() {\n  // Noop\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction onLoad(callback) {\n  callback();\n}\n\n/**\n * Call `flush()` on the current client, if there is one. See {@link Client.flush}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue. Omitting this parameter will cause\n * the client to wait until all events are sent before resolving the promise.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction flush(timeout) {\n  var client = getCurrentHub().getClient();\n  if (client) {\n    return client.flush(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Call `close()` on the current client, if there is one. See {@link Client.close}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue before shutting down. Omitting this\n * parameter will cause the client to wait until all events are sent before disabling itself.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction close(timeout) {\n  var client = getCurrentHub().getClient();\n  if (client) {\n    return client.close(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events and disable SDK. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Wrap code within a try/catch block so the SDK is able to capture errors.\n *\n * @param fn A function to wrap.\n *\n * @returns The result of wrapped function call.\n */\nfunction wrap(fn) {\n  return wrap$1(fn)();\n}\n\nfunction startSessionOnHub(hub) {\n  hub.startSession({ ignoreDuration: true });\n  hub.captureSession();\n}\n\n/**\n * Enable automatic Session Tracking for the initial page load.\n */\nfunction startSessionTracking() {\n  var window = getGlobalObject();\n  var document = window.document;\n\n  if (typeof document === 'undefined') {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('Session tracking in non-browser environment with @sentry/browser is not supported.');\n    return;\n  }\n\n  var hub = getCurrentHub();\n\n  // The only way for this to be false is for there to be a version mismatch between @sentry/browser (>= 6.0.0) and\n  // @sentry/hub (< 5.27.0). In the simple case, there won't ever be such a mismatch, because the two packages are\n  // pinned at the same version in package.json, but there are edge cases where it's possible. See\n  // https://github.com/getsentry/sentry-javascript/issues/3207 and\n  // https://github.com/getsentry/sentry-javascript/issues/3234 and\n  // https://github.com/getsentry/sentry-javascript/issues/3278.\n  if (!hub.captureSession) {\n    return;\n  }\n\n  // The session duration for browser sessions does not track a meaningful\n  // concept that can be used as a metric.\n  // Automatically captured sessions are akin to page views, and thus we\n  // discard their duration.\n  startSessionOnHub(hub);\n\n  // We want to create a session for every navigation as well\n  addInstrumentationHandler('history', ({ from, to }) => {\n    // Don't create an additional session for the initial route or if the location did not change\n    if (!(from === undefined || from === to)) {\n      startSessionOnHub(getCurrentHub());\n    }\n  });\n}\n\nexport { close, defaultIntegrations, flush, forceLoad, init, lastEventId, onLoad, showReportDialog, wrap };\n//# sourceMappingURL=sdk.js.map\n","import { SDK_VERSION, init as init$1 } from '@sentry/browser';\n\n/**\n * Inits the React SDK\n */\nfunction init(options) {\n  options._metadata = options._metadata || {};\n  options._metadata.sdk = options._metadata.sdk || {\n    name: 'sentry.javascript.react',\n    packages: [\n      {\n        name: 'npm:@sentry/react',\n        version: SDK_VERSION,\n      },\n    ],\n    version: SDK_VERSION,\n  };\n  init$1(options);\n}\n\nexport { init };\n//# sourceMappingURL=sdk.js.map\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import { getGlobalObject, getNumberOfUrlSegments, logger } from '@sentry/utils';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport React__default from 'react';\n\nvar _jsxFileName = \"/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/reactrouterv6.tsx\";\n\nlet activeTransaction;\n\nlet _useEffect;\nlet _useLocation;\nlet _useNavigationType;\nlet _createRoutesFromChildren;\nlet _matchRoutes;\nlet _customStartTransaction;\nlet _startTransactionOnLocationChange;\n\nvar global = getGlobalObject();\n\nvar SENTRY_TAGS = {\n  'routing.instrumentation': 'react-router-v6',\n};\n\nfunction reactRouterV6Instrumentation(\n  useEffect,\n  useLocation,\n  useNavigationType,\n  createRoutesFromChildren,\n  matchRoutes,\n) {\n  return (\n    customStartTransaction,\n    startTransactionOnPageLoad = true,\n    startTransactionOnLocationChange = true,\n  ) => {\n    var initPathName = global && global.location && global.location.pathname;\n    if (startTransactionOnPageLoad && initPathName) {\n      activeTransaction = customStartTransaction({\n        name: initPathName,\n        op: 'pageload',\n        tags: SENTRY_TAGS,\n        metadata: {\n          source: 'url',\n        },\n      });\n    }\n\n    _useEffect = useEffect;\n    _useLocation = useLocation;\n    _useNavigationType = useNavigationType;\n    _matchRoutes = matchRoutes;\n    _createRoutesFromChildren = createRoutesFromChildren;\n\n    _customStartTransaction = customStartTransaction;\n    _startTransactionOnLocationChange = startTransactionOnLocationChange;\n  };\n}\n\nfunction getNormalizedName(\n  routes,\n  location,\n  matchRoutes,\n) {\n  if (!routes || routes.length === 0 || !matchRoutes) {\n    return [location.pathname, 'url'];\n  }\n\n  var branches = matchRoutes(routes, location);\n\n  let pathBuilder = '';\n  if (branches) {\n        for (let x = 0; x < branches.length; x++) {\n      var branch = branches[x];\n      var route = branch.route;\n      if (route) {\n        // Early return if index route\n        if (route.index) {\n          return [branch.pathname, 'route'];\n        }\n\n        var path = route.path;\n        if (path) {\n          var newPath = path[0] === '/' ? path : `/${path}`;\n          pathBuilder += newPath;\n          if (branch.pathname === location.pathname) {\n            // If the route defined on the element is something like\n            // <Route path=\"/stores/:storeId/products/:productId\" element={<div>Product</div>} />\n            // We should check against the branch.pathname for the number of / seperators\n            if (getNumberOfUrlSegments(pathBuilder) !== getNumberOfUrlSegments(branch.pathname)) {\n              return [newPath, 'route'];\n            }\n            return [pathBuilder, 'route'];\n          }\n        }\n      }\n    }\n  }\n\n  return [location.pathname, 'url'];\n}\n\nfunction updatePageloadTransaction(location, routes) {\n  if (activeTransaction) {\n    activeTransaction.setName(...getNormalizedName(routes, location, _matchRoutes));\n  }\n}\n\nfunction handleNavigation(\n  location,\n  routes,\n  navigationType,\n  isBaseLocation,\n) {\n  if (isBaseLocation) {\n    if (activeTransaction) {\n      activeTransaction.finish();\n    }\n\n    return;\n  }\n\n  if (_startTransactionOnLocationChange && (navigationType === 'PUSH' || navigationType === 'POP')) {\n    if (activeTransaction) {\n      activeTransaction.finish();\n    }\n\n    const [name, source] = getNormalizedName(routes, location, _matchRoutes);\n    activeTransaction = _customStartTransaction({\n      name,\n      op: 'navigation',\n      tags: SENTRY_TAGS,\n      metadata: {\n        source,\n      },\n    });\n  }\n}\n\nfunction withSentryReactRouterV6Routing(Routes) {\n  if (\n    !_useEffect ||\n    !_useLocation ||\n    !_useNavigationType ||\n    !_createRoutesFromChildren ||\n    !_matchRoutes ||\n    !_customStartTransaction\n  ) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.');\n\n    return Routes;\n  }\n\n  let isBaseLocation = false;\n  let routes;\n\n  var SentryRoutes = (props) => {\n    var location = _useLocation();\n    var navigationType = _useNavigationType();\n\n    _useEffect(() => {\n      // Performance concern:\n      // This is repeated when <Routes /> is rendered.\n      routes = _createRoutesFromChildren(props.children);\n      isBaseLocation = true;\n\n      updatePageloadTransaction(location, routes);\n          }, [props.children]);\n\n    _useEffect(() => {\n      handleNavigation(location, routes, navigationType, isBaseLocation);\n    }, [props.children, location, navigationType, isBaseLocation]);\n\n    isBaseLocation = false;\n\n    // @ts-ignore Setting more specific React Component typing for `R` generic above\n    // will break advanced type inference done by react router params\n    return React__default.createElement(Routes, { ...props, __self: this, __source: {fileName: _jsxFileName, lineNumber: 223}} );\n  };\n\n  hoistNonReactStatics(SentryRoutes, Routes);\n\n  // @ts-ignore Setting more specific React Component typing for `R` generic above\n  // will break advanced type inference done by react router params\n  return SentryRoutes;\n}\n\nfunction wrapUseRoutes(origUseRoutes) {\n  if (!_useEffect || !_useLocation || !_useNavigationType || !_matchRoutes || !_customStartTransaction) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        'reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters.',\n      );\n\n    return origUseRoutes;\n  }\n\n  let isBaseLocation = false;\n\n  return (routes, location) => {\n    var SentryRoutes = (props) => {\n      var Routes = origUseRoutes(routes, location);\n\n      var locationArgObject = typeof location === 'string' ? { pathname: location } : location;\n      var locationObject = (locationArgObject ) || _useLocation();\n      var navigationType = _useNavigationType();\n\n      _useEffect(() => {\n        isBaseLocation = true;\n\n        updatePageloadTransaction(locationObject, routes);\n      }, [props]);\n\n      _useEffect(() => {\n        handleNavigation(locationObject, routes, navigationType, isBaseLocation);\n      }, [props, locationObject, navigationType, isBaseLocation]);\n\n      isBaseLocation = false;\n\n      return Routes;\n    };\n\n    return React__default.createElement(SentryRoutes, {__self: this, __source: {fileName: _jsxFileName, lineNumber: 268}} );\n  };\n}\n\nexport { reactRouterV6Instrumentation, withSentryReactRouterV6Routing, wrapUseRoutes };\n//# sourceMappingURL=reactrouterv6.js.map\n","import { getCurrentHub } from '@sentry/hub';\nexport { TRACEPARENT_REGEXP, extractTraceparentData, stripUrlQueryAndFragment } from '@sentry/utils';\n\n/**\n * Determines if tracing is currently enabled.\n *\n * Tracing is enabled when at least one of `tracesSampleRate` and `tracesSampler` is defined in the SDK config.\n */\nfunction hasTracingEnabled(\n  maybeOptions,\n) {\n  var client = getCurrentHub().getClient();\n  var options = maybeOptions || (client && client.getOptions());\n  return !!options && ('tracesSampleRate' in options || 'tracesSampler' in options);\n}\n\n/** Grabs active transaction off scope, if any */\nfunction getActiveTransaction(maybeHub) {\n  var hub = maybeHub || getCurrentHub();\n  var scope = hub.getScope();\n  return scope && (scope.getTransaction() );\n}\n\n/**\n * Converts from milliseconds to seconds\n * @param time time in ms\n */\nfunction msToSec(time) {\n  return time / 1000;\n}\n\n/**\n * Converts from seconds to milliseconds\n * @param time time in seconds\n */\nfunction secToMs(time) {\n  return time * 1000;\n}\n\nexport { getActiveTransaction, hasTracingEnabled, msToSec, secToMs };\n//# sourceMappingURL=utils.js.map\n","import { addInstrumentationHandler, logger } from '@sentry/utils';\nimport { getActiveTransaction } from './utils.js';\n\n/**\n * Configures global error listeners\n */\nfunction registerErrorInstrumentation() {\n  addInstrumentationHandler('error', errorCallback);\n  addInstrumentationHandler('unhandledrejection', errorCallback);\n}\n\n/**\n * If an error or unhandled promise occurs, we mark the active transaction as failed\n */\nfunction errorCallback() {\n  var activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    var status = 'internal_error';\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Transaction: ${status} -> Global error occured`);\n    activeTransaction.setStatus(status);\n  }\n}\n\nexport { registerErrorInstrumentation };\n//# sourceMappingURL=errors.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { uuid4, timestampWithMs, logger, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Keeps track of finished spans for a given transaction\n * @internal\n * @hideconstructor\n * @hidden\n */\nclass SpanRecorder {\n   __init() {this.spans = [];}\n\n   constructor(maxlen = 1000) {;SpanRecorder.prototype.__init.call(this);\n    this._maxlen = maxlen;\n  }\n\n  /**\n   * This is just so that we don't run out of memory while recording a lot\n   * of spans. At some point we just stop and flush out the start of the\n   * trace tree (i.e.the first n spans with the smallest\n   * start_timestamp).\n   */\n   add(span) {\n    if (this.spans.length > this._maxlen) {\n      span.spanRecorder = undefined;\n    } else {\n      this.spans.push(span);\n    }\n  }\n}\n\n/**\n * Span contains all data about a span\n */\nclass Span  {\n  /**\n   * @inheritDoc\n   */\n   __init2() {this.traceId = uuid4();}\n\n  /**\n   * @inheritDoc\n   */\n   __init3() {this.spanId = uuid4().substring(16);}\n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * Internal keeper of the status\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * Timestamp in seconds when the span was created.\n   */\n   __init4() {this.startTimestamp = timestampWithMs();}\n\n  /**\n   * Timestamp in seconds when the span ended.\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n   __init5() {this.tags = {};}\n\n  /**\n   * @inheritDoc\n   */\n     __init6() {this.data = {};}\n\n  /**\n   * List of spans that were finalized\n   */\n  \n\n  /**\n   * @inheritDoc\n   */\n  \n\n  /**\n   * You should never call the constructor manually, always use `Sentry.startTransaction()`\n   * or call `startChild()` on an existing span.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(spanContext) {;Span.prototype.__init2.call(this);Span.prototype.__init3.call(this);Span.prototype.__init4.call(this);Span.prototype.__init5.call(this);Span.prototype.__init6.call(this);\n    if (!spanContext) {\n      return this;\n    }\n    if (spanContext.traceId) {\n      this.traceId = spanContext.traceId;\n    }\n    if (spanContext.spanId) {\n      this.spanId = spanContext.spanId;\n    }\n    if (spanContext.parentSpanId) {\n      this.parentSpanId = spanContext.parentSpanId;\n    }\n    // We want to include booleans as well here\n    if ('sampled' in spanContext) {\n      this.sampled = spanContext.sampled;\n    }\n    if (spanContext.op) {\n      this.op = spanContext.op;\n    }\n    if (spanContext.description) {\n      this.description = spanContext.description;\n    }\n    if (spanContext.data) {\n      this.data = spanContext.data;\n    }\n    if (spanContext.tags) {\n      this.tags = spanContext.tags;\n    }\n    if (spanContext.status) {\n      this.status = spanContext.status;\n    }\n    if (spanContext.startTimestamp) {\n      this.startTimestamp = spanContext.startTimestamp;\n    }\n    if (spanContext.endTimestamp) {\n      this.endTimestamp = spanContext.endTimestamp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startChild(\n    spanContext,\n  ) {\n    var childSpan = new Span({\n      ...spanContext,\n      parentSpanId: this.spanId,\n      sampled: this.sampled,\n      traceId: this.traceId,\n    });\n\n    childSpan.spanRecorder = this.spanRecorder;\n    if (childSpan.spanRecorder) {\n      childSpan.spanRecorder.add(childSpan);\n    }\n\n    childSpan.transaction = this.transaction;\n\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && childSpan.transaction) {\n      var opStr = (spanContext && spanContext.op) || '< unknown op >';\n      var nameStr = childSpan.transaction.name || '< unknown name >';\n      var idStr = childSpan.transaction.spanId;\n\n      var logMessage = `[Tracing] Starting '${opStr}' span on transaction '${nameStr}' (${idStr}).`;\n      childSpan.transaction.metadata.spanMetadata[childSpan.spanId] = { logMessage };\n      logger.log(logMessage);\n    }\n\n    return childSpan;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this.tags = { ...this.tags, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n     setData(key, value) {\n    this.data = { ...this.data, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setStatus(value) {\n    this.status = value;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setHttpStatus(httpStatus) {\n    this.setTag('http.status_code', String(httpStatus));\n    var spanStatus = spanStatusfromHttpCode(httpStatus);\n    if (spanStatus !== 'unknown_error') {\n      this.setStatus(spanStatus);\n    }\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isSuccess() {\n    return this.status === 'ok';\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    if (\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      // Don't call this for transactions\n      this.transaction &&\n      this.transaction.spanId !== this.spanId\n    ) {\n      const { logMessage } = this.transaction.metadata.spanMetadata[this.spanId];\n      if (logMessage) {\n        logger.log((logMessage ).replace('Starting', 'Finishing'));\n      }\n    }\n\n    this.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toTraceparent() {\n    let sampledString = '';\n    if (this.sampled !== undefined) {\n      sampledString = this.sampled ? '-1' : '-0';\n    }\n    return `${this.traceId}-${this.spanId}${sampledString}`;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    return dropUndefinedKeys({\n      data: this.data,\n      description: this.description,\n      endTimestamp: this.endTimestamp,\n      op: this.op,\n      parentSpanId: this.parentSpanId,\n      sampled: this.sampled,\n      spanId: this.spanId,\n      startTimestamp: this.startTimestamp,\n      status: this.status,\n      tags: this.tags,\n      traceId: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(spanContext) {\n    this.data = _nullishCoalesce(spanContext.data, () => ( {}));\n    this.description = spanContext.description;\n    this.endTimestamp = spanContext.endTimestamp;\n    this.op = spanContext.op;\n    this.parentSpanId = spanContext.parentSpanId;\n    this.sampled = spanContext.sampled;\n    this.spanId = _nullishCoalesce(spanContext.spanId, () => ( this.spanId));\n    this.startTimestamp = _nullishCoalesce(spanContext.startTimestamp, () => ( this.startTimestamp));\n    this.status = spanContext.status;\n    this.tags = _nullishCoalesce(spanContext.tags, () => ( {}));\n    this.traceId = _nullishCoalesce(spanContext.traceId, () => ( this.traceId));\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTraceContext()\n\n {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      trace_id: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toJSON()\n\n {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      start_timestamp: this.startTimestamp,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      timestamp: this.endTimestamp,\n      trace_id: this.traceId,\n    });\n  }\n}\n\n/**\n * Converts a HTTP status code into a {@link SpanStatusType}.\n *\n * @param httpStatus The HTTP response status code.\n * @returns The span status or unknown_error.\n */\nfunction spanStatusfromHttpCode(httpStatus) {\n  if (httpStatus < 400 && httpStatus >= 100) {\n    return 'ok';\n  }\n\n  if (httpStatus >= 400 && httpStatus < 500) {\n    switch (httpStatus) {\n      case 401:\n        return 'unauthenticated';\n      case 403:\n        return 'permission_denied';\n      case 404:\n        return 'not_found';\n      case 409:\n        return 'already_exists';\n      case 413:\n        return 'failed_precondition';\n      case 429:\n        return 'resource_exhausted';\n      default:\n        return 'invalid_argument';\n    }\n  }\n\n  if (httpStatus >= 500 && httpStatus < 600) {\n    switch (httpStatus) {\n      case 501:\n        return 'unimplemented';\n      case 503:\n        return 'unavailable';\n      case 504:\n        return 'deadline_exceeded';\n      default:\n        return 'internal_error';\n    }\n  }\n\n  return 'unknown_error';\n}\n\nexport { Span, SpanRecorder, spanStatusfromHttpCode };\n//# sourceMappingURL=span.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { getCurrentHub } from '@sentry/hub';\nimport { timestampInSeconds, logger, dropUndefinedKeys } from '@sentry/utils';\nimport { Span, SpanRecorder } from './span.js';\n\n/** JSDoc */\nclass Transaction extends Span  {\n  \n\n  /**\n   * The reference to the current hub.\n   */\n  \n\n   __init() {this._measurements = {};}\n\n   __init2() {this._frozenDynamicSamplingContext = undefined;}\n\n  /**\n   * This constructor should never be called manually. Those instrumenting tracing should use\n   * `Sentry.startTransaction()`, and internal methods should use `hub.startTransaction()`.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(transactionContext, hub) {\n    super(transactionContext);Transaction.prototype.__init.call(this);Transaction.prototype.__init2.call(this);;\n\n    this._hub = hub || getCurrentHub();\n\n    this._name = transactionContext.name || '';\n\n    this.metadata = {\n      source: 'custom',\n      ...transactionContext.metadata,\n      spanMetadata: {},\n      changes: [],\n      propagations: 0,\n    };\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    // this is because transactions are also spans, and spans have a transaction pointer\n    this.transaction = this;\n\n    // If Dynamic Sampling Context is provided during the creation of the transaction, we freeze it as it usually means\n    // there is incoming Dynamic Sampling Context. (Either through an incoming request, a baggage meta-tag, or other means)\n    var incomingDynamicSamplingContext = this.metadata.dynamicSamplingContext;\n    if (incomingDynamicSamplingContext) {\n      // We shallow copy this in case anything writes to the original reference of the passed in `dynamicSamplingContext`\n      this._frozenDynamicSamplingContext = { ...incomingDynamicSamplingContext };\n    }\n  }\n\n  /** Getter for `name` property */\n   get name() {\n    return this._name;\n  }\n\n  /** Setter for `name` property, which also sets `source` as custom */\n   set name(newName) {\n    this.setName(newName);\n  }\n\n  /**\n   * JSDoc\n   */\n   setName(name, source = 'custom') {\n    // `source` could change without the name changing if we discover that an unparameterized route is actually\n    // parameterized by virtue of having no parameters in its path\n    if (name !== this.name || source !== this.metadata.source) {\n      this.metadata.changes.push({\n        // log previous source\n        source: this.metadata.source,\n        timestamp: timestampInSeconds(),\n        propagations: this.metadata.propagations,\n      });\n    }\n\n    this._name = name;\n    this.metadata.source = source;\n  }\n\n  /**\n   * Attaches SpanRecorder to the span itself\n   * @param maxlen maximum number of spans that can be recorded\n   */\n   initSpanRecorder(maxlen = 1000) {\n    if (!this.spanRecorder) {\n      this.spanRecorder = new SpanRecorder(maxlen);\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMeasurement(name, value, unit = '') {\n    this._measurements[name] = { value, unit };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMetadata(newMetadata) {\n    this.metadata = { ...this.metadata, ...newMetadata };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    // This transaction is already finished, so we should not flush it again.\n    if (this.endTimestamp !== undefined) {\n      return undefined;\n    }\n\n    if (!this.name) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Transaction has no name, falling back to `<unlabeled transaction>`.');\n      this.name = '<unlabeled transaction>';\n    }\n\n    // just sets the end timestamp\n    super.finish(endTimestamp);\n\n    if (this.sampled !== true) {\n      // At this point if `sampled !== true` we want to discard the transaction.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Discarding transaction because its trace was not chosen to be sampled.');\n\n      var client = this._hub.getClient();\n      if (client) {\n        client.recordDroppedEvent('sample_rate', 'transaction');\n      }\n\n      return undefined;\n    }\n\n    var finishedSpans = this.spanRecorder ? this.spanRecorder.spans.filter(s => s !== this && s.endTimestamp) : [];\n\n    if (this._trimEnd && finishedSpans.length > 0) {\n      this.endTimestamp = finishedSpans.reduce((prev, current) => {\n        if (prev.endTimestamp && current.endTimestamp) {\n          return prev.endTimestamp > current.endTimestamp ? prev : current;\n        }\n        return prev;\n      }).endTimestamp;\n    }\n\n    var metadata = this.metadata;\n\n    var transaction = {\n      contexts: {\n        trace: this.getTraceContext(),\n      },\n      spans: finishedSpans,\n      start_timestamp: this.startTimestamp,\n      tags: this.tags,\n      timestamp: this.endTimestamp,\n      transaction: this.name,\n      type: 'transaction',\n      sdkProcessingMetadata: {\n        ...metadata,\n        dynamicSamplingContext: this.getDynamicSamplingContext(),\n      },\n      ...(metadata.source && {\n        transaction_info: {\n          source: metadata.source,\n          changes: metadata.changes,\n          propagations: metadata.propagations,\n        },\n      }),\n    };\n\n    var hasMeasurements = Object.keys(this._measurements).length > 0;\n\n    if (hasMeasurements) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(\n          '[Measurements] Adding measurements to transaction',\n          JSON.stringify(this._measurements, undefined, 2),\n        );\n      transaction.measurements = this._measurements;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`);\n\n    return this._hub.captureEvent(transaction);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    var spanContext = super.toContext();\n\n    return dropUndefinedKeys({\n      ...spanContext,\n      name: this.name,\n      trimEnd: this._trimEnd,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(transactionContext) {\n    super.updateWithContext(transactionContext);\n\n    this.name = _nullishCoalesce(transactionContext.name, () => ( ''));\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    return this;\n  }\n\n  /**\n   * @inheritdoc\n   *\n   * @experimental\n   */\n   getDynamicSamplingContext() {\n    if (this._frozenDynamicSamplingContext) {\n      return this._frozenDynamicSamplingContext;\n    }\n\n    var hub = this._hub || getCurrentHub();\n    var client = hub && hub.getClient();\n\n    if (!client) return {};\n\n    const { environment, release } = client.getOptions() || {};\n    const { publicKey: public_key } = client.getDsn() || {};\n\n    var maybeSampleRate = (this.metadata.transactionSampling || {}).rate;\n    var sample_rate = maybeSampleRate !== undefined ? maybeSampleRate.toString() : undefined;\n\n    var scope = hub.getScope();\n    const { segment: user_segment } = (scope && scope.getUser()) || {};\n\n    var source = this.metadata.source;\n\n    // We don't want to have a transaction name in the DSC if the source is \"url\" because URLs might contain PII\n    var transaction = source && source !== 'url' ? this.name : undefined;\n\n    var dsc = dropUndefinedKeys({\n      environment,\n      release,\n      transaction,\n      user_segment,\n      public_key,\n      trace_id: this.traceId,\n      sample_rate,\n    });\n\n    // Uncomment if we want to make DSC immutable\n    // this._frozenDynamicSamplingContext = dsc;\n\n    return dsc;\n  }\n}\n\nexport { Transaction };\n//# sourceMappingURL=transaction.js.map\n","import { timestampWithMs, logger } from '@sentry/utils';\nimport { SpanRecorder } from './span.js';\nimport { Transaction } from './transaction.js';\n\nvar DEFAULT_IDLE_TIMEOUT = 1000;\nvar DEFAULT_FINAL_TIMEOUT = 30000;\nvar HEARTBEAT_INTERVAL = 5000;\n\n/**\n * @inheritDoc\n */\nclass IdleTransactionSpanRecorder extends SpanRecorder {\n   constructor(\n      _pushActivity,\n      _popActivity,\n     transactionSpanId,\n    maxlen,\n  ) {\n    super(maxlen);this._pushActivity = _pushActivity;this._popActivity = _popActivity;this.transactionSpanId = transactionSpanId;;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   add(span) {\n    // We should make sure we do not push and pop activities for\n    // the transaction that this span recorder belongs to.\n    if (span.spanId !== this.transactionSpanId) {\n      // We patch span.finish() to pop an activity after setting an endTimestamp.\n      span.finish = (endTimestamp) => {\n        span.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n        this._popActivity(span.spanId);\n      };\n\n      // We should only push new activities if the span does not have an end timestamp.\n      if (span.endTimestamp === undefined) {\n        this._pushActivity(span.spanId);\n      }\n    }\n\n    super.add(span);\n  }\n}\n\n/**\n * An IdleTransaction is a transaction that automatically finishes. It does this by tracking child spans as activities.\n * You can have multiple IdleTransactions active, but if the `onScope` option is specified, the idle transaction will\n * put itself on the scope on creation.\n */\nclass IdleTransaction extends Transaction {\n  // Activities store a list of active spans\n   __init() {this.activities = {};}\n\n  // Track state of activities in previous heartbeat\n  \n\n  // Amount of times heartbeat has counted. Will cause transaction to finish after 3 beats.\n   __init2() {this._heartbeatCounter = 0;}\n\n  // We should not use heartbeat if we finished a transaction\n   __init3() {this._finished = false;}\n\n    __init4() {this._beforeFinishCallbacks = [];}\n\n  /**\n   * Timer that tracks Transaction idleTimeout\n   */\n  \n\n   constructor(\n    transactionContext,\n      _idleHub,\n    /**\n     * The time to wait in ms until the idle transaction will be finished. This timer is started each time\n     * there are no active spans on this transaction.\n     */\n      _idleTimeout = DEFAULT_IDLE_TIMEOUT,\n    /**\n     * The final value in ms that a transaction cannot exceed\n     */\n      _finalTimeout = DEFAULT_FINAL_TIMEOUT,\n    // Whether or not the transaction should put itself on the scope when it starts and pop itself off when it ends\n      _onScope = false,\n  ) {\n    super(transactionContext, _idleHub);this._idleHub = _idleHub;this._idleTimeout = _idleTimeout;this._finalTimeout = _finalTimeout;this._onScope = _onScope;IdleTransaction.prototype.__init.call(this);IdleTransaction.prototype.__init2.call(this);IdleTransaction.prototype.__init3.call(this);IdleTransaction.prototype.__init4.call(this);;\n\n    if (_onScope) {\n      // There should only be one active transaction on the scope\n      clearActiveTransaction(_idleHub);\n\n      // We set the transaction here on the scope so error events pick up the trace\n      // context and attach it to the error.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`);\n      _idleHub.configureScope(scope => scope.setSpan(this));\n    }\n\n    this._startIdleTimeout();\n    setTimeout(() => {\n      if (!this._finished) {\n        this.setStatus('deadline_exceeded');\n        this.finish();\n      }\n    }, this._finalTimeout);\n  }\n\n  /** {@inheritDoc} */\n   finish(endTimestamp = timestampWithMs()) {\n    this._finished = true;\n    this.activities = {};\n\n    if (this.spanRecorder) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log('[Tracing] finishing IdleTransaction', new Date(endTimestamp * 1000).toISOString(), this.op);\n\n      for (var callback of this._beforeFinishCallbacks) {\n        callback(this, endTimestamp);\n      }\n\n      this.spanRecorder.spans = this.spanRecorder.spans.filter((span) => {\n        // If we are dealing with the transaction itself, we just return it\n        if (span.spanId === this.spanId) {\n          return true;\n        }\n\n        // We cancel all pending spans with status \"cancelled\" to indicate the idle transaction was finished early\n        if (!span.endTimestamp) {\n          span.endTimestamp = endTimestamp;\n          span.setStatus('cancelled');\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log('[Tracing] cancelling span since transaction ended early', JSON.stringify(span, undefined, 2));\n        }\n\n        var keepSpan = span.startTimestamp < endTimestamp;\n        if (!keepSpan) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log(\n              '[Tracing] discarding Span since it happened after Transaction was finished',\n              JSON.stringify(span, undefined, 2),\n            );\n        }\n        return keepSpan;\n      });\n\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] flushing IdleTransaction');\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] No active IdleTransaction');\n    }\n\n    // if `this._onScope` is `true`, the transaction put itself on the scope when it started\n    if (this._onScope) {\n      clearActiveTransaction(this._idleHub);\n    }\n\n    return super.finish(endTimestamp);\n  }\n\n  /**\n   * Register a callback function that gets excecuted before the transaction finishes.\n   * Useful for cleanup or if you want to add any additional spans based on current context.\n   *\n   * This is exposed because users have no other way of running something before an idle transaction\n   * finishes.\n   */\n   registerBeforeFinishCallback(callback) {\n    this._beforeFinishCallbacks.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   initSpanRecorder(maxlen) {\n    if (!this.spanRecorder) {\n      var pushActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._pushActivity(id);\n      };\n      var popActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._popActivity(id);\n      };\n\n      this.spanRecorder = new IdleTransactionSpanRecorder(pushActivity, popActivity, this.spanId, maxlen);\n\n      // Start heartbeat so that transactions do not run forever.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Starting heartbeat');\n      this._pingHeartbeat();\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * Cancels the existing idletimeout, if there is one\n   */\n   _cancelIdleTimeout() {\n    if (this._idleTimeoutID) {\n      clearTimeout(this._idleTimeoutID);\n      this._idleTimeoutID = undefined;\n    }\n  }\n\n  /**\n   * Creates an idletimeout\n   */\n   _startIdleTimeout(endTimestamp) {\n    this._cancelIdleTimeout();\n    this._idleTimeoutID = setTimeout(() => {\n      if (!this._finished && Object.keys(this.activities).length === 0) {\n        this.finish(endTimestamp);\n      }\n    }, this._idleTimeout);\n  }\n\n  /**\n   * Start tracking a specific activity.\n   * @param spanId The span id that represents the activity\n   */\n   _pushActivity(spanId) {\n    this._cancelIdleTimeout();\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] pushActivity: ${spanId}`);\n    this.activities[spanId] = true;\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n  }\n\n  /**\n   * Remove an activity from usage\n   * @param spanId The span id that represents the activity\n   */\n   _popActivity(spanId) {\n    if (this.activities[spanId]) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] popActivity ${spanId}`);\n            delete this.activities[spanId];\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n    }\n\n    if (Object.keys(this.activities).length === 0) {\n      // We need to add the timeout here to have the real endtimestamp of the transaction\n      // Remember timestampWithMs is in seconds, timeout is in ms\n      var endTimestamp = timestampWithMs() + this._idleTimeout / 1000;\n      this._startIdleTimeout(endTimestamp);\n    }\n  }\n\n  /**\n   * Checks when entries of this.activities are not changing for 3 beats.\n   * If this occurs we finish the transaction.\n   */\n   _beat() {\n    // We should not be running heartbeat if the idle transaction is finished.\n    if (this._finished) {\n      return;\n    }\n\n    var heartbeatString = Object.keys(this.activities).join('');\n\n    if (heartbeatString === this._prevHeartbeatString) {\n      this._heartbeatCounter += 1;\n    } else {\n      this._heartbeatCounter = 1;\n    }\n\n    this._prevHeartbeatString = heartbeatString;\n\n    if (this._heartbeatCounter >= 3) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Transaction finished because of no change for 3 heart beats');\n      this.setStatus('deadline_exceeded');\n      this.finish();\n    } else {\n      this._pingHeartbeat();\n    }\n  }\n\n  /**\n   * Pings the heartbeat\n   */\n   _pingHeartbeat() {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`);\n    setTimeout(() => {\n      this._beat();\n    }, HEARTBEAT_INTERVAL);\n  }\n}\n\n/**\n * Reset transaction on scope to `undefined`\n */\nfunction clearActiveTransaction(hub) {\n  var scope = hub.getScope();\n  if (scope) {\n    var transaction = scope.getTransaction();\n    if (transaction) {\n      scope.setSpan(undefined);\n    }\n  }\n}\n\nexport { DEFAULT_FINAL_TIMEOUT, DEFAULT_IDLE_TIMEOUT, HEARTBEAT_INTERVAL, IdleTransaction, IdleTransactionSpanRecorder };\n//# sourceMappingURL=idletransaction.js.map\n","import { getMainCarrier } from '@sentry/hub';\nimport { logger, isNaN, dynamicRequire, loadModule, isNodeEnv } from '@sentry/utils';\nimport { registerErrorInstrumentation } from './errors.js';\nimport { IdleTransaction } from './idletransaction.js';\nimport { Transaction } from './transaction.js';\nimport { hasTracingEnabled } from './utils.js';\n\n/** Returns all trace headers that are currently on the top scope. */\nfunction traceHeaders() {\n  var scope = this.getScope();\n  if (scope) {\n    var span = scope.getSpan();\n    if (span) {\n      return {\n        'sentry-trace': span.toTraceparent(),\n      };\n    }\n  }\n  return {};\n}\n\n/**\n * Makes a sampling decision for the given transaction and stores it on the transaction.\n *\n * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n * sent to Sentry.\n *\n * @param transaction: The transaction needing a sampling decision\n * @param options: The current client's options, so we can access `tracesSampleRate` and/or `tracesSampler`\n * @param samplingContext: Default and user-provided data which may be used to help make the decision\n *\n * @returns The given transaction with its `sampled` value set\n */\nfunction sample(\n  transaction,\n  options,\n  samplingContext,\n) {\n  // nothing to do if tracing is not enabled\n  if (!hasTracingEnabled(options)) {\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n  if (transaction.sampled !== undefined) {\n    transaction.setMetadata({\n      transactionSampling: {\n        method: 'explicitly_set',\n        rate: Number(transaction.sampled),\n      },\n    });\n    return transaction;\n  }\n\n  // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` were defined, so one of these should\n  // work; prefer the hook if so\n  let sampleRate;\n  if (typeof options.tracesSampler === 'function') {\n    sampleRate = options.tracesSampler(samplingContext);\n    transaction.setMetadata({\n      transactionSampling: {\n        method: 'client_sampler',\n        // cast to number in case it's a boolean\n        rate: Number(sampleRate),\n      },\n    });\n  } else if (samplingContext.parentSampled !== undefined) {\n    sampleRate = samplingContext.parentSampled;\n    transaction.setMetadata({\n      transactionSampling: { method: 'inheritance' },\n    });\n  } else {\n    sampleRate = options.tracesSampleRate;\n    transaction.setMetadata({\n      transactionSampling: {\n        method: 'client_rate',\n        // cast to number in case it's a boolean\n        rate: Number(sampleRate),\n      },\n    });\n  }\n\n  // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n  // only valid values are booleans or numbers between 0 and 1.)\n  if (!isValidSampleRate(sampleRate)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('[Tracing] Discarding transaction because of invalid sample rate.');\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it's a sign the transaction should be dropped\n  if (!sampleRate) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because ${\n          typeof options.tracesSampler === 'function'\n            ? 'tracesSampler returned 0 or false'\n            : 'a negative sampling decision was inherited or tracesSampleRate is set to 0'\n        }`,\n      );\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n  // a boolean, the < comparison will cause it to be automatically cast to 1 if it's true and 0 if it's false.\n  transaction.sampled = Math.random() < (sampleRate );\n\n  // if we're not going to keep it, we're done\n  if (!transaction.sampled) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(\n          sampleRate,\n        )})`,\n      );\n    return transaction;\n  }\n\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`);\n  return transaction;\n}\n\n/**\n * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n */\nfunction isValidSampleRate(rate) {\n  // we need to check NaN explicitly because it's of type 'number' and therefore wouldn't get caught by this typecheck\n    if (isNaN(rate) || !(typeof rate === 'number' || typeof rate === 'boolean')) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(\n          rate,\n        )} of type ${JSON.stringify(typeof rate)}.`,\n      );\n    return false;\n  }\n\n  // in case sampleRate is a boolean, it will get automatically cast to 1 if it's true and 0 if it's false\n  if (rate < 0 || rate > 1) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`);\n    return false;\n  }\n  return true;\n}\n\n/**\n * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n *\n * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n * \"extension method.\"\n *\n * @param this: The Hub starting the transaction\n * @param transactionContext: Data used to configure the transaction\n * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n *\n * @returns The new transaction\n *\n * @see {@link Hub.startTransaction}\n */\nfunction _startTransaction(\n  \n  transactionContext,\n  customSamplingContext,\n) {\n  var client = this.getClient();\n  var options = (client && client.getOptions()) || {};\n\n  let transaction = new Transaction(transactionContext, this);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  return transaction;\n}\n\n/**\n * Create new idle transaction.\n */\nfunction startIdleTransaction(\n  hub,\n  transactionContext,\n  idleTimeout,\n  finalTimeout,\n  onScope,\n  customSamplingContext,\n) {\n  var client = hub.getClient();\n  var options = (client && client.getOptions()) || {};\n\n  let transaction = new IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, onScope);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  return transaction;\n}\n\n/**\n * @private\n */\nfunction _addTracingExtensions() {\n  var carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n  carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n  if (!carrier.__SENTRY__.extensions.startTransaction) {\n    carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n  }\n  if (!carrier.__SENTRY__.extensions.traceHeaders) {\n    carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n  }\n}\n\n/**\n * @private\n */\nfunction _autoloadDatabaseIntegrations() {\n  var carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n\n  var packageToIntegrationMapping = {\n    mongodb() {\n      var integration = dynamicRequire(module, './integrations/node/mongo') \n\n;\n      return new integration.Mongo();\n    },\n    mongoose() {\n      var integration = dynamicRequire(module, './integrations/node/mongo') \n\n;\n      return new integration.Mongo({ mongoose: true });\n    },\n    mysql() {\n      var integration = dynamicRequire(module, './integrations/node/mysql') \n\n;\n      return new integration.Mysql();\n    },\n    pg() {\n      var integration = dynamicRequire(module, './integrations/node/postgres') \n\n;\n      return new integration.Postgres();\n    },\n  };\n\n  var mappedPackages = Object.keys(packageToIntegrationMapping)\n    .filter(moduleName => !!loadModule(moduleName))\n    .map(pkg => {\n      try {\n        return packageToIntegrationMapping[pkg]();\n      } catch (e) {\n        return undefined;\n      }\n    })\n    .filter(p => p) ;\n\n  if (mappedPackages.length > 0) {\n    carrier.__SENTRY__.integrations = [...(carrier.__SENTRY__.integrations || []), ...mappedPackages];\n  }\n}\n\n/**\n * This patches the global object and injects the Tracing extensions methods\n */\nfunction addExtensionMethods() {\n  _addTracingExtensions();\n\n  // Detect and automatically load specified integrations.\n  if (isNodeEnv()) {\n    _autoloadDatabaseIntegrations();\n  }\n\n  // If an error happens globally, we should make sure transaction status is set to error.\n  registerErrorInstrumentation();\n}\n\nexport { _addTracingExtensions, addExtensionMethods, startIdleTransaction };\n//# sourceMappingURL=hubextensions.js.map\n","import { getGlobalObject, logger } from '@sentry/utils';\nimport { getActiveTransaction } from '../utils.js';\n\nvar global = getGlobalObject();\n\n/**\n * Add a listener that cancels and finishes a transaction when the global\n * document is hidden.\n */\nfunction registerBackgroundTabDetection() {\n  if (global && global.document) {\n    global.document.addEventListener('visibilitychange', () => {\n      var activeTransaction = getActiveTransaction() ;\n      if (global.document.hidden && activeTransaction) {\n        var statusType = 'cancelled';\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          logger.log(\n            `[Tracing] Transaction: ${statusType} -> since tab moved to the background, op: ${activeTransaction.op}`,\n          );\n        // We should not set status if it is already set, this prevent important statuses like\n        // error or data loss from being overwritten on transaction.\n        if (!activeTransaction.status) {\n          activeTransaction.setStatus(statusType);\n        }\n        activeTransaction.setTag('visibilitychange', 'document.hidden');\n        activeTransaction.finish();\n      }\n    });\n  } else {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('[Tracing] Could not set up background tab detection due to lack of global document');\n  }\n}\n\nexport { registerBackgroundTabDetection };\n//# sourceMappingURL=backgroundtab.js.map\n","var bindReporter = (\n  callback,\n  metric,\n  reportAllChanges,\n) => {\n  let prevValue;\n  return (forceReport) => {\n    if (metric.value >= 0) {\n      if (forceReport || reportAllChanges) {\n        metric.delta = metric.value - (prevValue || 0);\n\n        // Report the metric if there's a non-zero delta or if no previous\n        // value exists (which can happen in the case of the document becoming\n        // hidden when the metric value is 0).\n        // See: https://github.com/GoogleChrome/web-vitals/issues/14\n        if (metric.delta || prevValue === undefined) {\n          prevValue = metric.value;\n          callback(metric);\n        }\n      }\n    }\n  };\n};\n\nexport { bindReporter };\n//# sourceMappingURL=bindReporter.js.map\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Performantly generate a unique, 30-char string by combining a version\n * number, the current timestamp with a 13-digit number integer.\n * @return {string}\n */\nvar generateUniqueID = () => {\n  return `v2-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`;\n};\n\nexport { generateUniqueID };\n//# sourceMappingURL=generateUniqueID.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { generateUniqueID } from './generateUniqueID.js';\n\nvar initMetric = (name, value) => {\n  return {\n    name,\n    value: _nullishCoalesce(value, () => ( -1)),\n    delta: 0,\n    entries: [],\n    id: generateUniqueID(),\n  };\n};\n\nexport { initMetric };\n//# sourceMappingURL=initMetric.js.map\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Takes a performance entry type and a callback function, and creates a\n * `PerformanceObserver` instance that will observe the specified entry type\n * with buffering enabled and call the callback _for each entry_.\n *\n * This function also feature-detects entry support and wraps the logic in a\n * try/catch to avoid errors in unsupporting browsers.\n */\nvar observe = (type, callback) => {\n  try {\n    if (PerformanceObserver.supportedEntryTypes.includes(type)) {\n      // More extensive feature detect needed for Firefox due to:\n      // https://github.com/GoogleChrome/web-vitals/issues/142\n      if (type === 'first-input' && !('PerformanceEventTiming' in self)) {\n        return;\n      }\n\n      var po = new PerformanceObserver(l => l.getEntries().map(callback));\n\n      po.observe({ type, buffered: true });\n      return po;\n    }\n  } catch (e) {\n    // Do nothing.\n  }\n  return;\n};\n\nexport { observe };\n//# sourceMappingURL=observe.js.map\n","import { getGlobalObject } from '@sentry/utils';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar onHidden = (cb, once) => {\n  var onHiddenOrPageHide = (event) => {\n    if (event.type === 'pagehide' || getGlobalObject().document.visibilityState === 'hidden') {\n      cb(event);\n      if (once) {\n        removeEventListener('visibilitychange', onHiddenOrPageHide, true);\n        removeEventListener('pagehide', onHiddenOrPageHide, true);\n      }\n    }\n  };\n  addEventListener('visibilitychange', onHiddenOrPageHide, true);\n  // Some browsers have buggy implementations of visibilitychange,\n  // so we use pagehide in addition, just to be safe.\n  addEventListener('pagehide', onHiddenOrPageHide, true);\n};\n\nexport { onHidden };\n//# sourceMappingURL=onHidden.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://wicg.github.io/layout-instability/#sec-layout-shift\n\nvar getCLS = (onReport, reportAllChanges) => {\n  var metric = initMetric('CLS', 0);\n  let report;\n\n  let sessionValue = 0;\n  let sessionEntries = [];\n\n  var entryHandler = (entry) => {\n    // Only count layout shifts without recent user input.\n    // TODO: Figure out why entry can be undefined\n    if (entry && !entry.hadRecentInput) {\n      var firstSessionEntry = sessionEntries[0];\n      var lastSessionEntry = sessionEntries[sessionEntries.length - 1];\n\n      // If the entry occurred less than 1 second after the previous entry and\n      // less than 5 seconds after the first entry in the session, include the\n      // entry in the current session. Otherwise, start a new session.\n      if (\n        sessionValue &&\n        sessionEntries.length !== 0 &&\n        entry.startTime - lastSessionEntry.startTime < 1000 &&\n        entry.startTime - firstSessionEntry.startTime < 5000\n      ) {\n        sessionValue += entry.value;\n        sessionEntries.push(entry);\n      } else {\n        sessionValue = entry.value;\n        sessionEntries = [entry];\n      }\n\n      // If the current session value is larger than the current CLS value,\n      // update CLS and the entries contributing to it.\n      if (sessionValue > metric.value) {\n        metric.value = sessionValue;\n        metric.entries = sessionEntries;\n        if (report) {\n          report();\n        }\n      }\n    }\n  };\n\n  var po = observe('layout-shift', entryHandler );\n  if (po) {\n    report = bindReporter(onReport, metric, reportAllChanges);\n\n    onHidden(() => {\n      po.takeRecords().map(entryHandler );\n      report(true);\n    });\n  }\n};\n\nexport { getCLS };\n//# sourceMappingURL=getCLS.js.map\n","import { getGlobalObject } from '@sentry/utils';\nimport { onHidden } from './onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet firstHiddenTime = -1;\n\nvar initHiddenTime = () => {\n  return getGlobalObject().document.visibilityState === 'hidden' ? 0 : Infinity;\n};\n\nvar trackChanges = () => {\n  // Update the time if/when the document becomes hidden.\n  onHidden(({ timeStamp }) => {\n    firstHiddenTime = timeStamp;\n  }, true);\n};\n\nvar getVisibilityWatcher = (\n\n) => {\n  if (firstHiddenTime < 0) {\n    // If the document is hidden when this code runs, assume it was hidden\n    // since navigation start. This isn't a perfect heuristic, but it's the\n    // best we can do until an API is available to support querying past\n    // visibilityState.\n    firstHiddenTime = initHiddenTime();\n    trackChanges();\n  }\n  return {\n    get firstHiddenTime() {\n      return firstHiddenTime;\n    },\n  };\n};\n\nexport { getVisibilityWatcher };\n//# sourceMappingURL=getVisibilityWatcher.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar getFID = (onReport, reportAllChanges) => {\n  var visibilityWatcher = getVisibilityWatcher();\n  var metric = initMetric('FID');\n  let report;\n\n  var entryHandler = (entry) => {\n    // Only report if the page wasn't hidden prior to the first input.\n    if (report && entry.startTime < visibilityWatcher.firstHiddenTime) {\n      metric.value = entry.processingStart - entry.startTime;\n      metric.entries.push(entry);\n      report(true);\n    }\n  };\n\n  var po = observe('first-input', entryHandler );\n  if (po) {\n    report = bindReporter(onReport, metric, reportAllChanges);\n    onHidden(() => {\n      po.takeRecords().map(entryHandler );\n      po.disconnect();\n    }, true);\n  }\n};\n\nexport { getFID };\n//# sourceMappingURL=getFID.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://wicg.github.io/largest-contentful-paint/#sec-largest-contentful-paint-interface\n\nvar reportedMetricIDs = {};\n\nvar getLCP = (onReport, reportAllChanges) => {\n  var visibilityWatcher = getVisibilityWatcher();\n  var metric = initMetric('LCP');\n  let report;\n\n  var entryHandler = (entry) => {\n    // The startTime attribute returns the value of the renderTime if it is not 0,\n    // and the value of the loadTime otherwise.\n    var value = entry.startTime;\n\n    // If the page was hidden prior to paint time of the entry,\n    // ignore it and mark the metric as final, otherwise add the entry.\n    if (value < visibilityWatcher.firstHiddenTime) {\n      metric.value = value;\n      metric.entries.push(entry);\n    }\n\n    if (report) {\n      report();\n    }\n  };\n\n  var po = observe('largest-contentful-paint', entryHandler);\n\n  if (po) {\n    report = bindReporter(onReport, metric, reportAllChanges);\n\n    var stopListening = () => {\n      if (!reportedMetricIDs[metric.id]) {\n        po.takeRecords().map(entryHandler );\n        po.disconnect();\n        reportedMetricIDs[metric.id] = true;\n        report(true);\n      }\n    };\n\n    // Stop listening after input. Note: while scrolling is an input that\n    // stop LCP observation, it's unreliable since it can be programmatically\n    // generated. See: https://github.com/GoogleChrome/web-vitals/issues/75\n    ['keydown', 'click'].forEach(type => {\n      addEventListener(type, stopListening, { once: true, capture: true });\n    });\n\n    onHidden(stopListening, true);\n  }\n};\n\nexport { getLCP };\n//# sourceMappingURL=getLCP.js.map\n","/**\n * Checks if a given value is a valid measurement value.\n */\nfunction isMeasurementValue(value) {\n  return typeof value === 'number' && isFinite(value);\n}\n\n/**\n * Helper function to start child on transactions. This function will make sure that the transaction will\n * use the start timestamp of the created child span if it is earlier than the transactions actual\n * start timestamp.\n */\nfunction _startChild(transaction, { startTimestamp, ...ctx }) {\n  if (startTimestamp && transaction.startTimestamp > startTimestamp) {\n    transaction.startTimestamp = startTimestamp;\n  }\n\n  return transaction.startChild({\n    startTimestamp,\n    ...ctx,\n  });\n}\n\nexport { _startChild, isMeasurementValue };\n//# sourceMappingURL=utils.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { getGlobalObject, browserPerformanceTimeOrigin, logger, htmlTreeAsString } from '@sentry/utils';\nimport { getActiveTransaction, msToSec } from '../../utils.js';\nimport { getCLS } from '../web-vitals/getCLS.js';\nimport { getFID } from '../web-vitals/getFID.js';\nimport { getLCP } from '../web-vitals/getLCP.js';\nimport { getVisibilityWatcher } from '../web-vitals/lib/getVisibilityWatcher.js';\nimport { observe } from '../web-vitals/lib/observe.js';\nimport { _startChild, isMeasurementValue } from './utils.js';\n\nvar global = getGlobalObject();\n\nfunction getBrowserPerformanceAPI() {\n  return global && global.addEventListener && global.performance;\n}\n\nlet _performanceCursor = 0;\n\nlet _measurements = {};\nlet _lcpEntry;\nlet _clsEntry;\n\n/**\n * Start tracking web vitals\n */\nfunction startTrackingWebVitals(reportAllChanges = false) {\n  var performance = getBrowserPerformanceAPI();\n  if (performance && browserPerformanceTimeOrigin) {\n    if (performance.mark) {\n      global.performance.mark('sentry-tracing-init');\n    }\n    _trackCLS();\n    _trackLCP(reportAllChanges);\n    _trackFID();\n  }\n}\n\n/**\n * Start tracking long tasks.\n */\nfunction startTrackingLongTasks() {\n  var entryHandler = (entry) => {\n    var transaction = getActiveTransaction() ;\n    if (!transaction) {\n      return;\n    }\n    var startTime = msToSec((browserPerformanceTimeOrigin ) + entry.startTime);\n    var duration = msToSec(entry.duration);\n    transaction.startChild({\n      description: 'Main UI thread blocked',\n      op: 'ui.long-task',\n      startTimestamp: startTime,\n      endTimestamp: startTime + duration,\n    });\n  };\n\n  observe('longtask', entryHandler);\n}\n\n/** Starts tracking the Cumulative Layout Shift on the current page. */\nfunction _trackCLS() {\n  // See:\n  // https://web.dev/evolving-cls/\n  // https://web.dev/cls-web-tooling/\n  getCLS(metric => {\n    var entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding CLS');\n    _measurements['cls'] = { value: metric.value, unit: '' };\n    _clsEntry = entry ;\n  });\n}\n\n/** Starts tracking the Largest Contentful Paint on the current page. */\nfunction _trackLCP(reportAllChanges) {\n  getLCP(metric => {\n    var entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding LCP');\n    _measurements['lcp'] = { value: metric.value, unit: 'millisecond' };\n    _lcpEntry = entry ;\n  }, reportAllChanges);\n}\n\n/** Starts tracking the First Input Delay on the current page. */\nfunction _trackFID() {\n  getFID(metric => {\n    var entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    var timeOrigin = msToSec(browserPerformanceTimeOrigin );\n    var startTime = msToSec(entry.startTime);\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FID');\n    _measurements['fid'] = { value: metric.value, unit: 'millisecond' };\n    _measurements['mark.fid'] = { value: timeOrigin + startTime, unit: 'second' };\n  });\n}\n\n/** Add performance related spans to a transaction */\nfunction addPerformanceEntries(transaction) {\n  var performance = getBrowserPerformanceAPI();\n  if (!performance || !global.performance.getEntries || !browserPerformanceTimeOrigin) {\n    // Gatekeeper if performance API not available\n    return;\n  }\n\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Adding & adjusting spans using Performance API');\n  var timeOrigin = msToSec(browserPerformanceTimeOrigin);\n\n  var performanceEntries = performance.getEntries();\n\n  let responseStartTimestamp;\n  let requestStartTimestamp;\n\n    performanceEntries.slice(_performanceCursor).forEach((entry) => {\n    var startTime = msToSec(entry.startTime);\n    var duration = msToSec(entry.duration);\n\n    if (transaction.op === 'navigation' && timeOrigin + startTime < transaction.startTimestamp) {\n      return;\n    }\n\n    switch (entry.entryType) {\n      case 'navigation': {\n        _addNavigationSpans(transaction, entry, timeOrigin);\n        responseStartTimestamp = timeOrigin + msToSec(entry.responseStart);\n        requestStartTimestamp = timeOrigin + msToSec(entry.requestStart);\n        break;\n      }\n      case 'mark':\n      case 'paint':\n      case 'measure': {\n        _addMeasureSpans(transaction, entry, startTime, duration, timeOrigin);\n\n        // capture web vitals\n        var firstHidden = getVisibilityWatcher();\n        // Only report if the page wasn't hidden prior to the web vital.\n        var shouldRecord = entry.startTime < firstHidden.firstHiddenTime;\n\n        if (entry.name === 'first-paint' && shouldRecord) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FP');\n          _measurements['fp'] = { value: entry.startTime, unit: 'millisecond' };\n        }\n        if (entry.name === 'first-contentful-paint' && shouldRecord) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FCP');\n          _measurements['fcp'] = { value: entry.startTime, unit: 'millisecond' };\n        }\n        break;\n      }\n      case 'resource': {\n        var resourceName = (entry.name ).replace(global.location.origin, '');\n        _addResourceSpans(transaction, entry, resourceName, startTime, duration, timeOrigin);\n        break;\n      }\n      default:\n      // Ignore other entry types.\n    }\n  });\n\n  _performanceCursor = Math.max(performanceEntries.length - 1, 0);\n\n  _trackNavigator(transaction);\n\n  // Measurements are only available for pageload transactions\n  if (transaction.op === 'pageload') {\n    // Generate TTFB (Time to First Byte), which measured as the time between the beginning of the transaction and the\n    // start of the response in milliseconds\n    if (typeof responseStartTimestamp === 'number') {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding TTFB');\n      _measurements['ttfb'] = {\n        value: (responseStartTimestamp - transaction.startTimestamp) * 1000,\n        unit: 'millisecond',\n      };\n\n      if (typeof requestStartTimestamp === 'number' && requestStartTimestamp <= responseStartTimestamp) {\n        // Capture the time spent making the request and receiving the first byte of the response.\n        // This is the time between the start of the request and the start of the response in milliseconds.\n        _measurements['ttfb.requestTime'] = {\n          value: (responseStartTimestamp - requestStartTimestamp) * 1000,\n          unit: 'millisecond',\n        };\n      }\n    }\n\n    ['fcp', 'fp', 'lcp'].forEach(name => {\n      if (!_measurements[name] || timeOrigin >= transaction.startTimestamp) {\n        return;\n      }\n      // The web vitals, fcp, fp, lcp, and ttfb, all measure relative to timeOrigin.\n      // Unfortunately, timeOrigin is not captured within the transaction span data, so these web vitals will need\n      // to be adjusted to be relative to transaction.startTimestamp.\n      var oldValue = _measurements[name].value;\n      var measurementTimestamp = timeOrigin + msToSec(oldValue);\n\n      // normalizedValue should be in milliseconds\n      var normalizedValue = Math.abs((measurementTimestamp - transaction.startTimestamp) * 1000);\n      var delta = normalizedValue - oldValue;\n\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(`[Measurements] Normalized ${name} from ${oldValue} to ${normalizedValue} (${delta})`);\n      _measurements[name].value = normalizedValue;\n    });\n\n    var fidMark = _measurements['mark.fid'];\n    if (fidMark && _measurements['fid']) {\n      // create span for FID\n      _startChild(transaction, {\n        description: 'first input delay',\n        endTimestamp: fidMark.value + msToSec(_measurements['fid'].value),\n        op: 'web.vitals',\n        startTimestamp: fidMark.value,\n      });\n\n      // Delete mark.fid as we don't want it to be part of final payload\n      delete _measurements['mark.fid'];\n    }\n\n    // If FCP is not recorded we should not record the cls value\n    // according to the new definition of CLS.\n    if (!('fcp' in _measurements)) {\n      delete _measurements.cls;\n    }\n\n    Object.keys(_measurements).forEach(measurementName => {\n      transaction.setMeasurement(\n        measurementName,\n        _measurements[measurementName].value,\n        _measurements[measurementName].unit,\n      );\n    });\n\n    _tagMetricInfo(transaction);\n  }\n\n  _lcpEntry = undefined;\n  _clsEntry = undefined;\n  _measurements = {};\n}\n\n/** Create measure related spans */\nfunction _addMeasureSpans(\n  transaction,\n    entry,\n  startTime,\n  duration,\n  timeOrigin,\n) {\n  var measureStartTimestamp = timeOrigin + startTime;\n  var measureEndTimestamp = measureStartTimestamp + duration;\n\n  _startChild(transaction, {\n    description: entry.name ,\n    endTimestamp: measureEndTimestamp,\n    op: entry.entryType ,\n    startTimestamp: measureStartTimestamp,\n  });\n\n  return measureStartTimestamp;\n}\n\n/** Instrument navigation entries */\nfunction _addNavigationSpans(transaction, entry, timeOrigin) {\n  ['unloadEvent', 'redirect', 'domContentLoadedEvent', 'loadEvent', 'connect'].forEach(event => {\n    _addPerformanceNavigationTiming(transaction, entry, event, timeOrigin);\n  });\n  _addPerformanceNavigationTiming(transaction, entry, 'secureConnection', timeOrigin, 'TLS/SSL', 'connectEnd');\n  _addPerformanceNavigationTiming(transaction, entry, 'fetch', timeOrigin, 'cache', 'domainLookupStart');\n  _addPerformanceNavigationTiming(transaction, entry, 'domainLookup', timeOrigin, 'DNS');\n  _addRequest(transaction, entry, timeOrigin);\n}\n\n/** Create performance navigation related spans */\nfunction _addPerformanceNavigationTiming(\n  transaction,\n    entry,\n  event,\n  timeOrigin,\n  description,\n  eventEnd,\n) {\n  var end = eventEnd ? (entry[eventEnd] ) : (entry[`${event}End`] );\n  var start = entry[`${event}Start`] ;\n  if (!start || !end) {\n    return;\n  }\n  _startChild(transaction, {\n    op: 'browser',\n    description: _nullishCoalesce(description, () => ( event)),\n    startTimestamp: timeOrigin + msToSec(start),\n    endTimestamp: timeOrigin + msToSec(end),\n  });\n}\n\n/** Create request and response related spans */\nfunction _addRequest(transaction, entry, timeOrigin) {\n  _startChild(transaction, {\n    op: 'browser',\n    description: 'request',\n    startTimestamp: timeOrigin + msToSec(entry.requestStart ),\n    endTimestamp: timeOrigin + msToSec(entry.responseEnd ),\n  });\n\n  _startChild(transaction, {\n    op: 'browser',\n    description: 'response',\n    startTimestamp: timeOrigin + msToSec(entry.responseStart ),\n    endTimestamp: timeOrigin + msToSec(entry.responseEnd ),\n  });\n}\n\n/** Create resource-related spans */\nfunction _addResourceSpans(\n  transaction,\n  entry,\n  resourceName,\n  startTime,\n  duration,\n  timeOrigin,\n) {\n  // we already instrument based on fetch and xhr, so we don't need to\n  // duplicate spans here.\n  if (entry.initiatorType === 'xmlhttprequest' || entry.initiatorType === 'fetch') {\n    return;\n  }\n\n    var data = {};\n  if ('transferSize' in entry) {\n    data['Transfer Size'] = entry.transferSize;\n  }\n  if ('encodedBodySize' in entry) {\n    data['Encoded Body Size'] = entry.encodedBodySize;\n  }\n  if ('decodedBodySize' in entry) {\n    data['Decoded Body Size'] = entry.decodedBodySize;\n  }\n\n  var startTimestamp = timeOrigin + startTime;\n  var endTimestamp = startTimestamp + duration;\n\n  _startChild(transaction, {\n    description: resourceName,\n    endTimestamp,\n    op: entry.initiatorType ? `resource.${entry.initiatorType}` : 'resource',\n    startTimestamp,\n    data,\n  });\n}\n\n/**\n * Capture the information of the user agent.\n */\nfunction _trackNavigator(transaction) {\n  var navigator = global.navigator ;\n  if (!navigator) {\n    return;\n  }\n\n  // track network connectivity\n  var connection = navigator.connection;\n  if (connection) {\n    if (connection.effectiveType) {\n      transaction.setTag('effectiveConnectionType', connection.effectiveType);\n    }\n\n    if (connection.type) {\n      transaction.setTag('connectionType', connection.type);\n    }\n\n    if (isMeasurementValue(connection.rtt)) {\n      _measurements['connection.rtt'] = { value: connection.rtt, unit: 'millisecond' };\n    }\n\n    if (isMeasurementValue(connection.downlink)) {\n      _measurements['connection.downlink'] = { value: connection.downlink, unit: '' }; // unit is empty string for now, while relay doesn't support download speed units\n    }\n  }\n\n  if (isMeasurementValue(navigator.deviceMemory)) {\n    transaction.setTag('deviceMemory', `${navigator.deviceMemory} GB`);\n  }\n\n  if (isMeasurementValue(navigator.hardwareConcurrency)) {\n    transaction.setTag('hardwareConcurrency', String(navigator.hardwareConcurrency));\n  }\n}\n\n/** Add LCP / CLS data to transaction to allow debugging */\nfunction _tagMetricInfo(transaction) {\n  if (_lcpEntry) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding LCP Data');\n\n    // Capture Properties of the LCP element that contributes to the LCP.\n\n    if (_lcpEntry.element) {\n      transaction.setTag('lcp.element', htmlTreeAsString(_lcpEntry.element));\n    }\n\n    if (_lcpEntry.id) {\n      transaction.setTag('lcp.id', _lcpEntry.id);\n    }\n\n    if (_lcpEntry.url) {\n      // Trim URL to the first 200 characters.\n      transaction.setTag('lcp.url', _lcpEntry.url.trim().slice(0, 200));\n    }\n\n    transaction.setTag('lcp.size', _lcpEntry.size);\n  }\n\n  // See: https://developer.mozilla.org/en-US/docs/Web/API/LayoutShift\n  if (_clsEntry && _clsEntry.sources) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding CLS Data');\n    _clsEntry.sources.forEach((source, index) =>\n      transaction.setTag(`cls.source.${index + 1}`, htmlTreeAsString(source.node)),\n    );\n  }\n}\n\nexport { _addMeasureSpans, _addResourceSpans, addPerformanceEntries, startTrackingLongTasks, startTrackingWebVitals };\n//# sourceMappingURL=index.js.map\n","import { isMatchingPattern, addInstrumentationHandler, dynamicSamplingContextToSentryBaggageHeader, isInstanceOf, BAGGAGE_HEADER_NAME } from '@sentry/utils';\nimport { hasTracingEnabled, getActiveTransaction } from '../utils.js';\n\nvar DEFAULT_TRACING_ORIGINS = ['localhost', /^\\//];\n\n/** Options for Request Instrumentation */\n\nvar defaultRequestInstrumentationOptions = {\n  traceFetch: true,\n  traceXHR: true,\n  tracingOrigins: DEFAULT_TRACING_ORIGINS,\n};\n\n/** Registers span creators for xhr and fetch requests  */\nfunction instrumentOutgoingRequests(_options) {\n    const { traceFetch, traceXHR, tracingOrigins, shouldCreateSpanForRequest } = {\n    ...defaultRequestInstrumentationOptions,\n    ..._options,\n  };\n\n  // We should cache url -> decision so that we don't have to compute\n  // regexp everytime we create a request.\n  var urlMap = {};\n\n  var defaultShouldCreateSpan = (url) => {\n    if (urlMap[url]) {\n      return urlMap[url];\n    }\n    var origins = tracingOrigins;\n    urlMap[url] =\n      origins.some((origin) => isMatchingPattern(url, origin)) &&\n      !isMatchingPattern(url, 'sentry_key');\n    return urlMap[url];\n  };\n\n  // We want that our users don't have to re-implement shouldCreateSpanForRequest themselves\n  // That's why we filter out already unwanted Spans from tracingOrigins\n  let shouldCreateSpan = defaultShouldCreateSpan;\n  if (typeof shouldCreateSpanForRequest === 'function') {\n    shouldCreateSpan = (url) => {\n      return defaultShouldCreateSpan(url) && shouldCreateSpanForRequest(url);\n    };\n  }\n\n  var spans = {};\n\n  if (traceFetch) {\n    addInstrumentationHandler('fetch', (handlerData) => {\n      fetchCallback(handlerData, shouldCreateSpan, spans);\n    });\n  }\n\n  if (traceXHR) {\n    addInstrumentationHandler('xhr', (handlerData) => {\n      xhrCallback(handlerData, shouldCreateSpan, spans);\n    });\n  }\n}\n\n/**\n * Create and track fetch request spans\n */\nfunction fetchCallback(\n  handlerData,\n  shouldCreateSpan,\n  spans,\n) {\n  if (!hasTracingEnabled() || !(handlerData.fetchData && shouldCreateSpan(handlerData.fetchData.url))) {\n    return;\n  }\n\n  if (handlerData.endTimestamp) {\n    var spanId = handlerData.fetchData.__span;\n    if (!spanId) return;\n\n    var span = spans[spanId];\n    if (span) {\n      if (handlerData.response) {\n        // TODO (kmclb) remove this once types PR goes through\n                span.setHttpStatus(handlerData.response.status);\n      } else if (handlerData.error) {\n        span.setStatus('internal_error');\n      }\n      span.finish();\n\n            delete spans[spanId];\n    }\n    return;\n  }\n\n  var activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    var span = activeTransaction.startChild({\n      data: {\n        ...handlerData.fetchData,\n        type: 'fetch',\n      },\n      description: `${handlerData.fetchData.method} ${handlerData.fetchData.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.fetchData.__span = span.spanId;\n    spans[span.spanId] = span;\n\n    var request = handlerData.args[0];\n\n    // In case the user hasn't set the second argument of a fetch call we default it to `{}`.\n    handlerData.args[1] = handlerData.args[1] || {};\n\n        var options = handlerData.args[1];\n\n    options.headers = addTracingHeadersToFetchRequest(\n      request,\n      activeTransaction.getDynamicSamplingContext(),\n      span,\n      options,\n    );\n\n    activeTransaction.metadata.propagations += 1;\n  }\n}\n\nfunction addTracingHeadersToFetchRequest(\n  request,\n  dynamicSamplingContext,\n  span,\n  options\n\n,\n) {\n  var sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n  var sentryTraceHeader = span.toTraceparent();\n\n  var headers =\n    typeof Request !== 'undefined' && isInstanceOf(request, Request) ? (request ).headers : options.headers;\n\n  if (!headers) {\n    return { 'sentry-trace': sentryTraceHeader, baggage: sentryBaggageHeader };\n  } else if (typeof Headers !== 'undefined' && isInstanceOf(headers, Headers)) {\n    var newHeaders = new Headers(headers );\n\n    newHeaders.append('sentry-trace', sentryTraceHeader);\n\n    if (sentryBaggageHeader) {\n      // If the same header is appended miultiple times the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.append(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n    }\n\n    return newHeaders ;\n  } else if (Array.isArray(headers)) {\n    var newHeaders = [...headers, ['sentry-trace', sentryTraceHeader]];\n\n    if (sentryBaggageHeader) {\n      // If there are multiple entries with the same key, the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.push([BAGGAGE_HEADER_NAME, sentryBaggageHeader]);\n    }\n\n    return newHeaders;\n  } else {\n    var existingBaggageHeader = 'baggage' in headers ? headers.baggage : undefined;\n    var newBaggageHeaders = [];\n\n    if (Array.isArray(existingBaggageHeader)) {\n      newBaggageHeaders.push(...existingBaggageHeader);\n    } else if (existingBaggageHeader) {\n      newBaggageHeaders.push(existingBaggageHeader);\n    }\n\n    if (sentryBaggageHeader) {\n      newBaggageHeaders.push(sentryBaggageHeader);\n    }\n\n    return {\n      ...(headers ),\n      'sentry-trace': sentryTraceHeader,\n      baggage: newBaggageHeaders.length > 0 ? newBaggageHeaders.join(',') : undefined,\n    };\n  }\n}\n\n/**\n * Create and track xhr request spans\n */\nfunction xhrCallback(\n  handlerData,\n  shouldCreateSpan,\n  spans,\n) {\n  if (\n    !hasTracingEnabled() ||\n    (handlerData.xhr && handlerData.xhr.__sentry_own_request__) ||\n    !(handlerData.xhr && handlerData.xhr.__sentry_xhr__ && shouldCreateSpan(handlerData.xhr.__sentry_xhr__.url))\n  ) {\n    return;\n  }\n\n  var xhr = handlerData.xhr.__sentry_xhr__;\n\n  // check first if the request has finished and is tracked by an existing span which should now end\n  if (handlerData.endTimestamp) {\n    var spanId = handlerData.xhr.__sentry_xhr_span_id__;\n    if (!spanId) return;\n\n    var span = spans[spanId];\n    if (span) {\n      span.setHttpStatus(xhr.status_code);\n      span.finish();\n\n            delete spans[spanId];\n    }\n    return;\n  }\n\n  // if not, create a new span to track it\n  var activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    var span = activeTransaction.startChild({\n      data: {\n        ...xhr.data,\n        type: 'xhr',\n        method: xhr.method,\n        url: xhr.url,\n      },\n      description: `${xhr.method} ${xhr.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.xhr.__sentry_xhr_span_id__ = span.spanId;\n    spans[handlerData.xhr.__sentry_xhr_span_id__] = span;\n\n    if (handlerData.xhr.setRequestHeader) {\n      try {\n        handlerData.xhr.setRequestHeader('sentry-trace', span.toTraceparent());\n\n        var dynamicSamplingContext = activeTransaction.getDynamicSamplingContext();\n        var sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n\n        if (sentryBaggageHeader) {\n          // From MDN: \"If this method is called several times with the same header, the values are merged into one single request header.\"\n          // We can therefore simply set a baggage header without checking what was there before\n          // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader\n          handlerData.xhr.setRequestHeader(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n        }\n\n        activeTransaction.metadata.propagations += 1;\n      } catch (_) {\n        // Error: InvalidStateError: Failed to execute 'setRequestHeader' on 'XMLHttpRequest': The object's state must be OPENED.\n      }\n    }\n  }\n}\n\nexport { DEFAULT_TRACING_ORIGINS, defaultRequestInstrumentationOptions, fetchCallback, instrumentOutgoingRequests, xhrCallback };\n//# sourceMappingURL=request.js.map\n","import { getGlobalObject, logger, addInstrumentationHandler } from '@sentry/utils';\n\nvar global = getGlobalObject();\n\n/**\n * Default function implementing pageload and navigation transactions\n */\nfunction instrumentRoutingWithDefaults(\n  customStartTransaction,\n  startTransactionOnPageLoad = true,\n  startTransactionOnLocationChange = true,\n) {\n  if (!global || !global.location) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Could not initialize routing instrumentation due to invalid location');\n    return;\n  }\n\n  let startingUrl = global.location.href;\n\n  let activeTransaction;\n  if (startTransactionOnPageLoad) {\n    activeTransaction = customStartTransaction({\n      name: global.location.pathname,\n      op: 'pageload',\n      metadata: { source: 'url' },\n    });\n  }\n\n  if (startTransactionOnLocationChange) {\n    addInstrumentationHandler('history', ({ to, from }) => {\n      /**\n       * This early return is there to account for some cases where a navigation transaction starts right after\n       * long-running pageload. We make sure that if `from` is undefined and a valid `startingURL` exists, we don't\n       * create an uneccessary navigation transaction.\n       *\n       * This was hard to duplicate, but this behavior stopped as soon as this fix was applied. This issue might also\n       * only be caused in certain development environments where the usage of a hot module reloader is causing\n       * errors.\n       */\n      if (from === undefined && startingUrl && startingUrl.indexOf(to) !== -1) {\n        startingUrl = undefined;\n        return;\n      }\n\n      if (from !== to) {\n        startingUrl = undefined;\n        if (activeTransaction) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`);\n          // If there's an open transaction on the scope, we need to finish it before creating an new one.\n          activeTransaction.finish();\n        }\n        activeTransaction = customStartTransaction({\n          name: global.location.pathname,\n          op: 'navigation',\n          metadata: { source: 'url' },\n        });\n      }\n    });\n  }\n}\n\nexport { instrumentRoutingWithDefaults };\n//# sourceMappingURL=router.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, extractTraceparentData, baggageHeaderToDynamicSamplingContext, getGlobalObject, getDomElement } from '@sentry/utils';\nimport { startIdleTransaction } from '../hubextensions.js';\nimport { DEFAULT_IDLE_TIMEOUT, DEFAULT_FINAL_TIMEOUT } from '../idletransaction.js';\nimport '../utils.js';\nimport { registerBackgroundTabDetection } from './backgroundtab.js';\nimport { startTrackingWebVitals, startTrackingLongTasks, addPerformanceEntries } from './metrics/index.js';\nimport { defaultRequestInstrumentationOptions, instrumentOutgoingRequests } from './request.js';\nimport { instrumentRoutingWithDefaults } from './router.js';\n\nvar BROWSER_TRACING_INTEGRATION_ID = 'BrowserTracing';\n\n/** Options for Browser Tracing integration */\n\nvar DEFAULT_BROWSER_TRACING_OPTIONS = {\n  idleTimeout: DEFAULT_IDLE_TIMEOUT,\n  finalTimeout: DEFAULT_FINAL_TIMEOUT,\n  markBackgroundTransactions: true,\n  routingInstrumentation: instrumentRoutingWithDefaults,\n  startTransactionOnLocationChange: true,\n  startTransactionOnPageLoad: true,\n  _experiments: { enableLongTask: true },\n  ...defaultRequestInstrumentationOptions,\n};\n\n/**\n * The Browser Tracing integration automatically instruments browser pageload/navigation\n * actions as transactions, and captures requests, metrics and errors as spans.\n *\n * The integration can be configured with a variety of options, and can be extended to use\n * any routing library. This integration uses {@see IdleTransaction} to create transactions.\n */\nclass BrowserTracing  {\n  // This class currently doesn't have a static `id` field like the other integration classes, because it prevented\n  // @sentry/tracing from being treeshaken. Tree shakers do not like static fields, because they behave like side effects.\n  // TODO: Come up with a better plan, than using static fields on integration classes, and use that plan on all\n  // integrations.\n\n  /** Browser Tracing integration options */\n  \n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = BROWSER_TRACING_INTEGRATION_ID;}\n\n   constructor(_options) {;BrowserTracing.prototype.__init.call(this);\n    let tracingOrigins = defaultRequestInstrumentationOptions.tracingOrigins;\n    // NOTE: Logger doesn't work in constructors, as it's initialized after integrations instances\n    if (_options) {\n      if (_options.tracingOrigins && Array.isArray(_options.tracingOrigins)) {\n        tracingOrigins = _options.tracingOrigins;\n      } else {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && (this._emitOptionsWarning = true);\n      }\n    }\n\n    this.options = {\n      ...DEFAULT_BROWSER_TRACING_OPTIONS,\n      ..._options,\n      tracingOrigins,\n    };\n\n    const { _metricOptions } = this.options;\n    startTrackingWebVitals(_metricOptions && _metricOptions._reportAllChanges);\n    if (_optionalChain([this, 'access', _2 => _2.options, 'access', _3 => _3._experiments, 'optionalAccess', _4 => _4.enableLongTask])) {\n      startTrackingLongTasks();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    this._getCurrentHub = getCurrentHub;\n\n    if (this._emitOptionsWarning) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          '[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace.',\n        );\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `[Tracing] We added a reasonable default for you: ${defaultRequestInstrumentationOptions.tracingOrigins}`,\n        );\n    }\n\n        const {\n      routingInstrumentation: instrumentRouting,\n      startTransactionOnLocationChange,\n      startTransactionOnPageLoad,\n      markBackgroundTransactions,\n      traceFetch,\n      traceXHR,\n      tracingOrigins,\n      shouldCreateSpanForRequest,\n    } = this.options;\n\n    instrumentRouting(\n      (context) => this._createRouteTransaction(context),\n      startTransactionOnPageLoad,\n      startTransactionOnLocationChange,\n    );\n\n    if (markBackgroundTransactions) {\n      registerBackgroundTabDetection();\n    }\n\n    instrumentOutgoingRequests({ traceFetch, traceXHR, tracingOrigins, shouldCreateSpanForRequest });\n  }\n\n  /** Create routing idle transaction. */\n   _createRouteTransaction(context) {\n    if (!this._getCurrentHub) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(`[Tracing] Did not create ${context.op} transaction because _getCurrentHub is invalid.`);\n      return undefined;\n    }\n\n        const { beforeNavigate, idleTimeout, finalTimeout } = this.options;\n\n    var isPageloadTransaction = context.op === 'pageload';\n\n    var sentryTraceMetaTagValue = isPageloadTransaction ? getMetaContent('sentry-trace') : null;\n    var baggageMetaTagValue = isPageloadTransaction ? getMetaContent('baggage') : null;\n\n    var traceParentData = sentryTraceMetaTagValue ? extractTraceparentData(sentryTraceMetaTagValue) : undefined;\n    var dynamicSamplingContext = baggageMetaTagValue\n      ? baggageHeaderToDynamicSamplingContext(baggageMetaTagValue)\n      : undefined;\n\n    var expandedContext = {\n      ...context,\n      ...traceParentData,\n      metadata: {\n        ...context.metadata,\n        dynamicSamplingContext: traceParentData && !dynamicSamplingContext ? {} : dynamicSamplingContext,\n      },\n      trimEnd: true,\n    };\n\n    var modifiedContext = typeof beforeNavigate === 'function' ? beforeNavigate(expandedContext) : expandedContext;\n\n    // For backwards compatibility reasons, beforeNavigate can return undefined to \"drop\" the transaction (prevent it\n    // from being sent to Sentry).\n    var finalContext = modifiedContext === undefined ? { ...expandedContext, sampled: false } : modifiedContext;\n\n    // If `beforeNavigate` set a custom name, record that fact\n    finalContext.metadata =\n      finalContext.name !== expandedContext.name\n        ? { ...finalContext.metadata, source: 'custom' }\n        : finalContext.metadata;\n\n    if (finalContext.sampled === false) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(`[Tracing] Will not send ${finalContext.op} transaction because of beforeNavigate.`);\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Starting ${finalContext.op} transaction on scope`);\n\n    var hub = this._getCurrentHub();\n    const { location } = getGlobalObject() ;\n\n    var idleTransaction = startIdleTransaction(\n      hub,\n      finalContext,\n      idleTimeout,\n      finalTimeout,\n      true,\n      { location }, // for use in the tracesSampler\n    );\n    idleTransaction.registerBeforeFinishCallback(transaction => {\n      addPerformanceEntries(transaction);\n      transaction.setTag(\n        'sentry_reportAllChanges',\n        Boolean(this.options._metricOptions && this.options._metricOptions._reportAllChanges),\n      );\n    });\n\n    return idleTransaction ;\n  }\n}\n\n/** Returns the value of a meta tag */\nfunction getMetaContent(metaName) {\n  // Can't specify generic to `getDomElement` because tracing can be used\n  // in a variety of environments, have to disable `no-unsafe-member-access`\n  // as a result.\n  var metaTag = getDomElement(`meta[name=${metaName}]`);\n    return metaTag ? metaTag.getAttribute('content') : null;\n}\n\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing, getMetaContent };\n//# sourceMappingURL=browsertracing.js.map\n","import { addExtensionMethods } from './hubextensions.js';\nexport { addExtensionMethods, startIdleTransaction } from './hubextensions.js';\nimport * as index from './integrations/index.js';\nexport { index as Integrations };\nimport './browser/index.js';\nexport { Span, spanStatusfromHttpCode } from './span.js';\nexport { SpanStatus } from './spanstatus.js';\nexport { Transaction } from './transaction.js';\nexport { IdleTransaction } from './idletransaction.js';\nexport { getActiveTransaction, hasTracingEnabled } from './utils.js';\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing } from './browser/browsertracing.js';\nexport { defaultRequestInstrumentationOptions, instrumentOutgoingRequests } from './browser/request.js';\nexport { TRACEPARENT_REGEXP, extractTraceparentData, stripUrlQueryAndFragment } from '@sentry/utils';\n\n;\n;\n\n// Treeshakable guard to remove all code related to tracing\n\n// Guard for tree\nif (typeof __SENTRY_TRACING__ === 'undefined' || __SENTRY_TRACING__) {\n  // We are patching the global object with our hub extension methods\n  addExtensionMethods();\n}\n//# sourceMappingURL=index.js.map\n","import $89yE2$react, {useContext as $89yE2$useContext, useMemo as $89yE2$useMemo, useState as $89yE2$useState, useLayoutEffect as $89yE2$useLayoutEffect} from \"react\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $704cf1d3b684cc5c$exports = {};\n\n$parcel$export($704cf1d3b684cc5c$exports, \"SSRProvider\", () => $704cf1d3b684cc5c$export$9f8ac96af4b1b2ae);\n$parcel$export($704cf1d3b684cc5c$exports, \"useSSRSafeId\", () => $704cf1d3b684cc5c$export$619500959fc48b26);\n$parcel$export($704cf1d3b684cc5c$exports, \"useIsSSR\", () => $704cf1d3b684cc5c$export$535bd6ca7f90a273);\n\n// Default context value to use in case there is no SSRProvider. This is fine for\n// client-only apps. In order to support multiple copies of React Aria potentially\n// being on the page at once, the prefix is set to a random number. SSRProvider\n// will reset this to zero for consistency between server and client, so in the\n// SSR case multiple copies of React Aria is not supported.\nconst $704cf1d3b684cc5c$var$defaultContext = {\n    prefix: String(Math.round(Math.random() * 10000000000)),\n    current: 0\n};\nconst $704cf1d3b684cc5c$var$SSRContext = /*#__PURE__*/ $89yE2$react.createContext($704cf1d3b684cc5c$var$defaultContext);\nfunction $704cf1d3b684cc5c$export$9f8ac96af4b1b2ae(props) {\n    let cur = $89yE2$useContext($704cf1d3b684cc5c$var$SSRContext);\n    let value = $89yE2$useMemo(()=>({\n            // If this is the first SSRProvider, start with an empty string prefix, otherwise\n            // append and increment the counter.\n            prefix: cur === $704cf1d3b684cc5c$var$defaultContext ? '' : `${cur.prefix}-${++cur.current}`,\n            current: 0\n        })\n    , [\n        cur\n    ]);\n    return(/*#__PURE__*/ $89yE2$react.createElement($704cf1d3b684cc5c$var$SSRContext.Provider, {\n        value: value\n    }, props.children));\n}\nlet $704cf1d3b684cc5c$var$canUseDOM = Boolean(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction $704cf1d3b684cc5c$export$619500959fc48b26(defaultId) {\n    let ctx = $89yE2$useContext($704cf1d3b684cc5c$var$SSRContext);\n    // If we are rendering in a non-DOM environment, and there's no SSRProvider,\n    // provide a warning to hint to the developer to add one.\n    if (ctx === $704cf1d3b684cc5c$var$defaultContext && !$704cf1d3b684cc5c$var$canUseDOM) console.warn('When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.');\n    return $89yE2$useMemo(()=>defaultId || `react-aria${ctx.prefix}-${++ctx.current}`\n    , [\n        defaultId\n    ]);\n}\nfunction $704cf1d3b684cc5c$export$535bd6ca7f90a273() {\n    let cur = $89yE2$useContext($704cf1d3b684cc5c$var$SSRContext);\n    let isInSSRContext = cur !== $704cf1d3b684cc5c$var$defaultContext;\n    let [isSSR, setIsSSR] = $89yE2$useState(isInSSRContext);\n    // If on the client, and the component was initially server rendered,\n    // then schedule a layout effect to update the component after hydration.\n    if (typeof window !== 'undefined' && isInSSRContext) // This if statement technically breaks the rules of hooks, but is safe\n    // because the condition never changes after mounting.\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    $89yE2$useLayoutEffect(()=>{\n        setIsSSR(false);\n    }, []);\n    return isSSR;\n}\n\n\n\n\nexport {$704cf1d3b684cc5c$export$9f8ac96af4b1b2ae as SSRProvider, $704cf1d3b684cc5c$export$619500959fc48b26 as useSSRSafeId, $704cf1d3b684cc5c$export$535bd6ca7f90a273 as useIsSSR};\n//# sourceMappingURL=module.js.map\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import {useState as $6imuh$useState, useRef as $6imuh$useRef, useCallback as $6imuh$useCallback} from \"react\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $458b0a5536c1a7cf$exports = {};\n\n$parcel$export($458b0a5536c1a7cf$exports, \"useControlledState\", () => $458b0a5536c1a7cf$export$40bfa8c7b0832715);\n\nfunction $458b0a5536c1a7cf$export$40bfa8c7b0832715(value1, defaultValue, onChange) {\n    let [stateValue, setStateValue] = $6imuh$useState(value1 || defaultValue);\n    let ref = $6imuh$useRef(value1 !== undefined);\n    let wasControlled = ref.current;\n    let isControlled = value1 !== undefined;\n    // Internal state reference for useCallback\n    let stateRef = $6imuh$useRef(stateValue);\n    if (wasControlled !== isControlled) console.warn(`WARN: A component changed from ${wasControlled ? 'controlled' : 'uncontrolled'} to ${isControlled ? 'controlled' : 'uncontrolled'}.`);\n    ref.current = isControlled;\n    let setValue = $6imuh$useCallback((value2, ...args)=>{\n        let onChangeCaller = (value, ...onChangeArgs)=>{\n            if (onChange) {\n                if (!Object.is(stateRef.current, value)) onChange(value, ...onChangeArgs);\n            }\n            if (!isControlled) stateRef.current = value;\n        };\n        if (typeof value2 === 'function') {\n            console.warn('We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320');\n            // this supports functional updates https://reactjs.org/docs/hooks-reference.html#functional-updates\n            // when someone using useControlledState calls setControlledState(myFunc)\n            // this will call our useState setState with a function as well which invokes myFunc and calls onChange with the value from myFunc\n            // if we're in an uncontrolled state, then we also return the value of myFunc which to setState looks as though it was just called with myFunc from the beginning\n            // otherwise we just return the controlled value, which won't cause a rerender because React knows to bail out when the value is the same\n            let updateFunction = (oldValue, ...functionArgs)=>{\n                let interceptedValue = value2(isControlled ? stateRef.current : oldValue, ...functionArgs);\n                onChangeCaller(interceptedValue, ...args);\n                if (!isControlled) return interceptedValue;\n                return oldValue;\n            };\n            setStateValue(updateFunction);\n        } else {\n            if (!isControlled) setStateValue(value2);\n            onChangeCaller(value2, ...args);\n        }\n    }, [\n        isControlled,\n        onChange\n    ]);\n    // If a controlled component's value prop changes, we need to update stateRef\n    if (isControlled) stateRef.current = value1;\n    else value1 = stateValue;\n    return [\n        value1,\n        setValue\n    ];\n}\n\n\nvar $9446cca9a3875146$exports = {};\n\n$parcel$export($9446cca9a3875146$exports, \"clamp\", () => $9446cca9a3875146$export$7d15b64cf5a3a4c4);\n$parcel$export($9446cca9a3875146$exports, \"snapValueToStep\", () => $9446cca9a3875146$export$cb6e0bb50bc19463);\n$parcel$export($9446cca9a3875146$exports, \"toFixedNumber\", () => $9446cca9a3875146$export$b6268554fba451f);\nfunction $9446cca9a3875146$export$7d15b64cf5a3a4c4(value, min = -Infinity, max = Infinity) {\n    let newValue = Math.min(Math.max(value, min), max);\n    return newValue;\n}\nfunction $9446cca9a3875146$export$cb6e0bb50bc19463(value, min, max, step) {\n    let remainder = (value - (isNaN(min) ? 0 : min)) % step;\n    let snappedValue = Math.abs(remainder) * 2 >= step ? value + Math.sign(remainder) * (step - Math.abs(remainder)) : value - remainder;\n    if (!isNaN(min)) {\n        if (snappedValue < min) snappedValue = min;\n        else if (!isNaN(max) && snappedValue > max) snappedValue = min + Math.floor((max - min) / step) * step;\n    } else if (!isNaN(max) && snappedValue > max) snappedValue = Math.floor(max / step) * step;\n    // correct floating point behavior by rounding to step precision\n    let string = step.toString();\n    let index = string.indexOf('.');\n    let precision = index >= 0 ? string.length - index : 0;\n    if (precision > 0) {\n        let pow = Math.pow(10, precision);\n        snappedValue = Math.round(snappedValue * pow) / pow;\n    }\n    return snappedValue;\n}\nfunction $9446cca9a3875146$export$b6268554fba451f(value, digits, base = 10) {\n    const pow = Math.pow(base, digits);\n    return Math.round(value * pow) / pow;\n}\n\n\n\n\nexport {$458b0a5536c1a7cf$export$40bfa8c7b0832715 as useControlledState, $9446cca9a3875146$export$7d15b64cf5a3a4c4 as clamp, $9446cca9a3875146$export$cb6e0bb50bc19463 as snapValueToStep, $9446cca9a3875146$export$b6268554fba451f as toFixedNumber};\n//# sourceMappingURL=module.js.map\n","import $12uGp$react, {useState as $12uGp$useState, useRef as $12uGp$useRef, useCallback as $12uGp$useCallback, useEffect as $12uGp$useEffect} from \"react\";\nimport {useSSRSafeId as $12uGp$useSSRSafeId} from \"@react-aria/ssr\";\nimport $12uGp$clsx from \"clsx\";\nimport {clamp as $103b0e103f1b5952$re_export$clamp, snapValueToStep as $103b0e103f1b5952$re_export$snapValueToStep} from \"@react-stately/utils\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $bdb11010cef70236$exports = {};\n\n$parcel$export($bdb11010cef70236$exports, \"useId\", () => $bdb11010cef70236$export$f680877a34711e37);\n$parcel$export($bdb11010cef70236$exports, \"mergeIds\", () => $bdb11010cef70236$export$cd8c9cb68f842629);\n$parcel$export($bdb11010cef70236$exports, \"useSlotId\", () => $bdb11010cef70236$export$b4cc09c592e8fdb8);\n\nvar $f0a04ccd8dbdd83b$exports = {};\n\n$parcel$export($f0a04ccd8dbdd83b$exports, \"useLayoutEffect\", () => $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c);\n\nconst $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c = typeof window !== 'undefined' ? $12uGp$react.useLayoutEffect : ()=>{\n};\n\n\n\n\nlet $bdb11010cef70236$var$idsUpdaterMap = new Map();\nfunction $bdb11010cef70236$export$f680877a34711e37(defaultId) {\n    let [value, setValue] = $12uGp$useState(defaultId);\n    let nextId = $12uGp$useRef(null);\n    let res = $12uGp$useSSRSafeId(value);\n    let updateValue = $12uGp$useCallback((val)=>{\n        nextId.current = val;\n    }, []);\n    $bdb11010cef70236$var$idsUpdaterMap.set(res, updateValue);\n    $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{\n        let r = res;\n        return ()=>{\n            $bdb11010cef70236$var$idsUpdaterMap.delete(r);\n        };\n    }, [\n        res\n    ]);\n    // This cannot cause an infinite loop because the ref is updated first.\n    // eslint-disable-next-line\n    $12uGp$useEffect(()=>{\n        let newId = nextId.current;\n        if (newId) {\n            nextId.current = null;\n            setValue(newId);\n        }\n    });\n    return res;\n}\nfunction $bdb11010cef70236$export$cd8c9cb68f842629(idA, idB) {\n    if (idA === idB) return idA;\n    let setIdA = $bdb11010cef70236$var$idsUpdaterMap.get(idA);\n    if (setIdA) {\n        setIdA(idB);\n        return idB;\n    }\n    let setIdB = $bdb11010cef70236$var$idsUpdaterMap.get(idB);\n    if (setIdB) {\n        setIdB(idA);\n        return idA;\n    }\n    return idB;\n}\nfunction $bdb11010cef70236$export$b4cc09c592e8fdb8(depArray = []) {\n    let id = $bdb11010cef70236$export$f680877a34711e37();\n    let [resolvedId, setResolvedId] = $1dbecbe27a04f9af$export$14d238f342723f25(id);\n    let updateId = $12uGp$useCallback(()=>{\n        setResolvedId(function*() {\n            yield id;\n            yield document.getElementById(id) ? id : null;\n        });\n    }, [\n        id,\n        setResolvedId\n    ]);\n    $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(updateId, [\n        id,\n        updateId,\n        ...depArray\n    ]);\n    return resolvedId;\n}\n\n\nvar $ff5963eb1fccf552$exports = {};\n\n$parcel$export($ff5963eb1fccf552$exports, \"chain\", () => $ff5963eb1fccf552$export$e08e3b67e392101e);\nfunction $ff5963eb1fccf552$export$e08e3b67e392101e(...callbacks) {\n    return (...args)=>{\n        for (let callback of callbacks)if (typeof callback === 'function') callback(...args);\n    };\n}\n\n\nvar $3ef42575df84b30b$exports = {};\n\n$parcel$export($3ef42575df84b30b$exports, \"mergeProps\", () => $3ef42575df84b30b$export$9d1611c77c2fe928);\n\n\n\nfunction $3ef42575df84b30b$export$9d1611c77c2fe928(...args) {\n    // Start with a base clone of the first argument. This is a lot faster than starting\n    // with an empty object and adding properties as we go.\n    let result = {\n        ...args[0]\n    };\n    for(let i = 1; i < args.length; i++){\n        let props = args[i];\n        for(let key in props){\n            let a = result[key];\n            let b = props[key];\n            // Chain events\n            if (typeof a === 'function' && typeof b === 'function' && // This is a lot faster than a regex.\n            key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) >= /* 'A' */ 65 && key.charCodeAt(2) <= /* 'Z' */ 90) result[key] = $ff5963eb1fccf552$export$e08e3b67e392101e(a, b);\n            else if ((key === 'className' || key === 'UNSAFE_className') && typeof a === 'string' && typeof b === 'string') result[key] = $12uGp$clsx(a, b);\n            else if (key === 'id' && a && b) result.id = $bdb11010cef70236$export$cd8c9cb68f842629(a, b);\n            else result[key] = b !== undefined ? b : a;\n        }\n    }\n    return result;\n}\n\n\nvar $5dc95899b306f630$exports = {};\n\n$parcel$export($5dc95899b306f630$exports, \"mergeRefs\", () => $5dc95899b306f630$export$c9058316764c140e);\nfunction $5dc95899b306f630$export$c9058316764c140e(...refs) {\n    return (value)=>{\n        for (let ref of refs){\n            if (typeof ref === 'function') ref(value);\n            else if (ref != null) ref.current = value;\n        }\n    };\n}\n\n\nvar $65484d02dcb7eb3e$exports = {};\n\n$parcel$export($65484d02dcb7eb3e$exports, \"filterDOMProps\", () => $65484d02dcb7eb3e$export$457c3d6518dd4c6f);\nconst $65484d02dcb7eb3e$var$DOMPropNames = new Set([\n    'id'\n]);\nconst $65484d02dcb7eb3e$var$labelablePropNames = new Set([\n    'aria-label',\n    'aria-labelledby',\n    'aria-describedby',\n    'aria-details'\n]);\nconst $65484d02dcb7eb3e$var$propRe = /^(data-.*)$/;\nfunction $65484d02dcb7eb3e$export$457c3d6518dd4c6f(props, opts = {\n}) {\n    let { labelable: labelable , propNames: propNames  } = opts;\n    let filteredProps = {\n    };\n    for(const prop in props)if (Object.prototype.hasOwnProperty.call(props, prop) && ($65484d02dcb7eb3e$var$DOMPropNames.has(prop) || labelable && $65484d02dcb7eb3e$var$labelablePropNames.has(prop) || (propNames === null || propNames === void 0 ? void 0 : propNames.has(prop)) || $65484d02dcb7eb3e$var$propRe.test(prop))) filteredProps[prop] = props[prop];\n    return filteredProps;\n}\n\n\nvar $7215afc6de606d6b$exports = {};\n\n$parcel$export($7215afc6de606d6b$exports, \"focusWithoutScrolling\", () => $7215afc6de606d6b$export$de79e2c695e052f3);\nfunction $7215afc6de606d6b$export$de79e2c695e052f3(element) {\n    if ($7215afc6de606d6b$var$supportsPreventScroll()) element.focus({\n        preventScroll: true\n    });\n    else {\n        let scrollableElements = $7215afc6de606d6b$var$getScrollableElements(element);\n        element.focus();\n        $7215afc6de606d6b$var$restoreScrollPosition(scrollableElements);\n    }\n}\nlet $7215afc6de606d6b$var$supportsPreventScrollCached = null;\nfunction $7215afc6de606d6b$var$supportsPreventScroll() {\n    if ($7215afc6de606d6b$var$supportsPreventScrollCached == null) {\n        $7215afc6de606d6b$var$supportsPreventScrollCached = false;\n        try {\n            var focusElem = document.createElement('div');\n            focusElem.focus({\n                get preventScroll () {\n                    $7215afc6de606d6b$var$supportsPreventScrollCached = true;\n                    return true;\n                }\n            });\n        } catch (e) {\n        // Ignore\n        }\n    }\n    return $7215afc6de606d6b$var$supportsPreventScrollCached;\n}\nfunction $7215afc6de606d6b$var$getScrollableElements(element) {\n    var parent = element.parentNode;\n    var scrollableElements = [];\n    var rootScrollingElement = document.scrollingElement || document.documentElement;\n    while(parent instanceof HTMLElement && parent !== rootScrollingElement){\n        if (parent.offsetHeight < parent.scrollHeight || parent.offsetWidth < parent.scrollWidth) scrollableElements.push({\n            element: parent,\n            scrollTop: parent.scrollTop,\n            scrollLeft: parent.scrollLeft\n        });\n        parent = parent.parentNode;\n    }\n    if (rootScrollingElement instanceof HTMLElement) scrollableElements.push({\n        element: rootScrollingElement,\n        scrollTop: rootScrollingElement.scrollTop,\n        scrollLeft: rootScrollingElement.scrollLeft\n    });\n    return scrollableElements;\n}\nfunction $7215afc6de606d6b$var$restoreScrollPosition(scrollableElements) {\n    for (let { element: element , scrollTop: scrollTop , scrollLeft: scrollLeft  } of scrollableElements){\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n    }\n}\n\n\nvar $ab71dadb03a6fb2e$exports = {};\n\n$parcel$export($ab71dadb03a6fb2e$exports, \"getOffset\", () => $ab71dadb03a6fb2e$export$622cea445a1c5b7d);\nfunction $ab71dadb03a6fb2e$export$622cea445a1c5b7d(element, reverse, orientation = 'horizontal') {\n    let rect = element.getBoundingClientRect();\n    if (reverse) return orientation === 'horizontal' ? rect.right : rect.bottom;\n    return orientation === 'horizontal' ? rect.left : rect.top;\n}\n\n\nvar $103b0e103f1b5952$exports = {};\n\n$parcel$export($103b0e103f1b5952$exports, \"clamp\", () => $103b0e103f1b5952$re_export$clamp);\n$parcel$export($103b0e103f1b5952$exports, \"snapValueToStep\", () => $103b0e103f1b5952$re_export$snapValueToStep);\n\n\n\nvar $bbed8b41f857bcc0$exports = {};\n\n$parcel$export($bbed8b41f857bcc0$exports, \"runAfterTransition\", () => $bbed8b41f857bcc0$export$24490316f764c430);\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ // We store a global list of elements that are currently transitioning,\n// mapped to a set of CSS properties that are transitioning for that element.\n// This is necessary rather than a simple count of transitions because of browser\n// bugs, e.g. Chrome sometimes fires both transitionend and transitioncancel rather\n// than one or the other. So we need to track what's actually transitioning so that\n// we can ignore these duplicate events.\nlet $bbed8b41f857bcc0$var$transitionsByElement = new Map();\n// A list of callbacks to call once there are no transitioning elements.\nlet $bbed8b41f857bcc0$var$transitionCallbacks = new Set();\nfunction $bbed8b41f857bcc0$var$setupGlobalEvents() {\n    if (typeof window === 'undefined') return;\n    let onTransitionStart = (e)=>{\n        // Add the transitioning property to the list for this element.\n        let transitions = $bbed8b41f857bcc0$var$transitionsByElement.get(e.target);\n        if (!transitions) {\n            transitions = new Set();\n            $bbed8b41f857bcc0$var$transitionsByElement.set(e.target, transitions);\n            // The transitioncancel event must be registered on the element itself, rather than as a global\n            // event. This enables us to handle when the node is deleted from the document while it is transitioning.\n            // In that case, the cancel event would have nowhere to bubble to so we need to handle it directly.\n            e.target.addEventListener('transitioncancel', onTransitionEnd);\n        }\n        transitions.add(e.propertyName);\n    };\n    let onTransitionEnd = (e)=>{\n        // Remove property from list of transitioning properties.\n        let properties = $bbed8b41f857bcc0$var$transitionsByElement.get(e.target);\n        if (!properties) return;\n        properties.delete(e.propertyName);\n        // If empty, remove transitioncancel event, and remove the element from the list of transitioning elements.\n        if (properties.size === 0) {\n            e.target.removeEventListener('transitioncancel', onTransitionEnd);\n            $bbed8b41f857bcc0$var$transitionsByElement.delete(e.target);\n        }\n        // If no transitioning elements, call all of the queued callbacks.\n        if ($bbed8b41f857bcc0$var$transitionsByElement.size === 0) {\n            for (let cb of $bbed8b41f857bcc0$var$transitionCallbacks)cb();\n            $bbed8b41f857bcc0$var$transitionCallbacks.clear();\n        }\n    };\n    document.body.addEventListener('transitionrun', onTransitionStart);\n    document.body.addEventListener('transitionend', onTransitionEnd);\n}\nif (typeof document !== 'undefined') {\n    if (document.readyState !== 'loading') $bbed8b41f857bcc0$var$setupGlobalEvents();\n    else document.addEventListener('DOMContentLoaded', $bbed8b41f857bcc0$var$setupGlobalEvents);\n}\nfunction $bbed8b41f857bcc0$export$24490316f764c430(fn) {\n    // Wait one frame to see if an animation starts, e.g. a transition on mount.\n    requestAnimationFrame(()=>{\n        // If no transitions are running, call the function immediately.\n        // Otherwise, add it to a list of callbacks to run at the end of the animation.\n        if ($bbed8b41f857bcc0$var$transitionsByElement.size === 0) fn();\n        else $bbed8b41f857bcc0$var$transitionCallbacks.add(fn);\n    });\n}\n\n\nvar $9cc09df9fd7676be$exports = {};\n\n$parcel$export($9cc09df9fd7676be$exports, \"useDrag1D\", () => $9cc09df9fd7676be$export$7bbed75feba39706);\n\n\n// Keep track of elements that we are currently handling dragging for via useDrag1D.\n// If there's an ancestor and a descendant both using useDrag1D(), and the user starts\n// dragging the descendant, we don't want useDrag1D events to fire for the ancestor.\nconst $9cc09df9fd7676be$var$draggingElements = [];\nfunction $9cc09df9fd7676be$export$7bbed75feba39706(props) {\n    console.warn('useDrag1D is deprecated, please use `useMove` instead https://react-spectrum.adobe.com/react-aria/useMove.html');\n    let { containerRef: containerRef , reverse: reverse , orientation: orientation , onHover: onHover , onDrag: onDrag , onPositionChange: onPositionChange , onIncrement: onIncrement , onDecrement: onDecrement , onIncrementToMax: onIncrementToMax , onDecrementToMin: onDecrementToMin , onCollapseToggle: onCollapseToggle  } = props;\n    let getPosition = (e)=>orientation === 'horizontal' ? e.clientX : e.clientY\n    ;\n    let getNextOffset = (e)=>{\n        let containerOffset = $ab71dadb03a6fb2e$export$622cea445a1c5b7d(containerRef.current, reverse, orientation);\n        let mouseOffset = getPosition(e);\n        let nextOffset = reverse ? containerOffset - mouseOffset : mouseOffset - containerOffset;\n        return nextOffset;\n    };\n    let dragging = $12uGp$useRef(false);\n    let prevPosition = $12uGp$useRef(0);\n    // Keep track of the current handlers in a ref so that the events can access them.\n    let handlers = $12uGp$useRef({\n        onPositionChange: onPositionChange,\n        onDrag: onDrag\n    });\n    handlers.current.onDrag = onDrag;\n    handlers.current.onPositionChange = onPositionChange;\n    let onMouseDragged = (e)=>{\n        e.preventDefault();\n        let nextOffset = getNextOffset(e);\n        if (!dragging.current) {\n            dragging.current = true;\n            if (handlers.current.onDrag) handlers.current.onDrag(true);\n            if (handlers.current.onPositionChange) handlers.current.onPositionChange(nextOffset);\n        }\n        if (prevPosition.current === nextOffset) return;\n        prevPosition.current = nextOffset;\n        if (onPositionChange) onPositionChange(nextOffset);\n    };\n    let onMouseUp = (e)=>{\n        const target = e.target;\n        dragging.current = false;\n        let nextOffset = getNextOffset(e);\n        if (handlers.current.onDrag) handlers.current.onDrag(false);\n        if (handlers.current.onPositionChange) handlers.current.onPositionChange(nextOffset);\n        $9cc09df9fd7676be$var$draggingElements.splice($9cc09df9fd7676be$var$draggingElements.indexOf(target), 1);\n        window.removeEventListener('mouseup', onMouseUp, false);\n        window.removeEventListener('mousemove', onMouseDragged, false);\n    };\n    let onMouseDown = (e)=>{\n        const target = e.currentTarget;\n        // If we're already handling dragging on a descendant with useDrag1D, then\n        // we don't want to handle the drag motion on this target as well.\n        if ($9cc09df9fd7676be$var$draggingElements.some((elt)=>target.contains(elt)\n        )) return;\n        $9cc09df9fd7676be$var$draggingElements.push(target);\n        window.addEventListener('mousemove', onMouseDragged, false);\n        window.addEventListener('mouseup', onMouseUp, false);\n    };\n    let onMouseEnter = ()=>{\n        if (onHover) onHover(true);\n    };\n    let onMouseOut = ()=>{\n        if (onHover) onHover(false);\n    };\n    let onKeyDown = (e)=>{\n        switch(e.key){\n            case 'Left':\n            case 'ArrowLeft':\n                if (orientation === 'horizontal') {\n                    e.preventDefault();\n                    if (onDecrement && !reverse) onDecrement();\n                    else if (onIncrement && reverse) onIncrement();\n                }\n                break;\n            case 'Up':\n            case 'ArrowUp':\n                if (orientation === 'vertical') {\n                    e.preventDefault();\n                    if (onDecrement && !reverse) onDecrement();\n                    else if (onIncrement && reverse) onIncrement();\n                }\n                break;\n            case 'Right':\n            case 'ArrowRight':\n                if (orientation === 'horizontal') {\n                    e.preventDefault();\n                    if (onIncrement && !reverse) onIncrement();\n                    else if (onDecrement && reverse) onDecrement();\n                }\n                break;\n            case 'Down':\n            case 'ArrowDown':\n                if (orientation === 'vertical') {\n                    e.preventDefault();\n                    if (onIncrement && !reverse) onIncrement();\n                    else if (onDecrement && reverse) onDecrement();\n                }\n                break;\n            case 'Home':\n                e.preventDefault();\n                if (onDecrementToMin) onDecrementToMin();\n                break;\n            case 'End':\n                e.preventDefault();\n                if (onIncrementToMax) onIncrementToMax();\n                break;\n            case 'Enter':\n                e.preventDefault();\n                if (onCollapseToggle) onCollapseToggle();\n                break;\n        }\n    };\n    return {\n        onMouseDown: onMouseDown,\n        onMouseEnter: onMouseEnter,\n        onMouseOut: onMouseOut,\n        onKeyDown: onKeyDown\n    };\n}\n\n\nvar $03deb23ff14920c4$exports = {};\n\n$parcel$export($03deb23ff14920c4$exports, \"useGlobalListeners\", () => $03deb23ff14920c4$export$4eaf04e54aa8eed6);\n\nfunction $03deb23ff14920c4$export$4eaf04e54aa8eed6() {\n    let globalListeners = $12uGp$useRef(new Map());\n    let addGlobalListener = $12uGp$useCallback((eventTarget, type, listener, options)=>{\n        // Make sure we remove the listener after it is called with the `once` option.\n        let fn = (options === null || options === void 0 ? void 0 : options.once) ? (...args)=>{\n            globalListeners.current.delete(listener);\n            listener(...args);\n        } : listener;\n        globalListeners.current.set(listener, {\n            type: type,\n            eventTarget: eventTarget,\n            fn: fn,\n            options: options\n        });\n        eventTarget.addEventListener(type, listener, options);\n    }, []);\n    let removeGlobalListener = $12uGp$useCallback((eventTarget, type, listener, options)=>{\n        var ref;\n        let fn = ((ref = globalListeners.current.get(listener)) === null || ref === void 0 ? void 0 : ref.fn) || listener;\n        eventTarget.removeEventListener(type, fn, options);\n        globalListeners.current.delete(listener);\n    }, []);\n    let removeAllGlobalListeners = $12uGp$useCallback(()=>{\n        globalListeners.current.forEach((value, key)=>{\n            removeGlobalListener(value.eventTarget, value.type, key, value.options);\n        });\n    }, [\n        removeGlobalListener\n    ]);\n    // eslint-disable-next-line arrow-body-style\n    $12uGp$useEffect(()=>{\n        return removeAllGlobalListeners;\n    }, [\n        removeAllGlobalListeners\n    ]);\n    return {\n        addGlobalListener: addGlobalListener,\n        removeGlobalListener: removeGlobalListener,\n        removeAllGlobalListeners: removeAllGlobalListeners\n    };\n}\n\n\nvar $313b98861ee5dd6c$exports = {};\n\n$parcel$export($313b98861ee5dd6c$exports, \"useLabels\", () => $313b98861ee5dd6c$export$d6875122194c7b44);\n\nfunction $313b98861ee5dd6c$export$d6875122194c7b44(props, defaultLabel) {\n    let { id: id , 'aria-label': label , 'aria-labelledby': labelledBy  } = props;\n    // If there is both an aria-label and aria-labelledby,\n    // combine them by pointing to the element itself.\n    id = $bdb11010cef70236$export$f680877a34711e37(id);\n    if (labelledBy && label) {\n        let ids = new Set([\n            ...labelledBy.trim().split(/\\s+/),\n            id\n        ]);\n        labelledBy = [\n            ...ids\n        ].join(' ');\n    } else if (labelledBy) labelledBy = labelledBy.trim().split(/\\s+/).join(' ');\n    // If no labels are provided, use the default\n    if (!label && !labelledBy && defaultLabel) label = defaultLabel;\n    return {\n        id: id,\n        'aria-label': label,\n        'aria-labelledby': labelledBy\n    };\n}\n\n\nvar $df56164dff5785e2$exports = {};\n\n$parcel$export($df56164dff5785e2$exports, \"useObjectRef\", () => $df56164dff5785e2$export$4338b53315abf666);\n\n\nfunction $df56164dff5785e2$export$4338b53315abf666(forwardedRef) {\n    const objRef = $12uGp$useRef();\n    /**\n   * We're using `useLayoutEffect` here instead of `useEffect` because we want\n   * to make sure that the `ref` value is up to date before other places in the\n   * the execution cycle try to read it.\n   */ $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{\n        if (!forwardedRef) return;\n        if (typeof forwardedRef === 'function') forwardedRef(objRef.current);\n        else forwardedRef.current = objRef.current;\n    }, [\n        forwardedRef\n    ]);\n    return objRef;\n}\n\n\nvar $4f58c5f72bcf79f7$exports = {};\n\n$parcel$export($4f58c5f72bcf79f7$exports, \"useUpdateEffect\", () => $4f58c5f72bcf79f7$export$496315a1608d9602);\n\nfunction $4f58c5f72bcf79f7$export$496315a1608d9602(effect, dependencies) {\n    const isInitialMount = $12uGp$useRef(true);\n    $12uGp$useEffect(()=>{\n        if (isInitialMount.current) isInitialMount.current = false;\n        else effect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, dependencies);\n}\n\n\n\nvar $9daab02d461809db$exports = {};\n\n$parcel$export($9daab02d461809db$exports, \"useResizeObserver\", () => $9daab02d461809db$export$683480f191c0e3ea);\n\nfunction $9daab02d461809db$var$hasResizeObserver() {\n    return typeof window.ResizeObserver !== 'undefined';\n}\nfunction $9daab02d461809db$export$683480f191c0e3ea(options) {\n    const { ref: ref , onResize: onResize  } = options;\n    $12uGp$useEffect(()=>{\n        let element = ref === null || ref === void 0 ? void 0 : ref.current;\n        if (!element) return;\n        if (!$9daab02d461809db$var$hasResizeObserver()) {\n            window.addEventListener('resize', onResize, false);\n            return ()=>{\n                window.removeEventListener('resize', onResize, false);\n            };\n        } else {\n            const resizeObserverInstance = new window.ResizeObserver((entries)=>{\n                if (!entries.length) return;\n                onResize();\n            });\n            resizeObserverInstance.observe(element);\n            return ()=>{\n                if (element) resizeObserverInstance.unobserve(element);\n            };\n        }\n    }, [\n        onResize,\n        ref\n    ]);\n}\n\n\nvar $e7801be82b4b2a53$exports = {};\n\n$parcel$export($e7801be82b4b2a53$exports, \"useSyncRef\", () => $e7801be82b4b2a53$export$4debdb1a3f0fa79e);\n\nfunction $e7801be82b4b2a53$export$4debdb1a3f0fa79e(context, ref) {\n    $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{\n        if (context && context.ref && ref) {\n            context.ref.current = ref.current;\n            return ()=>{\n                context.ref.current = null;\n            };\n        }\n    }, [\n        context,\n        ref\n    ]);\n}\n\n\nvar $62d8ded9296f3872$exports = {};\n\n$parcel$export($62d8ded9296f3872$exports, \"getScrollParent\", () => $62d8ded9296f3872$export$cfa2225e87938781);\nfunction $62d8ded9296f3872$export$cfa2225e87938781(node) {\n    while(node && !$62d8ded9296f3872$var$isScrollable(node))node = node.parentElement;\n    return node || document.scrollingElement || document.documentElement;\n}\nfunction $62d8ded9296f3872$var$isScrollable(node) {\n    let style = window.getComputedStyle(node);\n    return /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\n}\n\n\nvar $5df64b3807dc15ee$exports = {};\n\n$parcel$export($5df64b3807dc15ee$exports, \"useViewportSize\", () => $5df64b3807dc15ee$export$d699905dd57c73ca);\n\n// @ts-ignore\nlet $5df64b3807dc15ee$var$visualViewport = typeof window !== 'undefined' && window.visualViewport;\nfunction $5df64b3807dc15ee$export$d699905dd57c73ca() {\n    let [size1, setSize] = $12uGp$useState(()=>$5df64b3807dc15ee$var$getViewportSize()\n    );\n    $12uGp$useEffect(()=>{\n        // Use visualViewport api to track available height even on iOS virtual keyboard opening\n        let onResize = ()=>{\n            setSize((size)=>{\n                let newSize = $5df64b3807dc15ee$var$getViewportSize();\n                if (newSize.width === size.width && newSize.height === size.height) return size;\n                return newSize;\n            });\n        };\n        if (!$5df64b3807dc15ee$var$visualViewport) window.addEventListener('resize', onResize);\n        else $5df64b3807dc15ee$var$visualViewport.addEventListener('resize', onResize);\n        return ()=>{\n            if (!$5df64b3807dc15ee$var$visualViewport) window.removeEventListener('resize', onResize);\n            else $5df64b3807dc15ee$var$visualViewport.removeEventListener('resize', onResize);\n        };\n    }, []);\n    return size1;\n}\nfunction $5df64b3807dc15ee$var$getViewportSize() {\n    return {\n        width: ($5df64b3807dc15ee$var$visualViewport === null || $5df64b3807dc15ee$var$visualViewport === void 0 ? void 0 : $5df64b3807dc15ee$var$visualViewport.width) || window.innerWidth,\n        height: ($5df64b3807dc15ee$var$visualViewport === null || $5df64b3807dc15ee$var$visualViewport === void 0 ? void 0 : $5df64b3807dc15ee$var$visualViewport.height) || window.innerHeight\n    };\n}\n\n\nvar $ef06256079686ba0$exports = {};\n\n$parcel$export($ef06256079686ba0$exports, \"useDescription\", () => $ef06256079686ba0$export$f8aeda7b10753fa1);\n\n\nlet $ef06256079686ba0$var$descriptionId = 0;\nconst $ef06256079686ba0$var$descriptionNodes = new Map();\nfunction $ef06256079686ba0$export$f8aeda7b10753fa1(description) {\n    let [id1, setId] = $12uGp$useState(null);\n    $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{\n        if (!description) return;\n        let desc = $ef06256079686ba0$var$descriptionNodes.get(description);\n        if (!desc) {\n            let id = `react-aria-description-${$ef06256079686ba0$var$descriptionId++}`;\n            setId(id);\n            let node = document.createElement('div');\n            node.id = id;\n            node.style.display = 'none';\n            node.textContent = description;\n            document.body.appendChild(node);\n            desc = {\n                refCount: 0,\n                element: node\n            };\n            $ef06256079686ba0$var$descriptionNodes.set(description, desc);\n        } else setId(desc.element.id);\n        desc.refCount++;\n        return ()=>{\n            if (--desc.refCount === 0) {\n                desc.element.remove();\n                $ef06256079686ba0$var$descriptionNodes.delete(description);\n            }\n        };\n    }, [\n        description\n    ]);\n    return {\n        'aria-describedby': description ? id1 : undefined\n    };\n}\n\n\nvar $c87311424ea30a05$exports = {};\n\n$parcel$export($c87311424ea30a05$exports, \"isMac\", () => $c87311424ea30a05$export$9ac100e40613ea10);\n$parcel$export($c87311424ea30a05$exports, \"isIPhone\", () => $c87311424ea30a05$export$186c6964ca17d99);\n$parcel$export($c87311424ea30a05$exports, \"isIPad\", () => $c87311424ea30a05$export$7bef049ce92e4224);\n$parcel$export($c87311424ea30a05$exports, \"isIOS\", () => $c87311424ea30a05$export$fedb369cb70207f1);\n$parcel$export($c87311424ea30a05$exports, \"isAppleDevice\", () => $c87311424ea30a05$export$e1865c3bedcd822b);\n$parcel$export($c87311424ea30a05$exports, \"isWebKit\", () => $c87311424ea30a05$export$78551043582a6a98);\n$parcel$export($c87311424ea30a05$exports, \"isChrome\", () => $c87311424ea30a05$export$6446a186d09e379e);\n$parcel$export($c87311424ea30a05$exports, \"isAndroid\", () => $c87311424ea30a05$export$a11b0059900ceec8);\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $c87311424ea30a05$var$testUserAgent(re) {\n    var ref;\n    if (typeof window === 'undefined' || window.navigator == null) return false;\n    return ((ref = window.navigator['userAgentData']) === null || ref === void 0 ? void 0 : ref.brands.some((brand)=>re.test(brand.brand)\n    )) || re.test(window.navigator.userAgent);\n}\nfunction $c87311424ea30a05$var$testPlatform(re) {\n    return typeof window !== 'undefined' && window.navigator != null ? re.test((window.navigator['userAgentData'] || window.navigator).platform) : false;\n}\nfunction $c87311424ea30a05$export$9ac100e40613ea10() {\n    return $c87311424ea30a05$var$testPlatform(/^Mac/i);\n}\nfunction $c87311424ea30a05$export$186c6964ca17d99() {\n    return $c87311424ea30a05$var$testPlatform(/^iPhone/i);\n}\nfunction $c87311424ea30a05$export$7bef049ce92e4224() {\n    return $c87311424ea30a05$var$testPlatform(/^iPad/i) || $c87311424ea30a05$export$9ac100e40613ea10() && navigator.maxTouchPoints > 1;\n}\nfunction $c87311424ea30a05$export$fedb369cb70207f1() {\n    return $c87311424ea30a05$export$186c6964ca17d99() || $c87311424ea30a05$export$7bef049ce92e4224();\n}\nfunction $c87311424ea30a05$export$e1865c3bedcd822b() {\n    return $c87311424ea30a05$export$9ac100e40613ea10() || $c87311424ea30a05$export$fedb369cb70207f1();\n}\nfunction $c87311424ea30a05$export$78551043582a6a98() {\n    return $c87311424ea30a05$var$testUserAgent(/AppleWebKit/i) && !$c87311424ea30a05$export$6446a186d09e379e();\n}\nfunction $c87311424ea30a05$export$6446a186d09e379e() {\n    return $c87311424ea30a05$var$testUserAgent(/Chrome/i);\n}\nfunction $c87311424ea30a05$export$a11b0059900ceec8() {\n    return $c87311424ea30a05$var$testUserAgent(/Android/i);\n}\n\n\nvar $e9faafb641e167db$exports = {};\n\n$parcel$export($e9faafb641e167db$exports, \"useEvent\", () => $e9faafb641e167db$export$90fc3a17d93f704c);\n\nfunction $e9faafb641e167db$export$90fc3a17d93f704c(ref, event, handler1, options) {\n    let handlerRef = $12uGp$useRef(handler1);\n    handlerRef.current = handler1;\n    let isDisabled = handler1 == null;\n    $12uGp$useEffect(()=>{\n        if (isDisabled) return;\n        let element = ref.current;\n        let handler = (e)=>handlerRef.current.call(this, e)\n        ;\n        element.addEventListener(event, handler, options);\n        return ()=>{\n            element.removeEventListener(event, handler, options);\n        };\n    }, [\n        ref,\n        event,\n        options,\n        isDisabled\n    ]);\n}\n\n\nvar $1dbecbe27a04f9af$exports = {};\n\n$parcel$export($1dbecbe27a04f9af$exports, \"useValueEffect\", () => $1dbecbe27a04f9af$export$14d238f342723f25);\n\n\nfunction $1dbecbe27a04f9af$export$14d238f342723f25(defaultValue) {\n    let [value, setValue] = $12uGp$useState(defaultValue);\n    let valueRef = $12uGp$useRef(value);\n    let effect = $12uGp$useRef(null);\n    valueRef.current = value;\n    // Store the function in a ref so we can always access the current version\n    // which has the proper `value` in scope.\n    let nextRef = $12uGp$useRef(null);\n    nextRef.current = ()=>{\n        // Run the generator to the next yield.\n        let newValue = effect.current.next();\n        // If the generator is done, reset the effect.\n        if (newValue.done) {\n            effect.current = null;\n            return;\n        }\n        // If the value is the same as the current value,\n        // then continue to the next yield. Otherwise,\n        // set the value in state and wait for the next layout effect.\n        if (value === newValue.value) nextRef.current();\n        else setValue(newValue.value);\n    };\n    $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{\n        // If there is an effect currently running, continue to the next yield.\n        if (effect.current) nextRef.current();\n    });\n    let queue = $12uGp$useCallback((fn)=>{\n        effect.current = fn(valueRef.current);\n        nextRef.current();\n    }, [\n        effect,\n        nextRef\n    ]);\n    return [\n        value,\n        queue\n    ];\n}\n\n\nvar $2f04cbc44ee30ce0$exports = {};\n\n$parcel$export($2f04cbc44ee30ce0$exports, \"scrollIntoView\", () => $2f04cbc44ee30ce0$export$53a0910f038337bd);\nfunction $2f04cbc44ee30ce0$export$53a0910f038337bd(scrollView, element) {\n    let offsetX = $2f04cbc44ee30ce0$var$relativeOffset(scrollView, element, 'left');\n    let offsetY = $2f04cbc44ee30ce0$var$relativeOffset(scrollView, element, 'top');\n    let width = element.offsetWidth;\n    let height = element.offsetHeight;\n    let x = scrollView.scrollLeft;\n    let y = scrollView.scrollTop;\n    let maxX = x + scrollView.offsetWidth;\n    let maxY = y + scrollView.offsetHeight;\n    if (offsetX <= x) x = offsetX;\n    else if (offsetX + width > maxX) x += offsetX + width - maxX;\n    if (offsetY <= y) y = offsetY;\n    else if (offsetY + height > maxY) y += offsetY + height - maxY;\n    scrollView.scrollLeft = x;\n    scrollView.scrollTop = y;\n}\n/**\n * Computes the offset left or top from child to ancestor by accumulating\n * offsetLeft or offsetTop through intervening offsetParents.\n */ function $2f04cbc44ee30ce0$var$relativeOffset(ancestor, child, axis) {\n    const prop = axis === 'left' ? 'offsetLeft' : 'offsetTop';\n    let sum = 0;\n    while(child.offsetParent){\n        sum += child[prop];\n        if (child.offsetParent === ancestor) break;\n        else if (child.offsetParent.contains(ancestor)) {\n            // If the ancestor is not `position:relative`, then we stop at\n            // _its_ offset parent, and we subtract off _its_ offset, so that\n            // we end up with the proper offset from child to ancestor.\n            sum -= ancestor[prop];\n            break;\n        }\n        child = child.offsetParent;\n    }\n    return sum;\n}\n\n\n\n\nexport {$bdb11010cef70236$export$f680877a34711e37 as useId, $bdb11010cef70236$export$cd8c9cb68f842629 as mergeIds, $bdb11010cef70236$export$b4cc09c592e8fdb8 as useSlotId, $ff5963eb1fccf552$export$e08e3b67e392101e as chain, $3ef42575df84b30b$export$9d1611c77c2fe928 as mergeProps, $5dc95899b306f630$export$c9058316764c140e as mergeRefs, $65484d02dcb7eb3e$export$457c3d6518dd4c6f as filterDOMProps, $7215afc6de606d6b$export$de79e2c695e052f3 as focusWithoutScrolling, $ab71dadb03a6fb2e$export$622cea445a1c5b7d as getOffset, $103b0e103f1b5952$re_export$clamp as clamp, $103b0e103f1b5952$re_export$snapValueToStep as snapValueToStep, $bbed8b41f857bcc0$export$24490316f764c430 as runAfterTransition, $9cc09df9fd7676be$export$7bbed75feba39706 as useDrag1D, $03deb23ff14920c4$export$4eaf04e54aa8eed6 as useGlobalListeners, $313b98861ee5dd6c$export$d6875122194c7b44 as useLabels, $df56164dff5785e2$export$4338b53315abf666 as useObjectRef, $4f58c5f72bcf79f7$export$496315a1608d9602 as useUpdateEffect, $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c as useLayoutEffect, $9daab02d461809db$export$683480f191c0e3ea as useResizeObserver, $e7801be82b4b2a53$export$4debdb1a3f0fa79e as useSyncRef, $62d8ded9296f3872$export$cfa2225e87938781 as getScrollParent, $5df64b3807dc15ee$export$d699905dd57c73ca as useViewportSize, $ef06256079686ba0$export$f8aeda7b10753fa1 as useDescription, $c87311424ea30a05$export$9ac100e40613ea10 as isMac, $c87311424ea30a05$export$186c6964ca17d99 as isIPhone, $c87311424ea30a05$export$7bef049ce92e4224 as isIPad, $c87311424ea30a05$export$fedb369cb70207f1 as isIOS, $c87311424ea30a05$export$e1865c3bedcd822b as isAppleDevice, $c87311424ea30a05$export$78551043582a6a98 as isWebKit, $c87311424ea30a05$export$6446a186d09e379e as isChrome, $c87311424ea30a05$export$a11b0059900ceec8 as isAndroid, $e9faafb641e167db$export$90fc3a17d93f704c as useEvent, $1dbecbe27a04f9af$export$14d238f342723f25 as useValueEffect, $2f04cbc44ee30ce0$export$53a0910f038337bd as scrollIntoView};\n//# sourceMappingURL=module.js.map\n","import {mergeProps as $bx7SL$mergeProps, useSyncRef as $bx7SL$useSyncRef, useGlobalListeners as $bx7SL$useGlobalListeners, focusWithoutScrolling as $bx7SL$focusWithoutScrolling, isIOS as $bx7SL$isIOS, runAfterTransition as $bx7SL$runAfterTransition, useLayoutEffect as $bx7SL$useLayoutEffect, isMac as $bx7SL$isMac, useEvent as $bx7SL$useEvent, useDescription as $bx7SL$useDescription} from \"@react-aria/utils\";\nimport $bx7SL$react, {useRef as $bx7SL$useRef, useContext as $bx7SL$useContext, useState as $bx7SL$useState, useMemo as $bx7SL$useMemo, useEffect as $bx7SL$useEffect, useCallback as $bx7SL$useCallback} from \"react\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $3b117e43dc0ca95d$exports = {};\n\n$parcel$export($3b117e43dc0ca95d$exports, \"Pressable\", () => $3b117e43dc0ca95d$export$27c701ed9e449e99);\n\nvar $f6c31cce2adf654f$exports = {};\n\n$parcel$export($f6c31cce2adf654f$exports, \"usePress\", () => $f6c31cce2adf654f$export$45712eceda6fad21);\n\n// Note that state only matters here for iOS. Non-iOS gets user-select: none applied to the target element\n// rather than at the document level so we just need to apply/remove user-select: none for each pressed element individually\nlet $14c0b72509d70225$var$state = 'default';\nlet $14c0b72509d70225$var$savedUserSelect = '';\nlet $14c0b72509d70225$var$modifiedElementMap = new WeakMap();\nfunction $14c0b72509d70225$export$16a4697467175487(target) {\n    if ($bx7SL$isIOS()) {\n        if ($14c0b72509d70225$var$state === 'default') {\n            $14c0b72509d70225$var$savedUserSelect = document.documentElement.style.webkitUserSelect;\n            document.documentElement.style.webkitUserSelect = 'none';\n        }\n        $14c0b72509d70225$var$state = 'disabled';\n    } else if (target) {\n        // If not iOS, store the target's original user-select and change to user-select: none\n        // Ignore state since it doesn't apply for non iOS\n        $14c0b72509d70225$var$modifiedElementMap.set(target, target.style.userSelect);\n        target.style.userSelect = 'none';\n    }\n}\nfunction $14c0b72509d70225$export$b0d6fa1ab32e3295(target) {\n    if ($bx7SL$isIOS()) {\n        // If the state is already default, there's nothing to do.\n        // If it is restoring, then there's no need to queue a second restore.\n        if ($14c0b72509d70225$var$state !== 'disabled') return;\n        $14c0b72509d70225$var$state = 'restoring';\n        // There appears to be a delay on iOS where selection still might occur\n        // after pointer up, so wait a bit before removing user-select.\n        setTimeout(()=>{\n            // Wait for any CSS transitions to complete so we don't recompute style\n            // for the whole page in the middle of the animation and cause jank.\n            $bx7SL$runAfterTransition(()=>{\n                // Avoid race conditions\n                if ($14c0b72509d70225$var$state === 'restoring') {\n                    if (document.documentElement.style.webkitUserSelect === 'none') document.documentElement.style.webkitUserSelect = $14c0b72509d70225$var$savedUserSelect || '';\n                    $14c0b72509d70225$var$savedUserSelect = '';\n                    $14c0b72509d70225$var$state = 'default';\n                }\n            });\n        }, 300);\n    } else // If not iOS, restore the target's original user-select if any\n    // Ignore state since it doesn't apply for non iOS\n    if (target && $14c0b72509d70225$var$modifiedElementMap.has(target)) {\n        let targetOldUserSelect = $14c0b72509d70225$var$modifiedElementMap.get(target);\n        if (target.style.userSelect === 'none') target.style.userSelect = targetOldUserSelect;\n        if (target.getAttribute('style') === '') target.removeAttribute('style');\n        $14c0b72509d70225$var$modifiedElementMap.delete(target);\n    }\n}\n\n\n\n\n\n\nfunction $8a9cb279dc87e130$export$60278871457622de(event) {\n    // JAWS/NVDA with Firefox.\n    if (event.mozInputSource === 0 && event.isTrusted) return true;\n    return event.detail === 0 && !event.pointerType;\n}\nclass $8a9cb279dc87e130$export$905e7fc544a71f36 {\n    isDefaultPrevented() {\n        return this.nativeEvent.defaultPrevented;\n    }\n    preventDefault() {\n        this.defaultPrevented = true;\n        this.nativeEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.nativeEvent.stopPropagation();\n        this.isPropagationStopped = ()=>true\n        ;\n    }\n    isPropagationStopped() {\n        return false;\n    }\n    persist() {\n    }\n    constructor(type, nativeEvent){\n        this.nativeEvent = nativeEvent;\n        this.target = nativeEvent.target;\n        this.currentTarget = nativeEvent.currentTarget;\n        this.relatedTarget = nativeEvent.relatedTarget;\n        this.bubbles = nativeEvent.bubbles;\n        this.cancelable = nativeEvent.cancelable;\n        this.defaultPrevented = nativeEvent.defaultPrevented;\n        this.eventPhase = nativeEvent.eventPhase;\n        this.isTrusted = nativeEvent.isTrusted;\n        this.timeStamp = nativeEvent.timeStamp;\n        this.type = type;\n    }\n}\nfunction $8a9cb279dc87e130$export$715c682d09d639cc(onBlur) {\n    let stateRef = $bx7SL$useRef({\n        isFocused: false,\n        onBlur: onBlur,\n        observer: null\n    });\n    stateRef.current.onBlur = onBlur;\n    // Clean up MutationObserver on unmount. See below.\n    // eslint-disable-next-line arrow-body-style\n    $bx7SL$useLayoutEffect(()=>{\n        const state = stateRef.current;\n        return ()=>{\n            if (state.observer) {\n                state.observer.disconnect();\n                state.observer = null;\n            }\n        };\n    }, []);\n    // This function is called during a React onFocus event.\n    return $bx7SL$useCallback((e1)=>{\n        // React does not fire onBlur when an element is disabled. https://github.com/facebook/react/issues/9142\n        // Most browsers fire a native focusout event in this case, except for Firefox. In that case, we use a\n        // MutationObserver to watch for the disabled attribute, and dispatch these events ourselves.\n        // For browsers that do, focusout fires before the MutationObserver, so onBlur should not fire twice.\n        if (e1.target instanceof HTMLButtonElement || e1.target instanceof HTMLInputElement || e1.target instanceof HTMLTextAreaElement || e1.target instanceof HTMLSelectElement) {\n            stateRef.current.isFocused = true;\n            let target = e1.target;\n            let onBlurHandler = (e)=>{\n                var // For backward compatibility, dispatch a (fake) React synthetic event.\n                _current, ref;\n                stateRef.current.isFocused = false;\n                if (target.disabled) (ref = (_current = stateRef.current).onBlur) === null || ref === void 0 ? void 0 : ref.call(_current, new $8a9cb279dc87e130$export$905e7fc544a71f36('blur', e));\n                // We no longer need the MutationObserver once the target is blurred.\n                if (stateRef.current.observer) {\n                    stateRef.current.observer.disconnect();\n                    stateRef.current.observer = null;\n                }\n            };\n            target.addEventListener('focusout', onBlurHandler, {\n                once: true\n            });\n            stateRef.current.observer = new MutationObserver(()=>{\n                if (stateRef.current.isFocused && target.disabled) {\n                    stateRef.current.observer.disconnect();\n                    target.dispatchEvent(new FocusEvent('blur'));\n                    target.dispatchEvent(new FocusEvent('focusout', {\n                        bubbles: true\n                    }));\n                }\n            });\n            stateRef.current.observer.observe(target, {\n                attributes: true,\n                attributeFilter: [\n                    'disabled'\n                ]\n            });\n        }\n    }, []);\n}\n\n\n\nconst $ae1eeba8b9eafd08$export$5165eccb35aaadb5 = $bx7SL$react.createContext(null);\n$ae1eeba8b9eafd08$export$5165eccb35aaadb5.displayName = 'PressResponderContext';\n\n\nfunction $f6c31cce2adf654f$var$usePressResponderContext(props) {\n    // Consume context from <PressResponder> and merge with props.\n    let context = $bx7SL$useContext($ae1eeba8b9eafd08$export$5165eccb35aaadb5);\n    if (context) {\n        let { register: register , ...contextProps } = context;\n        props = $bx7SL$mergeProps(contextProps, props);\n        register();\n    }\n    $bx7SL$useSyncRef(context, props.ref);\n    return props;\n}\nfunction $f6c31cce2adf654f$export$45712eceda6fad21(props) {\n    let { onPress: onPress1 , onPressChange: onPressChange1 , onPressStart: onPressStart1 , onPressEnd: onPressEnd1 , onPressUp: onPressUp1 , isDisabled: isDisabled1 , isPressed: isPressedProp , preventFocusOnPress: preventFocusOnPress , shouldCancelOnPointerExit: shouldCancelOnPointerExit , allowTextSelectionOnPress: allowTextSelectionOnPress , // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ref: _ , ...domProps } = $f6c31cce2adf654f$var$usePressResponderContext(props);\n    let propsRef = $bx7SL$useRef(null);\n    propsRef.current = {\n        onPress: onPress1,\n        onPressChange: onPressChange1,\n        onPressStart: onPressStart1,\n        onPressEnd: onPressEnd1,\n        onPressUp: onPressUp1,\n        isDisabled: isDisabled1,\n        shouldCancelOnPointerExit: shouldCancelOnPointerExit\n    };\n    let [isPressed, setPressed] = $bx7SL$useState(false);\n    let ref = $bx7SL$useRef({\n        isPressed: false,\n        ignoreEmulatedMouseEvents: false,\n        ignoreClickAfterPress: false,\n        didFirePressStart: false,\n        activePointerId: null,\n        target: null,\n        isOverTarget: false,\n        pointerType: null\n    });\n    let { addGlobalListener: addGlobalListener , removeAllGlobalListeners: removeAllGlobalListeners  } = $bx7SL$useGlobalListeners();\n    let pressProps1 = $bx7SL$useMemo(()=>{\n        let state = ref.current;\n        let triggerPressStart = (originalEvent, pointerType)=>{\n            let { onPressStart: onPressStart , onPressChange: onPressChange , isDisabled: isDisabled  } = propsRef.current;\n            if (isDisabled || state.didFirePressStart) return;\n            if (onPressStart) onPressStart({\n                type: 'pressstart',\n                pointerType: pointerType,\n                target: originalEvent.currentTarget,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n            if (onPressChange) onPressChange(true);\n            state.didFirePressStart = true;\n            setPressed(true);\n        };\n        let triggerPressEnd = (originalEvent, pointerType, wasPressed = true)=>{\n            let { onPressEnd: onPressEnd , onPressChange: onPressChange , onPress: onPress , isDisabled: isDisabled  } = propsRef.current;\n            if (!state.didFirePressStart) return;\n            state.ignoreClickAfterPress = true;\n            state.didFirePressStart = false;\n            if (onPressEnd) onPressEnd({\n                type: 'pressend',\n                pointerType: pointerType,\n                target: originalEvent.currentTarget,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n            if (onPressChange) onPressChange(false);\n            setPressed(false);\n            if (onPress && wasPressed && !isDisabled) onPress({\n                type: 'press',\n                pointerType: pointerType,\n                target: originalEvent.currentTarget,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n        };\n        let triggerPressUp = (originalEvent, pointerType)=>{\n            let { onPressUp: onPressUp , isDisabled: isDisabled  } = propsRef.current;\n            if (isDisabled) return;\n            if (onPressUp) onPressUp({\n                type: 'pressup',\n                pointerType: pointerType,\n                target: originalEvent.currentTarget,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n        };\n        let cancel = (e)=>{\n            if (state.isPressed) {\n                if (state.isOverTarget) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\n                state.isPressed = false;\n                state.isOverTarget = false;\n                state.activePointerId = null;\n                state.pointerType = null;\n                removeAllGlobalListeners();\n                if (!allowTextSelectionOnPress) $14c0b72509d70225$export$b0d6fa1ab32e3295(state.target);\n            }\n        };\n        let pressProps = {\n            onKeyDown (e) {\n                if ($f6c31cce2adf654f$var$isValidKeyboardEvent(e.nativeEvent) && e.currentTarget.contains(e.target)) {\n                    if ($f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(e.target)) e.preventDefault();\n                    e.stopPropagation();\n                    // If the event is repeating, it may have started on a different element\n                    // after which focus moved to the current element. Ignore these events and\n                    // only handle the first key down event.\n                    if (!state.isPressed && !e.repeat) {\n                        state.target = e.currentTarget;\n                        state.isPressed = true;\n                        triggerPressStart(e, 'keyboard');\n                        // Focus may move before the key up event, so register the event on the document\n                        // instead of the same element where the key down event occurred.\n                        addGlobalListener(document, 'keyup', onKeyUp, false);\n                    }\n                }\n            },\n            onKeyUp (e) {\n                if ($f6c31cce2adf654f$var$isValidKeyboardEvent(e.nativeEvent) && !e.repeat && e.currentTarget.contains(e.target)) triggerPressUp($f6c31cce2adf654f$var$createEvent(state.target, e), 'keyboard');\n            },\n            onClick (e) {\n                if (e && !e.currentTarget.contains(e.target)) return;\n                if (e && e.button === 0) {\n                    e.stopPropagation();\n                    if (isDisabled1) e.preventDefault();\n                    // If triggered from a screen reader or by using element.click(),\n                    // trigger as if it were a keyboard click.\n                    if (!state.ignoreClickAfterPress && !state.ignoreEmulatedMouseEvents && (state.pointerType === 'virtual' || $8a9cb279dc87e130$export$60278871457622de(e.nativeEvent))) {\n                        // Ensure the element receives focus (VoiceOver on iOS does not do this)\n                        if (!isDisabled1 && !preventFocusOnPress) $bx7SL$focusWithoutScrolling(e.currentTarget);\n                        triggerPressStart(e, 'virtual');\n                        triggerPressUp(e, 'virtual');\n                        triggerPressEnd(e, 'virtual');\n                    }\n                    state.ignoreEmulatedMouseEvents = false;\n                    state.ignoreClickAfterPress = false;\n                }\n            }\n        };\n        let onKeyUp = (e)=>{\n            if (state.isPressed && $f6c31cce2adf654f$var$isValidKeyboardEvent(e)) {\n                if ($f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(e.target)) e.preventDefault();\n                e.stopPropagation();\n                state.isPressed = false;\n                let target = e.target;\n                triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), 'keyboard', state.target.contains(target));\n                removeAllGlobalListeners();\n                // If the target is a link, trigger the click method to open the URL,\n                // but defer triggering pressEnd until onClick event handler.\n                if (state.target.contains(target) && $f6c31cce2adf654f$var$isHTMLAnchorLink(state.target) || state.target.getAttribute('role') === 'link') state.target.click();\n            }\n        };\n        if (typeof PointerEvent !== 'undefined') {\n            pressProps.onPointerDown = (e)=>{\n                // Only handle left clicks, and ignore events that bubbled through portals.\n                if (e.button !== 0 || !e.currentTarget.contains(e.target)) return;\n                // iOS safari fires pointer events from VoiceOver with incorrect coordinates/target.\n                // Ignore and let the onClick handler take care of it instead.\n                // https://bugs.webkit.org/show_bug.cgi?id=222627\n                // https://bugs.webkit.org/show_bug.cgi?id=223202\n                if ($f6c31cce2adf654f$var$isVirtualPointerEvent(e.nativeEvent)) {\n                    state.pointerType = 'virtual';\n                    return;\n                }\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent\n                // default on pointer down and handle focusing the pressable element ourselves.\n                if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\n                state.pointerType = e.pointerType;\n                e.stopPropagation();\n                if (!state.isPressed) {\n                    state.isPressed = true;\n                    state.isOverTarget = true;\n                    state.activePointerId = e.pointerId;\n                    state.target = e.currentTarget;\n                    if (!isDisabled1 && !preventFocusOnPress) $bx7SL$focusWithoutScrolling(e.currentTarget);\n                    if (!allowTextSelectionOnPress) $14c0b72509d70225$export$16a4697467175487(state.target);\n                    triggerPressStart(e, state.pointerType);\n                    addGlobalListener(document, 'pointermove', onPointerMove, false);\n                    addGlobalListener(document, 'pointerup', onPointerUp, false);\n                    addGlobalListener(document, 'pointercancel', onPointerCancel, false);\n                }\n            };\n            pressProps.onMouseDown = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                if (e.button === 0) {\n                    // Chrome and Firefox on touch Windows devices require mouse down events\n                    // to be canceled in addition to pointer events, or an extra asynchronous\n                    // focus event will be fired.\n                    if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\n                    e.stopPropagation();\n                }\n            };\n            pressProps.onPointerUp = (e)=>{\n                // iOS fires pointerup with zero width and height, so check the pointerType recorded during pointerdown.\n                if (!e.currentTarget.contains(e.target) || state.pointerType === 'virtual') return;\n                // Only handle left clicks\n                // Safari on iOS sometimes fires pointerup events, even\n                // when the touch isn't over the target, so double check.\n                if (e.button === 0 && $f6c31cce2adf654f$var$isOverTarget(e, e.currentTarget)) triggerPressUp(e, state.pointerType || e.pointerType);\n            };\n            // Safari on iOS < 13.2 does not implement pointerenter/pointerleave events correctly.\n            // Use pointer move events instead to implement our own hit testing.\n            // See https://bugs.webkit.org/show_bug.cgi?id=199803\n            let onPointerMove = (e)=>{\n                if (e.pointerId !== state.activePointerId) return;\n                if ($f6c31cce2adf654f$var$isOverTarget(e, state.target)) {\n                    if (!state.isOverTarget) {\n                        state.isOverTarget = true;\n                        triggerPressStart($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\n                    }\n                } else if (state.isOverTarget) {\n                    state.isOverTarget = false;\n                    triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\n                    if (propsRef.current.shouldCancelOnPointerExit) cancel(e);\n                }\n            };\n            let onPointerUp = (e)=>{\n                if (e.pointerId === state.activePointerId && state.isPressed && e.button === 0) {\n                    if ($f6c31cce2adf654f$var$isOverTarget(e, state.target)) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\n                    else if (state.isOverTarget) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\n                    state.isPressed = false;\n                    state.isOverTarget = false;\n                    state.activePointerId = null;\n                    state.pointerType = null;\n                    removeAllGlobalListeners();\n                    if (!allowTextSelectionOnPress) $14c0b72509d70225$export$b0d6fa1ab32e3295(state.target);\n                }\n            };\n            let onPointerCancel = (e)=>{\n                cancel(e);\n            };\n            pressProps.onDragStart = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                // Safari does not call onPointerCancel when a drag starts, whereas Chrome and Firefox do.\n                cancel(e);\n            };\n        } else {\n            pressProps.onMouseDown = (e)=>{\n                // Only handle left clicks\n                if (e.button !== 0 || !e.currentTarget.contains(e.target)) return;\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent\n                // default on mouse down and handle focusing the pressable element ourselves.\n                if ($f6c31cce2adf654f$var$shouldPreventDefault(e.currentTarget)) e.preventDefault();\n                e.stopPropagation();\n                if (state.ignoreEmulatedMouseEvents) return;\n                state.isPressed = true;\n                state.isOverTarget = true;\n                state.target = e.currentTarget;\n                state.pointerType = $8a9cb279dc87e130$export$60278871457622de(e.nativeEvent) ? 'virtual' : 'mouse';\n                if (!isDisabled1 && !preventFocusOnPress) $bx7SL$focusWithoutScrolling(e.currentTarget);\n                triggerPressStart(e, state.pointerType);\n                addGlobalListener(document, 'mouseup', onMouseUp, false);\n            };\n            pressProps.onMouseEnter = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                if (state.isPressed && !state.ignoreEmulatedMouseEvents) {\n                    state.isOverTarget = true;\n                    triggerPressStart(e, state.pointerType);\n                }\n            };\n            pressProps.onMouseLeave = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                if (state.isPressed && !state.ignoreEmulatedMouseEvents) {\n                    state.isOverTarget = false;\n                    triggerPressEnd(e, state.pointerType, false);\n                    if (propsRef.current.shouldCancelOnPointerExit) cancel(e);\n                }\n            };\n            pressProps.onMouseUp = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                if (!state.ignoreEmulatedMouseEvents && e.button === 0) triggerPressUp(e, state.pointerType);\n            };\n            let onMouseUp = (e)=>{\n                // Only handle left clicks\n                if (e.button !== 0) return;\n                state.isPressed = false;\n                removeAllGlobalListeners();\n                if (state.ignoreEmulatedMouseEvents) {\n                    state.ignoreEmulatedMouseEvents = false;\n                    return;\n                }\n                if ($f6c31cce2adf654f$var$isOverTarget(e, state.target)) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType);\n                else if (state.isOverTarget) triggerPressEnd($f6c31cce2adf654f$var$createEvent(state.target, e), state.pointerType, false);\n                state.isOverTarget = false;\n            };\n            pressProps.onTouchStart = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                let touch = $f6c31cce2adf654f$var$getTouchFromEvent(e.nativeEvent);\n                if (!touch) return;\n                state.activePointerId = touch.identifier;\n                state.ignoreEmulatedMouseEvents = true;\n                state.isOverTarget = true;\n                state.isPressed = true;\n                state.target = e.currentTarget;\n                state.pointerType = 'touch';\n                // Due to browser inconsistencies, especially on mobile browsers, we prevent default\n                // on the emulated mouse event and handle focusing the pressable element ourselves.\n                if (!isDisabled1 && !preventFocusOnPress) $bx7SL$focusWithoutScrolling(e.currentTarget);\n                if (!allowTextSelectionOnPress) $14c0b72509d70225$export$16a4697467175487(state.target);\n                triggerPressStart(e, state.pointerType);\n                addGlobalListener(window, 'scroll', onScroll, true);\n            };\n            pressProps.onTouchMove = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                if (!state.isPressed) return;\n                let touch = $f6c31cce2adf654f$var$getTouchById(e.nativeEvent, state.activePointerId);\n                if (touch && $f6c31cce2adf654f$var$isOverTarget(touch, e.currentTarget)) {\n                    if (!state.isOverTarget) {\n                        state.isOverTarget = true;\n                        triggerPressStart(e, state.pointerType);\n                    }\n                } else if (state.isOverTarget) {\n                    state.isOverTarget = false;\n                    triggerPressEnd(e, state.pointerType, false);\n                    if (propsRef.current.shouldCancelOnPointerExit) cancel(e);\n                }\n            };\n            pressProps.onTouchEnd = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                if (!state.isPressed) return;\n                let touch = $f6c31cce2adf654f$var$getTouchById(e.nativeEvent, state.activePointerId);\n                if (touch && $f6c31cce2adf654f$var$isOverTarget(touch, e.currentTarget)) {\n                    triggerPressUp(e, state.pointerType);\n                    triggerPressEnd(e, state.pointerType);\n                } else if (state.isOverTarget) triggerPressEnd(e, state.pointerType, false);\n                state.isPressed = false;\n                state.activePointerId = null;\n                state.isOverTarget = false;\n                state.ignoreEmulatedMouseEvents = true;\n                if (!allowTextSelectionOnPress) $14c0b72509d70225$export$b0d6fa1ab32e3295(state.target);\n                removeAllGlobalListeners();\n            };\n            pressProps.onTouchCancel = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                e.stopPropagation();\n                if (state.isPressed) cancel(e);\n            };\n            let onScroll = (e)=>{\n                if (state.isPressed && e.target.contains(state.target)) cancel({\n                    currentTarget: state.target,\n                    shiftKey: false,\n                    ctrlKey: false,\n                    metaKey: false,\n                    altKey: false\n                });\n            };\n            pressProps.onDragStart = (e)=>{\n                if (!e.currentTarget.contains(e.target)) return;\n                cancel(e);\n            };\n        }\n        return pressProps;\n    }, [\n        addGlobalListener,\n        isDisabled1,\n        preventFocusOnPress,\n        removeAllGlobalListeners,\n        allowTextSelectionOnPress\n    ]);\n    // Remove user-select: none in case component unmounts immediately after pressStart\n    // eslint-disable-next-line arrow-body-style\n    $bx7SL$useEffect(()=>{\n        return ()=>{\n            if (!allowTextSelectionOnPress) $14c0b72509d70225$export$b0d6fa1ab32e3295(ref.current.target);\n        };\n    }, [\n        allowTextSelectionOnPress\n    ]);\n    return {\n        isPressed: isPressedProp || isPressed,\n        pressProps: $bx7SL$mergeProps(domProps, pressProps1)\n    };\n}\nfunction $f6c31cce2adf654f$var$isHTMLAnchorLink(target) {\n    return target.tagName === 'A' && target.hasAttribute('href');\n}\nfunction $f6c31cce2adf654f$var$isValidKeyboardEvent(event) {\n    const { key: key , code: code , target: target  } = event;\n    const element = target;\n    const { tagName: tagName , isContentEditable: isContentEditable  } = element;\n    const role = element.getAttribute('role');\n    // Accessibility for keyboards. Space and Enter only.\n    // \"Spacebar\" is for IE 11\n    return (key === 'Enter' || key === ' ' || key === 'Spacebar' || code === 'Space') && tagName !== 'INPUT' && tagName !== 'TEXTAREA' && isContentEditable !== true && (!$f6c31cce2adf654f$var$isHTMLAnchorLink(element) || role === 'button' && key !== 'Enter') && // An element with role='link' should only trigger with Enter key\n    !(role === 'link' && key !== 'Enter');\n}\nfunction $f6c31cce2adf654f$var$getTouchFromEvent(event) {\n    const { targetTouches: targetTouches  } = event;\n    if (targetTouches.length > 0) return targetTouches[0];\n    return null;\n}\nfunction $f6c31cce2adf654f$var$getTouchById(event, pointerId) {\n    const changedTouches = event.changedTouches;\n    for(let i = 0; i < changedTouches.length; i++){\n        const touch = changedTouches[i];\n        if (touch.identifier === pointerId) return touch;\n    }\n    return null;\n}\nfunction $f6c31cce2adf654f$var$createEvent(target, e) {\n    return {\n        currentTarget: target,\n        shiftKey: e.shiftKey,\n        ctrlKey: e.ctrlKey,\n        metaKey: e.metaKey,\n        altKey: e.altKey\n    };\n}\nfunction $f6c31cce2adf654f$var$getPointClientRect(point) {\n    let offsetX = point.width / 2 || point.radiusX || 0;\n    let offsetY = point.height / 2 || point.radiusY || 0;\n    return {\n        top: point.clientY - offsetY,\n        right: point.clientX + offsetX,\n        bottom: point.clientY + offsetY,\n        left: point.clientX - offsetX\n    };\n}\nfunction $f6c31cce2adf654f$var$areRectanglesOverlapping(a, b) {\n    // check if they cannot overlap on x axis\n    if (a.left > b.right || b.left > a.right) return false;\n    // check if they cannot overlap on y axis\n    if (a.top > b.bottom || b.top > a.bottom) return false;\n    return true;\n}\nfunction $f6c31cce2adf654f$var$isOverTarget(point, target) {\n    let rect = target.getBoundingClientRect();\n    let pointRect = $f6c31cce2adf654f$var$getPointClientRect(point);\n    return $f6c31cce2adf654f$var$areRectanglesOverlapping(rect, pointRect);\n}\nfunction $f6c31cce2adf654f$var$shouldPreventDefault(target) {\n    // We cannot prevent default if the target is a draggable element.\n    return !target.draggable;\n}\nfunction $f6c31cce2adf654f$var$shouldPreventDefaultKeyboard(target) {\n    return !((target.tagName === 'INPUT' || target.tagName === 'BUTTON') && target.type === 'submit');\n}\nfunction $f6c31cce2adf654f$var$isVirtualPointerEvent(event) {\n    // If the pointer size is zero, then we assume it's from a screen reader.\n    // Android TalkBack double tap will sometimes return a event with width and height of 1\n    // and pointerType === 'mouse' so we need to check for a specific combination of event attributes.\n    // Cannot use \"event.pressure === 0\" as the sole check due to Safari pointer events always returning pressure === 0\n    // instead of .5, see https://bugs.webkit.org/show_bug.cgi?id=206216. event.pointerType === 'mouse' is to distingush\n    // Talkback double tap from Windows Firefox touch screen press\n    return event.width === 0 && event.height === 0 || event.width === 1 && event.height === 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'mouse';\n}\n\n\n\nconst $3b117e43dc0ca95d$export$27c701ed9e449e99 = /*#__PURE__*/ $bx7SL$react.forwardRef(({ children: children , ...props }, ref)=>{\n    let newRef = $bx7SL$useRef();\n    ref = ref !== null && ref !== void 0 ? ref : newRef;\n    let { pressProps: pressProps  } = $f6c31cce2adf654f$export$45712eceda6fad21({\n        ...props,\n        ref: ref\n    });\n    let child = $bx7SL$react.Children.only(children);\n    return(/*#__PURE__*/ $bx7SL$react.cloneElement(child, // @ts-ignore\n    {\n        ref: ref,\n        ...$bx7SL$mergeProps(child.props, pressProps)\n    }));\n});\n\n\nvar $f1ab8c75478c6f73$exports = {};\n\n$parcel$export($f1ab8c75478c6f73$exports, \"PressResponder\", () => $f1ab8c75478c6f73$export$3351871ee4b288b8);\n\n\n\nconst $f1ab8c75478c6f73$export$3351871ee4b288b8 = /*#__PURE__*/ $bx7SL$react.forwardRef(({ children: children , ...props }, ref)=>{\n    let isRegistered = $bx7SL$useRef(false);\n    let prevContext = $bx7SL$useContext($ae1eeba8b9eafd08$export$5165eccb35aaadb5);\n    let context = $bx7SL$mergeProps(prevContext || {\n    }, {\n        ...props,\n        ref: ref || (prevContext === null || prevContext === void 0 ? void 0 : prevContext.ref),\n        register () {\n            isRegistered.current = true;\n            if (prevContext) prevContext.register();\n        }\n    });\n    $bx7SL$useSyncRef(prevContext, ref);\n    $bx7SL$useEffect(()=>{\n        if (!isRegistered.current) console.warn(\"A PressResponder was rendered without a pressable child. Either call the usePress hook, or wrap your DOM node with <Pressable> component.\");\n    }, []);\n    return(/*#__PURE__*/ $bx7SL$react.createElement($ae1eeba8b9eafd08$export$5165eccb35aaadb5.Provider, {\n        value: context\n    }, children));\n});\n\n\nvar $a1ea59d68270f0dd$exports = {};\n\n$parcel$export($a1ea59d68270f0dd$exports, \"useFocus\", () => $a1ea59d68270f0dd$export$f8168d8dd8fd66e6);\n\n\nfunction $a1ea59d68270f0dd$export$f8168d8dd8fd66e6(props) {\n    let { isDisabled: isDisabled , onFocus: onFocusProp , onBlur: onBlurProp , onFocusChange: onFocusChange  } = props;\n    const onBlur = $bx7SL$useCallback((e)=>{\n        if (e.target === e.currentTarget) {\n            if (onBlurProp) onBlurProp(e);\n            if (onFocusChange) onFocusChange(false);\n            return true;\n        }\n    }, [\n        onBlurProp,\n        onFocusChange\n    ]);\n    const onSyntheticFocus = $8a9cb279dc87e130$export$715c682d09d639cc(onBlur);\n    const onFocus = $bx7SL$useCallback((e)=>{\n        if (e.target === e.currentTarget) {\n            if (onFocusProp) onFocusProp(e);\n            if (onFocusChange) onFocusChange(true);\n            onSyntheticFocus(e);\n        }\n    }, [\n        onFocusChange,\n        onFocusProp,\n        onSyntheticFocus\n    ]);\n    return {\n        focusProps: {\n            onFocus: !isDisabled && (onFocusProp || onFocusChange || onBlurProp) ? onFocus : undefined,\n            onBlur: !isDisabled && (onBlurProp || onFocusChange) ? onBlur : null\n        }\n    };\n}\n\n\nvar $507fabe10e71c6fb$exports = {};\n\n$parcel$export($507fabe10e71c6fb$exports, \"isFocusVisible\", () => $507fabe10e71c6fb$export$b9b3dfddab17db27);\n$parcel$export($507fabe10e71c6fb$exports, \"getInteractionModality\", () => $507fabe10e71c6fb$export$630ff653c5ada6a9);\n$parcel$export($507fabe10e71c6fb$exports, \"setInteractionModality\", () => $507fabe10e71c6fb$export$8397ddfc504fdb9a);\n$parcel$export($507fabe10e71c6fb$exports, \"useInteractionModality\", () => $507fabe10e71c6fb$export$98e20ec92f614cfe);\n$parcel$export($507fabe10e71c6fb$exports, \"useFocusVisible\", () => $507fabe10e71c6fb$export$ffd9e5021c1fb2d6);\n$parcel$export($507fabe10e71c6fb$exports, \"useFocusVisibleListener\", () => $507fabe10e71c6fb$export$ec71b4b83ac08ec3);\n\n\n\nlet $507fabe10e71c6fb$var$currentModality = null;\nlet $507fabe10e71c6fb$var$changeHandlers = new Set();\nlet $507fabe10e71c6fb$var$hasSetupGlobalListeners = false;\nlet $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\nlet $507fabe10e71c6fb$var$hasBlurredWindowRecently = false;\n// Only Tab or Esc keys will make focus visible on text input elements\nconst $507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS = {\n    Tab: true,\n    Escape: true\n};\nfunction $507fabe10e71c6fb$var$triggerChangeHandlers(modality, e) {\n    for (let handler of $507fabe10e71c6fb$var$changeHandlers)handler(modality, e);\n}\n/**\n * Helper function to determine if a KeyboardEvent is unmodified and could make keyboard focus styles visible.\n */ function $507fabe10e71c6fb$var$isValidKey(e) {\n    // Control and Shift keys trigger when navigating back to the tab with keyboard.\n    return !(e.metaKey || !$bx7SL$isMac() && e.altKey || e.ctrlKey || e.key === 'Control' || e.key === 'Shift' || e.key === 'Meta');\n}\nfunction $507fabe10e71c6fb$var$handleKeyboardEvent(e) {\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\n    if ($507fabe10e71c6fb$var$isValidKey(e)) {\n        $507fabe10e71c6fb$var$currentModality = 'keyboard';\n        $507fabe10e71c6fb$var$triggerChangeHandlers('keyboard', e);\n    }\n}\nfunction $507fabe10e71c6fb$var$handlePointerEvent(e) {\n    $507fabe10e71c6fb$var$currentModality = 'pointer';\n    if (e.type === 'mousedown' || e.type === 'pointerdown') {\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\n        $507fabe10e71c6fb$var$triggerChangeHandlers('pointer', e);\n    }\n}\nfunction $507fabe10e71c6fb$var$handleClickEvent(e) {\n    if ($8a9cb279dc87e130$export$60278871457622de(e)) {\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\n        $507fabe10e71c6fb$var$currentModality = 'virtual';\n    }\n}\nfunction $507fabe10e71c6fb$var$handleFocusEvent(e) {\n    // Firefox fires two extra focus events when the user first clicks into an iframe:\n    // first on the window, then on the document. We ignore these events so they don't\n    // cause keyboard focus rings to appear.\n    if (e.target === window || e.target === document) return;\n    // If a focus event occurs without a preceding keyboard or pointer event, switch to virtual modality.\n    // This occurs, for example, when navigating a form with the next/previous buttons on iOS.\n    if (!$507fabe10e71c6fb$var$hasEventBeforeFocus && !$507fabe10e71c6fb$var$hasBlurredWindowRecently) {\n        $507fabe10e71c6fb$var$currentModality = 'virtual';\n        $507fabe10e71c6fb$var$triggerChangeHandlers('virtual', e);\n    }\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\n    $507fabe10e71c6fb$var$hasBlurredWindowRecently = false;\n}\nfunction $507fabe10e71c6fb$var$handleWindowBlur() {\n    // When the window is blurred, reset state. This is necessary when tabbing out of the window,\n    // for example, since a subsequent focus event won't be fired.\n    $507fabe10e71c6fb$var$hasEventBeforeFocus = false;\n    $507fabe10e71c6fb$var$hasBlurredWindowRecently = true;\n}\n/**\n * Setup global event listeners to control when keyboard focus style should be visible.\n */ function $507fabe10e71c6fb$var$setupGlobalFocusEvents() {\n    if (typeof window === 'undefined' || $507fabe10e71c6fb$var$hasSetupGlobalListeners) return;\n    // Programmatic focus() calls shouldn't affect the current input modality.\n    // However, we need to detect other cases when a focus event occurs without\n    // a preceding user event (e.g. screen reader focus). Overriding the focus\n    // method on HTMLElement.prototype is a bit hacky, but works.\n    let focus = HTMLElement.prototype.focus;\n    HTMLElement.prototype.focus = function() {\n        $507fabe10e71c6fb$var$hasEventBeforeFocus = true;\n        focus.apply(this, arguments);\n    };\n    document.addEventListener('keydown', $507fabe10e71c6fb$var$handleKeyboardEvent, true);\n    document.addEventListener('keyup', $507fabe10e71c6fb$var$handleKeyboardEvent, true);\n    document.addEventListener('click', $507fabe10e71c6fb$var$handleClickEvent, true);\n    // Register focus events on the window so they are sure to happen\n    // before React's event listeners (registered on the document).\n    window.addEventListener('focus', $507fabe10e71c6fb$var$handleFocusEvent, true);\n    window.addEventListener('blur', $507fabe10e71c6fb$var$handleWindowBlur, false);\n    if (typeof PointerEvent !== 'undefined') {\n        document.addEventListener('pointerdown', $507fabe10e71c6fb$var$handlePointerEvent, true);\n        document.addEventListener('pointermove', $507fabe10e71c6fb$var$handlePointerEvent, true);\n        document.addEventListener('pointerup', $507fabe10e71c6fb$var$handlePointerEvent, true);\n    } else {\n        document.addEventListener('mousedown', $507fabe10e71c6fb$var$handlePointerEvent, true);\n        document.addEventListener('mousemove', $507fabe10e71c6fb$var$handlePointerEvent, true);\n        document.addEventListener('mouseup', $507fabe10e71c6fb$var$handlePointerEvent, true);\n    }\n    $507fabe10e71c6fb$var$hasSetupGlobalListeners = true;\n}\nif (typeof document !== 'undefined') {\n    if (document.readyState !== 'loading') $507fabe10e71c6fb$var$setupGlobalFocusEvents();\n    else document.addEventListener('DOMContentLoaded', $507fabe10e71c6fb$var$setupGlobalFocusEvents);\n}\nfunction $507fabe10e71c6fb$export$b9b3dfddab17db27() {\n    return $507fabe10e71c6fb$var$currentModality !== 'pointer';\n}\nfunction $507fabe10e71c6fb$export$630ff653c5ada6a9() {\n    return $507fabe10e71c6fb$var$currentModality;\n}\nfunction $507fabe10e71c6fb$export$8397ddfc504fdb9a(modality) {\n    $507fabe10e71c6fb$var$currentModality = modality;\n    $507fabe10e71c6fb$var$triggerChangeHandlers(modality, null);\n}\nfunction $507fabe10e71c6fb$export$98e20ec92f614cfe() {\n    $507fabe10e71c6fb$var$setupGlobalFocusEvents();\n    let [modality, setModality] = $bx7SL$useState($507fabe10e71c6fb$var$currentModality);\n    $bx7SL$useEffect(()=>{\n        let handler = ()=>{\n            setModality($507fabe10e71c6fb$var$currentModality);\n        };\n        $507fabe10e71c6fb$var$changeHandlers.add(handler);\n        return ()=>{\n            $507fabe10e71c6fb$var$changeHandlers.delete(handler);\n        };\n    }, []);\n    return modality;\n}\n/**\n * If this is attached to text input component, return if the event is a focus event (Tab/Escape keys pressed) so that\n * focus visible style can be properly set.\n */ function $507fabe10e71c6fb$var$isKeyboardFocusEvent(isTextInput, modality, e) {\n    return !(isTextInput && modality === 'keyboard' && e instanceof KeyboardEvent && !$507fabe10e71c6fb$var$FOCUS_VISIBLE_INPUT_KEYS[e.key]);\n}\nfunction $507fabe10e71c6fb$export$ffd9e5021c1fb2d6(props = {\n}) {\n    let { isTextInput: isTextInput , autoFocus: autoFocus  } = props;\n    let [isFocusVisibleState, setFocusVisible] = $bx7SL$useState(autoFocus || $507fabe10e71c6fb$export$b9b3dfddab17db27());\n    $507fabe10e71c6fb$export$ec71b4b83ac08ec3(($507fabe10e71c6fb$export$b9b3dfddab17db27)=>{\n        setFocusVisible($507fabe10e71c6fb$export$b9b3dfddab17db27);\n    }, [\n        isTextInput\n    ], {\n        isTextInput: isTextInput\n    });\n    return {\n        isFocusVisible: isFocusVisibleState\n    };\n}\nfunction $507fabe10e71c6fb$export$ec71b4b83ac08ec3(fn, deps, opts) {\n    $507fabe10e71c6fb$var$setupGlobalFocusEvents();\n    $bx7SL$useEffect(()=>{\n        let handler = (modality, e)=>{\n            if (!$507fabe10e71c6fb$var$isKeyboardFocusEvent(opts === null || opts === void 0 ? void 0 : opts.isTextInput, modality, e)) return;\n            fn($507fabe10e71c6fb$export$b9b3dfddab17db27());\n        };\n        $507fabe10e71c6fb$var$changeHandlers.add(handler);\n        return ()=>{\n            $507fabe10e71c6fb$var$changeHandlers.delete(handler);\n        };\n    }, deps);\n}\n\n\nvar $9ab94262bd0047c7$exports = {};\n\n$parcel$export($9ab94262bd0047c7$exports, \"useFocusWithin\", () => $9ab94262bd0047c7$export$420e68273165f4ec);\n\n\nfunction $9ab94262bd0047c7$export$420e68273165f4ec(props) {\n    let { isDisabled: isDisabled , onBlurWithin: onBlurWithin , onFocusWithin: onFocusWithin , onFocusWithinChange: onFocusWithinChange  } = props;\n    let state = $bx7SL$useRef({\n        isFocusWithin: false\n    });\n    let onBlur = $bx7SL$useCallback((e)=>{\n        // We don't want to trigger onBlurWithin and then immediately onFocusWithin again\n        // when moving focus inside the element. Only trigger if the currentTarget doesn't\n        // include the relatedTarget (where focus is moving).\n        if (state.current.isFocusWithin && !e.currentTarget.contains(e.relatedTarget)) {\n            state.current.isFocusWithin = false;\n            if (onBlurWithin) onBlurWithin(e);\n            if (onFocusWithinChange) onFocusWithinChange(false);\n        }\n    }, [\n        onBlurWithin,\n        onFocusWithinChange,\n        state\n    ]);\n    let onSyntheticFocus = $8a9cb279dc87e130$export$715c682d09d639cc(onBlur);\n    let onFocus = $bx7SL$useCallback((e)=>{\n        if (!state.current.isFocusWithin) {\n            if (onFocusWithin) onFocusWithin(e);\n            if (onFocusWithinChange) onFocusWithinChange(true);\n            state.current.isFocusWithin = true;\n            onSyntheticFocus(e);\n        }\n    }, [\n        onFocusWithin,\n        onFocusWithinChange,\n        onSyntheticFocus\n    ]);\n    if (isDisabled) return {\n        focusWithinProps: {\n            onFocus: null,\n            onBlur: null\n        }\n    };\n    return {\n        focusWithinProps: {\n            onFocus: onFocus,\n            onBlur: onBlur\n        }\n    };\n}\n\n\nvar $6179b936705e76d3$exports = {};\n\n$parcel$export($6179b936705e76d3$exports, \"useHover\", () => $6179b936705e76d3$export$ae780daf29e6d456);\n\n// iOS fires onPointerEnter twice: once with pointerType=\"touch\" and again with pointerType=\"mouse\".\n// We want to ignore these emulated events so they do not trigger hover behavior.\n// See https://bugs.webkit.org/show_bug.cgi?id=214609.\nlet $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = false;\nlet $6179b936705e76d3$var$hoverCount = 0;\nfunction $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents() {\n    $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = true;\n    // Clear globalIgnoreEmulatedMouseEvents after a short timeout. iOS fires onPointerEnter\n    // with pointerType=\"mouse\" immediately after onPointerUp and before onFocus. On other\n    // devices that don't have this quirk, we don't want to ignore a mouse hover sometime in\n    // the distant future because a user previously touched the element.\n    setTimeout(()=>{\n        $6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents = false;\n    }, 50);\n}\nfunction $6179b936705e76d3$var$handleGlobalPointerEvent(e) {\n    if (e.pointerType === 'touch') $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents();\n}\nfunction $6179b936705e76d3$var$setupGlobalTouchEvents() {\n    if (typeof document === 'undefined') return;\n    if (typeof PointerEvent !== 'undefined') document.addEventListener('pointerup', $6179b936705e76d3$var$handleGlobalPointerEvent);\n    else document.addEventListener('touchend', $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents);\n    $6179b936705e76d3$var$hoverCount++;\n    return ()=>{\n        $6179b936705e76d3$var$hoverCount--;\n        if ($6179b936705e76d3$var$hoverCount > 0) return;\n        if (typeof PointerEvent !== 'undefined') document.removeEventListener('pointerup', $6179b936705e76d3$var$handleGlobalPointerEvent);\n        else document.removeEventListener('touchend', $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents);\n    };\n}\nfunction $6179b936705e76d3$export$ae780daf29e6d456(props) {\n    let { onHoverStart: onHoverStart , onHoverChange: onHoverChange , onHoverEnd: onHoverEnd , isDisabled: isDisabled  } = props;\n    let [isHovered, setHovered] = $bx7SL$useState(false);\n    let state = $bx7SL$useRef({\n        isHovered: false,\n        ignoreEmulatedMouseEvents: false,\n        pointerType: '',\n        target: null\n    }).current;\n    $bx7SL$useEffect($6179b936705e76d3$var$setupGlobalTouchEvents, []);\n    let { hoverProps: hoverProps1 , triggerHoverEnd: triggerHoverEnd1  } = $bx7SL$useMemo(()=>{\n        let triggerHoverStart = (event, pointerType)=>{\n            state.pointerType = pointerType;\n            if (isDisabled || pointerType === 'touch' || state.isHovered || !event.currentTarget.contains(event.target)) return;\n            state.isHovered = true;\n            let target = event.currentTarget;\n            state.target = target;\n            if (onHoverStart) onHoverStart({\n                type: 'hoverstart',\n                target: target,\n                pointerType: pointerType\n            });\n            if (onHoverChange) onHoverChange(true);\n            setHovered(true);\n        };\n        let triggerHoverEnd = (event, pointerType)=>{\n            state.pointerType = '';\n            state.target = null;\n            if (pointerType === 'touch' || !state.isHovered) return;\n            state.isHovered = false;\n            let target = event.currentTarget;\n            if (onHoverEnd) onHoverEnd({\n                type: 'hoverend',\n                target: target,\n                pointerType: pointerType\n            });\n            if (onHoverChange) onHoverChange(false);\n            setHovered(false);\n        };\n        let hoverProps = {\n        };\n        if (typeof PointerEvent !== 'undefined') {\n            hoverProps.onPointerEnter = (e)=>{\n                if ($6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents && e.pointerType === 'mouse') return;\n                triggerHoverStart(e, e.pointerType);\n            };\n            hoverProps.onPointerLeave = (e)=>{\n                if (!isDisabled && e.currentTarget.contains(e.target)) triggerHoverEnd(e, e.pointerType);\n            };\n        } else {\n            hoverProps.onTouchStart = ()=>{\n                state.ignoreEmulatedMouseEvents = true;\n            };\n            hoverProps.onMouseEnter = (e)=>{\n                if (!state.ignoreEmulatedMouseEvents && !$6179b936705e76d3$var$globalIgnoreEmulatedMouseEvents) triggerHoverStart(e, 'mouse');\n                state.ignoreEmulatedMouseEvents = false;\n            };\n            hoverProps.onMouseLeave = (e)=>{\n                if (!isDisabled && e.currentTarget.contains(e.target)) triggerHoverEnd(e, 'mouse');\n            };\n        }\n        return {\n            hoverProps: hoverProps,\n            triggerHoverEnd: triggerHoverEnd\n        };\n    }, [\n        onHoverStart,\n        onHoverChange,\n        onHoverEnd,\n        isDisabled,\n        state\n    ]);\n    $bx7SL$useEffect(()=>{\n        // Call the triggerHoverEnd as soon as isDisabled changes to true\n        // Safe to call triggerHoverEnd, it will early return if we aren't currently hovering\n        if (isDisabled) triggerHoverEnd1({\n            currentTarget: state.target\n        }, state.pointerType);\n    }, [\n        isDisabled\n    ]);\n    return {\n        hoverProps: hoverProps1,\n        isHovered: isHovered\n    };\n}\n\n\nvar $e0b6e0b68ec7f50f$exports = {};\n\n$parcel$export($e0b6e0b68ec7f50f$exports, \"useInteractOutside\", () => $e0b6e0b68ec7f50f$export$872b660ac5a1ff98);\n\nfunction $e0b6e0b68ec7f50f$export$872b660ac5a1ff98(props) {\n    let { ref: ref , onInteractOutside: onInteractOutside , isDisabled: isDisabled , onInteractOutsideStart: onInteractOutsideStart  } = props;\n    let stateRef = $bx7SL$useRef({\n        isPointerDown: false,\n        ignoreEmulatedMouseEvents: false,\n        onInteractOutside: onInteractOutside,\n        onInteractOutsideStart: onInteractOutsideStart\n    });\n    let state = stateRef.current;\n    state.onInteractOutside = onInteractOutside;\n    state.onInteractOutsideStart = onInteractOutsideStart;\n    $bx7SL$useEffect(()=>{\n        if (isDisabled) return;\n        let onPointerDown = (e)=>{\n            if ($e0b6e0b68ec7f50f$var$isValidEvent(e, ref) && state.onInteractOutside) {\n                if (state.onInteractOutsideStart) state.onInteractOutsideStart(e);\n                state.isPointerDown = true;\n            }\n        };\n        // Use pointer events if available. Otherwise, fall back to mouse and touch events.\n        if (typeof PointerEvent !== 'undefined') {\n            let onPointerUp = (e)=>{\n                if (state.isPointerDown && state.onInteractOutside && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\n                    state.isPointerDown = false;\n                    state.onInteractOutside(e);\n                }\n            };\n            // changing these to capture phase fixed combobox\n            document.addEventListener('pointerdown', onPointerDown, true);\n            document.addEventListener('pointerup', onPointerUp, true);\n            return ()=>{\n                document.removeEventListener('pointerdown', onPointerDown, true);\n                document.removeEventListener('pointerup', onPointerUp, true);\n            };\n        } else {\n            let onMouseUp = (e)=>{\n                if (state.ignoreEmulatedMouseEvents) state.ignoreEmulatedMouseEvents = false;\n                else if (state.isPointerDown && state.onInteractOutside && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\n                    state.isPointerDown = false;\n                    state.onInteractOutside(e);\n                }\n            };\n            let onTouchEnd = (e)=>{\n                state.ignoreEmulatedMouseEvents = true;\n                if (state.onInteractOutside && state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\n                    state.isPointerDown = false;\n                    state.onInteractOutside(e);\n                }\n            };\n            document.addEventListener('mousedown', onPointerDown, true);\n            document.addEventListener('mouseup', onMouseUp, true);\n            document.addEventListener('touchstart', onPointerDown, true);\n            document.addEventListener('touchend', onTouchEnd, true);\n            return ()=>{\n                document.removeEventListener('mousedown', onPointerDown, true);\n                document.removeEventListener('mouseup', onMouseUp, true);\n                document.removeEventListener('touchstart', onPointerDown, true);\n                document.removeEventListener('touchend', onTouchEnd, true);\n            };\n        }\n    }, [\n        ref,\n        state,\n        isDisabled\n    ]);\n}\nfunction $e0b6e0b68ec7f50f$var$isValidEvent(event, ref) {\n    if (event.button > 0) return false;\n    // if the event target is no longer in the document\n    if (event.target) {\n        const ownerDocument = event.target.ownerDocument;\n        if (!ownerDocument || !ownerDocument.documentElement.contains(event.target)) return false;\n    }\n    return ref.current && !ref.current.contains(event.target);\n}\n\n\nvar $46d819fcbaf35654$exports = {};\n\n$parcel$export($46d819fcbaf35654$exports, \"useKeyboard\", () => $46d819fcbaf35654$export$8f71654801c2f7cd);\nfunction $93925083ecbb358c$export$48d1ea6320830260(handler) {\n    if (!handler) return;\n    let shouldStopPropagation = true;\n    return (e)=>{\n        let event = {\n            ...e,\n            preventDefault () {\n                e.preventDefault();\n            },\n            isDefaultPrevented () {\n                return e.isDefaultPrevented();\n            },\n            stopPropagation () {\n                console.error('stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.');\n            },\n            continuePropagation () {\n                shouldStopPropagation = false;\n            }\n        };\n        handler(event);\n        if (shouldStopPropagation) e.stopPropagation();\n    };\n}\n\n\nfunction $46d819fcbaf35654$export$8f71654801c2f7cd(props) {\n    return {\n        keyboardProps: props.isDisabled ? {\n        } : {\n            onKeyDown: $93925083ecbb358c$export$48d1ea6320830260(props.onKeyDown),\n            onKeyUp: $93925083ecbb358c$export$48d1ea6320830260(props.onKeyUp)\n        }\n    };\n}\n\n\nvar $e8a7022cf87cba2a$exports = {};\n\n$parcel$export($e8a7022cf87cba2a$exports, \"useMove\", () => $e8a7022cf87cba2a$export$36da96379f79f245);\n\n\n\nfunction $e8a7022cf87cba2a$export$36da96379f79f245(props) {\n    let { onMoveStart: onMoveStart , onMove: onMove , onMoveEnd: onMoveEnd  } = props;\n    let state = $bx7SL$useRef({\n        didMove: false,\n        lastPosition: null,\n        id: null\n    });\n    let { addGlobalListener: addGlobalListener , removeGlobalListener: removeGlobalListener  } = $bx7SL$useGlobalListeners();\n    let moveProps1 = $bx7SL$useMemo(()=>{\n        let moveProps = {\n        };\n        let start = ()=>{\n            $14c0b72509d70225$export$16a4697467175487();\n            state.current.didMove = false;\n        };\n        let move = (originalEvent, pointerType, deltaX, deltaY)=>{\n            if (deltaX === 0 && deltaY === 0) return;\n            if (!state.current.didMove) {\n                state.current.didMove = true;\n                onMoveStart === null || onMoveStart === void 0 ? void 0 : onMoveStart({\n                    type: 'movestart',\n                    pointerType: pointerType,\n                    shiftKey: originalEvent.shiftKey,\n                    metaKey: originalEvent.metaKey,\n                    ctrlKey: originalEvent.ctrlKey,\n                    altKey: originalEvent.altKey\n                });\n            }\n            onMove({\n                type: 'move',\n                pointerType: pointerType,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n        };\n        let end = (originalEvent, pointerType)=>{\n            $14c0b72509d70225$export$b0d6fa1ab32e3295();\n            if (state.current.didMove) onMoveEnd === null || onMoveEnd === void 0 ? void 0 : onMoveEnd({\n                type: 'moveend',\n                pointerType: pointerType,\n                shiftKey: originalEvent.shiftKey,\n                metaKey: originalEvent.metaKey,\n                ctrlKey: originalEvent.ctrlKey,\n                altKey: originalEvent.altKey\n            });\n        };\n        if (typeof PointerEvent === 'undefined') {\n            let onMouseMove = (e)=>{\n                if (e.button === 0) {\n                    move(e, 'mouse', e.pageX - state.current.lastPosition.pageX, e.pageY - state.current.lastPosition.pageY);\n                    state.current.lastPosition = {\n                        pageX: e.pageX,\n                        pageY: e.pageY\n                    };\n                }\n            };\n            let onMouseUp = (e)=>{\n                if (e.button === 0) {\n                    end(e, 'mouse');\n                    removeGlobalListener(window, 'mousemove', onMouseMove, false);\n                    removeGlobalListener(window, 'mouseup', onMouseUp, false);\n                }\n            };\n            moveProps.onMouseDown = (e)=>{\n                if (e.button === 0) {\n                    start();\n                    e.stopPropagation();\n                    e.preventDefault();\n                    state.current.lastPosition = {\n                        pageX: e.pageX,\n                        pageY: e.pageY\n                    };\n                    addGlobalListener(window, 'mousemove', onMouseMove, false);\n                    addGlobalListener(window, 'mouseup', onMouseUp, false);\n                }\n            };\n            let onTouchMove = (e)=>{\n                let touch = [\n                    ...e.changedTouches\n                ].findIndex(({ identifier: identifier  })=>identifier === state.current.id\n                );\n                if (touch >= 0) {\n                    let { pageX: pageX , pageY: pageY  } = e.changedTouches[touch];\n                    move(e, 'touch', pageX - state.current.lastPosition.pageX, pageY - state.current.lastPosition.pageY);\n                    state.current.lastPosition = {\n                        pageX: pageX,\n                        pageY: pageY\n                    };\n                }\n            };\n            let onTouchEnd = (e)=>{\n                let touch = [\n                    ...e.changedTouches\n                ].findIndex(({ identifier: identifier  })=>identifier === state.current.id\n                );\n                if (touch >= 0) {\n                    end(e, 'touch');\n                    state.current.id = null;\n                    removeGlobalListener(window, 'touchmove', onTouchMove);\n                    removeGlobalListener(window, 'touchend', onTouchEnd);\n                    removeGlobalListener(window, 'touchcancel', onTouchEnd);\n                }\n            };\n            moveProps.onTouchStart = (e)=>{\n                if (e.changedTouches.length === 0 || state.current.id != null) return;\n                let { pageX: pageX , pageY: pageY , identifier: identifier  } = e.changedTouches[0];\n                start();\n                e.stopPropagation();\n                e.preventDefault();\n                state.current.lastPosition = {\n                    pageX: pageX,\n                    pageY: pageY\n                };\n                state.current.id = identifier;\n                addGlobalListener(window, 'touchmove', onTouchMove, false);\n                addGlobalListener(window, 'touchend', onTouchEnd, false);\n                addGlobalListener(window, 'touchcancel', onTouchEnd, false);\n            };\n        } else {\n            let onPointerMove = (e)=>{\n                if (e.pointerId === state.current.id) {\n                    let pointerType = e.pointerType || 'mouse';\n                    // Problems with PointerEvent#movementX/movementY:\n                    // 1. it is always 0 on macOS Safari.\n                    // 2. On Chrome Android, it's scaled by devicePixelRatio, but not on Chrome macOS\n                    move(e, pointerType, e.pageX - state.current.lastPosition.pageX, e.pageY - state.current.lastPosition.pageY);\n                    state.current.lastPosition = {\n                        pageX: e.pageX,\n                        pageY: e.pageY\n                    };\n                }\n            };\n            let onPointerUp = (e)=>{\n                if (e.pointerId === state.current.id) {\n                    let pointerType = e.pointerType || 'mouse';\n                    end(e, pointerType);\n                    state.current.id = null;\n                    removeGlobalListener(window, 'pointermove', onPointerMove, false);\n                    removeGlobalListener(window, 'pointerup', onPointerUp, false);\n                    removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n                }\n            };\n            moveProps.onPointerDown = (e)=>{\n                if (e.button === 0 && state.current.id == null) {\n                    start();\n                    e.stopPropagation();\n                    e.preventDefault();\n                    state.current.lastPosition = {\n                        pageX: e.pageX,\n                        pageY: e.pageY\n                    };\n                    state.current.id = e.pointerId;\n                    addGlobalListener(window, 'pointermove', onPointerMove, false);\n                    addGlobalListener(window, 'pointerup', onPointerUp, false);\n                    addGlobalListener(window, 'pointercancel', onPointerUp, false);\n                }\n            };\n        }\n        let triggerKeyboardMove = (e, deltaX, deltaY)=>{\n            start();\n            move(e, 'keyboard', deltaX, deltaY);\n            end(e, 'keyboard');\n        };\n        moveProps.onKeyDown = (e)=>{\n            switch(e.key){\n                case 'Left':\n                case 'ArrowLeft':\n                    e.preventDefault();\n                    e.stopPropagation();\n                    triggerKeyboardMove(e, -1, 0);\n                    break;\n                case 'Right':\n                case 'ArrowRight':\n                    e.preventDefault();\n                    e.stopPropagation();\n                    triggerKeyboardMove(e, 1, 0);\n                    break;\n                case 'Up':\n                case 'ArrowUp':\n                    e.preventDefault();\n                    e.stopPropagation();\n                    triggerKeyboardMove(e, 0, -1);\n                    break;\n                case 'Down':\n                case 'ArrowDown':\n                    e.preventDefault();\n                    e.stopPropagation();\n                    triggerKeyboardMove(e, 0, 1);\n                    break;\n            }\n        };\n        return moveProps;\n    }, [\n        state,\n        onMoveStart,\n        onMove,\n        onMoveEnd,\n        addGlobalListener,\n        removeGlobalListener\n    ]);\n    return {\n        moveProps: moveProps1\n    };\n}\n\n\n\nvar $7d0a636d7a4dcefd$exports = {};\n\n$parcel$export($7d0a636d7a4dcefd$exports, \"useScrollWheel\", () => $7d0a636d7a4dcefd$export$2123ff2b87c81ca);\n\n\nfunction $7d0a636d7a4dcefd$export$2123ff2b87c81ca(props, ref) {\n    let { onScroll: onScroll , isDisabled: isDisabled  } = props;\n    let onScrollHandler = $bx7SL$useCallback((e)=>{\n        // If the ctrlKey is pressed, this is a zoom event, do nothing.\n        if (e.ctrlKey) return;\n        // stop scrolling the page\n        e.preventDefault();\n        e.stopPropagation();\n        if (onScroll) onScroll({\n            deltaX: e.deltaX,\n            deltaY: e.deltaY\n        });\n    }, [\n        onScroll\n    ]);\n    $bx7SL$useEvent(ref, 'wheel', isDisabled ? null : onScrollHandler);\n}\n\n\nvar $8a26561d2877236e$exports = {};\n\n$parcel$export($8a26561d2877236e$exports, \"useLongPress\", () => $8a26561d2877236e$export$c24ed0104d07eab9);\n\n\n\nconst $8a26561d2877236e$var$DEFAULT_THRESHOLD = 500;\nfunction $8a26561d2877236e$export$c24ed0104d07eab9(props) {\n    let { isDisabled: isDisabled , onLongPressStart: onLongPressStart , onLongPressEnd: onLongPressEnd , onLongPress: onLongPress , threshold: threshold = $8a26561d2877236e$var$DEFAULT_THRESHOLD , accessibilityDescription: accessibilityDescription  } = props;\n    const timeRef = $bx7SL$useRef(null);\n    let { addGlobalListener: addGlobalListener , removeGlobalListener: removeGlobalListener  } = $bx7SL$useGlobalListeners();\n    let { pressProps: pressProps  } = $f6c31cce2adf654f$export$45712eceda6fad21({\n        isDisabled: isDisabled,\n        onPressStart (e1) {\n            if (e1.pointerType === 'mouse' || e1.pointerType === 'touch') {\n                if (onLongPressStart) onLongPressStart({\n                    ...e1,\n                    type: 'longpressstart'\n                });\n                timeRef.current = setTimeout(()=>{\n                    // Prevent other usePress handlers from also handling this event.\n                    e1.target.dispatchEvent(new PointerEvent('pointercancel', {\n                        bubbles: true\n                    }));\n                    if (onLongPress) onLongPress({\n                        ...e1,\n                        type: 'longpress'\n                    });\n                    timeRef.current = null;\n                }, threshold);\n                // Prevent context menu, which may be opened on long press on touch devices\n                if (e1.pointerType === 'touch') {\n                    let onContextMenu = (e)=>{\n                        e.preventDefault();\n                    };\n                    addGlobalListener(e1.target, 'contextmenu', onContextMenu, {\n                        once: true\n                    });\n                    addGlobalListener(window, 'pointerup', ()=>{\n                        // If no contextmenu event is fired quickly after pointerup, remove the handler\n                        // so future context menu events outside a long press are not prevented.\n                        setTimeout(()=>{\n                            removeGlobalListener(e1.target, 'contextmenu', onContextMenu);\n                        }, 30);\n                    }, {\n                        once: true\n                    });\n                }\n            }\n        },\n        onPressEnd (e) {\n            if (timeRef.current) clearTimeout(timeRef.current);\n            if (onLongPressEnd && (e.pointerType === 'mouse' || e.pointerType === 'touch')) onLongPressEnd({\n                ...e,\n                type: 'longpressend'\n            });\n        }\n    });\n    let descriptionProps = $bx7SL$useDescription(onLongPress && !isDisabled ? accessibilityDescription : null);\n    return {\n        longPressProps: $bx7SL$mergeProps(pressProps, descriptionProps)\n    };\n}\n\n\n\n\nexport {$3b117e43dc0ca95d$export$27c701ed9e449e99 as Pressable, $f1ab8c75478c6f73$export$3351871ee4b288b8 as PressResponder, $a1ea59d68270f0dd$export$f8168d8dd8fd66e6 as useFocus, $507fabe10e71c6fb$export$b9b3dfddab17db27 as isFocusVisible, $507fabe10e71c6fb$export$630ff653c5ada6a9 as getInteractionModality, $507fabe10e71c6fb$export$8397ddfc504fdb9a as setInteractionModality, $507fabe10e71c6fb$export$98e20ec92f614cfe as useInteractionModality, $507fabe10e71c6fb$export$ffd9e5021c1fb2d6 as useFocusVisible, $507fabe10e71c6fb$export$ec71b4b83ac08ec3 as useFocusVisibleListener, $9ab94262bd0047c7$export$420e68273165f4ec as useFocusWithin, $6179b936705e76d3$export$ae780daf29e6d456 as useHover, $e0b6e0b68ec7f50f$export$872b660ac5a1ff98 as useInteractOutside, $46d819fcbaf35654$export$8f71654801c2f7cd as useKeyboard, $e8a7022cf87cba2a$export$36da96379f79f245 as useMove, $f6c31cce2adf654f$export$45712eceda6fad21 as usePress, $7d0a636d7a4dcefd$export$2123ff2b87c81ca as useScrollWheel, $8a26561d2877236e$export$c24ed0104d07eab9 as useLongPress};\n//# sourceMappingURL=module.js.map\n","let keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString: () => key\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = (get) => get(config);\n    config.write = (get, set, arg) => set(\n      config,\n      typeof arg === \"function\" ? arg(get(config)) : arg\n    );\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\n\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst cancelPromiseMap = /* @__PURE__ */ new WeakMap();\nconst registerCancelPromise = (promise, cancel) => {\n  cancelPromiseMap.set(promise, cancel);\n  promise.catch(() => {\n  }).finally(() => cancelPromiseMap.delete(promise));\n};\nconst cancelPromise = (promise, next) => {\n  const cancel = cancelPromiseMap.get(promise);\n  if (cancel) {\n    cancelPromiseMap.delete(promise);\n    cancel(next);\n  }\n};\nconst resolvePromise = (promise, value) => {\n  promise.status = \"fulfilled\";\n  promise.value = value;\n};\nconst rejectPromise = (promise, e) => {\n  promise.status = \"rejected\";\n  promise.reason = e;\n};\nconst isEqualAtomValue = (a, b) => \"v\" in a && \"v\" in b && Object.is(a.v, b.v);\nconst isEqualAtomError = (a, b) => \"e\" in a && \"e\" in b && Object.is(a.e, b.e);\nconst hasPromiseAtomValue = (a) => \"v\" in a && a.v instanceof Promise;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  return atomState.v;\n};\nconst createStore = () => {\n  var _a, _b;\n  const atomStateMap = /* @__PURE__ */ new WeakMap();\n  const mountedMap = /* @__PURE__ */ new WeakMap();\n  const pendingMap = /* @__PURE__ */ new Map();\n  let stateListeners;\n  let mountedAtoms;\n  if (((_a = import.meta.env) == null ? void 0 : _a.MODE) !== \"production\") {\n    stateListeners = /* @__PURE__ */ new Set();\n    mountedAtoms = /* @__PURE__ */ new Set();\n  }\n  const getAtomState = (atom) => atomStateMap.get(atom);\n  const setAtomState = (atom, atomState) => {\n    var _a2;\n    if (((_a2 = import.meta.env) == null ? void 0 : _a2.MODE) !== \"production\") {\n      Object.freeze(atomState);\n    }\n    const prevAtomState = atomStateMap.get(atom);\n    atomStateMap.set(atom, atomState);\n    if (!pendingMap.has(atom)) {\n      pendingMap.set(atom, prevAtomState);\n    }\n    if (prevAtomState && hasPromiseAtomValue(prevAtomState)) {\n      const next = \"v\" in atomState ? atomState.v instanceof Promise ? atomState.v : Promise.resolve(atomState.v) : Promise.reject(atomState.e);\n      cancelPromise(prevAtomState.v, next);\n    }\n  };\n  const updateDependencies = (atom, nextAtomState, depSet) => {\n    const dependencies = /* @__PURE__ */ new Map();\n    let changed = false;\n    depSet.forEach((a) => {\n      var _a2;\n      const aState = a === atom ? nextAtomState : getAtomState(a);\n      if (aState) {\n        dependencies.set(a, aState);\n        if (nextAtomState.d.get(a) !== aState) {\n          changed = true;\n        }\n      } else if (((_a2 = import.meta.env) == null ? void 0 : _a2.MODE) !== \"production\") {\n        console.warn(\"[Bug] atom state not found\");\n      }\n    });\n    if (changed || nextAtomState.d.size !== dependencies.size) {\n      nextAtomState.d = dependencies;\n    }\n  };\n  const setAtomValue = (atom, value, depSet) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      v: value\n    };\n    if (depSet) {\n      updateDependencies(atom, nextAtomState, depSet);\n    }\n    if (prevAtomState && isEqualAtomValue(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const setAtomError = (atom, error, depSet) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      e: error\n    };\n    if (depSet) {\n      updateDependencies(atom, nextAtomState, depSet);\n    }\n    if (prevAtomState && isEqualAtomError(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const readAtomState = (atom) => {\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      atomState.d.forEach((_, a) => {\n        if (a !== atom && !mountedMap.has(a)) {\n          readAtomState(a);\n        }\n      });\n      if (Array.from(atomState.d).every(\n        ([a, s]) => a === atom || getAtomState(a) === s\n      )) {\n        return atomState;\n      }\n    }\n    const depSet = /* @__PURE__ */ new Set();\n    let isSync = true;\n    const getter = (a) => {\n      depSet.add(a);\n      if (a === atom) {\n        const aState2 = getAtomState(a);\n        if (aState2) {\n          return returnAtomValue(aState2);\n        }\n        if (hasInitialValue(a)) {\n          return a.init;\n        }\n        throw new Error(\"no atom init\");\n      }\n      const aState = readAtomState(a);\n      return returnAtomValue(aState);\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        var _a2;\n        if (((_a2 = import.meta.env) == null ? void 0 : _a2.MODE) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            var _a3;\n            if (((_a3 = import.meta.env) == null ? void 0 : _a3.MODE) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              return writeAtom(atom, ...args);\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    try {\n      const value = atom.read(getter, options);\n      if (value instanceof Promise) {\n        let continuePromise;\n        const promise = new Promise((resolve, reject) => {\n          let settled = false;\n          value.then(\n            (v) => {\n              if (!settled) {\n                settled = true;\n                setAtomValue(atom, promise, depSet);\n                resolvePromise(promise, v);\n                resolve(v);\n              }\n            },\n            (e) => {\n              if (!settled) {\n                settled = true;\n                setAtomValue(atom, promise, depSet);\n                rejectPromise(promise, e);\n                reject(e);\n              }\n            }\n          );\n          continuePromise = (next) => {\n            if (!settled) {\n              settled = true;\n              next.then(\n                (v) => resolvePromise(promise, v),\n                (e) => rejectPromise(promise, e)\n              );\n              resolve(next);\n            }\n          };\n        });\n        promise.status = \"pending\";\n        registerCancelPromise(promise, (next) => {\n          if (next) {\n            continuePromise(next);\n          }\n          controller == null ? void 0 : controller.abort();\n        });\n        return setAtomValue(atom, promise, depSet);\n      }\n      return setAtomValue(atom, value, depSet);\n    } catch (error) {\n      return setAtomError(atom, error, depSet);\n    } finally {\n      isSync = false;\n    }\n  };\n  const readAtom = (atom) => returnAtomValue(readAtomState(atom));\n  const addAtom = (atom) => {\n    let mounted = mountedMap.get(atom);\n    if (!mounted) {\n      mounted = mountAtom(atom);\n    }\n    return mounted;\n  };\n  const canUnmountAtom = (atom, mounted) => !mounted.l.size && (!mounted.t.size || mounted.t.size === 1 && mounted.t.has(atom));\n  const delAtom = (atom) => {\n    const mounted = mountedMap.get(atom);\n    if (mounted && canUnmountAtom(atom, mounted)) {\n      unmountAtom(atom);\n    }\n  };\n  const recomputeDependents = (atom) => {\n    const mounted = mountedMap.get(atom);\n    mounted == null ? void 0 : mounted.t.forEach((dependent) => {\n      if (dependent !== atom) {\n        const prevAtomState = getAtomState(dependent);\n        const nextAtomState = readAtomState(dependent);\n        if (!prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState)) {\n          recomputeDependents(dependent);\n        }\n      }\n    });\n  };\n  const writeAtomState = (atom, ...args) => {\n    let isSync = true;\n    const getter = (a) => returnAtomValue(readAtomState(a));\n    const setter = (a, ...args2) => {\n      let r;\n      if (a === atom) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const prevAtomState = getAtomState(a);\n        const nextAtomState = setAtomValue(a, args2[0]);\n        if (!prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState)) {\n          recomputeDependents(a);\n        }\n      } else {\n        r = writeAtomState(a, ...args2);\n      }\n      if (!isSync) {\n        flushPending();\n      }\n      return r;\n    };\n    const result = atom.write(getter, setter, ...args);\n    isSync = false;\n    return result;\n  };\n  const writeAtom = (atom, ...args) => {\n    const result = writeAtomState(atom, ...args);\n    flushPending();\n    return result;\n  };\n  const mountAtom = (atom, initialDependent) => {\n    var _a2;\n    const mounted = {\n      t: new Set(initialDependent && [initialDependent]),\n      l: /* @__PURE__ */ new Set()\n    };\n    mountedMap.set(atom, mounted);\n    if (((_a2 = import.meta.env) == null ? void 0 : _a2.MODE) !== \"production\") {\n      mountedAtoms.add(atom);\n    }\n    readAtomState(atom).d.forEach((_, a) => {\n      const aMounted = mountedMap.get(a);\n      if (aMounted) {\n        aMounted.t.add(atom);\n      } else {\n        if (a !== atom) {\n          mountAtom(a, atom);\n        }\n      }\n    });\n    readAtomState(atom);\n    if (isActuallyWritableAtom(atom) && atom.onMount) {\n      const onUnmount = atom.onMount((...args) => writeAtom(atom, ...args));\n      if (onUnmount) {\n        mounted.u = onUnmount;\n      }\n    }\n    return mounted;\n  };\n  const unmountAtom = (atom) => {\n    var _a2, _b2, _c;\n    const onUnmount = (_a2 = mountedMap.get(atom)) == null ? void 0 : _a2.u;\n    if (onUnmount) {\n      onUnmount();\n    }\n    mountedMap.delete(atom);\n    if (((_b2 = import.meta.env) == null ? void 0 : _b2.MODE) !== \"production\") {\n      mountedAtoms.delete(atom);\n    }\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      if (hasPromiseAtomValue(atomState)) {\n        cancelPromise(atomState.v);\n      }\n      atomState.d.forEach((_, a) => {\n        if (a !== atom) {\n          const mounted = mountedMap.get(a);\n          if (mounted) {\n            mounted.t.delete(atom);\n            if (canUnmountAtom(a, mounted)) {\n              unmountAtom(a);\n            }\n          }\n        }\n      });\n    } else if (((_c = import.meta.env) == null ? void 0 : _c.MODE) !== \"production\") {\n      console.warn(\"[Bug] could not find atom state to unmount\", atom);\n    }\n  };\n  const mountDependencies = (atom, atomState, prevDependencies) => {\n    const depSet = new Set(atomState.d.keys());\n    prevDependencies == null ? void 0 : prevDependencies.forEach((_, a) => {\n      if (depSet.has(a)) {\n        depSet.delete(a);\n        return;\n      }\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.delete(atom);\n        if (canUnmountAtom(a, mounted)) {\n          unmountAtom(a);\n        }\n      }\n    });\n    depSet.forEach((a) => {\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.add(atom);\n      } else if (mountedMap.has(atom)) {\n        mountAtom(a, atom);\n      }\n    });\n  };\n  const flushPending = () => {\n    var _a2;\n    while (pendingMap.size) {\n      const pending = Array.from(pendingMap);\n      pendingMap.clear();\n      pending.forEach(([atom, prevAtomState]) => {\n        var _a3;\n        const atomState = getAtomState(atom);\n        if (atomState) {\n          if (atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {\n            mountDependencies(atom, atomState, prevAtomState == null ? void 0 : prevAtomState.d);\n          }\n          const mounted = mountedMap.get(atom);\n          if (mounted && !// TODO This seems pretty hacky. Hope to fix it.\n          // Maybe we could `mountDependencies` in `setAtomState`?\n          (prevAtomState && !hasPromiseAtomValue(prevAtomState) && (isEqualAtomValue(prevAtomState, atomState) || isEqualAtomError(prevAtomState, atomState)))) {\n            mounted.l.forEach((listener) => listener());\n          }\n        } else if (((_a3 = import.meta.env) == null ? void 0 : _a3.MODE) !== \"production\") {\n          console.warn(\"[Bug] no atom state to flush\");\n        }\n      });\n    }\n    if (((_a2 = import.meta.env) == null ? void 0 : _a2.MODE) !== \"production\") {\n      stateListeners.forEach((l) => l());\n    }\n  };\n  const subscribeAtom = (atom, listener) => {\n    const mounted = addAtom(atom);\n    flushPending();\n    const listeners = mounted.l;\n    listeners.add(listener);\n    return () => {\n      listeners.delete(listener);\n      delAtom(atom);\n    };\n  };\n  if (((_b = import.meta.env) == null ? void 0 : _b.MODE) !== \"production\") {\n    return {\n      get: readAtom,\n      set: writeAtom,\n      sub: subscribeAtom,\n      // store dev methods (these are tentative and subject to change)\n      dev_subscribe_state: (l) => {\n        stateListeners.add(l);\n        return () => {\n          stateListeners.delete(l);\n        };\n      },\n      dev_get_mounted_atoms: () => mountedAtoms.values(),\n      dev_get_atom_state: (a) => atomStateMap.get(a),\n      dev_get_mounted: (a) => mountedMap.get(a),\n      dev_restore_atoms: (values) => {\n        for (const [atom, value] of values) {\n          if (hasInitialValue(atom)) {\n            setAtomValue(atom, value);\n            recomputeDependents(atom);\n          }\n        }\n        flushPending();\n      }\n    };\n  }\n  return {\n    get: readAtom,\n    set: writeAtom,\n    sub: subscribeAtom\n  };\n};\nlet defaultStore;\nconst getDefaultStore = () => {\n  if (!defaultStore) {\n    defaultStore = createStore();\n  }\n  return defaultStore;\n};\n\nexport { atom, createStore, getDefaultStore };\n","import ReactExports, { createContext, useContext, useRef, createElement, useReducer, useEffect, useDebugValue, useCallback } from 'react';\nimport { getDefaultStore, createStore } from 'jotai/vanilla';\n\nconst StoreContext = createContext(void 0);\nconst useStore = (options) => {\n  const store = useContext(StoreContext);\n  return (options == null ? void 0 : options.store) || store || getDefaultStore();\n};\nconst Provider = ({\n  children,\n  store\n}) => {\n  const storeRef = useRef();\n  if (!store && !storeRef.current) {\n    storeRef.current = createStore();\n  }\n  return createElement(\n    StoreContext.Provider,\n    {\n      value: store || storeRef.current\n    },\n    children\n  );\n};\n\nconst isPromise = (x) => x instanceof Promise;\nconst use = ReactExports.use || ((promise) => {\n  if (promise.status === \"pending\") {\n    throw promise;\n  } else if (promise.status === \"fulfilled\") {\n    return promise.value;\n  } else if (promise.status === \"rejected\") {\n    throw promise.reason;\n  } else {\n    promise.status = \"pending\";\n    promise.then(\n      (v) => {\n        promise.status = \"fulfilled\";\n        promise.value = v;\n      },\n      (e) => {\n        promise.status = \"rejected\";\n        promise.reason = e;\n      }\n    );\n    throw promise;\n  }\n});\nfunction useAtomValue(atom, options) {\n  const store = useStore(options);\n  const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = useReducer(\n    (prev) => {\n      const nextValue = store.get(atom);\n      if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n        return prev;\n      }\n      return [nextValue, store, atom];\n    },\n    void 0,\n    () => [store.get(atom), store, atom]\n  );\n  let value = valueFromReducer;\n  if (storeFromReducer !== store || atomFromReducer !== atom) {\n    rerender();\n    value = store.get(atom);\n  }\n  const delay = options == null ? void 0 : options.delay;\n  useEffect(() => {\n    const unsub = store.sub(atom, () => {\n      if (typeof delay === \"number\") {\n        setTimeout(rerender, delay);\n        return;\n      }\n      rerender();\n    });\n    rerender();\n    return unsub;\n  }, [store, atom, delay]);\n  useDebugValue(value);\n  return isPromise(value) ? use(value) : value;\n}\n\nfunction useSetAtom(atom, options) {\n  const store = useStore(options);\n  const setAtom = useCallback(\n    (...args) => {\n      var _a;\n      if (((_a = import.meta.env) == null ? void 0 : _a.MODE) !== \"production\" && !(\"write\" in atom)) {\n        throw new Error(\"not writable atom\");\n      }\n      return store.set(atom, ...args);\n    },\n    [store, atom]\n  );\n  return setAtom;\n}\n\nfunction useAtom(atom, options) {\n  return [\n    useAtomValue(atom, options),\n    // We do wrong type assertion here, which results in throwing an error.\n    useSetAtom(atom, options)\n  ];\n}\n\nexport { Provider, useAtom, useAtomValue, useSetAtom, useStore };\n","/* Copyright 2015 Mark Haines\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nvar escaped = /[\\\\\\\"\\x00-\\x1F]/g;\nvar escapes = {};\nfor (var i = 0; i < 0x20; ++i) {\n    escapes[String.fromCharCode(i)] = (\n        '\\\\U' + ('0000' + i.toString(16)).slice(-4).toUpperCase()\n    );\n}\nescapes['\\b'] = '\\\\b';\nescapes['\\t'] = '\\\\t';\nescapes['\\n'] = '\\\\n';\nescapes['\\f'] = '\\\\f';\nescapes['\\r'] = '\\\\r';\nescapes['\\\"'] = '\\\\\\\"';\nescapes['\\\\'] = '\\\\\\\\';\n\nfunction escapeString(value) {\n    escaped.lastIndex = 0;\n    return value.replace(escaped, function(c) { return escapes[c]; });\n}\n\nfunction stringify(value) {\n    switch (typeof value) {\n        case 'string':\n            return '\"' + escapeString(value) + '\"';\n        case 'number':\n            return isFinite(value) ? value : 'null';\n        case 'boolean':\n            return value;\n        case 'object':\n            if (value === null) {\n                return 'null';\n            }\n            if (Array.isArray(value)) {\n                return stringifyArray(value);\n            }\n            return stringifyObject(value);\n        default:\n            throw new Error('Cannot stringify: ' + typeof value);\n    }\n}\n\nfunction stringifyArray(array) {\n    var sep = '[';\n    var result = '';\n    for (var i = 0; i < array.length; ++i) {\n        result += sep;\n        sep = ',';\n        result += stringify(array[i]);\n    }\n    if (sep != ',') {\n        return '[]';\n    } else {\n        return result + ']';\n    }\n}\n\nfunction stringifyObject(object) {\n    var sep = '{';\n    var result = '';\n    var keys = Object.keys(object);\n    keys.sort();\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        result += sep + '\"' + escapeString(key) + '\":';\n        sep = ',';\n        result += stringify(object[key]);\n    }\n    if (sep != ',') {\n        return '{}';\n    } else {\n        return result + '}';\n    }\n}\n\n/** */\nmodule.exports = {stringify: stringify};\n","export default {}","// @license magnet:?xt=urn:btih:8e4f440f4c65981c5bf93c76d35135ba5064d8b7&dn=apache-2.0.txt Apache-2.0\n// @source: https://gitlab.matrix.org/matrix-org/olm/-/tree/3.2.14\n\nvar Olm = (function() {\nvar olm_exports = {};\nvar onInitSuccess;\nvar onInitFail;\n\nvar Module = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(Module) {\n  Module = Module || {};\n\n\nvar a;a||(a=typeof Module !== 'undefined' ? Module : {});var aa,ca;a.ready=new Promise(function(b,c){aa=b;ca=c});var g;if(\"undefined\"!==typeof window)g=function(b){window.crypto.getRandomValues(b)};else if(module.exports){var da=require(\"crypto\");g=function(b){var c=da.randomBytes(b.length);b.set(c)};process=global.process}else throw Error(\"Cannot find global to attach library to\");\nif(\"undefined\"!==typeof OLM_OPTIONS)for(var ea in OLM_OPTIONS)OLM_OPTIONS.hasOwnProperty(ea)&&(a[ea]=OLM_OPTIONS[ea]);a.onRuntimeInitialized=function(){h=a._olm_error();olm_exports.PRIVATE_KEY_LENGTH=a._olm_pk_private_key_length();onInitSuccess&&onInitSuccess()};a.onAbort=function(b){onInitFail&&onInitFail(b)};\nvar fa=Object.assign({},a),ha=\"object\"==typeof window,l=\"function\"==typeof importScripts,ia=\"object\"==typeof process&&\"object\"==typeof process.versions&&\"string\"==typeof process.versions.node,m=\"\",ja,ka,la,fs,ma,na;\nif(ia)m=l?require(\"path\").dirname(m)+\"/\":__dirname+\"/\",na=()=>{ma||(fs=require(\"fs\"),ma=require(\"path\"))},ja=function(b,c){na();b=ma.normalize(b);return fs.readFileSync(b,c?void 0:\"utf8\")},la=b=>{b=ja(b,!0);b.buffer||(b=new Uint8Array(b));return b},ka=(b,c,d)=>{na();b=ma.normalize(b);fs.readFile(b,function(e,f){e?d(e):c(f.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\\\/g,\"/\"),process.argv.slice(2),process.on(\"uncaughtException\",function(b){throw b;}),process.on(\"unhandledRejection\",\nfunction(b){throw b;}),a.inspect=function(){return\"[Emscripten Module object]\"};else if(ha||l)l?m=self.location.href:\"undefined\"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),0!==m.indexOf(\"blob:\")?m=m.substr(0,m.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1):m=\"\",ja=b=>{var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.send(null);return c.responseText},l&&(la=b=>{var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.responseType=\"arraybuffer\";c.send(null);return new Uint8Array(c.response)}),\nka=(b,c,d)=>{var e=new XMLHttpRequest;e.open(\"GET\",b,!0);e.responseType=\"arraybuffer\";e.onload=()=>{200==e.status||0==e.status&&e.response?c(e.response):d()};e.onerror=d;e.send(null)};a.print||console.log.bind(console);var n=a.printErr||console.warn.bind(console);Object.assign(a,fa);fa=null;var q;a.wasmBinary&&(q=a.wasmBinary);var noExitRuntime=a.noExitRuntime||!0;\"object\"!=typeof WebAssembly&&r(\"no native wasm support detected\");\nvar oa,pa=!1,qa=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction t(b,c){if(b){var d=u,e=b+c;for(c=b;d[c]&&!(c>=e);)++c;if(16<c-b&&d.buffer&&qa)b=qa.decode(d.subarray(b,c));else{for(e=\"\";b<c;){var f=d[b++];if(f&128){var k=d[b++]&63;if(192==(f&224))e+=String.fromCharCode((f&31)<<6|k);else{var p=d[b++]&63;f=224==(f&240)?(f&15)<<12|k<<6|p:(f&7)<<18|k<<12|p<<6|d[b++]&63;65536>f?e+=String.fromCharCode(f):(f-=65536,e+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else e+=String.fromCharCode(f)}b=e}}else b=\"\";return b}\nfunction v(b,c,d,e){if(!(0<e))return 0;var f=d;e=d+e-1;for(var k=0;k<b.length;++k){var p=b.charCodeAt(k);if(55296<=p&&57343>=p){var w=b.charCodeAt(++k);p=65536+((p&1023)<<10)|w&1023}if(127>=p){if(d>=e)break;c[d++]=p}else{if(2047>=p){if(d+1>=e)break;c[d++]=192|p>>6}else{if(65535>=p){if(d+2>=e)break;c[d++]=224|p>>12}else{if(d+3>=e)break;c[d++]=240|p>>18;c[d++]=128|p>>12&63}c[d++]=128|p>>6&63}c[d++]=128|p&63}}c[d]=0;return d-f}\nfunction x(b){for(var c=0,d=0;d<b.length;++d){var e=b.charCodeAt(d);127>=e?c++:2047>=e?c+=2:55296<=e&&57343>=e?(c+=4,++d):c+=3}return c}var ra,y,u,sa,z,ta,ua,va;function wa(){var b=oa.buffer;ra=b;a.HEAP8=y=new Int8Array(b);a.HEAP16=sa=new Int16Array(b);a.HEAP32=z=new Int32Array(b);a.HEAPU8=u=new Uint8Array(b);a.HEAPU16=new Uint16Array(b);a.HEAPU32=ta=new Uint32Array(b);a.HEAPF32=ua=new Float32Array(b);a.HEAPF64=va=new Float64Array(b)}var xa=[],za=[],Aa=[];\nfunction Ba(){var b=a.preRun.shift();xa.unshift(b)}var A=0,Ca=null,B=null;function r(b){if(a.onAbort)a.onAbort(b);b=\"Aborted(\"+b+\")\";n(b);pa=!0;b=new WebAssembly.RuntimeError(b+\". Build with -sASSERTIONS for more info.\");ca(b);throw b;}function Da(){return C.startsWith(\"data:application/octet-stream;base64,\")}var C;C=\"olm.wasm\";if(!Da()){var Ea=C;C=a.locateFile?a.locateFile(Ea,m):m+Ea}\nfunction Fa(){var b=C;try{if(b==C&&q)return new Uint8Array(q);if(la)return la(b);throw\"both async and sync fetching of the wasm failed\";}catch(c){r(c)}}\nfunction Ga(){if(!q&&(ha||l)){if(\"function\"==typeof fetch&&!C.startsWith(\"file://\"))return fetch(C,{credentials:\"same-origin\"}).then(function(b){if(!b.ok)throw\"failed to load wasm binary file at '\"+C+\"'\";return b.arrayBuffer()}).catch(function(){return Fa()});if(ka)return new Promise(function(b,c){ka(C,function(d){b(new Uint8Array(d))},c)})}return Promise.resolve().then(function(){return Fa()})}var Ha;function Ia(b){for(;0<b.length;)b.shift()(a)}\nfunction Ja(b,c=\"i8\"){c.endsWith(\"*\")&&(c=\"*\");switch(c){case \"i1\":return y[b>>0];case \"i8\":return y[b>>0];case \"i16\":return sa[b>>1];case \"i32\":return z[b>>2];case \"i64\":return z[b>>2];case \"float\":return ua[b>>2];case \"double\":return va[b>>3];case \"*\":return ta[b>>2];default:r(\"invalid type for getValue: \"+c)}return null}\nfunction D(b){var c=\"i8\";c.endsWith(\"*\")&&(c=\"*\");switch(c){case \"i1\":y[b>>0]=0;break;case \"i8\":y[b>>0]=0;break;case \"i16\":sa[b>>1]=0;break;case \"i32\":z[b>>2]=0;break;case \"i64\":Ha=[0,0];z[b>>2]=Ha[0];z[b+4>>2]=Ha[1];break;case \"float\":ua[b>>2]=0;break;case \"double\":va[b>>3]=0;break;case \"*\":ta[b>>2]=0;break;default:r(\"invalid type for setValue: \"+c)}}function Ka(b,c,d){for(var e=0;e<b.length;++e)y[c++>>0]=b.charCodeAt(e);d||(y[c>>0]=0)}\nfunction La(b,c,d){d=Array(0<d?d:x(b)+1);b=v(b,d,0,d.length);c&&(d.length=b);return d}var Ma={b:function(b,c,d){u.copyWithin(b,c,c+d)},a:function(b){var c=u.length;b>>>=0;if(2147483648<b)return!1;for(var d=1;4>=d;d*=2){var e=c*(1+.2/d);e=Math.min(e,b+100663296);var f=Math;e=Math.max(b,e);f=f.min.call(f,2147483648,e+(65536-e%65536)%65536);a:{try{oa.grow(f-ra.byteLength+65535>>>16);wa();var k=1;break a}catch(p){}k=void 0}if(k)return!0}return!1}};\n(function(){function b(f){a.asm=f.exports;oa=a.asm.c;wa();za.unshift(a.asm.d);A--;a.monitorRunDependencies&&a.monitorRunDependencies(A);0==A&&(null!==Ca&&(clearInterval(Ca),Ca=null),B&&(f=B,B=null,f()))}function c(f){b(f.instance)}function d(f){return Ga().then(function(k){return WebAssembly.instantiate(k,e)}).then(function(k){return k}).then(f,function(k){n(\"failed to asynchronously prepare wasm: \"+k);r(k)})}var e={a:Ma};A++;a.monitorRunDependencies&&a.monitorRunDependencies(A);if(a.instantiateWasm)try{return a.instantiateWasm(e,\nb)}catch(f){return n(\"Module.instantiateWasm callback failed with error: \"+f),!1}(function(){return q||\"function\"!=typeof WebAssembly.instantiateStreaming||Da()||C.startsWith(\"file://\")||ia||\"function\"!=typeof fetch?d(c):fetch(C,{credentials:\"same-origin\"}).then(function(f){return WebAssembly.instantiateStreaming(f,e).then(c,function(k){n(\"wasm streaming compile failed: \"+k);n(\"falling back to ArrayBuffer instantiation\");return d(c)})})})().catch(ca);return{}})();\na.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.d).apply(null,arguments)};a._olm_get_library_version=function(){return(a._olm_get_library_version=a.asm.f).apply(null,arguments)};a._olm_error=function(){return(a._olm_error=a.asm.g).apply(null,arguments)};a._olm_account_last_error=function(){return(a._olm_account_last_error=a.asm.h).apply(null,arguments)};a.__olm_error_to_string=function(){return(a.__olm_error_to_string=a.asm.i).apply(null,arguments)};\na._olm_account_last_error_code=function(){return(a._olm_account_last_error_code=a.asm.j).apply(null,arguments)};a._olm_session_last_error=function(){return(a._olm_session_last_error=a.asm.k).apply(null,arguments)};a._olm_session_last_error_code=function(){return(a._olm_session_last_error_code=a.asm.l).apply(null,arguments)};a._olm_utility_last_error=function(){return(a._olm_utility_last_error=a.asm.m).apply(null,arguments)};\na._olm_utility_last_error_code=function(){return(a._olm_utility_last_error_code=a.asm.n).apply(null,arguments)};a._olm_account_size=function(){return(a._olm_account_size=a.asm.o).apply(null,arguments)};a._olm_session_size=function(){return(a._olm_session_size=a.asm.p).apply(null,arguments)};a._olm_utility_size=function(){return(a._olm_utility_size=a.asm.q).apply(null,arguments)};a._olm_account=function(){return(a._olm_account=a.asm.r).apply(null,arguments)};\na._olm_session=function(){return(a._olm_session=a.asm.s).apply(null,arguments)};a._olm_utility=function(){return(a._olm_utility=a.asm.t).apply(null,arguments)};a._olm_clear_account=function(){return(a._olm_clear_account=a.asm.u).apply(null,arguments)};a._olm_clear_session=function(){return(a._olm_clear_session=a.asm.v).apply(null,arguments)};a._olm_clear_utility=function(){return(a._olm_clear_utility=a.asm.w).apply(null,arguments)};\na._olm_pickle_account_length=function(){return(a._olm_pickle_account_length=a.asm.x).apply(null,arguments)};a._olm_pickle_session_length=function(){return(a._olm_pickle_session_length=a.asm.y).apply(null,arguments)};a._olm_pickle_account=function(){return(a._olm_pickle_account=a.asm.z).apply(null,arguments)};a._olm_pickle_session=function(){return(a._olm_pickle_session=a.asm.A).apply(null,arguments)};a._olm_unpickle_account=function(){return(a._olm_unpickle_account=a.asm.B).apply(null,arguments)};\na._olm_unpickle_session=function(){return(a._olm_unpickle_session=a.asm.C).apply(null,arguments)};a._olm_create_account_random_length=function(){return(a._olm_create_account_random_length=a.asm.D).apply(null,arguments)};a._olm_create_account=function(){return(a._olm_create_account=a.asm.E).apply(null,arguments)};a._olm_account_identity_keys_length=function(){return(a._olm_account_identity_keys_length=a.asm.F).apply(null,arguments)};\na._olm_account_identity_keys=function(){return(a._olm_account_identity_keys=a.asm.G).apply(null,arguments)};a._olm_account_signature_length=function(){return(a._olm_account_signature_length=a.asm.H).apply(null,arguments)};a._olm_account_sign=function(){return(a._olm_account_sign=a.asm.I).apply(null,arguments)};a._olm_account_one_time_keys_length=function(){return(a._olm_account_one_time_keys_length=a.asm.J).apply(null,arguments)};\na._olm_account_one_time_keys=function(){return(a._olm_account_one_time_keys=a.asm.K).apply(null,arguments)};a._olm_account_mark_keys_as_published=function(){return(a._olm_account_mark_keys_as_published=a.asm.L).apply(null,arguments)};a._olm_account_max_number_of_one_time_keys=function(){return(a._olm_account_max_number_of_one_time_keys=a.asm.M).apply(null,arguments)};\na._olm_account_generate_one_time_keys_random_length=function(){return(a._olm_account_generate_one_time_keys_random_length=a.asm.N).apply(null,arguments)};a._olm_account_generate_one_time_keys=function(){return(a._olm_account_generate_one_time_keys=a.asm.O).apply(null,arguments)};a._olm_account_generate_fallback_key_random_length=function(){return(a._olm_account_generate_fallback_key_random_length=a.asm.P).apply(null,arguments)};\na._olm_account_generate_fallback_key=function(){return(a._olm_account_generate_fallback_key=a.asm.Q).apply(null,arguments)};a._olm_account_fallback_key_length=function(){return(a._olm_account_fallback_key_length=a.asm.R).apply(null,arguments)};a._olm_account_fallback_key=function(){return(a._olm_account_fallback_key=a.asm.S).apply(null,arguments)};a._olm_account_unpublished_fallback_key_length=function(){return(a._olm_account_unpublished_fallback_key_length=a.asm.T).apply(null,arguments)};\na._olm_account_unpublished_fallback_key=function(){return(a._olm_account_unpublished_fallback_key=a.asm.U).apply(null,arguments)};a._olm_account_forget_old_fallback_key=function(){return(a._olm_account_forget_old_fallback_key=a.asm.V).apply(null,arguments)};a._olm_create_outbound_session_random_length=function(){return(a._olm_create_outbound_session_random_length=a.asm.W).apply(null,arguments)};a._olm_create_outbound_session=function(){return(a._olm_create_outbound_session=a.asm.X).apply(null,arguments)};\na._olm_create_inbound_session=function(){return(a._olm_create_inbound_session=a.asm.Y).apply(null,arguments)};a._olm_create_inbound_session_from=function(){return(a._olm_create_inbound_session_from=a.asm.Z).apply(null,arguments)};a._olm_session_id_length=function(){return(a._olm_session_id_length=a.asm._).apply(null,arguments)};a._olm_session_id=function(){return(a._olm_session_id=a.asm.$).apply(null,arguments)};\na._olm_session_has_received_message=function(){return(a._olm_session_has_received_message=a.asm.aa).apply(null,arguments)};a._olm_session_describe=function(){return(a._olm_session_describe=a.asm.ba).apply(null,arguments)};a._olm_matches_inbound_session=function(){return(a._olm_matches_inbound_session=a.asm.ca).apply(null,arguments)};a._olm_matches_inbound_session_from=function(){return(a._olm_matches_inbound_session_from=a.asm.da).apply(null,arguments)};\na._olm_remove_one_time_keys=function(){return(a._olm_remove_one_time_keys=a.asm.ea).apply(null,arguments)};a._olm_encrypt_message_type=function(){return(a._olm_encrypt_message_type=a.asm.fa).apply(null,arguments)};a._olm_encrypt_random_length=function(){return(a._olm_encrypt_random_length=a.asm.ga).apply(null,arguments)};a._olm_encrypt_message_length=function(){return(a._olm_encrypt_message_length=a.asm.ha).apply(null,arguments)};\na._olm_encrypt=function(){return(a._olm_encrypt=a.asm.ia).apply(null,arguments)};a._olm_decrypt_max_plaintext_length=function(){return(a._olm_decrypt_max_plaintext_length=a.asm.ja).apply(null,arguments)};a._olm_decrypt=function(){return(a._olm_decrypt=a.asm.ka).apply(null,arguments)};a._olm_sha256_length=function(){return(a._olm_sha256_length=a.asm.la).apply(null,arguments)};a._olm_sha256=function(){return(a._olm_sha256=a.asm.ma).apply(null,arguments)};\na._olm_ed25519_verify=function(){return(a._olm_ed25519_verify=a.asm.na).apply(null,arguments)};a._olm_pk_encryption_last_error=function(){return(a._olm_pk_encryption_last_error=a.asm.oa).apply(null,arguments)};a._olm_pk_encryption_last_error_code=function(){return(a._olm_pk_encryption_last_error_code=a.asm.pa).apply(null,arguments)};a._olm_pk_encryption_size=function(){return(a._olm_pk_encryption_size=a.asm.qa).apply(null,arguments)};\na._olm_pk_encryption=function(){return(a._olm_pk_encryption=a.asm.ra).apply(null,arguments)};a._olm_clear_pk_encryption=function(){return(a._olm_clear_pk_encryption=a.asm.sa).apply(null,arguments)};a._olm_pk_encryption_set_recipient_key=function(){return(a._olm_pk_encryption_set_recipient_key=a.asm.ta).apply(null,arguments)};a._olm_pk_key_length=function(){return(a._olm_pk_key_length=a.asm.ua).apply(null,arguments)};\na._olm_pk_ciphertext_length=function(){return(a._olm_pk_ciphertext_length=a.asm.va).apply(null,arguments)};a._olm_pk_mac_length=function(){return(a._olm_pk_mac_length=a.asm.wa).apply(null,arguments)};a._olm_pk_encrypt_random_length=function(){return(a._olm_pk_encrypt_random_length=a.asm.xa).apply(null,arguments)};a._olm_pk_encrypt=function(){return(a._olm_pk_encrypt=a.asm.ya).apply(null,arguments)};\na._olm_pk_decryption_last_error=function(){return(a._olm_pk_decryption_last_error=a.asm.za).apply(null,arguments)};a._olm_pk_decryption_last_error_code=function(){return(a._olm_pk_decryption_last_error_code=a.asm.Aa).apply(null,arguments)};a._olm_pk_decryption_size=function(){return(a._olm_pk_decryption_size=a.asm.Ba).apply(null,arguments)};a._olm_pk_decryption=function(){return(a._olm_pk_decryption=a.asm.Ca).apply(null,arguments)};\na._olm_clear_pk_decryption=function(){return(a._olm_clear_pk_decryption=a.asm.Da).apply(null,arguments)};a._olm_pk_private_key_length=function(){return(a._olm_pk_private_key_length=a.asm.Ea).apply(null,arguments)};a._olm_pk_generate_key_random_length=function(){return(a._olm_pk_generate_key_random_length=a.asm.Fa).apply(null,arguments)};a._olm_pk_key_from_private=function(){return(a._olm_pk_key_from_private=a.asm.Ga).apply(null,arguments)};\na._olm_pk_generate_key=function(){return(a._olm_pk_generate_key=a.asm.Ha).apply(null,arguments)};a._olm_pickle_pk_decryption_length=function(){return(a._olm_pickle_pk_decryption_length=a.asm.Ia).apply(null,arguments)};a._olm_pickle_pk_decryption=function(){return(a._olm_pickle_pk_decryption=a.asm.Ja).apply(null,arguments)};a._olm_unpickle_pk_decryption=function(){return(a._olm_unpickle_pk_decryption=a.asm.Ka).apply(null,arguments)};\na._olm_pk_max_plaintext_length=function(){return(a._olm_pk_max_plaintext_length=a.asm.La).apply(null,arguments)};a._olm_pk_decrypt=function(){return(a._olm_pk_decrypt=a.asm.Ma).apply(null,arguments)};a._olm_pk_get_private_key=function(){return(a._olm_pk_get_private_key=a.asm.Na).apply(null,arguments)};a._olm_pk_signing_size=function(){return(a._olm_pk_signing_size=a.asm.Oa).apply(null,arguments)};a._olm_pk_signing=function(){return(a._olm_pk_signing=a.asm.Pa).apply(null,arguments)};\na._olm_pk_signing_last_error=function(){return(a._olm_pk_signing_last_error=a.asm.Qa).apply(null,arguments)};a._olm_pk_signing_last_error_code=function(){return(a._olm_pk_signing_last_error_code=a.asm.Ra).apply(null,arguments)};a._olm_clear_pk_signing=function(){return(a._olm_clear_pk_signing=a.asm.Sa).apply(null,arguments)};a._olm_pk_signing_seed_length=function(){return(a._olm_pk_signing_seed_length=a.asm.Ta).apply(null,arguments)};\na._olm_pk_signing_public_key_length=function(){return(a._olm_pk_signing_public_key_length=a.asm.Ua).apply(null,arguments)};a._olm_pk_signing_key_from_seed=function(){return(a._olm_pk_signing_key_from_seed=a.asm.Va).apply(null,arguments)};a._olm_pk_signature_length=function(){return(a._olm_pk_signature_length=a.asm.Wa).apply(null,arguments)};a._olm_pk_sign=function(){return(a._olm_pk_sign=a.asm.Xa).apply(null,arguments)};\na._olm_inbound_group_session_size=function(){return(a._olm_inbound_group_session_size=a.asm.Ya).apply(null,arguments)};a._olm_inbound_group_session=function(){return(a._olm_inbound_group_session=a.asm.Za).apply(null,arguments)};a._olm_clear_inbound_group_session=function(){return(a._olm_clear_inbound_group_session=a.asm._a).apply(null,arguments)};a._olm_inbound_group_session_last_error=function(){return(a._olm_inbound_group_session_last_error=a.asm.$a).apply(null,arguments)};\na._olm_inbound_group_session_last_error_code=function(){return(a._olm_inbound_group_session_last_error_code=a.asm.ab).apply(null,arguments)};a._olm_init_inbound_group_session=function(){return(a._olm_init_inbound_group_session=a.asm.bb).apply(null,arguments)};a._olm_import_inbound_group_session=function(){return(a._olm_import_inbound_group_session=a.asm.cb).apply(null,arguments)};\na._olm_pickle_inbound_group_session_length=function(){return(a._olm_pickle_inbound_group_session_length=a.asm.db).apply(null,arguments)};a._olm_pickle_inbound_group_session=function(){return(a._olm_pickle_inbound_group_session=a.asm.eb).apply(null,arguments)};a._olm_unpickle_inbound_group_session=function(){return(a._olm_unpickle_inbound_group_session=a.asm.fb).apply(null,arguments)};\na._olm_group_decrypt_max_plaintext_length=function(){return(a._olm_group_decrypt_max_plaintext_length=a.asm.gb).apply(null,arguments)};a._olm_group_decrypt=function(){return(a._olm_group_decrypt=a.asm.hb).apply(null,arguments)};a._olm_inbound_group_session_id_length=function(){return(a._olm_inbound_group_session_id_length=a.asm.ib).apply(null,arguments)};a._olm_inbound_group_session_id=function(){return(a._olm_inbound_group_session_id=a.asm.jb).apply(null,arguments)};\na._olm_inbound_group_session_first_known_index=function(){return(a._olm_inbound_group_session_first_known_index=a.asm.kb).apply(null,arguments)};a._olm_inbound_group_session_is_verified=function(){return(a._olm_inbound_group_session_is_verified=a.asm.lb).apply(null,arguments)};a._olm_export_inbound_group_session_length=function(){return(a._olm_export_inbound_group_session_length=a.asm.mb).apply(null,arguments)};\na._olm_export_inbound_group_session=function(){return(a._olm_export_inbound_group_session=a.asm.nb).apply(null,arguments)};a._olm_outbound_group_session_size=function(){return(a._olm_outbound_group_session_size=a.asm.ob).apply(null,arguments)};a._olm_outbound_group_session=function(){return(a._olm_outbound_group_session=a.asm.pb).apply(null,arguments)};a._olm_clear_outbound_group_session=function(){return(a._olm_clear_outbound_group_session=a.asm.qb).apply(null,arguments)};\na._olm_outbound_group_session_last_error=function(){return(a._olm_outbound_group_session_last_error=a.asm.rb).apply(null,arguments)};a._olm_outbound_group_session_last_error_code=function(){return(a._olm_outbound_group_session_last_error_code=a.asm.sb).apply(null,arguments)};a._olm_pickle_outbound_group_session_length=function(){return(a._olm_pickle_outbound_group_session_length=a.asm.tb).apply(null,arguments)};\na._olm_pickle_outbound_group_session=function(){return(a._olm_pickle_outbound_group_session=a.asm.ub).apply(null,arguments)};a._olm_unpickle_outbound_group_session=function(){return(a._olm_unpickle_outbound_group_session=a.asm.vb).apply(null,arguments)};a._olm_init_outbound_group_session_random_length=function(){return(a._olm_init_outbound_group_session_random_length=a.asm.wb).apply(null,arguments)};\na._olm_init_outbound_group_session=function(){return(a._olm_init_outbound_group_session=a.asm.xb).apply(null,arguments)};a._olm_group_encrypt_message_length=function(){return(a._olm_group_encrypt_message_length=a.asm.yb).apply(null,arguments)};a._olm_group_encrypt=function(){return(a._olm_group_encrypt=a.asm.zb).apply(null,arguments)};a._olm_outbound_group_session_id_length=function(){return(a._olm_outbound_group_session_id_length=a.asm.Ab).apply(null,arguments)};\na._olm_outbound_group_session_id=function(){return(a._olm_outbound_group_session_id=a.asm.Bb).apply(null,arguments)};a._olm_outbound_group_session_message_index=function(){return(a._olm_outbound_group_session_message_index=a.asm.Cb).apply(null,arguments)};a._olm_outbound_group_session_key_length=function(){return(a._olm_outbound_group_session_key_length=a.asm.Db).apply(null,arguments)};a._olm_outbound_group_session_key=function(){return(a._olm_outbound_group_session_key=a.asm.Eb).apply(null,arguments)};\na._olm_sas_last_error=function(){return(a._olm_sas_last_error=a.asm.Fb).apply(null,arguments)};a._olm_sas_last_error_code=function(){return(a._olm_sas_last_error_code=a.asm.Gb).apply(null,arguments)};a._olm_sas_size=function(){return(a._olm_sas_size=a.asm.Hb).apply(null,arguments)};a._olm_sas=function(){return(a._olm_sas=a.asm.Ib).apply(null,arguments)};a._olm_clear_sas=function(){return(a._olm_clear_sas=a.asm.Jb).apply(null,arguments)};\na._olm_create_sas_random_length=function(){return(a._olm_create_sas_random_length=a.asm.Kb).apply(null,arguments)};a._olm_create_sas=function(){return(a._olm_create_sas=a.asm.Lb).apply(null,arguments)};a._olm_sas_pubkey_length=function(){return(a._olm_sas_pubkey_length=a.asm.Mb).apply(null,arguments)};a._olm_sas_get_pubkey=function(){return(a._olm_sas_get_pubkey=a.asm.Nb).apply(null,arguments)};a._olm_sas_set_their_key=function(){return(a._olm_sas_set_their_key=a.asm.Ob).apply(null,arguments)};\na._olm_sas_is_their_key_set=function(){return(a._olm_sas_is_their_key_set=a.asm.Pb).apply(null,arguments)};a._olm_sas_generate_bytes=function(){return(a._olm_sas_generate_bytes=a.asm.Qb).apply(null,arguments)};a._olm_sas_mac_length=function(){return(a._olm_sas_mac_length=a.asm.Rb).apply(null,arguments)};a._olm_sas_calculate_mac_fixed_base64=function(){return(a._olm_sas_calculate_mac_fixed_base64=a.asm.Sb).apply(null,arguments)};\na._olm_sas_calculate_mac=function(){return(a._olm_sas_calculate_mac=a.asm.Tb).apply(null,arguments)};a._olm_sas_calculate_mac_long_kdf=function(){return(a._olm_sas_calculate_mac_long_kdf=a.asm.Ub).apply(null,arguments)};a._malloc=function(){return(a._malloc=a.asm.Vb).apply(null,arguments)};a._free=function(){return(a._free=a.asm.Wb).apply(null,arguments)};\nvar Na=a.stackSave=function(){return(Na=a.stackSave=a.asm.Xb).apply(null,arguments)},Oa=a.stackRestore=function(){return(Oa=a.stackRestore=a.asm.Yb).apply(null,arguments)},Pa=a.stackAlloc=function(){return(Pa=a.stackAlloc=a.asm.Zb).apply(null,arguments)};a.intArrayFromString=La;a.writeAsciiToMemory=Ka;a.ALLOC_STACK=1;var Qa;B=function Ra(){Qa||Sa();Qa||(B=Ra)};\nfunction Sa(){function b(){if(!Qa&&(Qa=!0,a.calledRun=!0,!pa)){Ia(za);aa(a);if(a.onRuntimeInitialized)a.onRuntimeInitialized();if(a.postRun)for(\"function\"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var c=a.postRun.shift();Aa.unshift(c)}Ia(Aa)}}if(!(0<A)){if(a.preRun)for(\"function\"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Ba();Ia(xa);0<A||(a.setStatus?(a.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){a.setStatus(\"\")},1);b()},1)):b())}}\nif(a.preInit)for(\"function\"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();Sa();function E(){var b=a._olm_outbound_group_session_size();this.ac=F(b);this.$b=a._olm_outbound_group_session(this.ac)}function G(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_outbound_group_session_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}E.prototype.free=function(){a._olm_clear_outbound_group_session(this.$b);H(this.$b)};\nE.prototype.pickle=J(function(b){b=K(b);var c=G(a._olm_pickle_outbound_group_session_length)(this.$b),d=L(b),e=L(c+1);try{G(a._olm_pickle_outbound_group_session)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});E.prototype.unpickle=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c);try{G(a._olm_unpickle_outbound_group_session)(this.$b,d,b.length,e,c.length)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}});\nE.prototype.create=J(function(){var b=G(a._olm_init_outbound_group_session_random_length)(this.$b),c=N(b,g);try{G(a._olm_init_outbound_group_session)(this.$b,c,b)}finally{M(c,b)}});E.prototype.encrypt=function(b){try{var c=x(b);var d=G(a._olm_group_encrypt_message_length)(this.$b,c);var e=F(c+1);v(b,u,e,c+1);var f=F(d+1);G(a._olm_group_encrypt)(this.$b,e,c,f,d);D(f+d);return t(f,d)}finally{void 0!==e&&(M(e,c+1),H(e)),void 0!==f&&H(f)}};\nE.prototype.session_id=J(function(){var b=G(a._olm_outbound_group_session_id_length)(this.$b),c=L(b+1);G(a._olm_outbound_group_session_id)(this.$b,c,b);return t(c,b)});E.prototype.session_key=J(function(){var b=G(a._olm_outbound_group_session_key_length)(this.$b),c=L(b+1);G(a._olm_outbound_group_session_key)(this.$b,c,b);var d=t(c,b);M(c,b);return d});E.prototype.message_index=function(){return G(a._olm_outbound_group_session_message_index)(this.$b)};olm_exports.OutboundGroupSession=E;\nfunction O(){var b=a._olm_inbound_group_session_size();this.ac=F(b);this.$b=a._olm_inbound_group_session(this.ac)}function P(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_inbound_group_session_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}O.prototype.free=function(){a._olm_clear_inbound_group_session(this.$b);H(this.$b)};\nO.prototype.pickle=J(function(b){b=K(b);var c=P(a._olm_pickle_inbound_group_session_length)(this.$b),d=L(b),e=L(c+1);try{P(a._olm_pickle_inbound_group_session)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});O.prototype.unpickle=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c);try{P(a._olm_unpickle_inbound_group_session)(this.$b,d,b.length,e,c.length)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}});\nO.prototype.create=J(function(b){b=K(b);var c=L(b);try{P(a._olm_init_inbound_group_session)(this.$b,c,b.length)}finally{for(M(c,b.length),c=0;c<b.length;c++)b[c]=0}});O.prototype.import_session=J(function(b){b=K(b);var c=L(b);try{P(a._olm_import_inbound_group_session)(this.$b,c,b.length)}finally{for(M(c,b.length),c=0;c<b.length;c++)b[c]=0}});\nO.prototype.decrypt=J(function(b){try{var c=F(b.length);Ka(b,c,!0);var d=P(a._olm_group_decrypt_max_plaintext_length)(this.$b,c,b.length);Ka(b,c,!0);var e=F(d+1);var f=L(4);var k=P(a._olm_group_decrypt)(this.$b,c,b.length,e,d,f);D(e+k);return{plaintext:t(e,k),message_index:Ja(f,\"i32\")}}finally{void 0!==c&&H(c),void 0!==e&&(M(e,k),H(e))}});\nO.prototype.session_id=J(function(){var b=P(a._olm_inbound_group_session_id_length)(this.$b),c=L(b+1);P(a._olm_inbound_group_session_id)(this.$b,c,b);return t(c,b)});O.prototype.first_known_index=J(function(){return P(a._olm_inbound_group_session_first_known_index)(this.$b)});O.prototype.export_session=J(function(b){var c=P(a._olm_export_inbound_group_session_length)(this.$b),d=L(c+1);G(a._olm_export_inbound_group_session)(this.$b,d,c,b);b=t(d,c);M(d,c);return b});\nolm_exports.InboundGroupSession=O;function Ta(){var b=a._olm_pk_encryption_size();this.ac=F(b);this.$b=a._olm_pk_encryption(this.ac)}function Q(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_pk_encryption_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}Ta.prototype.free=function(){a._olm_clear_pk_encryption(this.$b);H(this.$b)};Ta.prototype.set_recipient_key=J(function(b){b=K(b);var c=L(b);Q(a._olm_pk_encryption_set_recipient_key)(this.$b,c,b.length)});\nTa.prototype.encrypt=J(function(b){try{var c=x(b);var d=F(c+1);v(b,u,d,c+1);var e=Q(a._olm_pk_encrypt_random_length)();var f=N(e,g);var k=Q(a._olm_pk_ciphertext_length)(this.$b,c);var p=F(k+1);var w=Q(a._olm_pk_mac_length)(this.$b),ba=L(w+1);D(ba+w);var R=Q(a._olm_pk_key_length)(),I=L(R+1);D(I+R);Q(a._olm_pk_encrypt)(this.$b,d,c,p,k,ba,w,I,R,f,e);D(p+k);return{ciphertext:t(p,k),mac:t(ba,w),ephemeral:t(I,R)}}finally{void 0!==f&&M(f,e),void 0!==d&&(M(d,c+1),H(d)),void 0!==p&&H(p)}});\nfunction S(){var b=a._olm_pk_decryption_size();this.ac=F(b);this.$b=a._olm_pk_decryption(this.ac)}function T(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_pk_decryption_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}S.prototype.free=function(){a._olm_clear_pk_decryption(this.$b);H(this.$b)};\nS.prototype.init_with_private_key=J(function(b){var c=L(b.length);a.HEAPU8.set(b,c);var d=T(a._olm_pk_key_length)(),e=L(d+1);try{T(a._olm_pk_key_from_private)(this.$b,e,d,c,b.length)}finally{M(c,b.length)}return t(e,d)});S.prototype.generate_key=J(function(){var b=T(a._olm_pk_private_key_length)(),c=N(b,g),d=T(a._olm_pk_key_length)(),e=L(d+1);try{T(a._olm_pk_key_from_private)(this.$b,e,d,c,b)}finally{M(c,b)}return t(e,d)});\nS.prototype.get_private_key=J(function(){var b=Q(a._olm_pk_private_key_length)(),c=L(b);T(a._olm_pk_get_private_key)(this.$b,c,b);var d=new Uint8Array(new Uint8Array(a.HEAPU8.buffer,c,b));M(c,b);return d});S.prototype.pickle=J(function(b){b=K(b);var c=T(a._olm_pickle_pk_decryption_length)(this.$b),d=L(b),e=L(c+1);try{T(a._olm_pickle_pk_decryption)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});\nS.prototype.unpickle=J(function(b,c){b=K(b);var d=L(b),e=K(c),f=L(e);c=T(a._olm_pk_key_length)();var k=L(c+1);try{T(a._olm_unpickle_pk_decryption)(this.$b,d,b.length,f,e.length,k,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(k,c)});\nS.prototype.decrypt=J(function(b,c,d){try{var e=x(d);var f=F(e+1);v(d,u,f,e+1);var k=K(b),p=L(k),w=K(c),ba=L(w);var R=T(a._olm_pk_max_plaintext_length)(this.$b,e);var I=F(R+1);var ya=T(a._olm_pk_decrypt)(this.$b,p,k.length,ba,w.length,f,e,I,R);D(I+ya);return t(I,ya)}finally{void 0!==I&&(M(I,ya+1),H(I)),void 0!==f&&H(f)}});function Ua(){var b=a._olm_pk_signing_size();this.ac=F(b);this.$b=a._olm_pk_signing(this.ac)}\nfunction Va(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_pk_signing_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}Ua.prototype.free=function(){a._olm_clear_pk_signing(this.$b);H(this.$b)};Ua.prototype.init_with_seed=J(function(b){var c=L(b.length);a.HEAPU8.set(b,c);var d=Va(a._olm_pk_signing_public_key_length)(),e=L(d+1);try{Va(a._olm_pk_signing_key_from_seed)(this.$b,e,d,c,b.length)}finally{M(c,b.length)}return t(e,d)});\nUa.prototype.generate_seed=J(function(){var b=Va(a._olm_pk_signing_seed_length)(),c=N(b,g),d=new Uint8Array(new Uint8Array(a.HEAPU8.buffer,c,b));M(c,b);return d});Ua.prototype.sign=J(function(b){try{var c=x(b);var d=F(c+1);v(b,u,d,c+1);var e=Va(a._olm_pk_signature_length)(),f=L(e+1);Va(a._olm_pk_sign)(this.$b,d,c,f,e);return t(f,e)}finally{void 0!==d&&(M(d,c+1),H(d))}});\nfunction U(){var b=a._olm_sas_size(),c=a._olm_create_sas_random_length(),d=N(c,g);this.ac=F(b);this.$b=a._olm_sas(this.ac);a._olm_create_sas(this.$b,d,c);M(d,c)}function V(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_sas_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}U.prototype.free=function(){a._olm_clear_sas(this.$b);H(this.$b)};\nU.prototype.get_pubkey=J(function(){var b=V(a._olm_sas_pubkey_length)(this.$b),c=L(b+1);V(a._olm_sas_get_pubkey)(this.$b,c,b);return t(c,b)});U.prototype.set_their_key=J(function(b){b=K(b);var c=L(b);V(a._olm_sas_set_their_key)(this.$b,c,b.length)});U.prototype.is_their_key_set=J(function(){return V(a._olm_sas_is_their_key_set)(this.$b)?!0:!1});\nU.prototype.generate_bytes=J(function(b,c){b=K(b);var d=L(b),e=L(c);V(a._olm_sas_generate_bytes)(this.$b,d,b.length,e,c);return new Uint8Array(new Uint8Array(a.HEAPU8.buffer,e,c))});U.prototype.calculate_mac=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c),f=V(a._olm_sas_mac_length)(this.$b),k=L(f+1);V(a._olm_sas_calculate_mac)(this.$b,d,b.length,e,c.length,k,f);return t(k,f)});\nU.prototype.calculate_mac_fixed_base64=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c),f=V(a._olm_sas_mac_length)(this.$b),k=L(f+1);V(a._olm_sas_calculate_mac_fixed_base64)(this.$b,d,b.length,e,c.length,k,f);return t(k,f)});U.prototype.calculate_mac_long_kdf=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c),f=V(a._olm_sas_mac_length)(this.$b),k=L(f+1);V(a._olm_sas_calculate_mac_long_kdf)(this.$b,d,b.length,e,c.length,k,f);return t(k,f)});var F=a._malloc,H=a._free,h;\nfunction N(b,c){var d=Pa(b);c(new Uint8Array(a.HEAPU8.buffer,d,b));return d}function L(b){return\"number\"==typeof b?N(b,function(c){c.fill(0)}):N(b.length,function(c){c.set(b)})}function K(b){return b instanceof Uint8Array?b:La(b,!0)}function J(b){return function(){var c=Na();try{return b.apply(this,arguments)}finally{Oa(c)}}}function M(b,c){for(;0<c--;)a.HEAP8[b++]=0}function W(){var b=a._olm_account_size();this.ac=F(b);this.$b=a._olm_account(this.ac)}\nfunction X(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_account_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}W.prototype.free=function(){a._olm_clear_account(this.$b);H(this.$b)};W.prototype.create=J(function(){var b=X(a._olm_create_account_random_length)(this.$b),c=N(b,g);try{X(a._olm_create_account)(this.$b,c,b)}finally{M(c,b)}});\nW.prototype.identity_keys=J(function(){var b=X(a._olm_account_identity_keys_length)(this.$b),c=L(b+1);X(a._olm_account_identity_keys)(this.$b,c,b);return t(c,b)});W.prototype.sign=J(function(b){var c=X(a._olm_account_signature_length)(this.$b);b=K(b);var d=L(b),e=L(c+1);try{X(a._olm_account_sign)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});\nW.prototype.one_time_keys=J(function(){var b=X(a._olm_account_one_time_keys_length)(this.$b),c=L(b+1);X(a._olm_account_one_time_keys)(this.$b,c,b);return t(c,b)});W.prototype.mark_keys_as_published=J(function(){X(a._olm_account_mark_keys_as_published)(this.$b)});W.prototype.max_number_of_one_time_keys=J(function(){return X(a._olm_account_max_number_of_one_time_keys)(this.$b)});\nW.prototype.generate_one_time_keys=J(function(b){var c=X(a._olm_account_generate_one_time_keys_random_length)(this.$b,b),d=N(c,g);try{X(a._olm_account_generate_one_time_keys)(this.$b,b,d,c)}finally{M(d,c)}});W.prototype.remove_one_time_keys=J(function(b){X(a._olm_remove_one_time_keys)(this.$b,b.$b)});W.prototype.generate_fallback_key=J(function(){var b=X(a._olm_account_generate_fallback_key_random_length)(this.$b),c=N(b,g);try{X(a._olm_account_generate_fallback_key)(this.$b,c,b)}finally{M(c,b)}});\nW.prototype.fallback_key=J(function(){var b=X(a._olm_account_fallback_key_length)(this.$b),c=L(b+1);X(a._olm_account_fallback_key)(this.$b,c,b);return t(c,b)});W.prototype.unpublished_fallback_key=J(function(){var b=X(a._olm_account_unpublished_fallback_key_length)(this.$b),c=L(b+1);X(a._olm_account_unpublished_fallback_key)(this.$b,c,b);return t(c,b)});W.prototype.forget_old_fallback_key=J(function(){X(a._olm_account_forget_old_fallback_key)(this.$b)});\nW.prototype.pickle=J(function(b){b=K(b);var c=X(a._olm_pickle_account_length)(this.$b),d=L(b),e=L(c+1);try{X(a._olm_pickle_account)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});W.prototype.unpickle=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c);try{X(a._olm_unpickle_account)(this.$b,d,b.length,e,c.length)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}});function Y(){var b=a._olm_session_size();this.ac=F(b);this.$b=a._olm_session(this.ac)}\nfunction Z(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_session_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}Y.prototype.free=function(){a._olm_clear_session(this.$b);H(this.$b)};Y.prototype.pickle=J(function(b){b=K(b);var c=Z(a._olm_pickle_session_length)(this.$b),d=L(b),e=L(c+1);try{Z(a._olm_pickle_session)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});\nY.prototype.unpickle=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c);try{Z(a._olm_unpickle_session)(this.$b,d,b.length,e,c.length)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}});Y.prototype.create_outbound=J(function(b,c,d){var e=Z(a._olm_create_outbound_session_random_length)(this.$b),f=N(e,g);c=K(c);d=K(d);var k=L(c),p=L(d);try{Z(a._olm_create_outbound_session)(this.$b,b.$b,k,c.length,p,d.length,f,e)}finally{M(f,e)}});\nY.prototype.create_inbound=J(function(b,c){c=K(c);var d=L(c);try{Z(a._olm_create_inbound_session)(this.$b,b.$b,d,c.length)}finally{for(M(d,c.length),b=0;b<c.length;b++)c[b]=0}});Y.prototype.create_inbound_from=J(function(b,c,d){c=K(c);var e=L(c);d=K(d);var f=L(d);try{Z(a._olm_create_inbound_session_from)(this.$b,b.$b,e,c.length,f,d.length)}finally{for(M(f,d.length),b=0;b<d.length;b++)d[b]=0}});\nY.prototype.session_id=J(function(){var b=Z(a._olm_session_id_length)(this.$b),c=L(b+1);Z(a._olm_session_id)(this.$b,c,b);return t(c,b)});Y.prototype.has_received_message=function(){return Z(a._olm_session_has_received_message)(this.$b)?!0:!1};Y.prototype.matches_inbound=J(function(b){b=K(b);var c=L(b);return Z(a._olm_matches_inbound_session)(this.$b,c,b.length)?!0:!1});\nY.prototype.matches_inbound_from=J(function(b,c){b=K(b);var d=L(b);c=K(c);var e=L(c);return Z(a._olm_matches_inbound_session_from)(this.$b,d,b.length,e,c.length)?!0:!1});\nY.prototype.encrypt=J(function(b){try{var c=Z(a._olm_encrypt_random_length)(this.$b);var d=Z(a._olm_encrypt_message_type)(this.$b);var e=x(b);var f=Z(a._olm_encrypt_message_length)(this.$b,e);var k=N(c,g);var p=F(e+1);v(b,u,p,e+1);var w=F(f+1);Z(a._olm_encrypt)(this.$b,p,e,k,c,w,f);D(w+f);return{type:d,body:t(w,f)}}finally{void 0!==k&&M(k,c),void 0!==p&&(M(p,e+1),H(p)),void 0!==w&&H(w)}});\nY.prototype.decrypt=J(function(b,c){try{var d=F(c.length);Ka(c,d,!0);var e=Z(a._olm_decrypt_max_plaintext_length)(this.$b,b,d,c.length);Ka(c,d,!0);var f=F(e+1);var k=Z(a._olm_decrypt)(this.$b,b,d,c.length,f,e);D(f+k);return t(f,k)}finally{void 0!==d&&H(d),void 0!==f&&(M(f,e),H(f))}});Y.prototype.describe=J(function(){try{var b=F(256);Z(a._olm_session_describe)(this.$b,b,256);return t(b)}finally{void 0!==b&&H(b)}});\nfunction Wa(){var b=a._olm_utility_size();this.ac=F(b);this.$b=a._olm_utility(this.ac)}function Xa(b){return function(){var c=b.apply(this,arguments);if(c===h)throw c=t(a._olm_utility_last_error(arguments[0])),Error(\"OLM.\"+c);return c}}Wa.prototype.free=function(){a._olm_clear_utility(this.$b);H(this.$b)};\nWa.prototype.sha256=J(function(b){var c=Xa(a._olm_sha256_length)(this.$b);b=K(b);var d=L(b),e=L(c+1);try{Xa(a._olm_sha256)(this.$b,d,b.length,e,c)}finally{for(M(d,b.length),d=0;d<b.length;d++)b[d]=0}return t(e,c)});Wa.prototype.ed25519_verify=J(function(b,c,d){b=K(b);var e=L(b);c=K(c);var f=L(c);d=K(d);var k=L(d);try{Xa(a._olm_ed25519_verify)(this.$b,e,b.length,f,c.length,k,d.length)}finally{for(M(f,c.length),b=0;b<c.length;b++)c[b]=0}});olm_exports.Account=W;olm_exports.Session=Y;\nolm_exports.Utility=Wa;olm_exports.PkEncryption=Ta;olm_exports.PkDecryption=S;olm_exports.PkSigning=Ua;olm_exports.SAS=U;olm_exports.get_library_version=J(function(){var b=L(3);a._olm_get_library_version(b,b+1,b+2);return[Ja(b,\"i8\"),Ja(b+1,\"i8\"),Ja(b+2,\"i8\")]});\n\n\n  return Module.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return Module; });\nelse if (typeof exports === 'object')\n  exports[\"Module\"] = Module;\nvar olmInitPromise;\n\nolm_exports['init'] = function(opts) {\n    if (olmInitPromise) return olmInitPromise;\n\n    if (opts) OLM_OPTIONS = opts;\n\n    olmInitPromise = new Promise(function(resolve, reject) {\n        onInitSuccess = function() {\n            resolve();\n        };\n        onInitFail = function(err) {\n            reject(err);\n        };\n        Module();\n    });\n    return olmInitPromise;\n};\n\nreturn olm_exports;\n\n})();\n\nif (typeof(window) !== 'undefined') {\n    // We've been imported directly into a browser. Define the global 'Olm' object.\n    // (we do this even if module.exports was defined, because it's useful to have\n    // Olm in the global scope for browserified and webpacked apps.)\n    window[\"Olm\"] = Olm;\n}\n\nif (typeof module === 'object') {\n    // Emscripten sets the module exports to be its module\n    // with wrapped c functions. Clobber it with our higher\n    // level wrapper class.\n    module.exports = Olm;\n}\n\n// @license-end\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/*! @license DOMPurify 2.3.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.6/LICENSE */\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar hasOwnProperty = Object.hasOwnProperty,\n    setPrototypeOf = Object.setPrototypeOf,\n    isFrozen = Object.isFrozen,\n    getPrototypeOf = Object.getPrototypeOf,\n    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar freeze = Object.freeze,\n    seal = Object.seal,\n    create = Object.create; // eslint-disable-line import/no-mutable-exports\n\nvar _ref = typeof Reflect !== 'undefined' && Reflect,\n    apply = _ref.apply,\n    construct = _ref.construct;\n\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new (Function.prototype.bind.apply(Func, [null].concat(_toConsumableArray(args))))();\n  };\n}\n\nvar arrayForEach = unapply(Array.prototype.forEach);\nvar arrayPop = unapply(Array.prototype.pop);\nvar arrayPush = unapply(Array.prototype.push);\n\nvar stringToLowerCase = unapply(String.prototype.toLowerCase);\nvar stringMatch = unapply(String.prototype.match);\nvar stringReplace = unapply(String.prototype.replace);\nvar stringIndexOf = unapply(String.prototype.indexOf);\nvar stringTrim = unapply(String.prototype.trim);\n\nvar regExpTest = unapply(RegExp.prototype.test);\n\nvar typeErrorCreate = unconstruct(TypeError);\n\nfunction unapply(func) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\n\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return construct(func, args);\n  };\n}\n\n/* Add properties to a lookup table */\nfunction addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  var l = array.length;\n  while (l--) {\n    var element = array[l];\n    if (typeof element === 'string') {\n      var lcElement = stringToLowerCase(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nfunction clone(object) {\n  var newObject = create(null);\n\n  var property = void 0;\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\n/* IE10 doesn't support __lookupGetter__ so lets'\n * simulate it. It also automatically checks\n * if the prop is function or getter and behaves\n * accordingly. */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    var desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nvar html = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n// SVG\nvar svg = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n\nvar svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nvar svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n\nvar mathMl = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nvar mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n\nvar text = freeze(['#text']);\n\nvar html$1 = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\n\nvar svg$1 = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\nvar mathMl$1 = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\nvar xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nvar MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nvar ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nvar DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nvar ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nvar IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nvar IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nvar ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nvar DOCTYPE_NAME = seal(/^html$/i);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nvar _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n  if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  var suffix = null;\n  var ATTR_NAME = 'data-tt-policy-suffix';\n  if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML: function createHTML(html$$1) {\n        return html$$1;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '2.3.6';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      Element = window.Element,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      HTMLFormElement = window.HTMLFormElement,\n      DOMParser = window.DOMParser,\n      trustedTypes = window.trustedTypes;\n\n\n  var ElementPrototype = Element.prototype;\n\n  var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n  var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      createDocumentFragment = _document.createDocumentFragment,\n      getElementsByTagName = _document.getElementsByTagName;\n  var importNode = originalDocument.importNode;\n\n\n  var documentMode = {};\n  try {\n    documentMode = clone(document).documentMode ? document.documentMode : {};\n  } catch (_) {}\n\n  var hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n\n  var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n      ERB_EXPR$$1 = ERB_EXPR,\n      DATA_ATTR$$1 = DATA_ATTR,\n      ARIA_ATTR$$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n  var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(html), _toConsumableArray$1(svg), _toConsumableArray$1(svgFilters), _toConsumableArray$1(mathMl), _toConsumableArray$1(text)));\n\n  /* Allowed attribute names */\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray$1(html$1), _toConsumableArray$1(svg$1), _toConsumableArray$1(mathMl$1), _toConsumableArray$1(xml)));\n\n  /*\n   * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  var FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  var FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  var ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  var ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  var SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  var WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  var SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  var FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  var RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  var RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  var RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  var SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  var KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  var IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  var USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  var FORBID_CONTENTS = null;\n  var DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n  /* Tags that are safe for data: URIs */\n  var DATA_URI_TAGS = null;\n  var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  var URI_SAFE_ATTRIBUTES = null;\n  var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n  var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  var NAMESPACE = HTML_NAMESPACE;\n  var IS_EMPTY_INPUT = false;\n\n  /* Parsing of strict XHTML documents */\n  var PARSER_MEDIA_TYPE = void 0;\n  var SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  var transformCaseFunc = void 0;\n\n  /* Keep a reference to config to pass to hooks */\n  var CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  var isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  var _parseConfig = function _parseConfig(cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n      return x;\n    } : stringToLowerCase;\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(text)));\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html);\n        addToSet(ALLOWED_ATTR, html$1);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl);\n        addToSet(ALLOWED_ATTR, mathMl$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n\n  var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  var ALL_SVG_TAGS = addToSet({}, svg);\n  addToSet(ALL_SVG_TAGS, svgFilters);\n  addToSet(ALL_SVG_TAGS, svgDisallowed);\n\n  var ALL_MATHML_TAGS = addToSet({}, mathMl);\n  addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  var _checkValidNamespace = function _checkValidNamespace(element) {\n    var parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: HTML_NAMESPACE,\n        tagName: 'template'\n      };\n    }\n\n    var tagName = stringToLowerCase(element.tagName);\n    var parentTagName = stringToLowerCase(parent.tagName);\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erronously deleted from\n      // HTML namespace.\n      var commonSvgAndHTMLElements = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG or MathML). Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  var _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      try {\n        node.outerHTML = emptyHTML;\n      } catch (_) {\n        node.remove();\n      }\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  var _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc = void 0;\n    var leadingWhitespace = void 0;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n\n    var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    var body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  var _isClobbered = function _isClobbered(elm) {\n    return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  var _isNode = function _isNode(object) {\n    return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? object instanceof Node : object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content = void 0;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check if tagname contains Unicode */\n    if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    var tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (!_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Mitigate a problem with templates inside select */\n    if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          var childCount = childNodes.length;\n\n          for (var i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR$$1, ' ');\n      content = stringReplace(content, ERB_EXPR$$1, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if (!value) ; else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _basicCustomElementCheck\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   * @param {string} tagName name of the tag of the node to sanitize\n   */\n  var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n    return tagName.indexOf('-') > 0;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr = void 0;\n    var value = void 0;\n    var lcName = void 0;\n    var l = void 0;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    var attributes = currentNode.attributes;\n\n    /* Check if we have attributes; if not we might have a text node */\n\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      var _attr = attr,\n          name = _attr.name,\n          namespaceURI = _attr.namespaceURI;\n\n      value = stringTrim(attr.value);\n      lcName = transformCaseFunc(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR$$1, ' ');\n        value = stringReplace(value, ERB_EXPR$$1, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      var lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode = void 0;\n    var shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    var body = void 0;\n    var importedNode = void 0;\n    var currentNode = void 0;\n    var oldNode = void 0;\n    var returnNode = void 0;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        var tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$$1, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR$$1, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    var lcTag = transformCaseFunc(tag);\n    var lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\nexport default purify;\n//# sourceMappingURL=purify.es.js.map\n","module.exports=function(n){var t={};function r(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var o in n)r.d(e,o,function(t){return n[t]}.bind(null,o));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,\"a\",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p=\"\",r(r.s=0)}([function(n,t,r){\"use strict\";function e(n){let t,r;const e={light:function(){return!a()},dark:a,lighten:d,darken:l,saturate:p,desaturate:function(n=0){return p(n*=-1)},increaseContrast:function(n=0){return b(n*=-1)},decreaseContrast:b,active:function(){return b(.123)},highlight:function(){return b(.1)},selected:function(){return b(.066)},text:function(){return r=s()?o(\"#333333\"):o(\"#FFFFFF\"),e},shadow:function(){return r=s()?o(\"#000000\"):o(\"#FFFFFF\"),e},hex:function(){const n=r;return r=t,\"#\"+n.map(n=>parseInt(n+\"\",10).toString(16).padStart(2,\"0\")).join(\"\")},rgb:function(){const n=r;return r=t,`rgb(${n.join()})`},rgba:function(n=1){const e=r;return r=t,`rgba(${e.join()}, ${n})`},setHex:c,setRgb:function(n=[0,0,0]){let[o,u,c]=n;return o=f(o,0,255),u=f(u,0,255),c=f(c,0,255),t=[o,u,c],r=[o,u,c],e}};function c(n=\"#000000\"){return t=o(n),r=t,e}function a(){const[n,e,o]=r;return r=t,(299*n+587*e+114*o)/1e3<128}function s(){const[n,t,e]=r;return(299*n+587*t+114*e)/1e3>=128}function l(n=0){return d(n*=-1)}function d(n=0){let[t,o,c]=i(r);return c=f(c+n,0,1),r=u([t,o,c]),e}function p(n=0){let[t,o,c]=i(r);return o=f(o+n,0,1),r=u([t,o,c]),e}function b(n=0){return s()?l(n):d(n)}return c(n),e}function o(n){if(\"string\"!=typeof n)throw new TypeError(\"Expected a string\");3===(n=n.replace(/^#/,\"\")).length&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var t=parseInt(n,16);return[t>>16,t>>8&255,255&t]}function u(n){const[t,r,e]=n;let o,u,c;if(0===r)o=u=c=e;else{const n=function(n,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+6*(t-n)*r:r<.5?t:r<2/3?n+(t-n)*(2/3-r)*6:n},i=e<.5?e*(1+r):e+r-e*r,a=2*e-i;o=f(n(a,i,t+1/3),0,1),u=f(n(a,i,t),0,1),c=f(n(a,i,t-1/3),0,1)}return[Math.round(255*o),Math.round(255*u),Math.round(255*c)]}r.r(t),r.d(t,\"offColor\",(function(){return e})),r.d(t,\"hexRgb\",(function(){return o})),r.d(t,\"hslToRgb\",(function(){return u})),r.d(t,\"color\",(function(){return c})),r.d(t,\"rgbToHsl\",(function(){return i}));const c=e;function i(n){const t=n[0]/255,r=n[1]/255,e=n[2]/255,o=Math.max(t,r,e),u=Math.min(t,r,e);let c=(o+u)/2,i=(o+u)/2;const f=(o+u)/2;if(o===u)c=i=0;else{const n=o-u;switch(i=f>.5?n/(2-o-u):n/(o+u),o){case t:c=(r-e)/n+(r<e?6:0);break;case r:c=(e-t)/n+2;break;case e:c=(t-r)/n+4}c/=6}return[c,i,f]}function f(n,t,r){return n=(n=n<=r?n:r)>=t?n:t}}]);","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/index.min.js');\n} else {\n  module.exports = require('./cjs/index.js');\n}\n","var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar _c, _d;\nimport anotherjson from \"another-json\";\nimport \"@matrix-org/olm/olm.js\";\nimport base64 from \"base64-arraybuffer\";\nimport DOMPurify from \"dompurify\";\nimport * as pkg from \"off-color\";\nvar LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n  LogLevel2[LogLevel2[\"All\"] = 1] = \"All\";\n  LogLevel2[LogLevel2[\"Debug\"] = 2] = \"Debug\";\n  LogLevel2[LogLevel2[\"Detail\"] = 3] = \"Detail\";\n  LogLevel2[LogLevel2[\"Info\"] = 4] = \"Info\";\n  LogLevel2[LogLevel2[\"Warn\"] = 5] = \"Warn\";\n  LogLevel2[LogLevel2[\"Error\"] = 6] = \"Error\";\n  LogLevel2[LogLevel2[\"Fatal\"] = 7] = \"Fatal\";\n  LogLevel2[LogLevel2[\"Off\"] = 8] = \"Off\";\n  return LogLevel2;\n})(LogLevel || {});\nclass LogFilter {\n  constructor(parentFilter) {\n    this._parentFilter = parentFilter;\n  }\n  filter(item, children) {\n    if (this._parentFilter) {\n      if (!this._parentFilter.filter(item, children)) {\n        return false;\n      }\n    }\n    if (this._min !== void 0 && !Array.isArray(children) && item.logLevel < this._min) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n  minLevel(logLevel) {\n    this._min = logLevel;\n    return this;\n  }\n}\nclass LogItem {\n  constructor(labelOrValues, logLevel, logger, filterCreator) {\n    this._discard = false;\n    this._logger = logger;\n    this.start = logger._now();\n    this._values = typeof labelOrValues === \"string\" ? { l: labelOrValues } : labelOrValues;\n    this.logLevel = logLevel;\n    this._filterCreator = filterCreator;\n  }\n  discard() {\n    this._discard = true;\n  }\n  runDetached(labelOrValues, callback, logLevel, filterCreator) {\n    return this._logger.runDetached(labelOrValues, callback, logLevel, filterCreator);\n  }\n  wrapDetached(labelOrValues, callback, logLevel, filterCreator) {\n    this.refDetached(this.runDetached(labelOrValues, callback, logLevel, filterCreator));\n  }\n  refDetached(logItem, logLevel) {\n    logItem.ensureRefId();\n    this.log({ ref: logItem.values.refId }, logLevel);\n  }\n  ensureRefId() {\n    if (!this._values.refId) {\n      this.set(\"refId\", this._logger._createRefId());\n    }\n  }\n  wrap(labelOrValues, callback, logLevel, filterCreator) {\n    const item = this.child(labelOrValues, logLevel, filterCreator);\n    return item.run(callback);\n  }\n  get duration() {\n    if (this.end) {\n      return this.end - this.start;\n    } else {\n      return void 0;\n    }\n  }\n  durationWithoutType(type) {\n    const durationOfType = this.durationOfType(type);\n    if (this.duration && durationOfType) {\n      return this.duration - durationOfType;\n    }\n  }\n  durationOfType(type) {\n    if (this._values.t === type) {\n      return this.duration;\n    } else if (this._children) {\n      return this._children.reduce((sum, c) => {\n        const duration = c.durationOfType(type);\n        return sum + (duration != null ? duration : 0);\n      }, 0);\n    } else {\n      return 0;\n    }\n  }\n  log(labelOrValues, logLevel) {\n    const item = this.child(labelOrValues, logLevel);\n    item.end = item.start;\n    return item;\n  }\n  set(key, value) {\n    if (typeof key === \"object\") {\n      const values = key;\n      Object.assign(this._values, values);\n    } else {\n      this._values[key] = value;\n    }\n    return this;\n  }\n  serialize(filter, parentStartTime, forced) {\n    if (this._discard) {\n      return;\n    }\n    if (this._filterCreator) {\n      try {\n        filter = this._filterCreator(new LogFilter(filter), this);\n      } catch (err) {\n        console.error(\"Error creating log filter\", err);\n      }\n    }\n    let children = null;\n    if (this._children) {\n      children = this._children.reduce((array, c) => {\n        const s = c.serialize(filter, this.start, false);\n        if (s) {\n          if (array === null) {\n            array = [];\n          }\n          array.push(s);\n        }\n        return array;\n      }, null);\n    }\n    if (filter && !filter.filter(this, children)) {\n      return;\n    }\n    const item = {\n      s: typeof parentStartTime === \"number\" ? this.start - parentStartTime : this.start,\n      d: this.duration,\n      v: this._values,\n      l: this.logLevel\n    };\n    if (this.error) {\n      item.e = {\n        stack: this.error.stack,\n        name: this.error.name,\n        message: this.error.message.split(\"\\n\")[0]\n      };\n    }\n    if (forced) {\n      item.f = true;\n    }\n    if (children) {\n      item.c = children;\n    }\n    return item;\n  }\n  run(callback) {\n    try {\n      const result = callback(this);\n      if (result instanceof Promise) {\n        return result.then((promiseResult) => {\n          this.finish();\n          return promiseResult;\n        }, (err) => {\n          throw this.catch(err);\n        });\n      } else {\n        this.finish();\n        return result;\n      }\n    } catch (err) {\n      throw this.catch(err);\n    }\n  }\n  finish() {\n    if (this.end === void 0) {\n      if (this._children) {\n        for (const c of this._children) {\n          c.finish();\n        }\n      }\n      this.end = this._logger._now();\n    }\n  }\n  forceFinish() {\n    this.finish();\n  }\n  get level() {\n    return LogLevel;\n  }\n  catch(err) {\n    this.error = err;\n    this.logLevel = LogLevel.Error;\n    this.finish();\n    return err;\n  }\n  child(labelOrValues, logLevel, filterCreator) {\n    if (!logLevel) {\n      logLevel = this.logLevel || LogLevel.Info;\n    }\n    const item = new LogItem(labelOrValues, logLevel, this._logger, filterCreator);\n    if (!this._children) {\n      this._children = [];\n    }\n    this._children.push(item);\n    return item;\n  }\n  get logger() {\n    return this._logger;\n  }\n  get values() {\n    return this._values;\n  }\n  get children() {\n    return this._children;\n  }\n}\nclass Logger {\n  constructor({ platform }) {\n    this._openItems = /* @__PURE__ */ new Set();\n    this.reporters = [];\n    this._platform = platform;\n  }\n  log(labelOrValues, logLevel = LogLevel.Info) {\n    const item = new LogItem(labelOrValues, logLevel, this);\n    item.end = item.start;\n    this._persistItem(item, void 0, false);\n    return item;\n  }\n  child(labelOrValues, logLevel = LogLevel.Info, filterCreator) {\n    const item = new DeferredPersistRootLogItem(labelOrValues, logLevel, this, filterCreator);\n    this._openItems.add(item);\n    return item;\n  }\n  wrapOrRun(item, labelOrValues, callback, logLevel, filterCreator) {\n    if (item) {\n      return item.wrap(labelOrValues, callback, logLevel, filterCreator);\n    } else {\n      return this.run(labelOrValues, callback, logLevel, filterCreator);\n    }\n  }\n  runDetached(labelOrValues, callback, logLevel, filterCreator) {\n    if (!logLevel) {\n      logLevel = LogLevel.Info;\n    }\n    const item = new LogItem(labelOrValues, logLevel, this);\n    this._run(item, callback, logLevel, false, filterCreator);\n    return item;\n  }\n  run(labelOrValues, callback, logLevel, filterCreator) {\n    if (logLevel === void 0) {\n      logLevel = LogLevel.Info;\n    }\n    const item = new LogItem(labelOrValues, logLevel, this);\n    return this._run(item, callback, logLevel, true, filterCreator);\n  }\n  _run(item, callback, logLevel, wantResult, filterCreator) {\n    this._openItems.add(item);\n    const finishItem = () => {\n      let filter = new LogFilter();\n      if (filterCreator) {\n        try {\n          filter = filterCreator(filter, item);\n        } catch (err) {\n          console.error(\"Error while creating log filter\", err);\n        }\n      } else {\n        filter = filter.minLevel(logLevel);\n      }\n      try {\n        this._persistItem(item, filter, false);\n      } catch (err) {\n        console.error(\"Could not persist log item\", err);\n      }\n      this._openItems.delete(item);\n    };\n    try {\n      let result = item.run(callback);\n      if (result instanceof Promise) {\n        result = result.then((promiseResult) => {\n          finishItem();\n          return promiseResult;\n        }, (err) => {\n          finishItem();\n          if (wantResult) {\n            throw err;\n          }\n        });\n        if (wantResult) {\n          return result;\n        }\n      } else {\n        finishItem();\n        if (wantResult) {\n          return result;\n        }\n      }\n    } catch (err) {\n      finishItem();\n      if (wantResult) {\n        throw err;\n      }\n    }\n  }\n  addReporter(reporter) {\n    reporter.setLogger(this);\n    this.reporters.push(reporter);\n  }\n  getOpenRootItems() {\n    return this._openItems;\n  }\n  forceFinish() {\n    for (const openItem of this._openItems) {\n      openItem.forceFinish();\n      try {\n        this._persistItem(openItem, new LogFilter(), true);\n      } catch (err) {\n        console.error(\"Could not serialize log item\", err);\n      }\n    }\n    this._openItems.clear();\n  }\n  _removeItemFromOpenList(item) {\n    this._openItems.delete(item);\n  }\n  _persistItem(item, filter, forced) {\n    for (var i = 0; i < this.reporters.length; i += 1) {\n      this.reporters[i].reportItem(item, filter, forced);\n    }\n  }\n  get level() {\n    return LogLevel;\n  }\n  _now() {\n    return this._platform.clock.now();\n  }\n  _createRefId() {\n    return Math.round(this._platform.random() * Number.MAX_SAFE_INTEGER);\n  }\n}\nclass DeferredPersistRootLogItem extends LogItem {\n  finish() {\n    super.finish();\n    this._logger._persistItem(this, void 0, false);\n    this._logger._removeItemFromOpenList(this);\n  }\n  forceFinish() {\n    super.finish();\n  }\n}\nvar StoreNames = /* @__PURE__ */ ((StoreNames2) => {\n  StoreNames2[\"session\"] = \"session\";\n  StoreNames2[\"roomState\"] = \"roomState\";\n  StoreNames2[\"roomSummary\"] = \"roomSummary\";\n  StoreNames2[\"archivedRoomSummary\"] = \"archivedRoomSummary\";\n  StoreNames2[\"invites\"] = \"invites\";\n  StoreNames2[\"roomMembers\"] = \"roomMembers\";\n  StoreNames2[\"timelineEvents\"] = \"timelineEvents\";\n  StoreNames2[\"timelineRelations\"] = \"timelineRelations\";\n  StoreNames2[\"timelineFragments\"] = \"timelineFragments\";\n  StoreNames2[\"pendingEvents\"] = \"pendingEvents\";\n  StoreNames2[\"userIdentities\"] = \"userIdentities\";\n  StoreNames2[\"deviceKeys\"] = \"deviceKeys\";\n  StoreNames2[\"olmSessions\"] = \"olmSessions\";\n  StoreNames2[\"inboundGroupSessions\"] = \"inboundGroupSessions\";\n  StoreNames2[\"outboundGroupSessions\"] = \"outboundGroupSessions\";\n  StoreNames2[\"groupSessionDecryptions\"] = \"groupSessionDecryptions\";\n  StoreNames2[\"operations\"] = \"operations\";\n  StoreNames2[\"accountData\"] = \"accountData\";\n  StoreNames2[\"calls\"] = \"calls\";\n  StoreNames2[\"crossSigningKeys\"] = \"crossSigningKeys\";\n  return StoreNames2;\n})(StoreNames || {});\nconst STORE_NAMES = Object.values(StoreNames);\nclass StorageError extends Error {\n  constructor(message, cause = null) {\n    super(message);\n    if (cause) {\n      this.errcode = cause.name;\n    }\n    this.cause = cause;\n  }\n  get name() {\n    return \"StorageError\";\n  }\n}\nconst KeyLimits = {\n  get minStorageKey() {\n    return 0;\n  },\n  get middleStorageKey() {\n    return 2147483647;\n  },\n  get maxStorageKey() {\n    return 4294967295;\n  }\n};\nfunction _sourceName(source) {\n  return \"objectStore\" in source ? `${source.objectStore.name}.${source.name}` : source.name;\n}\nfunction _sourceDatabase(source) {\n  var _a, _b, _c2, _d2, _e;\n  return \"objectStore\" in source ? (_c2 = (_b = (_a = source.objectStore) == null ? void 0 : _a.transaction) == null ? void 0 : _b.db) == null ? void 0 : _c2.name : (_e = (_d2 = source.transaction) == null ? void 0 : _d2.db) == null ? void 0 : _e.name;\n}\nclass IDBError extends StorageError {\n  constructor(message, sourceOrCursor, cause = null) {\n    const source = sourceOrCursor && \"source\" in sourceOrCursor ? sourceOrCursor.source : sourceOrCursor;\n    const storeName = source ? _sourceName(source) : \"\";\n    const databaseName = source ? _sourceDatabase(source) : \"\";\n    let fullMessage = `${message} on ${databaseName}.${storeName}`;\n    if (cause) {\n      fullMessage += \": \";\n      if (typeof cause.name === \"string\") {\n        fullMessage += `(name: ${cause.name}) `;\n      }\n      if (typeof cause.code === \"number\") {\n        fullMessage += `(code: ${cause.code}) `;\n      }\n    }\n    if (cause) {\n      fullMessage += cause.message;\n    }\n    super(fullMessage, cause);\n    this.storeName = storeName;\n    this.databaseName = databaseName;\n  }\n}\nclass IDBRequestError extends IDBError {\n  constructor(errorEvent) {\n    const request = errorEvent.target;\n    const source = request.source;\n    const cause = request.error;\n    super(\"IDBRequest failed\", source, cause);\n    this.errorEvent = errorEvent;\n  }\n  preventTransactionAbort() {\n    this.errorEvent.preventDefault();\n  }\n}\nclass IDBRequestAttemptError extends IDBError {\n  constructor(method, source, cause, params) {\n    super(`${method}(${params.map((p) => JSON.stringify(p)).join(\", \")}) failed`, source, cause);\n  }\n}\nclass AbortError extends Error {\n  get name() {\n    return \"AbortError\";\n  }\n}\nconst DONE = { done: true };\nconst NOT_DONE = { done: false };\nfunction encodeUint32(n) {\n  const hex = n.toString(16);\n  return \"0\".repeat(8 - hex.length) + hex;\n}\nfunction decodeUint32(str) {\n  return parseInt(str, 16);\n}\nfunction openDatabase(name, createObjectStore, version, idbFactory = window.indexedDB) {\n  const req = idbFactory.open(name, version);\n  req.onupgradeneeded = async (ev) => {\n    const req2 = ev.target;\n    const db = req2.result;\n    const txn = req2.transaction;\n    const oldVersion = ev.oldVersion;\n    try {\n      await createObjectStore(db, txn, oldVersion, version);\n    } catch (err) {\n      try {\n        txn.abort();\n      } catch (err2) {\n      }\n    }\n  };\n  return reqAsPromise(req);\n}\nfunction reqAsPromise(req) {\n  return new Promise((resolve, reject) => {\n    req.addEventListener(\"success\", (event2) => {\n      resolve(event2.target.result);\n    });\n    req.addEventListener(\"error\", (event2) => {\n      const error = new IDBRequestError(event2);\n      reject(error);\n    });\n  });\n}\nfunction txnAsPromise(txn) {\n  return new Promise((resolve, reject) => {\n    txn.addEventListener(\"complete\", () => {\n      resolve();\n    });\n    txn.addEventListener(\"abort\", (event2) => {\n      reject(new AbortError());\n    });\n  });\n}\nfunction iterateCursor(cursorRequest, processValue) {\n  return new Promise((resolve, reject) => {\n    cursorRequest.onerror = (event2) => {\n      reject(new IDBRequestError(event2));\n    };\n    cursorRequest.onsuccess = (event2) => {\n      const cursor = event2.target.result;\n      if (!cursor) {\n        resolve(false);\n        return;\n      }\n      const result = processValue(cursor[\"value\"], cursor.key, cursor);\n      const done = result == null ? void 0 : result.done;\n      const jumpTo = result == null ? void 0 : result.jumpTo;\n      if (done) {\n        resolve(true);\n      } else if (jumpTo) {\n        cursor.continue(jumpTo);\n      } else {\n        cursor.continue();\n      }\n    };\n  }).catch((err) => {\n    throw new StorageError(\"iterateCursor failed\", err);\n  });\n}\nasync function fetchResults(cursor, isDone) {\n  const results = [];\n  await iterateCursor(cursor, (value) => {\n    results.push(value);\n    return { done: isDone(results) };\n  });\n  return results;\n}\nclass IDBLogPersister {\n  constructor(options) {\n    var _a;\n    this.options = options;\n    this._queuedItems = this._loadQueuedItems();\n    window.addEventListener(\"pagehide\", this, false);\n    this._flushInterval = this.options.platform.clock.createInterval(() => this._tryFlush(), (_a = this.options.flushInterval) != null ? _a : 60 * 1e3);\n  }\n  setLogger(logger) {\n    this.logger = logger;\n  }\n  reportItem(logItem, filter, forced) {\n    const queuedItem = this.prepareItemForQueue(logItem, filter, forced);\n    if (queuedItem) {\n      this._queuedItems.push(queuedItem);\n    }\n  }\n  async export() {\n    const db = await this._openDB();\n    try {\n      const txn = db.transaction([\"logs\"], \"readonly\");\n      const logs = txn.objectStore(\"logs\");\n      const storedItems = await fetchResults(logs.openCursor(), () => false);\n      const openItems = this.getSerializedOpenItems();\n      const allItems = storedItems.concat(this._queuedItems).concat(openItems);\n      return new IDBLogExport(allItems, this, this.options.platform);\n    } finally {\n      try {\n        db.close();\n      } catch (e) {\n      }\n    }\n  }\n  dispose() {\n    window.removeEventListener(\"pagehide\", this, false);\n    this._flushInterval.dispose();\n  }\n  handleEvent(evt) {\n    if (evt.type === \"pagehide\") {\n      this._finishAllAndFlush();\n    }\n  }\n  async _tryFlush() {\n    var _a;\n    const db = await this._openDB();\n    try {\n      const txn = db.transaction([\"logs\"], \"readwrite\");\n      const logs = txn.objectStore(\"logs\");\n      const amount = this._queuedItems.length;\n      for (const i of this._queuedItems) {\n        logs.add(i);\n      }\n      const itemCount = await reqAsPromise(logs.count());\n      const limit = (_a = this.options.limit) != null ? _a : 3e3;\n      if (itemCount > limit) {\n        let deleteAmount = itemCount - limit + Math.round(0.1 * limit);\n        await iterateCursor(logs.openCursor(), (_, __, cursor) => {\n          cursor.delete();\n          deleteAmount -= 1;\n          return { done: deleteAmount === 0 };\n        });\n      }\n      await txnAsPromise(txn);\n      this._queuedItems.splice(0, amount);\n    } catch (err) {\n      console.error(\"Could not flush logs\", err);\n    } finally {\n      try {\n        db.close();\n      } catch (e) {\n      }\n    }\n  }\n  _finishAllAndFlush() {\n    if (this.logger) {\n      this.logger.log({ l: \"pagehide, closing logs\", t: \"navigation\" });\n      this.logger.forceFinish();\n    }\n    this._persistQueuedItems(this._queuedItems);\n  }\n  _loadQueuedItems() {\n    const key = `${this.options.name}_queuedItems`;\n    try {\n      const json = window.localStorage.getItem(key);\n      if (json) {\n        window.localStorage.removeItem(key);\n        return JSON.parse(json);\n      }\n    } catch (err) {\n      console.error(\"Could not load queued log items\", err);\n    }\n    return [];\n  }\n  _openDB() {\n    return openDatabase(this.options.name, (db) => db.createObjectStore(\"logs\", { keyPath: \"id\", autoIncrement: true }), 1);\n  }\n  prepareItemForQueue(logItem, filter, forced) {\n    let serializedItem = logItem.serialize(filter, void 0, forced);\n    if (serializedItem) {\n      if (this.options.serializedTransformer) {\n        serializedItem = this.options.serializedTransformer(serializedItem);\n      }\n      return {\n        json: JSON.stringify(serializedItem)\n      };\n    }\n  }\n  _persistQueuedItems(items) {\n    try {\n      window.localStorage.setItem(`${this.options.name}_queuedItems`, JSON.stringify(items));\n    } catch (e) {\n      console.error(\"Could not persist queued log items in localStorage, they will likely be lost\", e);\n    }\n  }\n  async removeItems(items) {\n    const db = await this._openDB();\n    try {\n      const txn = db.transaction([\"logs\"], \"readwrite\");\n      const logs = txn.objectStore(\"logs\");\n      for (const item of items) {\n        if (typeof item.id === \"number\") {\n          logs.delete(item.id);\n        } else {\n          const queuedIdx = this._queuedItems.indexOf(item);\n          if (queuedIdx === -1) {\n            this._queuedItems.splice(queuedIdx, 1);\n          }\n        }\n      }\n      await txnAsPromise(txn);\n    } finally {\n      try {\n        db.close();\n      } catch (e) {\n      }\n    }\n  }\n  getSerializedOpenItems() {\n    const openItems = [];\n    if (!this.logger) {\n      return openItems;\n    }\n    const filter = new LogFilter();\n    for (const item of this.logger.getOpenRootItems()) {\n      const openItem = this.prepareItemForQueue(item, filter, false);\n      if (openItem) {\n        openItems.push(openItem);\n      }\n    }\n    return openItems;\n  }\n}\nclass IDBLogExport {\n  constructor(items, logger, platform) {\n    this._items = items;\n    this._logger = logger;\n    this._platform = platform;\n  }\n  get count() {\n    return this._items.length;\n  }\n  removeFromStore() {\n    return this._logger.removeItems(this._items);\n  }\n  asBlob() {\n    const json = this.toJSON();\n    const buffer = this._platform.encoding.utf8.encode(json);\n    const blob = this._platform.createBlob(buffer, \"application/json\");\n    return blob;\n  }\n  toJSON() {\n    var _a;\n    const log = {\n      formatVersion: 1,\n      appVersion: (_a = this._platform.updateService) == null ? void 0 : _a.version,\n      platform: this._platform.description,\n      items: this._items.map((i) => JSON.parse(i.json))\n    };\n    const json = JSON.stringify(log);\n    return json;\n  }\n}\nclass ConsoleReporter {\n  reportItem(item) {\n    printToConsole(item);\n  }\n  setLogger(logger) {\n    this.logger = logger;\n  }\n  printOpenItems() {\n    if (!this.logger) {\n      return;\n    }\n    for (const item of this.logger.getOpenRootItems()) {\n      this.reportItem(item);\n    }\n  }\n}\nconst excludedKeysFromTable = [\"l\", \"id\"];\nfunction filterValues(values) {\n  return Object.entries(values).filter(([key]) => !excludedKeysFromTable.includes(key)).reduce((obj, [key, value]) => {\n    obj = obj || {};\n    obj[key] = value;\n    return obj;\n  }, null);\n}\nfunction hasChildWithError(item) {\n  if (item.error) {\n    return true;\n  }\n  if (item.children) {\n    for (const c of item.children) {\n      if (hasChildWithError(c)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction printToConsole(item) {\n  const label = `${itemCaption(item)} (@${item.start}ms, duration: ${item.duration}ms)`;\n  const filteredValues = filterValues(item.values);\n  const shouldGroup = item.children || filteredValues;\n  if (shouldGroup) {\n    if (hasChildWithError(item)) {\n      console.group(label);\n    } else {\n      console.groupCollapsed(label);\n    }\n    if (item.error) {\n      console.error(item.error);\n    }\n  } else {\n    if (item.error) {\n      console.error(item.error);\n    } else {\n      console.log(label);\n    }\n  }\n  if (filteredValues) {\n    console.table(filteredValues);\n  }\n  if (item.children) {\n    for (const c of item.children) {\n      printToConsole(c);\n    }\n  }\n  if (shouldGroup) {\n    console.groupEnd();\n  }\n}\nfunction itemCaption(item) {\n  if (item.values.t === \"network\") {\n    return `${item.values.method} ${item.values.url}`;\n  } else if (item.values.l && typeof item.values.id !== \"undefined\") {\n    return `${item.values.l} ${item.values.id}`;\n  } else if (item.values.l && typeof item.values.status !== \"undefined\") {\n    return `${item.values.l} (${item.values.status})`;\n  } else if (item.values.l && typeof item.values.type !== \"undefined\") {\n    return `${item.values.l} (${item.values.type})`;\n  } else if (item.values.l && item.error) {\n    return `${item.values.l} failed`;\n  } else if (typeof item.values.ref !== \"undefined\") {\n    return `ref ${item.values.ref}`;\n  } else {\n    return item.values.l || item.values.type;\n  }\n}\nclass WrappedError extends Error {\n  constructor(message, cause) {\n    super(`${message}: ${cause.message}`);\n    this.cause = cause;\n  }\n  get name() {\n    return \"WrappedError\";\n  }\n}\nclass HomeServerError extends Error {\n  constructor(method, url, body, status) {\n    super(`${body ? body.error : status} on ${method} ${url}`);\n    this.errcode = body ? body.errcode : null;\n    this.retry_after_ms = body ? body.retry_after_ms : 0;\n    this.statusCode = status;\n  }\n  get name() {\n    return \"HomeServerError\";\n  }\n}\nclass ConnectionError extends Error {\n  constructor(message, isTimeout) {\n    super(message || \"ConnectionError\");\n    this.isTimeout = isTimeout;\n  }\n  get name() {\n    return \"ConnectionError\";\n  }\n}\nclass BaseObservable {\n  constructor() {\n    this._handlers = /* @__PURE__ */ new Set();\n  }\n  onSubscribeFirst() {\n  }\n  onUnsubscribeLast() {\n  }\n  subscribe(handler) {\n    this._handlers.add(handler);\n    if (this._handlers.size === 1) {\n      this.onSubscribeFirst();\n    }\n    return () => {\n      return this.unsubscribe(handler);\n    };\n  }\n  unsubscribe(handler) {\n    if (handler) {\n      this._handlers.delete(handler);\n      if (this._handlers.size === 0) {\n        this.onUnsubscribeLast();\n      }\n    }\n    return void 0;\n  }\n  unsubscribeAll() {\n    if (this._handlers.size !== 0) {\n      this._handlers.clear();\n      this.onUnsubscribeLast();\n    }\n  }\n  get hasSubscriptions() {\n    return this._handlers.size !== 0;\n  }\n}\nclass BaseObservableValue$1 extends BaseObservable {\n  emit(argument) {\n    for (const h of this._handlers) {\n      h(argument);\n    }\n  }\n  waitFor(predicate) {\n    if (predicate(this.get())) {\n      return new ResolvedWaitForHandle$1(Promise.resolve(this.get()));\n    } else {\n      return new WaitForHandle$1(this, predicate);\n    }\n  }\n  flatMap(mapper) {\n    return new FlatMapObservableValue$1(this, mapper);\n  }\n}\nclass WaitForHandle$1 {\n  constructor(observable, predicate) {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._subscription = observable.subscribe((v) => {\n        if (predicate(v)) {\n          this._reject = null;\n          resolve(v);\n          this.dispose();\n        }\n      });\n    });\n  }\n  get promise() {\n    return this._promise;\n  }\n  dispose() {\n    if (this._subscription) {\n      this._subscription();\n      this._subscription = null;\n    }\n    if (this._reject) {\n      this._reject(new AbortError());\n      this._reject = null;\n    }\n  }\n}\nclass ResolvedWaitForHandle$1 {\n  constructor(promise) {\n    this.promise = promise;\n  }\n  dispose() {\n  }\n}\nclass EventObservableValue extends BaseObservableValue$1 {\n  constructor(value, eventName) {\n    super();\n    this.value = value;\n    this.eventName = eventName;\n  }\n  onSubscribeFirst() {\n    this.eventSubscription = this.value.disposableOn(this.eventName, () => {\n      this.emit(this.value);\n    });\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    this.eventSubscription();\n    super.onUnsubscribeLast();\n  }\n  get() {\n    return this.value;\n  }\n}\nclass ObservableValue$1 extends BaseObservableValue$1 {\n  constructor(initialValue) {\n    super();\n    this._value = initialValue;\n  }\n  get() {\n    return this._value;\n  }\n  set(value) {\n    if (value !== this._value) {\n      this._value = value;\n      this.emit(this._value);\n    }\n  }\n}\nclass FlatMapObservableValue$1 extends BaseObservableValue$1 {\n  constructor(source, mapper) {\n    super();\n    this.source = source;\n    this.mapper = mapper;\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this.sourceSubscription = this.sourceSubscription();\n    if (this.targetSubscription) {\n      this.targetSubscription = this.targetSubscription();\n    }\n  }\n  onSubscribeFirst() {\n    super.onSubscribeFirst();\n    this.sourceSubscription = this.source.subscribe(() => {\n      this.updateTargetSubscription();\n      this.emit(this.get());\n    });\n    this.updateTargetSubscription();\n  }\n  updateTargetSubscription() {\n    const sourceValue = this.source.get();\n    if (sourceValue) {\n      const target = this.mapper(sourceValue);\n      if (target) {\n        if (!this.targetSubscription) {\n          this.targetSubscription = target.subscribe(() => this.emit(this.get()));\n        }\n        return;\n      }\n    }\n    if (this.targetSubscription) {\n      this.targetSubscription = this.targetSubscription();\n    }\n  }\n  get() {\n    const sourceValue = this.source.get();\n    if (!sourceValue) {\n      return void 0;\n    }\n    const mapped = this.mapper(sourceValue);\n    return mapped == null ? void 0 : mapped.get();\n  }\n}\nfunction pickLowestKey(currentKey, newKey) {\n  return newKey < currentKey;\n}\nclass PickMapObservableValue extends BaseObservableValue$1 {\n  constructor(map, pickKey = pickLowestKey) {\n    super();\n    this.map = map;\n    this.pickKey = pickKey;\n  }\n  updateKey(newKey) {\n    if (this.key === void 0 || this.pickKey(this.key, newKey)) {\n      this.key = newKey;\n      return true;\n    }\n    return false;\n  }\n  onReset() {\n    this.key = void 0;\n    this.emit(this.get());\n  }\n  onAdd(key, value) {\n    if (this.updateKey(key)) {\n      this.emit(this.get());\n    }\n  }\n  onUpdate(key, value, params) {\n    this.emit(this.get());\n  }\n  onRemove(key, value) {\n    if (key === this.key) {\n      this.key = void 0;\n      for (const [key2] of this.map) {\n        this.updateKey(key2);\n      }\n      this.emit(this.get());\n    }\n  }\n  onSubscribeFirst() {\n    this.mapSubscription = this.map.subscribe(this);\n    for (const [key] of this.map) {\n      this.updateKey(key);\n    }\n  }\n  onUnsubscribeLast() {\n    this.mapSubscription();\n    this.key = void 0;\n  }\n  get() {\n    if (this.key !== void 0) {\n      return this.map.get(this.key);\n    }\n    return void 0;\n  }\n}\nclass RetainedObservableValue extends ObservableValue$1 {\n  constructor(initialValue, freeCallback, startCallback = () => {\n  }) {\n    super(initialValue);\n    this.freeCallback = freeCallback;\n    this.startCallback = startCallback;\n  }\n  onSubscribeFirst() {\n    this.startCallback();\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this.freeCallback();\n  }\n}\nclass BaseObservableList extends BaseObservable {\n  emitReset() {\n    for (let h of this._handlers) {\n      h.onReset(this);\n    }\n  }\n  emitAdd(index, value) {\n    for (let h of this._handlers) {\n      h.onAdd(index, value, this);\n    }\n  }\n  emitUpdate(index, value, params) {\n    for (let h of this._handlers) {\n      h.onUpdate(index, value, params, this);\n    }\n  }\n  emitRemove(index, value) {\n    for (let h of this._handlers) {\n      h.onRemove(index, value, this);\n    }\n  }\n  emitMove(fromIdx, toIdx, value) {\n    for (let h of this._handlers) {\n      h.onMove(fromIdx, toIdx, value, this);\n    }\n  }\n}\n/**\n * @license\n * Based off baseSortedIndex function in Lodash <https://lodash.com/>\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nfunction sortedIndex(array, value, comparator) {\n  let low = 0;\n  let high = array.length;\n  while (low < high) {\n    let mid = low + high >>> 1;\n    let cmpResult = comparator(value, array[mid]);\n    if (cmpResult > 0) {\n      low = mid + 1;\n    } else if (cmpResult < 0) {\n      high = mid;\n    } else {\n      low = high = mid;\n    }\n  }\n  return high;\n}\nclass ObservableArray extends BaseObservableList {\n  constructor(initialValues = []) {\n    super();\n    this._items = initialValues;\n  }\n  append(item) {\n    this._items.push(item);\n    this.emitAdd(this._items.length - 1, item);\n  }\n  remove(idx) {\n    const [item] = this._items.splice(idx, 1);\n    this.emitRemove(idx, item);\n  }\n  insertMany(idx, items) {\n    for (let item of items) {\n      this.insert(idx, item);\n      idx += 1;\n    }\n  }\n  insert(idx, item) {\n    this._items.splice(idx, 0, item);\n    this.emitAdd(idx, item);\n  }\n  move(fromIdx, toIdx) {\n    if (fromIdx < this._items.length && toIdx < this._items.length) {\n      const [item] = this._items.splice(fromIdx, 1);\n      this._items.splice(toIdx, 0, item);\n      this.emitMove(fromIdx, toIdx, item);\n    }\n  }\n  update(idx, item, params = null) {\n    if (idx < this._items.length) {\n      this._items[idx] = item;\n      this.emitUpdate(idx, item, params);\n    }\n  }\n  get array() {\n    return this._items;\n  }\n  at(idx) {\n    if (this._items && idx >= 0 && idx < this._items.length) {\n      return this._items[idx];\n    }\n  }\n  get length() {\n    return this._items.length;\n  }\n  [Symbol.iterator]() {\n    return this._items.values();\n  }\n}\nfunction findAndUpdateInArray(predicate, array, observable, updater) {\n  const index = array.findIndex(predicate);\n  if (index !== -1) {\n    const value = array[index];\n    const params = updater(value);\n    if (params !== false) {\n      observable.emitUpdate(index, value, params);\n    }\n    return true;\n  }\n  return false;\n}\nclass SortedArray extends BaseObservableList {\n  constructor(comparator) {\n    super();\n    this._items = [];\n    this._comparator = comparator;\n  }\n  setManyUnsorted(items) {\n    this.setManySorted(items);\n  }\n  setManySorted(items) {\n    for (let item of items) {\n      this.set(item);\n    }\n  }\n  findAndUpdate(predicate, updater) {\n    return findAndUpdateInArray(predicate, this._items, this, updater);\n  }\n  getAndUpdate(item, updater, updateParams = null) {\n    const idx = this.indexOf(item);\n    if (idx !== -1) {\n      const existingItem = this._items[idx];\n      const newItem = updater(existingItem, item);\n      this._items[idx] = newItem;\n      this.emitUpdate(idx, newItem, updateParams);\n    }\n  }\n  update(item, updateParams = null) {\n    const idx = this.indexOf(item);\n    if (idx !== -1) {\n      this._items[idx] = item;\n      this.emitUpdate(idx, item, updateParams);\n    }\n  }\n  indexOf(item) {\n    const idx = sortedIndex(this._items, item, this._comparator);\n    if (idx < this._items.length && this._comparator(this._items[idx], item) === 0) {\n      return idx;\n    } else {\n      return -1;\n    }\n  }\n  _getNext(item) {\n    let idx = sortedIndex(this._items, item, this._comparator);\n    while (idx < this._items.length && this._comparator(this._items[idx], item) <= 0) {\n      idx += 1;\n    }\n    return this.get(idx);\n  }\n  set(item, updateParams = null) {\n    const idx = sortedIndex(this._items, item, this._comparator);\n    if (idx >= this._items.length || this._comparator(this._items[idx], item) !== 0) {\n      this._items.splice(idx, 0, item);\n      this.emitAdd(idx, item);\n    } else {\n      this._items[idx] = item;\n      this.emitUpdate(idx, item, updateParams);\n    }\n  }\n  get(idx) {\n    return this._items[idx];\n  }\n  remove(idx) {\n    const item = this._items[idx];\n    this._items.splice(idx, 1);\n    this.emitRemove(idx, item);\n  }\n  get array() {\n    return this._items;\n  }\n  get length() {\n    return this._items.length;\n  }\n  [Symbol.iterator]() {\n    return new Iterator(this);\n  }\n}\nclass Iterator {\n  constructor(sortedArray) {\n    this._consumed = false;\n    this._sortedArray = sortedArray;\n    this._current = null;\n  }\n  next() {\n    if (this._consumed) {\n      return { value: void 0, done: true };\n    }\n    this._current = this._current ? this._sortedArray._getNext(this._current) : this._sortedArray.get(0);\n    if (!this._current) {\n      this._consumed = true;\n    }\n    return { value: this._current, done: this._consumed };\n  }\n}\nclass BaseMappedList extends BaseObservableList {\n  constructor(sourceList, mapper, updater, removeCallback) {\n    super();\n    this._sourceUnsubscribe = null;\n    this._mappedValues = null;\n    this._sourceList = sourceList;\n    this._mapper = mapper;\n    this._updater = updater;\n    this._removeCallback = removeCallback;\n  }\n  findAndUpdate(predicate, updater) {\n    return findAndUpdateInArray(predicate, this._mappedValues, this, updater);\n  }\n  get length() {\n    return this._mappedValues.length;\n  }\n  [Symbol.iterator]() {\n    return this._mappedValues.values();\n  }\n}\nfunction runAdd(list, index, mappedValue) {\n  list._mappedValues.splice(index, 0, mappedValue);\n  list.emitAdd(index, mappedValue);\n}\nfunction runUpdate(list, index, value, params) {\n  const mappedValue = list._mappedValues[index];\n  if (list._updater) {\n    list._updater(mappedValue, params, value);\n  }\n  list.emitUpdate(index, mappedValue, params);\n}\nfunction runRemove(list, index) {\n  const mappedValue = list._mappedValues[index];\n  list._mappedValues.splice(index, 1);\n  if (list._removeCallback) {\n    list._removeCallback(mappedValue);\n  }\n  list.emitRemove(index, mappedValue);\n}\nfunction runMove(list, fromIdx, toIdx) {\n  const mappedValue = list._mappedValues[fromIdx];\n  list._mappedValues.splice(fromIdx, 1);\n  list._mappedValues.splice(toIdx, 0, mappedValue);\n  list.emitMove(fromIdx, toIdx, mappedValue);\n}\nfunction runReset(list) {\n  list._mappedValues = [];\n  list.emitReset();\n}\nclass MappedList extends BaseMappedList {\n  onSubscribeFirst() {\n    this._sourceUnsubscribe = this._sourceList.subscribe(this);\n    this._mappedValues = [];\n    for (const item of this._sourceList) {\n      this._mappedValues.push(this._mapper(item));\n    }\n  }\n  onReset() {\n    runReset(this);\n  }\n  onAdd(index, value) {\n    const mappedValue = this._mapper(value);\n    runAdd(this, index, mappedValue);\n  }\n  onUpdate(index, value, params) {\n    if (!this._mappedValues) {\n      return;\n    }\n    runUpdate(this, index, value, params);\n  }\n  onRemove(index) {\n    runRemove(this, index);\n  }\n  onMove(fromIdx, toIdx) {\n    runMove(this, fromIdx, toIdx);\n  }\n  onUnsubscribeLast() {\n    this._sourceUnsubscribe();\n  }\n}\nclass AsyncMappedList extends BaseMappedList {\n  constructor() {\n    super(...arguments);\n    this._eventQueue = null;\n    this._flushing = false;\n  }\n  onSubscribeFirst() {\n    this._sourceUnsubscribe = this._sourceList.subscribe(this);\n    this._eventQueue = [];\n    this._mappedValues = [];\n    let idx = 0;\n    for (const item of this._sourceList) {\n      this._eventQueue.push(new AddEvent(idx, item));\n      idx += 1;\n    }\n    void this._flush();\n  }\n  async _flush() {\n    if (this._flushing) {\n      return;\n    }\n    this._flushing = true;\n    try {\n      while (this._eventQueue.length) {\n        const event2 = this._eventQueue.shift();\n        await event2.run(this);\n      }\n    } finally {\n      this._flushing = false;\n    }\n  }\n  onReset() {\n    if (this._eventQueue) {\n      this._eventQueue.push(new ResetEvent());\n      void this._flush();\n    }\n  }\n  onAdd(index, value) {\n    if (this._eventQueue) {\n      this._eventQueue.push(new AddEvent(index, value));\n      void this._flush();\n    }\n  }\n  onUpdate(index, value, params) {\n    if (this._eventQueue) {\n      this._eventQueue.push(new UpdateEvent(index, value, params));\n      void this._flush();\n    }\n  }\n  onRemove(index) {\n    if (this._eventQueue) {\n      this._eventQueue.push(new RemoveEvent(index));\n      void this._flush();\n    }\n  }\n  onMove(fromIdx, toIdx) {\n    if (this._eventQueue) {\n      this._eventQueue.push(new MoveEvent(fromIdx, toIdx));\n      void this._flush();\n    }\n  }\n  onUnsubscribeLast() {\n    this._sourceUnsubscribe();\n    this._eventQueue = null;\n    this._mappedValues = null;\n  }\n}\nclass AddEvent {\n  constructor(index, value) {\n    this.index = index;\n    this.value = value;\n  }\n  async run(list) {\n    const mappedValue = await list._mapper(this.value);\n    runAdd(list, this.index, mappedValue);\n  }\n}\nclass UpdateEvent {\n  constructor(index, value, params) {\n    this.index = index;\n    this.value = value;\n    this.params = params;\n  }\n  async run(list) {\n    runUpdate(list, this.index, this.value, this.params);\n  }\n}\nclass RemoveEvent {\n  constructor(index) {\n    this.index = index;\n  }\n  async run(list) {\n    runRemove(list, this.index);\n  }\n}\nclass MoveEvent {\n  constructor(fromIdx, toIdx) {\n    this.fromIdx = fromIdx;\n    this.toIdx = toIdx;\n  }\n  async run(list) {\n    runMove(list, this.fromIdx, this.toIdx);\n  }\n}\nclass ResetEvent {\n  async run(list) {\n    runReset(list);\n  }\n}\nclass ConcatList extends BaseObservableList {\n  constructor(...sourceLists) {\n    super();\n    this._sourceUnsubscribes = null;\n    this._sourceLists = sourceLists;\n  }\n  _offsetForSource(sourceList) {\n    const listIdx = this._sourceLists.indexOf(sourceList);\n    let offset = 0;\n    for (let i = 0; i < listIdx; ++i) {\n      offset += this._sourceLists[i].length;\n    }\n    return offset;\n  }\n  onSubscribeFirst() {\n    this._sourceUnsubscribes = this._sourceLists.map((sourceList) => sourceList.subscribe(this));\n  }\n  onUnsubscribeLast() {\n    for (const sourceUnsubscribe of this._sourceUnsubscribes) {\n      sourceUnsubscribe();\n    }\n  }\n  onReset() {\n    this.emitReset();\n    let idx = 0;\n    for (const item of this) {\n      this.emitAdd(idx, item);\n      idx += 1;\n    }\n  }\n  onAdd(index, value, sourceList) {\n    this.emitAdd(this._offsetForSource(sourceList) + index, value);\n  }\n  onUpdate(index, value, params, sourceList) {\n    if (!this._sourceUnsubscribes) {\n      return;\n    }\n    this.emitUpdate(this._offsetForSource(sourceList) + index, value, params);\n  }\n  onRemove(index, value, sourceList) {\n    this.emitRemove(this._offsetForSource(sourceList) + index, value);\n  }\n  onMove(fromIdx, toIdx, value, sourceList) {\n    const offset = this._offsetForSource(sourceList);\n    this.emitMove(offset + fromIdx, offset + toIdx, value);\n  }\n  get length() {\n    let len = 0;\n    for (let i = 0; i < this._sourceLists.length; ++i) {\n      len += this._sourceLists[i].length;\n    }\n    return len;\n  }\n  [Symbol.iterator]() {\n    let sourceListIdx = 0;\n    let it = this._sourceLists[0][Symbol.iterator]();\n    return {\n      next: () => {\n        let result = it.next();\n        while (result.done) {\n          sourceListIdx += 1;\n          if (sourceListIdx >= this._sourceLists.length) {\n            return result;\n          }\n          it = this._sourceLists[sourceListIdx][Symbol.iterator]();\n          result = it.next();\n        }\n        return result;\n      }\n    };\n  }\n}\nclass SortedMapList extends BaseObservableList {\n  constructor(sourceMap, comparator) {\n    super();\n    this._sourceMap = sourceMap;\n    this._comparator = (a, b) => comparator(a.value, b.value);\n    this._sortedPairs = null;\n    this._mapSubscription = null;\n  }\n  onAdd(key, value) {\n    const pair = { key, value };\n    const idx = sortedIndex(this._sortedPairs, pair, this._comparator);\n    this._sortedPairs.splice(idx, 0, pair);\n    this.emitAdd(idx, value);\n  }\n  onRemove(key, value) {\n    const pair = { key, value };\n    const idx = sortedIndex(this._sortedPairs, pair, this._comparator);\n    this._sortedPairs.splice(idx, 1);\n    this.emitRemove(idx, value);\n  }\n  onUpdate(key, value, params) {\n    if (!this._sortedPairs) {\n      return;\n    }\n    const oldIdx = this._sortedPairs.findIndex((p) => p.key === key);\n    this._sortedPairs.splice(oldIdx, 1);\n    const pair = { key, value };\n    const newIdx = sortedIndex(this._sortedPairs, pair, this._comparator);\n    this._sortedPairs.splice(newIdx, 0, pair);\n    if (oldIdx !== newIdx) {\n      this.emitMove(oldIdx, newIdx, value);\n    }\n    this.emitUpdate(newIdx, value, params);\n  }\n  onReset() {\n    this._sortedPairs = [];\n    this.emitReset();\n  }\n  onSubscribeFirst() {\n    this._mapSubscription = this._sourceMap.subscribe(this);\n    this._sortedPairs = new Array(this._sourceMap.size);\n    let i = 0;\n    for (let [key, value] of this._sourceMap) {\n      this._sortedPairs[i] = { key, value };\n      ++i;\n    }\n    this._sortedPairs.sort(this._comparator);\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this._sortedPairs = null;\n    this._mapSubscription = this._mapSubscription();\n  }\n  get(index) {\n    return this._sortedPairs[index].value;\n  }\n  get length() {\n    return this._sourceMap.size;\n  }\n  [Symbol.iterator]() {\n    const it = this._sortedPairs.values();\n    return {\n      next() {\n        const v = it.next();\n        if (v.value) {\n          v.value = v.value.value;\n        }\n        return v;\n      }\n    };\n  }\n}\nclass BaseObservableMap extends BaseObservable {\n  constructor() {\n    super();\n  }\n  emitReset() {\n    for (let h of this._handlers) {\n      h.onReset();\n    }\n  }\n  emitAdd(key, value) {\n    for (let h of this._handlers) {\n      h.onAdd(key, value);\n    }\n  }\n  emitUpdate(key, value, params) {\n    for (let h of this._handlers) {\n      h.onUpdate(key, value, params);\n    }\n  }\n  emitRemove(key, value) {\n    for (let h of this._handlers) {\n      h.onRemove(key, value);\n    }\n  }\n  join(...otherMaps) {\n    return new JoinedMap([this].concat(otherMaps));\n  }\n  mapValues(mapper, updater) {\n    return new MappedMap(this, mapper, updater);\n  }\n  sortValues(comparator) {\n    return new SortedMapList(this, comparator);\n  }\n  filterValues(filter) {\n    return new FilteredMap(this, filter);\n  }\n  observeSize() {\n    return new MapSizeObservableValue(this);\n  }\n}\nclass ApplyMap extends BaseObservableMap {\n  constructor(source, apply) {\n    super();\n    this._source = source;\n    this._apply = apply;\n  }\n  hasApply() {\n    return !!this._apply;\n  }\n  setApply(apply) {\n    this._apply = apply;\n    if (this._apply) {\n      this.applyOnce(this._apply);\n    }\n  }\n  applyOnce(apply) {\n    for (const [key, value] of this._source) {\n      apply(key, value);\n    }\n  }\n  onAdd(key, value) {\n    if (this._apply) {\n      this._apply(key, value);\n    }\n    this.emitAdd(key, value);\n  }\n  onRemove(key, value) {\n    this.emitRemove(key, value);\n  }\n  onUpdate(key, value, params) {\n    if (this._apply) {\n      this._apply(key, value, params);\n    }\n    this.emitUpdate(key, value, params);\n  }\n  onSubscribeFirst() {\n    this._subscription = this._source.subscribe(this);\n    if (this._apply) {\n      this.applyOnce(this._apply);\n    }\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    if (this._subscription) {\n      this._subscription = this._subscription();\n    }\n  }\n  onReset() {\n    if (this._apply) {\n      this.applyOnce(this._apply);\n    }\n    this.emitReset();\n  }\n  [Symbol.iterator]() {\n    return this._source[Symbol.iterator]();\n  }\n  get size() {\n    return this._source.size;\n  }\n  get(key) {\n    return this._source.get(key);\n  }\n}\nclass FilteredMap extends BaseObservableMap {\n  constructor(source, filter) {\n    super();\n    this._source = source;\n    this._filter = filter;\n  }\n  setFilter(filter) {\n    this._filter = filter;\n    if (this._subscription) {\n      this._reapplyFilter();\n    }\n  }\n  _reapplyFilter(silent = false) {\n    if (this._filter) {\n      const oldIncluded = this._included;\n      this._included = this._included || /* @__PURE__ */ new Map();\n      for (const [key, value] of this._source) {\n        const isIncluded = this._filter(value, key);\n        this._included.set(key, isIncluded);\n        if (!silent) {\n          const wasIncluded = oldIncluded ? oldIncluded.get(key) : true;\n          this._emitForUpdate(wasIncluded, isIncluded, key, value);\n        }\n      }\n    } else {\n      if (this._included && !silent) {\n        for (const [key, value] of this._source) {\n          if (!this._included.get(key)) {\n            this.emitAdd(key, value);\n          }\n        }\n      }\n      this._included = void 0;\n    }\n  }\n  onAdd(key, value) {\n    if (this._filter) {\n      if (this._included) {\n        const included = this._filter(value, key);\n        this._included.set(key, included);\n        if (!included) {\n          return;\n        }\n      } else {\n        throw new Error(\"Internal logic error: FilteredMap._included used before initialized\");\n      }\n    }\n    this.emitAdd(key, value);\n  }\n  onRemove(key, value) {\n    var _a;\n    const wasIncluded = !this._filter || ((_a = this._included) == null ? void 0 : _a.get(key));\n    if (this._included) {\n      this._included.delete(key);\n      if (wasIncluded) {\n        this.emitRemove(key, value);\n      }\n    } else {\n      throw new Error(\"Internal logic error: FilteredMap._included used before initialized\");\n    }\n  }\n  onUpdate(key, value, params) {\n    if (!this._included) {\n      return;\n    }\n    if (this._filter) {\n      const wasIncluded = this._included.get(key);\n      const isIncluded = this._filter(value, key);\n      this._included.set(key, isIncluded);\n      this._emitForUpdate(wasIncluded, isIncluded, key, value, params);\n    } else {\n      this.emitUpdate(key, value, params);\n    }\n  }\n  _emitForUpdate(wasIncluded, isIncluded, key, value, params = null) {\n    if (wasIncluded && !isIncluded) {\n      this.emitRemove(key, value);\n    } else if (!wasIncluded && isIncluded) {\n      this.emitAdd(key, value);\n    } else if (wasIncluded && isIncluded) {\n      this.emitUpdate(key, value, params);\n    }\n  }\n  onSubscribeFirst() {\n    this._subscription = this._source.subscribe(this);\n    this._reapplyFilter(true);\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this._included = void 0;\n    if (this._subscription) {\n      this._subscription = this._subscription();\n    }\n  }\n  onReset() {\n    this._reapplyFilter();\n    this.emitReset();\n  }\n  [Symbol.iterator]() {\n    return new FilterIterator(this._source, this._included);\n  }\n  get size() {\n    var _a;\n    let count = 0;\n    (_a = this._included) == null ? void 0 : _a.forEach((included) => {\n      if (included) {\n        count += 1;\n      }\n    });\n    return count;\n  }\n  get(key) {\n    const value = this._source.get(key);\n    if (value && this._filter(value, key)) {\n      return value;\n    }\n  }\n}\nclass FilterIterator {\n  constructor(map, included) {\n    this._included = included;\n    this._sourceIterator = map[Symbol.iterator]();\n  }\n  next() {\n    var _a;\n    while (true) {\n      const sourceResult = this._sourceIterator.next();\n      if (sourceResult.done) {\n        return sourceResult;\n      }\n      const key = sourceResult.value[0];\n      if ((_a = this._included) == null ? void 0 : _a.get(key)) {\n        return sourceResult;\n      }\n    }\n  }\n}\nclass JoinedMap extends BaseObservableMap {\n  constructor(sources) {\n    super();\n    this._sources = sources;\n  }\n  onAdd(source, key, value) {\n    if (!this._isKeyAtSourceOccluded(source, key)) {\n      const occludingValue = this._getValueFromOccludedSources(source, key);\n      if (occludingValue !== void 0) {\n        this.emitRemove(key, occludingValue);\n      }\n      this.emitAdd(key, value);\n    }\n  }\n  onRemove(source, key, value) {\n    if (!this._isKeyAtSourceOccluded(source, key)) {\n      this.emitRemove(key, value);\n      const occludedValue = this._getValueFromOccludedSources(source, key);\n      if (occludedValue !== void 0) {\n        this.emitAdd(key, occludedValue);\n      }\n    }\n  }\n  onUpdate(source, key, value, params) {\n    if (!this._subscriptions) {\n      return;\n    }\n    if (!this._isKeyAtSourceOccluded(source, key)) {\n      this.emitUpdate(key, value, params);\n    }\n  }\n  onReset() {\n    this.emitReset();\n  }\n  onSubscribeFirst() {\n    this._subscriptions = this._sources.map((source) => new SourceSubscriptionHandler(source, this).subscribe());\n    super.onSubscribeFirst();\n  }\n  _isKeyAtSourceOccluded(source, key) {\n    const index = this._sources.indexOf(source);\n    for (let i = 0; i < index; i += 1) {\n      if (this._sources[i].get(key) !== void 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n  _getValueFromOccludedSources(source, key) {\n    const index = this._sources.indexOf(source);\n    for (let i = index + 1; i < this._sources.length; i += 1) {\n      const source2 = this._sources[i];\n      const occludedValue = source2.get(key);\n      if (occludedValue !== void 0) {\n        return occludedValue;\n      }\n    }\n    return void 0;\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    if (this._subscriptions) {\n      for (const s of this._subscriptions) {\n        s.dispose();\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return new JoinedIterator(this._sources);\n  }\n  get size() {\n    return this._sources.reduce((sum, s) => sum + s.size, 0);\n  }\n  get(key) {\n    for (const s of this._sources) {\n      const value = s.get(key);\n      if (value) {\n        return value;\n      }\n    }\n    return void 0;\n  }\n}\nclass JoinedIterator {\n  constructor(sources) {\n    this._sourceIndex = -1;\n    this._encounteredKeys = /* @__PURE__ */ new Set();\n    this._sources = sources;\n  }\n  next() {\n    var _a;\n    let result = void 0;\n    while (!result) {\n      if (!this._currentIterator) {\n        this._sourceIndex += 1;\n        if (this._sources.length <= this._sourceIndex) {\n          return { done: true, value: null };\n        }\n        this._currentIterator = this._sources[this._sourceIndex][Symbol.iterator]();\n      }\n      const sourceResult = (_a = this._currentIterator) == null ? void 0 : _a.next();\n      if (!sourceResult || sourceResult.done) {\n        this._currentIterator = void 0;\n        continue;\n      } else {\n        const key = sourceResult.value[0];\n        if (!this._encounteredKeys.has(key)) {\n          this._encounteredKeys.add(key);\n          result = sourceResult;\n        }\n      }\n    }\n    return result;\n  }\n}\nclass SourceSubscriptionHandler {\n  constructor(source, joinedMap) {\n    this._source = source;\n    this._joinedMap = joinedMap;\n    this._subscription = void 0;\n  }\n  subscribe() {\n    this._subscription = this._source.subscribe(this);\n    return this;\n  }\n  dispose() {\n    if (this._subscription)\n      this._subscription = this._subscription();\n  }\n  onAdd(key, value) {\n    this._joinedMap.onAdd(this._source, key, value);\n  }\n  onRemove(key, value) {\n    this._joinedMap.onRemove(this._source, key, value);\n  }\n  onUpdate(key, value, params) {\n    this._joinedMap.onUpdate(this._source, key, value, params);\n  }\n  onReset() {\n    this._joinedMap.onReset();\n  }\n}\nclass MappedMap extends BaseObservableMap {\n  constructor(source, mapper, updater) {\n    super();\n    this._source = source;\n    this._mapper = mapper;\n    this._updater = updater;\n    this._mappedValues = /* @__PURE__ */ new Map();\n  }\n  _emitSpontaneousUpdate(key, params) {\n    const value = this._mappedValues.get(key);\n    if (value) {\n      this.emitUpdate(key, value, params);\n    }\n  }\n  onAdd(key, value) {\n    const emitSpontaneousUpdate = this._emitSpontaneousUpdate.bind(this, key);\n    const mappedValue = this._mapper(value, emitSpontaneousUpdate);\n    this._mappedValues.set(key, mappedValue);\n    this.emitAdd(key, mappedValue);\n  }\n  onRemove(key) {\n    const mappedValue = this._mappedValues.get(key);\n    if (this._mappedValues.delete(key)) {\n      if (mappedValue) {\n        this.emitRemove(key, mappedValue);\n      }\n    }\n  }\n  onUpdate(key, value, params) {\n    var _a;\n    if (!this._mappedValues) {\n      return;\n    }\n    const mappedValue = this._mappedValues.get(key);\n    if (mappedValue !== void 0) {\n      (_a = this._updater) == null ? void 0 : _a.call(this, params, mappedValue, value);\n      this.emitUpdate(key, mappedValue, params);\n    }\n  }\n  onSubscribeFirst() {\n    this._subscription = this._source.subscribe(this);\n    for (let [key, value] of this._source) {\n      const emitSpontaneousUpdate = this._emitSpontaneousUpdate.bind(this, key);\n      const mappedValue = this._mapper(value, emitSpontaneousUpdate);\n      this._mappedValues.set(key, mappedValue);\n    }\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    if (this._subscription) {\n      this._subscription = this._subscription();\n    }\n    this._mappedValues.clear();\n  }\n  onReset() {\n    this._mappedValues.clear();\n    this.emitReset();\n  }\n  [Symbol.iterator]() {\n    return this._mappedValues.entries();\n  }\n  get size() {\n    return this._mappedValues.size;\n  }\n  get(key) {\n    return this._mappedValues.get(key);\n  }\n}\nclass ObservableMap extends BaseObservableMap {\n  constructor(initialValues) {\n    super();\n    this._values = new Map(initialValues);\n  }\n  update(key, params) {\n    const value = this._values.get(key);\n    if (value !== void 0) {\n      this._values.set(key, value);\n      this.emitUpdate(key, value, params);\n      return true;\n    }\n    return false;\n  }\n  add(key, value) {\n    if (!this._values.has(key)) {\n      this._values.set(key, value);\n      this.emitAdd(key, value);\n      return true;\n    }\n    return false;\n  }\n  remove(key) {\n    const value = this._values.get(key);\n    if (value !== void 0) {\n      this._values.delete(key);\n      this.emitRemove(key, value);\n      return true;\n    } else {\n      return false;\n    }\n  }\n  set(key, value) {\n    if (this._values.has(key)) {\n      this._values.set(key, value);\n      return this.update(key, void 0);\n    } else {\n      return this.add(key, value);\n    }\n  }\n  reset() {\n    this._values.clear();\n    this.emitReset();\n  }\n  get(key) {\n    return this._values.get(key);\n  }\n  get size() {\n    return this._values.size;\n  }\n  [Symbol.iterator]() {\n    return this._values.entries();\n  }\n  values() {\n    return this._values.values();\n  }\n  keys() {\n    return this._values.keys();\n  }\n}\nclass ObservableValueMap extends BaseObservableMap {\n  constructor(key, observableValue) {\n    super();\n    this.key = key;\n    this.observableValue = observableValue;\n  }\n  onSubscribeFirst() {\n    this.subscription = this.observableValue.subscribe((value) => {\n      this.emitUpdate(this.key, value, void 0);\n    });\n    super.onSubscribeFirst();\n  }\n  onUnsubscribeLast() {\n    this.subscription();\n    super.onUnsubscribeLast();\n  }\n  *[Symbol.iterator]() {\n    yield [this.key, this.observableValue.get()];\n  }\n  get size() {\n    return 1;\n  }\n  get(key) {\n    if (key == this.key) {\n      return this.observableValue.get();\n    }\n  }\n}\nclass MapSizeObservableValue extends BaseObservableValue$1 {\n  constructor(map) {\n    super();\n    this.map = map;\n  }\n  onSubscribeFirst() {\n    this.subscription = this.map.subscribe({\n      onAdd: (key, value) => {\n        this.emit(this.get());\n      },\n      onRemove: (key, value) => {\n        this.emit(this.get());\n      },\n      onUpdate: (key, value) => {\n      },\n      onReset: () => {\n        this.emit(this.get());\n      }\n    });\n  }\n  onUnsubscribeLast() {\n    var _a;\n    this.subscription = (_a = this.subscription) == null ? void 0 : _a.call(this);\n  }\n  get() {\n    return this.map.size;\n  }\n}\nfunction abortOnTimeout(createTimeout, timeoutAmount, requestResult, responsePromise) {\n  const timeout = createTimeout(timeoutAmount);\n  let timedOut = false;\n  timeout.elapsed().then(() => {\n    timedOut = true;\n    requestResult.abort();\n  }, () => {\n  });\n  return responsePromise.then((response) => {\n    timeout.abort();\n    return response;\n  }, (err) => {\n    timeout.abort();\n    if (err.name === \"AbortError\" && timedOut) {\n      throw new ConnectionError(`Request timed out after ${timeoutAmount}ms`, true);\n    } else {\n      throw err;\n    }\n  });\n}\nfunction addCacheBuster(urlStr, random = Math.random) {\n  if (urlStr.includes(\"?\")) {\n    urlStr = urlStr + \"&\";\n  } else {\n    urlStr = urlStr + \"?\";\n  }\n  return urlStr + `_cacheBuster=${Math.ceil(random() * Number.MAX_SAFE_INTEGER)}`;\n}\nfunction mapAsFormData(map) {\n  var _a;\n  const formData = new FormData();\n  for (const [name, value] of map) {\n    if (((_a = value.blob) == null ? void 0 : _a.nativeBlob) && value.name) {\n      formData.set(name, value.blob.nativeBlob, value.name);\n    } else {\n      formData.set(name, value);\n    }\n  }\n  return formData;\n}\nclass RequestResult$1 {\n  constructor(promise, xhr) {\n    this._promise = promise;\n    this._xhr = xhr;\n  }\n  abort() {\n    this._xhr.abort();\n  }\n  response() {\n    return this._promise;\n  }\n}\nfunction createXhr(url, { method, headers, timeout, format, uploadProgress }) {\n  const xhr = new XMLHttpRequest();\n  if (uploadProgress) {\n    xhr.upload.addEventListener(\"progress\", (evt) => uploadProgress(evt.loaded));\n  }\n  xhr.open(method, url);\n  if (format === \"buffer\") {\n    xhr.responseType = \"arraybuffer\";\n  }\n  if (headers) {\n    for (const [name, value] of headers.entries()) {\n      try {\n        xhr.setRequestHeader(name, value);\n      } catch (err) {\n        console.info(`Could not set ${name} header: ${err.message}`);\n      }\n    }\n  }\n  if (timeout) {\n    xhr.timeout = timeout;\n  }\n  return xhr;\n}\nfunction xhrAsPromise(xhr, method, url) {\n  return new Promise((resolve, reject) => {\n    xhr.addEventListener(\"load\", () => resolve(xhr));\n    xhr.addEventListener(\"abort\", () => reject(new AbortError()));\n    xhr.addEventListener(\"error\", () => reject(new ConnectionError(`Error ${method} ${url}`)));\n    xhr.addEventListener(\"timeout\", () => reject(new ConnectionError(`Timeout ${method} ${url}`, true)));\n  });\n}\nfunction xhrRequest(url, options) {\n  let { cache, format, body, method } = options;\n  if (!cache) {\n    url = addCacheBuster(url);\n  }\n  const xhr = createXhr(url, options);\n  const promise = xhrAsPromise(xhr, method, url).then((xhr2) => {\n    const { status } = xhr2;\n    let body2 = null;\n    if (format === \"buffer\") {\n      body2 = xhr2.response;\n    } else if (xhr2.getResponseHeader(\"Content-Type\") === \"application/json\") {\n      body2 = JSON.parse(xhr2.responseText);\n    }\n    return { status, body: body2 };\n  });\n  if (body == null ? void 0 : body.nativeBlob) {\n    body = body.nativeBlob;\n  }\n  if (body instanceof Map) {\n    body = mapAsFormData(body);\n  }\n  xhr.send(body || null);\n  return new RequestResult$1(promise, xhr);\n}\nclass RequestResult {\n  constructor(promise, controller) {\n    if (!controller) {\n      const abortPromise = new Promise((_, reject) => {\n        this._controller = {\n          abort() {\n            const err = new Error(\"fetch request aborted\");\n            err.name = \"AbortError\";\n            reject(err);\n          }\n        };\n      });\n      this.promise = Promise.race([promise, abortPromise]);\n    } else {\n      this.promise = promise;\n      this._controller = controller;\n    }\n  }\n  abort() {\n    this._controller.abort();\n  }\n  response() {\n    return this.promise;\n  }\n}\nfunction createFetchRequest(createTimeout, serviceWorkerHandler) {\n  return function fetchRequest(url, requestOptions) {\n    if (serviceWorkerHandler == null ? void 0 : serviceWorkerHandler.haltRequests) {\n      return new RequestResult(new Promise(() => {\n      }), {});\n    }\n    if (requestOptions == null ? void 0 : requestOptions.uploadProgress) {\n      return xhrRequest(url, requestOptions);\n    }\n    let { method, headers, body, timeout, format, cache = false } = requestOptions;\n    const controller = typeof AbortController === \"function\" ? new AbortController() : null;\n    if (body == null ? void 0 : body.nativeBlob) {\n      body = body.nativeBlob;\n    }\n    if (body instanceof Map) {\n      body = mapAsFormData(body);\n    }\n    let options = { method, body };\n    if (controller) {\n      options = Object.assign(options, {\n        signal: controller.signal\n      });\n    }\n    if (!cache) {\n      url = addCacheBuster(url);\n    }\n    options = Object.assign(options, {\n      mode: \"cors\",\n      credentials: \"omit\",\n      referrer: \"no-referrer\",\n      cache: \"default\"\n    });\n    if (headers) {\n      const fetchHeaders = new Headers();\n      for (const [name, value] of headers.entries()) {\n        fetchHeaders.append(name, value);\n      }\n      options.headers = fetchHeaders;\n    }\n    const promise = fetch(url, options).then(async (response) => {\n      const { status } = response;\n      let body2;\n      try {\n        if (format === \"json\") {\n          body2 = await response.json();\n        } else if (format === \"buffer\") {\n          body2 = await response.arrayBuffer();\n        } else if (format === \"text\") {\n          body2 = await response.text();\n        }\n      } catch (err) {\n        if (!(err.name === \"SyntaxError\" && status >= 400)) {\n          throw err;\n        }\n      }\n      return { status, body: body2 };\n    }, (err) => {\n      if (err.name === \"AbortError\") {\n        throw new AbortError();\n      } else if (err instanceof TypeError) {\n        throw new ConnectionError(`${method} ${url}: ${err.message}`);\n      }\n      throw err;\n    });\n    const result = new RequestResult(promise, controller);\n    if (timeout) {\n      result.promise = abortOnTimeout(createTimeout, timeout, result, result.promise);\n    }\n    return result;\n  };\n}\nfunction noop() {\n}\nclass NullLogger {\n  constructor() {\n    this.item = new NullLogItem(this);\n  }\n  log(labelOrValues) {\n    return this.item;\n  }\n  addReporter() {\n  }\n  get reporters() {\n    return [];\n  }\n  getOpenRootItems() {\n    return [];\n  }\n  forceFinish() {\n  }\n  child(labelOrValues) {\n    return this.item;\n  }\n  run(_, callback) {\n    return callback(this.item);\n  }\n  wrapOrRun(item, _, callback) {\n    if (item) {\n      return item.wrap(_, callback);\n    } else {\n      return this.run(_, callback);\n    }\n  }\n  runDetached(_, callback) {\n    new Promise((r) => r(callback(this.item))).then(noop, noop);\n    return this.item;\n  }\n  get level() {\n    return LogLevel;\n  }\n}\nclass NullLogItem {\n  constructor(logger) {\n    this.logger = logger;\n  }\n  discard() {\n  }\n  wrap(_, callback) {\n    return this.run(callback);\n  }\n  run(callback) {\n    return callback(this);\n  }\n  log(labelOrValues) {\n    return this;\n  }\n  set(labelOrValues) {\n    return this;\n  }\n  runDetached(_, callback) {\n    new Promise((r) => r(callback(this))).then(noop, noop);\n    return this;\n  }\n  wrapDetached(_, _callback) {\n    return this.refDetached();\n  }\n  refDetached() {\n  }\n  ensureRefId() {\n  }\n  get level() {\n    return LogLevel;\n  }\n  get duration() {\n    return 0;\n  }\n  catch(err) {\n    return err;\n  }\n  child() {\n    return this;\n  }\n  finish() {\n  }\n  forceFinish() {\n  }\n  serialize() {\n    return void 0;\n  }\n}\nconst Instance = new NullLogger();\nclass QueryTarget {\n  constructor(target, transaction) {\n    this._target = target;\n    this._transaction = transaction;\n  }\n  get idbFactory() {\n    return this._transaction.idbFactory;\n  }\n  get IDBKeyRange() {\n    return this._transaction.IDBKeyRange;\n  }\n  get databaseName() {\n    return this._transaction.databaseName;\n  }\n  _openCursor(range, direction) {\n    if (range && direction) {\n      return this._target.openCursor(range, direction);\n    } else if (range) {\n      return this._target.openCursor(range);\n    } else if (direction) {\n      return this._target.openCursor(null, direction);\n    } else {\n      return this._target.openCursor();\n    }\n  }\n  supports(methodName) {\n    return this._target.supports(methodName);\n  }\n  count(keyRange) {\n    return reqAsPromise(this._target.count(keyRange));\n  }\n  get(key) {\n    return reqAsPromise(this._target.get(key));\n  }\n  getKey(key) {\n    if (this._target.supports(\"getKey\")) {\n      return reqAsPromise(this._target.getKey(key));\n    } else {\n      return reqAsPromise(this._target.get(key)).then((value) => {\n        if (value) {\n          let keyPath = this._target.keyPath;\n          if (typeof keyPath === \"string\") {\n            keyPath = [keyPath];\n          }\n          return keyPath.reduce((obj, key2) => obj[key2], value);\n        }\n      });\n    }\n  }\n  reduce(range, reducer, initialValue) {\n    return this._reduce(range, reducer, initialValue, \"next\");\n  }\n  reduceReverse(range, reducer, initialValue) {\n    return this._reduce(range, reducer, initialValue, \"prev\");\n  }\n  selectLimit(range, amount) {\n    return this._selectLimit(range, amount, \"next\");\n  }\n  selectLimitReverse(range, amount) {\n    return this._selectLimit(range, amount, \"prev\");\n  }\n  selectWhile(range, predicate) {\n    return this._selectWhile(range, predicate, \"next\");\n  }\n  selectWhileReverse(range, predicate) {\n    return this._selectWhile(range, predicate, \"prev\");\n  }\n  async selectAll(range, direction) {\n    const cursor = this._openCursor(range, direction);\n    const results = [];\n    await iterateCursor(cursor, (value) => {\n      results.push(value);\n      return NOT_DONE;\n    });\n    return results;\n  }\n  selectFirst(range) {\n    return this._find(range, () => true, \"next\");\n  }\n  selectLast(range) {\n    return this._find(range, () => true, \"prev\");\n  }\n  find(range, predicate) {\n    return this._find(range, predicate, \"next\");\n  }\n  findReverse(range, predicate) {\n    return this._find(range, predicate, \"prev\");\n  }\n  async findMaxKey(range) {\n    const cursor = this._target.openKeyCursor(range, \"prev\");\n    let maxKey;\n    await iterateCursor(cursor, (_, key) => {\n      maxKey = key;\n      return DONE;\n    });\n    return maxKey;\n  }\n  async iterateValues(range, callback) {\n    const cursor = this._target.openCursor(range, \"next\");\n    await iterateCursor(cursor, (value, key, cur) => {\n      return { done: callback(value, key, cur) };\n    });\n  }\n  async iterateKeys(range, callback) {\n    const cursor = this._target.openKeyCursor(range, \"next\");\n    await iterateCursor(cursor, (_, key, cur) => {\n      return { done: callback(key, cur) };\n    });\n  }\n  async findExistingKeys(keys, backwards, callback) {\n    const compareKeys = (a, b) => backwards ? -this.idbFactory.cmp(a, b) : this.idbFactory.cmp(a, b);\n    const sortedKeys = keys.slice().sort(compareKeys);\n    const firstKey = sortedKeys[0];\n    const lastKey = sortedKeys[sortedKeys.length - 1];\n    const direction = backwards ? \"prev\" : \"next\";\n    const cursor = this._target.openKeyCursor(this.IDBKeyRange.bound(firstKey, lastKey), direction);\n    let index = 0;\n    await iterateCursor(cursor, (value, key, cursor2) => {\n      while (index < sortedKeys.length && compareKeys(sortedKeys[index], key) < 0) {\n        index += 1;\n      }\n      let done = false;\n      if (sortedKeys[index] === key) {\n        const pk = cursor2.primaryKey;\n        done = callback(key, pk);\n        index += 1;\n      }\n      if (done || index >= sortedKeys.length) {\n        return DONE;\n      } else {\n        return {\n          done: false,\n          jumpTo: sortedKeys[index]\n        };\n      }\n    });\n  }\n  _reduce(range, reducer, initialValue, direction) {\n    let reducedValue = initialValue;\n    const cursor = this._openCursor(range, direction);\n    return iterateCursor(cursor, (value) => {\n      reducedValue = reducer(reducedValue, value);\n      return NOT_DONE;\n    });\n  }\n  _selectLimit(range, amount, direction) {\n    return this._selectUntil(range, (results) => {\n      return results.length === amount;\n    }, direction);\n  }\n  async _selectUntil(range, predicate, direction) {\n    const cursor = this._openCursor(range, direction);\n    const results = [];\n    await iterateCursor(cursor, (value) => {\n      results.push(value);\n      return { done: predicate(results, value) };\n    });\n    return results;\n  }\n  async _selectWhile(range, predicate, direction) {\n    const cursor = this._openCursor(range, direction);\n    const results = [];\n    await iterateCursor(cursor, (value) => {\n      const passesPredicate = predicate(value);\n      if (passesPredicate) {\n        results.push(value);\n      }\n      return { done: !passesPredicate };\n    });\n    return results;\n  }\n  async iterateWhile(range, predicate) {\n    const cursor = this._openCursor(range, \"next\");\n    await iterateCursor(cursor, (value) => {\n      const passesPredicate = predicate(value);\n      return { done: !passesPredicate };\n    });\n  }\n  async _find(range, predicate, direction) {\n    const cursor = this._openCursor(range, direction);\n    let result;\n    const found = await iterateCursor(cursor, (value) => {\n      const found2 = predicate(value);\n      if (found2) {\n        result = value;\n      }\n      return { done: found2 };\n    });\n    if (found) {\n      return result;\n    }\n  }\n}\nconst LOG_REQUESTS = false;\nfunction logRequest(method, params, source) {\n  var _a, _b;\n  const storeName = source == null ? void 0 : source.name;\n  const databaseName = (_b = (_a = source == null ? void 0 : source.transaction) == null ? void 0 : _a.db) == null ? void 0 : _b.name;\n  console.info(`${databaseName}.${storeName}.${method}(${params.map((p) => JSON.stringify(p)).join(\", \")})`);\n}\nclass QueryTargetWrapper {\n  constructor(qt) {\n    this._qt = qt;\n  }\n  get keyPath() {\n    return this._qtStore.keyPath;\n  }\n  get _qtStore() {\n    if (\"objectStore\" in this._qt) {\n      return this._qt.objectStore;\n    }\n    return this._qt;\n  }\n  supports(methodName) {\n    return !!this._qt[methodName];\n  }\n  openKeyCursor(range, direction) {\n    try {\n      if (!this._qt.openKeyCursor) {\n        LOG_REQUESTS && logRequest(\"openCursor\", [range, direction], this._qt);\n        return this.openCursor(range, direction);\n      }\n      LOG_REQUESTS && logRequest(\"openKeyCursor\", [range, direction], this._qt);\n      return this._qt.openKeyCursor(range, direction);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"openKeyCursor\", this._qt, err, [range, direction]);\n    }\n  }\n  openCursor(range, direction) {\n    try {\n      LOG_REQUESTS && logRequest(\"openCursor\", [], this._qt);\n      return this._qt.openCursor(range, direction);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"openCursor\", this._qt, err, [range, direction]);\n    }\n  }\n  put(item, key) {\n    try {\n      LOG_REQUESTS && logRequest(\"put\", [item, key], this._qt);\n      return this._qtStore.put(item, key);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"put\", this._qt, err, [item, key]);\n    }\n  }\n  add(item, key) {\n    try {\n      LOG_REQUESTS && logRequest(\"add\", [item, key], this._qt);\n      return this._qtStore.add(item, key);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"add\", this._qt, err, [item, key]);\n    }\n  }\n  get(key) {\n    try {\n      LOG_REQUESTS && logRequest(\"get\", [key], this._qt);\n      return this._qt.get(key);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"get\", this._qt, err, [key]);\n    }\n  }\n  getKey(key) {\n    try {\n      LOG_REQUESTS && logRequest(\"getKey\", [key], this._qt);\n      return this._qt.getKey(key);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"getKey\", this._qt, err, [key]);\n    }\n  }\n  delete(key) {\n    try {\n      LOG_REQUESTS && logRequest(\"delete\", [key], this._qt);\n      return this._qtStore.delete(key);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"delete\", this._qt, err, [key]);\n    }\n  }\n  count(keyRange) {\n    try {\n      return this._qt.count(keyRange);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"count\", this._qt, err, [keyRange]);\n    }\n  }\n  index(name) {\n    try {\n      return this._qtStore.index(name);\n    } catch (err) {\n      throw new IDBRequestAttemptError(\"index\", this._qt, err, [name]);\n    }\n  }\n  get indexNames() {\n    return Array.from(this._qtStore.indexNames);\n  }\n}\nclass Store extends QueryTarget {\n  constructor(idbStore, transaction) {\n    super(new QueryTargetWrapper(idbStore), transaction);\n  }\n  get _idbStore() {\n    return this._target;\n  }\n  index(indexName) {\n    return new QueryTarget(new QueryTargetWrapper(this._idbStore.index(indexName)), this._transaction);\n  }\n  put(value, log) {\n    const request = this._idbStore.put(value);\n    this._prepareErrorLog(request, log, \"put\", void 0, value);\n  }\n  add(value, log) {\n    const request = this._idbStore.add(value);\n    this._prepareErrorLog(request, log, \"add\", void 0, value);\n  }\n  async tryAdd(value, log) {\n    try {\n      await reqAsPromise(this._idbStore.add(value));\n      return true;\n    } catch (err) {\n      if (err instanceof IDBRequestError) {\n        log.log({ l: \"could not write\", id: this._getKeys(value), e: err }, log.level.Warn);\n        err.preventTransactionAbort();\n        return false;\n      } else {\n        throw err;\n      }\n    }\n  }\n  delete(keyOrKeyRange, log) {\n    const request = this._idbStore.delete(keyOrKeyRange);\n    this._prepareErrorLog(request, log, \"delete\", keyOrKeyRange, void 0);\n  }\n  _prepareErrorLog(request, log, operationName, key, value) {\n    if (log) {\n      log.ensureRefId();\n    }\n    reqAsPromise(request).catch((err) => {\n      let keys = void 0;\n      if (value) {\n        keys = this._getKeys(value);\n      } else if (key) {\n        keys = [key];\n      }\n      this._transaction.addWriteError(err, log, operationName, keys);\n    });\n  }\n  _getKeys(value) {\n    const keys = [];\n    const { keyPath } = this._idbStore;\n    try {\n      keys.push(this._readKeyPath(value, keyPath));\n    } catch (err) {\n      console.warn(\"could not read keyPath\", keyPath);\n    }\n    for (const indexName of this._idbStore.indexNames) {\n      try {\n        const index = this._idbStore.index(indexName);\n        keys.push(this._readKeyPath(value, index.keyPath));\n      } catch (err) {\n        console.warn(\"could not read index\", indexName);\n      }\n    }\n    return keys;\n  }\n  _readKeyPath(value, keyPath) {\n    if (Array.isArray(keyPath)) {\n      let field = value;\n      for (const part of keyPath) {\n        if (typeof field === \"object\") {\n          field = field[part];\n        } else {\n          break;\n        }\n      }\n      return field;\n    } else {\n      return value[keyPath];\n    }\n  }\n}\nvar DecryptionSource = /* @__PURE__ */ ((DecryptionSource2) => {\n  DecryptionSource2[DecryptionSource2[\"Sync\"] = 0] = \"Sync\";\n  DecryptionSource2[DecryptionSource2[\"Timeline\"] = 1] = \"Timeline\";\n  DecryptionSource2[DecryptionSource2[\"Retry\"] = 2] = \"Retry\";\n  return DecryptionSource2;\n})(DecryptionSource || {});\nconst SESSION_E2EE_KEY_PREFIX = \"e2ee:\";\nconst OLM_ALGORITHM = \"m.olm.v1.curve25519-aes-sha2\";\nconst MEGOLM_ALGORITHM = \"m.megolm.v1.aes-sha2\";\nclass DecryptionError$1 extends Error {\n  constructor(code, event2, detailsObj) {\n    super(`Decryption error ${code}${detailsObj ? \": \" + JSON.stringify(detailsObj) : \"\"}`);\n    this.code = code;\n    this.event = event2;\n    this.detailsObj = detailsObj;\n  }\n}\nconst SIGNATURE_ALGORITHM = \"ed25519\";\nfunction getDeviceEd25519Key(deviceKey) {\n  return deviceKey.keys[`ed25519:${deviceKey.device_id}`];\n}\nfunction getDeviceCurve25519Key(deviceKey) {\n  return deviceKey.keys[`curve25519:${deviceKey.device_id}`];\n}\nfunction getEd25519Signature(signedValue, userId, deviceOrKeyId) {\n  var _a, _b;\n  return (_b = (_a = signedValue == null ? void 0 : signedValue.signatures) == null ? void 0 : _a[userId]) == null ? void 0 : _b[`${SIGNATURE_ALGORITHM}:${deviceOrKeyId}`];\n}\nvar SignatureVerification = /* @__PURE__ */ ((SignatureVerification2) => {\n  SignatureVerification2[SignatureVerification2[\"Valid\"] = 0] = \"Valid\";\n  SignatureVerification2[SignatureVerification2[\"Invalid\"] = 1] = \"Invalid\";\n  SignatureVerification2[SignatureVerification2[\"NotSigned\"] = 2] = \"NotSigned\";\n  return SignatureVerification2;\n})(SignatureVerification || {});\nfunction verifyEd25519Signature(olmUtil, userId, deviceOrKeyId, ed25519Key, value, log) {\n  const signature = getEd25519Signature(value, userId, deviceOrKeyId);\n  if (!signature) {\n    log == null ? void 0 : log.set(\"no_signature\", true);\n    return 2;\n  }\n  const clone = Object.assign({}, value);\n  delete clone[\"unsigned\"];\n  delete clone[\"signatures\"];\n  const canonicalJson = anotherjson.stringify(clone);\n  try {\n    olmUtil.ed25519_verify(ed25519Key, canonicalJson, signature);\n    return 0;\n  } catch (err) {\n    if (log) {\n      const logItem = log.log({ l: \"Invalid signature, ignoring.\", ed25519Key, canonicalJson, signature });\n      logItem.error = err;\n      logItem.logLevel = log.level.Warn;\n    }\n    return 1;\n  }\n}\nfunction createRoomEncryptionEvent() {\n  return {\n    \"type\": \"m.room.encryption\",\n    \"state_key\": \"\",\n    \"content\": {\n      \"algorithm\": MEGOLM_ALGORITHM,\n      \"rotation_period_ms\": 6048e5,\n      \"rotation_period_msgs\": 100\n    }\n  };\n}\nfunction shouldShareKey(membership, historyVisibility) {\n  switch (historyVisibility) {\n    case \"world_readable\":\n      return true;\n    case \"shared\":\n      return membership !== void 0;\n    case \"joined\":\n      return membership === \"join\";\n    case \"invited\":\n      return membership === \"invite\" || membership === \"join\";\n    default:\n      return false;\n  }\n}\nfunction stringify(value) {\n  return JSON.stringify(encodeValue(value));\n}\nfunction parse(value) {\n  return decodeValue(JSON.parse(value));\n}\nfunction encodeValue(value) {\n  if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n    if (value.byteLength) {\n      return { _type: value.constructor.name, value: Array.from(value) };\n    }\n    let newObj = {};\n    for (const prop in value) {\n      if (value.hasOwnProperty(prop)) {\n        newObj[prop] = encodeValue(value[prop]);\n      }\n    }\n    return newObj;\n  } else {\n    return value;\n  }\n}\nfunction decodeValue(value) {\n  if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n    if (typeof value._type === \"string\") {\n      switch (value._type) {\n        case \"Int8Array\":\n          return Int8Array.from(value.value);\n        case \"Uint8Array\":\n          return Uint8Array.from(value.value);\n        case \"Uint8ClampedArray\":\n          return Uint8ClampedArray.from(value.value);\n        case \"Int16Array\":\n          return Int16Array.from(value.value);\n        case \"Uint16Array\":\n          return Uint16Array.from(value.value);\n        case \"Int32Array\":\n          return Int32Array.from(value.value);\n        case \"Uint32Array\":\n          return Uint32Array.from(value.value);\n        case \"Float32Array\":\n          return Float32Array.from(value.value);\n        case \"Float64Array\":\n          return Float64Array.from(value.value);\n        case \"BigInt64Array\":\n          return BigInt64Array.from(value.value);\n        case \"BigUint64Array\":\n          return BigUint64Array.from(value.value);\n        default:\n          return value.value;\n      }\n    }\n    let newObj = {};\n    for (const prop in value) {\n      if (value.hasOwnProperty(prop)) {\n        newObj[prop] = decodeValue(value[prop]);\n      }\n    }\n    return newObj;\n  } else {\n    return value;\n  }\n}\nfunction getLocalStorageKeyPrefix(databaseName) {\n  return `${databaseName}.session.`;\n}\nfunction clearKeysFromLocalStorage(localStorage2, databaseName) {\n  const keys = [];\n  for (let i = 0; i < localStorage2.length; i++) {\n    const key = localStorage2.key(i);\n    if (key == null ? void 0 : key.startsWith(getLocalStorageKeyPrefix(databaseName))) {\n      keys.push(key);\n    }\n  }\n  for (const key of keys) {\n    localStorage2.removeItem(key);\n  }\n}\nclass SessionStore {\n  constructor(sessionStore, localStorage2) {\n    this._sessionStore = sessionStore;\n    this._localStorage = localStorage2;\n  }\n  get _localStorageKeyPrefix() {\n    return getLocalStorageKeyPrefix(this._sessionStore.databaseName);\n  }\n  async get(key) {\n    const entry = await this._sessionStore.get(key);\n    if (entry) {\n      return entry.value;\n    }\n  }\n  _writeKeyToLocalStorage(key, value) {\n    try {\n      const lsKey = this._localStorageKeyPrefix + key;\n      const lsValue = stringify(value);\n      this._localStorage.setItem(lsKey, lsValue);\n    } catch (err) {\n      console.error(\"could not write to localStorage\", err);\n    }\n  }\n  writeE2EEIdentityToLocalStorage() {\n    this._sessionStore.iterateValues(void 0, (entry, key) => {\n      if (key.startsWith(SESSION_E2EE_KEY_PREFIX)) {\n        this._writeKeyToLocalStorage(key, entry.value);\n      }\n      return false;\n    });\n  }\n  async tryRestoreE2EEIdentityFromLocalStorage(log) {\n    let success = false;\n    const lsPrefix = this._localStorageKeyPrefix;\n    const prefix2 = lsPrefix + SESSION_E2EE_KEY_PREFIX;\n    for (let i = 0; i < this._localStorage.length; i += 1) {\n      const lsKey = this._localStorage.key(i);\n      if (lsKey.startsWith(prefix2)) {\n        const value = parse(this._localStorage.getItem(lsKey));\n        const key = lsKey.substr(lsPrefix.length);\n        const hasKey = await this._sessionStore.getKey(key) === key;\n        log.set(key, !hasKey);\n        if (!hasKey) {\n          this._sessionStore.put({ key, value });\n          success = true;\n        }\n      }\n    }\n    return success;\n  }\n  set(key, value) {\n    if (key.startsWith(SESSION_E2EE_KEY_PREFIX)) {\n      this._writeKeyToLocalStorage(key, value);\n    }\n    this._sessionStore.put({ key, value });\n  }\n  add(key, value) {\n    if (key.startsWith(SESSION_E2EE_KEY_PREFIX)) {\n      this._writeKeyToLocalStorage(key, value);\n    }\n    this._sessionStore.add({ key, value });\n  }\n  remove(key) {\n    if (key.startsWith(SESSION_E2EE_KEY_PREFIX)) {\n      this._localStorage.removeItem(this._localStorageKeyPrefix + key);\n    }\n    this._sessionStore.delete(key);\n  }\n}\nclass RoomSummaryStore {\n  constructor(summaryStore) {\n    this._summaryStore = summaryStore;\n  }\n  getAll() {\n    return this._summaryStore.selectAll();\n  }\n  set(summary) {\n    this._summaryStore.put(summary);\n  }\n  get(roomId) {\n    return this._summaryStore.get(roomId);\n  }\n  async has(roomId) {\n    const fetchedKey = await this._summaryStore.getKey(roomId);\n    return roomId === fetchedKey;\n  }\n  remove(roomId) {\n    this._summaryStore.delete(roomId);\n  }\n}\nclass InviteStore {\n  constructor(inviteStore) {\n    this._inviteStore = inviteStore;\n  }\n  getAll() {\n    return this._inviteStore.selectAll();\n  }\n  set(invite) {\n    this._inviteStore.put(invite);\n  }\n  remove(roomId) {\n    this._inviteStore.delete(roomId);\n  }\n}\nclass EventKey {\n  constructor(fragmentId, eventIndex) {\n    this.fragmentId = fragmentId;\n    this.eventIndex = eventIndex;\n  }\n  nextFragmentKey() {\n    return new EventKey(this.fragmentId + 1, KeyLimits.middleStorageKey);\n  }\n  nextKeyForDirection(direction) {\n    if (direction.isForward) {\n      return this.nextKey();\n    } else {\n      return this.previousKey();\n    }\n  }\n  previousKey() {\n    return new EventKey(this.fragmentId, this.eventIndex - 1);\n  }\n  nextKey() {\n    return new EventKey(this.fragmentId, this.eventIndex + 1);\n  }\n  static get maxKey() {\n    return new EventKey(KeyLimits.maxStorageKey, KeyLimits.maxStorageKey);\n  }\n  static get minKey() {\n    return new EventKey(KeyLimits.minStorageKey, KeyLimits.minStorageKey);\n  }\n  static get defaultLiveKey() {\n    return EventKey.defaultFragmentKey(KeyLimits.minStorageKey);\n  }\n  static defaultFragmentKey(fragmentId) {\n    return new EventKey(fragmentId, KeyLimits.middleStorageKey);\n  }\n  toString() {\n    return `[${this.fragmentId}/${this.eventIndex}]`;\n  }\n  equals(other) {\n    return this.fragmentId === (other == null ? void 0 : other.fragmentId) && this.eventIndex === (other == null ? void 0 : other.eventIndex);\n  }\n}\nfunction createEventEntry(key, roomId, event2) {\n  return {\n    fragmentId: key.fragmentId,\n    eventIndex: key.eventIndex,\n    roomId,\n    event: event2\n  };\n}\nfunction directionalAppend(array, value, direction) {\n  if (direction.isForward) {\n    array.push(value);\n  } else {\n    array.unshift(value);\n  }\n}\nfunction directionalConcat(array, otherArray, direction) {\n  if (direction.isForward) {\n    return array.concat(otherArray);\n  } else {\n    return otherArray.concat(array);\n  }\n}\nfunction encodeKey$b(roomId, fragmentId, eventIndex) {\n  return `${roomId}|${encodeUint32(fragmentId)}|${encodeUint32(eventIndex)}`;\n}\nfunction decodeKey$5(key) {\n  const [roomId, fragmentId, eventIndex] = key.split(\"|\");\n  return { roomId, eventKey: new EventKey(decodeUint32(fragmentId), decodeUint32(eventIndex)) };\n}\nfunction encodeEventIdKey(roomId, eventId) {\n  return `${roomId}|${eventId}`;\n}\nfunction decodeEventIdKey(eventIdKey) {\n  const [roomId, eventId] = eventIdKey.split(\"|\");\n  return { roomId, eventId };\n}\nclass Range$1 {\n  constructor(_IDBKeyRange, only, lower, upper, lowerOpen = false, upperOpen = false) {\n    this._IDBKeyRange = _IDBKeyRange;\n    this._only = only;\n    this._lower = lower;\n    this._upper = upper;\n    this._lowerOpen = lowerOpen;\n    this._upperOpen = upperOpen;\n  }\n  asIDBKeyRange(roomId) {\n    try {\n      if (this._only) {\n        return this._IDBKeyRange.only(encodeKey$b(roomId, this._only.fragmentId, this._only.eventIndex));\n      }\n      if (this._lower && !this._upper) {\n        return this._IDBKeyRange.bound(encodeKey$b(roomId, this._lower.fragmentId, this._lower.eventIndex), encodeKey$b(roomId, this._lower.fragmentId, KeyLimits.maxStorageKey), this._lowerOpen, false);\n      }\n      if (!this._lower && this._upper) {\n        return this._IDBKeyRange.bound(encodeKey$b(roomId, this._upper.fragmentId, KeyLimits.minStorageKey), encodeKey$b(roomId, this._upper.fragmentId, this._upper.eventIndex), false, this._upperOpen);\n      }\n      if (this._lower && this._upper) {\n        return this._IDBKeyRange.bound(encodeKey$b(roomId, this._lower.fragmentId, this._lower.eventIndex), encodeKey$b(roomId, this._upper.fragmentId, this._upper.eventIndex), this._lowerOpen, this._upperOpen);\n      }\n    } catch (err) {\n      throw new StorageError(`IDBKeyRange failed with data: ` + JSON.stringify(this), err);\n    }\n  }\n}\nclass TimelineEventStore {\n  constructor(timelineStore) {\n    this._timelineStore = timelineStore;\n  }\n  onlyRange(eventKey) {\n    return new Range$1(this._timelineStore.IDBKeyRange, eventKey);\n  }\n  upperBoundRange(eventKey, open = false) {\n    return new Range$1(this._timelineStore.IDBKeyRange, void 0, void 0, eventKey, void 0, open);\n  }\n  lowerBoundRange(eventKey, open = false) {\n    return new Range$1(this._timelineStore.IDBKeyRange, void 0, eventKey, void 0, open);\n  }\n  boundRange(lower, upper, lowerOpen = false, upperOpen = false) {\n    return new Range$1(this._timelineStore.IDBKeyRange, void 0, lower, upper, lowerOpen, upperOpen);\n  }\n  async lastEvents(roomId, fragmentId, amount) {\n    const eventKey = EventKey.maxKey;\n    eventKey.fragmentId = fragmentId;\n    return this.eventsBefore(roomId, eventKey, amount);\n  }\n  async firstEvents(roomId, fragmentId, amount) {\n    const eventKey = EventKey.minKey;\n    eventKey.fragmentId = fragmentId;\n    return this.eventsAfter(roomId, eventKey, amount);\n  }\n  eventsAfter(roomId, eventKey, amount) {\n    const idbRange = this.lowerBoundRange(eventKey, true).asIDBKeyRange(roomId);\n    return this._timelineStore.selectLimit(idbRange, amount);\n  }\n  async eventsBefore(roomId, eventKey, amount) {\n    const range = this.upperBoundRange(eventKey, true).asIDBKeyRange(roomId);\n    const events = await this._timelineStore.selectLimitReverse(range, amount);\n    events.reverse();\n    return events;\n  }\n  async getEventKeysForIds(roomId, eventIds) {\n    const byEventId = this._timelineStore.index(\"byEventId\");\n    const keys = eventIds.map((eventId) => encodeEventIdKey(roomId, eventId));\n    const results = /* @__PURE__ */ new Map();\n    await byEventId.findExistingKeys(keys, false, (indexKey, pk) => {\n      const { eventId } = decodeEventIdKey(indexKey);\n      const { eventKey } = decodeKey$5(pk);\n      results.set(eventId, eventKey);\n      return false;\n    });\n    return results;\n  }\n  async findFirstOccurringEventId(roomId, eventIds) {\n    const byEventId = this._timelineStore.index(\"byEventId\");\n    const keys = eventIds.map((eventId) => encodeEventIdKey(roomId, eventId));\n    const results = new Array(keys.length);\n    let firstFoundKey;\n    function firstFoundAndPrecedingResolved() {\n      for (let i = 0; i < results.length; ++i) {\n        if (results[i] === void 0) {\n          return;\n        } else if (results[i] === true) {\n          return keys[i];\n        }\n      }\n    }\n    await byEventId.findExistingKeys(keys, false, (key, found) => {\n      const index = keys.indexOf(key);\n      results[index] = found;\n      firstFoundKey = firstFoundAndPrecedingResolved();\n      return !!firstFoundKey;\n    });\n    return firstFoundKey && decodeEventIdKey(firstFoundKey).eventId;\n  }\n  tryInsert(entry, log) {\n    entry.key = encodeKey$b(entry.roomId, entry.fragmentId, entry.eventIndex);\n    entry.eventIdKey = encodeEventIdKey(entry.roomId, entry.event.event_id);\n    return this._timelineStore.tryAdd(entry, log);\n  }\n  update(entry) {\n    this._timelineStore.put(entry);\n  }\n  get(roomId, eventKey) {\n    return this._timelineStore.get(encodeKey$b(roomId, eventKey.fragmentId, eventKey.eventIndex));\n  }\n  getByEventId(roomId, eventId) {\n    return this._timelineStore.index(\"byEventId\").get(encodeEventIdKey(roomId, eventId));\n  }\n  removeAllForRoom(roomId) {\n    const minKey = encodeKey$b(roomId, KeyLimits.minStorageKey, KeyLimits.minStorageKey);\n    const maxKey = encodeKey$b(roomId, KeyLimits.maxStorageKey, KeyLimits.maxStorageKey);\n    const range = this._timelineStore.IDBKeyRange.bound(minKey, maxKey);\n    this._timelineStore.delete(range);\n  }\n}\nconst MIN_UNICODE = \"\\0\";\nconst MAX_UNICODE = \"\\u{10FFFF}\";\nfunction encodeKey$a(roomId, targetEventId, relType, sourceEventId) {\n  return `${roomId}|${targetEventId}|${relType}|${sourceEventId}`;\n}\nfunction decodeKey$4(key) {\n  const [roomId, targetEventId, relType, sourceEventId] = key.split(\"|\");\n  return { roomId, targetEventId, relType, sourceEventId };\n}\nclass TimelineRelationStore {\n  constructor(store) {\n    this._store = store;\n  }\n  add(roomId, targetEventId, relType, sourceEventId) {\n    this._store.add({ key: encodeKey$a(roomId, targetEventId, relType, sourceEventId) });\n  }\n  remove(roomId, targetEventId, relType, sourceEventId) {\n    this._store.delete(encodeKey$a(roomId, targetEventId, relType, sourceEventId));\n  }\n  removeAllForTarget(roomId, targetId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$a(roomId, targetId, MIN_UNICODE, MIN_UNICODE), encodeKey$a(roomId, targetId, MAX_UNICODE, MAX_UNICODE), true, true);\n    this._store.delete(range);\n  }\n  removeAllForRoom(roomId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$a(roomId, MIN_UNICODE, MIN_UNICODE, MIN_UNICODE), encodeKey$a(roomId, MAX_UNICODE, MAX_UNICODE, MAX_UNICODE), true, true);\n    this._store.delete(range);\n  }\n  async getForTargetAndType(roomId, targetId, relType) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$a(roomId, targetId, relType, MIN_UNICODE), encodeKey$a(roomId, targetId, relType, MAX_UNICODE), true, true);\n    const items = await this._store.selectAll(range);\n    return items.map((i) => decodeKey$4(i.key));\n  }\n  async getAllForTarget(roomId, targetId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$a(roomId, targetId, MIN_UNICODE, MIN_UNICODE), encodeKey$a(roomId, targetId, MAX_UNICODE, MAX_UNICODE), true, true);\n    const items = await this._store.selectAll(range);\n    return items.map((i) => decodeKey$4(i.key));\n  }\n}\nfunction encodeKey$9(roomId, eventType, stateKey) {\n  return `${roomId}|${eventType}|${stateKey}`;\n}\nclass RoomStateStore {\n  constructor(idbStore) {\n    this._roomStateStore = idbStore;\n  }\n  get(roomId, type, stateKey) {\n    const key = encodeKey$9(roomId, type, stateKey);\n    return this._roomStateStore.get(key);\n  }\n  getAllForType(roomId, type) {\n    const range = this._roomStateStore.IDBKeyRange.bound(encodeKey$9(roomId, type, \"\"), encodeKey$9(roomId, type, MAX_UNICODE), false, true);\n    return this._roomStateStore.selectAll(range);\n  }\n  set(roomId, event2) {\n    const key = encodeKey$9(roomId, event2.type, event2.state_key);\n    const entry = { roomId, event: event2, key };\n    this._roomStateStore.put(entry);\n  }\n  removeAllForRoom(roomId) {\n    const range = this._roomStateStore.IDBKeyRange.bound(roomId, `${roomId}|${MAX_UNICODE}`, true, true);\n    this._roomStateStore.delete(range);\n  }\n}\nfunction encodeKey$8(roomId, userId) {\n  return `${roomId}|${userId}`;\n}\nfunction decodeKey$3(key) {\n  const [roomId, userId] = key.split(\"|\");\n  return { roomId, userId };\n}\nclass RoomMemberStore {\n  constructor(roomMembersStore) {\n    this._roomMembersStore = roomMembersStore;\n  }\n  get(roomId, userId) {\n    return this._roomMembersStore.get(encodeKey$8(roomId, userId));\n  }\n  set(member) {\n    member.key = encodeKey$8(member.roomId, member.userId);\n    this._roomMembersStore.put(member);\n  }\n  getAll(roomId) {\n    const range = this._roomMembersStore.IDBKeyRange.lowerBound(encodeKey$8(roomId, \"\"));\n    return this._roomMembersStore.selectWhile(range, (member) => {\n      return member.roomId === roomId;\n    });\n  }\n  async getAllUserIds(roomId) {\n    const userIds = [];\n    const range = this._roomMembersStore.IDBKeyRange.lowerBound(encodeKey$8(roomId, \"\"));\n    await this._roomMembersStore.iterateKeys(range, (key) => {\n      const decodedKey = decodeKey$3(key);\n      if (decodedKey.roomId === roomId) {\n        userIds.push(decodedKey.userId);\n        return false;\n      }\n      return true;\n    });\n    return userIds;\n  }\n  removeAllForRoom(roomId) {\n    const range = this._roomMembersStore.IDBKeyRange.bound(roomId, `${roomId}|${MAX_UNICODE}`, true, true);\n    this._roomMembersStore.delete(range);\n  }\n}\nfunction encodeKey$7(roomId, fragmentId) {\n  return `${roomId}|${encodeUint32(fragmentId)}`;\n}\nclass TimelineFragmentStore {\n  constructor(store) {\n    this._store = store;\n  }\n  _allRange(roomId) {\n    try {\n      return this._store.IDBKeyRange.bound(encodeKey$7(roomId, KeyLimits.minStorageKey), encodeKey$7(roomId, KeyLimits.maxStorageKey));\n    } catch (err) {\n      throw new StorageError(`error from IDBKeyRange with roomId ${roomId}`, err);\n    }\n  }\n  all(roomId) {\n    return this._store.selectAll(this._allRange(roomId));\n  }\n  liveFragment(roomId) {\n    return this._store.findReverse(this._allRange(roomId), (fragment) => {\n      return typeof fragment.nextId !== \"number\" && typeof fragment.nextToken !== \"string\";\n    });\n  }\n  add(fragment) {\n    fragment.key = encodeKey$7(fragment.roomId, fragment.id);\n    this._store.add(fragment);\n  }\n  update(fragment) {\n    this._store.put(fragment);\n  }\n  get(roomId, fragmentId) {\n    return this._store.get(encodeKey$7(roomId, fragmentId));\n  }\n  removeAllForRoom(roomId) {\n    this._store.delete(this._allRange(roomId));\n  }\n}\nfunction encodeKey$6(roomId, queueIndex) {\n  return `${roomId}|${encodeUint32(queueIndex)}`;\n}\nfunction decodeKey$2(key) {\n  const [roomId, encodedQueueIndex] = key.split(\"|\");\n  const queueIndex = decodeUint32(encodedQueueIndex);\n  return { roomId, queueIndex };\n}\nclass PendingEventStore {\n  constructor(eventStore) {\n    this._eventStore = eventStore;\n  }\n  async getMaxQueueIndex(roomId) {\n    const range = this._eventStore.IDBKeyRange.bound(encodeKey$6(roomId, KeyLimits.minStorageKey), encodeKey$6(roomId, KeyLimits.maxStorageKey), false, false);\n    const maxKey = await this._eventStore.findMaxKey(range);\n    if (maxKey) {\n      return decodeKey$2(maxKey).queueIndex;\n    }\n  }\n  remove(roomId, queueIndex) {\n    const keyRange = this._eventStore.IDBKeyRange.only(encodeKey$6(roomId, queueIndex));\n    this._eventStore.delete(keyRange);\n  }\n  async exists(roomId, queueIndex) {\n    const keyRange = this._eventStore.IDBKeyRange.only(encodeKey$6(roomId, queueIndex));\n    const key = await this._eventStore.getKey(keyRange);\n    return !!key;\n  }\n  add(pendingEvent) {\n    pendingEvent.key = encodeKey$6(pendingEvent.roomId, pendingEvent.queueIndex);\n    this._eventStore.add(pendingEvent);\n  }\n  update(pendingEvent) {\n    this._eventStore.put(pendingEvent);\n  }\n  getAll() {\n    return this._eventStore.selectAll();\n  }\n  removeAllForRoom(roomId) {\n    const minKey = encodeKey$6(roomId, KeyLimits.minStorageKey);\n    const maxKey = encodeKey$6(roomId, KeyLimits.maxStorageKey);\n    const range = this._eventStore.IDBKeyRange.bound(minKey, maxKey);\n    this._eventStore.delete(range);\n  }\n}\nclass UserIdentityStore {\n  constructor(store) {\n    this._store = store;\n  }\n  get(userId) {\n    return this._store.get(userId);\n  }\n  set(userIdentity) {\n    this._store.put(userIdentity);\n  }\n  remove(userId) {\n    this._store.delete(userId);\n  }\n}\nfunction encodeKey$5(userId, deviceId) {\n  return `${userId}|${deviceId}`;\n}\nfunction decodeKey$1(key) {\n  const [userId, deviceId] = key.split(\"|\");\n  return { userId, deviceId };\n}\nclass DeviceKeyStore {\n  constructor(store) {\n    this._store = store;\n  }\n  async getAllForUserId(userId) {\n    const range = this._store.IDBKeyRange.lowerBound(encodeKey$5(userId, MIN_UNICODE));\n    const entries = await this._store.selectWhile(range, (device) => {\n      return device.deviceKey.user_id === userId;\n    });\n    return entries.map((e) => e.deviceKey);\n  }\n  async getAllDeviceIds(userId) {\n    const deviceIds = [];\n    const range = this._store.IDBKeyRange.lowerBound(encodeKey$5(userId, MIN_UNICODE));\n    await this._store.iterateKeys(range, (key) => {\n      const decodedKey = decodeKey$1(key);\n      if (decodedKey.userId === userId) {\n        deviceIds.push(decodedKey.deviceId);\n        return false;\n      }\n      return true;\n    });\n    return deviceIds;\n  }\n  async get(userId, deviceId) {\n    var _a;\n    return (_a = await this._store.get(encodeKey$5(userId, deviceId))) == null ? void 0 : _a.deviceKey;\n  }\n  set(deviceKey) {\n    this._store.put({\n      key: encodeKey$5(deviceKey.user_id, deviceKey.device_id),\n      curve25519Key: getDeviceCurve25519Key(deviceKey),\n      deviceKey\n    });\n  }\n  async getByCurve25519Key(curve25519Key) {\n    const entry = await this._store.index(\"byCurve25519Key\").get(curve25519Key);\n    return entry == null ? void 0 : entry.deviceKey;\n  }\n  remove(userId, deviceId) {\n    this._store.delete(encodeKey$5(userId, deviceId));\n  }\n  removeAllForUser(userId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$5(userId, MIN_UNICODE), encodeKey$5(userId, MAX_UNICODE), true, true);\n    this._store.delete(range);\n  }\n}\nfunction encodeKey$4(userId, usage) {\n  return `${userId}|${usage}`;\n}\nclass CrossSigningKeyStore {\n  constructor(store) {\n    this._store = store;\n  }\n  async get(userId, deviceId) {\n    var _a;\n    return (_a = await this._store.get(encodeKey$4(userId, deviceId))) == null ? void 0 : _a.crossSigningKey;\n  }\n  set(crossSigningKey) {\n    this._store.put({\n      key: encodeKey$4(crossSigningKey[\"user_id\"], crossSigningKey.usage[0]),\n      crossSigningKey\n    });\n  }\n  remove(userId, usage) {\n    this._store.delete(encodeKey$4(userId, usage));\n  }\n  removeAllForUser(userId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$4(userId, MIN_UNICODE), encodeKey$4(userId, MAX_UNICODE), true, true);\n    this._store.delete(range);\n  }\n}\nfunction encodeKey$3(senderKey, sessionId) {\n  return `${senderKey}|${sessionId}`;\n}\nfunction decodeKey(key) {\n  const [senderKey, sessionId] = key.split(\"|\");\n  return { senderKey, sessionId };\n}\nclass OlmSessionStore {\n  constructor(store) {\n    this._store = store;\n  }\n  async getSessionIds(senderKey) {\n    const sessionIds = [];\n    const range = this._store.IDBKeyRange.lowerBound(encodeKey$3(senderKey, \"\"));\n    await this._store.iterateKeys(range, (key) => {\n      const decodedKey = decodeKey(key);\n      if (decodedKey.senderKey === senderKey) {\n        sessionIds.push(decodedKey.sessionId);\n        return false;\n      }\n      return true;\n    });\n    return sessionIds;\n  }\n  getAll(senderKey) {\n    const range = this._store.IDBKeyRange.lowerBound(encodeKey$3(senderKey, \"\"));\n    return this._store.selectWhile(range, (session) => {\n      return session.senderKey === senderKey;\n    });\n  }\n  get(senderKey, sessionId) {\n    return this._store.get(encodeKey$3(senderKey, sessionId));\n  }\n  set(session) {\n    session.key = encodeKey$3(session.senderKey, session.sessionId);\n    this._store.put(session);\n  }\n  remove(senderKey, sessionId) {\n    this._store.delete(encodeKey$3(senderKey, sessionId));\n  }\n}\nvar BackupStatus = /* @__PURE__ */ ((BackupStatus2) => {\n  BackupStatus2[BackupStatus2[\"NotBackedUp\"] = 0] = \"NotBackedUp\";\n  BackupStatus2[BackupStatus2[\"BackedUp\"] = 1] = \"BackedUp\";\n  return BackupStatus2;\n})(BackupStatus || {});\nvar KeySource = /* @__PURE__ */ ((KeySource2) => {\n  KeySource2[KeySource2[\"DeviceMessage\"] = 1] = \"DeviceMessage\";\n  KeySource2[KeySource2[\"Backup\"] = 2] = \"Backup\";\n  KeySource2[KeySource2[\"Outbound\"] = 3] = \"Outbound\";\n  return KeySource2;\n})(KeySource || {});\nfunction encodeKey$2(roomId, senderKey, sessionId) {\n  return `${roomId}|${senderKey}|${sessionId}`;\n}\nclass InboundGroupSessionStore {\n  constructor(store) {\n    this._store = store;\n  }\n  async has(roomId, senderKey, sessionId) {\n    const key = encodeKey$2(roomId, senderKey, sessionId);\n    const fetchedKey = await this._store.getKey(key);\n    return key === fetchedKey;\n  }\n  get(roomId, senderKey, sessionId) {\n    return this._store.get(encodeKey$2(roomId, senderKey, sessionId));\n  }\n  set(session) {\n    const storageEntry = session;\n    storageEntry.key = encodeKey$2(session.roomId, session.senderKey, session.sessionId);\n    this._store.put(storageEntry);\n  }\n  removeAllForRoom(roomId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$2(roomId, MIN_UNICODE, MIN_UNICODE), encodeKey$2(roomId, MAX_UNICODE, MAX_UNICODE));\n    this._store.delete(range);\n  }\n  countNonBackedUpSessions() {\n    return this._store.index(\"byBackup\").count(this._store.IDBKeyRange.only(0));\n  }\n  getFirstNonBackedUpSessions(amount) {\n    return this._store.index(\"byBackup\").selectLimit(this._store.IDBKeyRange.only(0), amount);\n  }\n  async markAsBackedUp(roomId, senderKey, sessionId) {\n    const entry = await this._store.get(encodeKey$2(roomId, senderKey, sessionId));\n    if (entry) {\n      entry.backup = 1;\n      this._store.put(entry);\n    }\n  }\n  async markAllAsNotBackedUp() {\n    const backedUpKey = this._store.IDBKeyRange.only(1);\n    let count = 0;\n    await this._store.index(\"byBackup\").iterateValues(backedUpKey, (val, key, cur) => {\n      val.backup = 0;\n      cur.update(val);\n      count += 1;\n      return false;\n    });\n    return count;\n  }\n}\nclass OutboundGroupSessionStore {\n  constructor(store) {\n    this._store = store;\n  }\n  remove(roomId) {\n    this._store.delete(roomId);\n  }\n  get(roomId) {\n    return this._store.get(roomId);\n  }\n  set(session) {\n    this._store.put(session);\n  }\n}\nfunction encodeKey$1(roomId, sessionId, messageIndex) {\n  return `${roomId}|${sessionId}|${messageIndex}`;\n}\nclass GroupSessionDecryptionStore {\n  constructor(store) {\n    this._store = store;\n  }\n  get(roomId, sessionId, messageIndex) {\n    return this._store.get(encodeKey$1(roomId, sessionId, messageIndex));\n  }\n  set(roomId, sessionId, messageIndex, decryption) {\n    decryption.key = encodeKey$1(roomId, sessionId, messageIndex);\n    this._store.put(decryption);\n  }\n  removeAllForRoom(roomId) {\n    const range = this._store.IDBKeyRange.bound(encodeKey$1(roomId, MIN_UNICODE, MIN_UNICODE), encodeKey$1(roomId, MAX_UNICODE, MAX_UNICODE));\n    this._store.delete(range);\n  }\n}\nfunction encodeScopeTypeKey(scope, type) {\n  return `${scope}|${type}`;\n}\nclass OperationStore {\n  constructor(store) {\n    this._store = store;\n  }\n  getAll() {\n    return this._store.selectAll();\n  }\n  async getAllByTypeAndScope(type, scope) {\n    const key = encodeScopeTypeKey(scope, type);\n    const results = [];\n    await this._store.index(\"byScopeAndType\").iterateWhile(key, (value) => {\n      if (value.scopeTypeKey !== key) {\n        return false;\n      }\n      results.push(value);\n      return true;\n    });\n    return results;\n  }\n  add(operation) {\n    operation.scopeTypeKey = encodeScopeTypeKey(operation.scope, operation.type);\n    this._store.add(operation);\n  }\n  update(operation) {\n    this._store.put(operation);\n  }\n  remove(id) {\n    this._store.delete(id);\n  }\n  async removeAllForScope(scope) {\n    const range = this._store.IDBKeyRange.bound(encodeScopeTypeKey(scope, MIN_UNICODE), encodeScopeTypeKey(scope, MAX_UNICODE));\n    const index = this._store.index(\"byScopeAndType\");\n    await index.iterateValues(range, (_, __, cur) => {\n      cur.delete();\n      return true;\n    });\n    return;\n  }\n}\nclass AccountDataStore {\n  constructor(store) {\n    this._store = store;\n  }\n  async get(type) {\n    return await this._store.get(type);\n  }\n  set(event2) {\n    this._store.put(event2);\n  }\n  async getAll() {\n    return await this._store.selectAll();\n  }\n}\nfunction encodeKey(intent, roomId, callId) {\n  return `${intent}|${roomId}|${callId}`;\n}\nfunction decodeStorageEntry(storageEntry) {\n  const [intent, roomId, callId] = storageEntry.key.split(\"|\");\n  return { intent, roomId, callId, timestamp: storageEntry.timestamp };\n}\nclass CallStore {\n  constructor(idbStore) {\n    this._callStore = idbStore;\n  }\n  async getByIntent(intent) {\n    const range = this._callStore.IDBKeyRange.bound(encodeKey(intent, MIN_UNICODE, MIN_UNICODE), encodeKey(intent, MAX_UNICODE, MAX_UNICODE), true, true);\n    const storageEntries = await this._callStore.selectAll(range);\n    return storageEntries.map((e) => decodeStorageEntry(e));\n  }\n  async getByIntentAndRoom(intent, roomId) {\n    const range = this._callStore.IDBKeyRange.bound(encodeKey(intent, roomId, MIN_UNICODE), encodeKey(intent, roomId, MAX_UNICODE), true, true);\n    const storageEntries = await this._callStore.selectAll(range);\n    return storageEntries.map((e) => decodeStorageEntry(e));\n  }\n  add(entry) {\n    const storageEntry = {\n      key: encodeKey(entry.intent, entry.roomId, entry.callId),\n      timestamp: entry.timestamp\n    };\n    this._callStore.add(storageEntry);\n  }\n  remove(intent, roomId, callId) {\n    this._callStore.delete(encodeKey(intent, roomId, callId));\n  }\n}\nclass WriteErrorInfo {\n  constructor(error, refItem, operationName, keys) {\n    this.error = error;\n    this.refItem = refItem;\n    this.operationName = operationName;\n    this.keys = keys;\n  }\n}\nclass Transaction {\n  constructor(txn, allowedStoreNames, storage) {\n    this._txn = txn;\n    this._allowedStoreNames = allowedStoreNames;\n    this._stores = {};\n    this._storage = storage;\n    this._writeErrors = [];\n  }\n  get idbFactory() {\n    return this._storage.idbFactory;\n  }\n  get IDBKeyRange() {\n    return this._storage.IDBKeyRange;\n  }\n  get databaseName() {\n    return this._storage.databaseName;\n  }\n  get logger() {\n    return this._storage.logger;\n  }\n  _idbStore(name) {\n    if (!this._allowedStoreNames.includes(name)) {\n      throw new StorageError(`Invalid store for transaction: ${name}, only ${this._allowedStoreNames.join(\", \")} are allowed.`);\n    }\n    return new Store(this._txn.objectStore(name), this);\n  }\n  _store(name, mapStore) {\n    if (!this._stores[name]) {\n      const idbStore = this._idbStore(name);\n      this._stores[name] = mapStore(idbStore);\n    }\n    return this._stores[name];\n  }\n  get session() {\n    return this._store(StoreNames.session, (idbStore) => new SessionStore(idbStore, this._storage.localStorage));\n  }\n  get roomSummary() {\n    return this._store(StoreNames.roomSummary, (idbStore) => new RoomSummaryStore(idbStore));\n  }\n  get archivedRoomSummary() {\n    return this._store(StoreNames.archivedRoomSummary, (idbStore) => new RoomSummaryStore(idbStore));\n  }\n  get invites() {\n    return this._store(StoreNames.invites, (idbStore) => new InviteStore(idbStore));\n  }\n  get timelineFragments() {\n    return this._store(StoreNames.timelineFragments, (idbStore) => new TimelineFragmentStore(idbStore));\n  }\n  get timelineEvents() {\n    return this._store(StoreNames.timelineEvents, (idbStore) => new TimelineEventStore(idbStore));\n  }\n  get timelineRelations() {\n    return this._store(StoreNames.timelineRelations, (idbStore) => new TimelineRelationStore(idbStore));\n  }\n  get roomState() {\n    return this._store(StoreNames.roomState, (idbStore) => new RoomStateStore(idbStore));\n  }\n  get roomMembers() {\n    return this._store(StoreNames.roomMembers, (idbStore) => new RoomMemberStore(idbStore));\n  }\n  get pendingEvents() {\n    return this._store(StoreNames.pendingEvents, (idbStore) => new PendingEventStore(idbStore));\n  }\n  get userIdentities() {\n    return this._store(StoreNames.userIdentities, (idbStore) => new UserIdentityStore(idbStore));\n  }\n  get deviceKeys() {\n    return this._store(StoreNames.deviceKeys, (idbStore) => new DeviceKeyStore(idbStore));\n  }\n  get crossSigningKeys() {\n    return this._store(StoreNames.crossSigningKeys, (idbStore) => new CrossSigningKeyStore(idbStore));\n  }\n  get olmSessions() {\n    return this._store(StoreNames.olmSessions, (idbStore) => new OlmSessionStore(idbStore));\n  }\n  get inboundGroupSessions() {\n    return this._store(StoreNames.inboundGroupSessions, (idbStore) => new InboundGroupSessionStore(idbStore));\n  }\n  get outboundGroupSessions() {\n    return this._store(StoreNames.outboundGroupSessions, (idbStore) => new OutboundGroupSessionStore(idbStore));\n  }\n  get groupSessionDecryptions() {\n    return this._store(StoreNames.groupSessionDecryptions, (idbStore) => new GroupSessionDecryptionStore(idbStore));\n  }\n  get operations() {\n    return this._store(StoreNames.operations, (idbStore) => new OperationStore(idbStore));\n  }\n  get accountData() {\n    return this._store(StoreNames.accountData, (idbStore) => new AccountDataStore(idbStore));\n  }\n  get calls() {\n    return this._store(StoreNames.calls, (idbStore) => new CallStore(idbStore));\n  }\n  async complete(log) {\n    try {\n      await txnAsPromise(this._txn);\n    } catch (err) {\n      if (this._writeErrors.length) {\n        this._logWriteErrors(log);\n        throw this._writeErrors[0].error;\n      }\n      throw err;\n    }\n  }\n  getCause(error) {\n    if (error instanceof StorageError) {\n      if (error.errcode === \"AbortError\" && this._writeErrors.length) {\n        return this._writeErrors[0].error;\n      }\n    }\n    return error;\n  }\n  abort(log) {\n    try {\n      this._txn.abort();\n    } catch (abortErr) {\n      log == null ? void 0 : log.set(\"couldNotAbortTxn\", true);\n    }\n    if (this._writeErrors.length) {\n      this._logWriteErrors(log);\n    }\n  }\n  addWriteError(error, refItem, operationName, keys) {\n    if (error.errcode !== \"AbortError\" || this._writeErrors.length === 0) {\n      this._writeErrors.push(new WriteErrorInfo(error, refItem, operationName, keys));\n    }\n  }\n  _logWriteErrors(parentItem) {\n    const callback = (errorGroupItem) => {\n      if (!parentItem) {\n        errorGroupItem.set(\"allowedStoreNames\", this._allowedStoreNames);\n      }\n      for (const info of this._writeErrors) {\n        errorGroupItem.wrap({ l: info.operationName, id: info.keys }, (item) => {\n          if (info.refItem) {\n            item.refDetached(info.refItem);\n          }\n          item.catch(info.error);\n        });\n      }\n    };\n    const label = `${this._writeErrors.length} storage write operation(s) failed`;\n    if (parentItem) {\n      parentItem.wrap(label, callback);\n    } else {\n      this.logger.run(label, callback);\n    }\n  }\n}\nconst WEBKITEARLYCLOSETXNBUG_BOGUS_KEY = \"782rh281re38-boguskey\";\nclass Storage {\n  constructor(idbDatabase, idbFactory, _IDBKeyRange, hasWebkitEarlyCloseTxnBug, localStorage2, logger) {\n    this._db = idbDatabase;\n    this.idbFactory = idbFactory;\n    this.IDBKeyRange = _IDBKeyRange;\n    this._hasWebkitEarlyCloseTxnBug = hasWebkitEarlyCloseTxnBug;\n    this.storeNames = StoreNames;\n    this.localStorage = localStorage2;\n    this.logger = logger;\n  }\n  _validateStoreNames(storeNames) {\n    const idx = storeNames.findIndex((name) => !STORE_NAMES.includes(name));\n    if (idx !== -1) {\n      throw new StorageError(`Tried top, a transaction unknown store ${storeNames[idx]}`);\n    }\n  }\n  async readTxn(storeNames) {\n    this._validateStoreNames(storeNames);\n    try {\n      const txn = this._db.transaction(storeNames, \"readonly\");\n      if (this._hasWebkitEarlyCloseTxnBug) {\n        await reqAsPromise(txn.objectStore(storeNames[0]).get(WEBKITEARLYCLOSETXNBUG_BOGUS_KEY));\n      }\n      return new Transaction(txn, storeNames, this);\n    } catch (err) {\n      throw new StorageError(\"readTxn failed\", err);\n    }\n  }\n  async readWriteTxn(storeNames) {\n    this._validateStoreNames(storeNames);\n    try {\n      const txn = this._db.transaction(storeNames, \"readwrite\");\n      if (this._hasWebkitEarlyCloseTxnBug) {\n        await reqAsPromise(txn.objectStore(storeNames[0]).get(WEBKITEARLYCLOSETXNBUG_BOGUS_KEY));\n      }\n      return new Transaction(txn, storeNames, this);\n    } catch (err) {\n      throw new StorageError(\"readWriteTxn failed\", err);\n    }\n  }\n  close() {\n    this._db.close();\n  }\n  get databaseName() {\n    return this._db.name;\n  }\n}\nasync function exportSession(db) {\n  const txn = db.transaction(STORE_NAMES, \"readonly\");\n  const data = {};\n  await Promise.all(STORE_NAMES.map(async (name) => {\n    const results = data[name] = [];\n    const store = txn.objectStore(name);\n    await iterateCursor(store.openCursor(), (value) => {\n      results.push(value);\n      return NOT_DONE;\n    });\n  }));\n  return data;\n}\nasync function importSession(db, data) {\n  const txn = db.transaction(STORE_NAMES, \"readwrite\");\n  for (const name of STORE_NAMES) {\n    const store = txn.objectStore(name);\n    for (const value of data[name]) {\n      store.add(value);\n    }\n  }\n  await txnAsPromise(txn);\n}\nfunction getPrevContentFromStateEvent(event2) {\n  var _a;\n  return ((_a = event2.unsigned) == null ? void 0 : _a.prev_content) || event2.prev_content;\n}\nconst REDACTION_TYPE = \"m.room.redaction\";\nfunction isRedacted(event2) {\n  var _a;\n  return !!((_a = event2 == null ? void 0 : event2.unsigned) == null ? void 0 : _a.redacted_because);\n}\nvar RoomStatus = /* @__PURE__ */ ((RoomStatus2) => {\n  RoomStatus2[RoomStatus2[\"None\"] = 1] = \"None\";\n  RoomStatus2[RoomStatus2[\"BeingCreated\"] = 2] = \"BeingCreated\";\n  RoomStatus2[RoomStatus2[\"Invited\"] = 4] = \"Invited\";\n  RoomStatus2[RoomStatus2[\"Joined\"] = 8] = \"Joined\";\n  RoomStatus2[RoomStatus2[\"Replaced\"] = 16] = \"Replaced\";\n  RoomStatus2[RoomStatus2[\"Archived\"] = 32] = \"Archived\";\n  return RoomStatus2;\n})(RoomStatus || {});\nvar RoomVisibility = /* @__PURE__ */ ((RoomVisibility2) => {\n  RoomVisibility2[RoomVisibility2[\"DirectMessage\"] = 0] = \"DirectMessage\";\n  RoomVisibility2[RoomVisibility2[\"Private\"] = 1] = \"Private\";\n  RoomVisibility2[RoomVisibility2[\"Public\"] = 2] = \"Public\";\n  return RoomVisibility2;\n})(RoomVisibility || {});\nvar RoomType = /* @__PURE__ */ ((RoomType2) => {\n  RoomType2[RoomType2[\"World\"] = 0] = \"World\";\n  RoomType2[RoomType2[\"Profile\"] = 1] = \"Profile\";\n  return RoomType2;\n})(RoomType || {});\nfunction iterateResponseStateEvents(roomResponse, callback) {\n  var _a, _b;\n  let promises = void 0;\n  const callCallback = (stateEvent) => {\n    const result = callback(stateEvent);\n    if (result instanceof Promise) {\n      promises = promises != null ? promises : [];\n      promises.push(result);\n    }\n  };\n  const stateEvents = (_a = roomResponse.state) == null ? void 0 : _a.events;\n  if (stateEvents) {\n    for (let i = 0; i < stateEvents.length; i++) {\n      callCallback(stateEvents[i]);\n    }\n  }\n  let timelineEvents = (_b = roomResponse.timeline) == null ? void 0 : _b.events;\n  if (timelineEvents) {\n    for (let i = 0; i < timelineEvents.length; i++) {\n      const event2 = timelineEvents[i];\n      if (typeof event2.state_key === \"string\") {\n        callCallback(event2);\n      }\n    }\n  }\n  if (promises) {\n    return Promise.all(promises).then(() => void 0);\n  }\n}\nconst EVENT_TYPE$1 = \"m.room.member\";\nclass RoomMember {\n  constructor(data) {\n    this._data = data;\n  }\n  static fromUserId(roomId, userId, membership) {\n    return new RoomMember({ roomId, userId, membership });\n  }\n  static fromMemberEvent(roomId, memberEvent) {\n    const userId = memberEvent == null ? void 0 : memberEvent.state_key;\n    if (typeof userId !== \"string\") {\n      return;\n    }\n    const content = memberEvent.content;\n    const prevContent = getPrevContentFromStateEvent(memberEvent);\n    const membership = content == null ? void 0 : content.membership;\n    const displayName = (content == null ? void 0 : content.displayname) || (prevContent == null ? void 0 : prevContent.displayname);\n    const avatarUrl = (content == null ? void 0 : content.avatar_url) || (prevContent == null ? void 0 : prevContent.avatar_url);\n    return this._validateAndCreateMember(roomId, userId, membership, displayName, avatarUrl);\n  }\n  static fromReplacingMemberEvent(roomId, memberEvent) {\n    const userId = memberEvent && memberEvent.state_key;\n    if (typeof userId !== \"string\") {\n      return;\n    }\n    const content = getPrevContentFromStateEvent(memberEvent);\n    return this._validateAndCreateMember(roomId, userId, content == null ? void 0 : content.membership, content == null ? void 0 : content.displayname, content == null ? void 0 : content.avatar_url);\n  }\n  static _validateAndCreateMember(roomId, userId, membership, displayName, avatarUrl) {\n    if (typeof membership !== \"string\") {\n      return;\n    }\n    return new RoomMember({\n      roomId,\n      userId,\n      membership,\n      avatarUrl,\n      displayName\n    });\n  }\n  get membership() {\n    return this._data.membership;\n  }\n  get displayName() {\n    return this._data.displayName;\n  }\n  get name() {\n    return this._data.displayName || this._data.userId;\n  }\n  get avatarUrl() {\n    return this._data.avatarUrl;\n  }\n  get roomId() {\n    return this._data.roomId;\n  }\n  get userId() {\n    return this._data.userId;\n  }\n  serialize() {\n    return this._data;\n  }\n  equals(other) {\n    const data = this._data;\n    const otherData = other._data;\n    return data.roomId === otherData.roomId && data.userId === otherData.userId && data.membership === otherData.membership && data.displayName === otherData.displayName && data.avatarUrl === otherData.avatarUrl;\n  }\n}\nclass MemberChange {\n  constructor(member, previousMembership) {\n    this.member = member;\n    this.previousMembership = previousMembership;\n  }\n  get roomId() {\n    return this.member.roomId;\n  }\n  get userId() {\n    return this.member.userId;\n  }\n  get membership() {\n    return this.member.membership;\n  }\n  get wasInvited() {\n    return this.previousMembership === \"invite\" && this.membership !== \"invite\";\n  }\n  get hasLeft() {\n    return this.previousMembership === \"join\" && this.membership !== \"join\";\n  }\n  get hasJoined() {\n    return this.previousMembership !== \"join\" && this.membership === \"join\";\n  }\n}\nfunction pkSign(olmUtil, obj, key, userId, pubKey) {\n  let createdKey = false;\n  if (key instanceof Uint8Array) {\n    const keyObj = new olmUtil.PkSigning();\n    pubKey = keyObj.init_with_seed(key);\n    key = keyObj;\n    createdKey = true;\n  }\n  const sigs = obj.signatures || {};\n  delete obj.signatures;\n  const unsigned = obj.unsigned;\n  if (obj.unsigned)\n    delete obj.unsigned;\n  try {\n    const mysigs = sigs[userId] || {};\n    sigs[userId] = mysigs;\n    return mysigs[\"ed25519:\" + pubKey] = key.sign(anotherjson.stringify(obj));\n  } finally {\n    obj.signatures = sigs;\n    if (unsigned)\n      obj.unsigned = unsigned;\n    if (createdKey) {\n      key.free();\n    }\n  }\n}\nclass BaseSASVerificationStage {\n  constructor(options) {\n    this.options = options;\n    this.ourUserId = options.ourUserId;\n    this.ourUserDeviceId = options.ourUserDeviceId;\n    this.otherUserId = options.otherUserId;\n    this.log = options.log;\n    this.olmSAS = options.olmSas;\n    this.olmUtil = options.olmUtil;\n    this.channel = options.channel;\n    this.e2eeAccount = options.e2eeAccount;\n    this.deviceTracker = options.deviceTracker;\n    this.hsApi = options.hsApi;\n    this.eventEmitter = options.eventEmitter;\n  }\n  setNextStage(stage) {\n    this._nextStage = stage;\n  }\n  get nextStage() {\n    return this._nextStage;\n  }\n  get otherUserDeviceId() {\n    const id = this.channel.otherUserDeviceId;\n    if (!id) {\n      throw new Error(\"Accessed otherUserDeviceId before it was set in channel!\");\n    }\n    return id;\n  }\n}\nvar VerificationEventType = /* @__PURE__ */ ((VerificationEventType2) => {\n  VerificationEventType2[\"Request\"] = \"m.key.verification.request\";\n  VerificationEventType2[\"Ready\"] = \"m.key.verification.ready\";\n  VerificationEventType2[\"Start\"] = \"m.key.verification.start\";\n  VerificationEventType2[\"Accept\"] = \"m.key.verification.accept\";\n  VerificationEventType2[\"Key\"] = \"m.key.verification.key\";\n  VerificationEventType2[\"Cancel\"] = \"m.key.verification.cancel\";\n  VerificationEventType2[\"Mac\"] = \"m.key.verification.mac\";\n  VerificationEventType2[\"Done\"] = \"m.key.verification.done\";\n  return VerificationEventType2;\n})(VerificationEventType || {});\nvar CancelReason = /* @__PURE__ */ ((CancelReason2) => {\n  CancelReason2[\"UserCancelled\"] = \"m.user\";\n  CancelReason2[\"TimedOut\"] = \"m.timeout\";\n  CancelReason2[\"UnknownTransaction\"] = \"m.unknown_transaction\";\n  CancelReason2[\"UnknownMethod\"] = \"m.unknown_method\";\n  CancelReason2[\"UnexpectedMessage\"] = \"m.unexpected_message\";\n  CancelReason2[\"KeyMismatch\"] = \"m.key_mismatch\";\n  CancelReason2[\"UserMismatch\"] = \"m.user_mismatch\";\n  CancelReason2[\"InvalidMessage\"] = \"m.invalid_message\";\n  CancelReason2[\"OtherDeviceAccepted\"] = \"m.accepted\";\n  CancelReason2[\"MismatchedCommitment\"] = \"m.mismatched_commitment\";\n  CancelReason2[\"MismatchedSAS\"] = \"m.mismatched_sas\";\n  return CancelReason2;\n})(CancelReason || {});\nconst KEY_AGREEMENT_LIST = [\"curve25519-hkdf-sha256\", \"curve25519\"];\nconst HASHES_LIST = [\"sha256\"];\nconst MAC_LIST = [\n  \"hkdf-hmac-sha256.v2\",\n  \"org.matrix.msc3783.hkdf-hmac-sha256\",\n  \"hkdf-hmac-sha256\",\n  \"hmac-sha256\"\n];\nconst SAS_LIST = [\"decimal\", \"emoji\"];\nconst SAS_SET = new Set(SAS_LIST);\nconst emojiMapping = [\n  [\"\\u{1F436}\", \"dog\"],\n  [\"\\u{1F431}\", \"cat\"],\n  [\"\\u{1F981}\", \"lion\"],\n  [\"\\u{1F40E}\", \"horse\"],\n  [\"\\u{1F984}\", \"unicorn\"],\n  [\"\\u{1F437}\", \"pig\"],\n  [\"\\u{1F418}\", \"elephant\"],\n  [\"\\u{1F430}\", \"rabbit\"],\n  [\"\\u{1F43C}\", \"panda\"],\n  [\"\\u{1F413}\", \"rooster\"],\n  [\"\\u{1F427}\", \"penguin\"],\n  [\"\\u{1F422}\", \"turtle\"],\n  [\"\\u{1F41F}\", \"fish\"],\n  [\"\\u{1F419}\", \"octopus\"],\n  [\"\\u{1F98B}\", \"butterfly\"],\n  [\"\\u{1F337}\", \"flower\"],\n  [\"\\u{1F333}\", \"tree\"],\n  [\"\\u{1F335}\", \"cactus\"],\n  [\"\\u{1F344}\", \"mushroom\"],\n  [\"\\u{1F30F}\", \"globe\"],\n  [\"\\u{1F319}\", \"moon\"],\n  [\"\\u2601\\uFE0F\", \"cloud\"],\n  [\"\\u{1F525}\", \"fire\"],\n  [\"\\u{1F34C}\", \"banana\"],\n  [\"\\u{1F34E}\", \"apple\"],\n  [\"\\u{1F353}\", \"strawberry\"],\n  [\"\\u{1F33D}\", \"corn\"],\n  [\"\\u{1F355}\", \"pizza\"],\n  [\"\\u{1F382}\", \"cake\"],\n  [\"\\u2764\\uFE0F\", \"heart\"],\n  [\"\\u{1F642}\", \"smiley\"],\n  [\"\\u{1F916}\", \"robot\"],\n  [\"\\u{1F3A9}\", \"hat\"],\n  [\"\\u{1F453}\", \"glasses\"],\n  [\"\\u{1F527}\", \"spanner\"],\n  [\"\\u{1F385}\", \"santa\"],\n  [\"\\u{1F44D}\", \"thumbs up\"],\n  [\"\\u2602\\uFE0F\", \"umbrella\"],\n  [\"\\u231B\", \"hourglass\"],\n  [\"\\u23F0\", \"clock\"],\n  [\"\\u{1F381}\", \"gift\"],\n  [\"\\u{1F4A1}\", \"light bulb\"],\n  [\"\\u{1F4D5}\", \"book\"],\n  [\"\\u270F\\uFE0F\", \"pencil\"],\n  [\"\\u{1F4CE}\", \"paperclip\"],\n  [\"\\u2702\\uFE0F\", \"scissors\"],\n  [\"\\u{1F512}\", \"lock\"],\n  [\"\\u{1F511}\", \"key\"],\n  [\"\\u{1F528}\", \"hammer\"],\n  [\"\\u260E\\uFE0F\", \"telephone\"],\n  [\"\\u{1F3C1}\", \"flag\"],\n  [\"\\u{1F682}\", \"train\"],\n  [\"\\u{1F6B2}\", \"bicycle\"],\n  [\"\\u2708\\uFE0F\", \"aeroplane\"],\n  [\"\\u{1F680}\", \"rocket\"],\n  [\"\\u{1F3C6}\", \"trophy\"],\n  [\"\\u26BD\", \"ball\"],\n  [\"\\u{1F3B8}\", \"guitar\"],\n  [\"\\u{1F3BA}\", \"trumpet\"],\n  [\"\\u{1F514}\", \"bell\"],\n  [\"\\u2693\\uFE0F\", \"anchor\"],\n  [\"\\u{1F3A7}\", \"headphones\"],\n  [\"\\u{1F4C1}\", \"folder\"],\n  [\"\\u{1F4CC}\", \"pin\"]\n];\nfunction generateEmojiSas(sasBytes) {\n  const emojis = [\n    sasBytes[0] >> 2,\n    (sasBytes[0] & 3) << 4 | sasBytes[1] >> 4,\n    (sasBytes[1] & 15) << 2 | sasBytes[2] >> 6,\n    sasBytes[2] & 63,\n    sasBytes[3] >> 2,\n    (sasBytes[3] & 3) << 4 | sasBytes[4] >> 4,\n    (sasBytes[4] & 15) << 2 | sasBytes[5] >> 6\n  ];\n  return emojis.map((num) => emojiMapping[num]);\n}\nconst macMethods = {\n  \"hkdf-hmac-sha256\": \"calculate_mac\",\n  \"org.matrix.msc3783.hkdf-hmac-sha256\": \"calculate_mac_fixed_base64\",\n  \"hkdf-hmac-sha256.v2\": \"calculate_mac_fixed_base64\",\n  \"hmac-sha256\": \"calculate_mac_long_kdf\"\n};\nfunction createCalculateMAC(olmSAS, method) {\n  return function(input, info, log) {\n    return log.wrap({ l: \"calculate MAC\", method }, () => {\n      const mac = olmSAS[macMethods[method]](input, info);\n      return mac;\n    });\n  };\n}\nclass SendDoneStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendDoneStage.completeStage\", async (log) => {\n      await this.channel.send(VerificationEventType.Done, {}, log);\n      await this.channel.waitForEvent(VerificationEventType.Done);\n      this.eventEmitter.emit(\"VerificationCompleted\", this.otherUserDeviceId);\n    });\n  }\n}\nclass VerifyMacStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"VerifyMacStage.completeStage\", async (log) => {\n      const acceptMessage = this.channel.acceptMessage.content;\n      const macMethod = acceptMessage.message_authentication_code;\n      const calculateMAC = createCalculateMAC(this.olmSAS, macMethod);\n      await this.checkMAC(calculateMAC, log);\n      this.setNextStage(new SendDoneStage(this.options));\n    });\n  }\n  async checkMAC(calculateMAC, log) {\n    const { content } = this.channel.getReceivedMessage(VerificationEventType.Mac);\n    const baseInfo = \"MATRIX_KEY_VERIFICATION_MAC\" + this.otherUserId + this.otherUserDeviceId + this.ourUserId + this.ourUserDeviceId + this.channel.id;\n    const calculatedMAC = calculateMAC(Object.keys(content.mac).sort().join(\",\"), baseInfo + \"KEY_IDS\", log);\n    if (content.keys !== calculatedMAC) {\n      log.log({ l: \"MAC verification failed for keys field\", keys: content.keys, calculated: calculatedMAC });\n      this.channel.cancelVerification(CancelReason.KeyMismatch);\n      return;\n    }\n    await this.verifyKeys(content.mac, (keyId, key, keyInfo) => {\n      const calculatedMAC2 = calculateMAC(key, baseInfo + keyId, log);\n      const matches = keyInfo === calculatedMAC2;\n      if (!matches) {\n        log.log({ l: \"Mac verification failed for key\", keyMac: keyInfo, calculatedMAC: calculatedMAC2, keyId, key });\n        this.channel.cancelVerification(CancelReason.KeyMismatch);\n      }\n      return matches;\n    }, log);\n  }\n  async verifyKeys(keys, verifier, log) {\n    const userId = this.otherUserId;\n    for (const [keyId, keyInfo] of Object.entries(keys)) {\n      const deviceIdOrMSK = keyId.split(\":\", 2)[1];\n      const device = await this.deviceTracker.deviceForId(userId, deviceIdOrMSK, this.hsApi, log);\n      if (device) {\n        if (verifier(keyId, getDeviceEd25519Key(device), keyInfo)) {\n          await log.wrap(\"signing device\", async (log2) => {\n            const signedKey = await this.options.crossSigning.signDevice(device.device_id, log2);\n            log2.set(\"success\", !!signedKey);\n          });\n        }\n      } else {\n        const key = await this.deviceTracker.getCrossSigningKeyForUser(userId, KeyUsage.Master, this.hsApi, log);\n        if (!key) {\n          log.log({ l: \"Fetching msk failed\", userId });\n          throw new Error(\"Fetching MSK for user failed!\");\n        }\n        const masterKey = getKeyEd25519Key(key);\n        if (masterKey && verifier(keyId, masterKey, keyInfo)) {\n          await log.wrap(\"signing user\", async (log2) => {\n            const signedKey = await this.options.crossSigning.signUser(userId, log2);\n            log2.set(\"success\", !!signedKey);\n          });\n        }\n      }\n    }\n  }\n}\nclass SendMacStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendMacStage.completeStage\", async (log) => {\n      const acceptMessage = this.channel.acceptMessage.content;\n      const macMethod = acceptMessage.message_authentication_code;\n      const calculateMAC = createCalculateMAC(this.olmSAS, macMethod);\n      await this.sendMAC(calculateMAC, log);\n      await this.channel.waitForEvent(VerificationEventType.Mac);\n      this.setNextStage(new VerifyMacStage(this.options));\n    });\n  }\n  async sendMAC(calculateMAC, log) {\n    const mac = {};\n    const keyList = [];\n    const baseInfo = \"MATRIX_KEY_VERIFICATION_MAC\" + this.ourUserId + this.ourUserDeviceId + this.otherUserId + this.otherUserDeviceId + this.channel.id;\n    const deviceKeyId = `ed25519:${this.ourUserDeviceId}`;\n    const deviceKeys = this.e2eeAccount.getUnsignedDeviceKey();\n    mac[deviceKeyId] = calculateMAC(deviceKeys.keys[deviceKeyId], baseInfo + deviceKeyId, log);\n    keyList.push(deviceKeyId);\n    const key = await this.deviceTracker.getCrossSigningKeyForUser(this.ourUserId, KeyUsage.Master, this.hsApi, log);\n    if (!key) {\n      log.log({ l: \"Fetching msk failed\", userId: this.ourUserId });\n      throw new Error(\"Fetching MSK for user failed!\");\n    }\n    const crossSigningKey = getKeyEd25519Key(key);\n    if (crossSigningKey) {\n      const crossSigningKeyId = `ed25519:${crossSigningKey}`;\n      mac[crossSigningKeyId] = calculateMAC(crossSigningKey, baseInfo + crossSigningKeyId, log);\n      keyList.push(crossSigningKeyId);\n    }\n    const keys = calculateMAC(keyList.sort().join(\",\"), baseInfo + \"KEY_IDS\", log);\n    await this.channel.send(VerificationEventType.Mac, { mac, keys }, log);\n  }\n}\nclass VerificationCancelledError extends Error {\n  get name() {\n    return \"VerificationCancelledError\";\n  }\n  get message() {\n    return \"Verification is cancelled!\";\n  }\n}\nconst calculateKeyAgreement = {\n  \"curve25519-hkdf-sha256\": function(sas, olmSAS, bytes) {\n    const ourInfo = `${sas.our.userId}|${sas.our.deviceId}|${sas.our.publicKey}|`;\n    const theirInfo = `${sas.their.userId}|${sas.their.deviceId}|${sas.their.publicKey}|`;\n    const sasInfo = \"MATRIX_KEY_VERIFICATION_SAS|\" + (sas.initiatedByMe ? ourInfo + theirInfo : theirInfo + ourInfo) + sas.id;\n    return olmSAS.generate_bytes(sasInfo, bytes);\n  },\n  \"curve25519\": function(sas, olmSAS, bytes) {\n    const ourInfo = `${sas.our.userId}${sas.our.deviceId}`;\n    const theirInfo = `${sas.their.userId}${sas.their.deviceId}`;\n    const sasInfo = \"MATRIX_KEY_VERIFICATION_SAS\" + (sas.initiatedByMe ? ourInfo + theirInfo : theirInfo + ourInfo) + sas.id;\n    return olmSAS.generate_bytes(sasInfo, bytes);\n  }\n};\nclass CalculateSASStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"CalculateSASStage.completeStage\", async (log) => {\n      if (this.channel.initiatedByUs && !await this.verifyHashCommitment(log)) {\n        return;\n      }\n      const emojiConfirmationPromise = new Promise((res, rej) => {\n        this.resolve = res;\n        this.reject = rej;\n      });\n      this.olmSAS.set_their_key(this.theirKey);\n      const sasBytes = this.generateSASBytes();\n      this.emoji = generateEmojiSas(Array.from(sasBytes));\n      this.eventEmitter.emit(\"EmojiGenerated\", this);\n      await emojiConfirmationPromise;\n      this.setNextStage(new SendMacStage(this.options));\n    });\n  }\n  async verifyHashCommitment(log) {\n    return await log.wrap(\"CalculateSASStage.verifyHashCommitment\", async () => {\n      const acceptMessage = this.channel.getReceivedMessage(VerificationEventType.Accept).content;\n      const keyMessage = this.channel.getReceivedMessage(VerificationEventType.Key).content;\n      const commitmentStr = keyMessage.key + anotherjson.stringify(this.channel.startMessage.content);\n      const receivedCommitment = acceptMessage.commitment;\n      const hash = this.olmUtil.sha256(commitmentStr);\n      if (hash !== receivedCommitment) {\n        log.log({ l: \"Commitment mismatched!\", received: receivedCommitment, calculated: hash });\n        await this.channel.cancelVerification(CancelReason.MismatchedCommitment);\n        return false;\n      }\n      return true;\n    });\n  }\n  generateSASBytes() {\n    const keyAgreement = this.channel.acceptMessage.content.key_agreement_protocol;\n    const otherUserDeviceId = this.otherUserDeviceId;\n    const sasBytes = calculateKeyAgreement[keyAgreement]({\n      our: {\n        userId: this.ourUserId,\n        deviceId: this.ourUserDeviceId,\n        publicKey: this.olmSAS.get_pubkey()\n      },\n      their: {\n        userId: this.otherUserId,\n        deviceId: otherUserDeviceId,\n        publicKey: this.theirKey\n      },\n      id: this.channel.id,\n      initiatedByMe: this.channel.initiatedByUs\n    }, this.olmSAS, 6);\n    return sasBytes;\n  }\n  async setEmojiMatch(match) {\n    if (match) {\n      this.resolve();\n    } else {\n      await this.channel.cancelVerification(CancelReason.MismatchedSAS);\n      this.reject(new VerificationCancelledError());\n    }\n  }\n  get theirKey() {\n    const { content } = this.channel.getReceivedMessage(VerificationEventType.Key);\n    return content.key;\n  }\n}\nclass SendKeyStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendKeyStage.completeStage\", async (log) => {\n      const ourSasKey = this.olmSAS.get_pubkey();\n      await this.channel.send(VerificationEventType.Key, { key: ourSasKey }, log);\n      await this.channel.waitForEvent(VerificationEventType.Key);\n      this.setNextStage(new CalculateSASStage(this.options));\n    });\n  }\n}\nfunction intersection(anArray, aSet) {\n  return Array.isArray(anArray) ? anArray.filter((x) => aSet.has(x)) : [];\n}\nclass SendAcceptVerificationStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendAcceptVerificationStage.completeStage\", async (log) => {\n      const { content: startMessage } = this.channel.startMessage;\n      const keyAgreement = intersection(KEY_AGREEMENT_LIST, new Set(startMessage.key_agreement_protocols))[0];\n      const hashMethod = intersection(HASHES_LIST, new Set(startMessage.hashes))[0];\n      const macMethod = intersection(MAC_LIST, new Set(startMessage.message_authentication_codes))[0];\n      const sasMethod = intersection(startMessage.short_authentication_string, SAS_SET);\n      if (!keyAgreement || !hashMethod || !macMethod || !sasMethod.length) {\n        await this.channel.cancelVerification(CancelReason.UnknownMethod);\n        return;\n      }\n      const ourPubKey = this.olmSAS.get_pubkey();\n      const commitmentStr = ourPubKey + anotherjson.stringify(startMessage);\n      const content = {\n        key_agreement_protocol: keyAgreement,\n        hash: hashMethod,\n        message_authentication_code: macMethod,\n        short_authentication_string: sasMethod,\n        commitment: this.olmUtil.sha256(commitmentStr)\n      };\n      await this.channel.send(VerificationEventType.Accept, content, log);\n      await this.channel.waitForEvent(VerificationEventType.Key);\n      this.setNextStage(new SendKeyStage(this.options));\n    });\n  }\n}\nclass SelectVerificationMethodStage extends BaseSASVerificationStage {\n  constructor() {\n    super(...arguments);\n    this.hasSentStartMessage = false;\n    this.allowSelection = true;\n  }\n  async completeStage() {\n    await this.log.wrap(\"SelectVerificationMethodStage.completeStage\", async (log) => {\n      await this.findDeviceName(log);\n      this.eventEmitter.emit(\"SelectVerificationStage\", this);\n      const startMessage = this.channel.waitForEvent(VerificationEventType.Start);\n      const acceptMessage = this.channel.waitForEvent(VerificationEventType.Accept);\n      const { content } = await Promise.race([startMessage, acceptMessage]);\n      if (content.method) {\n        this.allowSelection = false;\n        if (this.hasSentStartMessage) {\n          await this.resolveStartConflict(log);\n        } else {\n          this.channel.setStartMessage(this.channel.getReceivedMessage(VerificationEventType.Start));\n        }\n      } else {\n        this.channel.setStartMessage(this.channel.getSentMessage(VerificationEventType.Start));\n      }\n      if (this.channel.initiatedByUs) {\n        await acceptMessage;\n        this.setNextStage(new SendKeyStage(this.options));\n      } else {\n        this.setNextStage(new SendAcceptVerificationStage(this.options));\n      }\n    });\n  }\n  async resolveStartConflict(log) {\n    await log.wrap(\"resolveStartConflict\", async () => {\n      const receivedStartMessage = this.channel.getReceivedMessage(VerificationEventType.Start);\n      const sentStartMessage = this.channel.getSentMessage(VerificationEventType.Start);\n      if (receivedStartMessage.content.method !== sentStartMessage.content.method) {\n        log.log({\n          l: \"Methods don't match for the start messages\",\n          received: receivedStartMessage.content.method,\n          sent: sentStartMessage.content.method\n        });\n        await this.channel.cancelVerification(CancelReason.UnexpectedMessage);\n        return;\n      }\n      const our = this.ourUserId === this.otherUserId ? this.ourUserDeviceId : this.ourUserId;\n      const their = this.ourUserId === this.otherUserId ? this.otherUserDeviceId : this.otherUserId;\n      const startMessageToUse = our < their ? sentStartMessage : receivedStartMessage;\n      log.log({ l: \"Start message resolved\", message: startMessageToUse, our, their });\n      this.channel.setStartMessage(startMessageToUse);\n    });\n  }\n  async findDeviceName(log) {\n    await log.wrap(\"SelectVerificationMethodStage.findDeviceName\", async () => {\n      var _a;\n      const device = await this.options.deviceTracker.deviceForId(this.otherUserId, this.otherUserDeviceId, this.options.hsApi, log);\n      if (!device) {\n        log.log({ l: \"Cannot find device\", userId: this.otherUserId, deviceId: this.otherUserDeviceId });\n        throw new Error(\"Cannot find device\");\n      }\n      this.otherDeviceName = (_a = device.unsigned.device_display_name) != null ? _a : device.device_id;\n    });\n  }\n  async selectEmojiMethod(log) {\n    if (!this.allowSelection) {\n      return;\n    }\n    const content = {\n      method: \"m.sas.v1\",\n      from_device: this.ourUserDeviceId,\n      key_agreement_protocols: KEY_AGREEMENT_LIST,\n      hashes: HASHES_LIST,\n      message_authentication_codes: MAC_LIST,\n      short_authentication_string: SAS_LIST\n    };\n    await this.channel.send(VerificationEventType.Start, content, log);\n    this.hasSentStartMessage = true;\n  }\n}\nclass SendRequestVerificationStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendRequestVerificationStage.completeStage\", async (log) => {\n      const content = {\n        \"from_device\": this.ourUserDeviceId,\n        \"methods\": [\"m.sas.v1\"]\n      };\n      await this.channel.send(VerificationEventType.Request, content, log);\n      this.setNextStage(new SelectVerificationMethodStage(this.options));\n      await this.channel.waitForEvent(VerificationEventType.Ready);\n    });\n  }\n}\nclass SendReadyStage extends BaseSASVerificationStage {\n  async completeStage() {\n    await this.log.wrap(\"SendReadyStage.completeStage\", async (log) => {\n      const content = {\n        \"from_device\": this.ourUserDeviceId,\n        \"methods\": [\"m.sas.v1\"]\n      };\n      await this.channel.send(VerificationEventType.Ready, content, log);\n      this.setNextStage(new SelectVerificationMethodStage(this.options));\n    });\n  }\n}\nclass EventEmitter {\n  constructor() {\n    this._handlersByName = {};\n  }\n  emit(name, value) {\n    const handlers = this._handlersByName[name];\n    if (handlers) {\n      handlers.forEach((h) => h(value));\n    }\n  }\n  disposableOn(name, callback) {\n    this.on(name, callback);\n    return () => {\n      this.off(name, callback);\n    };\n  }\n  on(name, callback) {\n    let handlers = this._handlersByName[name];\n    if (!handlers) {\n      this.onFirstSubscriptionAdded(name);\n      this._handlersByName[name] = handlers = /* @__PURE__ */ new Set();\n    }\n    handlers.add(callback);\n  }\n  off(name, callback) {\n    const handlers = this._handlersByName[name];\n    if (handlers) {\n      handlers.delete(callback);\n      if (handlers.size === 0) {\n        delete this._handlersByName[name];\n        this.onLastSubscriptionRemoved(name);\n      }\n    }\n  }\n  onFirstSubscriptionAdded(name) {\n  }\n  onLastSubscriptionRemoved(name) {\n  }\n}\nclass SASVerification extends EventEmitter {\n  constructor(options) {\n    super();\n    this.finished = false;\n    const { olm, channel, clock } = options;\n    const olmSas = new olm.SAS();\n    this.olmSas = olmSas;\n    this.channel = channel;\n    this.setupCancelAfterTimeout(clock);\n    const stageOptions = __spreadProps(__spreadValues({}, options), { olmSas, eventEmitter: this });\n    if (channel.getReceivedMessage(VerificationEventType.Start)) {\n      this.startStage = new SelectVerificationMethodStage(stageOptions);\n    } else if (channel.getReceivedMessage(VerificationEventType.Request)) {\n      this.startStage = new SendReadyStage(stageOptions);\n    } else {\n      this.startStage = new SendRequestVerificationStage(stageOptions);\n    }\n  }\n  async setupCancelAfterTimeout(clock) {\n    try {\n      const tenMinutes = 10 * 60 * 1e3;\n      this.timeout = clock.createTimeout(tenMinutes);\n      await this.timeout.elapsed();\n      await this.channel.cancelVerification(CancelReason.TimedOut);\n    } catch {\n    }\n  }\n  async abort() {\n    await this.channel.cancelVerification(CancelReason.UserCancelled);\n  }\n  async start() {\n    try {\n      let stage = this.startStage;\n      do {\n        await stage.completeStage();\n        stage = stage.nextStage;\n      } while (stage);\n    } catch (e) {\n      if (!(e instanceof VerificationCancelledError)) {\n        throw e;\n      }\n    } finally {\n      if (this.channel.isCancelled) {\n        this.emit(\"VerificationCancelled\", this.channel.cancellation);\n      }\n      this.olmSas.free();\n      this.timeout.abort();\n      this.finished = true;\n    }\n  }\n}\nfunction groupBy(array, groupFn) {\n  return groupByWithCreator(array, groupFn, () => {\n    return [];\n  }, (array2, value) => array2.push(value));\n}\nfunction groupByWithCreator(array, groupFn, createCollectionFn, addCollectionFn) {\n  return array.reduce((map, value) => {\n    const key = groupFn(value);\n    let collection = map.get(key);\n    if (!collection) {\n      collection = createCollectionFn();\n      map.set(key, collection);\n    }\n    addCollectionFn(collection, value);\n    return map;\n  }, /* @__PURE__ */ new Map());\n}\nfunction countBy(events, mapper) {\n  return events.reduce((counts, event2) => {\n    const mappedValue = mapper(event2);\n    if (!counts[mappedValue]) {\n      counts[mappedValue] = 1;\n    } else {\n      counts[mappedValue] += 1;\n    }\n    return counts;\n  }, {});\n}\nfunction makeTxnId() {\n  return makeId(\"t\");\n}\nfunction makeId(prefix2) {\n  const n = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n  const str = n.toString(16);\n  return prefix2 + \"0\".repeat(14 - str.length) + str;\n}\nfunction isTxnId(txnId) {\n  return txnId.startsWith(\"t\") && txnId.length === 15;\n}\nfunction formatToDeviceMessagesPayload(messages) {\n  const messagesByUser = groupBy(messages, (message) => message.device.user_id);\n  const payload = {\n    messages: Array.from(messagesByUser.entries()).reduce((userMap, [userId, messages2]) => {\n      userMap[userId] = messages2.reduce((deviceMap, message) => {\n        deviceMap[message.device.device_id] = message.content;\n        return deviceMap;\n      }, {});\n      return userMap;\n    }, {})\n  };\n  return payload;\n}\nfunction disposeValue(value) {\n  if (typeof value === \"function\") {\n    value();\n  } else {\n    value.dispose();\n  }\n}\nfunction isDisposable(value) {\n  return value && (typeof value === \"function\" || typeof value.dispose === \"function\");\n}\nclass Disposables {\n  constructor() {\n    this._disposables = [];\n  }\n  track(disposable) {\n    if (!isDisposable(disposable)) {\n      throw new Error(\"Not a disposable\");\n    }\n    if (this.isDisposed) {\n      console.warn(\"Disposables already disposed, disposing new value\");\n      disposeValue(disposable);\n      return disposable;\n    }\n    this._disposables.push(disposable);\n    return disposable;\n  }\n  untrack(disposable) {\n    if (!this._disposables) {\n      return void 0;\n    }\n    const idx = this._disposables.indexOf(disposable);\n    if (idx >= 0) {\n      this._disposables.splice(idx, 1);\n    }\n    return void 0;\n  }\n  dispose() {\n    if (this._disposables) {\n      for (const d of this._disposables) {\n        disposeValue(d);\n      }\n      this._disposables = void 0;\n    }\n  }\n  get isDisposed() {\n    return this._disposables === void 0;\n  }\n  disposeTracked(value) {\n    if (value === void 0 || value === null || this.isDisposed) {\n      return void 0;\n    }\n    const idx = this._disposables.indexOf(value);\n    if (idx !== -1) {\n      const [foundValue] = this._disposables.splice(idx, 1);\n      disposeValue(foundValue);\n    } else {\n      console.warn(\"disposable not found, did it leak?\", value);\n    }\n    return void 0;\n  }\n}\nclass Deferred {\n  constructor() {\n    let resolve;\n    let reject;\n    this.promise = new Promise((_resolve, _reject) => {\n      resolve = _resolve;\n      reject = _reject;\n    });\n    this.resolve = (value) => {\n      this._value = value;\n      resolve(value);\n    };\n    this.reject = reject;\n  }\n  get value() {\n    return this._value;\n  }\n}\nconst messageFromErrorType = {\n  [CancelReason.UserCancelled]: \"User declined\",\n  [CancelReason.InvalidMessage]: \"Invalid Message.\",\n  [CancelReason.KeyMismatch]: \"Key Mismatch.\",\n  [CancelReason.OtherDeviceAccepted]: \"Another device has accepted this request.\",\n  [CancelReason.TimedOut]: \"Timed Out\",\n  [CancelReason.UnexpectedMessage]: \"Unexpected Message.\",\n  [CancelReason.UnknownMethod]: \"Unknown method.\",\n  [CancelReason.UnknownTransaction]: \"Unknown Transaction.\",\n  [CancelReason.UserMismatch]: \"User Mismatch\",\n  [CancelReason.MismatchedCommitment]: \"Hash commitment does not match.\",\n  [CancelReason.MismatchedSAS]: \"Emoji/decimal does not match.\"\n};\nclass ToDeviceChannel extends Disposables {\n  constructor(options, startingMessage) {\n    super();\n    this.sentMessages = /* @__PURE__ */ new Map();\n    this.receivedMessages = /* @__PURE__ */ new Map();\n    this.waitMap = /* @__PURE__ */ new Map();\n    this.hsApi = options.hsApi;\n    this.deviceTracker = options.deviceTracker;\n    this.otherUserId = options.otherUserId;\n    this.ourDeviceId = options.ourUserDeviceId;\n    this.clock = options.clock;\n    this.log = options.log;\n    this.deviceMessageHandler = options.deviceMessageHandler;\n    this.track(this.deviceMessageHandler.disposableOn(\"message\", async ({ unencrypted }) => await this.handleDeviceMessage(unencrypted)));\n    this.track(() => {\n      this.waitMap.forEach((value) => {\n        value.reject(new VerificationCancelledError());\n      });\n    });\n    if (startingMessage) {\n      this.id = startingMessage.content.transaction_id;\n      this.receivedMessages.set(startingMessage.type, startingMessage);\n      this.otherUserDeviceId = startingMessage.content.from_device;\n    }\n  }\n  get cancellation() {\n    return this._cancellation;\n  }\n  get isCancelled() {\n    return !!this._cancellation;\n  }\n  async send(eventType, content, log) {\n    await log.wrap(\"ToDeviceChannel.send\", async () => {\n      if (this.isCancelled) {\n        throw new VerificationCancelledError();\n      }\n      if (eventType === VerificationEventType.Request) {\n        await this.handleRequestEventSpecially(eventType, content, log);\n        return;\n      }\n      Object.assign(content, { transaction_id: this.id });\n      const payload = {\n        messages: {\n          [this.otherUserId]: {\n            [this.otherUserDeviceId]: content\n          }\n        }\n      };\n      await this.hsApi.sendToDevice(eventType, payload, makeTxnId(), { log }).response();\n      this.sentMessages.set(eventType, { content });\n    });\n  }\n  async handleRequestEventSpecially(eventType, content, log) {\n    await log.wrap(\"ToDeviceChannel.handleRequestEventSpecially\", async () => {\n      const timestamp = this.clock.now();\n      const txnId = makeTxnId();\n      this.id = txnId;\n      Object.assign(content, { timestamp, transaction_id: txnId });\n      const payload = {\n        messages: {\n          [this.otherUserId]: {\n            \"*\": content\n          }\n        }\n      };\n      await this.hsApi.sendToDevice(eventType, payload, makeTxnId(), { log }).response();\n      this.sentMessages.set(eventType, { content });\n    });\n  }\n  getReceivedMessage(event2) {\n    return this.receivedMessages.get(event2);\n  }\n  getSentMessage(event2) {\n    return this.sentMessages.get(event2);\n  }\n  get acceptMessage() {\n    var _a;\n    return (_a = this.receivedMessages.get(VerificationEventType.Accept)) != null ? _a : this.sentMessages.get(VerificationEventType.Accept);\n  }\n  async handleDeviceMessage(event2) {\n    await this.log.wrap(\"ToDeviceChannel.handleDeviceMessage\", async (log) => {\n      if (!event2.type.startsWith(\"m.key.verification.\")) {\n        return;\n      }\n      if (event2.content.transaction_id !== this.id) {\n        console.log(\"Received event with unknown transaction id: \", event2);\n        await this.cancelVerification(CancelReason.UnknownTransaction);\n        return;\n      }\n      console.log(\"event\", event2);\n      log.log({ l: \"event\", event: event2 });\n      this.resolveAnyWaits(event2);\n      this.receivedMessages.set(event2.type, event2);\n      if (event2.type === VerificationEventType.Ready) {\n        this.handleReadyMessage(event2, log);\n        return;\n      }\n      if (event2.type === VerificationEventType.Cancel) {\n        this._cancellation = { code: event2.content.code, cancelledByUs: false };\n        this.dispose();\n        return;\n      }\n    });\n  }\n  async handleReadyMessage(event2, log) {\n    const fromDevice = event2.content.from_device;\n    this.otherUserDeviceId = fromDevice;\n    const devices = await this.deviceTracker.devicesForUsers([this.otherUserId], this.hsApi, log);\n    const otherDevices = devices.filter((device) => device.device_id !== fromDevice && device.device_id !== this.ourDeviceId);\n    const cancelMessage = {\n      code: CancelReason.OtherDeviceAccepted,\n      reason: messageFromErrorType[CancelReason.OtherDeviceAccepted],\n      transaction_id: this.id\n    };\n    const deviceMessages = otherDevices.reduce((acc, device) => {\n      acc[device.device_id] = cancelMessage;\n      return acc;\n    }, {});\n    const payload = {\n      messages: {\n        [this.otherUserId]: deviceMessages\n      }\n    };\n    await this.hsApi.sendToDevice(VerificationEventType.Cancel, payload, makeTxnId(), { log }).response();\n  }\n  async cancelVerification(cancellationType) {\n    await this.log.wrap(\"Channel.cancelVerification\", async (log) => {\n      var _a;\n      if (this.isCancelled) {\n        throw new VerificationCancelledError();\n      }\n      const payload = {\n        messages: {\n          [this.otherUserId]: {\n            [(_a = this.otherUserDeviceId) != null ? _a : \"*\"]: {\n              code: cancellationType,\n              reason: messageFromErrorType[cancellationType],\n              transaction_id: this.id\n            }\n          }\n        }\n      };\n      await this.hsApi.sendToDevice(VerificationEventType.Cancel, payload, makeTxnId(), { log }).response();\n      this._cancellation = { code: cancellationType, cancelledByUs: true };\n      this.dispose();\n    });\n  }\n  resolveAnyWaits(event2) {\n    const { type } = event2;\n    const wait = this.waitMap.get(type);\n    if (wait) {\n      wait.resolve(event2);\n      this.waitMap.delete(type);\n    }\n  }\n  waitForEvent(eventType) {\n    if (this.isCancelled) {\n      throw new VerificationCancelledError();\n    }\n    const receivedMessage = this.receivedMessages.get(eventType);\n    if (receivedMessage) {\n      return Promise.resolve(receivedMessage);\n    }\n    const existingWait = this.waitMap.get(eventType);\n    if (existingWait) {\n      return existingWait.promise;\n    }\n    const deferred = new Deferred();\n    this.waitMap.set(eventType, deferred);\n    return deferred.promise;\n  }\n  setStartMessage(event2) {\n    this.startMessage = event2;\n    this._initiatedByUs = event2.content.from_device === this.ourDeviceId;\n  }\n  get initiatedByUs() {\n    return this._initiatedByUs;\n  }\n}\nclass SASRequest {\n  constructor(startingMessage) {\n    this.startingMessage = startingMessage;\n  }\n  get deviceId() {\n    return this.startingMessage.content.from_device;\n  }\n  get sender() {\n    return this.startingMessage.sender;\n  }\n  get id() {\n    return this.startingMessage.content.transaction_id;\n  }\n}\nvar KeyUsage = /* @__PURE__ */ ((KeyUsage2) => {\n  KeyUsage2[\"Master\"] = \"master\";\n  KeyUsage2[\"SelfSigning\"] = \"self_signing\";\n  KeyUsage2[\"UserSigning\"] = \"user_signing\";\n  return KeyUsage2;\n})(KeyUsage || {});\nvar UserTrust = /* @__PURE__ */ ((UserTrust2) => {\n  UserTrust2[UserTrust2[\"Trusted\"] = 1] = \"Trusted\";\n  UserTrust2[UserTrust2[\"UserNotSigned\"] = 2] = \"UserNotSigned\";\n  UserTrust2[UserTrust2[\"UserSignatureMismatch\"] = 3] = \"UserSignatureMismatch\";\n  UserTrust2[UserTrust2[\"UserDeviceNotSigned\"] = 4] = \"UserDeviceNotSigned\";\n  UserTrust2[UserTrust2[\"UserDeviceSignatureMismatch\"] = 5] = \"UserDeviceSignatureMismatch\";\n  UserTrust2[UserTrust2[\"UserSetupError\"] = 6] = \"UserSetupError\";\n  UserTrust2[UserTrust2[\"OwnSetupError\"] = 7] = \"OwnSetupError\";\n  return UserTrust2;\n})(UserTrust || {});\nclass CrossSigning {\n  constructor(options) {\n    this._isMasterKeyTrusted = false;\n    this.observedUsers = /* @__PURE__ */ new Map();\n    this.receivedSASVerifications = new ObservableMap();\n    this.storage = options.storage;\n    this.secretStorage = options.secretStorage;\n    this.platform = options.platform;\n    this.deviceTracker = options.deviceTracker;\n    this.olm = options.olm;\n    this.olmUtil = options.olmUtil;\n    this.hsApi = options.hsApi;\n    this.ownUserId = options.ownUserId;\n    this.deviceId = options.deviceId;\n    this.e2eeAccount = options.e2eeAccount;\n    this.deviceMessageHandler = options.deviceMessageHandler;\n    this.handleSASDeviceMessage = this.handleSASDeviceMessage.bind(this);\n    this.deviceMessageHandler.on(\"message\", this.handleSASDeviceMessage);\n  }\n  async load(log) {\n    const verification = await this.verifyMSKFrom4S(false, log);\n    return verification !== 0;\n  }\n  async start(log) {\n    if (!this.isMasterKeyTrusted) {\n      await this.verifyMSKFrom4S(true, log);\n    }\n  }\n  async verifyMSKFrom4S(allowNetwork, log) {\n    return await log.wrap(\"CrossSigning.verifyMSKFrom4S\", async (log2) => {\n      const privateMasterKey = await this.getSigningKey(\"master\");\n      if (!privateMasterKey) {\n        log2.set(\"failure\", \"no_priv_msk\");\n        return 0;\n      }\n      const signing = new this.olm.PkSigning();\n      let derivedPublicKey;\n      try {\n        derivedPublicKey = signing.init_with_seed(privateMasterKey);\n      } finally {\n        signing.free();\n      }\n      const publishedMasterKey = await this.deviceTracker.getCrossSigningKeyForUser(this.ownUserId, \"master\", allowNetwork ? this.hsApi : void 0, log2);\n      if (!publishedMasterKey) {\n        log2.set(\"failure\", \"no_pub_msk\");\n        return 1;\n      }\n      const publisedEd25519Key = publishedMasterKey && getKeyEd25519Key(publishedMasterKey);\n      log2.set({ publishedMasterKey: publisedEd25519Key, derivedPublicKey });\n      this._isMasterKeyTrusted = !!publisedEd25519Key && publisedEd25519Key === derivedPublicKey;\n      if (!this._isMasterKeyTrusted) {\n        log2.set(\"failure\", \"mismatch\");\n        return 2;\n      }\n      return 3;\n    });\n  }\n  get isMasterKeyTrusted() {\n    return this._isMasterKeyTrusted;\n  }\n  startVerification(requestOrUserId, log) {\n    if (this.sasVerificationInProgress && !this.sasVerificationInProgress.finished) {\n      return;\n    }\n    const otherUserId = requestOrUserId instanceof SASRequest ? requestOrUserId.sender : requestOrUserId;\n    const startingMessage = requestOrUserId instanceof SASRequest ? requestOrUserId.startingMessage : void 0;\n    const channel = new ToDeviceChannel({\n      deviceTracker: this.deviceTracker,\n      hsApi: this.hsApi,\n      otherUserId,\n      clock: this.platform.clock,\n      deviceMessageHandler: this.deviceMessageHandler,\n      ourUserDeviceId: this.deviceId,\n      log\n    }, startingMessage);\n    this.sasVerificationInProgress = new SASVerification({\n      olm: this.olm,\n      olmUtil: this.olmUtil,\n      ourUserId: this.ownUserId,\n      ourUserDeviceId: this.deviceId,\n      otherUserId,\n      log,\n      channel,\n      e2eeAccount: this.e2eeAccount,\n      deviceTracker: this.deviceTracker,\n      hsApi: this.hsApi,\n      clock: this.platform.clock,\n      crossSigning: this\n    });\n    return this.sasVerificationInProgress;\n  }\n  handleSASDeviceMessage({ unencrypted: event2 }) {\n    var _a;\n    const txnId = event2.content.transaction_id;\n    const shouldIgnoreEvent = ((_a = this.sasVerificationInProgress) == null ? void 0 : _a.channel.id) === txnId;\n    if (shouldIgnoreEvent) {\n      return;\n    }\n    switch (event2.type) {\n      case VerificationEventType.Cancel:\n        this.receivedSASVerifications.remove(txnId);\n        return;\n      case VerificationEventType.Request:\n      case VerificationEventType.Start:\n        this.platform.logger.run(\"Create SASRequest\", () => {\n          this.receivedSASVerifications.set(txnId, new SASRequest(event2));\n        });\n        return;\n      default:\n        return;\n    }\n  }\n  async signOwnDevice(log) {\n    return log.wrap(\"CrossSigning.signOwnDevice\", async (log2) => {\n      if (!this._isMasterKeyTrusted) {\n        log2.set(\"mskNotTrusted\", true);\n        return;\n      }\n      const ownDeviceKey = this.e2eeAccount.getUnsignedDeviceKey();\n      return this.signDeviceKey(ownDeviceKey, log2);\n    });\n  }\n  async signDevice(deviceId, log) {\n    return log.wrap(\"CrossSigning.signDevice\", async (log2) => {\n      log2.set(\"id\", deviceId);\n      if (!this._isMasterKeyTrusted) {\n        log2.set(\"mskNotTrusted\", true);\n        return;\n      }\n      const keyToSign = await this.deviceTracker.deviceForId(this.ownUserId, deviceId, this.hsApi, log2);\n      if (!keyToSign) {\n        return void 0;\n      }\n      delete keyToSign.signatures;\n      return this.signDeviceKey(keyToSign, log2);\n    });\n  }\n  async signUser(userId, log) {\n    return log.wrap(\"CrossSigning.signUser\", async (log2) => {\n      log2.set(\"id\", userId);\n      if (!this._isMasterKeyTrusted) {\n        log2.set(\"mskNotTrusted\", true);\n        return;\n      }\n      if (userId === this.ownUserId) {\n        return;\n      }\n      const keyToSign = await this.deviceTracker.getCrossSigningKeyForUser(userId, \"master\", this.hsApi, log2);\n      if (!keyToSign) {\n        return;\n      }\n      const signingKey = await this.getSigningKey(\"user_signing\");\n      if (!signingKey) {\n        return;\n      }\n      delete keyToSign.signatures;\n      this.signKey(keyToSign, signingKey);\n      const payload = {\n        [keyToSign.user_id]: {\n          [getKeyEd25519Key(keyToSign)]: keyToSign\n        }\n      };\n      const request = this.hsApi.uploadSignatures(payload, { log: log2 });\n      await request.response();\n      await this.deviceTracker.invalidateUserKeys(userId);\n      this.emitUserTrustUpdate(userId, log2);\n      return keyToSign;\n    });\n  }\n  getUserTrust(userId, log) {\n    return log.wrap(\"CrossSigning.getUserTrust\", async (log2) => {\n      log2.set(\"id\", userId);\n      const logResult = (trust) => {\n        log2.set(\"result\", trust);\n        return trust;\n      };\n      if (!this.isMasterKeyTrusted) {\n        return logResult(7);\n      }\n      const ourMSK = await log2.wrap(\"get our msk\", (log3) => this.deviceTracker.getCrossSigningKeyForUser(this.ownUserId, \"master\", this.hsApi, log3));\n      if (!ourMSK) {\n        return logResult(7);\n      }\n      const ourUSK = await log2.wrap(\"get our usk\", (log3) => this.deviceTracker.getCrossSigningKeyForUser(this.ownUserId, \"user_signing\", this.hsApi, log3));\n      if (!ourUSK) {\n        return logResult(7);\n      }\n      const ourUSKVerification = log2.wrap(\"verify our usk\", (log3) => this.hasValidSignatureFrom(ourUSK, ourMSK, log3));\n      if (ourUSKVerification !== SignatureVerification.Valid) {\n        return logResult(7);\n      }\n      const theirMSK = await log2.wrap(\"get their msk\", (log3) => this.deviceTracker.getCrossSigningKeyForUser(userId, \"master\", this.hsApi, log3));\n      if (!theirMSK) {\n        return logResult(2);\n      }\n      const theirMSKVerification = log2.wrap(\"verify their msk\", (log3) => this.hasValidSignatureFrom(theirMSK, ourUSK, log3));\n      if (theirMSKVerification !== SignatureVerification.Valid) {\n        if (theirMSKVerification === SignatureVerification.NotSigned) {\n          return logResult(2);\n        } else {\n          return logResult(3);\n        }\n      }\n      const theirSSK = await log2.wrap(\"get their ssk\", (log3) => this.deviceTracker.getCrossSigningKeyForUser(userId, \"self_signing\", this.hsApi, log3));\n      if (!theirSSK) {\n        return logResult(6);\n      }\n      const theirSSKVerification = log2.wrap(\"verify their ssk\", (log3) => this.hasValidSignatureFrom(theirSSK, theirMSK, log3));\n      if (theirSSKVerification !== SignatureVerification.Valid) {\n        return logResult(6);\n      }\n      const theirDeviceKeys = await log2.wrap(\"get their devices\", (log3) => this.deviceTracker.devicesForUsers([userId], this.hsApi, log3));\n      const lowestDeviceVerification = theirDeviceKeys.reduce((lowest, dk) => log2.wrap({ l: \"verify device\", id: dk.device_id }, (log3) => {\n        const verification = this.hasValidSignatureFrom(dk, theirSSK, log3);\n        if (lowest === SignatureVerification.Invalid || verification === SignatureVerification.Invalid) {\n          return SignatureVerification.Invalid;\n        } else if (lowest === SignatureVerification.NotSigned || verification === SignatureVerification.NotSigned) {\n          return SignatureVerification.NotSigned;\n        } else if (lowest === SignatureVerification.Valid || verification === SignatureVerification.Valid) {\n          return SignatureVerification.Valid;\n        }\n        return SignatureVerification.Invalid;\n      }), SignatureVerification.Valid);\n      if (lowestDeviceVerification !== SignatureVerification.Valid) {\n        if (lowestDeviceVerification === SignatureVerification.NotSigned) {\n          return logResult(4);\n        } else {\n          return logResult(5);\n        }\n      }\n      return logResult(1);\n    });\n  }\n  dispose() {\n    this.deviceMessageHandler.off(\"message\", this.handleSASDeviceMessage);\n  }\n  observeUserTrust(userId, log) {\n    const existingValue = this.observedUsers.get(userId);\n    if (existingValue) {\n      return existingValue;\n    }\n    const observable = new RetainedObservableValue(void 0, () => {\n      this.observedUsers.delete(userId);\n    });\n    this.observedUsers.set(userId, observable);\n    log.wrapDetached(\"get user trust\", async (log2) => {\n      if (observable.get() === void 0) {\n        observable.set(await this.getUserTrust(userId, log2));\n      }\n    });\n    return observable;\n  }\n  async signDeviceKey(keyToSign, log) {\n    const signingKey = await this.getSigningKey(\"self_signing\");\n    if (!signingKey) {\n      return void 0;\n    }\n    this.signKey(keyToSign, signingKey);\n    const payload = {\n      [keyToSign.user_id]: {\n        [keyToSign.device_id]: keyToSign\n      }\n    };\n    const request = this.hsApi.uploadSignatures(payload, { log });\n    await request.response();\n    await this.deviceTracker.invalidateUserKeys(this.ownUserId);\n    this.emitUserTrustUpdate(this.ownUserId, log);\n    return keyToSign;\n  }\n  async getSigningKey(usage) {\n    const seedStr = await this.secretStorage.readSecret(`m.cross_signing.${usage}`);\n    if (seedStr) {\n      return new Uint8Array(this.platform.encoding.base64.decode(seedStr));\n    }\n  }\n  signKey(keyToSign, signingKey) {\n    pkSign(this.olm, keyToSign, signingKey, this.ownUserId, \"\");\n  }\n  hasValidSignatureFrom(key, signingKey, log) {\n    const pubKey = getKeyEd25519Key(signingKey);\n    if (!pubKey) {\n      return SignatureVerification.NotSigned;\n    }\n    return verifyEd25519Signature(this.olmUtil, signingKey.user_id, pubKey, pubKey, key, log);\n  }\n  emitUserTrustUpdate(userId, log) {\n    const observable = this.observedUsers.get(userId);\n    if (observable && observable.get() !== void 0) {\n      observable.set(void 0);\n      log.wrapDetached(\"update user trust\", async (log2) => {\n        observable.set(await this.getUserTrust(userId, log2));\n      });\n    }\n  }\n}\nfunction getKeyUsage(keyInfo) {\n  if (!Array.isArray(keyInfo.usage) || keyInfo.usage.length !== 1) {\n    return void 0;\n  }\n  const usage = keyInfo.usage[0];\n  if (usage !== \"master\" && usage !== \"self_signing\" && usage !== \"user_signing\") {\n    return void 0;\n  }\n  return usage;\n}\nconst algorithm = \"ed25519\";\nconst prefix = `${algorithm}:`;\nfunction getKeyEd25519Key(keyInfo) {\n  const ed25519KeyIds = Object.keys(keyInfo.keys).filter((keyId2) => keyId2.startsWith(prefix));\n  if (ed25519KeyIds.length !== 1) {\n    return void 0;\n  }\n  const keyId = ed25519KeyIds[0];\n  const publicKey = keyInfo.keys[keyId];\n  return publicKey;\n}\nfunction getKeyUserId(keyInfo) {\n  return keyInfo[\"user_id\"];\n}\nvar KeysTrackingStatus = /* @__PURE__ */ ((KeysTrackingStatus2) => {\n  KeysTrackingStatus2[KeysTrackingStatus2[\"Outdated\"] = 0] = \"Outdated\";\n  KeysTrackingStatus2[KeysTrackingStatus2[\"UpToDate\"] = 1] = \"UpToDate\";\n  return KeysTrackingStatus2;\n})(KeysTrackingStatus || {});\nfunction createUserIdentity(userId, initialRoomId) {\n  return {\n    userId,\n    roomIds: initialRoomId ? [initialRoomId] : [],\n    keysTrackingStatus: 0\n  };\n}\nfunction addRoomToIdentity(identity, userId, roomId) {\n  if (!identity) {\n    identity = createUserIdentity(userId, roomId);\n    return identity;\n  } else {\n    if (!identity.roomIds.includes(roomId)) {\n      identity.roomIds.push(roomId);\n      return identity;\n    }\n  }\n}\nclass DeviceTracker {\n  constructor(options) {\n    this._storage = options.storage;\n    this._getSyncToken = options.getSyncToken;\n    this._olmUtil = options.olmUtil;\n    this._ownUserId = options.ownUserId;\n    this._ownDeviceId = options.ownDeviceId;\n  }\n  async writeDeviceChanges(changedUserIds, txn, log) {\n    const { userIdentities } = txn;\n    log.set(\"changed\", changedUserIds.length);\n    await Promise.all(changedUserIds.map(async (userId) => {\n      const user = await userIdentities.get(userId);\n      if (user) {\n        log.log({ l: \"outdated\", id: userId });\n        user.keysTrackingStatus = 0;\n        userIdentities.set(user);\n      }\n    }));\n  }\n  async writeMemberChanges(room, memberChanges, historyVisibility, txn) {\n    const added = [];\n    const removed = [];\n    await Promise.all(Array.from(memberChanges.values()).map(async (memberChange) => {\n      if (shouldShareKey(memberChange.membership, historyVisibility)) {\n        if (await this._addRoomToUserIdentity(memberChange.roomId, memberChange.userId, txn)) {\n          added.push(memberChange.userId);\n        }\n      } else if (shouldShareKey(memberChange.previousMembership, historyVisibility)) {\n        const { roomId } = memberChange;\n        if (memberChange.userId === this._ownUserId) {\n          const userIds = await txn.roomMembers.getAllUserIds(roomId);\n          await Promise.all(userIds.map((userId) => {\n            return this._removeRoomFromUserIdentity(roomId, userId, txn);\n          }));\n        } else {\n          await this._removeRoomFromUserIdentity(roomId, memberChange.userId, txn);\n        }\n        removed.push(memberChange.userId);\n      }\n    }));\n    return { added, removed };\n  }\n  async trackRoom(room, historyVisibility, log) {\n    if (room.isTrackingMembers || !room.isEncrypted) {\n      return;\n    }\n    const memberList = await room.loadMemberList(void 0, log);\n    const txn = await this._storage.readWriteTxn([\n      this._storage.storeNames.roomSummary,\n      this._storage.storeNames.userIdentities,\n      this._storage.storeNames.deviceKeys\n    ]);\n    try {\n      let isTrackingChanges;\n      try {\n        isTrackingChanges = room.writeIsTrackingMembers(true, txn);\n        const members = Array.from(memberList.members.values());\n        log.set(\"members\", members.length);\n        await Promise.all(members.map(async (member) => {\n          if (shouldShareKey(member.membership, historyVisibility)) {\n            await this._addRoomToUserIdentity(member.roomId, member.userId, txn);\n          } else {\n            await this._removeRoomFromUserIdentity(member.roomId, member.userId, txn);\n          }\n        }));\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n      room.applyIsTrackingMembersChanges(isTrackingChanges);\n    } finally {\n      memberList.release();\n    }\n  }\n  async invalidateUserKeys(userId) {\n    const txn = await this._storage.readWriteTxn([this._storage.storeNames.userIdentities]);\n    const userIdentity = await txn.userIdentities.get(userId);\n    if (userIdentity) {\n      userIdentity.keysTrackingStatus = 0;\n      txn.userIdentities.set(userIdentity);\n    }\n    await txn.complete();\n  }\n  async getCrossSigningKeyForUser(userId, usage, hsApi, log) {\n    return await log.wrap({ l: \"DeviceTracker.getCrossSigningKeyForUser\", id: userId, usage }, async (log2) => {\n      const txn = await this._storage.readTxn([\n        this._storage.storeNames.userIdentities,\n        this._storage.storeNames.crossSigningKeys\n      ]);\n      const userIdentity = await txn.userIdentities.get(userId);\n      if (userIdentity && userIdentity.keysTrackingStatus !== 0) {\n        return await txn.crossSigningKeys.get(userId, usage);\n      }\n      if (!hsApi) {\n        return void 0;\n      }\n      const keys = await this._queryKeys([userId], hsApi, log2);\n      switch (usage) {\n        case KeyUsage.Master:\n          return keys.masterKeys.get(userId);\n        case KeyUsage.SelfSigning:\n          return keys.selfSigningKeys.get(userId);\n        case KeyUsage.UserSigning:\n          return keys.userSigningKeys.get(userId);\n      }\n    });\n  }\n  async writeHistoryVisibility(room, historyVisibility, syncTxn, log) {\n    const added = [];\n    const removed = [];\n    if (room.isTrackingMembers && room.isEncrypted) {\n      await log.wrap(\"rewriting userIdentities\", async (log2) => {\n        const memberList = await room.loadMemberList(syncTxn, log2);\n        try {\n          const members = Array.from(memberList.members.values());\n          log2.set(\"members\", members.length);\n          await Promise.all(members.map(async (member) => {\n            if (shouldShareKey(member.membership, historyVisibility)) {\n              if (await this._addRoomToUserIdentity(member.roomId, member.userId, syncTxn)) {\n                added.push(member.userId);\n              }\n            } else {\n              if (await this._removeRoomFromUserIdentity(member.roomId, member.userId, syncTxn)) {\n                removed.push(member.userId);\n              }\n            }\n          }));\n        } finally {\n          memberList.release();\n        }\n      });\n    }\n    return { added, removed };\n  }\n  async _addRoomToUserIdentity(roomId, userId, txn) {\n    const { userIdentities } = txn;\n    const identity = await userIdentities.get(userId);\n    const updatedIdentity = addRoomToIdentity(identity, userId, roomId);\n    if (updatedIdentity) {\n      userIdentities.set(updatedIdentity);\n      return true;\n    }\n    return false;\n  }\n  async _removeRoomFromUserIdentity(roomId, userId, txn) {\n    const { userIdentities, deviceKeys } = txn;\n    const identity = await userIdentities.get(userId);\n    if (identity) {\n      identity.roomIds = identity.roomIds.filter((id) => id !== roomId);\n      if (identity.roomIds.length === 0) {\n        userIdentities.remove(userId);\n        deviceKeys.removeAllForUser(userId);\n      } else {\n        userIdentities.set(identity);\n      }\n      return true;\n    }\n    return false;\n  }\n  async _queryKeys(userIds, hsApi, log) {\n    const deviceKeyResponse = await hsApi.queryKeys({\n      \"timeout\": 1e4,\n      \"device_keys\": userIds.reduce((deviceKeysMap, userId) => {\n        deviceKeysMap[userId] = [];\n        return deviceKeysMap;\n      }, {}),\n      \"token\": this._getSyncToken()\n    }, { log }).response();\n    const masterKeys = log.wrap(\"master keys\", (log2) => this._filterVerifiedCrossSigningKeys(deviceKeyResponse[\"master_keys\"], KeyUsage.Master, log2));\n    const selfSigningKeys = log.wrap(\"self-signing keys\", (log2) => this._filterVerifiedCrossSigningKeys(deviceKeyResponse[\"self_signing_keys\"], KeyUsage.SelfSigning, log2));\n    const userSigningKeys = log.wrap(\"user-signing keys\", (log2) => this._filterVerifiedCrossSigningKeys(deviceKeyResponse[\"user_signing_keys\"], KeyUsage.UserSigning, log2));\n    const deviceKeys = log.wrap(\"device keys\", (log2) => this._filterVerifiedDeviceKeys(deviceKeyResponse[\"device_keys\"], log2));\n    const txn = await this._storage.readWriteTxn([\n      this._storage.storeNames.userIdentities,\n      this._storage.storeNames.deviceKeys,\n      this._storage.storeNames.crossSigningKeys\n    ]);\n    try {\n      for (const key of masterKeys.values()) {\n        txn.crossSigningKeys.set(key);\n      }\n      for (const key of selfSigningKeys.values()) {\n        txn.crossSigningKeys.set(key);\n      }\n      for (const key of userSigningKeys.values()) {\n        txn.crossSigningKeys.set(key);\n      }\n      let totalCount = 0;\n      await Promise.all(Array.from(deviceKeys.keys()).map(async (userId) => {\n        let deviceKeysForUser = deviceKeys.get(userId);\n        totalCount += deviceKeysForUser.length;\n        deviceKeysForUser = await this._storeQueriedDevicesForUserId(userId, deviceKeysForUser, txn);\n        deviceKeys.set(userId, deviceKeysForUser);\n      }));\n      log.set(\"devices\", totalCount);\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n    return {\n      deviceKeys,\n      masterKeys,\n      selfSigningKeys,\n      userSigningKeys\n    };\n  }\n  async _storeQueriedDevicesForUserId(userId, deviceKeys, txn) {\n    const knownDeviceIds = await txn.deviceKeys.getAllDeviceIds(userId);\n    for (const deviceId of knownDeviceIds) {\n      if (deviceKeys.every((di) => di.device_id !== deviceId)) {\n        txn.deviceKeys.remove(userId, deviceId);\n      }\n    }\n    const allDeviceKeys = [];\n    const deviceKeysToStore = [];\n    await Promise.all(deviceKeys.map(async (deviceKey) => {\n      if (knownDeviceIds.includes(deviceKey.device_id)) {\n        const existingDevice = await txn.deviceKeys.get(deviceKey.user_id, deviceKey.device_id);\n        if (existingDevice && getDeviceEd25519Key(existingDevice) !== getDeviceEd25519Key(deviceKey)) {\n          allDeviceKeys.push(existingDevice);\n          return;\n        }\n      }\n      allDeviceKeys.push(deviceKey);\n      deviceKeysToStore.push(deviceKey);\n    }));\n    for (const deviceKey of deviceKeysToStore) {\n      txn.deviceKeys.set(deviceKey);\n    }\n    let identity = await txn.userIdentities.get(userId);\n    if (!identity) {\n      identity = createUserIdentity(userId);\n    }\n    identity.keysTrackingStatus = 1;\n    txn.userIdentities.set(identity);\n    return allDeviceKeys;\n  }\n  _filterVerifiedCrossSigningKeys(crossSigningKeysResponse, usage, log) {\n    const keys = /* @__PURE__ */ new Map();\n    if (!crossSigningKeysResponse) {\n      return keys;\n    }\n    for (const [userId, keyInfo] of Object.entries(crossSigningKeysResponse)) {\n      log.wrap({ l: userId }, (log2) => {\n        if (this._validateCrossSigningKey(userId, keyInfo, usage, log2)) {\n          keys.set(getKeyUserId(keyInfo), keyInfo);\n        }\n      });\n    }\n    return keys;\n  }\n  _validateCrossSigningKey(userId, keyInfo, usage, log) {\n    if (getKeyUserId(keyInfo) !== userId) {\n      log.log({ l: \"user_id mismatch\", userId: keyInfo[\"user_id\"] });\n      return false;\n    }\n    if (getKeyUsage(keyInfo) !== usage) {\n      log.log({ l: \"usage mismatch\", usage: keyInfo.usage });\n      return false;\n    }\n    const publicKey = getKeyEd25519Key(keyInfo);\n    if (!publicKey) {\n      log.log({ l: \"no ed25519 key\", keys: keyInfo.keys });\n      return false;\n    }\n    return true;\n  }\n  _filterVerifiedDeviceKeys(keyQueryDeviceKeysResponse, parentLog) {\n    const curve25519Keys = /* @__PURE__ */ new Set();\n    const keys = /* @__PURE__ */ new Map();\n    if (!keyQueryDeviceKeysResponse) {\n      return keys;\n    }\n    for (const [userId, keysByDevice] of Object.entries(keyQueryDeviceKeysResponse)) {\n      parentLog.wrap(userId, (log) => {\n        const verifiedEntries = Object.entries(keysByDevice).filter(([deviceId, deviceKey]) => {\n          return log.wrap(deviceId, (log2) => {\n            if (this._validateDeviceKey(userId, deviceId, deviceKey, log2)) {\n              const curve25519Key = getDeviceCurve25519Key(deviceKey);\n              if (curve25519Keys.has(curve25519Key)) {\n                parentLog.log({\n                  l: \"ignore device with duplicate curve25519 key\",\n                  keys: deviceKey\n                }, parentLog.level.Warn);\n                return false;\n              }\n              curve25519Keys.add(curve25519Key);\n              return true;\n            } else {\n              return false;\n            }\n          });\n        });\n        const verifiedKeys = verifiedEntries.map(([, deviceKeys]) => deviceKeys);\n        keys.set(userId, verifiedKeys);\n      });\n    }\n    return keys;\n  }\n  _validateDeviceKey(userIdFromServer, deviceIdFromServer, deviceKey, log) {\n    const deviceId = deviceKey[\"device_id\"];\n    const userId = deviceKey[\"user_id\"];\n    if (userId !== userIdFromServer) {\n      log.log(\"user_id mismatch\");\n      return false;\n    }\n    if (deviceId !== deviceIdFromServer) {\n      log.log(\"device_id mismatch\");\n      return false;\n    }\n    const ed25519Key = getDeviceEd25519Key(deviceKey);\n    const curve25519Key = getDeviceCurve25519Key(deviceKey);\n    if (typeof ed25519Key !== \"string\" || typeof curve25519Key !== \"string\") {\n      log.log(\"ed25519 and/or curve25519 key invalid\").set({ deviceKey });\n      return false;\n    }\n    const isValid = verifyEd25519Signature(this._olmUtil, userId, deviceId, ed25519Key, deviceKey, log) === SignatureVerification.Valid;\n    if (!isValid) {\n      log.log({\n        l: \"ignore device with invalid signature\",\n        keys: deviceKey\n      }, log.level.Warn);\n    }\n    return isValid;\n  }\n  async devicesForTrackedRoom(roomId, hsApi, log) {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.roomMembers,\n      this._storage.storeNames.userIdentities\n    ]);\n    const userIds = await txn.roomMembers.getAllUserIds(roomId);\n    return await this._devicesForUserIdsInTrackedRoom(roomId, userIds, txn, hsApi, log);\n  }\n  async devicesForRoomMembers(roomId, userIds, hsApi, log) {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.userIdentities\n    ]);\n    return await this._devicesForUserIdsInTrackedRoom(roomId, userIds, txn, hsApi, log);\n  }\n  async devicesForUsers(userIds, hsApi, log) {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.userIdentities\n    ]);\n    const upToDateIdentities = [];\n    const outdatedUserIds = [];\n    await Promise.all(userIds.map(async (userId) => {\n      const i = await txn.userIdentities.get(userId);\n      if (i && i.keysTrackingStatus === 1) {\n        upToDateIdentities.push(i);\n      } else if (!i || i.keysTrackingStatus === 0) {\n        outdatedUserIds.push(userId);\n      }\n    }));\n    return this._devicesForUserIdentities(upToDateIdentities, outdatedUserIds, hsApi, log);\n  }\n  async deviceForId(userId, deviceId, hsApi, log) {\n    var _a;\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.deviceKeys\n    ]);\n    let deviceKey = await txn.deviceKeys.get(userId, deviceId);\n    if (deviceKey) {\n      log.set(\"existingDevice\", true);\n    } else {\n      const deviceKeyResponse = await hsApi.queryKeys({\n        \"timeout\": 1e4,\n        \"device_keys\": {\n          [userId]: [deviceId]\n        },\n        \"token\": this._getSyncToken()\n      }, { log }).response();\n      const verifiedKeysPerUser = log.wrap(\"verify\", (log2) => this._filterVerifiedDeviceKeys(deviceKeyResponse[\"device_keys\"], log2));\n      const verifiedKey = (_a = verifiedKeysPerUser.get(userId)) == null ? void 0 : _a.find((d) => d.device_id === deviceId);\n      if (!verifiedKey) {\n        return void 0;\n      }\n      const txn2 = await this._storage.readWriteTxn([\n        this._storage.storeNames.deviceKeys\n      ]);\n      const existingDevice = await txn2.deviceKeys.get(userId, deviceId);\n      if (existingDevice) {\n        deviceKey = existingDevice;\n        log.set(\"existingDeviceAfterFetch\", true);\n      } else {\n        try {\n          txn2.deviceKeys.set(verifiedKey);\n          deviceKey = verifiedKey;\n          log.set(\"newDevice\", true);\n        } catch (err) {\n          txn2.abort();\n          throw err;\n        }\n        await txn2.complete();\n      }\n    }\n    return deviceKey;\n  }\n  async _devicesForUserIdsInTrackedRoom(roomId, userIds, userIdentityTxn, hsApi, log) {\n    const allMemberIdentities = await Promise.all(userIds.map((userId) => userIdentityTxn.userIdentities.get(userId)));\n    const identities = allMemberIdentities.filter((identity) => {\n      return identity && identity.roomIds.includes(roomId);\n    });\n    const upToDateIdentities = identities.filter((i) => i.keysTrackingStatus === 1);\n    const outdatedUserIds = identities.filter((i) => i.keysTrackingStatus === 0).map((i) => i.userId);\n    let devices = await this._devicesForUserIdentities(upToDateIdentities, outdatedUserIds, hsApi, log);\n    devices = devices.filter((device) => {\n      const isOwnDevice = device.user_id === this._ownUserId && device.device_id === this._ownDeviceId;\n      return !isOwnDevice;\n    });\n    return devices;\n  }\n  async _devicesForUserIdentities(upToDateIdentities, outdatedUserIds, hsApi, log) {\n    log.set(\"uptodate\", upToDateIdentities.length);\n    log.set(\"outdated\", outdatedUserIds.length);\n    let queriedDeviceKeys;\n    if (outdatedUserIds.length) {\n      const { deviceKeys } = await this._queryKeys(outdatedUserIds, hsApi, log);\n      queriedDeviceKeys = deviceKeys;\n    }\n    const deviceTxn = await this._storage.readTxn([\n      this._storage.storeNames.deviceKeys\n    ]);\n    const devicesPerUser = await Promise.all(upToDateIdentities.map((identity) => {\n      return deviceTxn.deviceKeys.getAllForUserId(identity.userId);\n    }));\n    let flattenedDevices = devicesPerUser.reduce((all, devicesForUser) => all.concat(devicesForUser), []);\n    if (queriedDeviceKeys && queriedDeviceKeys.size) {\n      for (const deviceKeysForUser of queriedDeviceKeys.values()) {\n        flattenedDevices = flattenedDevices.concat(deviceKeysForUser);\n      }\n    }\n    return flattenedDevices;\n  }\n  async getDeviceByCurve25519Key(curve25519Key, txn) {\n    return await txn.deviceKeys.getByCurve25519Key(curve25519Key);\n  }\n}\nconst schema = [\n  createInitialStores,\n  createMemberStore,\n  migrateSession,\n  createE2EEStores,\n  migrateEncryptionFlag,\n  createAccountDataStore,\n  createInviteStore,\n  createArchivedRoomSummaryStore,\n  migrateOperationScopeIndex,\n  createTimelineRelationsStore,\n  fixMissingRoomsInUserIdentities,\n  changeSSSSKeyPrefix,\n  backupAndRestoreE2EEAccountToLocalStorage,\n  clearAllStores,\n  addInboundSessionBackupIndex,\n  migrateBackupStatus,\n  createCallStore,\n  applyCrossSigningChanges\n];\nfunction createDatabaseNameHelper(db) {\n  const databaseNameHelper = {\n    databaseName: db.name,\n    get idbFactory() {\n      throw new Error(\"unused\");\n    },\n    get IDBKeyRange() {\n      throw new Error(\"unused\");\n    },\n    addWriteError() {\n    }\n  };\n  return databaseNameHelper;\n}\nfunction createInitialStores(db) {\n  db.createObjectStore(\"session\", { keyPath: \"key\" });\n  db.createObjectStore(\"roomSummary\", { keyPath: \"roomId\" });\n  db.createObjectStore(\"timelineFragments\", { keyPath: \"key\" });\n  const timelineEvents = db.createObjectStore(\"timelineEvents\", { keyPath: \"key\" });\n  timelineEvents.createIndex(\"byEventId\", \"eventIdKey\", { unique: true });\n  db.createObjectStore(\"roomState\", { keyPath: \"key\" });\n  db.createObjectStore(\"pendingEvents\", { keyPath: \"key\" });\n}\nasync function createMemberStore(db, txn) {\n  const roomMembers = new RoomMemberStore(db.createObjectStore(\"roomMembers\", { keyPath: \"key\" }));\n  const roomState = txn.objectStore(\"roomState\");\n  await iterateCursor(roomState.openCursor(), (entry) => {\n    if (entry.event.type === EVENT_TYPE$1) {\n      roomState.delete(entry.key);\n      const member = RoomMember.fromMemberEvent(entry.roomId, entry.event);\n      if (member) {\n        roomMembers.set(member.serialize());\n      }\n    }\n    return NOT_DONE;\n  });\n}\nasync function migrateSession(db, txn, localStorage2) {\n  const session = txn.objectStore(\"session\");\n  try {\n    const PRE_MIGRATION_KEY = 1;\n    const entry = await reqAsPromise(session.get(PRE_MIGRATION_KEY));\n    if (entry) {\n      session.delete(PRE_MIGRATION_KEY);\n      const { syncToken, syncFilterId, serverVersions } = entry.value;\n      const store = new SessionStore(session, localStorage2);\n      store.set(\"sync\", { token: syncToken, filterId: syncFilterId });\n      store.set(\"serverVersions\", serverVersions);\n    }\n  } catch (err) {\n    txn.abort();\n    console.error(\"could not migrate session\", err.stack);\n  }\n}\nfunction createE2EEStores(db) {\n  db.createObjectStore(\"userIdentities\", { keyPath: \"userId\" });\n  const deviceIdentities = db.createObjectStore(\"deviceIdentities\", { keyPath: \"key\" });\n  deviceIdentities.createIndex(\"byCurve25519Key\", \"curve25519Key\", { unique: true });\n  db.createObjectStore(\"olmSessions\", { keyPath: \"key\" });\n  db.createObjectStore(\"inboundGroupSessions\", { keyPath: \"key\" });\n  db.createObjectStore(\"outboundGroupSessions\", { keyPath: \"roomId\" });\n  db.createObjectStore(\"groupSessionDecryptions\", { keyPath: \"key\" });\n  const operations = db.createObjectStore(\"operations\", { keyPath: \"id\" });\n  operations.createIndex(\"byTypeAndScope\", \"typeScopeKey\", { unique: false });\n}\nasync function migrateEncryptionFlag(db, txn) {\n  var _a;\n  const roomSummary = txn.objectStore(\"roomSummary\");\n  const roomState = txn.objectStore(\"roomState\");\n  const summaries = [];\n  await iterateCursor(roomSummary.openCursor(), (summary) => {\n    summaries.push(summary);\n    return NOT_DONE;\n  });\n  for (const summary of summaries) {\n    const encryptionEntry = await reqAsPromise(roomState.get(`${summary.roomId}|m.room.encryption|`));\n    if (encryptionEntry) {\n      summary.encryption = (_a = encryptionEntry == null ? void 0 : encryptionEntry.event) == null ? void 0 : _a.content;\n      delete summary.isEncrypted;\n      roomSummary.put(summary);\n    }\n  }\n}\nfunction createAccountDataStore(db) {\n  db.createObjectStore(\"accountData\", { keyPath: \"type\" });\n}\nfunction createInviteStore(db) {\n  db.createObjectStore(\"invites\", { keyPath: \"roomId\" });\n}\nfunction createArchivedRoomSummaryStore(db) {\n  db.createObjectStore(\"archivedRoomSummary\", { keyPath: \"summary.roomId\" });\n}\nasync function migrateOperationScopeIndex(db, txn) {\n  try {\n    const operations = txn.objectStore(\"operations\");\n    operations.deleteIndex(\"byTypeAndScope\");\n    await iterateCursor(operations.openCursor(), (op, key, cur) => {\n      const { typeScopeKey } = op;\n      delete op.typeScopeKey;\n      const [type, scope] = typeScopeKey.split(\"|\");\n      op.scopeTypeKey = encodeScopeTypeKey(scope, type);\n      cur.update(op);\n      return NOT_DONE;\n    });\n    operations.createIndex(\"byScopeAndType\", \"scopeTypeKey\", { unique: false });\n  } catch (err) {\n    txn.abort();\n    console.error(\"could not migrate operations\", err.stack);\n  }\n}\nfunction createTimelineRelationsStore(db) {\n  db.createObjectStore(\"timelineRelations\", { keyPath: \"key\" });\n}\nfunction fixMissingRoomsInUserIdentities() {\n}\nasync function changeSSSSKeyPrefix(db, txn) {\n  const session = txn.objectStore(\"session\");\n  const ssssKey = await reqAsPromise(session.get(\"ssssKey\"));\n  if (ssssKey) {\n    session.put({ key: `${SESSION_E2EE_KEY_PREFIX}ssssKey`, value: ssssKey.value });\n  }\n}\nasync function backupAndRestoreE2EEAccountToLocalStorage(db, txn, localStorage2, log) {\n  const session = txn.objectStore(\"session\");\n  const sessionStore = new SessionStore(new Store(session, createDatabaseNameHelper(db)), localStorage2);\n  sessionStore.writeE2EEIdentityToLocalStorage();\n  const restored = await sessionStore.tryRestoreE2EEIdentityFromLocalStorage(log);\n  log.set(\"restored\", restored);\n}\nasync function clearAllStores(db, txn) {\n  for (const storeName of db.objectStoreNames) {\n    const store = txn.objectStore(storeName);\n    switch (storeName) {\n      case \"inboundGroupSessions\":\n      case \"outboundGroupSessions\":\n      case \"olmSessions\":\n      case \"operations\":\n        continue;\n      case \"session\": {\n        await iterateCursor(store.openCursor(), (value, key, cursor) => {\n          if (!key.startsWith(SESSION_E2EE_KEY_PREFIX)) {\n            cursor.delete();\n          }\n          return NOT_DONE;\n        });\n        break;\n      }\n      default: {\n        store.clear();\n        break;\n      }\n    }\n  }\n}\nasync function addInboundSessionBackupIndex(db, txn, localStorage2, log) {\n  const inboundGroupSessions = txn.objectStore(\"inboundGroupSessions\");\n  inboundGroupSessions.createIndex(\"byBackup\", \"backup\", { unique: false });\n}\nasync function migrateBackupStatus(db, txn, localStorage2, log) {\n  const inboundGroupSessions = txn.objectStore(\"inboundGroupSessions\");\n  let countWithSession = 0;\n  let countWithoutSession = 0;\n  await iterateCursor(inboundGroupSessions.openCursor(), (value, key, cursor) => {\n    if (value.session) {\n      value.backup = BackupStatus.NotBackedUp;\n      value.source = KeySource.DeviceMessage;\n      cursor.update(value);\n      countWithSession += 1;\n    } else {\n      countWithoutSession += 1;\n    }\n    return NOT_DONE;\n  });\n  log.set(\"countWithoutSession\", countWithoutSession);\n  log.set(\"countWithSession\", countWithSession);\n}\nfunction createCallStore(db) {\n  db.createObjectStore(\"calls\", { keyPath: \"key\" });\n}\nasync function applyCrossSigningChanges(db, txn, localStorage2, log) {\n  db.createObjectStore(\"crossSigningKeys\", { keyPath: \"key\" });\n  db.deleteObjectStore(\"deviceIdentities\");\n  const deviceKeys = db.createObjectStore(\"deviceKeys\", { keyPath: \"key\" });\n  deviceKeys.createIndex(\"byCurve25519Key\", \"curve25519Key\", { unique: true });\n  const userIdentities = txn.objectStore(\"userIdentities\");\n  let counter = 0;\n  await iterateCursor(userIdentities.openCursor(), (value, key, cursor) => {\n    delete value[\"deviceTrackingStatus\"];\n    delete value[\"crossSigningKeys\"];\n    value.keysTrackingStatus = KeysTrackingStatus.Outdated;\n    cursor.update(value);\n    counter += 1;\n    return NOT_DONE;\n  });\n  log.set(\"marked_outdated\", counter);\n}\nasync function detectWebkitEarlyCloseTxnBug(idbFactory) {\n  const dbName = \"hydrogen_webkit_test_inactive_txn_bug\";\n  try {\n    const db = await openDatabase(dbName, (db2) => {\n      db2.createObjectStore(\"test\", { keyPath: \"key\" });\n    }, 1, idbFactory);\n    const readTxn = db.transaction([\"test\"], \"readonly\");\n    await reqAsPromise(readTxn.objectStore(\"test\").get(\"somekey\"));\n    await new Promise((r) => setTimeout(r, 0));\n    const writeTxn = db.transaction([\"test\"], \"readwrite\");\n    await Promise.resolve();\n    writeTxn.objectStore(\"test\").add({ key: \"somekey\", value: \"foo\" });\n    await txnAsPromise(writeTxn);\n    db.close();\n  } catch (err) {\n    if (err.name === \"TransactionInactiveError\") {\n      return true;\n    }\n  }\n  return false;\n}\nconst sessionName = (sessionId) => `hydrogen_session_${sessionId}`;\nconst openDatabaseWithSessionId = function(sessionId, idbFactory, localStorage2, log) {\n  const create = (db, txn, oldVersion, version) => createStores(db, txn, oldVersion, version, localStorage2, log);\n  return openDatabase(sessionName(sessionId), create, schema.length, idbFactory);\n};\nasync function requestPersistedStorage() {\n  var _a, _b;\n  const glob = this;\n  if ((_b = (_a = glob == null ? void 0 : glob.navigator) == null ? void 0 : _a.storage) == null ? void 0 : _b.persist) {\n    return await glob.navigator.storage.persist();\n  } else if (glob == null ? void 0 : glob.document.requestStorageAccess) {\n    try {\n      await glob.document.requestStorageAccess();\n      return true;\n    } catch (err) {\n      console.warn(\"requestStorageAccess threw an error:\", err);\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\nclass StorageFactory {\n  constructor(serviceWorkerHandler, idbFactory = window.indexedDB, _IDBKeyRange = window.IDBKeyRange, localStorage2 = window.localStorage) {\n    this._serviceWorkerHandler = serviceWorkerHandler;\n    this._idbFactory = idbFactory;\n    this._IDBKeyRange = _IDBKeyRange;\n    this._localStorage = localStorage2;\n  }\n  async create(sessionId, log) {\n    var _a;\n    await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.preventConcurrentSessionAccess(sessionId));\n    requestPersistedStorage().then((persisted) => {\n      if (!persisted) {\n        log.log(\"no persisted storage, database can be evicted by browser\", log.level.Warn);\n      }\n    });\n    const hasWebkitEarlyCloseTxnBug = await detectWebkitEarlyCloseTxnBug(this._idbFactory);\n    const db = await openDatabaseWithSessionId(sessionId, this._idbFactory, this._localStorage, log);\n    return new Storage(db, this._idbFactory, this._IDBKeyRange, hasWebkitEarlyCloseTxnBug, this._localStorage, log.logger);\n  }\n  async delete(sessionId) {\n    const databaseName = sessionName(sessionId);\n    try {\n      clearKeysFromLocalStorage(this._localStorage, databaseName);\n    } catch (e) {\n    }\n    try {\n      const req = this._idbFactory.deleteDatabase(databaseName);\n      await reqAsPromise(req);\n    } catch (e) {\n    }\n  }\n  async export(sessionId, log) {\n    const db = await openDatabaseWithSessionId(sessionId, this._idbFactory, this._localStorage, log);\n    return await exportSession(db);\n  }\n  async import(sessionId, data, log) {\n    const db = await openDatabaseWithSessionId(sessionId, this._idbFactory, this._localStorage, log);\n    return await importSession(db, data);\n  }\n}\nasync function createStores(db, txn, oldVersion, version, localStorage2, log) {\n  const startIdx = oldVersion || 0;\n  return log.wrap({ l: \"storage migration\", oldVersion, version }, async (log2) => {\n    for (let i = startIdx; i < version; ++i) {\n      const migrationFunc = schema[i];\n      await log2.wrap(`v${i + 1}`, (log3) => migrationFunc(db, txn, localStorage2, log3));\n    }\n  });\n}\nclass SessionInfoStorage {\n  constructor(name) {\n    this._name = name;\n  }\n  getAll() {\n    const sessionsJson = localStorage.getItem(this._name);\n    if (sessionsJson) {\n      const sessions = JSON.parse(sessionsJson);\n      if (Array.isArray(sessions)) {\n        return Promise.resolve(sessions);\n      }\n    }\n    return Promise.resolve([]);\n  }\n  async updateLastUsed(id, timestamp) {\n    const sessions = await this.getAll();\n    if (sessions) {\n      const session = sessions.find((session2) => session2.id === id);\n      if (session) {\n        session.lastUsed = timestamp;\n        localStorage.setItem(this._name, JSON.stringify(sessions));\n      }\n    }\n  }\n  async updateToken(id, accessToken, accessTokenExpiresAt, refreshToken) {\n    const sessions = await this.getAll();\n    if (sessions) {\n      const session = sessions.find((session2) => session2.id === id);\n      if (session) {\n        session.accessToken = accessToken;\n        session.accessTokenExpiresAt = accessTokenExpiresAt;\n        session.refreshToken = refreshToken;\n        localStorage.setItem(this._name, JSON.stringify(sessions));\n      }\n    }\n  }\n  async get(id) {\n    const sessions = await this.getAll();\n    if (sessions) {\n      return sessions.find((session) => session.id === id);\n    }\n  }\n  async add(sessionInfo) {\n    const sessions = await this.getAll();\n    sessions.push(sessionInfo);\n    localStorage.setItem(this._name, JSON.stringify(sessions));\n  }\n  async delete(sessionId) {\n    let sessions = await this.getAll();\n    sessions = sessions.filter((s) => s.id !== sessionId);\n    localStorage.setItem(this._name, JSON.stringify(sessions));\n  }\n}\nclass SettingsStorage {\n  constructor(prefix2) {\n    this._prefix = prefix2;\n  }\n  async setInt(key, value) {\n    this._set(key, value);\n  }\n  async getInt(key, defaultValue = 0) {\n    const value = window.localStorage.getItem(`${this._prefix}${key}`);\n    if (typeof value === \"string\") {\n      return parseInt(value, 10);\n    }\n    return defaultValue;\n  }\n  async setBool(key, value) {\n    this._set(key, value);\n  }\n  async getBool(key, defaultValue = false) {\n    const value = window.localStorage.getItem(`${this._prefix}${key}`);\n    if (typeof value === \"string\") {\n      return value === \"true\";\n    }\n    return defaultValue;\n  }\n  async setString(key, value) {\n    this._set(key, value);\n  }\n  async getString(key) {\n    return window.localStorage.getItem(`${this._prefix}${key}`);\n  }\n  async remove(key) {\n    window.localStorage.removeItem(`${this._prefix}${key}`);\n  }\n  async _set(key, value) {\n    window.localStorage.setItem(`${this._prefix}${key}`, value);\n  }\n}\nclass UTF8 {\n  constructor() {\n    this._encoder = null;\n    this._decoder = null;\n  }\n  encode(str) {\n    if (!this._encoder) {\n      this._encoder = new TextEncoder();\n    }\n    return this._encoder.encode(str);\n  }\n  decode(buffer) {\n    if (!this._decoder) {\n      this._decoder = new TextDecoder();\n    }\n    return this._decoder.decode(buffer);\n  }\n}\nclass Base64 {\n  encodeUnpadded(buffer) {\n    const str = base64.encode(buffer);\n    const paddingIdx = str.indexOf(\"=\");\n    if (paddingIdx !== -1) {\n      return str.substr(0, paddingIdx);\n    } else {\n      return str;\n    }\n  }\n  encode(buffer) {\n    return base64.encode(buffer);\n  }\n  decode(str) {\n    return base64.decode(str);\n  }\n}\nfunction getAugmentedNamespace(n) {\n  if (n.__esModule)\n    return n;\n  var a = Object.defineProperty({}, \"__esModule\", { value: true });\n  Object.keys(n).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n, k);\n    Object.defineProperty(a, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n[k];\n      }\n    });\n  });\n  return a;\n}\nvar Buffer2 = {\n  isBuffer: function(array) {\n    return array instanceof Uint8Array;\n  },\n  from: function(arrayBuffer) {\n    return arrayBuffer;\n  },\n  allocUnsafe: function(size) {\n    return Buffer2.alloc(size);\n  },\n  alloc: function(size) {\n    return new Uint8Array(size);\n  }\n};\nvar safeBuffer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Buffer: Buffer2\n}, Symbol.toStringTag, { value: \"Module\" }));\nvar require$$0 = /* @__PURE__ */ getAugmentedNamespace(safeBuffer);\nvar _Buffer = require$$0.Buffer;\nfunction base(ALPHABET2) {\n  if (ALPHABET2.length >= 255) {\n    throw new TypeError(\"Alphabet too long\");\n  }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET2.length; i++) {\n    var x = ALPHABET2.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) {\n      throw new TypeError(x + \" is ambiguous\");\n    }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET2.length;\n  var LEADER = ALPHABET2.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256);\n  var iFACTOR = Math.log(256) / Math.log(BASE);\n  function encode(source) {\n    if (Array.isArray(source) || source instanceof Uint8Array) {\n      source = _Buffer.from(source);\n    }\n    if (!_Buffer.isBuffer(source)) {\n      throw new TypeError(\"Expected Buffer\");\n    }\n    if (source.length === 0) {\n      return \"\";\n    }\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n    var size = (pend - pbegin) * iFACTOR + 1 >>> 0;\n    var b58 = new Uint8Array(size);\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n      var i2 = 0;\n      for (var it1 = size - 1; (carry !== 0 || i2 < length) && it1 !== -1; it1--, i2++) {\n        carry += 256 * b58[it1] >>> 0;\n        b58[it1] = carry % BASE >>> 0;\n        carry = carry / BASE >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error(\"Non-zero carry\");\n      }\n      length = i2;\n      pbegin++;\n    }\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) {\n      str += ALPHABET2.charAt(b58[it2]);\n    }\n    return str;\n  }\n  function decodeUnsafe(source) {\n    if (typeof source !== \"string\") {\n      throw new TypeError(\"Expected String\");\n    }\n    if (source.length === 0) {\n      return _Buffer.alloc(0);\n    }\n    var psz = 0;\n    if (source[psz] === \" \") {\n      return;\n    }\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n    var size = (source.length - psz) * FACTOR + 1 >>> 0;\n    var b256 = new Uint8Array(size);\n    while (source[psz]) {\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n      if (carry === 255) {\n        return;\n      }\n      var i2 = 0;\n      for (var it3 = size - 1; (carry !== 0 || i2 < length) && it3 !== -1; it3--, i2++) {\n        carry += BASE * b256[it3] >>> 0;\n        b256[it3] = carry % 256 >>> 0;\n        carry = carry / 256 >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error(\"Non-zero carry\");\n      }\n      length = i2;\n      psz++;\n    }\n    if (source[psz] === \" \") {\n      return;\n    }\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = _Buffer.allocUnsafe(zeroes + (size - it4));\n    vch.fill(0, 0, zeroes);\n    var j2 = zeroes;\n    while (it4 !== size) {\n      vch[j2++] = b256[it4++];\n    }\n    return vch;\n  }\n  function decode(string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) {\n      return buffer;\n    }\n    throw new Error(\"Non-base\" + BASE + \" character\");\n  }\n  return {\n    encode,\n    decodeUnsafe,\n    decode\n  };\n}\nvar src = base;\nvar basex = src;\nvar ALPHABET = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\nvar bs58 = basex(ALPHABET);\nclass Base58 {\n  encode(buffer) {\n    return bs58.encode(buffer);\n  }\n  decode(str) {\n    return bs58.decode(str);\n  }\n}\nclass Encoding {\n  constructor() {\n    this.utf8 = new UTF8();\n    this.base64 = new Base64();\n    this.base58 = new Base58();\n  }\n}\nclass OlmWorker {\n  constructor(workerPool) {\n    this._workerPool = workerPool;\n  }\n  megolmDecrypt(session, ciphertext) {\n    const sessionKey = session.export_session(session.first_known_index());\n    return this._workerPool.send({ type: \"megolm_decrypt\", ciphertext, sessionKey });\n  }\n  async createAccountAndOTKs(account, otkAmount) {\n    let randomValues;\n    if (window.msCrypto) {\n      randomValues = [\n        window.msCrypto.getRandomValues(new Uint8Array(64)),\n        window.msCrypto.getRandomValues(new Uint8Array(otkAmount * 32))\n      ];\n    }\n    const pickle = await this._workerPool.send({ type: \"olm_create_account_otks\", randomValues, otkAmount }).response();\n    account.unpickle(\"\", pickle);\n  }\n  async createOutboundOlmSession(account, newSession, theirIdentityKey, theirOneTimeKey) {\n    const accountPickle = account.pickle(\"\");\n    let randomValues;\n    if (window.msCrypto) {\n      randomValues = [\n        window.msCrypto.getRandomValues(new Uint8Array(64))\n      ];\n    }\n    const sessionPickle = await this._workerPool.send({ type: \"olm_create_outbound\", accountPickle, theirIdentityKey, theirOneTimeKey, randomValues }).response();\n    newSession.unpickle(\"\", sessionPickle);\n  }\n  dispose() {\n    this._workerPool.dispose();\n  }\n}\nfunction isChildren(children) {\n  return typeof children !== \"object\" || \"nodeType\" in children || Array.isArray(children);\n}\nfunction classNames(obj, value) {\n  return Object.entries(obj).reduce((cn, [name, enabled]) => {\n    if (typeof enabled === \"function\") {\n      enabled = enabled(value);\n    }\n    if (enabled) {\n      return cn + (cn.length ? \" \" : \"\") + name;\n    } else {\n      return cn;\n    }\n  }, \"\");\n}\nfunction setAttribute(el2, name, value) {\n  if (name === \"className\") {\n    name = \"class\";\n  }\n  if (value === false) {\n    el2.removeAttribute(name);\n  } else {\n    if (value === true) {\n      value = name;\n    }\n    el2.setAttribute(name, value);\n  }\n}\nfunction el(elementName, attributes, children) {\n  return elNS(HTML_NS, elementName, attributes, children);\n}\nfunction elNS(ns, elementName, attributes, children) {\n  if (attributes && isChildren(attributes)) {\n    children = attributes;\n    attributes = void 0;\n  }\n  const e = document.createElementNS(ns, elementName);\n  if (attributes) {\n    for (let [name, value] of Object.entries(attributes)) {\n      if (typeof value === \"object\") {\n        value = value !== null && name === \"className\" ? classNames(value, void 0) : false;\n      }\n      setAttribute(e, name, value);\n    }\n  }\n  if (children) {\n    if (!Array.isArray(children)) {\n      children = [children];\n    }\n    for (let c of children) {\n      if (typeof c === \"string\") {\n        c = text(c);\n      }\n      e.appendChild(c);\n    }\n  }\n  return e;\n}\nfunction text(str) {\n  return document.createTextNode(str);\n}\nconst HTML_NS = \"http://www.w3.org/1999/xhtml\";\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nconst TAG_NAMES = {\n  [HTML_NS]: [\n    \"br\",\n    \"a\",\n    \"ol\",\n    \"ul\",\n    \"li\",\n    \"div\",\n    \"h1\",\n    \"h2\",\n    \"h3\",\n    \"h4\",\n    \"h5\",\n    \"h6\",\n    \"p\",\n    \"strong\",\n    \"em\",\n    \"span\",\n    \"img\",\n    \"section\",\n    \"header\",\n    \"main\",\n    \"footer\",\n    \"dialog\",\n    \"article\",\n    \"aside\",\n    \"del\",\n    \"blockquote\",\n    \"details\",\n    \"summary\",\n    \"table\",\n    \"thead\",\n    \"tbody\",\n    \"tr\",\n    \"th\",\n    \"td\",\n    \"hr\",\n    \"pre\",\n    \"code\",\n    \"button\",\n    \"time\",\n    \"input\",\n    \"textarea\",\n    \"select\",\n    \"option\",\n    \"optgroup\",\n    \"label\",\n    \"form\",\n    \"progress\",\n    \"output\",\n    \"video\",\n    \"style\"\n  ],\n  [SVG_NS]: [\"svg\", \"g\", \"path\", \"circle\", \"ellipse\", \"rect\", \"use\"]\n};\nconst tag = {};\nfor (const [ns, tags] of Object.entries(TAG_NAMES)) {\n  for (const tagName of tags) {\n    tag[tagName] = function(attributes, children) {\n      return elNS(ns, tagName, attributes, children);\n    };\n  }\n}\nfunction mountView(view, mountArgs) {\n  let node;\n  try {\n    node = view.mount(mountArgs);\n  } catch (err) {\n    console.error(err);\n    node = errorToDOM(err);\n  }\n  return node;\n}\nfunction errorToDOM(error) {\n  const stack = new Error().stack;\n  let callee = null;\n  if (stack) {\n    callee = stack.split(\"\\n\")[1];\n  }\n  return tag.div([\n    tag.h2(\"Something went wrong\\u2026\"),\n    tag.h3(error.message),\n    tag.p(`This occurred while running ${callee}.`),\n    tag.pre(error.stack)\n  ]);\n}\nfunction insertAt(parentNode, idx, childNode) {\n  const isLast = idx === parentNode.childElementCount;\n  if (isLast) {\n    parentNode.appendChild(childNode);\n  } else {\n    const nextDomNode = parentNode.children[idx];\n    parentNode.insertBefore(childNode, nextDomNode);\n  }\n}\nfunction removeChildren(parentNode) {\n  parentNode.innerHTML = \"\";\n}\nfunction disableTargetCallback$1(callback) {\n  return async (evt) => {\n    var _a, _b;\n    (_a = evt.target) == null ? void 0 : _a.setAttribute(\"disabled\", \"disabled\");\n    await callback(evt);\n    (_b = evt.target) == null ? void 0 : _b.removeAttribute(\"disabled\");\n  };\n}\nclass ListView {\n  constructor({ list, onItemClick, className, tagName = \"ul\", parentProvidesUpdates = true }, childCreator) {\n    this._onItemClick = onItemClick;\n    this._list = list;\n    this._className = className;\n    this._tagName = tagName;\n    this._root = void 0;\n    this._subscription = void 0;\n    this._childCreator = childCreator;\n    this._childInstances = void 0;\n    this._mountArgs = { parentProvidesUpdates };\n  }\n  root() {\n    return this._root;\n  }\n  update(attributes) {\n    if (attributes.list) {\n      if (this._subscription) {\n        this._unloadList();\n        while (this._root.lastChild) {\n          this._root.lastChild.remove();\n        }\n      }\n      this._list = attributes.list;\n      this.loadList();\n    }\n  }\n  mount() {\n    const attr = {};\n    if (this._className) {\n      attr.className = this._className;\n    }\n    const root = this._root = el(this._tagName, attr);\n    this.loadList();\n    if (this._onItemClick) {\n      root.addEventListener(\"click\", this);\n    }\n    return root;\n  }\n  handleEvent(evt) {\n    if (evt.type === \"click\") {\n      this._handleClick(evt);\n    }\n  }\n  unmount() {\n    if (this._list) {\n      this._unloadList();\n    }\n  }\n  _handleClick(event2) {\n    if (event2.target === this._root || !this._onItemClick) {\n      return;\n    }\n    let childNode = event2.target;\n    while (childNode.parentNode !== this._root) {\n      childNode = childNode.parentNode;\n    }\n    const index = Array.prototype.indexOf.call(this._root.childNodes, childNode);\n    const childView = this._childInstances[index];\n    if (childView) {\n      this._onItemClick(childView, event2);\n    }\n  }\n  _unloadList() {\n    this._subscription = this._subscription();\n    for (let child of this._childInstances) {\n      child.unmount();\n    }\n    this._childInstances = void 0;\n  }\n  loadList() {\n    if (!this._list) {\n      return;\n    }\n    this._subscription = this._list.subscribe(this);\n    this._childInstances = [];\n    const fragment = document.createDocumentFragment();\n    for (let item of this._list) {\n      const child = this._childCreator(item);\n      this._childInstances.push(child);\n      fragment.appendChild(mountView(child, this._mountArgs));\n    }\n    this._root.appendChild(fragment);\n  }\n  onReset() {\n    for (const child of this._childInstances) {\n      child.root().remove();\n      child.unmount();\n    }\n    this._childInstances.length = 0;\n  }\n  onAdd(idx, value) {\n    this.addChild(idx, value);\n  }\n  onRemove(idx, value) {\n    this.removeChild(idx);\n  }\n  onMove(fromIdx, toIdx, value) {\n    this.moveChild(fromIdx, toIdx);\n  }\n  onUpdate(i, value, params) {\n    this.updateChild(i, value, params);\n  }\n  addChild(childIdx, value) {\n    const child = this._childCreator(value);\n    this._childInstances.splice(childIdx, 0, child);\n    insertAt(this._root, childIdx, mountView(child, this._mountArgs));\n  }\n  removeChild(childIdx) {\n    const [child] = this._childInstances.splice(childIdx, 1);\n    child.root().remove();\n    child.unmount();\n  }\n  moveChild(fromChildIdx, toChildIdx) {\n    const [child] = this._childInstances.splice(fromChildIdx, 1);\n    this._childInstances.splice(toChildIdx, 0, child);\n    child.root().remove();\n    insertAt(this._root, toChildIdx, child.root());\n  }\n  updateChild(childIdx, value, params) {\n    if (this._childInstances) {\n      const instance = this._childInstances[childIdx];\n      instance && instance.update(value, params);\n    }\n  }\n  recreateItem(index, value) {\n    if (this._childInstances) {\n      const child = this._childCreator(value);\n      if (!child) {\n        this.onRemove(index, value);\n      } else {\n        const [oldChild] = this._childInstances.splice(index, 1, child);\n        this._root.replaceChild(child.mount(this._mountArgs), oldChild.root());\n        oldChild.unmount();\n      }\n    }\n  }\n  getChildInstanceByIndex(idx) {\n    var _a;\n    return (_a = this._childInstances) == null ? void 0 : _a[idx];\n  }\n}\nclass BaseUpdateView {\n  constructor(value) {\n    this._value = value;\n    this._boundUpdateFromValue = null;\n  }\n  subscribeOnMount(options) {\n    const parentProvidesUpdates = options && options.parentProvidesUpdates;\n    if (!parentProvidesUpdates) {\n      this._subscribe();\n    }\n  }\n  unmount() {\n    this._unsubscribe();\n  }\n  get value() {\n    return this._value;\n  }\n  _updateFromValue(changedProps) {\n    this.update(this._value, changedProps);\n  }\n  _subscribe() {\n    var _a;\n    if (typeof ((_a = this._value) == null ? void 0 : _a.on) === \"function\") {\n      this._boundUpdateFromValue = this._updateFromValue.bind(this);\n      this._value.on(\"change\", this._boundUpdateFromValue);\n    }\n  }\n  _unsubscribe() {\n    if (this._boundUpdateFromValue) {\n      if (typeof this._value.off === \"function\") {\n        this._value.off(\"change\", this._boundUpdateFromValue);\n      }\n      this._boundUpdateFromValue = null;\n    }\n  }\n}\nfunction objHasFns(obj) {\n  for (const value of Object.values(obj)) {\n    if (typeof value === \"function\") {\n      return true;\n    }\n  }\n  return false;\n}\nclass TemplateView extends BaseUpdateView {\n  constructor() {\n    super(...arguments);\n    this._eventListeners = void 0;\n    this._bindings = void 0;\n    this._root = void 0;\n    this._subViews = void 0;\n  }\n  _attach() {\n    if (this._eventListeners) {\n      for (let { node, name, fn, useCapture } of this._eventListeners) {\n        node.addEventListener(name, fn, useCapture);\n      }\n    }\n  }\n  _detach() {\n    if (this._eventListeners) {\n      for (let { node, name, fn, useCapture } of this._eventListeners) {\n        node.removeEventListener(name, fn, useCapture);\n      }\n    }\n  }\n  mount(options) {\n    const builder = new TemplateBuilder(this);\n    try {\n      this._root = this.render(builder, this._value);\n    } finally {\n      builder.close();\n    }\n    this.subscribeOnMount(options);\n    this._attach();\n    return this._root;\n  }\n  unmount() {\n    this._detach();\n    super.unmount();\n    if (this._subViews) {\n      for (const v of this._subViews) {\n        v.unmount();\n      }\n    }\n  }\n  root() {\n    return this._root;\n  }\n  update(value, props) {\n    this._value = value;\n    if (this._bindings) {\n      for (const binding of this._bindings) {\n        binding();\n      }\n    }\n  }\n  _addEventListener(node, name, fn, useCapture = false) {\n    if (!this._eventListeners) {\n      this._eventListeners = [];\n    }\n    this._eventListeners.push({ node, name, fn, useCapture });\n  }\n  _addBinding(bindingFn) {\n    if (!this._bindings) {\n      this._bindings = [];\n    }\n    this._bindings.push(bindingFn);\n  }\n  addSubView(view) {\n    if (!this._subViews) {\n      this._subViews = [];\n    }\n    this._subViews.push(view);\n  }\n  removeSubView(view) {\n    if (!this._subViews) {\n      return;\n    }\n    const idx = this._subViews.indexOf(view);\n    if (idx !== -1) {\n      this._subViews.splice(idx, 1);\n    }\n  }\n  updateSubViews(value, props) {\n    if (this._subViews) {\n      for (const v of this._subViews) {\n        v.update(value, props);\n      }\n    }\n  }\n}\nclass TemplateBuilder {\n  constructor(templateView) {\n    this._closed = false;\n    this._templateView = templateView;\n  }\n  close() {\n    this._closed = true;\n  }\n  _addBinding(fn) {\n    if (this._closed) {\n      console.trace(\"Adding a binding after render will likely cause memory leaks\");\n    }\n    this._templateView._addBinding(fn);\n  }\n  get _value() {\n    return this._templateView.value;\n  }\n  addEventListener(node, name, fn, useCapture = false) {\n    this._templateView._addEventListener(node, name, fn, useCapture);\n  }\n  _addAttributeBinding(node, name, fn) {\n    let prevValue = void 0;\n    const binding = () => {\n      const newValue = fn(this._value);\n      if (prevValue !== newValue) {\n        prevValue = newValue;\n        setAttribute(node, name, newValue);\n      }\n    };\n    this._addBinding(binding);\n    binding();\n  }\n  _addClassNamesBinding(node, obj) {\n    this._addAttributeBinding(node, \"className\", (value) => classNames(obj, value));\n  }\n  _addTextBinding(fn) {\n    const initialValue = fn(this._value) + \"\";\n    const node = text(initialValue);\n    let prevValue = initialValue;\n    const binding = () => {\n      const newValue = fn(this._value) + \"\";\n      if (prevValue !== newValue) {\n        prevValue = newValue;\n        node.textContent = newValue;\n      }\n    };\n    this._addBinding(binding);\n    return node;\n  }\n  _isEventHandler(key, value) {\n    return key.startsWith(\"on\") && key.length > 2 && typeof value === \"function\";\n  }\n  _setNodeAttributes(node, attributes) {\n    for (let [key, value] of Object.entries(attributes)) {\n      if (typeof value === \"object\") {\n        if (key !== \"className\" || value === null) {\n          continue;\n        }\n        if (objHasFns(value)) {\n          this._addClassNamesBinding(node, value);\n        } else {\n          setAttribute(node, key, classNames(value, this._value));\n        }\n      } else if (this._isEventHandler(key, value)) {\n        const eventName = key.substr(2, 1).toLowerCase() + key.substr(3);\n        const handler = value;\n        this._templateView._addEventListener(node, eventName, handler);\n      } else if (typeof value === \"function\") {\n        this._addAttributeBinding(node, key, value);\n      } else {\n        setAttribute(node, key, value);\n      }\n    }\n  }\n  _setNodeChildren(node, children) {\n    if (!Array.isArray(children)) {\n      children = [children];\n    }\n    for (let child of children) {\n      if (typeof child === \"function\") {\n        child = this._addTextBinding(child);\n      } else if (typeof child === \"string\") {\n        child = text(child);\n      }\n      node.appendChild(child);\n    }\n  }\n  _addReplaceNodeBinding(fn, renderNode) {\n    let prevValue = fn(this._value);\n    let node = renderNode(null);\n    const binding = () => {\n      const newValue = fn(this._value);\n      if (prevValue !== newValue) {\n        prevValue = newValue;\n        const newNode = renderNode(node);\n        if (node.parentNode) {\n          node.parentNode.replaceChild(newNode, node);\n        }\n        node = newNode;\n      }\n    };\n    this._addBinding(binding);\n    return node;\n  }\n  el(name, attributes, children) {\n    return this.elNS(HTML_NS, name, attributes, children);\n  }\n  elNS(ns, name, attributesOrChildren, children) {\n    let attributes;\n    if (attributesOrChildren) {\n      if (isChildren(attributesOrChildren)) {\n        children = attributesOrChildren;\n      } else {\n        attributes = attributesOrChildren;\n      }\n    }\n    const node = document.createElementNS(ns, name);\n    if (attributes) {\n      this._setNodeAttributes(node, attributes);\n    }\n    if (children) {\n      this._setNodeChildren(node, children);\n    }\n    return node;\n  }\n  view(view, mountOptions) {\n    this._templateView.addSubView(view);\n    return mountView(view, mountOptions);\n  }\n  mapView(mapFn, viewCreator) {\n    return this._addReplaceNodeBinding(mapFn, (prevNode) => {\n      if (prevNode && prevNode.nodeType !== Node.COMMENT_NODE) {\n        const subViews = this._templateView._subViews;\n        if (subViews) {\n          const viewIdx = subViews.findIndex((v) => v.root() === prevNode);\n          if (viewIdx !== -1) {\n            const [view2] = subViews.splice(viewIdx, 1);\n            view2.unmount();\n          }\n        }\n      }\n      const view = viewCreator(mapFn(this._value));\n      if (view) {\n        return this.view(view);\n      } else {\n        return document.createComment(\"node binding placeholder\");\n      }\n    });\n  }\n  map(mapFn, renderFn) {\n    return this.mapView(mapFn, (mappedValue) => {\n      return new InlineTemplateView(this._value, (t, vm) => {\n        const rootNode = renderFn(mappedValue, t, vm);\n        if (!rootNode) {\n          return document.createComment(\"map placeholder\");\n        }\n        return rootNode;\n      });\n    });\n  }\n  ifView(predicate, viewCreator) {\n    return this.mapView((value) => !!predicate(value), (enabled) => enabled ? viewCreator(this._value) : null);\n  }\n  if(predicate, renderFn) {\n    return this.ifView(predicate, (vm) => new InlineTemplateView(vm, renderFn));\n  }\n  mapSideEffect(mapFn, sideEffect) {\n    let prevValue = mapFn(this._value);\n    const binding = () => {\n      const newValue = mapFn(this._value);\n      if (prevValue !== newValue) {\n        sideEffect(newValue, prevValue, this._value);\n        prevValue = newValue;\n      }\n    };\n    this._addBinding(binding);\n    sideEffect(prevValue, void 0, this._value);\n  }\n}\nfor (const [ns, tags] of Object.entries(TAG_NAMES)) {\n  for (const tag2 of tags) {\n    TemplateBuilder.prototype[tag2] = function(attributes, children) {\n      return this.elNS(ns, tag2, attributes, children);\n    };\n  }\n}\nclass InlineTemplateView extends TemplateView {\n  constructor(value, render) {\n    super(value);\n    this._render = render;\n  }\n  render(t, value) {\n    return this._render(t, value);\n  }\n}\nfunction renderStaticAvatar(vm, size, extraClasses = void 0) {\n  const hasAvatar = !!vm.avatarUrl(size);\n  let avatarClasses = classNames({\n    avatar: true,\n    [`size-${size}`]: true,\n    [`usercolor${vm.avatarColorNumber}`]: !hasAvatar\n  });\n  if (extraClasses) {\n    avatarClasses += ` ${extraClasses}`;\n  }\n  const avatarContent = hasAvatar ? renderImg(vm, size) : text(vm.avatarLetter);\n  const avatar = tag.div({\n    className: avatarClasses,\n    title: vm.avatarTitle,\n    \"data-testid\": \"avatar\"\n  }, [avatarContent]);\n  if (hasAvatar) {\n    setAttribute(avatar, \"data-avatar-letter\", vm.avatarLetter);\n    setAttribute(avatar, \"data-avatar-color\", vm.avatarColorNumber);\n  }\n  return avatar;\n}\nfunction renderImg(vm, size) {\n  const sizeStr = size.toString();\n  return tag.img({ src: vm.avatarUrl(size), width: sizeStr, height: sizeStr, title: vm.avatarTitle });\n}\nfunction isAvatarEvent(e) {\n  const element = e.target;\n  const parent = element.parentElement;\n  return element.tagName === \"IMG\" && parent.classList.contains(\"avatar\");\n}\nfunction handleAvatarError(e) {\n  if (!isAvatarEvent(e)) {\n    return;\n  }\n  const parent = e.target.parentElement;\n  const avatarColorNumber = parent.getAttribute(\"data-avatar-color\");\n  parent.classList.add(`usercolor${avatarColorNumber}`);\n  const avatarLetter = parent.getAttribute(\"data-avatar-letter\");\n  parent.textContent = avatarLetter;\n}\nclass AvatarView extends BaseUpdateView {\n  constructor(value, size) {\n    super(value);\n    this._root = null;\n    this._avatarUrl = null;\n    this._avatarTitle = null;\n    this._avatarLetter = null;\n    this._size = size;\n  }\n  _avatarUrlChanged() {\n    if (this.value.avatarUrl(this._size) !== this._avatarUrl) {\n      this._avatarUrl = this.value.avatarUrl(this._size);\n      return true;\n    }\n    return false;\n  }\n  _avatarTitleChanged() {\n    if (this.value.avatarTitle !== this._avatarTitle) {\n      this._avatarTitle = this.value.avatarTitle;\n      return true;\n    }\n    return false;\n  }\n  _avatarLetterChanged() {\n    if (this.value.avatarLetter !== this._avatarLetter) {\n      this._avatarLetter = this.value.avatarLetter;\n      return true;\n    }\n    return false;\n  }\n  mount(options) {\n    this._avatarUrlChanged();\n    this._avatarLetterChanged();\n    this._avatarTitleChanged();\n    this._root = renderStaticAvatar(this.value, this._size);\n    this.subscribeOnMount(options);\n    return this._root;\n  }\n  root() {\n    return this._root;\n  }\n  update(vm) {\n    if (this._avatarUrlChanged()) {\n      const bgColorClass = `usercolor${vm.avatarColorNumber}`;\n      if (vm.avatarUrl(this._size)) {\n        this._root.replaceChild(renderImg(vm, this._size), this._root.firstChild);\n        this._root.classList.remove(bgColorClass);\n      } else {\n        this._root.textContent = vm.avatarLetter;\n        this._root.classList.add(bgColorClass);\n      }\n    }\n    const hasAvatar = !!vm.avatarUrl(this._size);\n    if (this._avatarTitleChanged() && hasAvatar) {\n      const element = this._root.firstChild;\n      if (element.tagName === \"IMG\") {\n        element.setAttribute(\"title\", vm.avatarTitle);\n      }\n    }\n    if (this._avatarLetterChanged() && !hasAvatar) {\n      this._root.textContent = vm.avatarLetter;\n    }\n  }\n}\nlet container;\nfunction spinner(t, extraClasses = void 0) {\n  if (container === void 0) {\n    container = document.querySelector(\".hydrogen\");\n  }\n  const classes = Object.assign({ \"spinner\": true }, extraClasses);\n  if (container == null ? void 0 : container.classList.contains(\"legacy\")) {\n    return t.div({ className: classes }, [\n      t.div(),\n      t.div(),\n      t.div(),\n      t.div()\n    ]);\n  } else {\n    return t.svg({ className: classes, viewBox: \"0 0 100 100\" }, t.circle({ cx: \"50%\", cy: \"50%\", r: \"45%\", pathLength: \"100\" }));\n  }\n}\nclass RoomTileView extends TemplateView {\n  render(t, vm) {\n    const classes = {\n      \"active\": (vm2) => vm2.isOpen,\n      \"hidden\": (vm2) => vm2.hidden\n    };\n    return t.li({ \"className\": classes }, [\n      t.a({ href: vm.url }, [\n        t.view(new AvatarView(vm, 32), { parentProvidesUpdates: true }),\n        t.div({ className: \"description\" }, [\n          t.div({ className: { \"name\": true, unread: (vm2) => vm2.isUnread } }, (vm2) => vm2.name),\n          t.map((vm2) => vm2.busy, (busy) => {\n            if (busy) {\n              return spinner(t);\n            } else {\n              return t.div({\n                className: {\n                  badge: true,\n                  highlighted: (vm2) => vm2.isHighlighted,\n                  hidden: (vm2) => !vm2.badgeCount\n                }\n              }, (vm2) => vm2.badgeCount);\n            }\n          })\n        ])\n      ])\n    ]);\n  }\n  update(value, props) {\n    super.update(value);\n    this.updateSubViews(value, props);\n  }\n}\nclass Menu extends TemplateView {\n  static option(label, callback) {\n    return new MenuOption(label, callback);\n  }\n  constructor(options) {\n    super();\n    this._options = options;\n  }\n  render(t) {\n    return t.ul({ className: \"menu\", role: \"menu\" }, this._options.map((o) => o.toDOM(t)));\n  }\n}\nclass MenuOption {\n  constructor(label, callback) {\n    this.label = label;\n    this.callback = callback;\n    this.icon = null;\n    this.destructive = false;\n  }\n  setIcon(className) {\n    this.icon = className;\n    return this;\n  }\n  setDestructive() {\n    this.destructive = true;\n    return this;\n  }\n  toDOM(t) {\n    const className = {\n      destructive: this.destructive\n    };\n    if (this.icon) {\n      className.icon = true;\n      className[this.icon] = true;\n    }\n    return t.li({\n      className\n    }, t.button({ className: \"menu-item\", onClick: this.callback }, this.label));\n  }\n}\nclass Popup {\n  constructor(view, closeCallback = null) {\n    this._view = view;\n    this._target = null;\n    this._arrangement = null;\n    this._scroller = null;\n    this._fakeRoot = null;\n    this._trackingTemplateView = null;\n    this._closeCallback = closeCallback;\n  }\n  _getPopupContainer() {\n    const appContainer = this._target.closest(\".hydrogen\");\n    let popupContainer = appContainer.querySelector(\".popupContainer\");\n    if (!popupContainer) {\n      popupContainer = tag.div({ className: \"popupContainer\" });\n      appContainer.appendChild(popupContainer);\n    }\n    return popupContainer;\n  }\n  trackInTemplateView(templateView) {\n    this._trackingTemplateView = templateView;\n    this._trackingTemplateView.addSubView(this);\n  }\n  showRelativeTo(target, verticalPadding = 0) {\n    this._target = target;\n    this._verticalPadding = verticalPadding;\n    this._scroller = findScrollParent(this._target);\n    this._view.mount();\n    this._getPopupContainer().appendChild(this._popup);\n    this._position();\n    if (this._scroller) {\n      document.body.addEventListener(\"scroll\", this, true);\n    }\n    setTimeout(() => {\n      document.body.addEventListener(\"click\", this, false);\n    }, 10);\n  }\n  get isOpen() {\n    return !!this._view;\n  }\n  close() {\n    if (this._view) {\n      this._view.unmount();\n      this._trackingTemplateView.removeSubView(this);\n      if (this._scroller) {\n        document.body.removeEventListener(\"scroll\", this, true);\n      }\n      document.body.removeEventListener(\"click\", this, false);\n      this._popup.remove();\n      this._view = null;\n      if (this._closeCallback) {\n        this._closeCallback();\n      }\n    }\n  }\n  get _popup() {\n    return this._view.root();\n  }\n  handleEvent(evt) {\n    if (evt.type === \"scroll\") {\n      if (!this._position()) {\n        this.close();\n      }\n    } else if (evt.type === \"click\") {\n      this._onClick(evt);\n    }\n  }\n  _onClick() {\n    this.close();\n  }\n  _position() {\n    const targetPosition = this._target.getBoundingClientRect();\n    const popupWidth = this._popup.clientWidth;\n    const popupHeight = this._popup.clientHeight;\n    const viewport = (this._scroller ? this._scroller : document.documentElement).getBoundingClientRect();\n    if (targetPosition.top > viewport.bottom || targetPosition.left > viewport.right || targetPosition.bottom < viewport.top || targetPosition.right < viewport.left) {\n      return false;\n    }\n    if (viewport.bottom >= targetPosition.bottom + popupHeight) {\n      this._popup.style.top = `${targetPosition.bottom + this._verticalPadding}px`;\n    } else if (viewport.top <= targetPosition.top - popupHeight) {\n      this._popup.style.top = `${targetPosition.top - popupHeight - this._verticalPadding}px`;\n    } else {\n      return false;\n    }\n    if (viewport.right >= targetPosition.right + popupWidth) {\n      this._popup.style.left = `${targetPosition.left}px`;\n    } else if (viewport.left <= targetPosition.left - popupWidth) {\n      this._popup.style.left = `${targetPosition.right - popupWidth}px`;\n    } else {\n      return false;\n    }\n    return true;\n  }\n  root() {\n    return this._fakeRoot;\n  }\n  mount() {\n    this._fakeRoot = document.createComment(\"popup\");\n    return this._fakeRoot;\n  }\n  unmount() {\n    this.close();\n  }\n  update() {\n  }\n}\nfunction findScrollParent(el2) {\n  let parent = el2;\n  do {\n    parent = parent.parentElement;\n    if (parent.scrollHeight > parent.clientHeight) {\n      const style = window.getComputedStyle(parent);\n      const overflowY = style.getPropertyValue(\"overflow-y\");\n      if (overflowY === \"auto\" || overflowY === \"scroll\") {\n        return parent;\n      }\n    }\n  } while (parent !== document.body);\n}\nclass FilterField extends TemplateView {\n  render(t, options) {\n    const clear = () => {\n      filterInput.value = \"\";\n      filterInput.blur();\n      clearButton.blur();\n      options.clear();\n    };\n    const filterInput = t.input({\n      type: \"text\",\n      placeholder: options == null ? void 0 : options.label,\n      \"aria-label\": options == null ? void 0 : options.label,\n      autocomplete: options == null ? void 0 : options.autocomplete,\n      enterkeyhint: \"search\",\n      name: options == null ? void 0 : options.name,\n      onInput: (event2) => options.set(event2.target.value),\n      onKeydown: (event2) => {\n        if (event2.key === \"Escape\" || event2.key === \"Esc\") {\n          clear();\n        }\n      },\n      onFocus: () => filterInput.select()\n    });\n    const clearButton = t.button({\n      onClick: clear,\n      title: options.i18n`Clear`,\n      \"aria-label\": options.i18n`Clear`\n    });\n    return t.div({ className: \"FilterField\" }, [filterInput, clearButton]);\n  }\n}\nclass LeftPanelView extends TemplateView {\n  constructor(vm) {\n    super(vm);\n    this._createMenuPopup = null;\n  }\n  render(t, vm) {\n    const gridButtonLabel = (vm2) => {\n      return vm2.gridEnabled ? vm2.i18n`Show single room` : vm2.i18n`Enable grid layout`;\n    };\n    const roomList = t.view(new ListView({\n      className: \"RoomList\",\n      list: vm.tileViewModels\n    }, (tileVM) => new RoomTileView(tileVM)));\n    const utilitiesRow = t.div({ className: \"utilities\" }, [\n      t.a({ className: \"button-utility close-session\", href: vm.closeUrl, \"aria-label\": vm.i18n`Back to account list`, title: vm.i18n`Back to account list` }),\n      t.view(new FilterField({\n        i18n: vm.i18n,\n        label: vm.i18n`Filter rooms…`,\n        name: \"room-filter\",\n        autocomplete: true,\n        set: (query) => {\n          if (vm.setFilter(query)) {\n            roomList.scrollTop = 0;\n          }\n        },\n        clear: () => vm.clearFilter()\n      })),\n      t.button({\n        onClick: () => vm.toggleGrid(),\n        className: {\n          \"button-utility\": true,\n          grid: true,\n          on: (vm2) => vm2.gridEnabled\n        },\n        title: gridButtonLabel,\n        \"aria-label\": gridButtonLabel\n      }),\n      t.a({ className: \"button-utility settings\", href: vm.settingsUrl, \"aria-label\": vm.i18n`Settings`, title: vm.i18n`Settings` }),\n      t.button({\n        className: \"button-utility create\",\n        \"aria-label\": vm.i18n`Create room`,\n        onClick: (evt) => this._toggleCreateMenu(evt)\n      })\n    ]);\n    return t.div({ className: \"LeftPanel\" }, [\n      utilitiesRow,\n      roomList\n    ]);\n  }\n  _toggleCreateMenu(evt) {\n    if (this._createMenuPopup && this._createMenuPopup.isOpen) {\n      this._createMenuPopup.close();\n    } else {\n      const vm = this.value;\n      const options = [];\n      options.push(Menu.option(vm.i18n`Create Room`, () => vm.showCreateRoomView()));\n      options.push(Menu.option(vm.i18n`Join Room`, () => vm.showJoinRoomView()));\n      this._createMenuPopup = new Popup(new Menu(options));\n      this._createMenuPopup.trackInTemplateView(this);\n      this._createMenuPopup.showRelativeTo(evt.target, 10);\n    }\n  }\n}\nfunction bottom(node) {\n  return node.offsetTop + node.clientHeight;\n}\nfunction findFirstNodeIndexAtOrBelow(tiles, top, startIndex = tiles.children.length - 1) {\n  for (var i = startIndex; i >= 0; i--) {\n    const node = tiles.children[i];\n    if (node.offsetTop < top) {\n      return i;\n    }\n  }\n  return 0;\n}\nclass TimelineView extends TemplateView {\n  constructor(vm, viewClassForTile2) {\n    super(vm);\n    this.viewClassForTile = viewClassForTile2;\n    this.anchoredBottom = 0;\n    this.stickToBottom = true;\n  }\n  render(t, vm) {\n    requestAnimationFrame(() => {\n      this.restoreScrollPosition();\n    });\n    this.tilesView = new TilesListView(vm.tiles, () => this.restoreScrollPosition(), this.viewClassForTile);\n    const root = t.div({ className: \"Timeline\" }, [\n      t.div({\n        className: \"Timeline_scroller bottom-aligned-scroll\",\n        onScroll: () => this.onScroll()\n      }, t.view(this.tilesView)),\n      t.button({\n        className: {\n          \"Timeline_jumpDown\": true,\n          hidden: (vm2) => !vm2.showJumpDown\n        },\n        title: \"Jump down\",\n        onClick: () => this.jumpDown()\n      })\n    ]);\n    if (typeof ResizeObserver === \"function\") {\n      this.resizeObserver = new ResizeObserver(() => {\n        this.restoreScrollPosition();\n      });\n      this.resizeObserver.observe(root);\n    }\n    return root;\n  }\n  get scrollNode() {\n    return this.root().firstElementChild;\n  }\n  get tilesNode() {\n    return this.tilesView.root();\n  }\n  jumpDown() {\n    const { scrollNode } = this;\n    this.stickToBottom = true;\n    scrollNode.scrollTop = scrollNode.scrollHeight;\n  }\n  unmount() {\n    super.unmount();\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.root());\n      this.resizeObserver = void 0;\n    }\n  }\n  restoreScrollPosition() {\n    const { scrollNode, tilesNode } = this;\n    const missingTilesHeight = scrollNode.clientHeight - tilesNode.clientHeight;\n    if (missingTilesHeight > 0) {\n      tilesNode.style.setProperty(\"margin-top\", `${missingTilesHeight}px`);\n      const len = this.value.tiles.length;\n      this.updateVisibleRange(0, len - 1);\n    } else {\n      tilesNode.style.removeProperty(\"margin-top\");\n      if (this.stickToBottom) {\n        scrollNode.scrollTop = scrollNode.scrollHeight;\n      } else if (this.anchoredNode) {\n        const newAnchoredBottom = bottom(this.anchoredNode);\n        if (newAnchoredBottom !== this.anchoredBottom) {\n          const bottomDiff = newAnchoredBottom - this.anchoredBottom;\n          if (typeof scrollNode.scrollBy === \"function\") {\n            scrollNode.scrollBy(0, bottomDiff);\n          } else {\n            scrollNode.scrollTop = scrollNode.scrollTop + bottomDiff;\n          }\n          this.anchoredBottom = newAnchoredBottom;\n        }\n      }\n    }\n  }\n  onScroll() {\n    const { scrollNode, tilesNode } = this;\n    const { scrollHeight, scrollTop, clientHeight } = scrollNode;\n    let bottomNodeIndex;\n    this.stickToBottom = Math.abs(scrollHeight - (scrollTop + clientHeight)) < 1;\n    if (this.stickToBottom) {\n      const len = this.value.tiles.length;\n      bottomNodeIndex = len - 1;\n    } else {\n      const viewportBottom = scrollTop + clientHeight;\n      const anchoredNodeIndex = findFirstNodeIndexAtOrBelow(tilesNode, viewportBottom);\n      this.anchoredNode = tilesNode.childNodes[anchoredNodeIndex];\n      this.anchoredBottom = bottom(this.anchoredNode);\n      bottomNodeIndex = anchoredNodeIndex;\n    }\n    let topNodeIndex = findFirstNodeIndexAtOrBelow(tilesNode, scrollTop, bottomNodeIndex);\n    this.updateVisibleRange(topNodeIndex, bottomNodeIndex);\n  }\n  updateVisibleRange(startIndex, endIndex) {\n    const firstVisibleChild = this.tilesView.getChildInstanceByIndex(startIndex);\n    const lastVisibleChild = this.tilesView.getChildInstanceByIndex(endIndex);\n    this.value.setVisibleTileRange(firstVisibleChild == null ? void 0 : firstVisibleChild.value, lastVisibleChild == null ? void 0 : lastVisibleChild.value);\n  }\n}\nclass TilesListView extends ListView {\n  constructor(tiles, onChanged, viewClassForTile2) {\n    super({\n      list: tiles,\n      onItemClick: (tileView, evt) => tileView.onClick(evt)\n    }, (tile) => {\n      const TileView = viewClassForTile2(tile);\n      return new TileView(tile, viewClassForTile2);\n    });\n    this.viewClassForTile = viewClassForTile2;\n    this.onChanged = onChanged;\n  }\n  onReset() {\n    super.onReset();\n    this.onChanged();\n  }\n  onUpdate(index, value, param) {\n    if (param === \"shape\") {\n      const ExpectedClass = this.viewClassForTile(value);\n      const child = this.getChildInstanceByIndex(index);\n      if (!ExpectedClass || !(child instanceof ExpectedClass)) {\n        super.recreateItem(index, value);\n        return;\n      }\n    }\n    super.onUpdate(index, value, param);\n    this.onChanged();\n  }\n  onAdd(idx, value) {\n    super.onAdd(idx, value);\n    this.onChanged();\n  }\n  onRemove(idx, value) {\n    super.onRemove(idx, value);\n    this.onChanged();\n  }\n  onMove(fromIdx, toIdx, value) {\n    super.onMove(fromIdx, toIdx, value);\n    this.onChanged();\n  }\n}\nclass TimelineLoadingView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"TimelineLoadingView\" }, [\n      spinner(t),\n      t.div(vm.isEncrypted ? vm.i18n`Loading encrypted messages…` : vm.i18n`Loading messages…`)\n    ]);\n  }\n}\nclass MessageComposer extends TemplateView {\n  constructor(viewModel, viewClassForTile2) {\n    super(viewModel);\n    this._viewClassForTile = viewClassForTile2;\n    this._input = null;\n    this._attachmentPopup = null;\n    this._focusInput = null;\n    this._rafResizeHandle = void 0;\n  }\n  render(t, vm) {\n    this._input = t.textarea({\n      onKeydown: (e) => this._onKeyDown(e),\n      onInput: () => {\n        vm.setInput(this._input.value);\n        if (this._input.value) {\n          this._adjustHeight();\n        } else {\n          this._clearHeight();\n        }\n      },\n      placeholder: (vm2) => vm2.isEncrypted ? \"Send an encrypted message\\u2026\" : \"Send a message\\u2026\",\n      rows: \"1\"\n    });\n    this._focusInput = () => this._input.focus();\n    this.value.on(\"focus\", this._focusInput);\n    const replyPreview = t.map((vm2) => vm2.replyViewModel, (rvm, t2) => {\n      const TileView = rvm && this._viewClassForTile(rvm);\n      if (!TileView) {\n        return null;\n      }\n      return t2.div({\n        className: \"MessageComposer_replyPreview\"\n      }, [\n        t2.span({ className: \"replying\" }, \"Replying\"),\n        t2.button({\n          className: \"cancel\",\n          onClick: () => this._clearReplyingTo()\n        }, \"Close\"),\n        t2.view(new TileView(rvm, this._viewClassForTile, { interactive: false }, \"div\"))\n      ]);\n    });\n    const input = t.div({ className: \"MessageComposer_input\" }, [\n      this._input,\n      t.button({\n        className: \"sendFile\",\n        title: vm.i18n`Pick attachment`,\n        onClick: (evt) => this._toggleAttachmentMenu(evt)\n      }, vm.i18n`Send file`),\n      t.button({\n        className: \"send\",\n        title: vm.i18n`Send`,\n        onClick: () => this._trySend()\n      }, vm.i18n`Send`)\n    ]);\n    return t.div({ className: {\n      MessageComposer: true,\n      MessageComposer_canSend: (vm2) => vm2.canSend\n    } }, [replyPreview, input]);\n  }\n  unmount() {\n    if (this._focusInput) {\n      this.value.off(\"focus\", this._focusInput);\n    }\n    super.unmount();\n  }\n  _clearReplyingTo() {\n    this.value.clearReplyingTo();\n  }\n  async _trySend() {\n    this._input.focus();\n    const { value } = this._input;\n    const restoreValue = () => {\n      this._input.value = value;\n      this._adjustHeight();\n    };\n    this._input.value = \"\";\n    this._clearHeight();\n    try {\n      if (!await this.value.sendMessage(value)) {\n        restoreValue();\n      }\n    } catch (err) {\n      restoreValue();\n      console.error(err);\n    }\n  }\n  _onKeyDown(event2) {\n    if (event2.key === \"Enter\" && !event2.shiftKey) {\n      event2.preventDefault();\n      this._trySend();\n    }\n  }\n  _toggleAttachmentMenu(evt) {\n    if (this._attachmentPopup && this._attachmentPopup.isOpen) {\n      this._attachmentPopup.close();\n    } else {\n      const vm = this.value;\n      this._attachmentPopup = new Popup(new Menu([\n        Menu.option(vm.i18n`Send video`, () => vm.sendVideo()).setIcon(\"video\"),\n        Menu.option(vm.i18n`Send picture`, () => vm.sendPicture()).setIcon(\"picture\"),\n        Menu.option(vm.i18n`Send file`, () => vm.sendFile()).setIcon(\"file\")\n      ]));\n      this._attachmentPopup.trackInTemplateView(this);\n      this._attachmentPopup.showRelativeTo(evt.target, 12);\n    }\n  }\n  _adjustHeight() {\n    if (this._rafResizeHandle) {\n      return;\n    }\n    this._rafResizeHandle = window.requestAnimationFrame(() => {\n      const scrollHeight = this._input.scrollHeight;\n      this._input.style.height = `${scrollHeight}px`;\n      this._rafResizeHandle = void 0;\n    });\n  }\n  _clearHeight() {\n    this._input.style.removeProperty(\"height\");\n  }\n}\nclass DisabledComposerView extends TemplateView {\n  render(t) {\n    return t.div({ className: \"DisabledComposerView\" }, t.h3((vm) => vm.description));\n  }\n}\nclass ErrorView$1 extends TemplateView {\n  constructor(vm, options = { inline: false }) {\n    super(vm);\n    this.options = options;\n  }\n  render(t, vm) {\n    const submitLogsButton = t.button({\n      className: \"ErrorView_submit\",\n      onClick: disableTargetCallback$1(async (evt) => {\n        evt.stopPropagation();\n        if (await vm.submitLogs()) {\n          alert(\"Logs submitted!\");\n        } else {\n          alert(\"Could not submit logs\");\n        }\n      })\n    }, \"Submit logs\");\n    const closeButton = t.button({\n      className: \"ErrorView_close\",\n      onClick: (evt) => {\n        evt.stopPropagation();\n        vm.close();\n      },\n      title: \"Dismiss error\"\n    });\n    return t.div({\n      className: {\n        \"ErrorView\": true,\n        \"ErrorView_inline\": this.options.inline,\n        \"ErrorView_block\": !this.options.inline\n      }\n    }, [\n      t.p({ className: \"ErrorView_message\" }, vm.message),\n      submitLogsButton,\n      closeButton\n    ]);\n  }\n}\nclass CallView extends TemplateView {\n  render(t, vm) {\n    const members = t.view(new ListView({\n      className: \"CallView_members\",\n      list: vm.memberViewModels\n    }, (vm2) => new StreamView(vm2)));\n    this.bindMembersCssClasses(t, members);\n    return t.div({ class: \"CallView\" }, [\n      members,\n      t.div({ class: \"CallView_buttons\" }, [\n        t.button({ className: {\n          \"CallView_mutedMicrophone\": (vm2) => vm2.isMicrophoneMuted,\n          \"CallView_unmutedMicrophone\": (vm2) => !vm2.isMicrophoneMuted\n        }, onClick: disableTargetCallback(() => vm.toggleMicrophone()) }),\n        t.button({ className: {\n          \"CallView_mutedCamera\": (vm2) => vm2.isCameraMuted,\n          \"CallView_unmutedCamera\": (vm2) => !vm2.isCameraMuted\n        }, onClick: disableTargetCallback(() => vm.toggleCamera()) }),\n        t.button({ className: \"CallView_hangup\", onClick: disableTargetCallback(() => vm.hangup()) })\n      ]),\n      t.if((vm2) => !!vm2.errorViewModel, (t2) => {\n        return t2.div({ className: \"CallView_error\" }, t2.view(new ErrorView$1(vm.errorViewModel)));\n      })\n    ]);\n  }\n  bindMembersCssClasses(t, members) {\n    t.mapSideEffect((vm) => vm.memberCount, (count) => {\n      members.classList.forEach((c, _, list) => {\n        if (c.startsWith(\"size\")) {\n          list.remove(c);\n        }\n      });\n      members.classList.add(`size${count}`);\n    });\n    if (typeof ResizeObserver === \"function\") {\n      const set = (c, flag) => {\n        if (flag) {\n          members.classList.add(c);\n        } else {\n          members.classList.remove(c);\n        }\n      };\n      this.resizeObserver = new ResizeObserver(() => {\n        const ar = members.clientWidth / members.clientHeight;\n        const isTall = ar < 0.5;\n        const isSquare = !isTall && ar < 1.8;\n        const isWide = !isTall && !isSquare;\n        set(\"tall\", isTall);\n        set(\"square\", isSquare);\n        set(\"wide\", isWide);\n      });\n      this.resizeObserver.observe(members);\n    }\n  }\n  unmount() {\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.root().querySelector(\".CallView_members\"));\n      this.resizeObserver = void 0;\n    }\n    super.unmount();\n  }\n}\nclass StreamView extends TemplateView {\n  render(t, vm) {\n    const video = t.video({\n      autoplay: true,\n      disablePictureInPicture: true,\n      className: {\n        hidden: (vm2) => vm2.isCameraMuted\n      }\n    });\n    t.mapSideEffect((vm2) => vm2.stream, (stream) => {\n      video.srcObject = stream;\n    });\n    return t.div({ className: \"StreamView\" }, [\n      video,\n      t.div({ className: {\n        StreamView_avatar: true,\n        hidden: (vm2) => !vm2.isCameraMuted\n      } }, t.view(new AvatarView(vm, 96), { parentProvidesUpdates: true })),\n      t.div({\n        className: {\n          StreamView_muteStatus: true,\n          hidden: (vm2) => !vm2.isCameraMuted && !vm2.isMicrophoneMuted,\n          microphoneMuted: (vm2) => vm2.isMicrophoneMuted && !vm2.isCameraMuted,\n          cameraMuted: (vm2) => vm2.isCameraMuted\n        }\n      }),\n      t.if((vm2) => !!vm2.errorViewModel, (t2) => {\n        return t2.div({ className: \"StreamView_error\" }, t2.view(new ErrorView$1(vm.errorViewModel)));\n      })\n    ]);\n  }\n  update(value, props) {\n    super.update(value);\n    this.updateSubViews(value, props);\n  }\n}\nfunction disableTargetCallback(callback) {\n  return async (evt) => {\n    var _a, _b;\n    (_a = evt.target) == null ? void 0 : _a.setAttribute(\"disabled\", \"disabled\");\n    await callback(evt);\n    (_b = evt.target) == null ? void 0 : _b.removeAttribute(\"disabled\");\n  };\n}\nclass RoomView extends TemplateView {\n  constructor(vm, viewClassForTile2) {\n    super(vm);\n    this._viewClassForTile = viewClassForTile2;\n    this._optionsPopup = null;\n  }\n  render(t, vm) {\n    return t.main({ className: \"RoomView middle\" }, [\n      t.div({ className: \"RoomHeader middle-header\" }, [\n        t.a({ className: \"button-utility close-middle\", href: vm.closeUrl, title: vm.i18n`Close room` }),\n        t.view(new AvatarView(vm, 32)),\n        t.div({ className: \"room-description\" }, [\n          t.h2((vm2) => vm2.name)\n        ]),\n        t.button({\n          className: \"button-utility room-options\",\n          \"aria-label\": vm.i18n`Room options`,\n          onClick: (evt) => this._toggleOptionsMenu(evt)\n        })\n      ]),\n      t.div({ className: \"RoomView_body\" }, [\n        t.if((vm2) => vm2.errorViewModel, (t2) => t2.div({ className: \"RoomView_error\" }, t2.view(new ErrorView$1(vm.errorViewModel)))),\n        t.mapView((vm2) => vm2.callViewModel, (callViewModel) => callViewModel ? new CallView(callViewModel) : null),\n        t.mapView((vm2) => vm2.timelineViewModel, (timelineViewModel) => {\n          return timelineViewModel ? new TimelineView(timelineViewModel, this._viewClassForTile) : new TimelineLoadingView(vm);\n        }),\n        t.mapView((vm2) => vm2.composerViewModel, (composerViewModel) => {\n          switch (composerViewModel == null ? void 0 : composerViewModel.kind) {\n            case \"composer\":\n              return new MessageComposer(vm.composerViewModel, this._viewClassForTile);\n            case \"disabled\":\n              return new DisabledComposerView(vm.composerViewModel);\n          }\n        })\n      ])\n    ]);\n  }\n  _toggleOptionsMenu(evt) {\n    if (this._optionsPopup && this._optionsPopup.isOpen) {\n      this._optionsPopup.close();\n    } else {\n      const vm = this.value;\n      const options = [];\n      options.push(Menu.option(vm.i18n`Room details`, () => vm.openDetailsPanel()));\n      if (vm.features.calls) {\n        options.push(Menu.option(vm.i18n`Start call`, () => vm.startCall()));\n      }\n      if (vm.canLeave) {\n        options.push(Menu.option(vm.i18n`Leave room`, () => this._confirmToLeaveRoom()).setDestructive());\n      }\n      if (vm.canForget) {\n        options.push(Menu.option(vm.i18n`Forget room`, () => vm.forgetRoom()).setDestructive());\n      }\n      if (vm.canRejoin) {\n        options.push(Menu.option(vm.i18n`Rejoin room`, () => vm.rejoinRoom()));\n      }\n      if (!options.length) {\n        return;\n      }\n      this._optionsPopup = new Popup(new Menu(options));\n      this._optionsPopup.trackInTemplateView(this);\n      this._optionsPopup.showRelativeTo(evt.target, 10);\n    }\n  }\n  _confirmToLeaveRoom() {\n    if (confirm(this.value.i18n`Are you sure you want to leave \"${this.value.name}\"?`)) {\n      this.value.leaveRoom();\n    }\n  }\n}\nclass UnknownRoomView extends TemplateView {\n  render(t, vm) {\n    return t.main({ className: \"UnknownRoomView middle\" }, t.div([\n      t.h2([\n        vm.i18n`You are currently not in ${vm.roomIdOrAlias}.`,\n        t.br(),\n        vm.i18n`Want to join it?`\n      ]),\n      t.button({\n        className: \"button-action primary\",\n        onClick: () => vm.join(),\n        disabled: (vm2) => vm2.busy\n      }, vm.i18n`Join room`),\n      t.if((vm2) => vm2.error, (t2) => t2.p({ className: \"error\" }, vm.error))\n    ]));\n  }\n}\nclass StaticView {\n  constructor(value, render = void 0) {\n    if (typeof value === \"function\" && !render) {\n      render = value;\n      value = null;\n    }\n    this._root = render ? render(tag, value) : this.render(tag, value);\n  }\n  mount() {\n    return this._root;\n  }\n  root() {\n    return this._root;\n  }\n  unmount() {\n  }\n  update() {\n  }\n}\nclass LoadingView extends StaticView {\n  constructor(label = \"Loading\") {\n    super(label, (t, label2) => {\n      return t.div({ className: \"LoadingView\" }, [spinner(t), label2]);\n    });\n  }\n}\nclass RoomBeingCreatedView extends TemplateView {\n  render(t, vm) {\n    return t.main({ className: \"RoomView middle\" }, [\n      t.div({ className: \"RoomHeader middle-header\" }, [\n        t.a({ className: \"button-utility close-middle\", href: vm.closeUrl, title: vm.i18n`Close room` }),\n        t.view(new AvatarView(vm, 32)),\n        t.div({ className: \"room-description\" }, [\n          t.h2((vm2) => vm2.name)\n        ])\n      ]),\n      t.div({ className: \"RoomView_body\" }, [\n        t.mapView((vm2) => vm2.error, (error) => {\n          if (error) {\n            return new ErrorView(vm);\n          } else {\n            return new LoadingView(vm.i18n`Setting up the room…`);\n          }\n        })\n      ])\n    ]);\n  }\n}\nclass ErrorView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"RoomBeingCreated_error centered-column\" }, [\n      t.h3(vm.i18n`Could not create the room, something went wrong:`),\n      t.div({ className: \"RoomView_error form-group\" }, vm.error),\n      t.div({ className: \"button-row\" }, t.button({\n        className: \"button-action primary destructive\",\n        onClick: () => vm.cancel()\n      }, vm.i18n`Cancel`))\n    ]);\n  }\n}\nclass InviteView extends TemplateView {\n  render(t, vm) {\n    var _a;\n    let inviteNodes = [];\n    if (vm.isDirectMessage) {\n      inviteNodes.push(renderStaticAvatar(vm, 128, \"InviteView_dmAvatar\"));\n    }\n    let inviterNodes;\n    if (vm.isDirectMessage) {\n      inviterNodes = [t.strong(vm.name), ` (${(_a = vm.inviter) == null ? void 0 : _a.id}) wants to chat with you.`];\n    } else if (vm.inviter) {\n      inviterNodes = [renderStaticAvatar(vm.inviter, 24), t.strong(vm.inviter.name), ` (${vm.inviter.id}) invited you.`];\n    } else {\n      inviterNodes = `You were invited to join.`;\n    }\n    inviteNodes.push(t.p({ className: \"InviteView_inviter\" }, inviterNodes));\n    if (!vm.isDirectMessage) {\n      inviteNodes.push(t.div({ className: \"InviteView_roomProfile\" }, [\n        renderStaticAvatar(vm, 64, \"InviteView_roomAvatar\"),\n        t.h3(vm.name),\n        t.p({ className: \"InviteView_roomDescription\" }, vm.roomDescription)\n      ]));\n    }\n    return t.main({ className: \"InviteView middle\" }, [\n      t.div({ className: \"RoomHeader middle-header\" }, [\n        t.a({ className: \"button-utility close-middle\", href: vm.closeUrl, title: vm.i18n`Close invite` }),\n        renderStaticAvatar(vm, 32),\n        t.div({ className: \"room-description\" }, [\n          t.h2((vm2) => vm2.name)\n        ])\n      ]),\n      t.if((vm2) => vm2.error, (t2) => t2.div({ className: \"RoomView_error\" }, (vm2) => vm2.error)),\n      t.div({ className: \"InviteView_body\" }, [\n        t.div({ className: \"InviteView_invite\" }, [\n          ...inviteNodes,\n          t.div({ className: \"InviteView_buttonRow\" }, t.button({\n            className: \"button-action primary\",\n            disabled: (vm2) => vm2.busy,\n            onClick: () => vm.accept()\n          }, vm.i18n`Accept`)),\n          t.div({ className: \"InviteView_buttonRow\" }, t.button({\n            className: \"button-action primary destructive\",\n            disabled: (vm2) => vm2.busy,\n            onClick: () => vm.reject()\n          }, vm.i18n`Reject`))\n        ])\n      ])\n    ]);\n  }\n}\nclass LightboxView extends TemplateView {\n  render(t, vm) {\n    const close = t.a({ href: vm.closeUrl, title: vm.i18n`Close`, className: \"close\" });\n    const image = t.div({\n      role: \"img\",\n      \"aria-label\": (vm2) => vm2.name,\n      title: (vm2) => vm2.name,\n      className: {\n        picture: true,\n        hidden: (vm2) => !vm2.imageUrl\n      },\n      style: (vm2) => `background-image: url('${vm2.imageUrl}'); max-width: ${vm2.imageWidth}px; max-height: ${vm2.imageHeight}px;`\n    });\n    const loading = t.div({\n      className: {\n        loading: true,\n        hidden: (vm2) => !!vm2.imageUrl\n      }\n    }, [\n      spinner(t),\n      t.div(vm.i18n`Loading image…`)\n    ]);\n    const details = t.div({\n      className: \"details\"\n    }, [t.strong((vm2) => vm2.name), t.br(), \"uploaded by \", t.strong((vm2) => vm2.sender), (vm2) => ` at ${vm2.time} on ${vm2.date}.`]);\n    const dialog = t.div({\n      role: \"dialog\",\n      className: \"lightbox\",\n      onClick: (evt) => this.clickToClose(evt),\n      onKeydown: (evt) => this.closeOnEscKey(evt)\n    }, [image, loading, details, close]);\n    trapFocus(t, dialog);\n    return dialog;\n  }\n  clickToClose(evt) {\n    if (evt.target === this.root()) {\n      this.value.close();\n    }\n  }\n  closeOnEscKey(evt) {\n    if (evt.key === \"Escape\" || evt.key === \"Esc\") {\n      this.value.close();\n    }\n  }\n}\nfunction trapFocus(t, element) {\n  const elements = focusables(element);\n  const first = elements[0];\n  const last = elements[elements.length - 1];\n  t.addEventListener(element, \"keydown\", (evt) => {\n    if (evt.key === \"Tab\") {\n      if (evt.shiftKey) {\n        if (document.activeElement === first) {\n          last.focus();\n          evt.preventDefault();\n        }\n      } else {\n        if (document.activeElement === last) {\n          first.focus();\n          evt.preventDefault();\n        }\n      }\n    }\n  }, true);\n  Promise.resolve().then(() => {\n    first.focus();\n  });\n}\nfunction focusables(element) {\n  return element.querySelectorAll(\"a[href], button, textarea, input, select\");\n}\nclass SessionStatusView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: {\n      \"SessionStatusView\": true,\n      \"hidden\": (vm2) => !vm2.isShown\n    } }, [\n      spinner(t, { hidden: (vm2) => !vm2.isWaiting }),\n      t.p((vm2) => vm2.statusLabel),\n      t.if((vm2) => vm2.isConnectNowShown, (t2) => t2.button({ className: \"link\", onClick: () => vm.connectNow() }, \"Retry now\")),\n      t.if((vm2) => vm2.isSecretStorageShown, (t2) => t2.a({ href: vm.setupKeyBackupUrl }, \"Go to settings\")),\n      t.if((vm2) => vm2.canDismiss, (t2) => t2.div({ className: \"end\" }, t2.button({ className: \"dismiss\", onClick: () => vm.dismiss() })))\n    ]);\n  }\n}\nclass RoomGridView extends TemplateView {\n  constructor(vm, viewClassForTile2) {\n    super(vm);\n    this._viewClassForTile = viewClassForTile2;\n  }\n  render(t, vm) {\n    const children = [];\n    for (let i = 0; i < vm.height * vm.width; i += 1) {\n      children.push(t.div({\n        onClick: () => vm.focusTile(i),\n        onFocusin: () => vm.focusTile(i),\n        className: {\n          \"container\": true,\n          [`tile${i}`]: true,\n          \"focused\": (vm2) => vm2.focusIndex === i\n        }\n      }, t.mapView((vm2) => vm2.roomViewModelAt(i), (roomVM) => {\n        if (roomVM) {\n          if (roomVM.kind === \"roomBeingCreated\") {\n            return new RoomBeingCreatedView(roomVM);\n          } else if (roomVM.kind === \"invite\") {\n            return new InviteView(roomVM);\n          } else {\n            return new RoomView(roomVM, this._viewClassForTile);\n          }\n        } else {\n          return new StaticView((t2) => t2.div({ className: \"room-placeholder\" }, [\n            t2.h2({ className: \"focused\" }, vm.i18n`Select a room on the left`),\n            t2.h2({ className: \"unfocused\" }, vm.i18n`Click to select this tile`)\n          ]));\n        }\n      })));\n    }\n    children.push(t.div({ className: (vm2) => `focus-ring tile${vm2.focusIndex}` }));\n    return t.div({ className: \"RoomGridView middle layout3x2\" }, children);\n  }\n}\nclass ViewModel extends EventEmitter {\n  constructor(options) {\n    super();\n    this._isDisposed = false;\n    this._options = options;\n  }\n  childOptions(explicitOptions) {\n    return Object.assign({}, this._options, explicitOptions);\n  }\n  get options() {\n    return this._options;\n  }\n  getOption(name) {\n    return this._options[name];\n  }\n  observeNavigation(type, onChange) {\n    const segmentObservable = this.navigation.observe(type);\n    const unsubscribe = segmentObservable.subscribe((value) => {\n      onChange(value, type);\n    });\n    this.track(unsubscribe);\n  }\n  track(disposable) {\n    if (!this.disposables) {\n      this.disposables = new Disposables();\n    }\n    return this.disposables.track(disposable);\n  }\n  untrack(disposable) {\n    if (this.disposables) {\n      return this.disposables.untrack(disposable);\n    }\n    return void 0;\n  }\n  dispose() {\n    if (this.disposables) {\n      this.disposables.dispose();\n    }\n    this._isDisposed = true;\n  }\n  get isDisposed() {\n    return this._isDisposed;\n  }\n  disposeTracked(disposable) {\n    if (this.disposables) {\n      return this.disposables.disposeTracked(disposable);\n    }\n    return void 0;\n  }\n  i18n(parts, ...expr) {\n    let result = \"\";\n    for (let i = 0; i < parts.length; ++i) {\n      result = result + parts[i];\n      if (i < expr.length) {\n        result = result + expr[i];\n      }\n    }\n    return result;\n  }\n  emitChange(changedProps) {\n    if (this._options.emitChange) {\n      this._options.emitChange(changedProps);\n    } else {\n      this.emit(\"change\", changedProps);\n    }\n  }\n  get platform() {\n    return this._options.platform;\n  }\n  get clock() {\n    return this._options.platform.clock;\n  }\n  get logger() {\n    return this.platform.logger;\n  }\n  get urlRouter() {\n    return this._options.urlRouter;\n  }\n  get features() {\n    return this._options.features;\n  }\n  get navigation() {\n    return this._options.navigation;\n  }\n  get timeFormatter() {\n    return this._options.platform.timeFormatter;\n  }\n}\nclass KeyDescription {\n  constructor(id, keyDescription) {\n    this._id = id;\n    this._keyDescription = keyDescription;\n  }\n  get id() {\n    return this._id;\n  }\n  get passphraseParams() {\n    var _a;\n    return (_a = this._keyDescription) == null ? void 0 : _a.passphrase;\n  }\n  get algorithm() {\n    var _a;\n    return (_a = this._keyDescription) == null ? void 0 : _a.algorithm;\n  }\n  async isCompatible(key, platform) {\n    if (this.algorithm === \"m.secret_storage.v1.aes-hmac-sha2\") {\n      const kd = this._keyDescription;\n      if (kd.mac) {\n        const otherMac = await calculateKeyMac(key.binaryKey, kd.iv, platform);\n        return kd.mac === otherMac;\n      } else if (kd.passphrase) {\n        const kdOther = key.description._keyDescription;\n        if (!kdOther.passphrase) {\n          return false;\n        }\n        return kd.passphrase.algorithm === kdOther.passphrase.algorithm && kd.passphrase.iterations === kdOther.passphrase.iterations && kd.passphrase.salt === kdOther.passphrase.salt;\n      }\n    }\n    return false;\n  }\n}\nclass Key {\n  constructor(keyDescription, binaryKey) {\n    this._keyDescription = keyDescription;\n    this._binaryKey = binaryKey;\n  }\n  withDescription(description) {\n    return new Key(description, this._binaryKey);\n  }\n  get description() {\n    return this._keyDescription;\n  }\n  get id() {\n    return this._keyDescription.id;\n  }\n  get binaryKey() {\n    return this._binaryKey;\n  }\n  get algorithm() {\n    return this._keyDescription.algorithm;\n  }\n}\nasync function calculateKeyMac(key, ivStr, platform) {\n  const { crypto: crypto2, encoding } = platform;\n  const { utf8, base64: base642 } = encoding;\n  const { derive: derive2, aes, hmac } = crypto2;\n  const iv = base642.decode(ivStr);\n  const zerosalt = new Uint8Array(8);\n  const ZERO_STR = \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\";\n  const info = utf8.encode(\"\");\n  const keybits = await derive2.hkdf(key, zerosalt, info, \"SHA-256\", 512);\n  const aesKey = keybits.slice(0, 32);\n  const hmacKey = keybits.slice(32);\n  const ciphertext = await aes.encryptCTR({ key: aesKey, iv, data: utf8.encode(ZERO_STR) });\n  const mac = await hmac.compute(hmacKey, ciphertext, \"SHA-256\");\n  return base642.encode(mac);\n}\nconst DEFAULT_ITERATIONS = 5e5;\nconst DEFAULT_BITSIZE = 256;\nasync function keyFromPassphrase(keyDescription, passphrase, platform) {\n  const { passphraseParams } = keyDescription;\n  if (!passphraseParams) {\n    throw new Error(\"not a passphrase key\");\n  }\n  if (passphraseParams.algorithm !== \"m.pbkdf2\") {\n    throw new Error(`Unsupported passphrase algorithm: ${passphraseParams.algorithm}`);\n  }\n  const { utf8 } = platform.encoding;\n  const keyBits = await platform.crypto.derive.pbkdf2(utf8.encode(passphrase), passphraseParams.iterations || DEFAULT_ITERATIONS, utf8.encode(passphraseParams.salt), \"SHA-512\", passphraseParams.bits || DEFAULT_BITSIZE);\n  return new Key(keyDescription, keyBits);\n}\nconst OLM_RECOVERY_KEY_PREFIX = [139, 1];\nfunction keyFromRecoveryKey(keyDescription, recoveryKey, olm, platform) {\n  const result = platform.encoding.base58.decode(recoveryKey.replace(/ /g, \"\"));\n  let parity = 0;\n  for (const b of result) {\n    parity ^= b;\n  }\n  if (parity !== 0) {\n    throw new Error(\"Incorrect parity\");\n  }\n  for (let i = 0; i < OLM_RECOVERY_KEY_PREFIX.length; ++i) {\n    if (result[i] !== OLM_RECOVERY_KEY_PREFIX[i]) {\n      throw new Error(\"Incorrect prefix\");\n    }\n  }\n  if (result.length !== OLM_RECOVERY_KEY_PREFIX.length + olm.PRIVATE_KEY_LENGTH + 1) {\n    throw new Error(\"Incorrect length\");\n  }\n  const keyBits = Uint8Array.from(result.slice(OLM_RECOVERY_KEY_PREFIX.length, OLM_RECOVERY_KEY_PREFIX.length + olm.PRIVATE_KEY_LENGTH));\n  return new Key(keyDescription, keyBits);\n}\nconst SSSS_KEY = `${SESSION_E2EE_KEY_PREFIX}ssssKey`;\nconst BACKUPVERSION_KEY = `${SESSION_E2EE_KEY_PREFIX}keyBackupVersion`;\nvar KeyType = /* @__PURE__ */ ((KeyType2) => {\n  KeyType2[KeyType2[\"RecoveryKey\"] = 0] = \"RecoveryKey\";\n  KeyType2[KeyType2[\"Passphrase\"] = 1] = \"Passphrase\";\n  return KeyType2;\n})(KeyType || {});\nasync function readDefaultKeyDescription(storage) {\n  var _a;\n  const txn = await storage.readTxn([\n    storage.storeNames.accountData\n  ]);\n  const defaultKeyEvent = await txn.accountData.get(\"m.secret_storage.default_key\");\n  const id = (_a = defaultKeyEvent == null ? void 0 : defaultKeyEvent.content) == null ? void 0 : _a.key;\n  if (!id) {\n    return;\n  }\n  const keyAccountData = await txn.accountData.get(`m.secret_storage.key.${id}`);\n  if (!keyAccountData) {\n    return;\n  }\n  return new KeyDescription(id, keyAccountData.content);\n}\nasync function writeKey(key, keyBackupVersion, txn) {\n  const existingVersion = await txn.session.get(BACKUPVERSION_KEY);\n  txn.session.set(BACKUPVERSION_KEY, keyBackupVersion);\n  txn.session.set(SSSS_KEY, { id: key.id, binaryKey: key.binaryKey });\n  return existingVersion;\n}\nasync function readKey(txn) {\n  const keyData = await txn.session.get(SSSS_KEY);\n  if (!keyData) {\n    return;\n  }\n  const keyAccountData = await txn.accountData.get(`m.secret_storage.key.${keyData.id}`);\n  if (keyAccountData) {\n    return new Key(new KeyDescription(keyData.id, keyAccountData.content), keyData.binaryKey);\n  }\n}\nasync function removeKey(txn) {\n  txn.session.remove(SSSS_KEY);\n}\nasync function keyFromCredential(type, credential, storage, platform, olm) {\n  const keyDescription = await readDefaultKeyDescription(storage);\n  if (!keyDescription) {\n    throw new Error(\"Could not find a default secret storage key in account data\");\n  }\n  return await keyFromCredentialAndDescription(type, credential, keyDescription, platform, olm);\n}\nasync function keyFromCredentialAndDescription(type, credential, keyDescription, platform, olm) {\n  let key;\n  if (type === 1) {\n    key = await keyFromPassphrase(keyDescription, credential, platform);\n  } else if (type === 0) {\n    key = keyFromRecoveryKey(keyDescription, credential, olm, platform);\n  } else {\n    throw new Error(`Invalid type: ${type}`);\n  }\n  return key;\n}\nasync function keyFromDehydratedDeviceKey(key, storage, platform) {\n  const keyDescription = await readDefaultKeyDescription(storage);\n  if (await (keyDescription == null ? void 0 : keyDescription.isCompatible(key, platform))) {\n    return key.withDescription(keyDescription);\n  }\n}\nvar Status = /* @__PURE__ */ ((Status2) => {\n  Status2[Status2[\"Enabled\"] = 0] = \"Enabled\";\n  Status2[Status2[\"SetupWithPassphrase\"] = 1] = \"SetupWithPassphrase\";\n  Status2[Status2[\"SetupWithRecoveryKey\"] = 2] = \"SetupWithRecoveryKey\";\n  Status2[Status2[\"Pending\"] = 3] = \"Pending\";\n  Status2[Status2[\"NewVersionAvailable\"] = 4] = \"NewVersionAvailable\";\n  return Status2;\n})(Status || {});\nvar BackupWriteStatus = /* @__PURE__ */ ((BackupWriteStatus2) => {\n  BackupWriteStatus2[BackupWriteStatus2[\"Writing\"] = 0] = \"Writing\";\n  BackupWriteStatus2[BackupWriteStatus2[\"Stopped\"] = 1] = \"Stopped\";\n  BackupWriteStatus2[BackupWriteStatus2[\"Done\"] = 2] = \"Done\";\n  BackupWriteStatus2[BackupWriteStatus2[\"Pending\"] = 3] = \"Pending\";\n  return BackupWriteStatus2;\n})(BackupWriteStatus || {});\nclass KeyBackupViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._error = void 0;\n    this._isBusy = false;\n    this._dehydratedDeviceId = void 0;\n    this._status = 3;\n    this._backupOperationSubscription = void 0;\n    this._keyBackupSubscription = void 0;\n    this._progress = void 0;\n    this._setupKeyType = KeyType.RecoveryKey;\n    const onKeyBackupSet = (keyBackup) => {\n      if (keyBackup && !this._keyBackupSubscription) {\n        this._keyBackupSubscription = this.track(this._session.keyBackup.get().disposableOn(\"change\", () => {\n          this._onKeyBackupChange();\n        }));\n      } else if (!keyBackup && this._keyBackupSubscription) {\n        this._keyBackupSubscription = this.disposeTracked(this._keyBackupSubscription);\n      }\n      this._onKeyBackupChange();\n    };\n    this.track(this._session.keyBackup.subscribe(onKeyBackupSet));\n    onKeyBackupSet(this._keyBackup);\n  }\n  get _session() {\n    return this.getOption(\"session\");\n  }\n  get _keyBackup() {\n    return this._session.keyBackup.get();\n  }\n  get _crossSigning() {\n    return this._session.crossSigning.get();\n  }\n  _onKeyBackupChange() {\n    const keyBackup = this._keyBackup;\n    if (keyBackup) {\n      const { operationInProgress } = keyBackup;\n      if (operationInProgress && !this._backupOperationSubscription) {\n        this._backupOperationSubscription = this.track(operationInProgress.disposableOn(\"change\", () => {\n          this._progress = operationInProgress.progress;\n          this.emitChange(\"backupPercentage\");\n        }));\n      } else if (this._backupOperationSubscription && !operationInProgress) {\n        this._backupOperationSubscription = this.disposeTracked(this._backupOperationSubscription);\n        this._progress = void 0;\n      }\n    }\n    this.emitChange(\"status\");\n  }\n  get status() {\n    const keyBackup = this._keyBackup;\n    if (keyBackup) {\n      if (keyBackup.needsNewKey) {\n        return 4;\n      } else if (keyBackup.version === void 0) {\n        return 3;\n      } else {\n        return keyBackup.needsNewKey ? 4 : 0;\n      }\n    } else {\n      switch (this._setupKeyType) {\n        case KeyType.RecoveryKey:\n          return 2;\n        case KeyType.Passphrase:\n          return 1;\n      }\n    }\n  }\n  get decryptAction() {\n    return this.i18n`Set up`;\n  }\n  get purpose() {\n    return this.i18n`set up key backup`;\n  }\n  offerDehydratedDeviceSetup() {\n    return true;\n  }\n  get dehydratedDeviceId() {\n    return this._dehydratedDeviceId;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  get backupVersion() {\n    var _a, _b;\n    return (_b = (_a = this._keyBackup) == null ? void 0 : _a.version) != null ? _b : \"\";\n  }\n  get isMasterKeyTrusted() {\n    var _a, _b;\n    return (_b = (_a = this._crossSigning) == null ? void 0 : _a.isMasterKeyTrusted) != null ? _b : false;\n  }\n  get canSignOwnDevice() {\n    return !!this._crossSigning;\n  }\n  async signOwnDevice() {\n    const crossSigning = this._crossSigning;\n    if (crossSigning) {\n      await this.logger.run(\"KeyBackupViewModel.signOwnDevice\", async (log) => {\n        await crossSigning.signOwnDevice(log);\n      });\n    }\n  }\n  navigateToVerification() {\n    this.navigation.push(\"device-verification\", true);\n  }\n  get backupWriteStatus() {\n    const keyBackup = this._keyBackup;\n    if (!keyBackup || keyBackup.version === void 0) {\n      return 3;\n    } else if (keyBackup.hasStopped) {\n      return 1;\n    }\n    const operation = keyBackup.operationInProgress;\n    if (operation) {\n      return 0;\n    } else if (keyBackup.hasBackedUpAllKeys) {\n      return 2;\n    } else {\n      return 3;\n    }\n  }\n  get backupError() {\n    var _a, _b;\n    return (_b = (_a = this._keyBackup) == null ? void 0 : _a.error) == null ? void 0 : _b.message;\n  }\n  get error() {\n    var _a;\n    return (_a = this._error) == null ? void 0 : _a.message;\n  }\n  showPhraseSetup() {\n    this._setupKeyType = KeyType.Passphrase;\n    this.emitChange(\"status\");\n  }\n  showKeySetup() {\n    this._setupKeyType = KeyType.RecoveryKey;\n    this.emitChange(\"status\");\n  }\n  async _enterCredentials(keyType, credential, setupDehydratedDevice) {\n    if (credential) {\n      try {\n        this._isBusy = true;\n        this.emitChange(\"isBusy\");\n        const key = await this._session.enableSecretStorage(keyType, credential);\n        if (setupDehydratedDevice) {\n          this._dehydratedDeviceId = await this._session.setupDehydratedDevice(key);\n        }\n      } catch (err) {\n        console.error(err);\n        this._error = err;\n        this.emitChange(\"error\");\n      } finally {\n        this._isBusy = false;\n        this.emitChange();\n      }\n    }\n  }\n  enterSecurityPhrase(passphrase, setupDehydratedDevice) {\n    return this._enterCredentials(KeyType.Passphrase, passphrase, setupDehydratedDevice);\n  }\n  enterSecurityKey(securityKey, setupDehydratedDevice) {\n    return this._enterCredentials(KeyType.RecoveryKey, securityKey, setupDehydratedDevice);\n  }\n  async disable() {\n    try {\n      this._isBusy = true;\n      this.emitChange(\"isBusy\");\n      await this._session.disableSecretStorage();\n    } catch (err) {\n      console.error(err);\n      this._error = err;\n      this.emitChange(\"error\");\n    } finally {\n      this._isBusy = false;\n      this.emitChange();\n    }\n  }\n  get isBackingUp() {\n    var _a;\n    return ((_a = this._keyBackup) == null ? void 0 : _a.operationInProgress) !== void 0;\n  }\n  get backupPercentage() {\n    if (this._progress) {\n      return Math.round(this._progress.finished / this._progress.total * 100);\n    }\n    return 0;\n  }\n  get backupInProgressLabel() {\n    if (this._progress) {\n      return this.i18n`${this._progress.finished} of ${this._progress.total}`;\n    }\n    return this.i18n`…`;\n  }\n  cancelBackup() {\n    var _a, _b;\n    (_b = (_a = this._keyBackup) == null ? void 0 : _a.operationInProgress) == null ? void 0 : _b.abort();\n  }\n  startBackup() {\n    this.logger.run(\"KeyBackupViewModel.startBackup\", (log) => {\n      var _a;\n      (_a = this._keyBackup) == null ? void 0 : _a.flush(log);\n    });\n  }\n}\nclass KeyBackupSettingsView extends TemplateView {\n  render(t, vm) {\n    return t.div([\n      t.map((vm2) => vm2.status, (status, t2, vm2) => {\n        switch (status) {\n          case Status.Enabled:\n            return renderEnabled(t2, vm2);\n          case Status.NewVersionAvailable:\n            return renderNewVersionAvailable(t2, vm2);\n          case Status.SetupWithPassphrase:\n            return renderEnableFromPhrase(t2, vm2);\n          case Status.SetupWithRecoveryKey:\n            return renderEnableFromKey(t2, vm2);\n          case Status.Pending:\n            return t2.p(vm2.i18n`Waiting to go online…`);\n        }\n      }),\n      t.map((vm2) => vm2.backupWriteStatus, (status, t2, vm2) => {\n        switch (status) {\n          case BackupWriteStatus.Writing: {\n            const progress = t2.progress({\n              min: 0 + \"\",\n              max: 100 + \"\",\n              value: (vm3) => vm3.backupPercentage\n            });\n            return t2.div([`Backup in progress `, progress, \" \", (vm3) => vm3.backupInProgressLabel]);\n          }\n          case BackupWriteStatus.Stopped: {\n            let label;\n            const error = vm2.backupError;\n            if (error) {\n              label = `Backup has stopped because of an error: ${vm2.backupError}`;\n            } else {\n              label = `Backup has stopped`;\n            }\n            return t2.p([label, \" \", t2.button({ onClick: () => vm2.startBackup() }, `Backup now`)]);\n          }\n          case BackupWriteStatus.Done:\n            return t2.p(`All keys are backed up.`);\n          default:\n            return void 0;\n        }\n      }),\n      t.if((vm2) => vm2.isMasterKeyTrusted, (t2) => {\n        return t2.p(\"Cross-signing master key found and trusted.\");\n      }),\n      t.if((vm2) => vm2.canSignOwnDevice, (t2) => {\n        return t2.div([\n          t2.button({\n            onClick: disableTargetCallback$1(async (evt) => {\n              await vm.signOwnDevice();\n            })\n          }, \"Sign own device\"),\n          t2.button({\n            onClick: disableTargetCallback$1(async () => {\n              vm.navigateToVerification();\n            })\n          }, \"Verify by emoji\")\n        ]);\n      })\n    ]);\n  }\n}\nfunction renderEnabled(t, vm) {\n  const items = [\n    t.p([vm.i18n`Key backup is enabled, using backup version ${vm.backupVersion}. `, t.button({ onClick: () => vm.disable() }, vm.i18n`Disable`)])\n  ];\n  if (vm.dehydratedDeviceId) {\n    items.push(t.p(vm.i18n`A dehydrated device id was set up with id ${vm.dehydratedDeviceId} which you can use during your next login with your secret storage key.`));\n  }\n  return t.div(items);\n}\nfunction renderNewVersionAvailable(t, vm) {\n  const items = [\n    t.p([vm.i18n`A new backup version has been created from another device. Disable key backup and enable it again with the new key.`, t.button({ onClick: () => vm.disable() }, vm.i18n`Disable`)])\n  ];\n  return t.div(items);\n}\nfunction renderEnableFromKey(t, vm) {\n  const useASecurityPhrase = t.button({ className: \"link\", onClick: () => vm.showPhraseSetup() }, vm.i18n`use a security phrase`);\n  return t.div([\n    t.p(vm.i18n`Enter your secret storage security key below to ${vm.purpose}, which will enable you to decrypt messages received before you logged into this session. The security key is a code of 12 groups of 4 characters separated by a space that Element created for you when setting up security.`),\n    renderError(t),\n    renderEnableFieldRow(t, vm, vm.i18n`Security key`, (key, setupDehydratedDevice) => vm.enterSecurityKey(key, setupDehydratedDevice)),\n    t.p([vm.i18n`Alternatively, you can `, useASecurityPhrase, vm.i18n` if you have one.`])\n  ]);\n}\nfunction renderEnableFromPhrase(t, vm) {\n  const useASecurityKey = t.button({ className: \"link\", onClick: () => vm.showKeySetup() }, vm.i18n`use your security key`);\n  return t.div([\n    t.p(vm.i18n`Enter your secret storage security phrase below to ${vm.purpose}, which will enable you to decrypt messages received before you logged into this session. The security phrase is a freeform secret phrase you optionally chose when setting up security in Element. It is different from your password to login, unless you chose to set them to the same value.`),\n    renderError(t),\n    renderEnableFieldRow(t, vm, vm.i18n`Security phrase`, (phrase, setupDehydratedDevice) => vm.enterSecurityPhrase(phrase, setupDehydratedDevice)),\n    t.p([vm.i18n`You can also `, useASecurityKey, vm.i18n`.`])\n  ]);\n}\nfunction renderEnableFieldRow(t, vm, label, callback) {\n  let setupDehydrationCheck;\n  const eventHandler = () => callback(input.value, (setupDehydrationCheck == null ? void 0 : setupDehydrationCheck.checked) || false);\n  const input = t.input({ type: \"password\", disabled: (vm2) => vm2.isBusy, placeholder: label });\n  const children = [\n    t.p([\n      input,\n      t.button({ disabled: (vm2) => vm2.isBusy, onClick: eventHandler }, vm.decryptAction)\n    ])\n  ];\n  if (vm.offerDehydratedDeviceSetup) {\n    setupDehydrationCheck = t.input({ type: \"checkbox\", id: \"enable-dehydrated-device\" });\n    const moreInfo = t.a({ href: \"https://github.com/uhoreg/matrix-doc/blob/dehydration/proposals/2697-device-dehydration.md\", target: \"_blank\", rel: \"noopener\" }, \"more info\");\n    children.push(t.p([\n      setupDehydrationCheck,\n      t.label({ for: setupDehydrationCheck.id }, [vm.i18n`Back up my device as well (`, moreInfo, \")\"])\n    ]));\n  }\n  return t.div({ className: `row` }, [\n    t.div({ className: \"label\" }, label),\n    t.div({ className: \"content\" }, children)\n  ]);\n}\nfunction renderError(t) {\n  return t.if((vm) => vm.error !== void 0, (t2, vm) => {\n    return t2.div([\n      t2.p({ className: \"error\" }, (vm2) => vm2.i18n`Could not enable key backup: ${vm2.error}.`),\n      t2.p(vm.i18n`Try double checking that you did not mix up your security key, security phrase and login password as explained above.`)\n    ]);\n  });\n}\nclass FeaturesView extends TemplateView {\n  render(t, vm) {\n    return t.div({\n      className: \"FeaturesView\"\n    }, [\n      t.p(\"Enable experimental features here that are still in development. These are not yet ready for primetime, so expect bugs.\"),\n      t.ul(vm.featureViewModels.map((vm2) => {\n        return t.li(t.view(new FeatureView(vm2)));\n      }))\n    ]);\n  }\n}\nclass FeatureView extends TemplateView {\n  render(t, vm) {\n    let id = `feature_${vm.id}`;\n    return t.div({ className: \"FeatureView\" }, [\n      t.input({\n        type: \"checkbox\",\n        id,\n        checked: (vm2) => vm2.enabled,\n        onChange: (evt) => vm.enableFeature(evt.target.checked)\n      }),\n      t.div({ class: \"FeatureView_container\" }, [\n        t.h4(t.label({ for: id }, vm.name)),\n        t.p(vm.description)\n      ])\n    ]);\n  }\n}\nclass SettingsView extends TemplateView {\n  render(t, vm) {\n    let version = vm.version;\n    if (vm.showUpdateButton) {\n      version = t.span([\n        vm.version,\n        t.button({ onClick: () => vm.checkForUpdate() }, vm.i18n`Check for updates`)\n      ]);\n    }\n    const row = (t2, label, content, extraClass = \"\") => {\n      return t2.div({ className: `row ${extraClass}` }, [\n        t2.div({ className: \"label\" }, label),\n        t2.div({ className: \"content\" }, content)\n      ]);\n    };\n    const settingNodes = [];\n    settingNodes.push(t.h3(\"Session\"), row(t, vm.i18n`User ID`, vm.userId), row(t, vm.i18n`Session ID`, vm.deviceId, \"code\"), row(t, vm.i18n`Session key`, vm.fingerprintKey, \"code\"), row(t, \"\", t.button({\n      onClick: () => vm.logout(),\n      disabled: (vm2) => vm2.isLoggingOut\n    }, vm.i18n`Log out`)));\n    settingNodes.push(t.if((vm2) => vm2.accountManagementUrl, (t2) => {\n      const url = new URL(vm.accountManagementUrl);\n      return t2.div([\n        t2.h3(\"Account\"),\n        t2.p([vm.i18n`Your account details are managed separately at `, t2.code(url.hostname), \".\"]),\n        t2.button({ onClick: () => window.open(vm.accountManagementUrl, \"_blank\") }, vm.i18n`Manage account`)\n      ]);\n    }));\n    settingNodes.push(t.h3(\"Key backup & security\"), t.view(new KeyBackupSettingsView(vm.keyBackupViewModel)));\n    settingNodes.push(t.h3(\"Notifications\"), t.map((vm2) => vm2.pushNotifications.supported, (supported, t2) => {\n      if (supported === null) {\n        return t2.p(vm.i18n`Loading…`);\n      } else if (supported) {\n        const label = (vm2) => vm2.pushNotifications.enabled ? vm2.i18n`Push notifications are enabled` : vm2.i18n`Push notifications are disabled`;\n        const buttonLabel = (vm2) => vm2.pushNotifications.enabled ? vm2.i18n`Disable` : vm2.i18n`Enable`;\n        return row(t2, label, t2.button({\n          onClick: () => vm.togglePushNotifications(),\n          disabled: (vm2) => vm2.pushNotifications.updating\n        }, buttonLabel));\n      } else {\n        return t2.p(vm.i18n`Push notifications are not supported on this browser`);\n      }\n    }), t.if((vm2) => vm2.pushNotifications.supported && vm2.pushNotifications.enabled, (t2) => {\n      return t2.div([\n        t2.p([\n          \"If you think push notifications are not being delivered, \",\n          t2.button({ className: \"link\", onClick: () => vm.checkPushEnabledOnServer() }, \"check\"),\n          \" if they got disabled on the server\"\n        ]),\n        t2.map((vm2) => vm2.pushNotifications.enabledOnServer, (enabled, t3) => {\n          if (enabled === true) {\n            return t3.p(\"Push notifications are still enabled on the server, so everything should be working. Sometimes notifications can get dropped if they can't be delivered within a given time.\");\n          } else if (enabled === false) {\n            return t3.p(\"Push notifications have been disabled on the server, likely due to a bug. Please re-enable them by clicking Disable and then Enable again above.\");\n          }\n        }),\n        t2.map((vm2) => vm2.pushNotifications.serverError, (err, t3) => {\n          if (err) {\n            return t3.p(\"Couldn't not check on server: \" + err.message);\n          }\n        })\n      ]);\n    }));\n    settingNodes.push(t.h3(\"Preferences\"), row(t, vm.i18n`Scale down images when sending`, this._imageCompressionRange(t, vm)), t.if((vm2) => vm2.activeTheme, (t2, vm2) => {\n      return row(t2, vm2.i18n`Use the following theme`, this._themeOptions(t2, vm2));\n    }));\n    const logButtons = [];\n    if (vm.canSendLogsToServer) {\n      logButtons.push(t.button({ onClick: disableTargetCallback$1(() => vm.sendLogsToServer()) }, `Submit logs to ${vm.logsServer}`));\n    }\n    logButtons.push(t.button({ onClick: () => vm.exportLogs() }, \"Download logs\"));\n    settingNodes.push(t.h3(\"Experimental features\"), t.view(new FeaturesView(vm.featuresViewModel)));\n    settingNodes.push(t.h3(\"Application\"), row(t, vm.i18n`Version`, version), row(t, vm.i18n`Storage usage`, (vm2) => `${vm2.storageUsage} / ${vm2.storageQuota}`), row(t, vm.i18n`Debug logs`, logButtons), t.p({ className: { hidden: (vm2) => !vm2.logsFeedbackMessage } }, (vm2) => vm2.logsFeedbackMessage), t.p([\n      \"Debug logs contain application usage data including your username, the IDs or aliases of the rooms or groups you have visited, the usernames of other users and the names of files you send. They do not contain messages. For more information, review our \",\n      t.a({ href: \"https://element.io/privacy\", target: \"_blank\", rel: \"noopener\" }, \"privacy policy\"),\n      \".\"\n    ]), t.p([]));\n    return t.main({ className: \"Settings middle\" }, [\n      t.div({ className: \"middle-header\" }, [\n        t.a({ className: \"button-utility close-middle\", href: vm.closeUrl, title: vm.i18n`Close settings` }),\n        t.h2(\"Settings\")\n      ]),\n      t.div({ className: \"SettingsBody\" }, settingNodes)\n    ]);\n  }\n  _imageCompressionRange(t, vm) {\n    const step = 32;\n    const min = Math.ceil(vm.minSentImageSizeLimit / step) * step;\n    const max = (Math.floor(vm.maxSentImageSizeLimit / step) + 1) * step;\n    const updateSetting = (evt) => vm.setSentImageSizeLimit(parseInt(evt.target.value, 10));\n    return [t.input({\n      type: \"range\",\n      step,\n      min,\n      max,\n      value: (vm2) => vm2.sentImageSizeLimit || max,\n      onInput: updateSetting,\n      onChange: updateSetting\n    }), \" \", t.output((vm2) => {\n      return vm2.sentImageSizeLimit ? vm2.i18n`resize to ${vm2.sentImageSizeLimit}px` : vm2.i18n`no resizing`;\n    })];\n  }\n  _themeOptions(t, vm) {\n    const { themeName: activeThemeName, themeVariant: activeThemeVariant } = vm.activeTheme;\n    const optionTags = [];\n    for (const name of Object.keys(vm.themeMapping)) {\n      optionTags.push(t.option({ value: name, selected: name === activeThemeName }, name));\n    }\n    const select = t.select({\n      onChange: (e) => {\n        const themeName = e.target.value;\n        if (!(\"id\" in vm.themeMapping[themeName])) {\n          const colorScheme = darkRadioButton.checked ? \"dark\" : lightRadioButton.checked ? \"light\" : \"default\";\n          radioButtonCallback(colorScheme);\n          return;\n        }\n        vm.changeThemeOption(themeName);\n      }\n    }, optionTags);\n    const radioButtonCallback = (colorScheme) => {\n      const selectedThemeName = select.options[select.selectedIndex].value;\n      vm.changeThemeOption(selectedThemeName, colorScheme);\n    };\n    const isDarkSelected = activeThemeVariant === \"dark\";\n    const isLightSelected = activeThemeVariant === \"light\";\n    const darkRadioButton = t.input({ type: \"radio\", name: \"radio-chooser\", value: \"dark\", id: \"dark\", checked: isDarkSelected });\n    const defaultRadioButton = t.input({ type: \"radio\", name: \"radio-chooser\", value: \"default\", id: \"default\", checked: !(isDarkSelected || isLightSelected) });\n    const lightRadioButton = t.input({ type: \"radio\", name: \"radio-chooser\", value: \"light\", id: \"light\", checked: isLightSelected });\n    const radioButtons = t.form({\n      className: {\n        hidden: () => {\n          const themeName = select.options[select.selectedIndex].value;\n          return \"id\" in vm.themeMapping[themeName];\n        }\n      },\n      onChange: (e) => radioButtonCallback(e.target.value)\n    }, [\n      defaultRadioButton,\n      t.label({ for: \"default\" }, \"Match system theme\"),\n      darkRadioButton,\n      t.label({ for: \"dark\" }, \"dark\"),\n      lightRadioButton,\n      t.label({ for: \"light\" }, \"light\")\n    ]);\n    return t.div({ className: \"theme-chooser\" }, [select, radioButtons]);\n  }\n}\nclass CreateRoomView extends TemplateView {\n  render(t, vm) {\n    return t.main({ className: \"middle\" }, t.div({ className: \"CreateRoomView centered-column\" }, [\n      t.h2(\"Create room\"),\n      t.form({ className: \"CreateRoomView_detailsForm form\", onChange: (evt) => this.onFormChange(evt), onSubmit: (evt) => this.onSubmit(evt) }, [\n        t.div({ className: \"vertical-layout\" }, [\n          t.button({ type: \"button\", className: \"CreateRoomView_selectAvatar\", onClick: () => vm.selectAvatar() }, t.mapView((vm2) => vm2.hasAvatar, (hasAvatar) => {\n            if (hasAvatar) {\n              return new AvatarView(vm, 64);\n            } else {\n              return new StaticView(void 0, (t2) => {\n                return t2.div({ className: \"CreateRoomView_selectAvatarPlaceholder\" });\n              });\n            }\n          })),\n          t.div({ className: \"stretch form-row text\" }, [\n            t.label({ for: \"name\" }, vm.i18n`Room name`),\n            t.input({\n              onInput: (evt) => vm.setName(evt.target.value),\n              type: \"text\",\n              name: \"name\",\n              id: \"name\",\n              placeholder: vm.i18n`Enter a room name`\n            })\n          ])\n        ]),\n        t.div({ className: \"form-row text\" }, [\n          t.label({ for: \"topic\" }, vm.i18n`Topic (optional)`),\n          t.textarea({\n            onInput: (evt) => vm.setTopic(evt.target.value),\n            name: \"topic\",\n            id: \"topic\",\n            placeholder: vm.i18n`Topic`\n          })\n        ]),\n        t.div({ className: \"form-group\" }, [\n          t.div({ className: \"form-row check\" }, [\n            t.input({ type: \"radio\", name: \"isPublic\", id: \"isPrivate\", value: \"false\", checked: !vm.isPublic }),\n            t.label({ for: \"isPrivate\" }, vm.i18n`Private room, only upon invitation.`)\n          ]),\n          t.div({ className: \"form-row check\" }, [\n            t.input({ type: \"radio\", name: \"isPublic\", id: \"isPublic\", value: \"true\", checked: vm.isPublic }),\n            t.label({ for: \"isPublic\" }, vm.i18n`Public room, anyone can join`)\n          ])\n        ]),\n        t.div({ className: { \"form-row check\": true, hidden: (vm2) => vm2.isPublic } }, [\n          t.input({ type: \"checkbox\", name: \"isEncrypted\", id: \"isEncrypted\", checked: vm.isEncrypted }),\n          t.label({ for: \"isEncrypted\" }, vm.i18n`Enable end-to-end encryption`)\n        ]),\n        t.div({ className: { \"form-row text\": true, hidden: (vm2) => !vm2.isPublic } }, [\n          t.label({ for: \"roomAlias\" }, vm.i18n`Room alias`),\n          t.input({\n            onInput: (evt) => vm.setRoomAlias(evt.target.value),\n            type: \"text\",\n            name: \"roomAlias\",\n            id: \"roomAlias\",\n            placeholder: vm.i18n`Room alias (<alias>, or #<alias> or #<alias>:hs.tld`\n          })\n        ]),\n        t.div({ className: \"form-group\" }, [\n          t.div(t.button({ className: \"link\", type: \"button\", onClick: () => vm.toggleAdvancedShown() }, (vm2) => vm2.isAdvancedShown ? vm2.i18n`Hide advanced settings` : vm2.i18n`Show advanced settings`)),\n          t.div({ className: { \"form-row check\": true, hidden: (vm2) => !vm2.isAdvancedShown } }, [\n            t.input({ type: \"checkbox\", name: \"isFederationDisabled\", id: \"isFederationDisabled\", checked: vm.isFederationDisabled }),\n            t.label({ for: \"isFederationDisabled\" }, [\n              vm.i18n`Disable federation`,\n              t.p({ className: \"form-row-description\" }, vm.i18n`Can't be changed later. This will prevent people on other homeservers from joining the room. This is typically used when only people from your own organisation (if applicable) should be allowed in the room, and is otherwise not needed.`)\n            ])\n          ])\n        ]),\n        t.div({ className: \"button-row\" }, [\n          t.button({\n            className: \"button-action primary\",\n            type: \"submit\",\n            disabled: (vm2) => !vm2.canCreate\n          }, vm.i18n`Create room`)\n        ])\n      ])\n    ]));\n  }\n  onFormChange(evt) {\n    switch (evt.target.name) {\n      case \"isEncrypted\":\n        this.value.setEncrypted(evt.target.checked);\n        break;\n      case \"isPublic\":\n        this.value.setPublic(evt.currentTarget.isPublic.value === \"true\");\n        break;\n      case \"isFederationDisabled\":\n        this.value.setFederationDisabled(evt.target.checked);\n        break;\n    }\n  }\n  onSubmit(evt) {\n    evt.preventDefault();\n    this.value.create();\n  }\n}\nclass RoomDetailsView extends TemplateView {\n  render(t, vm) {\n    const encryptionString = () => vm.isEncrypted ? vm.i18n`On` : vm.i18n`Off`;\n    return t.div({ className: \"RoomDetailsView\" }, [\n      t.div({ className: \"RoomDetailsView_avatar\" }, [\n        t.view(new AvatarView(vm, 52)),\n        t.mapView((vm2) => vm2.isEncrypted, (isEncrypted) => new EncryptionIconView(isEncrypted))\n      ]),\n      t.div({ className: \"RoomDetailsView_name\" }, [t.h2((vm2) => vm2.name)]),\n      this._createRoomAliasDisplay(vm),\n      t.div({ className: \"RoomDetailsView_rows\" }, [\n        this._createRightPanelButtonRow(t, vm.i18n`People`, { MemberCount: true }, (vm2) => vm2.memberCount, () => vm.openPanel(\"members\")),\n        this._createRightPanelRow(t, vm.i18n`Encryption`, { EncryptionStatus: true }, encryptionString)\n      ])\n    ]);\n  }\n  _createRoomAliasDisplay(vm) {\n    return vm.canonicalAlias ? tag.div({ className: \"RoomDetailsView_id\" }, [vm.canonicalAlias]) : \"\";\n  }\n  _createRightPanelRow(t, label, labelClass, value) {\n    const labelClassString = classNames(__spreadValues({ RoomDetailsView_label: true }, labelClass));\n    return t.div({ className: \"RoomDetailsView_row\" }, [\n      t.div({ className: labelClassString }, [label]),\n      t.div({ className: \"RoomDetailsView_value\" }, value)\n    ]);\n  }\n  _createRightPanelButtonRow(t, label, labelClass, value, onClick) {\n    const labelClassString = classNames(__spreadValues({ RoomDetailsView_label: true }, labelClass));\n    return t.button({ className: \"RoomDetailsView_row\", onClick }, [\n      t.div({ className: labelClassString }, [label]),\n      t.div({ className: \"RoomDetailsView_value\" }, value)\n    ]);\n  }\n}\nclass EncryptionIconView extends TemplateView {\n  render(t, isEncrypted) {\n    return t.div({ className: \"EncryptionIconView\" }, [t.div({ className: isEncrypted ? \"EncryptionIconView_encrypted\" : \"EncryptionIconView_unencrypted\" })]);\n  }\n}\nclass Range {\n  constructor(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n  get length() {\n    return this.end - this.start;\n  }\n  contains(range) {\n    return range.start >= this.start && range.end <= this.end;\n  }\n  containsIndex(idx) {\n    return idx >= this.start && idx < this.end;\n  }\n  toLocalIndex(idx) {\n    return idx - this.start;\n  }\n  intersects(range) {\n    return range.start < this.end && this.start < range.end;\n  }\n  forEachInIterator(it, callback) {\n    let i = 0;\n    for (i = 0; i < this.start; i += 1) {\n      it.next();\n    }\n    for (i = 0; i < this.length; i += 1) {\n      const result = it.next();\n      if (result.done) {\n        break;\n      } else {\n        callback(result.value, this.start + i);\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return new RangeIterator(this);\n  }\n  reverseIterable() {\n    return new ReverseRangeIterator(this);\n  }\n  clampIndex(idx, end = this.end - 1) {\n    return Math.min(Math.max(this.start, idx), end);\n  }\n  getIndexZone(idx) {\n    if (idx < this.start) {\n      return RangeZone.Before;\n    } else if (idx < this.end) {\n      return RangeZone.Inside;\n    } else {\n      return RangeZone.After;\n    }\n  }\n}\nvar RangeZone = /* @__PURE__ */ ((RangeZone2) => {\n  RangeZone2[RangeZone2[\"Before\"] = 1] = \"Before\";\n  RangeZone2[RangeZone2[\"Inside\"] = 2] = \"Inside\";\n  RangeZone2[RangeZone2[\"After\"] = 3] = \"After\";\n  return RangeZone2;\n})(RangeZone || {});\nclass RangeIterator {\n  constructor(range) {\n    this.range = range;\n    this.idx = range.start - 1;\n  }\n  next() {\n    if (this.idx < this.range.end - 1) {\n      this.idx += 1;\n      return { value: this.idx, done: false };\n    } else {\n      return { value: void 0, done: true };\n    }\n  }\n}\nclass ReverseRangeIterator {\n  constructor(range) {\n    this.range = range;\n    this.idx = range.end;\n  }\n  [Symbol.iterator]() {\n    return this;\n  }\n  next() {\n    if (this.idx > this.range.start) {\n      this.idx -= 1;\n      return { value: this.idx, done: false };\n    } else {\n      return { value: void 0, done: true };\n    }\n  }\n}\nfunction skipOnIterator(it, pos) {\n  let i = 0;\n  while (i < pos) {\n    i += 1;\n    if (it.next().done) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getIteratorValueAtIdx(it, idx) {\n  if (skipOnIterator(it, idx)) {\n    const result = it.next();\n    if (!result.done) {\n      return result.value;\n    }\n  }\n  return void 0;\n}\nvar ResultType = /* @__PURE__ */ ((ResultType2) => {\n  ResultType2[ResultType2[\"Move\"] = 0] = \"Move\";\n  ResultType2[ResultType2[\"Add\"] = 1] = \"Add\";\n  ResultType2[ResultType2[\"Remove\"] = 2] = \"Remove\";\n  ResultType2[ResultType2[\"RemoveAndAdd\"] = 3] = \"RemoveAndAdd\";\n  ResultType2[ResultType2[\"UpdateRange\"] = 4] = \"UpdateRange\";\n  return ResultType2;\n})(ResultType || {});\nclass ListRange extends Range {\n  constructor(start, end, _totalLength, _viewportItemCount = end - start) {\n    super(start, end);\n    this._totalLength = _totalLength;\n    this._viewportItemCount = _viewportItemCount;\n  }\n  expand(amount) {\n    if (this.length === 0) {\n      return this;\n    }\n    const newStart = Math.max(0, this.start - amount);\n    const newEnd = Math.min(this.totalLength, this.end + amount);\n    return new ListRange(newStart, newEnd, this.totalLength, this._viewportItemCount);\n  }\n  get totalLength() {\n    return this._totalLength;\n  }\n  get viewportItemCount() {\n    return this._viewportItemCount;\n  }\n  static fromViewport(listLength, itemHeight, listHeight, scrollTop) {\n    const topCount = Math.min(Math.max(0, Math.floor(scrollTop / itemHeight)), listLength);\n    const itemsAfterTop = listLength - topCount;\n    const viewportItemCount = listHeight !== 0 ? Math.ceil(listHeight / itemHeight) : 0;\n    const renderCount = Math.min(viewportItemCount, itemsAfterTop);\n    return new ListRange(topCount, topCount + renderCount, listLength, viewportItemCount);\n  }\n  queryAdd(idx, value, list) {\n    const maxAddIdx = this.viewportItemCount > this.length ? this.end : this.end - 1;\n    if (idx <= maxAddIdx) {\n      const addIdx = this.clampIndex(idx, maxAddIdx);\n      const addValue = addIdx === idx ? value : getIteratorValueAtIdx(list[Symbol.iterator](), addIdx);\n      return this.createAddResult(addIdx, addValue);\n    } else {\n      return { type: 4, newRange: this.deriveRange(1, 0) };\n    }\n  }\n  queryRemove(idx, list) {\n    if (idx < this.end) {\n      const removeIdx = this.clampIndex(idx);\n      return this.createRemoveResult(removeIdx, list);\n    } else {\n      return { type: 4, newRange: this.deriveRange(-1, 0) };\n    }\n  }\n  queryMove(fromIdx, toIdx, value, list) {\n    const fromZone = this.getIndexZone(fromIdx);\n    const toZone = this.getIndexZone(toIdx);\n    if (fromZone === toZone) {\n      if (fromZone === RangeZone.Before || fromZone === RangeZone.After) {\n        return;\n      } else if (fromZone === RangeZone.Inside) {\n        return { type: 0, fromIdx, toIdx };\n      }\n    } else {\n      const addIdx = this.clampIndex(toIdx);\n      const removeIdx = this.clampIndex(fromIdx);\n      const addValue = addIdx === toIdx ? value : getIteratorValueAtIdx(list[Symbol.iterator](), addIdx);\n      return { type: 3, removeIdx, addIdx, value: addValue };\n    }\n  }\n  createAddResult(addIdx, value) {\n    if (this.viewportItemCount > this.length) {\n      return { type: 1, addIdx, value, newRange: this.deriveRange(1, 1) };\n    } else {\n      const removeIdx = this.clampIndex(Number.MAX_SAFE_INTEGER);\n      return { type: 3, removeIdx, addIdx, value, newRange: this.deriveRange(1, 0) };\n    }\n  }\n  createRemoveResult(removeIdx, list) {\n    if (this.end < this.totalLength) {\n      const addIdx = this.clampIndex(Number.MAX_SAFE_INTEGER);\n      const value = getIteratorValueAtIdx(list[Symbol.iterator](), addIdx);\n      return { type: 3, removeIdx, value, addIdx, newRange: this.deriveRange(-1, 0) };\n    } else if (this.start !== 0) {\n      const newRange = this.deriveRange(-1, 0, 1);\n      const addIdx = newRange.start;\n      const value = getIteratorValueAtIdx(list[Symbol.iterator](), addIdx);\n      return { type: 3, removeIdx, value, addIdx, newRange };\n    } else {\n      return { type: 2, removeIdx, newRange: this.deriveRange(-1, 0) };\n    }\n  }\n  deriveRange(totalLengthInc, viewportItemCountDecr, startDecr = 0) {\n    const start = this.start - startDecr;\n    const totalLength = this.totalLength + totalLengthInc;\n    const end = Math.min(Math.max(start, this.end - startDecr + viewportItemCountDecr), totalLength);\n    return new ListRange(start, end, totalLength, this.viewportItemCount);\n  }\n}\nclass LazyListView extends ListView {\n  constructor(_a, childCreator) {\n    var _b = _a, { itemHeight, overflowItems = 20 } = _b, options = __objRest(_b, [\"itemHeight\", \"overflowItems\"]);\n    super(options, childCreator);\n    this.itemHeight = itemHeight;\n    this.overflowItems = overflowItems;\n  }\n  handleEvent(e) {\n    if (e.type === \"scroll\") {\n      this.handleScroll();\n    } else {\n      super.handleEvent(e);\n    }\n  }\n  handleScroll() {\n    const visibleRange = this._getVisibleRange();\n    if (visibleRange.length !== 0 && !this.renderRange.contains(visibleRange)) {\n      const prevRenderRange = this.renderRange;\n      this.renderRange = visibleRange.expand(this.overflowItems);\n      this.renderUpdate(prevRenderRange, this.renderRange);\n    }\n  }\n  async loadList() {\n    await new Promise((r) => requestAnimationFrame(r));\n    await new Promise((r) => requestAnimationFrame(r));\n    if (!this._list) {\n      return;\n    }\n    this._subscription = this._list.subscribe(this);\n    const visibleRange = this._getVisibleRange();\n    this.renderRange = visibleRange.expand(this.overflowItems);\n    this._childInstances = [];\n    this.reRenderFullRange(this.renderRange);\n  }\n  _getVisibleRange() {\n    const { clientHeight, scrollTop } = this.root();\n    if (clientHeight === 0) {\n      throw new Error(\"LazyListView height is 0\");\n    }\n    return ListRange.fromViewport(this._list.length, this.itemHeight, clientHeight, scrollTop);\n  }\n  reRenderFullRange(range) {\n    removeChildren(this._listElement);\n    const fragment = document.createDocumentFragment();\n    const it = this._list[Symbol.iterator]();\n    this._childInstances.length = 0;\n    range.forEachInIterator(it, (item) => {\n      const child = this._childCreator(item);\n      this._childInstances.push(child);\n      fragment.appendChild(mountView(child, this._mountArgs));\n    });\n    this._listElement.appendChild(fragment);\n    this.adjustPadding(range);\n  }\n  renderUpdate(prevRange, newRange) {\n    if (newRange.intersects(prevRange)) {\n      for (const idxInList of prevRange.reverseIterable()) {\n        if (!newRange.containsIndex(idxInList)) {\n          const localIdx = idxInList - prevRange.start;\n          this.removeChild(localIdx);\n        }\n      }\n      newRange.forEachInIterator(this._list[Symbol.iterator](), (item, idxInList) => {\n        if (!prevRange.containsIndex(idxInList)) {\n          const localIdx = idxInList - newRange.start;\n          this.addChild(localIdx, item);\n        }\n      });\n      this.adjustPadding(newRange);\n    } else {\n      this.reRenderFullRange(newRange);\n    }\n  }\n  adjustPadding(range) {\n    const paddingTop = range.start * this.itemHeight;\n    const paddingBottom = (range.totalLength - range.end) * this.itemHeight;\n    const style = this._listElement.style;\n    style.paddingTop = `${paddingTop}px`;\n    style.paddingBottom = `${paddingBottom}px`;\n  }\n  mount() {\n    const listElement = super.mount();\n    this.scrollContainer = tag.div({ className: \"LazyListParent\" }, listElement);\n    this.scrollContainer.addEventListener(\"scroll\", this);\n    return this.scrollContainer;\n  }\n  unmount() {\n    this.root().removeEventListener(\"scroll\", this);\n    this.scrollContainer = void 0;\n    super.unmount();\n  }\n  root() {\n    return this.scrollContainer;\n  }\n  get _listElement() {\n    return super.root();\n  }\n  onAdd(idx, value) {\n    const result = this.renderRange.queryAdd(idx, value, this._list);\n    this.applyRemoveAddResult(result);\n  }\n  onRemove(idx, value) {\n    const result = this.renderRange.queryRemove(idx, this._list);\n    this.applyRemoveAddResult(result);\n  }\n  onMove(fromIdx, toIdx, value) {\n    const result = this.renderRange.queryMove(fromIdx, toIdx, value, this._list);\n    if (result) {\n      if (result.type === ResultType.Move) {\n        this.moveChild(this.renderRange.toLocalIndex(result.fromIdx), this.renderRange.toLocalIndex(result.toIdx));\n      } else {\n        this.applyRemoveAddResult(result);\n      }\n    }\n  }\n  onUpdate(i, value, params) {\n    if (this.renderRange.containsIndex(i)) {\n      this.updateChild(this.renderRange.toLocalIndex(i), value, params);\n    }\n  }\n  applyRemoveAddResult(result) {\n    if (result.type === ResultType.Remove || result.type === ResultType.RemoveAndAdd) {\n      this.removeChild(this.renderRange.toLocalIndex(result.removeIdx));\n    }\n    if (result.newRange) {\n      this.renderRange = result.newRange;\n      this.adjustPadding(this.renderRange);\n    }\n    if (result.type === ResultType.Add || result.type === ResultType.RemoveAndAdd) {\n      this.addChild(this.renderRange.toLocalIndex(result.addIdx), result.value);\n    }\n  }\n}\nclass MemberTileView extends TemplateView {\n  render(t, vm) {\n    return t.li({ className: \"MemberTileView\" }, t.a({ href: vm.detailsUrl }, [\n      t.view(new AvatarView(vm, 32)),\n      t.div({ className: \"MemberTileView_name\" }, (vm2) => vm2.name)\n    ]));\n  }\n}\nclass MemberListView extends LazyListView {\n  constructor(vm) {\n    super({\n      list: vm.memberTileViewModels,\n      className: \"MemberListView\",\n      itemHeight: 40\n    }, (tileViewModel) => new MemberTileView(tileViewModel));\n  }\n}\nclass MemberDetailsView extends TemplateView {\n  render(t, vm) {\n    const securityNodes = [\n      t.p(vm.isEncrypted ? vm.i18n`Messages in this room are end-to-end encrypted.` : vm.i18n`Messages in this room are not end-to-end encrypted.`)\n    ];\n    if (vm.features.crossSigning) {\n      securityNodes.push(t.div({ className: \"MemberDetailsView_shield_container\" }, [\n        t.span({ className: (vm2) => `MemberDetailsView_shield_${vm2.trustShieldColor}` }),\n        t.p({ className: \"MemberDetailsView_shield_description\" }, (vm2) => vm2.trustDescription)\n      ]));\n    }\n    return t.div({ className: \"MemberDetailsView\" }, [\n      t.view(new AvatarView(vm, 128)),\n      t.div({ className: \"MemberDetailsView_name\" }, t.h2((vm2) => vm2.name)),\n      t.div({ className: \"MemberDetailsView_id\" }, vm.userId),\n      this._createSection(t, vm.i18n`Role`, (vm2) => vm2.role),\n      this._createSection(t, vm.i18n`Security`, securityNodes),\n      this._createOptions(t, vm)\n    ]);\n  }\n  _createSection(t, label, value) {\n    return t.div({ className: \"MemberDetailsView_section\" }, [\n      t.div({ className: \"MemberDetailsView_label\" }, label),\n      t.div({ className: \"MemberDetailsView_value\" }, value)\n    ]);\n  }\n  _createOptions(t, vm) {\n    const options = [\n      t.a({ href: vm.linkToUser, target: \"_blank\", rel: \"noopener\" }, vm.i18n`Open Link to User`),\n      t.button({ className: \"text\", onClick: () => vm.openDirectMessage() }, vm.i18n`Open direct message`)\n    ];\n    if (vm.features.crossSigning) {\n      const onClick = () => {\n        if (confirm(\"You don't want to do this with any account but a test account. This will cross-sign this user without verifying their keys first. You won't be able to undo this apart from resetting your cross-signing keys.\")) {\n          vm.signUser();\n        }\n      };\n      options.push(t.button({ className: \"text\", onClick }, vm.i18n`Cross-sign user (DO NOT USE, TESTING ONLY)`));\n    }\n    return t.div({ className: \"MemberDetailsView_section\" }, [\n      t.div({ className: \"MemberDetailsView_label\" }, vm.i18n`Options`),\n      t.div({ className: \"MemberDetailsView_options\" }, options)\n    ]);\n  }\n}\nclass RightPanelView extends TemplateView {\n  render(t) {\n    return t.div({ className: \"RightPanelView\" }, [\n      t.ifView((vm) => vm.activeViewModel, (vm) => new ButtonsView(vm)),\n      t.mapView((vm) => vm.activeViewModel, (vm) => this._viewFromType(vm))\n    ]);\n  }\n  _viewFromType(vm) {\n    const type = vm == null ? void 0 : vm.type;\n    switch (type) {\n      case \"room-details\":\n        return new RoomDetailsView(vm);\n      case \"member-list\":\n        return new MemberListView(vm);\n      case \"member-details\":\n        return new MemberDetailsView(vm);\n      default:\n        return new LoadingView();\n    }\n  }\n}\nclass ButtonsView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"RightPanelView_buttons\" }, [\n      t.button({\n        className: {\n          \"back\": true,\n          \"button-utility\": true,\n          \"hide\": !vm.activeViewModel.shouldShowBackButton\n        },\n        onClick: () => vm.showPreviousPanel()\n      }),\n      t.button({ className: \"close button-utility\", onClick: () => vm.closePanel() })\n    ]);\n  }\n}\nclass ReactionsView extends ListView {\n  constructor(reactionsViewModel) {\n    const options = {\n      className: \"Timeline_messageReactions\",\n      tagName: \"div\",\n      list: reactionsViewModel.reactions,\n      onItemClick: (reactionView) => reactionView.onClick()\n    };\n    super(options, (reactionVM) => new ReactionView(reactionVM));\n  }\n}\nclass ReactionView extends TemplateView {\n  render(t, vm) {\n    return t.button({\n      className: {\n        active: (vm2) => vm2.isActive,\n        pending: (vm2) => vm2.isPending\n      }\n    }, [vm.key, \" \", (vm2) => `${vm2.count}`]);\n  }\n  onClick() {\n    this.value.toggle();\n  }\n}\nclass BaseMessageView extends TemplateView {\n  constructor(value, viewClassForTile2, renderFlags, tagName = \"li\") {\n    super(value);\n    this._menuPopup = null;\n    this._tagName = tagName;\n    this._viewClassForTile = viewClassForTile2;\n    this._renderFlags = renderFlags;\n  }\n  get _interactive() {\n    var _a, _b;\n    return (_b = (_a = this._renderFlags) == null ? void 0 : _a.interactive) != null ? _b : true;\n  }\n  get _isReplyPreview() {\n    var _a;\n    return (_a = this._renderFlags) == null ? void 0 : _a.reply;\n  }\n  render(t, vm) {\n    const children = [this.renderMessageBody(t, vm)];\n    if (this._interactive) {\n      children.push(t.button({ className: \"Timeline_messageOptions\" }, \"\\u22EF\"));\n    }\n    const li = t.el(this._tagName, {\n      className: {\n        \"Timeline_message\": true,\n        own: vm.isOwn,\n        unsent: vm.isUnsent,\n        unverified: (vm2) => vm2.isUnverified,\n        disabled: !this._interactive,\n        continuation: (vm2) => vm2.isContinuation\n      },\n      \"data-event-id\": vm.eventId\n    }, children);\n    t.mapSideEffect((vm2) => vm2.isContinuation, (isContinuation, wasContinuation) => {\n      if (isContinuation && wasContinuation === false) {\n        li.removeChild(li.querySelector(\".Timeline_messageAvatar\"));\n        li.removeChild(li.querySelector(\".Timeline_messageSender\"));\n      } else if (!isContinuation && !this._isReplyPreview) {\n        const avatar = tag.a({ href: vm.memberPanelLink, className: \"Timeline_messageAvatar\" }, [renderStaticAvatar(vm, 30)]);\n        const sender = tag.div({\n          className: `Timeline_messageSender usercolor${vm.avatarColorNumber}`,\n          title: vm.sender\n        }, vm.displayName);\n        li.insertBefore(avatar, li.firstChild);\n        li.insertBefore(sender, li.firstChild);\n      }\n    });\n    let reactionsView = null;\n    t.mapSideEffect((vm2) => vm2.reactions, (reactions) => {\n      if (reactions && this._interactive && !reactionsView) {\n        reactionsView = new ReactionsView(reactions);\n        this.addSubView(reactionsView);\n        li.appendChild(mountView(reactionsView));\n      } else if (!reactions && reactionsView) {\n        li.removeChild(reactionsView.root());\n        reactionsView.unmount();\n        this.removeSubView(reactionsView);\n        reactionsView = null;\n      }\n    });\n    return li;\n  }\n  onClick(evt) {\n    if (evt.target.className === \"Timeline_messageOptions\") {\n      this._toggleMenu(evt.target);\n    }\n  }\n  _toggleMenu(button) {\n    if (this._menuPopup && this._menuPopup.isOpen) {\n      this._menuPopup.close();\n    } else {\n      const options = this.createMenuOptions(this.value);\n      if (!options.length) {\n        return;\n      }\n      this.root().classList.add(\"menuOpen\");\n      const onClose = () => this.root().classList.remove(\"menuOpen\");\n      this._menuPopup = new Popup(new Menu(options), onClose);\n      this._menuPopup.trackInTemplateView(this);\n      this._menuPopup.showRelativeTo(button, 2);\n    }\n  }\n  createMenuOptions(vm) {\n    const options = [];\n    if (vm.canReact && vm.shape !== \"redacted\" && !vm.isPending) {\n      options.push(new QuickReactionsMenuOption(vm));\n      options.push(Menu.option(vm.i18n`Reply`, () => vm.startReply()));\n    }\n    if (vm.canAbortSending) {\n      options.push(Menu.option(vm.i18n`Cancel`, () => vm.abortSending()));\n    } else if (vm.canRedact) {\n      options.push(Menu.option(vm.i18n`Delete`, () => vm.redact()).setDestructive());\n    }\n    options.push(Menu.option(vm.i18n`Copy matrix.to permalink`, () => vm.copyPermalink()));\n    return options;\n  }\n  renderMessageBody() {\n  }\n}\nclass QuickReactionsMenuOption {\n  constructor(vm) {\n    this._vm = vm;\n  }\n  toDOM(t) {\n    const emojiButtons = [\"\\u{1F44D}\", \"\\u{1F44E}\", \"\\u{1F604}\", \"\\u{1F389}\", \"\\u{1F615}\", \"\\u2764\\uFE0F\", \"\\u{1F680}\", \"\\u{1F440}\"].map((emoji) => {\n      return t.button({ onClick: () => this._vm.react(emoji) }, emoji);\n    });\n    const customButton = t.button({ onClick: () => {\n      const key = prompt(\"Enter your reaction (emoji)\");\n      if (key) {\n        this._vm.react(key);\n      }\n    } }, \"\\u2026\");\n    return t.li({ className: \"quick-reactions\" }, [...emojiButtons, customButton]);\n  }\n}\nclass ReplyPreviewView extends TemplateView {\n  constructor(vm, viewClassForTile2) {\n    super(vm);\n    this._viewClassForTile = viewClassForTile2;\n  }\n  render(t, vm) {\n    const TileView = this._viewClassForTile(vm);\n    if (!TileView) {\n      throw new Error(`Shape ${vm.shape} is unrecognized.`);\n    }\n    const view = new TileView(vm, this._viewClassForTile, { reply: true, interactive: false });\n    return t.div({ className: \"ReplyPreviewView\" }, t.blockquote([\n      t.a({ className: \"link\", href: vm.permaLink }, \"In reply to\"),\n      t.a({ className: \"pill\", href: vm.senderProfileLink }, [\n        renderStaticAvatar(vm, 12, void 0),\n        vm.displayName\n      ]),\n      t.br(),\n      t.view(view)\n    ]));\n  }\n}\nclass ReplyPreviewError extends TemplateView {\n  render(t) {\n    return t.blockquote({ className: \"ReplyPreviewView\" }, [\n      t.div({ className: \"Timeline_messageBody statusMessage\" }, \"This reply could not be found.\")\n    ]);\n  }\n}\nclass TextMessageView extends BaseMessageView {\n  renderMessageBody(t, vm) {\n    const time = t.time({ className: { hidden: !vm.time } }, vm.time);\n    const container2 = t.div({\n      className: {\n        \"Timeline_messageBody\": true,\n        statusMessage: (vm2) => vm2.shape === \"message-status\"\n      }\n    }, t.mapView((vm2) => vm2.replyTile, (replyTile) => {\n      if (this._isReplyPreview) {\n        return null;\n      } else if (vm.isReply && !replyTile) {\n        return new ReplyPreviewError();\n      } else if (replyTile) {\n        return new ReplyPreviewView(replyTile, this._viewClassForTile);\n      } else {\n        return null;\n      }\n    }));\n    const shouldRemove = (element) => (element == null ? void 0 : element.nodeType) !== Node.COMMENT_NODE && element.className !== \"ReplyPreviewView\";\n    t.mapSideEffect((vm2) => vm2.body, (body) => {\n      while (shouldRemove(container2.lastChild)) {\n        container2.removeChild(container2.lastChild);\n      }\n      for (const part of body.parts) {\n        container2.appendChild(renderPart(part));\n      }\n      container2.appendChild(time);\n    });\n    return container2;\n  }\n}\nfunction renderList(listBlock) {\n  const items = listBlock.items.map((item) => tag.li(renderParts(item)));\n  const start = listBlock.startOffset;\n  if (start) {\n    return tag.ol({ start }, items);\n  } else {\n    return tag.ul(items);\n  }\n}\nfunction renderImage(imagePart) {\n  const attributes = { src: imagePart.src };\n  if (imagePart.width) {\n    attributes.width = imagePart.width;\n  }\n  if (imagePart.height) {\n    attributes.height = imagePart.height;\n  }\n  if (imagePart.alt) {\n    attributes.alt = imagePart.alt;\n  }\n  if (imagePart.title) {\n    attributes.title = imagePart.title;\n  }\n  return tag.img(attributes);\n}\nfunction renderPill(pillPart) {\n  const classes = `avatar size-12 usercolor${pillPart.avatarColorNumber}`;\n  const avatar = tag.div({ class: classes }, text(pillPart.avatarInitials));\n  const children = renderParts(pillPart.children);\n  children.unshift(avatar);\n  return tag.a({ class: \"pill\", href: pillPart.href, rel: \"noopener\", target: \"_blank\" }, children);\n}\nfunction renderTable(tablePart) {\n  const children = [];\n  if (tablePart.head) {\n    const headers = tablePart.head.map((cell) => tag.th(renderParts(cell)));\n    children.push(tag.thead(tag.tr(headers)));\n  }\n  const rows = [];\n  for (const row of tablePart.body) {\n    const data = row.map((cell) => tag.td(renderParts(cell)));\n    rows.push(tag.tr(data));\n  }\n  children.push(tag.tbody(rows));\n  return tag.table(children);\n}\nconst formatFunction = {\n  header: (headerBlock) => tag[\"h\" + Math.min(6, headerBlock.level)](renderParts(headerBlock.inlines)),\n  codeblock: (codeBlock) => tag.pre(tag.code(text(codeBlock.text))),\n  table: (tableBlock) => renderTable(tableBlock),\n  code: (codePart) => tag.code(text(codePart.text)),\n  text: (textPart) => text(textPart.text),\n  link: (linkPart) => tag.a({ href: linkPart.url, className: \"link\", target: \"_blank\", rel: \"noopener\" }, renderParts(linkPart.inlines)),\n  pill: renderPill,\n  format: (formatPart) => tag[formatPart.format](renderParts(formatPart.children)),\n  rule: () => tag.hr(),\n  list: renderList,\n  image: renderImage,\n  newline: () => tag.br()\n};\nfunction renderPart(part) {\n  const f = formatFunction[part.type];\n  if (!f) {\n    return text(`[unknown part type ${part.type}]`);\n  }\n  return f(part);\n}\nfunction renderParts(parts) {\n  return Array.from(parts, renderPart);\n}\nclass BaseMediaView extends BaseMessageView {\n  renderMessageBody(t, vm) {\n    const heightRatioPercent = vm.height / vm.width * 100;\n    let spacerStyle = `padding-top: ${heightRatioPercent}%;`;\n    if (vm.platform.isIE11) {\n      spacerStyle = `height: ${vm.height}px`;\n    }\n    const children = [\n      t.div({ className: \"spacer\", style: spacerStyle }),\n      this.renderMedia(t, vm),\n      t.time(vm.time)\n    ];\n    const status = t.div({\n      className: {\n        status: true,\n        hidden: (vm2) => !vm2.status\n      }\n    }, (vm2) => vm2.status);\n    children.push(status);\n    if (vm.isPending) {\n      const progress = t.progress({\n        min: 0,\n        max: 100,\n        value: (vm2) => vm2.uploadPercentage,\n        className: { hidden: (vm2) => !vm2.isUploading }\n      });\n      children.push(progress);\n    }\n    return t.div({ className: \"Timeline_messageBody\" }, [\n      t.div({ className: \"media\", style: `max-width: ${vm.width}px`, \"data-testid\": \"media\" }, children),\n      t.if((vm2) => vm2.error, (t2) => t2.p({ className: \"error\" }, vm.error))\n    ]);\n  }\n  createMenuOptions(vm) {\n    const options = super.createMenuOptions(vm);\n    if (!vm.isPending) {\n      let label;\n      switch (vm.shape) {\n        case \"image\":\n          label = vm.i18n`Download image`;\n          break;\n        case \"video\":\n          label = vm.i18n`Download video`;\n          break;\n        default:\n          label = vm.i18n`Download media`;\n          break;\n      }\n      options.push(Menu.option(label, () => vm.downloadMedia()));\n    }\n    return options;\n  }\n}\nclass ImageView extends BaseMediaView {\n  renderMedia(t, vm) {\n    const img = t.img({\n      src: (vm2) => vm2.thumbnailUrl,\n      alt: (vm2) => vm2.label,\n      title: (vm2) => vm2.label,\n      style: `max-width: ${vm.width}px; max-height: ${vm.height}px;`\n    });\n    return vm.isPending || !vm.lightboxUrl ? img : t.a({ href: vm.lightboxUrl }, img);\n  }\n}\nfunction domEventAsPromise(element, successEvent) {\n  return new Promise((resolve, reject) => {\n    let detach;\n    const handleError = (evt) => {\n      detach();\n      reject(evt.target.error);\n    };\n    const handleSuccess = () => {\n      detach();\n      resolve();\n    };\n    detach = () => {\n      element.removeEventListener(successEvent, handleSuccess);\n      element.removeEventListener(\"error\", handleError);\n    };\n    element.addEventListener(successEvent, handleSuccess);\n    element.addEventListener(\"error\", handleError);\n  });\n}\nasync function copyPlaintext(text2) {\n  var _a;\n  try {\n    if ((_a = navigator == null ? void 0 : navigator.clipboard) == null ? void 0 : _a.writeText) {\n      await navigator.clipboard.writeText(text2);\n      return true;\n    } else {\n      const textArea = document.createElement(\"textarea\");\n      textArea.value = text2;\n      textArea.style.top = \"0\";\n      textArea.style.left = \"0\";\n      textArea.style.position = \"fixed\";\n      document.body.appendChild(textArea);\n      const selection = document.getSelection();\n      if (!selection) {\n        console.error(\"copyPlaintext: Unable to copy text to clipboard in fallback mode because `selection` was null/undefined\");\n        return false;\n      }\n      const range = document.createRange();\n      range.selectNode(textArea);\n      selection.removeAllRanges();\n      selection.addRange(range);\n      const successful = document.execCommand(\"copy\");\n      selection.removeAllRanges();\n      document.body.removeChild(textArea);\n      if (!successful) {\n        console.error(\"copyPlaintext: Unable to copy text to clipboard in fallback mode because the `copy` command is unsupported or disabled\");\n      }\n      return successful;\n    }\n  } catch (err) {\n    console.error(\"copyPlaintext: Ran into an error\", err);\n  }\n  return false;\n}\nclass VideoView extends BaseMediaView {\n  renderMedia(t) {\n    const video = t.video({\n      src: (vm) => vm.videoUrl || `data:${vm.mimeType},`,\n      title: (vm) => vm.label,\n      controls: true,\n      preload: \"none\",\n      poster: (vm) => vm.thumbnailUrl,\n      onPlay: this._onPlay.bind(this),\n      style: (vm) => `max-width: ${vm.width}px; max-height: ${vm.height}px;${vm.isPending ? \"z-index: -1\" : \"\"}`\n    });\n    video.addEventListener(\"error\", this._onError.bind(this));\n    return video;\n  }\n  async _onPlay(evt) {\n    const vm = this.value;\n    if (!vm.videoUrl) {\n      try {\n        const video = evt.target;\n        await vm.loadVideo();\n        const loadPromise = domEventAsPromise(video, \"loadeddata\");\n        video.load();\n        await loadPromise;\n        video.play();\n      } catch (err) {\n      }\n    }\n  }\n  _onError(evt) {\n    const vm = this.value;\n    const video = evt.target;\n    const err = video.error;\n    if (err instanceof window.MediaError && err.code === 4) {\n      if (!video.src.startsWith(\"data:\")) {\n        vm.setViewError(new Error(`this browser does not support videos of type ${vm.mimeType}.`));\n      } else {\n        return;\n      }\n    } else {\n      vm.setViewError(err);\n    }\n  }\n}\nclass FileView extends BaseMessageView {\n  renderMessageBody(t, vm) {\n    const children = [];\n    if (vm.isPending) {\n      children.push((vm2) => vm2.label);\n    } else {\n      children.push(t.button({ className: \"link\", onClick: () => vm.download() }, (vm2) => vm2.label), t.time(vm.time));\n    }\n    return t.p({ className: \"Timeline_messageBody statusMessage\" }, children);\n  }\n}\nclass LocationView extends BaseMessageView {\n  renderMessageBody(t, vm) {\n    return t.p({ className: \"Timeline_messageBody statusMessage\" }, [\n      t.span(vm.label),\n      t.a({ className: \"Timeline_locationLink\", href: vm.mapsLink, target: \"_blank\", rel: \"noopener\" }, vm.i18n`Open in maps`),\n      t.time(vm.time)\n    ]);\n  }\n}\nclass MissingAttachmentView extends BaseMessageView {\n  renderMessageBody(t, vm) {\n    return t.p({ className: \"Timeline_messageBody statusMessage\" }, vm.label);\n  }\n}\nclass AnnouncementView extends TemplateView {\n  constructor(vm) {\n    super(vm);\n  }\n  render(t, vm) {\n    return t.li({\n      className: \"AnnouncementView\",\n      \"data-event-id\": vm.eventId\n    }, t.div((vm2) => vm2.announcement));\n  }\n  onClick() {\n  }\n}\nclass RedactedView extends BaseMessageView {\n  renderMessageBody(t) {\n    return t.p({ className: \"Timeline_messageBody statusMessage\" }, (vm) => vm.description);\n  }\n  createMenuOptions(vm) {\n    const options = super.createMenuOptions(vm);\n    if (vm.isRedacting) {\n      options.push(Menu.option(vm.i18n`Cancel`, () => vm.abortPendingRedaction()));\n    }\n    return options;\n  }\n}\nvar TileShape = /* @__PURE__ */ ((TileShape2) => {\n  TileShape2[\"Message\"] = \"message\";\n  TileShape2[\"MessageStatus\"] = \"message-status\";\n  TileShape2[\"Announcement\"] = \"announcement\";\n  TileShape2[\"File\"] = \"file\";\n  TileShape2[\"Gap\"] = \"gap\";\n  TileShape2[\"Image\"] = \"image\";\n  TileShape2[\"Location\"] = \"location\";\n  TileShape2[\"MissingAttachment\"] = \"missing-attachment\";\n  TileShape2[\"Redacted\"] = \"redacted\";\n  TileShape2[\"Video\"] = \"video\";\n  TileShape2[\"DateHeader\"] = \"date-header\";\n  TileShape2[\"Call\"] = \"call\";\n  return TileShape2;\n})(TileShape || {});\nclass GapView extends TemplateView {\n  constructor(vm) {\n    super(vm);\n  }\n  render(t, vm) {\n    const className = {\n      GapView: true,\n      isLoading: (vm2) => vm2.isLoading,\n      isAtTop: (vm2) => vm2.isAtTop\n    };\n    return t.li({ className }, [\n      t.div({ class: \"GapView_container\" }, [\n        t.if((vm2) => vm2.showSpinner, (t2) => spinner(t2)),\n        t.span((vm2) => vm2.status)\n      ]),\n      t.if((vm2) => !!vm2.errorViewModel, (t2) => {\n        return t2.view(new ErrorView$1(vm.errorViewModel, { inline: true }));\n      })\n    ]);\n  }\n  onClick() {\n  }\n}\nclass CallTileView extends TemplateView {\n  render(t, vm) {\n    return t.li({ className: \"CallTileView AnnouncementView\" }, t.div([\n      t.if((vm2) => vm2.errorViewModel, (t2) => {\n        return t2.div({ className: \"CallTileView_error\" }, t2.view(new ErrorView$1(vm.errorViewModel, { inline: true })));\n      }),\n      t.div([\n        t.div({ className: \"CallTileView_title\" }, (vm2) => vm2.title),\n        t.div({ className: \"CallTileView_subtitle\" }, [\n          vm.typeLabel,\n          \" \\u2022 \",\n          t.span({ className: \"CallTileView_memberCount\" }, (vm2) => vm2.memberCount)\n        ]),\n        t.view(new ListView({ className: \"CallTileView_members\", tagName: \"div\", list: vm.memberViewModels }, (vm2) => {\n          return new AvatarView(vm2, 24);\n        })),\n        t.div((vm2) => vm2.duration),\n        t.div([\n          t.button({ className: \"CallTileView_join button-action primary\", hidden: (vm2) => !vm2.canJoin }, \"Join\"),\n          t.button({ className: \"CallTileView_leave button-action primary destructive\", hidden: (vm2) => !vm2.canLeave }, \"Leave\")\n        ])\n      ])\n    ]));\n  }\n  onClick(evt) {\n    if (evt.target.classList.contains(\"CallTileView_join\")) {\n      this.value.join();\n    } else if (evt.target.classList.contains(\"CallTileView_leave\")) {\n      this.value.leave();\n    }\n  }\n}\nclass DateHeaderView extends TemplateView {\n  constructor(vm) {\n    super(vm);\n  }\n  render(t, vm) {\n    return t.h2({ className: \"DateHeader\" }, t.time({ dateTime: vm.machineReadableDate }, vm.relativeDate));\n  }\n  onClick() {\n  }\n}\nfunction viewClassForTile(vm) {\n  switch (vm.shape) {\n    case TileShape.Gap:\n      return GapView;\n    case TileShape.Announcement:\n      return AnnouncementView;\n    case TileShape.Message:\n    case TileShape.MessageStatus:\n      return TextMessageView;\n    case TileShape.Image:\n      return ImageView;\n    case TileShape.Video:\n      return VideoView;\n    case TileShape.File:\n      return FileView;\n    case TileShape.Location:\n      return LocationView;\n    case TileShape.MissingAttachment:\n      return MissingAttachmentView;\n    case TileShape.Redacted:\n      return RedactedView;\n    case TileShape.Call:\n      return CallTileView;\n    case TileShape.DateHeader:\n      return DateHeaderView;\n    default:\n      throw new Error(`Tiles of shape \"${vm.shape}\" are not supported, check the tileClassForEntry function in the view model`);\n  }\n}\nclass JoinRoomView extends TemplateView {\n  render(t, vm) {\n    const input = t.input({\n      type: \"text\",\n      name: \"id\",\n      id: \"id\",\n      placeholder: vm.i18n`Enter a room id or alias`,\n      disabled: (vm2) => vm2.joinInProgress\n    });\n    return t.main({ className: \"middle\" }, t.div({ className: \"JoinRoomView centered-column\" }, [\n      t.h2(\"Join room\"),\n      t.form({ className: \"JoinRoomView_detailsForm form\", onSubmit: (evt) => this.onSubmit(evt, input.value) }, [\n        t.div({ className: \"vertical-layout\" }, [\n          t.div({ className: \"stretch form-row text\" }, [\n            t.label({ for: \"id\" }, vm.i18n`Room id`),\n            input\n          ])\n        ]),\n        t.div({ className: \"button-row\" }, [\n          t.button({\n            className: \"button-action primary\",\n            type: \"submit\",\n            disabled: (vm2) => vm2.joinInProgress\n          }, vm.i18n`Join`)\n        ]),\n        t.map((vm2) => vm2.status, (status, t2) => {\n          return t2.div({ className: \"JoinRoomView_status\" }, [\n            spinner(t2, { hidden: (vm2) => !vm2.joinInProgress }),\n            t2.span(status)\n          ]);\n        })\n      ])\n    ]));\n  }\n  onSubmit(evt, id) {\n    evt.preventDefault();\n    this.value.join(id);\n  }\n}\nclass WaitingForOtherUserView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"WaitingForOtherUserView\" }, [\n      t.div({ className: \"WaitingForOtherUserView__heading\" }, [\n        spinner(t),\n        t.h2({ className: \"WaitingForOtherUserView__title\" }, vm.i18n`Waiting for any of your device to accept the verification request`)\n      ]),\n      t.p({ className: \"WaitingForOtherUserView__description\" }, vm.i18n`Accept the request from the device you wish to verify!`),\n      t.div({ className: \"WaitingForOtherUserView__actions\" }, t.button({\n        className: {\n          \"button-action\": true,\n          \"primary\": true,\n          \"destructive\": true\n        },\n        onclick: () => vm.cancel()\n      }, \"Cancel\"))\n    ]);\n  }\n}\nclass VerificationCancelledView extends TemplateView {\n  render(t, vm) {\n    const headerTextStart = vm.isCancelledByUs ? \"You\" : \"The other device\";\n    return t.div({\n      className: \"VerificationCancelledView\"\n    }, [\n      t.h2({ className: \"VerificationCancelledView__title\" }, vm.i18n`${headerTextStart} cancelled the verification!`),\n      t.p({ className: \"VerificationCancelledView__description\" }, vm.i18n`${this.getDescriptionFromCancellationCode(vm.cancelCode, vm.isCancelledByUs)}`),\n      t.div({ className: \"VerificationCancelledView__actions\" }, [\n        t.button({\n          className: {\n            \"button-action\": true,\n            \"primary\": true\n          },\n          onclick: () => vm.gotoSettings()\n        }, \"Got it\")\n      ])\n    ]);\n  }\n  getDescriptionFromCancellationCode(code, isCancelledByUs) {\n    var _a;\n    const descriptionsWhenWeCancelled = {\n      [CancelReason.InvalidMessage]: \"You other device sent an invalid message.\",\n      [CancelReason.KeyMismatch]: \"The key could not be verified.\",\n      [CancelReason.TimedOut]: \"The verification process timed out.\",\n      [CancelReason.UnexpectedMessage]: \"Your other device sent an unexpected message.\",\n      [CancelReason.UnknownMethod]: \"Your other device is using an unknown method for verification.\",\n      [CancelReason.UnknownTransaction]: \"Your other device sent a message with an unknown transaction id.\",\n      [CancelReason.UserMismatch]: \"The expected user did not match the user verified.\",\n      [CancelReason.MismatchedCommitment]: \"The hash commitment does not match.\",\n      [CancelReason.MismatchedSAS]: \"The emoji/decimal did not match.\"\n    };\n    const descriptionsWhenTheyCancelled = {\n      [CancelReason.UserCancelled]: \"Your other device cancelled the verification!\",\n      [CancelReason.InvalidMessage]: \"Invalid message sent to the other device.\",\n      [CancelReason.KeyMismatch]: \"The other device could not verify our keys\",\n      [CancelReason.TimedOut]: \"The verification process timed out.\",\n      [CancelReason.UnexpectedMessage]: \"Unexpected message sent to the other device.\",\n      [CancelReason.UnknownMethod]: \"Your other device does not understand the method you chose\",\n      [CancelReason.UnknownTransaction]: \"Your other device rejected our message.\",\n      [CancelReason.UserMismatch]: \"The expected user did not match the user verified.\",\n      [CancelReason.MismatchedCommitment]: \"Your other device was not able to verify the hash commitment\",\n      [CancelReason.MismatchedSAS]: \"The emoji/decimal did not match.\"\n    };\n    const map = isCancelledByUs ? descriptionsWhenWeCancelled : descriptionsWhenTheyCancelled;\n    return (_a = map[code]) != null ? _a : \"\";\n  }\n}\nclass SelectMethodView extends TemplateView {\n  render(t) {\n    return t.div({ className: \"SelectMethodView\" }, [\n      t.map((vm) => vm.hasProceeded, (hasProceeded, t2, vm) => {\n        if (hasProceeded) {\n          return spinner(t2);\n        } else\n          return t2.div([\n            t2.div({ className: \"SelectMethodView__heading\" }, [\n              t2.h2({ className: \"SelectMethodView__title\" }, vm.i18n`Verify device '${vm.deviceName}' by comparing emojis?`)\n            ]),\n            t2.p({ className: \"SelectMethodView__description\" }, vm.i18n`You are about to verify your other device by comparing emojis.`),\n            t2.div({ className: \"SelectMethodView__actions\" }, [\n              t2.button({\n                className: {\n                  \"button-action\": true,\n                  primary: true,\n                  destructive: true\n                },\n                onclick: () => vm.cancel()\n              }, \"Cancel\"),\n              t2.button({\n                className: {\n                  \"button-action\": true,\n                  primary: true\n                },\n                onclick: () => vm.proceed()\n              }, \"Proceed\")\n            ])\n          ]);\n      })\n    ]);\n  }\n}\nclass VerifyEmojisView extends TemplateView {\n  render(t, vm) {\n    const emojiList = vm.emojis.reduce((acc, [emoji, name]) => {\n      const e = t.div({ className: \"EmojiContainer\" }, [\n        t.div({ className: \"EmojiContainer__emoji\" }, emoji),\n        t.div({ className: \"EmojiContainer__name\" }, name)\n      ]);\n      acc.push(e);\n      return acc;\n    }, []);\n    const emojiCollection = t.div({ className: \"EmojiCollection\" }, emojiList);\n    return t.div({ className: \"VerifyEmojisView\" }, [\n      t.div({ className: \"VerifyEmojisView__heading\" }, [\n        t.h2({ className: \"VerifyEmojisView__title\" }, vm.i18n`Do the emojis match?`)\n      ]),\n      t.p({ className: \"VerifyEmojisView__description\" }, vm.i18n`Confirm the emoji below are displayed on both devices, in the same order:`),\n      t.div({ className: \"VerifyEmojisView__emojis\" }, emojiCollection),\n      t.map((vm2) => vm2.isWaiting, (isWaiting, t2, vm2) => {\n        if (isWaiting) {\n          return t2.div({ className: \"VerifyEmojisView__waiting\" }, [\n            spinner(t2),\n            t2.span(vm2.i18n`Waiting for you to verify on your other device`)\n          ]);\n        } else {\n          return t2.div({ className: \"VerifyEmojisView__actions\" }, [\n            t2.button({\n              className: {\n                \"button-action\": true,\n                primary: true,\n                destructive: true\n              },\n              onclick: () => vm2.setEmojiMatch(false)\n            }, vm2.i18n`They don't match`),\n            t2.button({\n              className: {\n                \"button-action\": true,\n                primary: true\n              },\n              onclick: () => vm2.setEmojiMatch(true)\n            }, vm2.i18n`They match`)\n          ]);\n        }\n      })\n    ]);\n  }\n}\nclass VerificationCompleteView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"VerificationCompleteView\" }, [\n      t.div({ className: \"VerificationCompleteView__icon\" }),\n      t.div({ className: \"VerificationCompleteView__heading\" }, [\n        t.h2({ className: \"VerificationCompleteView__title\" }, vm.i18n`Verification completed successfully!`)\n      ]),\n      t.p({ className: \"VerificationCompleteView__description\" }, vm.i18n`You successfully verified device ${vm.otherDeviceId}`),\n      t.div({ className: \"VerificationCompleteView__actions\" }, [\n        t.button({\n          className: {\n            \"button-action\": true,\n            \"primary\": true\n          },\n          onclick: () => vm.gotoSettings()\n        }, \"Got it\")\n      ])\n    ]);\n  }\n}\nclass DeviceVerificationView extends TemplateView {\n  render(t) {\n    return t.div({\n      className: {\n        \"middle\": true,\n        \"DeviceVerificationView\": true\n      }\n    }, [\n      t.mapView((vm) => vm.currentStageViewModel, (vm) => {\n        switch (vm == null ? void 0 : vm.kind) {\n          case \"waiting-for-user\":\n            return new WaitingForOtherUserView(vm);\n          case \"verification-cancelled\":\n            return new VerificationCancelledView(vm);\n          case \"select-method\":\n            return new SelectMethodView(vm);\n          case \"verify-emojis\":\n            return new VerifyEmojisView(vm);\n          case \"verification-completed\":\n            return new VerificationCompleteView(vm);\n          default:\n            return null;\n        }\n      })\n    ]);\n  }\n}\nclass CallToastNotificationView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"CallToastNotificationView\" }, [\n      t.div({ className: \"CallToastNotificationView__top\" }, [\n        t.view(new AvatarView(vm, 24)),\n        t.span({ className: \"CallToastNotificationView__name\" }, (vm2) => vm2.roomName),\n        t.button({\n          className: \"button-action CallToastNotificationView__dismiss-btn\",\n          onClick: () => vm.dismiss()\n        })\n      ]),\n      t.div({ className: \"CallToastNotificationView__description\" }, [\n        t.span(vm.i18n`Video call started`)\n      ]),\n      t.div({ className: \"CallToastNotificationView__info\" }, [\n        t.span({ className: \"CallToastNotificationView__call-type\" }, vm.i18n`Video`),\n        t.span({ className: \"CallToastNotificationView__member-count\" }, (vm2) => vm2.memberCount)\n      ]),\n      t.div({ className: \"CallToastNotificationView__action\" }, [\n        t.button({\n          className: \"button-action primary\",\n          onClick: () => vm.join()\n        }, vm.i18n`Join`)\n      ]),\n      t.if((vm2) => !!vm2.errorViewModel, (t2) => {\n        return t2.div({ className: \"CallView_error\" }, t2.view(new ErrorView$1(vm.errorViewModel)));\n      })\n    ]);\n  }\n}\nclass VerificationToastNotificationView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"VerificationToastNotificationView\" }, [\n      t.div({ className: \"VerificationToastNotificationView__top\" }, [\n        t.span({ className: \"VerificationToastNotificationView__title\" }, vm.i18n`Device Verification`),\n        t.button({\n          className: \"button-action VerificationToastNotificationView__dismiss-btn\",\n          onClick: () => vm.dismiss()\n        })\n      ]),\n      t.div({ className: \"VerificationToastNotificationView__description\" }, [\n        t.span(vm.i18n`Do you want to verify device ${vm.otherDeviceId}?`)\n      ]),\n      t.div({ className: \"VerificationToastNotificationView__action\" }, [\n        t.button({\n          className: \"button-action primary destructive\",\n          onClick: () => vm.dismiss()\n        }, vm.i18n`Ignore`),\n        t.button({\n          className: \"button-action primary\",\n          onClick: () => vm.accept()\n        }, vm.i18n`Accept`)\n      ])\n    ]);\n  }\n}\nfunction toastViewModelToView(vm) {\n  switch (vm.kind) {\n    case \"calls\":\n      return new CallToastNotificationView(vm);\n    case \"verification\":\n      return new VerificationToastNotificationView(vm);\n    default:\n      throw new Error(`Cannot find view class for notification kind ${vm.kind}`);\n  }\n}\nclass ToastCollectionView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"ToastCollectionView\" }, [\n      t.ifView((vm2) => !!vm2.toastViewModels, (t2) => {\n        return new ListView({\n          list: vm.toastViewModels,\n          parentProvidesUpdates: false\n        }, (vm2) => toastViewModelToView(vm2));\n      })\n    ]);\n  }\n}\nclass SessionView extends TemplateView {\n  render(t, vm) {\n    return t.div({\n      className: {\n        \"SessionView\": true,\n        \"middle-shown\": (vm2) => !!vm2.activeMiddleViewModel,\n        \"right-shown\": (vm2) => !!vm2.rightPanelViewModel\n      }\n    }, [\n      t.view(new ToastCollectionView(vm.toastCollectionViewModel)),\n      t.view(new SessionStatusView(vm.sessionStatusViewModel)),\n      t.view(new LeftPanelView(vm.leftPanelViewModel)),\n      t.mapView((vm2) => vm2.activeMiddleViewModel, () => {\n        if (vm.roomGridViewModel) {\n          return new RoomGridView(vm.roomGridViewModel, viewClassForTile);\n        } else if (vm.settingsViewModel) {\n          return new SettingsView(vm.settingsViewModel);\n        } else if (vm.createRoomViewModel) {\n          return new CreateRoomView(vm.createRoomViewModel);\n        } else if (vm.joinRoomViewModel) {\n          return new JoinRoomView(vm.joinRoomViewModel);\n        } else if (vm.verificationViewModel) {\n          return new DeviceVerificationView(vm.verificationViewModel);\n        } else if (vm.currentRoomViewModel) {\n          if (vm.currentRoomViewModel.kind === \"invite\") {\n            return new InviteView(vm.currentRoomViewModel);\n          } else if (vm.currentRoomViewModel.kind === \"room\") {\n            return new RoomView(vm.currentRoomViewModel, viewClassForTile);\n          } else if (vm.currentRoomViewModel.kind === \"roomBeingCreated\") {\n            return new RoomBeingCreatedView(vm.currentRoomViewModel);\n          } else {\n            return new UnknownRoomView(vm.currentRoomViewModel);\n          }\n        } else {\n          return new StaticView((t2) => t2.div({ className: \"room-placeholder\" }, t2.h2(vm.i18n`Choose a room on the left side.`)));\n        }\n      }),\n      t.mapView((vm2) => vm2.lightboxViewModel, (lightboxViewModel) => lightboxViewModel ? new LightboxView(lightboxViewModel) : null),\n      t.mapView((vm2) => vm2.rightPanelViewModel, (rightPanelViewModel) => rightPanelViewModel ? new RightPanelView(rightPanelViewModel) : null)\n    ]);\n  }\n}\nfunction hydrogenGithubLink(t) {\n  {\n    return t.a({ target: \"_blank\", href: \"https://github.com/vector-im/hydrogen-web\" }, \"Hydrogen on Github\");\n  }\n}\nclass PasswordLoginView extends TemplateView {\n  render(t, vm) {\n    const disabled = (vm2) => !!vm2.isBusy;\n    const username = t.input({\n      id: \"username\",\n      type: \"text\",\n      placeholder: vm.i18n`Username`,\n      disabled\n    });\n    const password = t.input({\n      id: \"password\",\n      type: \"password\",\n      placeholder: vm.i18n`Password`,\n      disabled\n    });\n    return t.div({ className: \"PasswordLoginView form\" }, [\n      t.if((vm2) => vm2.error, (t2) => t2.div({ className: \"error\" }, (vm2) => vm2.error)),\n      t.form({\n        onSubmit: (evnt) => {\n          evnt.preventDefault();\n          vm.login(username.value, password.value);\n        }\n      }, [\n        t.if((vm2) => vm2.errorMessage, (t2, vm2) => t2.p({ className: \"error\" }, vm2.i18n(vm2.errorMessage))),\n        t.div({ className: \"form-row text\" }, [t.label({ for: \"username\" }, vm.i18n`Username`), username]),\n        t.div({ className: \"form-row text\" }, [t.label({ for: \"password\" }, vm.i18n`Password`), password]),\n        t.div({ className: \"button-row\" }, [\n          t.button({\n            className: \"button-action primary\",\n            type: \"submit\",\n            disabled\n          }, vm.i18n`Log In`)\n        ])\n      ])\n    ]);\n  }\n}\nclass AccountSetupView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"Settings\" }, [\n      t.h3(vm.i18n`Restore your encrypted history?`),\n      t.ifView((vm2) => vm2.decryptDehydratedDeviceViewModel, (vm2) => new KeyBackupSettingsView(vm2.decryptDehydratedDeviceViewModel)),\n      t.map((vm2) => vm2.deviceDecrypted, (decrypted, t2) => {\n        if (decrypted) {\n          return t2.p(vm.i18n`That worked out, you're good to go!`);\n        } else {\n          return t2.p(vm.i18n`This will claim the dehydrated device ${vm.dehydratedDeviceId}, and will set up a new one.`);\n        }\n      }),\n      t.div({ className: \"button-row\" }, [\n        t.button({\n          className: \"button-action primary\",\n          onClick: () => {\n            vm.finish();\n          },\n          type: \"button\"\n        }, (vm2) => vm2.deviceDecrypted ? vm2.i18n`Continue` : vm2.i18n`Continue without restoring`)\n      ])\n    ]);\n  }\n}\nclass SessionLoadStatusView extends TemplateView {\n  render(t) {\n    const exportLogsButtonIfFailed = t.if((vm) => vm.hasError, (t2, vm) => {\n      return t2.button({\n        onClick: () => vm.exportLogs()\n      }, vm.i18n`Export logs`);\n    });\n    const logoutButtonIfFailed = t.if((vm) => vm.hasError, (t2, vm) => {\n      return t2.button({\n        onClick: () => vm.logout()\n      }, vm.i18n`Log out`);\n    });\n    return t.div({ className: \"SessionLoadStatusView\" }, [\n      t.p({ className: \"status\" }, [\n        spinner(t, { hidden: (vm) => !vm.loading }),\n        t.p((vm) => vm.loadLabel),\n        exportLogsButtonIfFailed,\n        logoutButtonIfFailed\n      ]),\n      t.ifView((vm) => vm.accountSetupViewModel, (vm) => new AccountSetupView(vm.accountSetupViewModel))\n    ]);\n  }\n}\nclass CompleteSSOView extends TemplateView {\n  render(t) {\n    return t.div({ className: \"CompleteSSOView\" }, [\n      t.p({ className: \"CompleteSSOView_title\" }, \"Finishing up your SSO Login\"),\n      t.if((vm) => vm.errorMessage, (t2, vm) => t2.p({ className: \"error\" }, vm.i18n(vm.errorMessage))),\n      t.mapView((vm) => vm.loadViewModel, (loadViewModel) => loadViewModel ? new SessionLoadStatusView(loadViewModel) : null)\n    ]);\n  }\n}\nclass LoginView extends TemplateView {\n  render(t, vm) {\n    const disabled = (vm2) => vm2.isBusy;\n    return t.div({ className: \"PreSessionScreen\" }, [\n      t.button({\n        className: \"button-utility LoginView_back\",\n        onClick: () => vm.goBack(),\n        disabled\n      }),\n      t.div({ className: \"logo\" }),\n      t.h1([vm.i18n`Sign In`]),\n      t.mapView((vm2) => vm2.completeSSOLoginViewModel, (vm2) => vm2 ? new CompleteSSOView(vm2) : null),\n      t.if((vm2) => vm2.showHomeserver, (t2, vm2) => t2.div({ className: \"LoginView_sso form-row text\" }, [\n        t2.label({ for: \"homeserver\" }, vm2.i18n`Homeserver`),\n        t2.input({\n          id: \"homeserver\",\n          type: \"text\",\n          placeholder: vm2.i18n`Your matrix homeserver`,\n          value: vm2.homeserver,\n          disabled,\n          onInput: (event2) => vm2.setHomeserver(event2.target.value),\n          onChange: () => vm2.queryHomeserver()\n        }),\n        t2.p({ className: {\n          LoginView_forwardInfo: true,\n          hidden: (vm3) => !vm3.resolvedHomeserver\n        } }, (vm3) => vm3.i18n`You will connect to ${vm3.resolvedHomeserver}.`),\n        t2.if((vm3) => vm3.errorMessage, (t3, vm3) => t3.p({ className: \"error\" }, vm3.i18n(vm3.errorMessage)))\n      ])),\n      t.if((vm2) => vm2.isFetchingLoginOptions, (t2) => t2.div({ className: \"LoginView_query-spinner\" }, [spinner(t2), t2.p(\"Fetching available login options...\")])),\n      t.mapView((vm2) => vm2.passwordLoginViewModel, (vm2) => vm2 ? new PasswordLoginView(vm2) : null),\n      t.if((vm2) => vm2.passwordLoginViewModel && vm2.startSSOLoginViewModel, (t2) => t2.p({ className: \"LoginView_separator\" }, vm.i18n`or`)),\n      t.mapView((vm2) => vm2.startSSOLoginViewModel, (vm2) => vm2 ? new StartSSOLoginView(vm2) : null),\n      t.mapView((vm2) => vm2.startOIDCLoginViewModel, (vm2) => vm2 ? new StartOIDCLoginView(vm2) : null),\n      t.if((vm2) => vm2.startOIDCLoginViewModel && vm2.startOIDCGuestLoginViewModel, (t2) => t2.p({ className: \"LoginView_separator\" }, vm.i18n`or`)),\n      t.mapView((vm2) => vm2.startOIDCGuestLoginViewModel, (vm2) => vm2 ? new StartOIDCGuestLoginView(vm2) : null),\n      t.mapView((vm2) => vm2.loadViewModel, (loadViewModel) => loadViewModel ? new SessionLoadStatusView(loadViewModel) : null),\n      t.p(hydrogenGithubLink(t))\n    ]);\n  }\n}\nclass StartSSOLoginView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"StartSSOLoginView\" }, t.button({\n      className: \"StartSSOLoginView_button button-action secondary\",\n      type: \"button\",\n      onClick: () => vm.startSSOLogin(),\n      disabled: (vm2) => vm2.isBusy\n    }, vm.i18n`Log in with SSO`));\n  }\n}\nclass StartOIDCLoginView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"StartOIDCLoginView\" }, t.a({\n      className: \"StartOIDCLoginView_button button-action primary\",\n      type: \"button\",\n      onClick: () => vm.startOIDCLogin(),\n      disabled: (vm2) => vm2.isBusy\n    }, vm.i18n`Continue`));\n  }\n}\nclass StartOIDCGuestLoginView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"StartOIDCGuestLoginView\" }, t.a({\n      className: \"StartOIDCGuestLoginView_button button-action primary\",\n      type: \"button\",\n      onClick: () => vm.startOIDCLogin(),\n      disabled: (vm2) => vm2.isBusy\n    }, vm.i18n`Continue as Guest`));\n  }\n}\nclass LogoutView extends TemplateView {\n  render(t, vm) {\n    const confirmView = new InlineTemplateView(vm, (t2) => {\n      return t2.div([\n        t2.p(\"Are you sure you want to log out?\"),\n        t2.div({ className: \"button-row\" }, [\n          t2.a({\n            className: \"button-action\",\n            type: \"submit\",\n            href: vm.cancelUrl\n          }, [\"Cancel\"]),\n          t2.button({\n            className: \"button-action primary destructive\",\n            type: \"submit\",\n            onClick: () => vm.logout()\n          }, vm.i18n`Log out`)\n        ])\n      ]);\n    });\n    const progressView = new InlineTemplateView(vm, (t2) => {\n      return t2.p({ className: \"status\", hidden: (vm2) => !vm2.showStatus }, [\n        spinner(t2, { hidden: (vm2) => !vm2.busy }),\n        t2.span((vm2) => vm2.status)\n      ]);\n    });\n    return t.div({ className: \"LogoutScreen\" }, [\n      t.div({ className: \"content\" }, [\n        t.mapView((vm2) => vm2.showConfirm, (showConfirm) => {\n          return showConfirm ? confirmView : progressView;\n        })\n      ])\n    ]);\n  }\n}\nclass ForcedLogoutView extends TemplateView {\n  render(t) {\n    return t.div({ className: \"LogoutScreen\" }, [\n      t.div({ className: \"content\" }, t.map((vm) => vm.showStatus, (showStatus, t2, vm) => {\n        if (showStatus) {\n          return t2.p({ className: \"status\" }, [\n            spinner(t2, { hidden: (vm2) => !vm2.showSpinner }),\n            t2.span((vm2) => vm2.status)\n          ]);\n        } else {\n          return t2.div([\n            t2.p(\"Your access token is no longer valid! You can reauthenticate in the next screen.\"),\n            t2.div({ className: \"button-row\" }, [\n              t2.button({\n                className: \"button-action primary\",\n                type: \"submit\",\n                onClick: () => vm.proceed()\n              }, vm.i18n`Proceed`)\n            ])\n          ]);\n        }\n      }))\n    ]);\n  }\n}\nclass SessionLoadView extends TemplateView {\n  render(t, vm) {\n    return t.div({ className: \"PreSessionScreen\" }, [\n      t.div({ className: \"logo\" }),\n      t.div({ className: \"SessionLoadView\" }, [\n        t.view(new SessionLoadStatusView(vm))\n      ]),\n      t.div({ className: { \"button-row\": true, hidden: (vm2) => vm2.loading } }, t.a({ className: \"button-action primary\", href: vm.backUrl }, vm.i18n`Go back`))\n    ]);\n  }\n}\nclass SessionPickerItemView extends TemplateView {\n  _onDeleteClick() {\n    if (confirm(\"Are you sure?\")) {\n      this.value.delete();\n    }\n  }\n  _onClearClick() {\n    if (confirm(\"Are you sure?\")) {\n      this.value.clear();\n    }\n  }\n  render(t, vm) {\n    return t.li([\n      t.a({ className: \"session-info\", href: vm.openUrl }, [\n        t.div({ className: `avatar usercolor${vm.avatarColorNumber}` }, (vm2) => vm2.avatarInitials),\n        t.div({ className: \"user-id\" }, (vm2) => vm2.label)\n      ])\n    ]);\n  }\n}\nclass SessionPickerView extends TemplateView {\n  render(t, vm) {\n    const sessionList = new ListView({\n      list: vm.sessions,\n      parentProvidesUpdates: false\n    }, (sessionInfo) => {\n      return new SessionPickerItemView(sessionInfo);\n    });\n    return t.div({ className: \"PreSessionScreen\" }, [\n      t.div({ className: \"logo\" }),\n      t.div({ className: \"SessionPickerView\" }, [\n        t.h1([\"Continue as \\u2026\"]),\n        t.view(sessionList),\n        t.div({ className: \"button-row\" }, [\n          t.a({\n            className: \"button-action primary\",\n            href: vm.cancelUrl\n          }, vm.i18n`Sign In`)\n        ]),\n        t.ifView((vm2) => vm2.loadViewModel, () => new SessionLoadStatusView(vm.loadViewModel)),\n        t.p(hydrogenGithubLink(t))\n      ])\n    ]);\n  }\n}\nclass RootView extends TemplateView {\n  render(t, vm) {\n    return t.mapView((vm2) => vm2.activeSection, (activeSection) => {\n      switch (activeSection) {\n        case \"error\":\n          return new StaticView((t2) => {\n            return t2.div({ className: \"StatusView\" }, [\n              t2.h1(\"Something went wrong\"),\n              t2.p(vm.errorText)\n            ]);\n          });\n        case \"session\":\n          return new SessionView(vm.sessionViewModel);\n        case \"login\":\n          return new LoginView(vm.loginViewModel);\n        case \"logout\":\n          return new LogoutView(vm.logoutViewModel);\n        case \"forced-logout\":\n          return new ForcedLogoutView(vm.forcedLogoutViewModel);\n        case \"picker\":\n          return new SessionPickerView(vm.sessionPickerViewModel);\n        case \"redirecting\":\n          return new StaticView((t2) => t2.p(\"Redirecting...\"));\n        case \"loading\":\n          return new SessionLoadView(vm.sessionLoadViewModel);\n        default:\n          throw new Error(`Unknown section: ${vm.activeSection}`);\n      }\n    });\n  }\n}\nclass Timeout {\n  constructor(ms) {\n    this._reject = null;\n    this._handle = null;\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._handle = setTimeout(() => {\n        this._reject = null;\n        resolve();\n      }, ms);\n    });\n  }\n  elapsed() {\n    return this._promise;\n  }\n  abort() {\n    if (this._reject) {\n      this._reject(new AbortError());\n      clearTimeout(this._handle);\n      this._handle = null;\n      this._reject = null;\n    }\n  }\n  dispose() {\n    this.abort();\n  }\n}\nclass Interval {\n  constructor(ms, callback) {\n    this._handle = setInterval(callback, ms);\n  }\n  dispose() {\n    if (this._handle) {\n      clearInterval(this._handle);\n      this._handle = null;\n    }\n  }\n}\nclass TimeMeasure {\n  constructor() {\n    this._start = window.performance.now();\n  }\n  measure() {\n    return window.performance.now() - this._start;\n  }\n}\nclass Clock {\n  createMeasure() {\n    return new TimeMeasure();\n  }\n  createTimeout(ms) {\n    return new Timeout(ms);\n  }\n  createInterval(callback, ms) {\n    return new Interval(ms, callback);\n  }\n  now() {\n    return Date.now();\n  }\n}\nclass ServiceWorkerHandler {\n  constructor() {\n    this._waitingForReply = /* @__PURE__ */ new Map();\n    this._messageIdCounter = 0;\n    this._navigation = null;\n    this._registration = null;\n    this._registrationPromise = null;\n    this._currentController = null;\n    this.haltRequests = false;\n  }\n  setNavigation(navigation) {\n    this._navigation = navigation;\n  }\n  registerAndStart(path) {\n    this._registrationPromise = (async () => {\n      navigator.serviceWorker.addEventListener(\"message\", this);\n      navigator.serviceWorker.addEventListener(\"controllerchange\", this);\n      this._registration = await navigator.serviceWorker.register(path);\n      await navigator.serviceWorker.ready;\n      this._currentController = navigator.serviceWorker.controller;\n      this._registration.addEventListener(\"updatefound\", this);\n      this._registrationPromise = null;\n      if (this._registration.waiting && this._registration.active) {\n        this._proposeUpdate();\n      }\n      console.log(\"Service Worker registered\");\n    })();\n  }\n  _onMessage(event2) {\n    const { data } = event2;\n    const replyTo = data.replyTo;\n    if (replyTo) {\n      const resolve = this._waitingForReply.get(replyTo);\n      if (resolve) {\n        this._waitingForReply.delete(replyTo);\n        resolve(data.payload);\n      }\n    }\n    if (data.type === \"hasSessionOpen\") {\n      const hasOpen = this._navigation.observe(\"session\").get() === data.payload.sessionId;\n      event2.source.postMessage({ replyTo: data.id, payload: hasOpen });\n    } else if (data.type === \"hasRoomOpen\") {\n      const hasSessionOpen = this._navigation.observe(\"session\").get() === data.payload.sessionId;\n      const hasRoomOpen = this._navigation.observe(\"room\").get() === data.payload.roomId;\n      event2.source.postMessage({ replyTo: data.id, payload: hasSessionOpen && hasRoomOpen });\n    } else if (data.type === \"closeSession\") {\n      const { sessionId } = data.payload;\n      this._closeSessionIfNeeded(sessionId).finally(() => {\n        event2.source.postMessage({ replyTo: data.id });\n      });\n    } else if (data.type === \"haltRequests\") {\n      this.haltRequests = true;\n      event2.source.postMessage({ replyTo: data.id });\n    } else if (data.type === \"openRoom\") {\n      this._navigation.push(\"room\", data.payload.roomId);\n    }\n  }\n  _closeSessionIfNeeded(sessionId) {\n    var _a;\n    const currentSession = (_a = this._navigation) == null ? void 0 : _a.path.get(\"session\");\n    if (sessionId && (currentSession == null ? void 0 : currentSession.value) === sessionId) {\n      return new Promise((resolve) => {\n        const unsubscribe = this._navigation.pathObservable.subscribe((path) => {\n          const session = path.get(\"session\");\n          if (!session || session.value !== sessionId) {\n            unsubscribe();\n            resolve();\n          }\n        });\n        this._navigation.push(\"session\");\n      });\n    } else {\n      return Promise.resolve();\n    }\n  }\n  async _proposeUpdate() {\n    if (document.hidden) {\n      return;\n    }\n    const version = await this._sendAndWaitForReply(\"version\", null, this._registration.waiting);\n    if (confirm(`Version ${version.version} (${version.buildHash}) is available. Reload to apply?`)) {\n      await this._sendAndWaitForReply(\"haltRequests\");\n      this._send(\"skipWaiting\", null, this._registration.waiting);\n    }\n  }\n  handleEvent(event2) {\n    switch (event2.type) {\n      case \"message\":\n        this._onMessage(event2);\n        break;\n      case \"updatefound\":\n        this._registration.installing.addEventListener(\"statechange\", this);\n        break;\n      case \"statechange\": {\n        if (event2.target.state === \"installed\") {\n          this._proposeUpdate();\n          event2.target.removeEventListener(\"statechange\", this);\n        }\n        break;\n      }\n      case \"controllerchange\":\n        if (!this._currentController) {\n          this._currentController = navigator.serviceWorker.controller;\n        } else {\n          document.location.reload();\n        }\n        break;\n    }\n  }\n  async _send(type, payload, worker = void 0) {\n    if (this._registrationPromise) {\n      await this._registrationPromise;\n    }\n    if (!worker) {\n      worker = this._registration.active;\n    }\n    worker.postMessage({ type, payload });\n  }\n  async _sendAndWaitForReply(type, payload, worker = void 0) {\n    if (this._registrationPromise) {\n      await this._registrationPromise;\n    }\n    if (!worker) {\n      worker = this._registration.active;\n    }\n    this._messageIdCounter += 1;\n    const id = this._messageIdCounter;\n    const promise = new Promise((resolve) => {\n      this._waitingForReply.set(id, resolve);\n    });\n    worker.postMessage({ type, id, payload });\n    return await promise;\n  }\n  async checkForUpdate() {\n    if (this._registrationPromise) {\n      await this._registrationPromise;\n    }\n    this._registration.update();\n  }\n  get version() {\n    return \"0.3.8\";\n  }\n  get buildHash() {\n    return null;\n  }\n  async preventConcurrentSessionAccess(sessionId) {\n    return this._sendAndWaitForReply(\"closeSession\", { sessionId });\n  }\n  async getRegistration() {\n    if (this._registrationPromise) {\n      await this._registrationPromise;\n    }\n    return this._registration;\n  }\n}\nclass NotificationService {\n  constructor(serviceWorkerHandler, pushConfig) {\n    this._serviceWorkerHandler = serviceWorkerHandler;\n    this._pushConfig = pushConfig;\n  }\n  async enablePush(pusherFactory, defaultPayload) {\n    var _a;\n    const registration = await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.getRegistration());\n    if (registration == null ? void 0 : registration.pushManager) {\n      const subscription = await registration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: this._pushConfig.applicationServerKey\n      });\n      const subscriptionData = subscription.toJSON();\n      const pushkey = subscriptionData.keys.p256dh;\n      const data = {\n        endpoint: subscriptionData.endpoint,\n        auth: subscriptionData.keys.auth,\n        events_only: true,\n        default_payload: defaultPayload\n      };\n      return pusherFactory.httpPusher(this._pushConfig.gatewayUrl, this._pushConfig.appId, pushkey, data);\n    }\n  }\n  async disablePush() {\n    var _a;\n    const registration = await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.getRegistration());\n    if (registration == null ? void 0 : registration.pushManager) {\n      const subscription = await registration.pushManager.getSubscription();\n      if (subscription) {\n        await subscription.unsubscribe();\n      }\n    }\n  }\n  async isPushEnabled() {\n    var _a;\n    const registration = await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.getRegistration());\n    if (registration == null ? void 0 : registration.pushManager) {\n      const subscription = await registration.pushManager.getSubscription();\n      return !!subscription;\n    }\n    return false;\n  }\n  async supportsPush() {\n    var _a;\n    if (!this._pushConfig) {\n      return false;\n    }\n    const registration = await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.getRegistration());\n    return registration && \"pushManager\" in registration;\n  }\n  async enableNotifications() {\n    if (\"Notification\" in window) {\n      return await Notification.requestPermission() === \"granted\";\n    }\n    return false;\n  }\n  async supportsNotifications() {\n    return \"Notification\" in window;\n  }\n  async areNotificationsEnabled() {\n    if (\"Notification\" in window) {\n      return Notification.permission === \"granted\";\n    } else {\n      return false;\n    }\n  }\n  async showNotification(title, body = void 0) {\n    var _a;\n    if (\"Notification\" in window) {\n      new Notification(title, { body });\n      return;\n    }\n    const registration = await ((_a = this._serviceWorkerHandler) == null ? void 0 : _a.getRegistration());\n    registration == null ? void 0 : registration.showNotification(title, { body });\n  }\n}\nclass History extends BaseObservableValue$1 {\n  constructor() {\n    super();\n    this._lastSessionHash = void 0;\n  }\n  handleEvent(event2) {\n    if (event2.type === \"hashchange\") {\n      this.emit(this.get());\n      this._storeHash(this.get());\n    }\n  }\n  get() {\n    if (document.location.search.includes(\"loginToken\")) {\n      return document.location.search;\n    }\n    return document.location.hash;\n  }\n  replaceUrlSilently(url) {\n    window.history.replaceState(null, null, url);\n    this._storeHash(url);\n  }\n  pushUrlSilently(url) {\n    window.history.pushState(null, null, url);\n    this._storeHash(url);\n  }\n  pushUrl(url) {\n    document.location.hash = url;\n  }\n  urlAsPath(url) {\n    if (url.startsWith(\"#\")) {\n      return url.substr(1);\n    } else {\n      return url;\n    }\n  }\n  pathAsUrl(path) {\n    return `#${path}`;\n  }\n  onSubscribeFirst() {\n    var _a;\n    this._lastSessionHash = (_a = window.localStorage) == null ? void 0 : _a.getItem(\"hydrogen_last_url_hash\");\n    window.addEventListener(\"hashchange\", this);\n  }\n  onUnsubscribeLast() {\n    window.removeEventListener(\"hashchange\", this);\n  }\n  _storeHash(hash) {\n    var _a;\n    (_a = window.localStorage) == null ? void 0 : _a.setItem(\"hydrogen_last_url_hash\", hash);\n  }\n  getLastSessionUrl() {\n    return this._lastSessionHash;\n  }\n}\nclass OnlineStatus extends BaseObservableValue$1 {\n  constructor() {\n    super();\n    this._onOffline = this._onOffline.bind(this);\n    this._onOnline = this._onOnline.bind(this);\n  }\n  _onOffline() {\n    this.emit(false);\n  }\n  _onOnline() {\n    this.emit(true);\n  }\n  get() {\n    return navigator.onLine;\n  }\n  onSubscribeFirst() {\n    window.addEventListener(\"offline\", this._onOffline);\n    window.addEventListener(\"online\", this._onOnline);\n  }\n  onUnsubscribeLast() {\n    window.removeEventListener(\"offline\", this._onOffline);\n    window.removeEventListener(\"online\", this._onOnline);\n  }\n}\nfunction subtleCryptoResult(promiseOrOp, method) {\n  if (promiseOrOp instanceof Promise) {\n    return promiseOrOp;\n  } else {\n    return new Promise((resolve, reject) => {\n      promiseOrOp.oncomplete = (e) => resolve(e.target.result);\n      promiseOrOp.onerror = () => reject(new Error(\"Crypto error on \" + method));\n    });\n  }\n}\nclass HMACCrypto {\n  constructor(subtleCrypto) {\n    this._subtleCrypto = subtleCrypto;\n  }\n  async verify(key, mac, data, hash) {\n    const opts = {\n      name: \"HMAC\",\n      hash: { name: hashName(hash) }\n    };\n    const hmacKey = await subtleCryptoResult(this._subtleCrypto.importKey(\"raw\", key, opts, false, [\"verify\"]), \"importKey\");\n    const isVerified = await subtleCryptoResult(this._subtleCrypto.verify(opts, hmacKey, mac, data), \"verify\");\n    return isVerified;\n  }\n  async compute(key, data, hash) {\n    const opts = {\n      name: \"HMAC\",\n      hash: { name: hashName(hash) }\n    };\n    const hmacKey = await subtleCryptoResult(this._subtleCrypto.importKey(\"raw\", key, opts, false, [\"sign\"]), \"importKey\");\n    const buffer = await subtleCryptoResult(this._subtleCrypto.sign(opts, hmacKey, data), \"sign\");\n    return new Uint8Array(buffer);\n  }\n}\nclass DeriveCrypto {\n  constructor(subtleCrypto, crypto2, cryptoExtras) {\n    this._subtleCrypto = subtleCrypto;\n    this._crypto = crypto2;\n    this._cryptoExtras = cryptoExtras;\n  }\n  async pbkdf2(password, iterations, salt, hash, length) {\n    if (!this._subtleCrypto.deriveBits) {\n      throw new Error(\"PBKDF2 is not supported\");\n    }\n    const key = await subtleCryptoResult(this._subtleCrypto.importKey(\"raw\", password, { name: \"PBKDF2\" }, false, [\"deriveBits\"]), \"importKey\");\n    const keybits = await subtleCryptoResult(this._subtleCrypto.deriveBits({\n      name: \"PBKDF2\",\n      salt,\n      iterations,\n      hash: hashName(hash)\n    }, key, length), \"deriveBits\");\n    return new Uint8Array(keybits);\n  }\n  async hkdf(key, salt, info, hash, length) {\n    if (!this._subtleCrypto.deriveBits) {\n      return this._cryptoExtras.hkdf(this._crypto, key, salt, info, hash, length);\n    }\n    const hkdfkey = await subtleCryptoResult(this._subtleCrypto.importKey(\"raw\", key, { name: \"HKDF\" }, false, [\"deriveBits\"]), \"importKey\");\n    const keybits = await subtleCryptoResult(this._subtleCrypto.deriveBits({\n      name: \"HKDF\",\n      salt,\n      info,\n      hash: hashName(hash)\n    }, hkdfkey, length), \"deriveBits\");\n    return new Uint8Array(keybits);\n  }\n}\nclass AESCrypto {\n  constructor(subtleCrypto, crypto2) {\n    this._subtleCrypto = subtleCrypto;\n    this._crypto = crypto2;\n  }\n  async decryptCTR({ key, jwkKey, iv, data, counterLength = 64 }) {\n    const opts = {\n      name: \"AES-CTR\",\n      counter: iv,\n      length: counterLength\n    };\n    let aesKey;\n    try {\n      const selectedKey = key || jwkKey;\n      const format = jwkKey ? \"jwk\" : \"raw\";\n      aesKey = await subtleCryptoResult(this._subtleCrypto.importKey(format, selectedKey, opts, false, [\"decrypt\"]), \"importKey\");\n    } catch (err) {\n      throw new Error(`Could not import key for AES-CTR decryption: ${err.message}`);\n    }\n    try {\n      const plaintext = await subtleCryptoResult(this._subtleCrypto.decrypt(opts, aesKey, data), \"decrypt\");\n      return new Uint8Array(plaintext);\n    } catch (err) {\n      throw new Error(`Could not decrypt with AES-CTR: ${err.message}`);\n    }\n  }\n  async encryptCTR({ key, jwkKey, iv, data }) {\n    const opts = {\n      name: \"AES-CTR\",\n      counter: iv,\n      length: 64\n    };\n    let aesKey;\n    const selectedKey = key || jwkKey;\n    const format = jwkKey ? \"jwk\" : \"raw\";\n    try {\n      aesKey = await subtleCryptoResult(this._subtleCrypto.importKey(format, selectedKey, opts, false, [\"encrypt\"]), \"importKey\");\n    } catch (err) {\n      throw new Error(`Could not import key for AES-CTR encryption: ${err.message}`);\n    }\n    try {\n      const ciphertext = await subtleCryptoResult(this._subtleCrypto.encrypt(opts, aesKey, data), \"encrypt\");\n      return new Uint8Array(ciphertext);\n    } catch (err) {\n      throw new Error(`Could not encrypt with AES-CTR: ${err.message}`);\n    }\n  }\n  async generateKey(format, length = 256) {\n    const cryptoKey = await subtleCryptoResult(this._subtleCrypto.generateKey({ \"name\": \"AES-CTR\", length }, true, [\"encrypt\", \"decrypt\"]));\n    return subtleCryptoResult(this._subtleCrypto.exportKey(format, cryptoKey));\n  }\n  async generateIV() {\n    return generateIV(this._crypto);\n  }\n}\nfunction generateIV(crypto2) {\n  const randomBytes = crypto2.getRandomValues(new Uint8Array(8));\n  const ivArray = new Uint8Array(16);\n  for (let i = 0; i < randomBytes.length; i += 1) {\n    ivArray[i] = randomBytes[i];\n  }\n  return ivArray;\n}\nfunction jwkKeyToRaw(jwkKey) {\n  if (jwkKey.alg !== \"A256CTR\") {\n    throw new Error(`Unknown algorithm: ${jwkKey.alg}`);\n  }\n  if (!jwkKey.key_ops.includes(\"decrypt\")) {\n    throw new Error(`decrypt missing from key_ops`);\n  }\n  if (jwkKey.kty !== \"oct\") {\n    throw new Error(`Invalid key type, \"oct\" expected: ${jwkKey.kty}`);\n  }\n  const base64UrlKey = jwkKey.k;\n  const base64Key = base64UrlKey.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  return base64.decode(base64Key);\n}\nfunction encodeUnpaddedBase64(buffer) {\n  const str = base64.encode(buffer);\n  const paddingIdx = str.indexOf(\"=\");\n  if (paddingIdx !== -1) {\n    return str.substr(0, paddingIdx);\n  } else {\n    return str;\n  }\n}\nfunction encodeUrlBase64(buffer) {\n  const unpadded = encodeUnpaddedBase64(buffer);\n  return unpadded.replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction rawKeyToJwk(key) {\n  return {\n    \"alg\": \"A256CTR\",\n    \"ext\": true,\n    \"k\": encodeUrlBase64(key),\n    \"key_ops\": [\n      \"encrypt\",\n      \"decrypt\"\n    ],\n    \"kty\": \"oct\"\n  };\n}\nclass AESLegacyCrypto {\n  constructor(aesjs, crypto2) {\n    this._aesjs = aesjs;\n    this._crypto = crypto2;\n  }\n  async decryptCTR({ key, jwkKey, iv, data, counterLength = 64 }) {\n    if (counterLength !== 64) {\n      throw new Error(`Unsupported counter length: ${counterLength}`);\n    }\n    if (jwkKey) {\n      key = jwkKeyToRaw(jwkKey);\n    }\n    const aesjs = this._aesjs;\n    var aesCtr = new aesjs.ModeOfOperation.ctr(new Uint8Array(key), new aesjs.Counter(new Uint8Array(iv)));\n    return aesCtr.decrypt(new Uint8Array(data));\n  }\n  async encryptCTR({ key, jwkKey, iv, data }) {\n    if (jwkKey) {\n      key = jwkKeyToRaw(jwkKey);\n    }\n    const aesjs = this._aesjs;\n    var aesCtr = new aesjs.ModeOfOperation.ctr(new Uint8Array(key), new aesjs.Counter(new Uint8Array(iv)));\n    return aesCtr.encrypt(new Uint8Array(data));\n  }\n  async generateKey(format, length = 256) {\n    let key = crypto.getRandomValues(new Uint8Array(length / 8));\n    if (format === \"jwk\") {\n      key = rawKeyToJwk(key);\n    }\n    return key;\n  }\n  async generateIV() {\n    return generateIV(this._crypto);\n  }\n}\nfunction hashName(name) {\n  if (name !== \"SHA-256\" && name !== \"SHA-512\") {\n    throw new Error(`Invalid hash name: ${name}`);\n  }\n  return name;\n}\nclass Crypto {\n  constructor(cryptoExtras) {\n    const crypto2 = window.crypto || window.msCrypto;\n    const subtleCrypto = crypto2.subtle || crypto2.webkitSubtle;\n    this._subtleCrypto = subtleCrypto;\n    if (!subtleCrypto.deriveBits && (cryptoExtras == null ? void 0 : cryptoExtras.aesjs)) {\n      this.aes = new AESLegacyCrypto(cryptoExtras.aesjs, crypto2);\n    } else {\n      this.aes = new AESCrypto(subtleCrypto, crypto2);\n    }\n    this.hmac = new HMACCrypto(subtleCrypto);\n    this.derive = new DeriveCrypto(subtleCrypto, this, cryptoExtras);\n  }\n  async digest(hash, data) {\n    return await subtleCryptoResult(this._subtleCrypto.digest(hashName(hash), data));\n  }\n  digestSize(hash) {\n    switch (hashName(hash)) {\n      case \"SHA-512\":\n        return 64;\n      case \"SHA-256\":\n        return 32;\n      default:\n        throw new Error(`Not implemented for ${hashName(hash)}`);\n    }\n  }\n}\nasync function estimateStorageUsage() {\n  var _a;\n  if ((_a = navigator == null ? void 0 : navigator.storage) == null ? void 0 : _a.estimate) {\n    const { quota, usage } = await navigator.storage.estimate();\n    return { quota, usage };\n  } else {\n    return { quota: null, usage: null };\n  }\n}\nclass WorkerState {\n  constructor(worker) {\n    this.worker = worker;\n    this.busy = false;\n  }\n  attach(pool) {\n    this.worker.addEventListener(\"message\", pool);\n    this.worker.addEventListener(\"error\", pool);\n  }\n  detach(pool) {\n    this.worker.removeEventListener(\"message\", pool);\n    this.worker.removeEventListener(\"error\", pool);\n  }\n}\nclass Request$1 {\n  constructor(message, pool) {\n    this._promise = new Promise((_resolve, _reject) => {\n      this._resolve = _resolve;\n      this._reject = _reject;\n    });\n    this._message = message;\n    this._pool = pool;\n    this._worker = null;\n  }\n  abort() {\n    if (this._isNotDisposed) {\n      this._pool._abortRequest(this);\n      this._dispose();\n    }\n  }\n  response() {\n    return this._promise;\n  }\n  _dispose() {\n    this._reject = null;\n    this._resolve = null;\n  }\n  get _isNotDisposed() {\n    return this._resolve && this._reject;\n  }\n}\nclass WorkerPool {\n  constructor(path, amount) {\n    this._workers = [];\n    for (let i = 0; i < amount; ++i) {\n      const worker = new WorkerState(new Worker(path));\n      worker.attach(this);\n      this._workers[i] = worker;\n    }\n    this._requests = /* @__PURE__ */ new Map();\n    this._counter = 0;\n    this._pendingFlag = false;\n    this._init = null;\n  }\n  init() {\n    const promise = new Promise((resolve, reject) => {\n      this._init = { resolve, reject };\n    });\n    this.sendAll({ type: \"ping\" }).then(this._init.resolve, this._init.reject).finally(() => {\n      this._init = null;\n    });\n    return promise;\n  }\n  handleEvent(e) {\n    if (e.type === \"message\") {\n      const message = e.data;\n      const request = this._requests.get(message.replyToId);\n      if (request) {\n        request._worker.busy = false;\n        if (request._isNotDisposed) {\n          if (message.type === \"success\") {\n            request._resolve(message.payload);\n          } else if (message.type === \"error\") {\n            const err = new Error(message.message);\n            err.stack = message.stack;\n            request._reject(err);\n          }\n          request._dispose();\n        }\n        this._requests.delete(message.replyToId);\n      }\n      this._sendPending();\n    } else if (e.type === \"error\") {\n      if (this._init) {\n        this._init.reject(new Error(\"worker error during init\"));\n      }\n      console.error(\"worker error\", e);\n    }\n  }\n  _getPendingRequest() {\n    for (const r of this._requests.values()) {\n      if (!r._worker) {\n        return r;\n      }\n    }\n  }\n  _getFreeWorker() {\n    for (const w of this._workers) {\n      if (!w.busy) {\n        return w;\n      }\n    }\n  }\n  _sendPending() {\n    this._pendingFlag = false;\n    let success;\n    do {\n      success = false;\n      const request = this._getPendingRequest();\n      if (request) {\n        const worker = this._getFreeWorker();\n        if (worker) {\n          this._sendWith(request, worker);\n          success = true;\n        }\n      }\n    } while (success);\n  }\n  _sendWith(request, worker) {\n    request._worker = worker;\n    worker.busy = true;\n    worker.worker.postMessage(request._message);\n  }\n  _enqueueRequest(message) {\n    this._counter += 1;\n    message.id = this._counter;\n    const request = new Request$1(message, this);\n    this._requests.set(message.id, request);\n    return request;\n  }\n  send(message) {\n    const request = this._enqueueRequest(message);\n    const worker = this._getFreeWorker();\n    if (worker) {\n      this._sendWith(request, worker);\n    }\n    return request;\n  }\n  sendAll(message) {\n    const promises = this._workers.map((worker) => {\n      const request = this._enqueueRequest(Object.assign({}, message));\n      this._sendWith(request, worker);\n      return request.response();\n    });\n    return Promise.all(promises);\n  }\n  dispose() {\n    for (const w of this._workers) {\n      w.detach(this);\n      w.worker.terminate();\n    }\n  }\n  _trySendPendingInNextTick() {\n    if (!this._pendingFlag) {\n      this._pendingFlag = true;\n      Promise.resolve().then(() => {\n        this._sendPending();\n      });\n    }\n  }\n  _abortRequest(request) {\n    request._reject(new AbortError());\n    if (request._worker) {\n      request._worker.busy = false;\n    }\n    this._requests.delete(request._message.id);\n    this._trySendPendingInNextTick();\n  }\n}\nconst ALLOWED_BLOB_MIMETYPES = {\n  \"image/jpeg\": true,\n  \"image/gif\": true,\n  \"image/png\": true,\n  \"video/mp4\": true,\n  \"video/webm\": true,\n  \"video/ogg\": true,\n  \"video/quicktime\": true,\n  \"video/VP8\": true,\n  \"audio/mp4\": true,\n  \"audio/webm\": true,\n  \"audio/aac\": true,\n  \"audio/mpeg\": true,\n  \"audio/ogg\": true,\n  \"audio/wave\": true,\n  \"audio/wav\": true,\n  \"audio/x-wav\": true,\n  \"audio/x-pn-wav\": true,\n  \"audio/flac\": true,\n  \"audio/x-flac\": true\n};\nconst DEFAULT_MIMETYPE = \"application/octet-stream\";\nclass BlobHandle {\n  constructor(blob, buffer = null) {\n    this._blob = blob;\n    this._buffer = buffer;\n    this._url = null;\n  }\n  static fromBufferUnsafe(buffer, mimetype) {\n    return new BlobHandle(new Blob([buffer], { type: mimetype }), buffer);\n  }\n  static fromBuffer(buffer, mimetype) {\n    mimetype = mimetype ? mimetype.split(\";\")[0].trim() : \"\";\n    if (!ALLOWED_BLOB_MIMETYPES[mimetype]) {\n      mimetype = DEFAULT_MIMETYPE;\n    }\n    return new BlobHandle(new Blob([buffer], { type: mimetype }), buffer);\n  }\n  static fromBlobUnsafe(blob) {\n    return new BlobHandle(blob);\n  }\n  get nativeBlob() {\n    return this._blob;\n  }\n  async readAsBuffer() {\n    if (this._buffer) {\n      return this._buffer;\n    } else {\n      const reader = new FileReader();\n      const promise = new Promise((resolve, reject) => {\n        reader.addEventListener(\"load\", (evt) => resolve(evt.target.result));\n        reader.addEventListener(\"error\", (evt) => reject(evt.target.error));\n      });\n      reader.readAsArrayBuffer(this._blob);\n      return promise;\n    }\n  }\n  get url() {\n    if (!this._url) {\n      this._url = URL.createObjectURL(this._blob);\n    }\n    return this._url;\n  }\n  get size() {\n    return this._blob.size;\n  }\n  get mimeType() {\n    return this._blob.type || DEFAULT_MIMETYPE;\n  }\n  dispose() {\n    if (this._url) {\n      URL.revokeObjectURL(this._url);\n      this._url = null;\n    }\n  }\n}\nclass ImageHandle {\n  static async fromBlob(blob) {\n    const img = await loadImgFromBlob(blob);\n    const { width, height } = img;\n    return new ImageHandle(blob, width, height, img);\n  }\n  constructor(blob, width, height, imgElement) {\n    this.blob = blob;\n    this.width = width;\n    this.height = height;\n    this._domElement = imgElement;\n  }\n  get maxDimension() {\n    return Math.max(this.width, this.height);\n  }\n  async _getDomElement() {\n    if (!this._domElement) {\n      this._domElement = await loadImgFromBlob(this.blob);\n    }\n    return this._domElement;\n  }\n  async scale(maxDimension) {\n    const aspectRatio = this.width / this.height;\n    const scaleFactor = Math.min(1, maxDimension / (aspectRatio >= 1 ? this.width : this.height));\n    const scaledWidth = Math.round(this.width * scaleFactor);\n    const scaledHeight = Math.round(this.height * scaleFactor);\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const ctx = canvas.getContext(\"2d\");\n    const drawableElement = await this._getDomElement();\n    ctx.drawImage(drawableElement, 0, 0, scaledWidth, scaledHeight);\n    let mimeType = this.blob.mimeType === \"image/jpeg\" ? \"image/jpeg\" : \"image/png\";\n    let nativeBlob;\n    if (canvas.toBlob) {\n      nativeBlob = await new Promise((resolve) => canvas.toBlob(resolve, mimeType));\n    } else if (canvas.msToBlob) {\n      mimeType = \"image/png\";\n      nativeBlob = canvas.msToBlob();\n    } else {\n      throw new Error(\"canvas can't be turned into blob\");\n    }\n    const blob = BlobHandle.fromBlobUnsafe(nativeBlob);\n    return new ImageHandle(blob, scaledWidth, scaledHeight, null);\n  }\n  dispose() {\n    this.blob.dispose();\n  }\n}\nclass VideoHandle extends ImageHandle {\n  get duration() {\n    if (typeof this._domElement.duration === \"number\") {\n      return Math.round(this._domElement.duration * 1e3);\n    }\n    return void 0;\n  }\n  static async fromBlob(blob) {\n    const video = await loadVideoFromBlob(blob);\n    const { videoWidth, videoHeight } = video;\n    return new VideoHandle(blob, videoWidth, videoHeight, video);\n  }\n}\nfunction hasReadPixelPermission() {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = 1;\n  canvas.height = 1;\n  const ctx = canvas.getContext(\"2d\");\n  const rgb = [\n    Math.round(Math.random() * 255),\n    Math.round(Math.random() * 255),\n    Math.round(Math.random() * 255)\n  ];\n  ctx.fillStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  ctx.fillRect(0, 0, 1, 1);\n  const data = ctx.getImageData(0, 0, 1, 1).data;\n  return data[0] === rgb[0] && data[1] === rgb[1] && data[2] === rgb[2];\n}\nasync function loadImgFromBlob(blob) {\n  const img = document.createElement(\"img\");\n  const loadPromise = domEventAsPromise(img, \"load\");\n  img.src = blob.url;\n  await loadPromise;\n  return img;\n}\nasync function loadVideoFromBlob(blob) {\n  const video = document.createElement(\"video\");\n  video.muted = true;\n  const loadPromise = domEventAsPromise(video, \"loadedmetadata\");\n  video.src = blob.url;\n  video.load();\n  await loadPromise;\n  const seekPromise = domEventAsPromise(video, \"seeked\");\n  await new Promise((r) => setTimeout(r, 200));\n  video.currentTime = 0.1;\n  await seekPromise;\n  return video;\n}\nasync function downloadInIframe(container2, iframeSrc, blobHandle, filename, isIOS) {\n  let iframe = container2.querySelector(\"iframe.downloadSandbox\");\n  if (!iframe) {\n    iframe = document.createElement(\"iframe\");\n    iframe.setAttribute(\"sandbox\", \"allow-scripts allow-downloads allow-downloads-without-user-activation\");\n    iframe.setAttribute(\"src\", iframeSrc);\n    iframe.className = \"hidden downloadSandbox\";\n    container2.appendChild(iframe);\n    let detach;\n    await new Promise((resolve, reject) => {\n      detach = () => {\n        iframe.removeEventListener(\"load\", resolve);\n        iframe.removeEventListener(\"error\", reject);\n      };\n      iframe.addEventListener(\"load\", resolve);\n      iframe.addEventListener(\"error\", reject);\n    });\n    detach();\n  }\n  if (isIOS) {\n    const buffer = await blobHandle.readAsBuffer();\n    iframe.contentWindow.postMessage({\n      type: \"downloadBuffer\",\n      buffer,\n      mimeType: blobHandle.mimeType,\n      filename\n    }, \"*\");\n  } else {\n    iframe.contentWindow.postMessage({\n      type: \"downloadBlob\",\n      blob: blobHandle.nativeBlob,\n      filename\n    }, \"*\");\n  }\n}\nclass HTMLParseResult {\n  constructor(bodyNode) {\n    this._bodyNode = bodyNode;\n  }\n  get rootNodes() {\n    return Array.from(this._bodyNode.childNodes);\n  }\n  getChildNodes(node) {\n    return Array.from(node.childNodes);\n  }\n  getAttributeNames(node) {\n    return Array.from(node.getAttributeNames());\n  }\n  getAttributeValue(node, attr) {\n    return node.getAttribute(attr);\n  }\n  isTextNode(node) {\n    return node.nodeType === Node.TEXT_NODE;\n  }\n  getNodeText(node) {\n    return node.textContent;\n  }\n  isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n  }\n  getNodeElementName(node) {\n    return node.tagName;\n  }\n}\nconst sanitizeConfig = {\n  ALLOWED_URI_REGEXP: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx|mxc):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))/i,\n  FORBID_TAGS: [\"mx-reply\"],\n  KEEP_CONTENT: false\n};\nfunction parseHTML(html) {\n  const sanitized = DOMPurify.sanitize(html, sanitizeConfig);\n  const bodyNode = new DOMParser().parseFromString(`<!DOCTYPE html><html><body>${sanitized}</body></html>`, \"text/html\").body;\n  return new HTMLParseResult(bodyNode);\n}\nconst POLLING_INTERVAL = 200;\nconst SPEAKING_THRESHOLD = -60;\nconst SPEAKING_SAMPLE_COUNT = 8;\nclass MediaDevicesWrapper {\n  constructor(mediaDevices) {\n    this.mediaDevices = mediaDevices;\n  }\n  enumerate() {\n    return this.mediaDevices.enumerateDevices();\n  }\n  async getMediaTracks(audio, video) {\n    const stream = await this.mediaDevices.getUserMedia(this.getUserMediaContraints(audio, video));\n    stream.addEventListener(\"removetrack\", (evt) => {\n      console.log(`removing track ${evt.track.id} (${evt.track.kind}) from stream ${stream.id}`);\n    });\n    return stream;\n  }\n  async getScreenShareTrack() {\n    const stream = await this.mediaDevices.getDisplayMedia(this.getScreenshareContraints());\n    return stream;\n  }\n  getUserMediaContraints(audio, video) {\n    const isWebkit = !!navigator[\"webkitGetUserMedia\"];\n    return {\n      audio: audio ? {\n        deviceId: typeof audio !== \"boolean\" ? { ideal: audio.deviceId } : void 0\n      } : false,\n      video: video ? {\n        deviceId: typeof video !== \"boolean\" ? { ideal: video.deviceId } : void 0,\n        width: isWebkit ? { exact: 640 } : { ideal: 640 },\n        height: isWebkit ? { exact: 360 } : { ideal: 360 }\n      } : false\n    };\n  }\n  getScreenshareContraints() {\n    return {\n      audio: false,\n      video: true\n    };\n  }\n  createVolumeMeasurer(stream, callback) {\n    return new WebAudioVolumeMeasurer(stream, callback);\n  }\n}\nclass WebAudioVolumeMeasurer {\n  constructor(stream, callback) {\n    this.measuringVolumeActivity = false;\n    this.speakingThreshold = SPEAKING_THRESHOLD;\n    this.speaking = false;\n    this.volumeLooper = () => {\n      if (!this.analyser)\n        return;\n      if (!this.measuringVolumeActivity)\n        return;\n      this.analyser.getFloatFrequencyData(this.frequencyBinCount);\n      let maxVolume = -Infinity;\n      for (let i = 0; i < this.frequencyBinCount.length; i++) {\n        if (this.frequencyBinCount[i] > maxVolume) {\n          maxVolume = this.frequencyBinCount[i];\n        }\n      }\n      this.speakingVolumeSamples.shift();\n      this.speakingVolumeSamples.push(maxVolume);\n      this.callback();\n      let newSpeaking = false;\n      for (let i = 0; i < this.speakingVolumeSamples.length; i++) {\n        const volume = this.speakingVolumeSamples[i];\n        if (volume > this.speakingThreshold) {\n          newSpeaking = true;\n          break;\n        }\n      }\n      if (this.speaking !== newSpeaking) {\n        this.speaking = newSpeaking;\n        this.callback();\n      }\n      this.volumeLooperTimeout = setTimeout(this.volumeLooper, POLLING_INTERVAL);\n    };\n    this.stream = stream;\n    this.callback = callback;\n    this.speakingVolumeSamples = new Array(SPEAKING_SAMPLE_COUNT).fill(-Infinity);\n    this.initVolumeMeasuring();\n    this.measureVolumeActivity(true);\n  }\n  get isSpeaking() {\n    return this.speaking;\n  }\n  measureVolumeActivity(enabled) {\n    if (enabled) {\n      if (!this.audioContext || !this.analyser || !this.frequencyBinCount)\n        return;\n      this.measuringVolumeActivity = true;\n      this.volumeLooper();\n    } else {\n      this.measuringVolumeActivity = false;\n      this.speakingVolumeSamples.fill(-Infinity);\n      this.callback();\n    }\n  }\n  initVolumeMeasuring() {\n    const AudioContext = window.AudioContext || window[\"webkitAudioContext\"];\n    if (!AudioContext)\n      return;\n    this.audioContext = new AudioContext();\n    this.analyser = this.audioContext.createAnalyser();\n    this.analyser.fftSize = 512;\n    this.analyser.smoothingTimeConstant = 0.1;\n    const mediaStreamAudioSourceNode = this.audioContext.createMediaStreamSource(this.stream);\n    mediaStreamAudioSourceNode.connect(this.analyser);\n    this.frequencyBinCount = new Float32Array(this.analyser.frequencyBinCount);\n  }\n  setSpeakingThreshold(threshold) {\n    this.speakingThreshold = threshold;\n  }\n  stop() {\n    var _a;\n    clearTimeout(this.volumeLooperTimeout);\n    this.analyser.disconnect();\n    (_a = this.audioContext) == null ? void 0 : _a.close();\n  }\n}\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[\"GroupCall\"] = \"org.matrix.msc3401.call\";\n  EventType2[\"GroupCallMember\"] = \"org.matrix.msc3401.call.member\";\n  EventType2[\"Invite\"] = \"m.call.invite\";\n  EventType2[\"Candidates\"] = \"m.call.candidates\";\n  EventType2[\"Answer\"] = \"m.call.answer\";\n  EventType2[\"Hangup\"] = \"m.call.hangup\";\n  EventType2[\"Reject\"] = \"m.call.reject\";\n  EventType2[\"SelectAnswer\"] = \"m.call.select_answer\";\n  EventType2[\"Negotiate\"] = \"m.call.negotiate\";\n  EventType2[\"SDPStreamMetadataChanged\"] = \"m.call.sdp_stream_metadata_changed\";\n  EventType2[\"SDPStreamMetadataChangedPrefix\"] = \"org.matrix.call.sdp_stream_metadata_changed\";\n  EventType2[\"Replaces\"] = \"m.call.replaces\";\n  EventType2[\"AssertedIdentity\"] = \"m.call.asserted_identity\";\n  EventType2[\"AssertedIdentityPrefix\"] = \"org.matrix.call.asserted_identity\";\n  return EventType2;\n})(EventType || {});\nconst SDPStreamMetadataKey = \"org.matrix.msc3077.sdp_stream_metadata\";\nvar SDPStreamMetadataPurpose = /* @__PURE__ */ ((SDPStreamMetadataPurpose2) => {\n  SDPStreamMetadataPurpose2[\"Usermedia\"] = \"m.usermedia\";\n  SDPStreamMetadataPurpose2[\"Screenshare\"] = \"m.screenshare\";\n  return SDPStreamMetadataPurpose2;\n})(SDPStreamMetadataPurpose || {});\nvar CallErrorCode = /* @__PURE__ */ ((CallErrorCode2) => {\n  CallErrorCode2[\"UserHangup\"] = \"user_hangup\";\n  CallErrorCode2[\"LocalOfferFailed\"] = \"local_offer_failed\";\n  CallErrorCode2[\"NoUserMedia\"] = \"no_user_media\";\n  CallErrorCode2[\"UnknownDevices\"] = \"unknown_devices\";\n  CallErrorCode2[\"SendInvite\"] = \"send_invite\";\n  CallErrorCode2[\"CreateAnswer\"] = \"create_answer\";\n  CallErrorCode2[\"SendAnswer\"] = \"send_answer\";\n  CallErrorCode2[\"SetRemoteDescription\"] = \"set_remote_description\";\n  CallErrorCode2[\"SetLocalDescription\"] = \"set_local_description\";\n  CallErrorCode2[\"AnsweredElsewhere\"] = \"answered_elsewhere\";\n  CallErrorCode2[\"IceFailed\"] = \"ice_failed\";\n  CallErrorCode2[\"InviteTimeout\"] = \"invite_timeout\";\n  CallErrorCode2[\"Replaced\"] = \"replaced\";\n  CallErrorCode2[\"SignallingFailed\"] = \"signalling_timeout\";\n  CallErrorCode2[\"UserBusy\"] = \"user_busy\";\n  CallErrorCode2[\"Transfered\"] = \"transferred\";\n  CallErrorCode2[\"NewSession\"] = \"new_session\";\n  return CallErrorCode2;\n})(CallErrorCode || {});\nvar CallIntent = /* @__PURE__ */ ((CallIntent2) => {\n  CallIntent2[\"Ring\"] = \"m.ring\";\n  CallIntent2[\"Prompt\"] = \"m.prompt\";\n  CallIntent2[\"Room\"] = \"m.room\";\n  return CallIntent2;\n})(CallIntent || {});\nvar CallType = /* @__PURE__ */ ((CallType2) => {\n  CallType2[\"Video\"] = \"m.video\";\n  CallType2[\"Voice\"] = \"m.voice\";\n  return CallType2;\n})(CallType || {});\nclass DOMWebRTC {\n  createPeerConnection(forceTURN, turnServers, iceCandidatePoolSize) {\n    const peerConn = new RTCPeerConnection({\n      iceTransportPolicy: forceTURN ? \"relay\" : void 0,\n      iceServers: turnServers,\n      iceCandidatePoolSize\n    });\n    return new Proxy(peerConn, {\n      get(target, prop, receiver) {\n        const value = target[prop];\n        if (typeof value === \"function\") {\n          return value.bind(target);\n        } else {\n          return value;\n        }\n      }\n    });\n  }\n  prepareSenderForPurpose(peerConnection, sender, purpose) {\n    if (purpose === SDPStreamMetadataPurpose.Screenshare) {\n      this.getRidOfRTXCodecs(peerConnection, sender);\n    }\n  }\n  getRidOfRTXCodecs(peerConnection, sender) {\n    var _a, _b, _c2, _d2, _e, _f;\n    if (!RTCRtpReceiver.getCapabilities || !RTCRtpSender.getCapabilities)\n      return;\n    const recvCodecs = (_b = (_a = RTCRtpReceiver.getCapabilities(\"video\")) == null ? void 0 : _a.codecs) != null ? _b : [];\n    const sendCodecs = (_d2 = (_c2 = RTCRtpSender.getCapabilities(\"video\")) == null ? void 0 : _c2.codecs) != null ? _d2 : [];\n    const codecs = [...sendCodecs, ...recvCodecs];\n    for (const codec of codecs) {\n      if (codec.mimeType === \"video/rtx\") {\n        const rtxCodecIndex = codecs.indexOf(codec);\n        codecs.splice(rtxCodecIndex, 1);\n      }\n    }\n    const transceiver = peerConnection.getTransceivers().find((t) => t.sender === sender);\n    if (transceiver && (((_e = transceiver.sender.track) == null ? void 0 : _e.kind) === \"video\" || ((_f = transceiver.receiver.track) == null ? void 0 : _f.kind) === \"video\")) {\n      transceiver.setCodecPreferences(codecs);\n    }\n  }\n}\nvar ColorSchemePreference = /* @__PURE__ */ ((ColorSchemePreference2) => {\n  ColorSchemePreference2[ColorSchemePreference2[\"Dark\"] = 0] = \"Dark\";\n  ColorSchemePreference2[ColorSchemePreference2[\"Light\"] = 1] = \"Light\";\n  return ColorSchemePreference2;\n})(ColorSchemePreference || {});\nfunction getColoredSvgString(svgString, primaryColor, secondaryColor) {\n  let coloredSVGCode = svgString.replaceAll(\"#ff00ff\", primaryColor);\n  coloredSVGCode = coloredSVGCode.replaceAll(\"#00ffff\", secondaryColor);\n  if (svgString === coloredSVGCode) {\n    throw new Error(\"svg-colorizer made no color replacements! The input svg should only contain colors #ff00ff (primary, case-sensitive) and #00ffff (secondary, case-sensitive).\");\n  }\n  return coloredSVGCode;\n}\nclass IconColorizer {\n  constructor(platform, iconVariables, resolvedVariables, manifestLocation) {\n    this._platform = platform;\n    this._iconVariables = iconVariables;\n    this._resolvedVariables = resolvedVariables;\n    this._manifestLocation = manifestLocation;\n  }\n  async toVariables() {\n    const { parsedStructure, promises } = await this._fetchAndParseIcons();\n    await Promise.all(promises);\n    return this._produceColoredIconVariables(parsedStructure);\n  }\n  async _fetchAndParseIcons() {\n    const promises = [];\n    const parsedStructure = {};\n    for (const [variable, url] of Object.entries(this._iconVariables)) {\n      const urlObject = new URL(`https://${url}`);\n      const pathWithoutQueryParams = urlObject.hostname;\n      const relativePath = new URL(pathWithoutQueryParams, new URL(this._manifestLocation, window.location.origin));\n      const responsePromise = this._platform.request(relativePath, { method: \"GET\", format: \"text\", cache: true }).response();\n      promises.push(responsePromise);\n      const searchParams = urlObject.searchParams;\n      parsedStructure[variable] = {\n        svg: responsePromise,\n        primary: searchParams.get(\"primary\"),\n        secondary: searchParams.get(\"secondary\")\n      };\n    }\n    return { parsedStructure, promises };\n  }\n  async _produceColoredIconVariables(parsedStructure) {\n    let coloredVariables = {};\n    for (const [variable, { svg, primary, secondary }] of Object.entries(parsedStructure)) {\n      const { body: svgCode } = await svg;\n      if (!primary) {\n        throw new Error(`Primary color variable ${primary} not in list of variables!`);\n      }\n      const primaryColor = this._resolvedVariables[primary], secondaryColor = this._resolvedVariables[secondary];\n      const coloredSvgCode = getColoredSvgString(svgCode, primaryColor, secondaryColor);\n      const dataURI = `url('data:image/svg+xml;utf8,${encodeURIComponent(coloredSvgCode)}')`;\n      coloredVariables[variable] = dataURI;\n    }\n    return coloredVariables;\n  }\n}\nconst offColor = (_c = pkg.offColor) != null ? _c : pkg.default.offColor;\nfunction derive(value, operation, argument, isDark) {\n  const argumentAsNumber = parseInt(argument);\n  if (isDark) {\n    if (operation === \"darker\") {\n      operation = \"lighter\";\n    } else if (operation === \"lighter\") {\n      operation = \"darker\";\n    }\n  }\n  switch (operation) {\n    case \"darker\": {\n      const newColorString = offColor(value).darken(argumentAsNumber / 100).hex();\n      return newColorString;\n    }\n    case \"lighter\": {\n      const newColorString = offColor(value).lighten(argumentAsNumber / 100).hex();\n      return newColorString;\n    }\n    case \"alpha\": {\n      return offColor(value).rgba(argumentAsNumber / 100);\n    }\n  }\n}\nclass DerivedVariables {\n  constructor(baseVariables, variablesToDerive, isDark) {\n    this._aliases = {};\n    this._derivedAliases = [];\n    this._baseVariables = baseVariables;\n    this._variablesToDerive = variablesToDerive;\n    this._isDark = isDark;\n  }\n  toVariables() {\n    var _a;\n    const resolvedVariables = {};\n    this._detectAliases();\n    for (const variable of this._variablesToDerive) {\n      const resolvedValue = this._derive(variable);\n      if (resolvedValue) {\n        resolvedVariables[variable] = resolvedValue;\n      }\n    }\n    for (const [alias, variable] of Object.entries(this._aliases)) {\n      resolvedVariables[alias] = (_a = this._baseVariables[variable]) != null ? _a : resolvedVariables[variable];\n    }\n    for (const variable of this._derivedAliases) {\n      const resolvedValue = this._deriveAlias(variable, resolvedVariables);\n      if (resolvedValue) {\n        resolvedVariables[variable] = resolvedValue;\n      }\n    }\n    return resolvedVariables;\n  }\n  _detectAliases() {\n    const newVariablesToDerive = [];\n    for (const variable of this._variablesToDerive) {\n      const [alias, value] = variable.split(\"=\");\n      if (value) {\n        this._aliases[alias] = value;\n      } else {\n        newVariablesToDerive.push(variable);\n      }\n    }\n    this._variablesToDerive = newVariablesToDerive;\n  }\n  _derive(variable) {\n    const RE_VARIABLE_VALUE = /(.+)--(.+)-(.+)/;\n    const matches = variable.match(RE_VARIABLE_VALUE);\n    if (matches) {\n      const [, baseVariable, operation, argument] = matches;\n      const value = this._baseVariables[baseVariable];\n      if (!value) {\n        if (this._aliases[baseVariable]) {\n          this._derivedAliases.push(variable);\n          return;\n        } else {\n          throw new Error(`Cannot find value for base variable \"${baseVariable}\"!`);\n        }\n      }\n      const resolvedValue = derive(value, operation, argument, this._isDark);\n      return resolvedValue;\n    }\n  }\n  _deriveAlias(variable, resolvedVariables) {\n    const RE_VARIABLE_VALUE = /(.+)--(.+)-(.+)/;\n    const matches = variable.match(RE_VARIABLE_VALUE);\n    if (matches) {\n      const [, baseVariable, operation, argument] = matches;\n      const value = resolvedVariables[baseVariable];\n      if (!value) {\n        throw new Error(`Cannot find value for alias \"${baseVariable}\" when trying to derive ${variable}!`);\n      }\n      const resolvedValue = derive(value, operation, argument, this._isDark);\n      return resolvedValue;\n    }\n  }\n}\n(_d = pkg.offColor) != null ? _d : pkg.default.offColor;\nclass RuntimeThemeParser {\n  constructor(platform, preferredColorScheme) {\n    this._themeMapping = {};\n    this._preferredColorScheme = preferredColorScheme;\n    this._platform = platform;\n  }\n  async parse(manifest, baseManifest, baseManifestLocation, log) {\n    await log.wrap(\"RuntimeThemeParser.parse\", async () => {\n      var _a;\n      const { cssLocation, derivedVariables, icons } = this._getSourceData(baseManifest, baseManifestLocation, log);\n      const themeName = manifest.name;\n      if (!themeName) {\n        throw new Error(`Theme name not found in manifest!`);\n      }\n      let defaultDarkVariant = {}, defaultLightVariant = {};\n      for (const [variant, variantDetails] of Object.entries((_a = manifest.values) == null ? void 0 : _a.variants)) {\n        try {\n          const themeId = `${manifest.id}-${variant}`;\n          const { name: variantName, default: isDefault, dark, variables } = variantDetails;\n          const resolvedVariables = new DerivedVariables(variables, derivedVariables, dark).toVariables();\n          Object.assign(variables, resolvedVariables);\n          const iconVariables = await new IconColorizer(this._platform, icons, variables, baseManifestLocation).toVariables();\n          Object.assign(variables, resolvedVariables, iconVariables);\n          const themeDisplayName = `${themeName} ${variantName}`;\n          if (isDefault) {\n            const defaultVariant = dark ? defaultDarkVariant : defaultLightVariant;\n            Object.assign(defaultVariant, { variantName, id: themeId, cssLocation, variables });\n            continue;\n          }\n          this._themeMapping[themeDisplayName] = { cssLocation, id: themeId, variables };\n        } catch (e) {\n          console.error(e);\n          continue;\n        }\n      }\n      if (defaultDarkVariant.id && defaultLightVariant.id) {\n        const defaultVariant = this._preferredColorScheme === ColorSchemePreference.Dark ? defaultDarkVariant : defaultLightVariant;\n        this._themeMapping[themeName] = { dark: defaultDarkVariant, light: defaultLightVariant, default: defaultVariant };\n      } else {\n        const variant = defaultDarkVariant.id ? defaultDarkVariant : defaultLightVariant;\n        this._themeMapping[`${themeName} ${variant.variantName}`] = { id: variant.id, cssLocation: variant.cssLocation };\n      }\n    });\n  }\n  _getSourceData(manifest, location2, log) {\n    return log.wrap(\"getSourceData\", () => {\n      var _a, _b, _c2;\n      const runtimeCSSLocation = (_a = manifest.source) == null ? void 0 : _a[\"runtime-asset\"];\n      if (!runtimeCSSLocation) {\n        throw new Error(`Run-time asset not found in source section for theme at ${location2}`);\n      }\n      const cssLocation = new URL(runtimeCSSLocation, new URL(location2, window.location.origin)).href;\n      const derivedVariables = (_b = manifest.source) == null ? void 0 : _b[\"derived-variables\"];\n      if (!derivedVariables) {\n        throw new Error(`Derived variables not found in source section for theme at ${location2}`);\n      }\n      const icons = (_c2 = manifest.source) == null ? void 0 : _c2[\"icon\"];\n      if (!icons) {\n        throw new Error(`Icon mapping not found in source section for theme at ${location2}`);\n      }\n      return { cssLocation, derivedVariables, icons };\n    });\n  }\n  get themeMapping() {\n    return this._themeMapping;\n  }\n}\nclass BuiltThemeParser {\n  constructor(preferredColorScheme) {\n    this._themeMapping = {};\n    this._preferredColorScheme = preferredColorScheme;\n  }\n  parse(manifest, manifestLocation, log) {\n    log.wrap(\"BuiltThemeParser.parse\", () => {\n      var _a, _b, _c2;\n      const builtAssets = (_a = manifest.source) == null ? void 0 : _a[\"built-assets\"];\n      const themeName = manifest.name;\n      if (!themeName) {\n        throw new Error(`Theme name not found in manifest at ${manifestLocation}`);\n      }\n      let defaultDarkVariant = {}, defaultLightVariant = {};\n      for (let [themeId, cssLocation] of Object.entries(builtAssets)) {\n        try {\n          cssLocation = new URL(cssLocation, new URL(manifestLocation, window.location.origin)).href;\n        } catch {\n          continue;\n        }\n        const variant = (_b = themeId.match(/.+-(.+)/)) == null ? void 0 : _b[1];\n        const variantDetails = (_c2 = manifest.values) == null ? void 0 : _c2.variants[variant];\n        if (!variantDetails) {\n          throw new Error(`Variant ${variant} is missing in manifest at ${manifestLocation}`);\n        }\n        const { name: variantName, default: isDefault, dark } = variantDetails;\n        const themeDisplayName = `${themeName} ${variantName}`;\n        if (isDefault) {\n          const defaultVariant = dark ? defaultDarkVariant : defaultLightVariant;\n          defaultVariant.variantName = variantName;\n          defaultVariant.id = themeId;\n          defaultVariant.cssLocation = cssLocation;\n          continue;\n        }\n        this._themeMapping[themeDisplayName] = {\n          cssLocation,\n          id: themeId\n        };\n      }\n      if (defaultDarkVariant.id && defaultLightVariant.id) {\n        const defaultVariant = this._preferredColorScheme === ColorSchemePreference.Dark ? defaultDarkVariant : defaultLightVariant;\n        this._themeMapping[themeName] = { dark: defaultDarkVariant, light: defaultLightVariant, default: defaultVariant };\n      } else {\n        const variant = defaultDarkVariant.id ? defaultDarkVariant : defaultLightVariant;\n        this._themeMapping[`${themeName} ${variant.variantName}`] = { id: variant.id, cssLocation: variant.cssLocation };\n      }\n    });\n  }\n  get themeMapping() {\n    return this._themeMapping;\n  }\n}\nclass ThemeLoader {\n  constructor(platform) {\n    this._platform = platform;\n  }\n  async init(manifestLocations, log) {\n    await this._platform.logger.wrapOrRun(log, \"ThemeLoader.init\", async (log2) => {\n      let noManifestsAvailable = true;\n      const failedManifestLoads = [];\n      const parseErrors = [];\n      const results = await Promise.all(manifestLocations.map((location2) => this._platform.request(location2, { method: \"GET\", format: \"json\", cache: true }).response()));\n      const runtimeThemeParser = new RuntimeThemeParser(this._platform, this.preferredColorScheme);\n      const builtThemeParser = new BuiltThemeParser(this.preferredColorScheme);\n      const runtimeThemePromises = [];\n      for (let i = 0; i < results.length; ++i) {\n        const result = results[i];\n        const { status, body } = result;\n        if (!(status >= 200 && status <= 299)) {\n          console.error(`Failed to load manifest at ${manifestLocations[i]}, status: ${status}`);\n          log2.log({ l: \"Manifest fetch failed\", location: manifestLocations[i], status }, LogLevel.Error);\n          failedManifestLoads.push(manifestLocations[i]);\n          continue;\n        }\n        noManifestsAvailable = false;\n        try {\n          if (body.extends) {\n            const indexOfBaseManifest = results.findIndex((result2) => \"value\" in result2 && result2.value.body.id === body.extends);\n            if (indexOfBaseManifest === -1) {\n              throw new Error(`Base manifest for derived theme at ${manifestLocations[i]} not found!`);\n            }\n            const { body: baseManifest } = results[indexOfBaseManifest].value;\n            const baseManifestLocation = manifestLocations[indexOfBaseManifest];\n            const promise = runtimeThemeParser.parse(body, baseManifest, baseManifestLocation, log2);\n            runtimeThemePromises.push(promise);\n          } else {\n            builtThemeParser.parse(body, manifestLocations[i], log2);\n          }\n        } catch (e) {\n          console.error(e);\n          parseErrors.push(e.message);\n        }\n      }\n      await Promise.all(runtimeThemePromises);\n      this._themeMapping = __spreadValues(__spreadValues({}, builtThemeParser.themeMapping), runtimeThemeParser.themeMapping);\n      if (noManifestsAvailable) {\n        throw new Error(`All configured theme manifests failed to load, the following were tried: ${failedManifestLoads.join(\", \")}`);\n      } else if (Object.keys(this._themeMapping).length === 0 && parseErrors.length) {\n        throw new Error(`Failed to parse theme manifests, the following errors were encountered: ${parseErrors.join(\", \")}`);\n      }\n      this._addDefaultThemeToMapping(log2);\n      log2.log({ l: \"Preferred colorscheme\", scheme: this.preferredColorScheme === ColorSchemePreference.Dark ? \"dark\" : \"light\" });\n      log2.log({ l: \"Result\", themeMapping: this._themeMapping });\n    });\n  }\n  async setTheme(themeName, themeVariant, log) {\n    await this._platform.logger.wrapOrRun(log, { l: \"change theme\", name: themeName, variant: themeVariant }, async (l) => {\n      let cssLocation, variables;\n      let themeDetails = this._themeMapping[themeName];\n      if (\"id\" in themeDetails) {\n        cssLocation = themeDetails.cssLocation;\n        variables = themeDetails.variables;\n      } else {\n        if (!themeVariant) {\n          throw new Error(\"themeVariant is undefined!\");\n        }\n        cssLocation = themeDetails[themeVariant].cssLocation;\n        variables = themeDetails[themeVariant].variables;\n      }\n      await this._platform.replaceStylesheet(cssLocation, l);\n      if (variables) {\n        log == null ? void 0 : log.log({ l: \"Derived Theme\", variables });\n        this._injectCSSVariables(variables);\n      } else {\n        this._removePreviousCSSVariables();\n      }\n      this._platform.settingsStorage.setString(\"theme-name\", themeName);\n      if (themeVariant) {\n        this._platform.settingsStorage.setString(\"theme-variant\", themeVariant);\n      } else {\n        this._platform.settingsStorage.remove(\"theme-variant\");\n      }\n    });\n  }\n  _injectCSSVariables(variables) {\n    const root = document.documentElement;\n    for (const [variable, value] of Object.entries(variables)) {\n      root.style.setProperty(`--${variable}`, value);\n    }\n    this._injectedVariables = variables;\n  }\n  _removePreviousCSSVariables() {\n    if (!this._injectedVariables) {\n      return;\n    }\n    const root = document.documentElement;\n    for (const variable of Object.keys(this._injectedVariables)) {\n      root.style.removeProperty(`--${variable}`);\n    }\n    this._injectedVariables = void 0;\n  }\n  get themeMapping() {\n    return this._themeMapping;\n  }\n  async getActiveTheme() {\n    let themeName = await this._platform.settingsStorage.getString(\"theme-name\");\n    let themeVariant = await this._platform.settingsStorage.getString(\"theme-variant\");\n    if (!themeName || !this._themeMapping[themeName]) {\n      themeName = \"Default\" in this._themeMapping ? \"Default\" : Object.keys(this._themeMapping)[0];\n      if (!this._themeMapping[themeName][themeVariant]) {\n        themeVariant = \"default\" in this._themeMapping[themeName] ? \"default\" : void 0;\n      }\n    }\n    return { themeName, themeVariant };\n  }\n  getDefaultTheme() {\n    var _a, _b;\n    switch (this.preferredColorScheme) {\n      case ColorSchemePreference.Dark:\n        return (_a = this._platform.config[\"defaultTheme\"]) == null ? void 0 : _a.dark;\n      case ColorSchemePreference.Light:\n        return (_b = this._platform.config[\"defaultTheme\"]) == null ? void 0 : _b.light;\n    }\n  }\n  _findThemeDetailsFromId(themeId) {\n    var _a, _b;\n    for (const [themeName, themeData] of Object.entries(this._themeMapping)) {\n      if (\"id\" in themeData && themeData.id === themeId) {\n        return { themeName, themeData };\n      } else if (\"light\" in themeData && ((_a = themeData.light) == null ? void 0 : _a.id) === themeId) {\n        return { themeName, themeData: themeData.light };\n      } else if (\"dark\" in themeData && ((_b = themeData.dark) == null ? void 0 : _b.id) === themeId) {\n        return { themeName, themeData: themeData.dark };\n      }\n    }\n  }\n  _addDefaultThemeToMapping(log) {\n    log.wrap(\"addDefaultThemeToMapping\", (l) => {\n      const defaultThemeId = this.getDefaultTheme();\n      if (defaultThemeId) {\n        const themeDetails = this._findThemeDetailsFromId(defaultThemeId);\n        if (themeDetails) {\n          this._themeMapping[\"Default\"] = { id: \"default\", cssLocation: themeDetails.themeData.cssLocation };\n          const variables = themeDetails.themeData.variables;\n          if (variables) {\n            this._themeMapping[\"Default\"].variables = variables;\n          }\n        }\n      }\n      l.log({ l: \"Default Theme\", theme: defaultThemeId });\n    });\n  }\n  get preferredColorScheme() {\n    if (window.matchMedia(\"(prefers-color-scheme: dark)\").matches) {\n      return ColorSchemePreference.Dark;\n    } else if (window.matchMedia(\"(prefers-color-scheme: light)\").matches) {\n      return ColorSchemePreference.Light;\n    }\n  }\n}\nvar TimeScope = /* @__PURE__ */ ((TimeScope2) => {\n  TimeScope2[TimeScope2[\"Minute\"] = 6e4] = \"Minute\";\n  TimeScope2[TimeScope2[\"Hours\"] = 36e5] = \"Hours\";\n  TimeScope2[TimeScope2[\"Day\"] = 864e5] = \"Day\";\n  return TimeScope2;\n})(TimeScope || {});\nfunction formatDuration(milliseconds) {\n  let days = 0;\n  let hours = 0;\n  let minutes = 0;\n  if (milliseconds >= 864e5) {\n    days = Math.floor(milliseconds / 864e5);\n    milliseconds -= days * 864e5;\n  }\n  if (milliseconds >= 36e5) {\n    hours = Math.floor(milliseconds / 36e5);\n    milliseconds -= hours * 36e5;\n  }\n  if (milliseconds >= 6e4) {\n    minutes = Math.floor(milliseconds / 6e4);\n    milliseconds -= minutes * 6e4;\n  }\n  const seconds = Math.floor(milliseconds / 1e3);\n  let result = \"\";\n  if (days) {\n    result = `${days}d `;\n  }\n  if (hours || days) {\n    result += `${hours}h `;\n  }\n  if (minutes || hours || days) {\n    result += `${minutes}m `;\n  }\n  result += `${seconds}s`;\n  return result;\n}\nclass TimeFormatter {\n  constructor(clock) {\n    this.clock = clock;\n    this.todayMidnight = new Date();\n    this.todayMidnight.setHours(0, 0, 0, 0);\n    this.relativeDayFormatter = new Intl.RelativeTimeFormat(void 0, { numeric: \"auto\" });\n    this.weekdayFormatter = new Intl.DateTimeFormat(void 0, { weekday: \"long\" });\n    this.currentYearFormatter = new Intl.DateTimeFormat(void 0, {\n      weekday: \"long\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n    this.otherYearFormatter = new Intl.DateTimeFormat(void 0, {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n    this.timeFormatter = new Intl.DateTimeFormat(void 0, { hour: \"numeric\", minute: \"2-digit\" });\n  }\n  formatTime(date) {\n    return this.timeFormatter.format(date);\n  }\n  formatMachineReadableDate(date) {\n    return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n  }\n  formatRelativeDate(date) {\n    let daysDiff = Math.floor((date.getTime() - this.todayMidnight.getTime()) / TimeScope.Day);\n    if (daysDiff >= -1 && daysDiff <= 1) {\n      return capitalizeFirstLetter(this.relativeDayFormatter.format(daysDiff, \"day\"));\n    } else if (daysDiff > -7 && daysDiff < 0) {\n      return this.weekdayFormatter.format(date);\n    } else if (this.todayMidnight.getFullYear() === date.getFullYear()) {\n      return this.currentYearFormatter.format(date);\n    } else {\n      return this.otherYearFormatter.format(date);\n    }\n  }\n  formatDuration(milliseconds) {\n    return formatDuration(milliseconds);\n  }\n}\nfunction capitalizeFirstLetter(str) {\n  return str.slice(0, 1).toLocaleUpperCase() + str.slice(1);\n}\nfunction addScript(src2) {\n  return new Promise(function(resolve, reject) {\n    var s = document.createElement(\"script\");\n    s.setAttribute(\"src\", src2);\n    s.onload = resolve;\n    s.onerror = reject;\n    document.body.appendChild(s);\n  });\n}\nasync function loadOlm(olmPaths) {\n  if (window.msCrypto && !window.crypto) {\n    window.crypto = window.msCrypto;\n  }\n  if (olmPaths) {\n    if (window.WebAssembly) {\n      await addScript(olmPaths.wasmBundle);\n      await window.Olm.init({ locateFile: () => olmPaths.wasm });\n    } else {\n      await addScript(olmPaths.legacyBundle);\n      await window.Olm.init();\n    }\n    return window.Olm;\n  }\n  return null;\n}\nfunction assetAbsPath(assetPath) {\n  if (!assetPath.startsWith(\"/\")) {\n    return new URL(assetPath, document.location.href).pathname;\n  }\n  return assetPath;\n}\nasync function loadOlmWorker(assetPaths) {\n  const workerPool = new WorkerPool(assetPaths.worker, 4);\n  await workerPool.init();\n  await workerPool.sendAll({\n    type: \"load_olm\",\n    path: assetAbsPath(assetPaths.olm.legacyBundle)\n  });\n  const olmWorker = new OlmWorker(workerPool);\n  return olmWorker;\n}\nfunction adaptUIOnVisualViewportResize(container2) {\n  if (!window.visualViewport) {\n    return;\n  }\n  const handler = () => {\n    const sessionView = container2.querySelector(\".SessionView\");\n    if (!sessionView) {\n      return;\n    }\n    const scrollable = container2.querySelector(\".bottom-aligned-scroll\");\n    let scrollTopBefore, heightBefore, heightAfter;\n    if (scrollable) {\n      scrollTopBefore = scrollable.scrollTop;\n      heightBefore = scrollable.offsetHeight;\n    }\n    const offsetTop = sessionView.offsetTop + sessionView.offsetHeight - window.visualViewport.height;\n    container2.style.setProperty(\"--ios-viewport-height\", window.visualViewport.height.toString() + \"px\");\n    container2.style.setProperty(\"--ios-viewport-top\", offsetTop.toString() + \"px\");\n    if (scrollable) {\n      heightAfter = scrollable.offsetHeight;\n      scrollable.scrollTop = scrollTopBefore + heightBefore - heightAfter;\n    }\n  };\n  window.visualViewport.addEventListener(\"resize\", handler);\n  return () => {\n    window.visualViewport.removeEventListener(\"resize\", handler);\n  };\n}\nclass Platform {\n  constructor({ container: container2, assetPaths, config, configURL, logger, options = null, cryptoExtras = null }) {\n    this._container = container2;\n    this._assetPaths = assetPaths;\n    this._config = config;\n    this._configURL = configURL;\n    this.settingsStorage = new SettingsStorage(\"hydrogen_setting_v1_\");\n    this.clock = new Clock();\n    this.encoding = new Encoding();\n    this.random = Math.random;\n    this.logger = logger != null ? logger : this._createLogger(options == null ? void 0 : options.development);\n    this.history = new History();\n    this.onlineStatus = new OnlineStatus();\n    this.timeFormatter = new TimeFormatter();\n    this._serviceWorkerHandler = null;\n    if (assetPaths.serviceWorker && \"serviceWorker\" in navigator) {\n      this._serviceWorkerHandler = new ServiceWorkerHandler();\n      this._serviceWorkerHandler.registerAndStart(assetPaths.serviceWorker);\n    }\n    this.notificationService = void 0;\n    if (this._assetPaths.olm) {\n      this.crypto = new Crypto(cryptoExtras);\n    }\n    this.storageFactory = new StorageFactory(this._serviceWorkerHandler);\n    this.sessionInfoStorage = new SessionInfoStorage(\"hydrogen_sessions_v1\");\n    this.estimateStorageUsage = estimateStorageUsage;\n    if (typeof fetch === \"function\") {\n      this.request = createFetchRequest(this.clock.createTimeout, this._serviceWorkerHandler);\n    } else {\n      this.request = xhrRequest;\n    }\n    const isIE11 = !!window.MSInputMethodContext && !!document.documentMode;\n    this.isIE11 = isIE11;\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.platform) || navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1 && !window.MSStream;\n    this.isIOS = isIOS;\n    this._disposables = new Disposables();\n    this._olmPromise = void 0;\n    this._workerPromise = void 0;\n    this.mediaDevices = new MediaDevicesWrapper(navigator.mediaDevices);\n    this.webRTC = new DOMWebRTC();\n    this._themeLoader = new ThemeLoader(this);\n  }\n  async init() {\n    try {\n      await this.logger.run(\"Platform init\", async (log) => {\n        var _a;\n        if (!this._config) {\n          if (!this._configURL) {\n            throw new Error(\"Neither config nor configURL was provided!\");\n          }\n          const { status, body } = await this.request(this._configURL, { method: \"GET\", format: \"json\", cache: true }).response();\n          if (status === 404) {\n            throw new Error(`Could not find ${this._configURL}. Did you copy over config.sample.json?`);\n          } else if (status >= 400) {\n            throw new Error(`Got status ${status} while trying to fetch ${this._configURL}`);\n          }\n          this._config = body;\n        }\n        this.notificationService = new NotificationService(this._serviceWorkerHandler, this._config.push);\n        if (this._themeLoader) {\n          const manifests = this.config[\"themeManifests\"];\n          await ((_a = this._themeLoader) == null ? void 0 : _a.init(manifests, log));\n          const { themeName, themeVariant } = await this._themeLoader.getActiveTheme();\n          log.log({ l: \"Active theme\", name: themeName, variant: themeVariant });\n          await this._themeLoader.setTheme(themeName, themeVariant, log);\n        }\n      });\n    } catch (err) {\n      this._container.innerText = err.message;\n      throw err;\n    }\n  }\n  _createLogger(isDevelopment) {\n    const logger = new Logger({ platform: this });\n    const transformer = (item) => {\n      var _a;\n      if ((_a = item.e) == null ? void 0 : _a.stack) {\n        item.e.stack = item.e.stack.replace(/\\/\\?loginToken=(.+)/, \"?loginToken=<snip>\");\n      }\n      return item;\n    };\n    const logPersister = new IDBLogPersister({ name: \"hydrogen_logs\", platform: this, serializedTransformer: transformer });\n    logger.addReporter(logPersister);\n    if (isDevelopment) {\n      logger.addReporter(new ConsoleReporter());\n    }\n    return logger;\n  }\n  get updateService() {\n    return this._serviceWorkerHandler;\n  }\n  loadOlm() {\n    if (!this._olmPromise) {\n      this._olmPromise = loadOlm(this._assetPaths.olm);\n    }\n    return this._olmPromise;\n  }\n  get config() {\n    return this._config;\n  }\n  async loadOlmWorker() {\n    if (!window.WebAssembly) {\n      if (!this._workerPromise) {\n        this._workerPromise = loadOlmWorker(this._assetPaths);\n      }\n      return this._workerPromise;\n    }\n  }\n  createAndMountRootView(vm) {\n    if (this.isIE11) {\n      this._container.className += \" legacy\";\n    }\n    if (this.isIOS) {\n      this._container.className += \" ios\";\n      const disposable = adaptUIOnVisualViewportResize(this._container);\n      if (disposable) {\n        this._disposables.track(disposable);\n      }\n    }\n    this._container.addEventListener(\"error\", handleAvatarError, true);\n    this._disposables.track(() => this._container.removeEventListener(\"error\", handleAvatarError, true));\n    window.__hydrogenViewModel = vm;\n    const view = new RootView(vm);\n    this._container.appendChild(view.mount());\n  }\n  setNavigation(navigation) {\n    var _a;\n    (_a = this._serviceWorkerHandler) == null ? void 0 : _a.setNavigation(navigation);\n  }\n  createBlob(buffer, mimetype) {\n    return BlobHandle.fromBuffer(buffer, mimetype);\n  }\n  saveFileAs(blobHandle, filename) {\n    if (navigator.msSaveBlob) {\n      navigator.msSaveBlob(blobHandle.nativeBlob, filename);\n    } else {\n      downloadInIframe(this._container, this._assetPaths.downloadSandbox, blobHandle, filename, this.isIOS);\n    }\n  }\n  async copyPlaintext(text2) {\n    return await copyPlaintext(text2);\n  }\n  restart() {\n    document.location.reload();\n  }\n  openFile(mimeType = null) {\n    const input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"file\");\n    input.className = \"hidden\";\n    if (mimeType) {\n      input.setAttribute(\"accept\", mimeType);\n    }\n    const promise = new Promise((resolve) => {\n      const checkFile = () => {\n        input.removeEventListener(\"change\", checkFile, true);\n        const file = input.files[0];\n        this._container.removeChild(input);\n        if (file) {\n          resolve({ name: file.name, blob: BlobHandle.fromBlobUnsafe(file) });\n        } else {\n          resolve();\n        }\n      };\n      input.addEventListener(\"change\", checkFile, true);\n    });\n    this._container.appendChild(input);\n    input.click();\n    return promise;\n  }\n  openUrl(url) {\n    location.href = url;\n  }\n  parseHTML(html) {\n    return parseHTML(html);\n  }\n  async loadImage(blob) {\n    return ImageHandle.fromBlob(blob);\n  }\n  async loadVideo(blob) {\n    return VideoHandle.fromBlob(blob);\n  }\n  hasReadPixelPermission() {\n    return hasReadPixelPermission();\n  }\n  get devicePixelRatio() {\n    return window.devicePixelRatio || 1;\n  }\n  get version() {\n    return \"0.3.8\";\n  }\n  get themeLoader() {\n    return this._themeLoader;\n  }\n  async replaceStylesheet(newPath, log) {\n    const error = await this.logger.wrapOrRun(log, { l: \"replaceStylesheet\", location: newPath }, async (l) => {\n      let error2;\n      const head = document.querySelector(\"head\");\n      document.querySelectorAll(\".theme\").forEach((e) => e.remove());\n      const styleTag = document.createElement(\"link\");\n      styleTag.href = newPath;\n      styleTag.rel = \"stylesheet\";\n      styleTag.type = \"text/css\";\n      styleTag.className = \"theme\";\n      const promise = new Promise((resolve) => {\n        styleTag.onerror = () => {\n          error2 = new Error(`Failed to load stylesheet from ${newPath}`);\n          l.catch(error2);\n          resolve();\n        };\n        styleTag.onload = () => {\n          resolve();\n        };\n      });\n      head.appendChild(styleTag);\n      await promise;\n      return error2;\n    });\n    if (error) {\n      throw error;\n    }\n  }\n  get description() {\n    var _a;\n    return \"web-\" + ((_a = navigator.userAgent) != null ? _a : \"<unknown>\");\n  }\n  dispose() {\n    this._disposables.dispose();\n  }\n}\nvar FeatureFlag = /* @__PURE__ */ ((FeatureFlag2) => {\n  FeatureFlag2[FeatureFlag2[\"Calls\"] = 1] = \"Calls\";\n  FeatureFlag2[FeatureFlag2[\"CrossSigning\"] = 2] = \"CrossSigning\";\n  return FeatureFlag2;\n})(FeatureFlag || {});\nclass FeatureSet {\n  constructor(flags = 0) {\n    this.flags = flags;\n  }\n  withFeature(flag) {\n    return new FeatureSet(this.flags | flag);\n  }\n  withoutFeature(flag) {\n    return new FeatureSet(this.flags ^ flag);\n  }\n  isFeatureEnabled(flag) {\n    return (this.flags & flag) !== 0;\n  }\n  get calls() {\n    return this.isFeatureEnabled(1);\n  }\n  get crossSigning() {\n    return this.isFeatureEnabled(2);\n  }\n  static async load(settingsStorage) {\n    const flags = await settingsStorage.getInt(\"enabled_features\") || 0;\n    return new FeatureSet(flags);\n  }\n  async store(settingsStorage) {\n    await settingsStorage.setInt(\"enabled_features\", this.flags);\n  }\n}\nfunction createEnum(...values) {\n  const obj = {};\n  for (const value of values) {\n    obj[value] = value;\n  }\n  return Object.freeze(obj);\n}\nfunction normalizeHomeserver(homeserver) {\n  try {\n    return new URL(homeserver).origin;\n  } catch (err) {\n    return new URL(`https://${homeserver}`).origin;\n  }\n}\nasync function getWellKnownResponse(homeserver, request) {\n  const requestOptions = { format: \"json\", timeout: 3e4, method: \"GET\" };\n  try {\n    const wellKnownUrl = `${homeserver}/.well-known/matrix/client`;\n    return await request(wellKnownUrl, requestOptions).response();\n  } catch (err) {\n    if (err.name === \"ConnectionError\") {\n      return null;\n    } else {\n      throw err;\n    }\n  }\n}\nasync function lookupHomeserver(homeserver, request) {\n  var _a, _b, _c2;\n  homeserver = normalizeHomeserver(homeserver);\n  let issuer = null;\n  let account = null;\n  const wellKnownResponse = await getWellKnownResponse(homeserver, request);\n  if (wellKnownResponse && wellKnownResponse.status === 200) {\n    const { body } = wellKnownResponse;\n    const wellKnownHomeserver = (_a = body[\"m.homeserver\"]) == null ? void 0 : _a[\"base_url\"];\n    if (typeof wellKnownHomeserver === \"string\") {\n      homeserver = normalizeHomeserver(wellKnownHomeserver);\n    }\n    const wellKnownIssuer = (_b = body[\"org.matrix.msc2965.authentication\"]) == null ? void 0 : _b[\"issuer\"];\n    if (typeof wellKnownIssuer === \"string\") {\n      issuer = wellKnownIssuer;\n    }\n    const wellKnownAccount = (_c2 = body[\"org.matrix.msc2965.authentication\"]) == null ? void 0 : _c2[\"account\"];\n    if (typeof wellKnownAccount === \"string\") {\n      account = wellKnownAccount;\n    }\n  }\n  return { homeserver, issuer, account };\n}\nclass AbortableOperation extends EventEmitter {\n  constructor(run) {\n    super();\n    this._abortable = void 0;\n    const setAbortable = (abortable) => {\n      this._abortable = abortable;\n      return abortable;\n    };\n    this._progress = void 0;\n    const setProgress = (progress) => {\n      this._progress = progress;\n      this.emit(\"change\", \"progress\");\n    };\n    this.result = run(setAbortable, setProgress);\n  }\n  get progress() {\n    return this._progress;\n  }\n  abort() {\n    var _a;\n    (_a = this._abortable) == null ? void 0 : _a.abort();\n    this._abortable = void 0;\n  }\n}\nfunction encodeQueryParams(queryParams) {\n  return Object.entries(queryParams || {}).filter(([, value]) => value !== void 0).map(([name, value]) => {\n    if (typeof value === \"object\") {\n      value = JSON.stringify(value);\n    }\n    return `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n  }).join(\"&\");\n}\nfunction encodeBody(body) {\n  if (body instanceof BlobHandle) {\n    const blob = body;\n    return {\n      mimeType: blob.mimeType,\n      body: blob\n    };\n  } else if (body instanceof Map) {\n    return {\n      mimeType: \"multipart/form-data\",\n      body\n    };\n  } else if (typeof body === \"object\") {\n    const json = JSON.stringify(body);\n    return {\n      mimeType: \"application/json\",\n      body: json\n    };\n  } else {\n    throw new Error(\"Unknown body type: \" + body);\n  }\n}\nclass HomeServerRequest {\n  constructor(method, url, sourceRequest, options) {\n    let log;\n    if (options == null ? void 0 : options.log) {\n      const parent = options == null ? void 0 : options.log;\n      log = parent.child({ t: \"network\", url, method }, parent.level.Info);\n    }\n    this._log = log;\n    this._sourceRequest = sourceRequest;\n    this._promise = sourceRequest.response().then((response) => {\n      var _a, _b;\n      log == null ? void 0 : log.set(\"status\", response.status);\n      if (response.status >= 200 && response.status < 300 || ((_a = options == null ? void 0 : options.allowedStatusCodes) == null ? void 0 : _a.includes(response.status))) {\n        log == null ? void 0 : log.finish();\n        return response.body;\n      } else {\n        if (response.status >= 500) {\n          const err = new ConnectionError(`Internal Server Error`);\n          log == null ? void 0 : log.catch(err);\n          throw err;\n        } else if (response.status >= 400 && !((_b = response.body) == null ? void 0 : _b.errcode)) {\n          const err = new ConnectionError(`HTTP error status ${response.status} without errcode in body, assume this is a load balancer complaining the server is offline.`);\n          log == null ? void 0 : log.catch(err);\n          throw err;\n        } else {\n          const err = new HomeServerError(method, url, response.body, response.status);\n          log == null ? void 0 : log.set(\"errcode\", err.errcode);\n          log == null ? void 0 : log.catch(err);\n          throw err;\n        }\n      }\n    }, (err) => {\n      if (err.name === \"AbortError\" && this._sourceRequest) {\n        const err2 = new ConnectionError(`Service worker aborted, either updating or hit #187.`);\n        log == null ? void 0 : log.catch(err2);\n        throw err2;\n      } else {\n        if (err.name === \"ConnectionError\") {\n          log == null ? void 0 : log.set(\"timeout\", err.isTimeout);\n        }\n        log == null ? void 0 : log.catch(err);\n        throw err;\n      }\n    });\n  }\n  abort() {\n    var _a;\n    if (this._sourceRequest) {\n      (_a = this._log) == null ? void 0 : _a.set(\"aborted\", true);\n      this._sourceRequest.abort();\n      this._sourceRequest = void 0;\n    }\n  }\n  response() {\n    return this._promise;\n  }\n  async responseCode() {\n    const response = await this._sourceRequest.response();\n    return response.status;\n  }\n}\nconst CS_R0_PREFIX = \"/_matrix/client/r0\";\nconst CS_V3_PREFIX = \"/_matrix/client/v3\";\nconst DEHYDRATION_PREFIX = \"/_matrix/client/unstable/org.matrix.msc2697.v2\";\nclass HomeServerApi {\n  constructor({ homeserver, accessToken, request, reconnector }) {\n    this._homeserver = homeserver;\n    this._accessToken = accessToken;\n    this._requestFn = request;\n    this._reconnector = reconnector;\n  }\n  _url(csPath, prefix2 = CS_R0_PREFIX) {\n    return this._homeserver + prefix2 + csPath;\n  }\n  _baseRequest(method, url, queryParams, body, options, accessTokenSource) {\n    const queryString = encodeQueryParams(queryParams);\n    url = `${url}?${queryString}`;\n    let encodedBody;\n    const headers = /* @__PURE__ */ new Map();\n    let accessToken = null;\n    if (options == null ? void 0 : options.accessTokenOverride) {\n      accessToken = options.accessTokenOverride;\n    } else if (accessTokenSource) {\n      accessToken = accessTokenSource.get();\n    }\n    if (accessToken) {\n      headers.set(\"Authorization\", `Bearer ${accessToken}`);\n    }\n    headers.set(\"Accept\", \"application/json\");\n    if (body) {\n      const encoded = encodeBody(body);\n      headers.set(\"Content-Type\", encoded.mimeType);\n      encodedBody = encoded.body;\n    }\n    const requestResult = this._requestFn(url, {\n      method,\n      headers,\n      body: encodedBody,\n      timeout: options == null ? void 0 : options.timeout,\n      uploadProgress: options == null ? void 0 : options.uploadProgress,\n      format: \"json\",\n      cache: method !== \"GET\"\n    });\n    const hsRequest = new HomeServerRequest(method, url, requestResult, options);\n    if (this._reconnector) {\n      hsRequest.response().catch((err) => {\n        if (err.name === \"ConnectionError\") {\n          this._reconnector.onRequestFailed(this);\n        }\n      });\n    }\n    return hsRequest;\n  }\n  _unauthedRequest(method, url, queryParams, body, options) {\n    return this._baseRequest(method, url, queryParams, body, options);\n  }\n  _authedRequest(method, url, queryParams, body, options) {\n    return this._baseRequest(method, url, queryParams, body, options, this._accessToken);\n  }\n  _post(csPath, queryParams, body, options) {\n    return this._authedRequest(\"POST\", this._url(csPath, (options == null ? void 0 : options.prefix) || CS_R0_PREFIX), queryParams, body, options);\n  }\n  _put(csPath, queryParams, body, options) {\n    return this._authedRequest(\"PUT\", this._url(csPath, (options == null ? void 0 : options.prefix) || CS_R0_PREFIX), queryParams, body, options);\n  }\n  _get(csPath, queryParams, body, options) {\n    return this._authedRequest(\"GET\", this._url(csPath, (options == null ? void 0 : options.prefix) || CS_R0_PREFIX), queryParams, body, options);\n  }\n  sync(since, filter, timeout, options) {\n    return this._get(\"/sync\", { since, timeout, filter }, void 0, options);\n  }\n  context(roomId, eventId, limit, filter) {\n    return this._get(`/rooms/${encodeURIComponent(roomId)}/context/${encodeURIComponent(eventId)}`, { filter, limit });\n  }\n  messages(roomId, params, options) {\n    return this._get(`/rooms/${encodeURIComponent(roomId)}/messages`, params, void 0, options);\n  }\n  members(roomId, params, options) {\n    return this._get(`/rooms/${encodeURIComponent(roomId)}/members`, params, void 0, options);\n  }\n  send(roomId, eventType, txnId, content, options) {\n    return this._put(`/rooms/${encodeURIComponent(roomId)}/send/${encodeURIComponent(eventType)}/${encodeURIComponent(txnId)}`, {}, content, options);\n  }\n  event(roomId, eventId, options) {\n    return this._get(`/rooms/${encodeURIComponent(roomId)}/event/${encodeURIComponent(eventId)}`, void 0, void 0, options);\n  }\n  redact(roomId, eventId, txnId, content, options) {\n    return this._put(`/rooms/${encodeURIComponent(roomId)}/redact/${encodeURIComponent(eventId)}/${encodeURIComponent(txnId)}`, {}, content, options);\n  }\n  receipt(roomId, receiptType, eventId, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/receipt/${encodeURIComponent(receiptType)}/${encodeURIComponent(eventId)}`, {}, {}, options);\n  }\n  state(roomId, eventType, stateKey, options) {\n    return this._get(`/rooms/${encodeURIComponent(roomId)}/state/${encodeURIComponent(eventType)}/${encodeURIComponent(stateKey)}`, {}, void 0, options);\n  }\n  sendState(roomId, eventType, stateKey, content, options) {\n    return this._put(`/rooms/${encodeURIComponent(roomId)}/state/${encodeURIComponent(eventType)}/${encodeURIComponent(stateKey)}`, {}, content, options);\n  }\n  getLoginFlows() {\n    return this._unauthedRequest(\"GET\", this._url(\"/login\"));\n  }\n  register(username, password, initialDeviceDisplayName, auth, inhibitLogin = false, options = {}) {\n    options.allowedStatusCodes = [401];\n    const body = {\n      auth,\n      password,\n      initial_device_displayname: initialDeviceDisplayName,\n      inhibit_login: inhibitLogin\n    };\n    if (username) {\n      body.username = username;\n    }\n    return this._unauthedRequest(\"POST\", this._url(\"/register\", CS_V3_PREFIX), void 0, body, options);\n  }\n  passwordLogin(username, password, initialDeviceDisplayName, options) {\n    return this._unauthedRequest(\"POST\", this._url(\"/login\"), void 0, {\n      \"type\": \"m.login.password\",\n      \"identifier\": {\n        \"type\": \"m.id.user\",\n        \"user\": username\n      },\n      \"password\": password,\n      \"initial_device_display_name\": initialDeviceDisplayName\n    }, options);\n  }\n  tokenLogin(loginToken, txnId, initialDeviceDisplayName, options) {\n    return this._unauthedRequest(\"POST\", this._url(\"/login\"), void 0, {\n      \"type\": \"m.login.token\",\n      \"identifier\": {\n        \"type\": \"m.id.user\"\n      },\n      \"token\": loginToken,\n      \"txn_id\": txnId,\n      \"initial_device_display_name\": initialDeviceDisplayName\n    }, options);\n  }\n  createFilter(userId, filter, options) {\n    return this._post(`/user/${encodeURIComponent(userId)}/filter`, {}, filter, options);\n  }\n  versions(options) {\n    return this._unauthedRequest(\"GET\", `${this._homeserver}/_matrix/client/versions`, void 0, void 0, options);\n  }\n  uploadKeys(dehydratedDeviceId, payload, options) {\n    let path = \"/keys/upload\";\n    if (dehydratedDeviceId) {\n      path = path + `/${encodeURIComponent(dehydratedDeviceId)}`;\n    }\n    return this._post(path, {}, payload, options);\n  }\n  uploadSignatures(payload, options) {\n    return this._post(\"/keys/signatures/upload\", {}, payload, options);\n  }\n  queryKeys(queryRequest, options) {\n    return this._post(\"/keys/query\", {}, queryRequest, options);\n  }\n  claimKeys(payload, options) {\n    return this._post(\"/keys/claim\", {}, payload, options);\n  }\n  sendToDevice(type, payload, txnId, options) {\n    return this._put(`/sendToDevice/${encodeURIComponent(type)}/${encodeURIComponent(txnId)}`, {}, payload, options);\n  }\n  roomKeysVersion(version, options) {\n    let versionPart = \"\";\n    if (version) {\n      versionPart = `/${encodeURIComponent(version)}`;\n    }\n    return this._get(`/room_keys/version${versionPart}`, void 0, void 0, options);\n  }\n  roomKeyForRoomAndSession(version, roomId, sessionId, options) {\n    return this._get(`/room_keys/keys/${encodeURIComponent(roomId)}/${encodeURIComponent(sessionId)}`, { version }, void 0, options);\n  }\n  uploadRoomKeysToBackup(version, payload, options) {\n    return this._put(`/room_keys/keys`, { version }, payload, options);\n  }\n  uploadAttachment(blob, filename, options) {\n    return this._authedRequest(\"POST\", `${this._homeserver}/_matrix/media/r0/upload`, { filename }, blob, options);\n  }\n  setPusher(pusher, options) {\n    return this._post(\"/pushers/set\", {}, pusher, options);\n  }\n  getPushers(options) {\n    return this._get(\"/pushers\", void 0, void 0, options);\n  }\n  join(roomId, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/join`, {}, {}, options);\n  }\n  joinIdOrAlias(roomIdOrAlias, options) {\n    return this._post(`/join/${encodeURIComponent(roomIdOrAlias)}`, {}, {}, options);\n  }\n  invite(roomId, userId, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/invite`, {}, {\n      user_id: userId\n    }, options);\n  }\n  leave(roomId, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/leave`, {}, {}, options);\n  }\n  forget(roomId, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/forget`, {}, {}, options);\n  }\n  kick(roomId, userId, reason, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/kick`, {}, {\n      user_id: userId,\n      reason\n    }, options);\n  }\n  ban(roomId, userId, reason, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/ban`, {}, {\n      user_id: userId,\n      reason\n    }, options);\n  }\n  unban(roomId, userId, reason, options) {\n    return this._post(`/rooms/${encodeURIComponent(roomId)}/unban`, {}, {\n      user_id: userId,\n      reason\n    }, options);\n  }\n  logout(options) {\n    return this._post(`/logout`, {}, {}, options);\n  }\n  whoami(options) {\n    return this._get(`/account/whoami`, void 0, void 0, options);\n  }\n  getDehydratedDevice(options = {}) {\n    options.prefix = DEHYDRATION_PREFIX;\n    return this._get(`/dehydrated_device`, void 0, void 0, options);\n  }\n  createDehydratedDevice(payload, options = {}) {\n    options.prefix = DEHYDRATION_PREFIX;\n    return this._put(`/dehydrated_device`, {}, payload, options);\n  }\n  claimDehydratedDevice(deviceId, options = {}) {\n    options.prefix = DEHYDRATION_PREFIX;\n    return this._post(`/dehydrated_device/claim`, {}, { device_id: deviceId }, options);\n  }\n  searchProfile(searchTerm, limit, options) {\n    return this._post(`/user_directory/search`, {}, {\n      limit: limit != null ? limit : 10,\n      search_term: searchTerm\n    }, options);\n  }\n  profile(userId, options) {\n    return this._get(`/profile/${encodeURIComponent(userId)}`);\n  }\n  setProfileDisplayName(userId, displayName, options) {\n    return this._put(`/profile/${encodeURIComponent(userId)}/displayname`, {}, { displayname: displayName }, options);\n  }\n  setProfileAvatarUrl(userId, avatarUrl, options) {\n    return this._put(`/profile/${encodeURIComponent(userId)}/avatar_url`, {}, { avatar_url: avatarUrl }, options);\n  }\n  createRoom(payload, options) {\n    return this._post(`/createRoom`, {}, payload, options);\n  }\n  accountData(ownUserId, type, options) {\n    return this._get(`/user/${encodeURIComponent(ownUserId)}/account_data/${encodeURIComponent(type)}`, void 0, void 0, options);\n  }\n  setAccountData(ownUserId, type, content, options) {\n    return this._put(`/user/${encodeURIComponent(ownUserId)}/account_data/${encodeURIComponent(type)}`, {}, content, options);\n  }\n  roomAccountData(ownUserId, roomId, type, options) {\n    return this._get(`/user/${encodeURIComponent(ownUserId)}/rooms/${encodeURIComponent(roomId)}/account_data/${encodeURIComponent(type)}`, void 0, void 0, options);\n  }\n  setRoomAccountData(ownUserId, roomId, type, content, options) {\n    return this._put(`/user/${encodeURIComponent(ownUserId)}/rooms/${encodeURIComponent(roomId)}/account_data/${encodeURIComponent(type)}`, {}, content, options);\n  }\n  getTurnServer(options) {\n    return this._get(`/voip/turnServer`, void 0, void 0, options);\n  }\n}\nconst WELL_KNOWN = \".well-known/openid-configuration\";\nconst RANDOM_CHARSET = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nconst randomChar = () => RANDOM_CHARSET.charAt(Math.floor(Math.random() * 1e10) % RANDOM_CHARSET.length);\nconst randomString = (length) => Array.from({ length }, randomChar).join(\"\");\nconst isValidBearerToken = (t) => typeof t == \"object\" && t[\"token_type\"] === \"Bearer\" && typeof t[\"access_token\"] === \"string\" && (!(\"refresh_token\" in t) || typeof t[\"refresh_token\"] === \"string\") && (!(\"expires_in\" in t) || typeof t[\"expires_in\"] === \"number\");\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(`Assertion failed: ${message}`);\n  }\n}\nclass OidcApi {\n  constructor({ issuer, request, encoding, crypto: crypto2, urlRouter, clientId, staticClients = {} }) {\n    this._issuer = issuer;\n    this._requestFn = request;\n    this._encoding = encoding;\n    this._crypto = crypto2;\n    this._urlRouter = urlRouter;\n    this._staticClients = staticClients;\n    if (clientId) {\n      this._registrationPromise = Promise.resolve({ client_id: clientId });\n    }\n  }\n  get clientMetadata() {\n    return {\n      client_name: \"Hydrogen Web\",\n      logo_uri: this._urlRouter.absoluteUrlForAsset(\"icon.png\"),\n      client_uri: this._urlRouter.absoluteAppUrl(),\n      tos_uri: \"https://element.io/terms-of-service\",\n      policy_uri: \"https://element.io/privacy\",\n      response_types: [\"code\"],\n      grant_types: [\"authorization_code\", \"refresh_token\"],\n      redirect_uris: [this._urlRouter.createOIDCRedirectURL()],\n      id_token_signed_response_alg: \"RS256\",\n      token_endpoint_auth_method: \"none\",\n      post_logout_redirect_uris: [this._urlRouter.createOIDCPostLogoutRedirectURL()]\n    };\n  }\n  get metadataUrl() {\n    return new URL(WELL_KNOWN, `${this._issuer}${this._issuer.endsWith(\"/\") ? \"\" : \"/\"}`).toString();\n  }\n  get issuer() {\n    return this._issuer;\n  }\n  async clientId() {\n    return (await this.registration())[\"client_id\"];\n  }\n  registration() {\n    if (!this._registrationPromise) {\n      this._registrationPromise = (async () => {\n        const authority = `${this.issuer}${this.issuer.endsWith(\"/\") ? \"\" : \"/\"}`;\n        if (this._staticClients[authority]) {\n          return this._staticClients[authority];\n        }\n        const headers = /* @__PURE__ */ new Map();\n        headers.set(\"Accept\", \"application/json\");\n        headers.set(\"Content-Type\", \"application/json\");\n        const req = this._requestFn(await this.registrationEndpoint(), {\n          method: \"POST\",\n          headers,\n          format: \"json\",\n          body: JSON.stringify(this.clientMetadata)\n        });\n        const res = await req.response();\n        if (res.status >= 400) {\n          throw new Error(\"failed to register client\");\n        }\n        return res.body;\n      })();\n    }\n    return this._registrationPromise;\n  }\n  metadata() {\n    if (!this._metadataPromise) {\n      this._metadataPromise = (async () => {\n        const headers = /* @__PURE__ */ new Map();\n        headers.set(\"Accept\", \"application/json\");\n        const req = this._requestFn(this.metadataUrl, {\n          method: \"GET\",\n          headers,\n          format: \"json\"\n        });\n        const res = await req.response();\n        if (res.status >= 400) {\n          throw new Error(\"failed to request metadata\");\n        }\n        return res.body;\n      })();\n    }\n    return this._metadataPromise;\n  }\n  async validate() {\n    const m = await this.metadata();\n    assert(typeof m.authorization_endpoint === \"string\", \"Has an authorization endpoint\");\n    assert(typeof m.token_endpoint === \"string\", \"Has a token endpoint\");\n    assert(typeof m.registration_endpoint === \"string\", \"Has a registration endpoint\");\n    assert(Array.isArray(m.response_types_supported) && m.response_types_supported.includes(\"code\"), \"Supports the code response type\");\n    assert(Array.isArray(m.response_modes_supported) && m.response_modes_supported.includes(\"fragment\"), \"Supports the fragment response mode\");\n    assert(typeof m.authorization_endpoint === \"string\" || Array.isArray(m.grant_types_supported) && m.grant_types_supported.includes(\"authorization_code\"), \"Supports the authorization_code grant type\");\n    assert(Array.isArray(m.code_challenge_methods_supported) && m.code_challenge_methods_supported.includes(\"S256\"), \"Supports the authorization_code grant type\");\n  }\n  async _generateCodeChallenge(codeVerifier) {\n    const data = this._encoding.utf8.encode(codeVerifier);\n    const digest = await this._crypto.digest(\"SHA-256\", data);\n    const base64Digest = this._encoding.base64.encode(digest);\n    return base64Digest.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n  }\n  async authorizationEndpoint({\n    state,\n    redirectUri,\n    scope,\n    nonce,\n    codeVerifier\n  }) {\n    const metadata = await this.metadata();\n    const url = new URL(metadata[\"authorization_endpoint\"]);\n    url.searchParams.append(\"response_mode\", \"fragment\");\n    url.searchParams.append(\"response_type\", \"code\");\n    url.searchParams.append(\"redirect_uri\", redirectUri);\n    url.searchParams.append(\"client_id\", await this.clientId());\n    url.searchParams.append(\"state\", state);\n    url.searchParams.append(\"scope\", scope);\n    if (nonce) {\n      url.searchParams.append(\"nonce\", nonce);\n    }\n    if (codeVerifier) {\n      url.searchParams.append(\"code_challenge_method\", \"S256\");\n      url.searchParams.append(\"code_challenge\", await this._generateCodeChallenge(codeVerifier));\n    }\n    return url.toString();\n  }\n  async tokenEndpoint() {\n    const metadata = await this.metadata();\n    return metadata[\"token_endpoint\"];\n  }\n  async registrationEndpoint() {\n    const metadata = await this.metadata();\n    return metadata[\"registration_endpoint\"];\n  }\n  async revocationEndpoint() {\n    const metadata = await this.metadata();\n    return metadata[\"revocation_endpoint\"];\n  }\n  async endSessionEndpoint({ idTokenHint, logoutHint, redirectUri, state }) {\n    const metadata = await this.metadata();\n    const endpoint = metadata[\"end_session_endpoint\"];\n    if (!endpoint) {\n      return void 0;\n    }\n    if (!redirectUri) {\n      redirectUri = this._urlRouter.createOIDCPostLogoutRedirectURL();\n    }\n    const url = new URL(endpoint);\n    url.searchParams.append(\"client_id\", await this.clientId());\n    url.searchParams.append(\"post_logout_redirect_uri\", redirectUri);\n    if (idTokenHint) {\n      url.searchParams.append(\"id_token_hint\", idTokenHint);\n    }\n    if (logoutHint) {\n      url.searchParams.append(\"logout_hint\", logoutHint);\n    }\n    if (state) {\n      url.searchParams.append(\"state\", state);\n    }\n    return url.href;\n  }\n  async isGuestAvailable() {\n    var _a;\n    const metadata = await this.metadata();\n    return (_a = metadata[\"scopes_supported\"]) == null ? void 0 : _a.includes(\"urn:matrix:org.matrix.msc2967.client:api:guest\");\n  }\n  generateDeviceScope() {\n    const deviceId = randomString(10);\n    return `urn:matrix:org.matrix.msc2967.client:device:${deviceId}`;\n  }\n  generateParams({ scope, redirectUri }) {\n    return {\n      scope,\n      redirectUri,\n      state: randomString(8),\n      nonce: randomString(8),\n      codeVerifier: randomString(64)\n    };\n  }\n  async completeAuthorizationCodeGrant({\n    codeVerifier,\n    code,\n    redirectUri\n  }) {\n    const params = new URLSearchParams();\n    params.append(\"grant_type\", \"authorization_code\");\n    params.append(\"client_id\", await this.clientId());\n    params.append(\"code_verifier\", codeVerifier);\n    params.append(\"redirect_uri\", redirectUri);\n    params.append(\"code\", code);\n    const body = params.toString();\n    const headers = /* @__PURE__ */ new Map();\n    headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    const req = this._requestFn(await this.tokenEndpoint(), {\n      method: \"POST\",\n      headers,\n      format: \"json\",\n      body\n    });\n    const res = await req.response();\n    if (res.status >= 400) {\n      throw new Error(\"failed to exchange authorization code\");\n    }\n    const token = res.body;\n    assert(isValidBearerToken(token), \"Got back a valid bearer token\");\n    return token;\n  }\n  async refreshToken({\n    refreshToken\n  }) {\n    const params = new URLSearchParams();\n    params.append(\"grant_type\", \"refresh_token\");\n    params.append(\"client_id\", await this.clientId());\n    params.append(\"refresh_token\", refreshToken);\n    const body = params.toString();\n    const headers = /* @__PURE__ */ new Map();\n    headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    const req = this._requestFn(await this.tokenEndpoint(), {\n      method: \"POST\",\n      headers,\n      format: \"json\",\n      body\n    });\n    const res = await req.response();\n    if (res.status >= 400) {\n      throw new Error(\"failed to use refresh token\");\n    }\n    const token = res.body;\n    assert(isValidBearerToken(token), \"Got back a valid bearer token\");\n    return token;\n  }\n  async revokeToken({\n    token,\n    type\n  }) {\n    const revocationEndpoint = await this.revocationEndpoint();\n    if (!revocationEndpoint) {\n      return;\n    }\n    const params = new URLSearchParams();\n    params.append(\"token_type\", type);\n    params.append(\"token\", token);\n    params.append(\"client_id\", await this.clientId());\n    const body = params.toString();\n    const headers = /* @__PURE__ */ new Map();\n    headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    const req = this._requestFn(revocationEndpoint, {\n      method: \"POST\",\n      headers,\n      body\n    });\n    const res = await req.response();\n    if (res.status >= 400) {\n      throw new Error(\"failed to revoke token\");\n    }\n  }\n}\nclass BaseObservableValue extends BaseObservable {\n  emit(argument) {\n    for (const h of this._handlers) {\n      h(argument);\n    }\n  }\n  waitFor(predicate) {\n    if (predicate(this.get())) {\n      return new ResolvedWaitForHandle(Promise.resolve(this.get()));\n    } else {\n      return new WaitForHandle(this, predicate);\n    }\n  }\n  flatMap(mapper) {\n    return new FlatMapObservableValue(this, mapper);\n  }\n  map(mapper) {\n    return new MappedObservableValue(this, mapper);\n  }\n}\nclass WaitForHandle {\n  constructor(observable, predicate) {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._subscription = observable.subscribe((v) => {\n        if (predicate(v)) {\n          this._reject = null;\n          resolve(v);\n          this.dispose();\n        }\n      });\n    });\n  }\n  get promise() {\n    return this._promise;\n  }\n  dispose() {\n    if (this._subscription) {\n      this._subscription();\n      this._subscription = null;\n    }\n    if (this._reject) {\n      this._reject(new AbortError());\n      this._reject = null;\n    }\n  }\n}\nclass ResolvedWaitForHandle {\n  constructor(promise) {\n    this.promise = promise;\n  }\n  dispose() {\n  }\n}\nclass ObservableValue extends BaseObservableValue {\n  constructor(initialValue) {\n    super();\n    this._value = initialValue;\n  }\n  get() {\n    return this._value;\n  }\n  set(value) {\n    if (value !== this._value) {\n      this._value = value;\n      this.emit(this._value);\n    }\n  }\n}\nclass FlatMapObservableValue extends BaseObservableValue {\n  constructor(source, mapper) {\n    super();\n    this.source = source;\n    this.mapper = mapper;\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this.sourceSubscription = this.sourceSubscription();\n    if (this.targetSubscription) {\n      this.targetSubscription = this.targetSubscription();\n    }\n  }\n  onSubscribeFirst() {\n    super.onSubscribeFirst();\n    this.sourceSubscription = this.source.subscribe(() => {\n      this.updateTargetSubscription();\n      this.emit(this.get());\n    });\n    this.updateTargetSubscription();\n  }\n  updateTargetSubscription() {\n    const sourceValue = this.source.get();\n    if (sourceValue) {\n      const target = this.mapper(sourceValue);\n      if (target) {\n        if (!this.targetSubscription) {\n          this.targetSubscription = target.subscribe(() => this.emit(this.get()));\n        }\n        return;\n      }\n    }\n    if (this.targetSubscription) {\n      this.targetSubscription = this.targetSubscription();\n    }\n  }\n  get() {\n    const sourceValue = this.source.get();\n    if (!sourceValue) {\n      return void 0;\n    }\n    const mapped = this.mapper(sourceValue);\n    return mapped == null ? void 0 : mapped.get();\n  }\n}\nclass MappedObservableValue extends BaseObservableValue {\n  constructor(source, mapper) {\n    super();\n    this.source = source;\n    this.mapper = mapper;\n  }\n  onUnsubscribeLast() {\n    super.onUnsubscribeLast();\n    this.sourceSubscription = this.sourceSubscription();\n  }\n  onSubscribeFirst() {\n    super.onSubscribeFirst();\n    this.sourceSubscription = this.source.subscribe(() => {\n      this.emit(this.get());\n    });\n  }\n  get() {\n    const sourceValue = this.source.get();\n    return this.mapper(sourceValue);\n  }\n}\nclass TokenRefresher {\n  constructor({\n    oidcApi,\n    refreshToken,\n    accessToken,\n    accessTokenExpiresAt,\n    anticipation,\n    clock\n  }) {\n    this._token = new ObservableValue({\n      accessToken,\n      accessTokenExpiresAt,\n      refreshToken\n    });\n    this._accessToken = this._token.map((t) => t.accessToken);\n    this._anticipation = anticipation;\n    this._oidcApi = oidcApi;\n    this._clock = clock;\n  }\n  async start() {\n    if (this.needsRenewing) {\n      await this.renew();\n    }\n    this._running = true;\n    this._renewingLoop();\n  }\n  stop() {\n    this._running = false;\n    if (this._timeout) {\n      this._timeout.dispose();\n    }\n  }\n  get needsRenewing() {\n    const remaining = this._token.get().accessTokenExpiresAt - this._clock.now();\n    const anticipated = remaining - this._anticipation;\n    return anticipated < 0;\n  }\n  async _renewingLoop() {\n    while (this._running) {\n      const remaining = this._token.get().accessTokenExpiresAt - this._clock.now();\n      const anticipated = remaining - this._anticipation;\n      if (anticipated > 0) {\n        this._timeout = this._clock.createTimeout(anticipated);\n        try {\n          await this._timeout.elapsed();\n        } catch {\n          return;\n        }\n      }\n      await this.renew();\n    }\n  }\n  async renew() {\n    let refreshToken = this._token.get().refreshToken;\n    const response = await this._oidcApi.refreshToken({\n      refreshToken\n    });\n    if (typeof response.expires_in !== \"number\") {\n      throw new Error(\"Refreshed access token does not expire\");\n    }\n    if (response.refresh_token) {\n      refreshToken = response.refresh_token;\n    }\n    this._token.set({\n      refreshToken,\n      accessToken: response.access_token,\n      accessTokenExpiresAt: this._clock.now() + response.expires_in * 1e3\n    });\n  }\n  get accessToken() {\n    return this._accessToken;\n  }\n  get token() {\n    return this._token;\n  }\n}\nclass ExponentialRetryDelay {\n  constructor(createTimeout) {\n    this._start = 2e3;\n    this._current = 2e3;\n    const start = 2e3;\n    this._start = start;\n    this._current = start;\n    this._createTimeout = createTimeout;\n    this._max = 60 * 5 * 1e3;\n  }\n  async waitForRetry() {\n    this._timeout = this._createTimeout(this._current);\n    try {\n      await this._timeout.elapsed();\n      const next = 2 * this._current;\n      this._current = Math.min(this._max, next);\n    } catch (err) {\n      if (!(err instanceof AbortError)) {\n        throw err;\n      }\n    } finally {\n      this._timeout = void 0;\n    }\n  }\n  abort() {\n    if (this._timeout) {\n      this._timeout.abort();\n    }\n  }\n  reset() {\n    this._current = this._start;\n    this.abort();\n  }\n  get nextValue() {\n    return this._current;\n  }\n}\nvar ConnectionStatus = /* @__PURE__ */ ((ConnectionStatus2) => {\n  ConnectionStatus2[ConnectionStatus2[\"Waiting\"] = 0] = \"Waiting\";\n  ConnectionStatus2[ConnectionStatus2[\"Reconnecting\"] = 1] = \"Reconnecting\";\n  ConnectionStatus2[ConnectionStatus2[\"Online\"] = 2] = \"Online\";\n  return ConnectionStatus2;\n})(ConnectionStatus || {});\nclass Reconnector {\n  constructor({ retryDelay, createMeasure, onlineStatus }) {\n    this._onlineStatus = onlineStatus;\n    this._retryDelay = retryDelay;\n    this._createTimeMeasure = createMeasure;\n    this._state = new ObservableValue$1(2);\n    this._isReconnecting = false;\n  }\n  get lastVersionsResponse() {\n    return this._versionsResponse;\n  }\n  get connectionStatus() {\n    return this._state;\n  }\n  get retryIn() {\n    if (this._state.get() === 0) {\n      return this._retryDelay.nextValue - this._stateSince.measure();\n    }\n    return 0;\n  }\n  async onRequestFailed(hsApi) {\n    if (!this._isReconnecting) {\n      this._isReconnecting = true;\n      const onlineStatusSubscription = this._onlineStatus && this._onlineStatus.subscribe((online) => {\n        if (online) {\n          this.tryNow();\n        }\n      });\n      try {\n        await this._reconnectLoop(hsApi);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        if (onlineStatusSubscription) {\n          onlineStatusSubscription();\n        }\n        this._isReconnecting = false;\n      }\n    }\n  }\n  tryNow() {\n    if (this._retryDelay) {\n      this._retryDelay.abort();\n    }\n  }\n  _setState(state) {\n    if (state !== this._state.get()) {\n      if (state === 0) {\n        this._stateSince = this._createTimeMeasure();\n      } else {\n        this._stateSince = null;\n      }\n      this._state.set(state);\n    }\n  }\n  async _reconnectLoop(hsApi) {\n    this._versionsResponse = void 0;\n    this._retryDelay.reset();\n    while (!this._versionsResponse) {\n      try {\n        this._setState(1);\n        const versionsRequest = hsApi.versions({ timeout: 3e4 });\n        this._versionsResponse = await versionsRequest.response();\n        this._setState(2);\n      } catch (err) {\n        if (err.name === \"ConnectionError\") {\n          this._setState(0);\n          await this._retryDelay.waitForRetry();\n        } else {\n          throw err;\n        }\n      }\n    }\n  }\n}\nasync function decryptAttachment(platform, ciphertextBuffer, info) {\n  if (info === void 0 || info.key === void 0 || info.iv === void 0 || info.hashes === void 0 || info.hashes.sha256 === void 0) {\n    throw new Error(\"Invalid info. Missing info.key, info.iv or info.hashes.sha256 key\");\n  }\n  const { crypto: crypto2 } = platform;\n  const { base64: base642 } = platform.encoding;\n  var ivArray = base642.decode(info.iv);\n  var expectedSha256base64 = base642.encode(base642.decode(info.hashes.sha256));\n  const digestResult = await crypto2.digest(\"SHA-256\", ciphertextBuffer);\n  if (base642.encode(new Uint8Array(digestResult)) != expectedSha256base64) {\n    throw new Error(\"Mismatched SHA-256 digest\");\n  }\n  var counterLength;\n  if (info.v == \"v1\" || info.v == \"v2\") {\n    counterLength = 64;\n  } else {\n    counterLength = 128;\n  }\n  const decryptedBuffer = await crypto2.aes.decryptCTR({\n    jwkKey: info.key,\n    iv: ivArray,\n    data: ciphertextBuffer,\n    counterLength\n  });\n  return decryptedBuffer;\n}\nasync function encryptAttachment(platform, blob) {\n  const { crypto: crypto2 } = platform;\n  const { base64: base642 } = platform.encoding;\n  const iv = await crypto2.aes.generateIV();\n  const key = await crypto2.aes.generateKey(\"jwk\", 256);\n  const buffer = await blob.readAsBuffer();\n  const ciphertext = await crypto2.aes.encryptCTR({ jwkKey: key, iv, data: buffer });\n  const digest = await crypto2.digest(\"SHA-256\", ciphertext);\n  return {\n    blob: platform.createBlob(ciphertext, \"application/octet-stream\"),\n    info: {\n      v: \"v2\",\n      key,\n      iv: base642.encodeUnpadded(iv),\n      hashes: {\n        sha256: base642.encodeUnpadded(digest)\n      }\n    }\n  };\n}\nclass MediaRepository {\n  constructor({ homeserver, platform }) {\n    this._homeserver = homeserver;\n    this._platform = platform;\n  }\n  mxcUrlThumbnail(url, width, height, method) {\n    const parts = this._parseMxcUrl(url);\n    if (parts) {\n      const [serverName, mediaId] = parts;\n      const httpUrl = `${this._homeserver}/_matrix/media/r0/thumbnail/${encodeURIComponent(serverName)}/${encodeURIComponent(mediaId)}`;\n      return httpUrl + \"?\" + encodeQueryParams({ width: Math.round(width), height: Math.round(height), method });\n    }\n    return void 0;\n  }\n  mxcUrl(url) {\n    const parts = this._parseMxcUrl(url);\n    if (parts) {\n      const [serverName, mediaId] = parts;\n      return `${this._homeserver}/_matrix/media/r0/download/${encodeURIComponent(serverName)}/${encodeURIComponent(mediaId)}`;\n    }\n    return void 0;\n  }\n  _parseMxcUrl(url) {\n    const prefix2 = \"mxc://\";\n    if (url.startsWith(prefix2)) {\n      return url.substr(prefix2.length).split(\"/\", 2);\n    } else {\n      return void 0;\n    }\n  }\n  async downloadEncryptedFile(fileEntry, cache = false) {\n    const url = this.mxcUrl(fileEntry.url);\n    const { body: encryptedBuffer } = await this._platform.request(url, { method: \"GET\", format: \"buffer\", cache }).response();\n    const decryptedBuffer = await decryptAttachment(this._platform, encryptedBuffer, fileEntry);\n    return this._platform.createBlob(decryptedBuffer, fileEntry.mimetype);\n  }\n  async downloadPlaintextFile(mxcUrl, mimetype, cache = false) {\n    const url = this.mxcUrl(mxcUrl);\n    const { body: buffer } = await this._platform.request(url, { method: \"GET\", format: \"buffer\", cache }).response();\n    return this._platform.createBlob(buffer, mimetype);\n  }\n  async downloadAttachment(content, cache = false) {\n    var _a;\n    if (content.file) {\n      return this.downloadEncryptedFile(content.file, cache);\n    } else {\n      return this.downloadPlaintextFile(content.url, (_a = content.info) == null ? void 0 : _a.mimetype, cache);\n    }\n  }\n}\nclass Request {\n  constructor(methodName, args) {\n    this.methodName = methodName;\n    this.args = args;\n    this._responsePromise = new Promise((resolve, reject) => {\n      this.responseResolve = resolve;\n      this.responseReject = reject;\n    });\n  }\n  abort() {\n    var _a;\n    if (this._requestResult) {\n      this._requestResult.abort();\n    } else {\n      this.responseReject(new AbortError());\n      (_a = this.responseCodeReject) == null ? void 0 : _a.call(this, new AbortError());\n    }\n  }\n  response() {\n    return this._responsePromise;\n  }\n  responseCode() {\n    if (this.requestResult) {\n      return this.requestResult.responseCode();\n    }\n    if (!this._responseCodePromise) {\n      this._responseCodePromise = new Promise((resolve, reject) => {\n        this.responseCodeResolve = resolve;\n        this.responseCodeReject = reject;\n      });\n    }\n    return this._responseCodePromise;\n  }\n  async setRequestResult(result) {\n    var _a, _b, _c2;\n    this._requestResult = result;\n    const response = await ((_a = this._requestResult) == null ? void 0 : _a.response());\n    this.responseResolve(response);\n    const responseCode = await ((_b = this._requestResult) == null ? void 0 : _b.responseCode());\n    (_c2 = this.responseCodeResolve) == null ? void 0 : _c2.call(this, responseCode);\n  }\n  get requestResult() {\n    return this._requestResult;\n  }\n}\nclass HomeServerApiWrapper {\n  constructor(scheduler) {\n    this._scheduler = scheduler;\n  }\n}\nfor (const methodName of Object.getOwnPropertyNames(HomeServerApi.prototype)) {\n  if (methodName !== \"constructor\" && !methodName.startsWith(\"_\")) {\n    HomeServerApiWrapper.prototype[methodName] = function(...args) {\n      return this._scheduler._hsApiRequest(methodName, args);\n    };\n  }\n}\nclass RequestScheduler {\n  constructor({ hsApi, clock }) {\n    this._requests = /* @__PURE__ */ new Set();\n    this._stopped = false;\n    this._wrapper = new HomeServerApiWrapper(this);\n    this._hsApi = hsApi;\n    this._clock = clock;\n  }\n  get hsApi() {\n    return this._wrapper;\n  }\n  stop() {\n    this._stopped = true;\n    for (const request of this._requests) {\n      request.abort();\n    }\n    this._requests.clear();\n  }\n  start() {\n    this._stopped = false;\n  }\n  _hsApiRequest(name, args) {\n    const request = new Request(name, args);\n    this._doSend(request);\n    return request;\n  }\n  async _doSend(request) {\n    this._requests.add(request);\n    try {\n      let retryDelay;\n      while (!this._stopped) {\n        try {\n          const requestResult = this._hsApi[request.methodName].apply(this._hsApi, request.args);\n          await request.setRequestResult(requestResult);\n          return;\n        } catch (err) {\n          if (err instanceof HomeServerError && err.errcode === \"M_LIMIT_EXCEEDED\") {\n            if (Number.isSafeInteger(err.retry_after_ms)) {\n              await this._clock.createTimeout(err.retry_after_ms).elapsed();\n            } else {\n              if (!retryDelay) {\n                retryDelay = new ExponentialRetryDelay(this._clock.createTimeout);\n              }\n              await retryDelay.waitForRetry();\n            }\n          } else {\n            request.responseReject(err);\n            return;\n          }\n        }\n      }\n      if (this._stopped) {\n        request.abort();\n      }\n    } finally {\n      this._requests.delete(request);\n    }\n  }\n}\nconst INCREMENTAL_TIMEOUT = 3e4;\nconst SyncStatus = createEnum(\"InitialSync\", \"CatchupSync\", \"Syncing\", \"Stopped\");\nfunction timelineIsEmpty(roomResponse) {\n  var _a;\n  try {\n    const events = (_a = roomResponse == null ? void 0 : roomResponse.timeline) == null ? void 0 : _a.events;\n    return Array.isArray(events) && events.length === 0;\n  } catch (err) {\n    return true;\n  }\n}\nclass Sync {\n  constructor({ hsApi, session, storage, logger }) {\n    this._hsApi = hsApi;\n    this._logger = logger;\n    this._session = session;\n    this._storage = storage;\n    this._currentRequest = null;\n    this._status = new ObservableValue$1(SyncStatus.Stopped);\n    this._error = null;\n  }\n  get status() {\n    return this._status;\n  }\n  get error() {\n    return this._error;\n  }\n  start() {\n    if (this._status.get() !== SyncStatus.Stopped) {\n      return;\n    }\n    this._error = null;\n    let syncToken = this._session.syncToken;\n    if (syncToken) {\n      this._status.set(SyncStatus.CatchupSync);\n    } else {\n      this._status.set(SyncStatus.InitialSync);\n    }\n    this._syncLoop(syncToken);\n  }\n  async _syncLoop(syncToken) {\n    while (this._status.get() !== SyncStatus.Stopped) {\n      let roomStates;\n      let sessionChanges;\n      let wasCatchupOrInitial = this._status.get() === SyncStatus.CatchupSync || this._status.get() === SyncStatus.InitialSync;\n      await this._logger.run(\"sync\", async (log) => {\n        log.set(\"token\", syncToken);\n        log.set(\"status\", this._status.get());\n        try {\n          const timeout = this._status.get() === SyncStatus.Syncing ? INCREMENTAL_TIMEOUT : 0;\n          const syncResult = await this._syncRequest(syncToken, timeout, log);\n          syncToken = syncResult.syncToken;\n          roomStates = syncResult.roomStates;\n          sessionChanges = syncResult.sessionChanges;\n          if (this._status.get() !== SyncStatus.Syncing && syncResult.hadToDeviceMessages) {\n            this._status.set(SyncStatus.CatchupSync);\n          } else {\n            this._status.set(SyncStatus.Syncing);\n          }\n        } catch (err) {\n          if (err.name === \"ConnectionError\" && err.isTimeout) {\n            return;\n          }\n          this._error = err;\n          if (err.name !== \"AbortError\") {\n            log.error = err;\n            log.logLevel = log.level.Fatal;\n          }\n          log.set(\"stopping\", true);\n          this._status.set(SyncStatus.Stopped);\n        }\n        if (this._status.get() !== SyncStatus.Stopped) {\n          await log.wrap(\"afterSyncCompleted\", (log2) => this._runAfterSyncCompleted(sessionChanges, roomStates, log2));\n        }\n      }, this._logger.level.Info, (filter, log) => {\n        if (log.durationWithoutType(\"network\") >= 2e3 || log.error || wasCatchupOrInitial) {\n          return filter.minLevel(log.level.Detail);\n        } else {\n          return filter.minLevel(log.level.Info);\n        }\n      });\n    }\n  }\n  async _runAfterSyncCompleted(sessionChanges, roomStates, log) {\n    const isCatchupSync = this._status.get() === SyncStatus.CatchupSync;\n    const sessionPromise = (async () => {\n      try {\n        await log.wrap(\"session\", (log2) => this._session.afterSyncCompleted(sessionChanges, isCatchupSync, log2));\n      } catch (err) {\n      }\n    })();\n    const roomsPromises = roomStates.map(async (rs) => {\n      try {\n        await rs.room.afterSyncCompleted(rs.changes, log);\n      } catch (err) {\n      }\n    });\n    await Promise.all(roomsPromises.concat(sessionPromise));\n  }\n  async _syncRequest(syncToken, timeout, log) {\n    var _a;\n    let { syncFilterId } = this._session;\n    if (typeof syncFilterId !== \"string\") {\n      try {\n        this._currentRequest = this._hsApi.createFilter(this._session.user.id, { room: { state: { lazy_load_members: true } } }, { log });\n        syncFilterId = (await this._currentRequest.response()).filter_id;\n      } catch (err) {\n        log.log(\"Sync filters aren't available, falling back to no filter\");\n        syncFilterId = \"filteringNotAvailable\";\n      }\n    }\n    const totalRequestTimeout = timeout + 80 * 1e3;\n    this._currentRequest = this._hsApi.sync(syncToken, syncFilterId === \"filteringNotAvailable\" ? void 0 : syncFilterId, timeout, { timeout: totalRequestTimeout, log });\n    const response = await this._currentRequest.response();\n    const isInitialSync = !syncToken;\n    const sessionState = new SessionSyncProcessState();\n    const inviteStates = this._parseInvites(response.rooms);\n    const { roomStates, archivedRoomStates } = await this._parseRoomsResponse(response.rooms, inviteStates, isInitialSync, log);\n    try {\n      sessionState.lock = await log.wrap(\"obtainSyncLock\", () => this._session.obtainSyncLock(response));\n      await log.wrap(\"prepare\", (log2) => this._prepareSync(sessionState, roomStates, response, log2));\n      await log.wrap(\"afterPrepareSync\", (log2) => Promise.all(roomStates.map((rs) => {\n        return rs.room.afterPrepareSync(rs.preparation, log2);\n      })));\n      await log.wrap(\"write\", async (log2) => this._writeSync(sessionState, inviteStates, roomStates, archivedRoomStates, response, syncFilterId, isInitialSync, log2));\n    } finally {\n      sessionState.dispose();\n    }\n    log.wrap(\"after\", (log2) => this._afterSync(sessionState, inviteStates, roomStates, archivedRoomStates, log2));\n    const toDeviceEvents = (_a = response.to_device) == null ? void 0 : _a.events;\n    return {\n      syncToken: response.next_batch,\n      roomStates,\n      sessionChanges: sessionState.changes,\n      hadToDeviceMessages: Array.isArray(toDeviceEvents) && toDeviceEvents.length > 0\n    };\n  }\n  _openPrepareSyncTxn() {\n    const storeNames = this._storage.storeNames;\n    return this._storage.readTxn([\n      storeNames.deviceKeys,\n      storeNames.olmSessions,\n      storeNames.inboundGroupSessions,\n      storeNames.timelineFragments,\n      storeNames.timelineEvents\n    ]);\n  }\n  async _prepareSync(sessionState, roomStates, response, log) {\n    var _a, _b;\n    const prepareTxn = await this._openPrepareSyncTxn();\n    sessionState.preparation = await log.wrap(\"session\", (log2) => this._session.prepareSync(response, sessionState.lock, prepareTxn, log2));\n    const newKeysByRoom = (_a = sessionState.preparation) == null ? void 0 : _a.newKeysByRoom;\n    if (newKeysByRoom) {\n      const { hasOwnProperty } = Object.prototype;\n      for (const roomId of newKeysByRoom.keys()) {\n        const isRoomInResponse = ((_b = response.rooms) == null ? void 0 : _b.join) && hasOwnProperty.call(response.rooms.join, roomId);\n        if (!isRoomInResponse) {\n          let room = this._session.rooms.get(roomId);\n          if (room) {\n            roomStates.push(new RoomSyncProcessState(room, false, {}, room.membership));\n          }\n        }\n      }\n    }\n    await Promise.all(roomStates.map(async (rs) => {\n      const newKeys = newKeysByRoom == null ? void 0 : newKeysByRoom.get(rs.room.id);\n      rs.preparation = await log.wrap(\"room\", async (log2) => {\n        if (rs.isNewRoom) {\n          await rs.room.load(null, prepareTxn, log2);\n        }\n        return rs.room.prepareSync(rs.roomResponse, rs.membership, newKeys, prepareTxn, log2);\n      }, log.level.Detail);\n    }));\n    await prepareTxn.complete();\n  }\n  async _writeSync(sessionState, inviteStates, roomStates, archivedRoomStates, response, syncFilterId, isInitialSync, log) {\n    const syncTxn = await this._openSyncTxn();\n    try {\n      sessionState.changes = await log.wrap(\"session\", (log2) => this._session.writeSync(response, syncFilterId, sessionState.preparation, syncTxn, log2));\n      await Promise.all(inviteStates.map(async (is) => {\n        is.changes = await log.wrap(\"invite\", (log2) => is.invite.writeSync(is.membership, is.roomResponse, syncTxn, log2));\n      }));\n      await Promise.all(roomStates.map(async (rs) => {\n        rs.changes = await log.wrap(\"room\", (log2) => rs.room.writeSync(rs.roomResponse, isInitialSync, rs.preparation, syncTxn, log2));\n      }));\n      await Promise.all(archivedRoomStates.map(async (ars) => {\n        var _a;\n        const summaryChanges = (_a = ars.roomState) == null ? void 0 : _a.summaryChanges;\n        ars.changes = await log.wrap(\"archivedRoom\", (log2) => ars.archivedRoom.writeSync(summaryChanges, ars.roomResponse, ars.membership, syncTxn, log2));\n      }));\n    } catch (err) {\n      syncTxn.abort(log);\n      throw syncTxn.getCause(err);\n    }\n    await syncTxn.complete(log);\n  }\n  _afterSync(sessionState, inviteStates, roomStates, archivedRoomStates, log) {\n    log.wrap(\"session\", (log2) => this._session.afterSync(sessionState.changes, log2), log.level.Detail);\n    for (let ars of archivedRoomStates) {\n      log.wrap(\"archivedRoom\", (log2) => {\n        ars.archivedRoom.afterSync(ars.changes, log2);\n        ars.archivedRoom.release();\n      }, log.level.Detail);\n    }\n    for (let rs of roomStates) {\n      log.wrap(\"room\", (log2) => rs.room.afterSync(rs.changes, log2), log.level.Detail);\n    }\n    for (let is of inviteStates) {\n      log.wrap(\"invite\", (log2) => is.invite.afterSync(is.changes, log2), log.level.Detail);\n    }\n    this._session.applyRoomCollectionChangesAfterSync(inviteStates, roomStates, archivedRoomStates, log);\n  }\n  _openSyncTxn() {\n    const storeNames = this._storage.storeNames;\n    return this._storage.readWriteTxn([\n      storeNames.session,\n      storeNames.roomSummary,\n      storeNames.archivedRoomSummary,\n      storeNames.invites,\n      storeNames.roomState,\n      storeNames.roomMembers,\n      storeNames.timelineEvents,\n      storeNames.timelineRelations,\n      storeNames.timelineFragments,\n      storeNames.pendingEvents,\n      storeNames.userIdentities,\n      storeNames.groupSessionDecryptions,\n      storeNames.deviceKeys,\n      storeNames.outboundGroupSessions,\n      storeNames.operations,\n      storeNames.accountData,\n      storeNames.olmSessions,\n      storeNames.inboundGroupSessions,\n      storeNames.calls\n    ]);\n  }\n  async _parseRoomsResponse(roomsSection, inviteStates, isInitialSync, log) {\n    const roomStates = [];\n    const archivedRoomStates = [];\n    if (roomsSection) {\n      const allMemberships = [\"join\", \"leave\"];\n      for (const membership of allMemberships) {\n        const membershipSection = roomsSection[membership];\n        if (membershipSection) {\n          for (const [roomId, roomResponse] of Object.entries(membershipSection)) {\n            if (isInitialSync && timelineIsEmpty(roomResponse)) {\n              continue;\n            }\n            const invite = this._session.invites.get(roomId);\n            if (invite) {\n              inviteStates.push(new InviteSyncProcessState(invite, false, null, membership));\n            }\n            const roomState = this._createRoomSyncState(roomId, roomResponse, membership, isInitialSync);\n            if (roomState) {\n              roomStates.push(roomState);\n            }\n            const ars = await this._createArchivedRoomSyncState(roomId, roomState, roomResponse, membership, isInitialSync, log);\n            if (ars) {\n              archivedRoomStates.push(ars);\n            }\n          }\n        }\n      }\n    }\n    return { roomStates, archivedRoomStates };\n  }\n  _createRoomSyncState(roomId, roomResponse, membership, isInitialSync) {\n    let isNewRoom = false;\n    let room = this._session.rooms.get(roomId);\n    if (!room && (membership === \"join\" || isInitialSync && membership === \"leave\")) {\n      room = this._session.createJoinedRoom(roomId);\n      isNewRoom = true;\n    }\n    if (room) {\n      return new RoomSyncProcessState(room, isNewRoom, roomResponse, membership);\n    }\n  }\n  async _createArchivedRoomSyncState(roomId, roomState, roomResponse, membership, isInitialSync, log) {\n    let archivedRoom;\n    if ((roomState == null ? void 0 : roomState.shouldAdd) && !isInitialSync) {\n      archivedRoom = this._session.createOrGetArchivedRoomForSync(roomId);\n    } else if (membership === \"leave\") {\n      if (roomState) {\n        archivedRoom = this._session.createOrGetArchivedRoomForSync(roomId);\n      } else {\n        archivedRoom = await this._session.loadArchivedRoom(roomId, log);\n      }\n    }\n    if (archivedRoom) {\n      return new ArchivedRoomSyncProcessState(archivedRoom, roomState, roomResponse, membership);\n    }\n  }\n  _parseInvites(roomsSection) {\n    const inviteStates = [];\n    if (roomsSection == null ? void 0 : roomsSection.invite) {\n      for (const [roomId, roomResponse] of Object.entries(roomsSection.invite)) {\n        let invite = this._session.invites.get(roomId);\n        let isNewInvite = false;\n        if (!invite) {\n          invite = this._session.createInvite(roomId);\n          isNewInvite = true;\n        }\n        inviteStates.push(new InviteSyncProcessState(invite, isNewInvite, roomResponse, \"invite\"));\n      }\n    }\n    return inviteStates;\n  }\n  stop() {\n    if (this._status.get() === SyncStatus.Stopped) {\n      return;\n    }\n    this._status.set(SyncStatus.Stopped);\n    if (this._currentRequest) {\n      this._currentRequest.abort();\n      this._currentRequest = null;\n    }\n  }\n}\nclass SessionSyncProcessState {\n  constructor() {\n    this.lock = null;\n    this.preparation = null;\n    this.changes = null;\n  }\n  dispose() {\n    var _a;\n    (_a = this.lock) == null ? void 0 : _a.release();\n  }\n}\nclass RoomSyncProcessState {\n  constructor(room, isNewRoom, roomResponse, membership) {\n    this.room = room;\n    this.isNewRoom = isNewRoom;\n    this.roomResponse = roomResponse;\n    this.membership = membership;\n    this.preparation = null;\n    this.changes = null;\n  }\n  get id() {\n    return this.room.id;\n  }\n  get shouldAdd() {\n    return this.isNewRoom && this.membership === \"join\";\n  }\n  get shouldRemove() {\n    return !this.isNewRoom && this.membership !== \"join\";\n  }\n  get summaryChanges() {\n    var _a;\n    return (_a = this.changes) == null ? void 0 : _a.summaryChanges;\n  }\n}\nclass ArchivedRoomSyncProcessState {\n  constructor(archivedRoom, roomState, roomResponse, membership, isInitialSync) {\n    this.archivedRoom = archivedRoom;\n    this.roomState = roomState;\n    this.roomResponse = roomResponse;\n    this.membership = membership;\n    this.isInitialSync = isInitialSync;\n    this.changes = null;\n  }\n  get id() {\n    return this.archivedRoom.id;\n  }\n  get shouldAdd() {\n    return (this.roomState || this.isInitialSync) && this.membership === \"leave\";\n  }\n  get shouldRemove() {\n    return this.membership === \"join\";\n  }\n}\nclass InviteSyncProcessState {\n  constructor(invite, isNewInvite, roomResponse, membership) {\n    this.invite = invite;\n    this.isNewInvite = isNewInvite;\n    this.membership = membership;\n    this.roomResponse = roomResponse;\n    this.changes = null;\n  }\n  get id() {\n    return this.invite.id;\n  }\n  get shouldAdd() {\n    return this.isNewInvite;\n  }\n  get shouldRemove() {\n    return this.membership !== \"invite\";\n  }\n}\nfunction applyTimelineEntries(data, timelineEntries, isInitialSync, canMarkUnread, ownUserId) {\n  if (timelineEntries.length) {\n    data = timelineEntries.reduce((data2, entry) => {\n      return processTimelineEvent(data2, entry, isInitialSync, canMarkUnread, ownUserId);\n    }, data);\n  }\n  return data;\n}\nfunction applySyncResponse(data, roomResponse, membership, ownUserId) {\n  if (roomResponse.summary) {\n    data = updateSummary(data, roomResponse.summary);\n  }\n  if (membership !== data.membership) {\n    data = data.cloneIfNeeded();\n    data.membership = membership;\n  }\n  if (roomResponse.account_data) {\n    data = roomResponse.account_data.events.reduce(processRoomAccountData, data);\n  }\n  iterateResponseStateEvents(roomResponse, (event2) => {\n    data = processStateEvent(data, event2, ownUserId);\n  });\n  const unreadNotifications = roomResponse.unread_notifications;\n  if (unreadNotifications) {\n    data = processNotificationCounts(data, unreadNotifications);\n  }\n  return data;\n}\nfunction processNotificationCounts(data, unreadNotifications) {\n  const highlightCount = unreadNotifications.highlight_count || 0;\n  if (highlightCount !== data.highlightCount) {\n    data = data.cloneIfNeeded();\n    data.highlightCount = highlightCount;\n  }\n  const notificationCount = unreadNotifications.notification_count;\n  if (notificationCount !== data.notificationCount) {\n    data = data.cloneIfNeeded();\n    data.notificationCount = notificationCount;\n  }\n  return data;\n}\nfunction processRoomAccountData(data, event2) {\n  var _a;\n  if ((event2 == null ? void 0 : event2.type) === \"m.tag\") {\n    let tags = (_a = event2 == null ? void 0 : event2.content) == null ? void 0 : _a.tags;\n    if (!tags || Array.isArray(tags) || typeof tags !== \"object\") {\n      tags = null;\n    }\n    data = data.cloneIfNeeded();\n    data.tags = tags;\n  }\n  return data;\n}\nfunction processStateEvent(data, event2, ownUserId) {\n  var _a, _b, _c2, _d2, _e;\n  if (event2.type === \"m.room.create\") {\n    data = data.cloneIfNeeded();\n    data.lastMessageTimestamp = event2.origin_server_ts;\n    data.type = (_b = (_a = event2.content) == null ? void 0 : _a.type) != null ? _b : null;\n  } else if (event2.type === \"m.room.encryption\") {\n    const algorithm2 = (_c2 = event2.content) == null ? void 0 : _c2.algorithm;\n    if (!data.encryption && algorithm2 === MEGOLM_ALGORITHM) {\n      data = data.cloneIfNeeded();\n      data.encryption = event2.content;\n    }\n  } else if (event2.type === \"m.room.name\") {\n    const newName = (_d2 = event2.content) == null ? void 0 : _d2.name;\n    if (newName !== data.name) {\n      data = data.cloneIfNeeded();\n      data.name = newName;\n    }\n  } else if (event2.type === \"m.room.avatar\") {\n    const newUrl = (_e = event2.content) == null ? void 0 : _e.url;\n    if (newUrl !== data.avatarUrl) {\n      data = data.cloneIfNeeded();\n      data.avatarUrl = newUrl;\n    }\n  } else if (event2.type === \"m.room.canonical_alias\") {\n    const content = event2.content;\n    data = data.cloneIfNeeded();\n    data.canonicalAlias = content.alias;\n  } else if (event2.type === \"m.room.member\") {\n    const content = event2.content;\n    if (content.is_direct === true && content.membership === \"invite\" && !data.isDirectMessage) {\n      let other;\n      if (event2.sender === ownUserId) {\n        other = event2.state_key;\n      } else if (event2.state_key === ownUserId) {\n        other = event2.sender;\n      }\n      if (other) {\n        data = data.cloneIfNeeded();\n        data.isDirectMessage = true;\n        data.dmUserId = other;\n      }\n    } else if (content.membership === \"leave\" && data.isDirectMessage && data.dmUserId === event2.state_key) {\n      data = data.cloneIfNeeded();\n      data.isDirectMessage = false;\n      data.dmUserId = null;\n    }\n  }\n  return data;\n}\nfunction processTimelineEvent(data, eventEntry, isInitialSync, canMarkUnread, ownUserId) {\n  if (eventEntry.eventType === \"m.room.message\") {\n    if (!data.lastMessageTimestamp || eventEntry.timestamp > data.lastMessageTimestamp) {\n      data = data.cloneIfNeeded();\n      data.lastMessageTimestamp = eventEntry.timestamp;\n    }\n    if (!isInitialSync && eventEntry.sender !== ownUserId && canMarkUnread) {\n      data = data.cloneIfNeeded();\n      data.isUnread = true;\n    }\n  }\n  return data;\n}\nfunction updateSummary(data, summary) {\n  const heroes = summary[\"m.heroes\"];\n  const joinCount = summary[\"m.joined_member_count\"];\n  const inviteCount = summary[\"m.invited_member_count\"];\n  if (heroes && Array.isArray(heroes)) {\n    data = data.cloneIfNeeded();\n    data.heroes = heroes;\n  }\n  if (Number.isInteger(inviteCount)) {\n    data = data.cloneIfNeeded();\n    data.inviteCount = inviteCount;\n  }\n  if (Number.isInteger(joinCount)) {\n    data = data.cloneIfNeeded();\n    data.joinCount = joinCount;\n  }\n  return data;\n}\nclass SummaryData {\n  constructor(copy, roomId) {\n    this.roomId = copy ? copy.roomId : roomId;\n    this.name = copy ? copy.name : null;\n    this.type = copy ? copy.type : null;\n    this.lastMessageTimestamp = copy ? copy.lastMessageTimestamp : null;\n    this.isUnread = copy ? copy.isUnread : false;\n    this.encryption = copy ? copy.encryption : null;\n    this.membership = copy ? copy.membership : null;\n    this.inviteCount = copy ? copy.inviteCount : 0;\n    this.joinCount = copy ? copy.joinCount : 0;\n    this.heroes = copy ? copy.heroes : null;\n    this.canonicalAlias = copy ? copy.canonicalAlias : null;\n    this.hasFetchedMembers = copy ? copy.hasFetchedMembers : false;\n    this.isTrackingMembers = copy ? copy.isTrackingMembers : false;\n    this.avatarUrl = copy ? copy.avatarUrl : null;\n    this.notificationCount = copy ? copy.notificationCount : 0;\n    this.highlightCount = copy ? copy.highlightCount : 0;\n    this.tags = copy ? copy.tags : null;\n    this.isDirectMessage = copy ? copy.isDirectMessage : false;\n    this.dmUserId = copy ? copy.dmUserId : null;\n    this.cloned = copy ? true : false;\n  }\n  changedKeys(other) {\n    const props = Object.getOwnPropertyNames(this);\n    return props.filter((prop) => {\n      return prop !== \"cloned\" && this[prop] !== other[prop];\n    });\n  }\n  cloneIfNeeded() {\n    if (this.cloned) {\n      return this;\n    } else {\n      return new SummaryData(this);\n    }\n  }\n  serialize() {\n    return Object.entries(this).reduce((obj, [key, value]) => {\n      if (key !== \"cloned\" && value !== null) {\n        obj[key] = value;\n      }\n      return obj;\n    }, {});\n  }\n  applyTimelineEntries(timelineEntries, isInitialSync, canMarkUnread, ownUserId) {\n    return applyTimelineEntries(this, timelineEntries, isInitialSync, canMarkUnread, ownUserId);\n  }\n  applySyncResponse(roomResponse, membership, ownUserId) {\n    return applySyncResponse(this, roomResponse, membership, ownUserId);\n  }\n  get needsHeroes() {\n    return !this.name && !this.canonicalAlias && this.heroes && this.heroes.length > 0;\n  }\n  isNewJoin(oldData) {\n    return this.membership === \"join\" && oldData.membership !== \"join\";\n  }\n}\nclass RoomSummary {\n  constructor(roomId) {\n    this._data = null;\n    this.applyChanges(new SummaryData(null, roomId));\n  }\n  get data() {\n    return this._data;\n  }\n  writeClearUnread(txn) {\n    const data = new SummaryData(this._data);\n    data.isUnread = false;\n    data.notificationCount = 0;\n    data.highlightCount = 0;\n    txn.roomSummary.set(data.serialize());\n    return data;\n  }\n  writeHasFetchedMembers(value, txn) {\n    const data = new SummaryData(this._data);\n    data.hasFetchedMembers = value;\n    txn.roomSummary.set(data.serialize());\n    return data;\n  }\n  writeIsTrackingMembers(value, txn) {\n    const data = new SummaryData(this._data);\n    data.isTrackingMembers = value;\n    txn.roomSummary.set(data.serialize());\n    return data;\n  }\n  writeData(data, txn) {\n    if (data !== this._data) {\n      txn.roomSummary.set(data.serialize());\n      return data;\n    }\n  }\n  writeArchivedData(data, txn) {\n    if (data !== this._data) {\n      txn.archivedRoomSummary.set(data.serialize());\n      return data;\n    }\n  }\n  async writeAndApplyData(data, storage) {\n    if (data === this._data) {\n      return false;\n    }\n    const txn = await storage.readWriteTxn([\n      storage.storeNames.roomSummary\n    ]);\n    try {\n      txn.roomSummary.set(data.serialize());\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n    this.applyChanges(data);\n    return true;\n  }\n  applyChanges(data) {\n    this._data = data;\n    this._data.cloned = false;\n  }\n  async load(summary) {\n    this.applyChanges(new SummaryData(summary));\n  }\n}\nconst PENDING_FRAGMENT_ID = Number.MAX_SAFE_INTEGER;\nclass BaseEntry {\n  constructor(_fragmentIdComparer) {\n    this._fragmentIdComparer = _fragmentIdComparer;\n  }\n  compare(otherEntry) {\n    if (this.fragmentId === otherEntry.fragmentId) {\n      return this.entryIndex - otherEntry.entryIndex;\n    } else if (this.fragmentId === PENDING_FRAGMENT_ID) {\n      return 1;\n    } else if (otherEntry.fragmentId === PENDING_FRAGMENT_ID) {\n      return -1;\n    } else {\n      return this._fragmentIdComparer.compare(this.fragmentId, otherEntry.fragmentId);\n    }\n  }\n  asEventKey() {\n    return new EventKey(this.fragmentId, this.entryIndex);\n  }\n}\nconst REACTION_TYPE = \"m.reaction\";\nconst ANNOTATION_RELATION_TYPE = \"m.annotation\";\nfunction createAnnotation(targetId, key) {\n  return {\n    \"m.relates_to\": {\n      \"event_id\": targetId,\n      key,\n      \"rel_type\": ANNOTATION_RELATION_TYPE\n    }\n  };\n}\nfunction getRelationTarget(relation) {\n  var _a;\n  return relation.event_id || ((_a = relation[\"m.in_reply_to\"]) == null ? void 0 : _a.event_id);\n}\nfunction setRelationTarget(relation, target) {\n  if (relation.event_id !== void 0) {\n    relation.event_id = target;\n  } else if (relation[\"m.in_reply_to\"]) {\n    relation[\"m.in_reply_to\"].event_id = target;\n  }\n}\nfunction getRelatedEventId(event2) {\n  if (event2.type === REDACTION_TYPE) {\n    return event2.redacts;\n  } else {\n    const relation = getRelation(event2);\n    if (relation) {\n      return getRelationTarget(relation);\n    }\n  }\n  return null;\n}\nfunction getRelationFromContent(content) {\n  return content == null ? void 0 : content[\"m.relates_to\"];\n}\nfunction getRelation(event2) {\n  return getRelationFromContent(event2.content);\n}\nclass PendingAnnotation {\n  constructor() {\n    this._entries = [];\n  }\n  get firstTimestamp() {\n    return this._entries.reduce((ts, e) => {\n      if (e.isRedaction) {\n        return ts;\n      }\n      return Math.min(e.timestamp, ts);\n    }, Number.MAX_SAFE_INTEGER);\n  }\n  get annotationEntry() {\n    return this._entries.find((e) => !e.isRedaction);\n  }\n  get redactionEntry() {\n    return this._entries.find((e) => e.isRedaction);\n  }\n  get count() {\n    return this._entries.reduce((count, e) => {\n      return count + (e.isRedaction ? -1 : 1);\n    }, 0);\n  }\n  add(entry) {\n    this._entries.push(entry);\n  }\n  remove(entry) {\n    const idx = this._entries.indexOf(entry);\n    if (idx === -1) {\n      return false;\n    }\n    this._entries.splice(idx, 1);\n    return true;\n  }\n  get willAnnotate() {\n    const lastEntry = this._entries.reduce((lastEntry2, e) => {\n      if (!lastEntry2 || e.pendingEvent.queueIndex > lastEntry2.pendingEvent.queueIndex) {\n        return e;\n      }\n      return lastEntry2;\n    }, null);\n    if (lastEntry) {\n      return !lastEntry.isRedaction;\n    }\n    return false;\n  }\n  get isEmpty() {\n    return this._entries.length === 0;\n  }\n}\nfunction htmlEscape(string) {\n  return string.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n}\nfunction fallbackForNonTextualMessage(msgtype) {\n  switch (msgtype) {\n    case \"m.file\":\n      return \"sent a file.\";\n    case \"m.image\":\n      return \"sent an image.\";\n    case \"m.video\":\n      return \"sent a video.\";\n    case \"m.audio\":\n      return \"sent an audio file.\";\n  }\n  return null;\n}\nfunction fallbackPrefix(msgtype) {\n  return msgtype === \"m.emote\" ? \"* \" : \"\";\n}\nfunction _createReplyContent(targetId, msgtype, body, formattedBody) {\n  return {\n    msgtype,\n    body,\n    \"format\": \"org.matrix.custom.html\",\n    \"formatted_body\": formattedBody,\n    \"m.relates_to\": {\n      \"m.in_reply_to\": {\n        \"event_id\": targetId\n      }\n    }\n  };\n}\nfunction createReplyContent(entry, msgtype, body) {\n  const nonTextual = fallbackForNonTextualMessage(entry.content.msgtype);\n  const prefix2 = fallbackPrefix(entry.content.msgtype);\n  const sender = entry.sender;\n  const name = entry.displayName || sender;\n  const formattedBody = nonTextual || entry.content.formatted_body || entry.content.body && htmlEscape(entry.content.body) || \"\";\n  const formattedFallback = `<mx-reply><blockquote>In reply to ${prefix2}<a href=\"https://matrix.to/#/${sender}\">${name}</a><br />${formattedBody}</blockquote></mx-reply>`;\n  const plainBody = nonTextual || entry.content.body || \"\";\n  const bodyLines = plainBody.split(\"\\n\");\n  bodyLines[0] = `> ${prefix2}<${sender}> ${bodyLines[0]}`;\n  const plainFallback = bodyLines.join(\"\\n> \");\n  const newBody = plainFallback + \"\\n\\n\" + body;\n  const newFormattedBody = formattedFallback + htmlEscape(body);\n  return _createReplyContent(entry.id, msgtype, newBody, newFormattedBody);\n}\nclass BaseEventEntry extends BaseEntry {\n  constructor(fragmentIdComparer) {\n    super(fragmentIdComparer);\n    this._pendingRedactions = null;\n    this._pendingAnnotations = null;\n    this._contextEntry = null;\n    this._contextForEntries = null;\n  }\n  get isReply() {\n    var _a;\n    return !!((_a = this.relation) == null ? void 0 : _a[\"m.in_reply_to\"]);\n  }\n  get isRedacting() {\n    return !!this._pendingRedactions;\n  }\n  get isRedacted() {\n    return this.isRedacting;\n  }\n  get isRedaction() {\n    return this.eventType === REDACTION_TYPE;\n  }\n  get redactionReason() {\n    var _a;\n    if (this._pendingRedactions) {\n      return (_a = this._pendingRedactions[0].content) == null ? void 0 : _a.reason;\n    }\n    return null;\n  }\n  setContextEntry(entry) {\n    this._contextEntry = entry;\n    entry._setAsContextOf(this);\n  }\n  _setAsContextOf(entry) {\n    if (!this._contextForEntries) {\n      this._contextForEntries = [];\n    }\n    this._contextForEntries.push(entry);\n  }\n  get contextForEntries() {\n    return this._contextForEntries;\n  }\n  get contextEntry() {\n    return this._contextEntry;\n  }\n  addLocalRelation(entry) {\n    if (entry.eventType === REDACTION_TYPE && entry.isRelatedToId(this.id)) {\n      if (!this._pendingRedactions) {\n        this._pendingRedactions = [];\n      }\n      this._pendingRedactions.push(entry);\n      if (this._pendingRedactions.length === 1) {\n        return \"isRedacted\";\n      }\n    } else {\n      const relationEntry = entry.redactingEntry || entry;\n      if (relationEntry.isRelatedToId(this.id)) {\n        if (relationEntry.relation.rel_type === ANNOTATION_RELATION_TYPE) {\n          if (this._addPendingAnnotation(entry)) {\n            return \"pendingAnnotations\";\n          }\n        }\n      }\n    }\n  }\n  removeLocalRelation(entry) {\n    var _a;\n    if (entry.eventType === REDACTION_TYPE && entry.isRelatedToId(this.id) && this._pendingRedactions) {\n      const countBefore = this._pendingRedactions.length;\n      this._pendingRedactions = this._pendingRedactions.filter((e) => e !== entry);\n      if (this._pendingRedactions.length === 0) {\n        this._pendingRedactions = null;\n        if (countBefore !== 0) {\n          return \"isRedacted\";\n        }\n      }\n    } else {\n      const relationEntry = entry.redactingEntry || entry;\n      if (relationEntry.isRelatedToId(this.id)) {\n        if (((_a = relationEntry.relation) == null ? void 0 : _a.rel_type) === ANNOTATION_RELATION_TYPE && this._pendingAnnotations) {\n          if (this._removePendingAnnotation(entry)) {\n            return \"pendingAnnotations\";\n          }\n        }\n      }\n    }\n  }\n  _addPendingAnnotation(entry) {\n    if (!this._pendingAnnotations) {\n      this._pendingAnnotations = /* @__PURE__ */ new Map();\n    }\n    const { key } = (entry.redactingEntry || entry).relation;\n    if (key) {\n      let annotation = this._pendingAnnotations.get(key);\n      if (!annotation) {\n        annotation = new PendingAnnotation();\n        this._pendingAnnotations.set(key, annotation);\n      }\n      annotation.add(entry);\n      return true;\n    }\n    return false;\n  }\n  _removePendingAnnotation(entry) {\n    const { key } = (entry.redactingEntry || entry).relation;\n    if (key) {\n      let annotation = this._pendingAnnotations.get(key);\n      if (annotation.remove(entry) && annotation.isEmpty) {\n        this._pendingAnnotations.delete(key);\n      }\n      if (this._pendingAnnotations.size === 0) {\n        this._pendingAnnotations = null;\n      }\n      return true;\n    }\n    return false;\n  }\n  async abortPendingRedaction() {\n    if (this._pendingRedactions) {\n      for (const pee of this._pendingRedactions) {\n        await pee.pendingEvent.abort();\n      }\n    }\n  }\n  get pendingRedaction() {\n    if (this._pendingRedactions) {\n      return this._pendingRedactions[0];\n    }\n    return null;\n  }\n  annotate(key) {\n    return createAnnotation(this.id, key);\n  }\n  createReplyContent(msgtype, body) {\n    return createReplyContent(this, msgtype, body);\n  }\n  isRelatedToId(id) {\n    return id && this.relatedEventId === id;\n  }\n  haveAnnotation(key) {\n    var _a, _b, _c2;\n    const haveRemoteReaction = ((_b = (_a = this.annotations) == null ? void 0 : _a[key]) == null ? void 0 : _b.me) || false;\n    const pendingAnnotation = (_c2 = this.pendingAnnotations) == null ? void 0 : _c2.get(key);\n    const willAnnotate = (pendingAnnotation == null ? void 0 : pendingAnnotation.willAnnotate) || false;\n    return haveRemoteReaction && (!pendingAnnotation || willAnnotate) || !haveRemoteReaction && willAnnotate;\n  }\n  get relation() {\n    return getRelationFromContent(this.content);\n  }\n  get pendingAnnotations() {\n    return this._pendingAnnotations;\n  }\n  get annotations() {\n    return null;\n  }\n}\nclass PendingEventEntry extends BaseEventEntry {\n  constructor({ pendingEvent, member, clock, redactingEntry }) {\n    super(null);\n    this._pendingEvent = pendingEvent;\n    this._member = member;\n    this._timestamp = clock.now() - (100 - pendingEvent.queueIndex);\n    this._redactingEntry = redactingEntry;\n  }\n  get fragmentId() {\n    return PENDING_FRAGMENT_ID;\n  }\n  get entryIndex() {\n    return this._pendingEvent.queueIndex;\n  }\n  get content() {\n    return this._pendingEvent.content;\n  }\n  get event() {\n    return null;\n  }\n  get eventType() {\n    return this._pendingEvent.eventType;\n  }\n  get stateKey() {\n    return null;\n  }\n  get sender() {\n    var _a;\n    return (_a = this._member) == null ? void 0 : _a.userId;\n  }\n  get displayName() {\n    var _a;\n    return (_a = this._member) == null ? void 0 : _a.name;\n  }\n  get avatarUrl() {\n    var _a;\n    return (_a = this._member) == null ? void 0 : _a.avatarUrl;\n  }\n  get timestamp() {\n    return this._timestamp;\n  }\n  get isPending() {\n    return true;\n  }\n  get id() {\n    return this._pendingEvent.txnId;\n  }\n  get pendingEvent() {\n    return this._pendingEvent;\n  }\n  notifyUpdate() {\n  }\n  isRelatedToId(id) {\n    if (id && id === this._pendingEvent.relatedTxnId) {\n      return true;\n    }\n    return super.isRelatedToId(id);\n  }\n  get relatedEventId() {\n    return this._pendingEvent.relatedEventId;\n  }\n  get redactingEntry() {\n    return this._redactingEntry;\n  }\n  get contextEventId() {\n    var _a;\n    if (this.isReply) {\n      return (_a = this._pendingEvent.relatedEventId) != null ? _a : this._pendingEvent.relatedTxnId;\n    }\n    return null;\n  }\n}\nconst SendStatus = createEnum(\"Waiting\", \"EncryptingAttachments\", \"UploadingAttachments\", \"Encrypting\", \"Sending\", \"Sent\", \"Error\");\nconst unencryptedContentFields = [\"m.relates_to\"];\nclass PendingEvent {\n  constructor({ data, remove, emitUpdate, attachments }) {\n    this._data = data;\n    this._attachments = attachments;\n    this._emitUpdate = emitUpdate;\n    this._removeFromQueueCallback = remove;\n    this._aborted = false;\n    this._status = SendStatus.Waiting;\n    this._sendRequest = null;\n    this._attachmentsTotalBytes = 0;\n    if (this._attachments) {\n      this._attachmentsTotalBytes = Object.values(this._attachments).reduce((t, a) => t + a.size, 0);\n    }\n  }\n  get roomId() {\n    return this._data.roomId;\n  }\n  get queueIndex() {\n    return this._data.queueIndex;\n  }\n  get eventType() {\n    return this._data.eventType;\n  }\n  get txnId() {\n    return this._data.txnId;\n  }\n  get remoteId() {\n    return this._data.remoteId;\n  }\n  get content() {\n    return this._data.content;\n  }\n  get relatedTxnId() {\n    return this._data.relatedTxnId;\n  }\n  get relatedEventId() {\n    const relation = getRelationFromContent(this.content);\n    if (relation) {\n      return getRelationTarget(relation);\n    } else {\n      return this._data.relatedEventId;\n    }\n  }\n  setRelatedEventId(eventId) {\n    const relation = getRelationFromContent(this.content);\n    if (relation) {\n      setRelationTarget(relation, eventId);\n    } else {\n      this._data.relatedEventId = eventId;\n    }\n  }\n  get data() {\n    return this._data;\n  }\n  getAttachment(key) {\n    return this._attachments && this._attachments[key];\n  }\n  get needsSending() {\n    return !this.remoteId && !this.aborted;\n  }\n  get needsEncryption() {\n    return this._data.needsEncryption && !this.aborted;\n  }\n  get needsUpload() {\n    return this._data.needsUpload && !this.aborted;\n  }\n  get isMissingAttachments() {\n    return this.needsUpload && !this._attachments;\n  }\n  setEncrypting() {\n    this._status = SendStatus.Encrypting;\n    this._emitUpdate(\"status\");\n  }\n  get contentForEncryption() {\n    const content = Object.assign({}, this._data.content);\n    for (const field of unencryptedContentFields) {\n      delete content[field];\n    }\n    return content;\n  }\n  _preserveContentFields(into) {\n    const content = this._data.content;\n    for (const field of unencryptedContentFields) {\n      if (content[field] !== void 0) {\n        into[field] = content[field];\n      }\n    }\n  }\n  setEncrypted(type, content) {\n    this._preserveContentFields(content);\n    this._data.encryptedEventType = type;\n    this._data.encryptedContent = content;\n    this._data.needsEncryption = false;\n  }\n  setError(error) {\n    this._status = SendStatus.Error;\n    this._error = error;\n    this._emitUpdate(\"status\");\n  }\n  setWaiting() {\n    this._status = SendStatus.Waiting;\n    this._emitUpdate(\"status\");\n  }\n  get status() {\n    return this._status;\n  }\n  get error() {\n    return this._error;\n  }\n  get hasStartedSending() {\n    return this._status === SendStatus.Sending || this._status === SendStatus.Sent;\n  }\n  get attachmentsTotalBytes() {\n    return this._attachmentsTotalBytes;\n  }\n  get attachmentsSentBytes() {\n    return this._attachments && Object.values(this._attachments).reduce((t, a) => t + a.sentBytes, 0);\n  }\n  async uploadAttachments(hsApi, log) {\n    if (!this.needsUpload) {\n      return;\n    }\n    if (!this._attachments) {\n      throw new Error(\"attachments missing\");\n    }\n    if (this.needsEncryption) {\n      this._status = SendStatus.EncryptingAttachments;\n      this._emitUpdate(\"status\");\n      for (const attachment of Object.values(this._attachments)) {\n        await log.wrap(\"encrypt\", () => {\n          log.set(\"size\", attachment.size);\n          return attachment.encrypt();\n        });\n        if (this.aborted) {\n          throw new AbortError();\n        }\n      }\n    }\n    this._status = SendStatus.UploadingAttachments;\n    this._emitUpdate(\"status\");\n    const entries = Object.entries(this._attachments);\n    entries.sort(([, a1], [, a2]) => a1.size - a2.size);\n    for (const [urlPath, attachment] of entries) {\n      await log.wrap(\"upload\", (log2) => {\n        log2.set(\"size\", attachment.size);\n        return attachment.upload(hsApi, () => {\n          this._emitUpdate(\"attachmentsSentBytes\");\n        }, log2);\n      });\n      attachment.applyToContent(urlPath, this.content);\n    }\n    this._data.needsUpload = false;\n  }\n  async abort() {\n    var _a;\n    if (!this._aborted) {\n      this._aborted = true;\n      if (this._attachments) {\n        for (const attachment of Object.values(this._attachments)) {\n          attachment.abort();\n        }\n      }\n      (_a = this._sendRequest) == null ? void 0 : _a.abort();\n      await this._removeFromQueueCallback();\n    }\n  }\n  get aborted() {\n    return this._aborted;\n  }\n  async send(hsApi, log) {\n    this._status = SendStatus.Sending;\n    this._emitUpdate(\"status\");\n    const eventType = this._data.encryptedEventType || this._data.eventType;\n    const content = this._data.encryptedContent || this._data.content;\n    if (eventType === REDACTION_TYPE) {\n      this._sendRequest = hsApi.redact(this.roomId, this._data.relatedEventId, this.txnId, content, { log });\n    } else {\n      this._sendRequest = hsApi.send(this.roomId, eventType, this.txnId, content, { log });\n    }\n    const response = await this._sendRequest.response();\n    this._sendRequest = null;\n    this._data.remoteId = response.event_id;\n    log.set(\"id\", this._data.remoteId);\n    this._status = SendStatus.Sent;\n    this._emitUpdate(\"status\");\n  }\n  dispose() {\n    if (this._attachments) {\n      for (const attachment of Object.values(this._attachments)) {\n        attachment.dispose();\n      }\n    }\n  }\n}\nclass EventEntry extends BaseEventEntry {\n  constructor(eventEntry, fragmentIdComparer) {\n    super(fragmentIdComparer);\n    this._eventEntry = eventEntry;\n    this._decryptionError = null;\n    this._decryptionResult = null;\n  }\n  clone() {\n    const clone = new EventEntry(this._eventEntry, this._fragmentIdComparer);\n    clone.updateFrom(this);\n    return clone;\n  }\n  updateFrom(other) {\n    if (other._decryptionResult) {\n      this._decryptionResult = other._decryptionResult;\n    }\n    if (other._decryptionError) {\n      this._decryptionError = other._decryptionError;\n    }\n    this._contextForEntries = other.contextForEntries;\n    this._contextEntry = other.contextEntry;\n  }\n  get event() {\n    return this._eventEntry.event;\n  }\n  get fragmentId() {\n    return this._eventEntry.fragmentId;\n  }\n  get entryIndex() {\n    return this._eventEntry.eventIndex;\n  }\n  get content() {\n    var _a, _b;\n    return ((_b = (_a = this._decryptionResult) == null ? void 0 : _a.event) == null ? void 0 : _b.content) || this._eventEntry.event.content;\n  }\n  get prevContent() {\n    return getPrevContentFromStateEvent(this._eventEntry.event);\n  }\n  get eventType() {\n    var _a, _b;\n    return ((_b = (_a = this._decryptionResult) == null ? void 0 : _a.event) == null ? void 0 : _b.type) || this._eventEntry.event.type;\n  }\n  get stateKey() {\n    return this._eventEntry.event.state_key;\n  }\n  get sender() {\n    return this._eventEntry.event.sender;\n  }\n  get displayName() {\n    return this._eventEntry.displayName;\n  }\n  get avatarUrl() {\n    return this._eventEntry.avatarUrl;\n  }\n  get timestamp() {\n    return this._eventEntry.event.origin_server_ts;\n  }\n  get id() {\n    return this._eventEntry.event.event_id;\n  }\n  setDecryptionResult(result) {\n    this._decryptionResult = result;\n  }\n  get isEncrypted() {\n    return this._eventEntry.event.type === \"m.room.encrypted\";\n  }\n  get isDecrypted() {\n    var _a;\n    return !!((_a = this._decryptionResult) == null ? void 0 : _a.event);\n  }\n  get isVerified() {\n    var _a;\n    return this.isEncrypted && ((_a = this._decryptionResult) == null ? void 0 : _a.isVerified);\n  }\n  get isUnverified() {\n    var _a;\n    return this.isEncrypted && ((_a = this._decryptionResult) == null ? void 0 : _a.isUnverified);\n  }\n  setDecryptionError(err) {\n    this._decryptionError = err;\n  }\n  get decryptionError() {\n    return this._decryptionError;\n  }\n  get relatedEventId() {\n    return getRelatedEventId(this.event);\n  }\n  get isRedacted() {\n    return super.isRedacted || isRedacted(this._eventEntry.event);\n  }\n  get redactionReason() {\n    var _a, _b;\n    const redactionEvent = (_a = this._eventEntry.event.unsigned) == null ? void 0 : _a.redacted_because;\n    if (redactionEvent) {\n      return (_b = redactionEvent.content) == null ? void 0 : _b.reason;\n    }\n    return super.redactionReason;\n  }\n  get annotations() {\n    return this._eventEntry.annotations;\n  }\n  get relation() {\n    const originalContent = this._eventEntry.event.content;\n    const originalRelation = originalContent && getRelationFromContent(originalContent);\n    return originalRelation || getRelationFromContent(this.content);\n  }\n  get contextEventId() {\n    if (this.isReply) {\n      return this.relatedEventId;\n    }\n    return null;\n  }\n}\nfunction isValidFragmentId(id) {\n  return typeof id === \"number\";\n}\nconst _REDACT_KEEP_KEY_MAP = [\n  \"event_id\",\n  \"type\",\n  \"room_id\",\n  \"user_id\",\n  \"sender\",\n  \"state_key\",\n  \"prev_state\",\n  \"content\",\n  \"unsigned\",\n  \"origin_server_ts\"\n].reduce(function(ret, val) {\n  ret[val] = 1;\n  return ret;\n}, {});\nconst _REDACT_KEEP_CONTENT_MAP = {\n  \"m.room.member\": { \"membership\": 1 },\n  \"m.room.create\": { \"creator\": 1 },\n  \"m.room.join_rules\": { \"join_rule\": 1 },\n  \"m.room.power_levels\": {\n    \"ban\": 1,\n    \"events\": 1,\n    \"events_default\": 1,\n    \"kick\": 1,\n    \"redact\": 1,\n    \"state_default\": 1,\n    \"users\": 1,\n    \"users_default\": 1\n  },\n  \"m.room.aliases\": { \"aliases\": 1 }\n};\nfunction redactEvent(redactionEvent, redactedEvent) {\n  for (const key of Object.keys(redactedEvent)) {\n    if (!_REDACT_KEEP_KEY_MAP[key]) {\n      delete redactedEvent[key];\n    }\n  }\n  const { content } = redactedEvent;\n  const keepMap = _REDACT_KEEP_CONTENT_MAP[redactedEvent.type];\n  for (const key of Object.keys(content)) {\n    if (!(keepMap == null ? void 0 : keepMap[key])) {\n      delete content[key];\n    }\n  }\n  redactedEvent.unsigned = redactedEvent.unsigned || {};\n  redactedEvent.unsigned.redacted_because = redactionEvent;\n}\nfunction findBackwardSiblingFragments(current, byId) {\n  const sortedSiblings = [];\n  while (isValidFragmentId(current.previousId)) {\n    const previous = byId.get(current.previousId);\n    if (!previous) {\n      break;\n    }\n    if (previous.nextId !== current.id) {\n      throw new Error(`Previous fragment ${previous.id} doesn't point back to ${current.id}`);\n    }\n    byId.delete(current.previousId);\n    sortedSiblings.unshift(previous);\n    current = previous;\n  }\n  return sortedSiblings;\n}\nfunction findForwardSiblingFragments(current, byId) {\n  const sortedSiblings = [];\n  while (isValidFragmentId(current.nextId)) {\n    const next = byId.get(current.nextId);\n    if (!next) {\n      break;\n    }\n    if (next.previousId !== current.id) {\n      throw new Error(`Next fragment ${next.id} doesn't point back to ${current.id}`);\n    }\n    byId.delete(current.nextId);\n    sortedSiblings.push(next);\n    current = next;\n  }\n  return sortedSiblings;\n}\nfunction createIslands(fragments) {\n  const byId = /* @__PURE__ */ new Map();\n  for (let f of fragments) {\n    byId.set(f.id, f);\n  }\n  const islands = [];\n  while (byId.size) {\n    const current = byId.values().next().value;\n    byId.delete(current.id);\n    const previousSiblings = findBackwardSiblingFragments(current, byId);\n    const nextSiblings = findForwardSiblingFragments(current, byId);\n    const island = previousSiblings.concat(current, nextSiblings);\n    islands.push(island);\n  }\n  return islands.map((a) => new Island(a));\n}\nclass Fragment {\n  constructor(id, previousId, nextId) {\n    this.id = id;\n    this.previousId = previousId;\n    this.nextId = nextId;\n  }\n}\nclass Island {\n  constructor(sortedFragments) {\n    this._idToSortIndex = /* @__PURE__ */ new Map();\n    sortedFragments.forEach((f, i) => {\n      this._idToSortIndex.set(f.id, i);\n    });\n  }\n  compare(idA, idB) {\n    const sortIndexA = this._idToSortIndex.get(idA);\n    if (sortIndexA === void 0) {\n      throw new Error(`first id ${idA} isn't part of this island`);\n    }\n    const sortIndexB = this._idToSortIndex.get(idB);\n    if (sortIndexB === void 0) {\n      throw new Error(`second id ${idB} isn't part of this island`);\n    }\n    return sortIndexA - sortIndexB;\n  }\n  get fragmentIds() {\n    return this._idToSortIndex.keys();\n  }\n}\nclass CompareError extends Error {\n  get name() {\n    return \"CompareError\";\n  }\n}\nclass FragmentIdComparer {\n  constructor(fragments) {\n    this._fragmentsById = fragments.reduce((map, f) => {\n      map.set(f.id, f);\n      return map;\n    }, /* @__PURE__ */ new Map());\n    this.rebuild(fragments);\n  }\n  _getIsland(id) {\n    const island = this._idToIsland.get(id);\n    if (island === void 0) {\n      throw new CompareError(`Unknown fragment id ${id}`);\n    }\n    return island;\n  }\n  compare(idA, idB) {\n    if (idA === idB) {\n      return 0;\n    }\n    const islandA = this._getIsland(idA);\n    const islandB = this._getIsland(idB);\n    if (islandA !== islandB) {\n      throw new CompareError(`${idA} and ${idB} are on different islands, can't tell order`);\n    }\n    return islandA.compare(idA, idB);\n  }\n  rebuild(fragments) {\n    const islands = createIslands(fragments);\n    this._idToIsland = /* @__PURE__ */ new Map();\n    for (let island of islands) {\n      for (let id of island.fragmentIds) {\n        this._idToIsland.set(id, island);\n      }\n    }\n  }\n  add(fragment) {\n    const copy = new Fragment(fragment.id, fragment.previousId, fragment.nextId);\n    this._fragmentsById.set(fragment.id, copy);\n    this.rebuild(this._fragmentsById.values());\n  }\n  append(id, previousId) {\n    const fragment = new Fragment(id, previousId, null);\n    const prevFragment = this._fragmentsById.get(previousId);\n    if (prevFragment) {\n      prevFragment.nextId = id;\n    }\n    this._fragmentsById.set(id, fragment);\n    this.rebuild(this._fragmentsById.values());\n  }\n  prepend(id, nextId) {\n    const fragment = new Fragment(id, null, nextId);\n    const nextFragment = this._fragmentsById.get(nextId);\n    if (nextFragment) {\n      nextFragment.previousId = id;\n    }\n    this._fragmentsById.set(id, fragment);\n    this.rebuild(this._fragmentsById.values());\n  }\n}\nclass RelationWriter {\n  constructor({ roomId, ownUserId, fragmentIdComparer }) {\n    this._roomId = roomId;\n    this._ownUserId = ownUserId;\n    this._fragmentIdComparer = fragmentIdComparer;\n  }\n  async writeRelation(sourceEntry, txn, log) {\n    const { relatedEventId } = sourceEntry;\n    if (relatedEventId) {\n      const relation = getRelation(sourceEntry.event);\n      if (relation && relation.rel_type) {\n        txn.timelineRelations.add(this._roomId, relation.event_id, relation.rel_type, sourceEntry.id);\n      }\n      const target = await txn.timelineEvents.getByEventId(this._roomId, relatedEventId);\n      if (target) {\n        const updatedStorageEntries = await this._applyRelation(sourceEntry, target, txn, log);\n        if (updatedStorageEntries) {\n          return updatedStorageEntries.map((e) => {\n            txn.timelineEvents.update(e);\n            return new EventEntry(e, this._fragmentIdComparer);\n          });\n        }\n      }\n    }\n    return null;\n  }\n  async writeGapRelation(storageEntry, direction, txn, log) {\n    const sourceEntry = new EventEntry(storageEntry, this._fragmentIdComparer);\n    const result = await this.writeRelation(sourceEntry, txn, log);\n    if (direction.isBackward && !isRedacted(storageEntry.event)) {\n      const relations = await txn.timelineRelations.getAllForTarget(this._roomId, sourceEntry.id);\n      if (relations.length) {\n        for (const r of relations) {\n          const relationStorageEntry = await txn.timelineEvents.getByEventId(this._roomId, r.sourceEventId);\n          if (relationStorageEntry) {\n            const relationEntry = new EventEntry(relationStorageEntry, this._fragmentIdComparer);\n            await this._applyRelation(relationEntry, storageEntry, txn, log);\n          }\n        }\n      }\n    }\n    return result;\n  }\n  async _applyRelation(sourceEntry, targetStorageEntry, txn, log) {\n    if (sourceEntry.eventType === REDACTION_TYPE) {\n      return log.wrap(\"redact\", async (log2) => {\n        const redactedEvent = targetStorageEntry.event;\n        const relation = getRelation(redactedEvent);\n        const redacted = this._applyRedaction(sourceEntry.event, targetStorageEntry, txn, log2);\n        if (redacted) {\n          const updated = [targetStorageEntry];\n          if (relation) {\n            const relationTargetStorageEntry = await this._reaggregateRelation(redactedEvent, relation, txn, log2);\n            if (relationTargetStorageEntry) {\n              updated.push(relationTargetStorageEntry);\n            }\n          }\n          return updated;\n        }\n        return null;\n      });\n    } else {\n      const relation = getRelation(sourceEntry.event);\n      if (relation && !isRedacted(targetStorageEntry.event)) {\n        const relType = relation.rel_type;\n        if (relType === ANNOTATION_RELATION_TYPE) {\n          const aggregated = log.wrap(\"react\", (log2) => {\n            return this._aggregateAnnotation(sourceEntry.event, targetStorageEntry, log2);\n          });\n          if (aggregated) {\n            return [targetStorageEntry];\n          }\n        }\n      }\n    }\n    return null;\n  }\n  _applyRedaction(redactionEvent, redactedStorageEntry, txn, log) {\n    const redactedEvent = redactedStorageEntry.event;\n    log.set(\"redactionId\", redactionEvent.event_id);\n    log.set(\"id\", redactedEvent.event_id);\n    const relation = getRelation(redactedEvent);\n    if (relation && relation.rel_type) {\n      txn.timelineRelations.remove(this._roomId, relation.event_id, relation.rel_type, redactedEvent.event_id);\n    }\n    txn.timelineRelations.removeAllForTarget(this._roomId, redactedEvent.event_id);\n    redactEvent(redactionEvent, redactedEvent);\n    delete redactedStorageEntry.annotations;\n    return true;\n  }\n  _aggregateAnnotation(annotationEvent, targetStorageEntry) {\n    const relation = getRelation(annotationEvent);\n    if (!relation) {\n      return false;\n    }\n    let { annotations } = targetStorageEntry;\n    if (!annotations) {\n      targetStorageEntry.annotations = annotations = {};\n    }\n    let annotation = annotations[relation.key];\n    if (!annotation) {\n      annotations[relation.key] = annotation = {\n        count: 0,\n        me: false,\n        firstTimestamp: Number.MAX_SAFE_INTEGER\n      };\n    }\n    const sentByMe = annotationEvent.sender === this._ownUserId;\n    annotation.me = annotation.me || sentByMe;\n    annotation.count += 1;\n    annotation.firstTimestamp = Math.min(annotation.firstTimestamp, annotationEvent.origin_server_ts);\n    return true;\n  }\n  async _reaggregateRelation(redactedRelationEvent, redactedRelation, txn, log) {\n    if (redactedRelation.rel_type === ANNOTATION_RELATION_TYPE) {\n      return log.wrap(\"reaggregate annotations\", (log2) => this._reaggregateAnnotation(redactedRelation.event_id, redactedRelation.key, txn, log2));\n    }\n    return null;\n  }\n  async _reaggregateAnnotation(targetId, key, txn, log) {\n    const target = await txn.timelineEvents.getByEventId(this._roomId, targetId);\n    if (!target || !target.annotations) {\n      return null;\n    }\n    log.set(\"id\", targetId);\n    const relations = await txn.timelineRelations.getForTargetAndType(this._roomId, targetId, ANNOTATION_RELATION_TYPE);\n    log.set(\"relations\", relations.length);\n    delete target.annotations[key];\n    if (isObjectEmpty(target.annotations)) {\n      delete target.annotations;\n    }\n    await Promise.all(relations.map(async (relation) => {\n      const annotation = await txn.timelineEvents.getByEventId(this._roomId, relation.sourceEventId);\n      if (!annotation) {\n        log.log({ l: \"missing annotation\", id: relation.sourceEventId });\n      }\n      if (getRelation(annotation.event).key === key) {\n        this._aggregateAnnotation(annotation.event, target, log);\n      }\n    }));\n    return target;\n  }\n}\nfunction isObjectEmpty(obj) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass Direction {\n  constructor(isForward) {\n    this.isForward = isForward;\n  }\n  get isBackward() {\n    return !this.isForward;\n  }\n  asApiString() {\n    return this.isForward ? \"f\" : \"b\";\n  }\n  reverse() {\n    return this.isForward ? Direction.Backward : Direction.Forward;\n  }\n  static get Forward() {\n    return _forward;\n  }\n  static get Backward() {\n    return _backward;\n  }\n}\nconst _forward = new Direction(true);\nconst _backward = new Direction(false);\nclass FragmentBoundaryEntry extends BaseEntry {\n  constructor(fragment, isFragmentStart, fragmentIdComparer) {\n    super(fragmentIdComparer);\n    this._fragment = fragment;\n    this._isFragmentStart = isFragmentStart;\n  }\n  static start(fragment, fragmentIdComparer) {\n    return new FragmentBoundaryEntry(fragment, true, fragmentIdComparer);\n  }\n  static end(fragment, fragmentIdComparer) {\n    return new FragmentBoundaryEntry(fragment, false, fragmentIdComparer);\n  }\n  get started() {\n    return this._isFragmentStart;\n  }\n  get hasEnded() {\n    return !this.started;\n  }\n  get fragment() {\n    return this._fragment;\n  }\n  get fragmentId() {\n    return this._fragment.id;\n  }\n  get entryIndex() {\n    if (this.started) {\n      return KeyLimits.minStorageKey;\n    } else {\n      return KeyLimits.maxStorageKey;\n    }\n  }\n  get isGap() {\n    return !!this.token && !this.edgeReached;\n  }\n  get token() {\n    if (this.started) {\n      return this.fragment.previousToken;\n    } else {\n      return this.fragment.nextToken;\n    }\n  }\n  set token(token) {\n    if (this.started) {\n      this.fragment.previousToken = token;\n    } else {\n      this.fragment.nextToken = token;\n    }\n  }\n  get edgeReached() {\n    if (this.started) {\n      return this.fragment.startReached;\n    } else {\n      return this.fragment.endReached;\n    }\n  }\n  set edgeReached(reached) {\n    if (this.started) {\n      this.fragment.startReached = reached;\n    } else {\n      this.fragment.endReached = reached;\n    }\n  }\n  get linkedFragmentId() {\n    if (this.started) {\n      return this.fragment.previousId;\n    } else {\n      return this.fragment.nextId;\n    }\n  }\n  set linkedFragmentId(id) {\n    if (this.started) {\n      this.fragment.previousId = id;\n    } else {\n      this.fragment.nextId = id;\n    }\n  }\n  get hasLinkedFragment() {\n    return isValidFragmentId(this.linkedFragmentId);\n  }\n  get direction() {\n    if (this.started) {\n      return Direction.Backward;\n    } else {\n      return Direction.Forward;\n    }\n  }\n  withUpdatedFragment(fragment) {\n    return new FragmentBoundaryEntry(fragment, this._isFragmentStart, this._fragmentIdComparer);\n  }\n  createNeighbourEntry(neighbour) {\n    return new FragmentBoundaryEntry(neighbour, !this._isFragmentStart, this._fragmentIdComparer);\n  }\n  addLocalRelation() {\n  }\n  removeLocalRelation() {\n  }\n}\nfunction deduplicateEvents(events) {\n  const eventIds = /* @__PURE__ */ new Set();\n  return events.filter((e) => {\n    if (eventIds.has(e.event_id)) {\n      return false;\n    } else {\n      eventIds.add(e.event_id);\n      return true;\n    }\n  });\n}\nclass SyncWriter {\n  constructor({ roomId, fragmentIdComparer, memberWriter, relationWriter }) {\n    this._roomId = roomId;\n    this._memberWriter = memberWriter;\n    this._relationWriter = relationWriter;\n    this._fragmentIdComparer = fragmentIdComparer;\n    this._lastLiveKey = null;\n  }\n  async load(txn, log) {\n    const liveFragment = await txn.timelineFragments.liveFragment(this._roomId);\n    if (liveFragment) {\n      const [lastEvent] = await txn.timelineEvents.lastEvents(this._roomId, liveFragment.id, 1);\n      const eventIndex = lastEvent ? lastEvent.eventIndex : EventKey.defaultLiveKey.eventIndex;\n      this._lastLiveKey = new EventKey(liveFragment.id, eventIndex);\n    }\n    if (this._lastLiveKey) {\n      log.set(\"live key\", this._lastLiveKey.toString());\n    }\n  }\n  async _createLiveFragment(txn, previousToken) {\n    const liveFragment = await txn.timelineFragments.liveFragment(this._roomId);\n    if (!liveFragment) {\n      if (!previousToken) {\n        previousToken = null;\n      }\n      const fragment = {\n        roomId: this._roomId,\n        id: EventKey.defaultLiveKey.fragmentId,\n        previousId: null,\n        nextId: null,\n        previousToken,\n        nextToken: null\n      };\n      txn.timelineFragments.add(fragment);\n      this._fragmentIdComparer.add(fragment);\n      return fragment;\n    } else {\n      return liveFragment;\n    }\n  }\n  async _replaceLiveFragment(oldFragmentId, newFragmentId, previousToken, txn) {\n    const oldFragment = await txn.timelineFragments.get(this._roomId, oldFragmentId);\n    if (!oldFragment) {\n      throw new Error(`old live fragment doesn't exist: ${oldFragmentId}`);\n    }\n    oldFragment.nextId = newFragmentId;\n    txn.timelineFragments.update(oldFragment);\n    const newFragment = {\n      roomId: this._roomId,\n      id: newFragmentId,\n      previousId: oldFragmentId,\n      nextId: null,\n      previousToken,\n      nextToken: null\n    };\n    txn.timelineFragments.add(newFragment);\n    this._fragmentIdComparer.append(newFragmentId, oldFragmentId);\n    return { oldFragment, newFragment };\n  }\n  async _ensureLiveFragment(currentKey, entries, timeline, txn, log) {\n    if (!currentKey) {\n      let liveFragment = await this._createLiveFragment(txn, timeline.prev_batch);\n      currentKey = new EventKey(liveFragment.id, EventKey.defaultLiveKey.eventIndex);\n      entries.push(FragmentBoundaryEntry.start(liveFragment, this._fragmentIdComparer));\n      log.log({ l: \"live fragment\", first: true, id: currentKey.fragmentId });\n    } else if (timeline.limited) {\n      const oldFragmentId = currentKey.fragmentId;\n      currentKey = currentKey.nextFragmentKey();\n      const { oldFragment, newFragment } = await this._replaceLiveFragment(oldFragmentId, currentKey.fragmentId, timeline.prev_batch, txn);\n      entries.push(FragmentBoundaryEntry.end(oldFragment, this._fragmentIdComparer));\n      entries.push(FragmentBoundaryEntry.start(newFragment, this._fragmentIdComparer));\n      log.log({ l: \"live fragment\", limited: true, id: currentKey.fragmentId });\n    }\n    return currentKey;\n  }\n  async _writeStateEvents(stateEvents, txn, log) {\n    let nonMemberStateEvents = 0;\n    for (const event2 of stateEvents) {\n      if (event2.type !== EVENT_TYPE$1) {\n        txn.roomState.set(this._roomId, event2);\n        nonMemberStateEvents += 1;\n      }\n    }\n    log.set(\"stateEvents\", nonMemberStateEvents);\n  }\n  async _writeTimeline(timelineEvents, timeline, memberSync, currentKey, txn, log) {\n    const entries = [];\n    const updatedEntries = [];\n    if (timelineEvents == null ? void 0 : timelineEvents.length) {\n      currentKey = await this._ensureLiveFragment(currentKey, entries, timeline, txn, log);\n      log.set(\"timelineEvents\", timelineEvents.length);\n      let timelineStateEventCount = 0;\n      for (const event2 of timelineEvents) {\n        currentKey = currentKey.nextKey();\n        const storageEntry = createEventEntry(currentKey, this._roomId, event2);\n        let member = await memberSync.lookupMemberAtEvent(event2.sender, event2, txn);\n        if (member) {\n          storageEntry.displayName = member.displayName;\n          storageEntry.avatarUrl = member.avatarUrl;\n        }\n        const couldInsert = await txn.timelineEvents.tryInsert(storageEntry, log);\n        if (!couldInsert) {\n          continue;\n        }\n        const entry = new EventEntry(storageEntry, this._fragmentIdComparer);\n        entries.push(entry);\n        const updatedRelationTargetEntries = await this._relationWriter.writeRelation(entry, txn, log);\n        if (updatedRelationTargetEntries) {\n          updatedEntries.push(...updatedRelationTargetEntries);\n        }\n        if (typeof event2.state_key === \"string\" && event2.type !== EVENT_TYPE$1) {\n          timelineStateEventCount += 1;\n          txn.roomState.set(this._roomId, event2);\n        }\n      }\n      log.set(\"timelineStateEventCount\", timelineStateEventCount);\n    }\n    return { currentKey, entries, updatedEntries };\n  }\n  async _handleRejoinOverlap(timeline, txn, log) {\n    if (this._lastLiveKey) {\n      const { fragmentId } = this._lastLiveKey;\n      const [lastEvent] = await txn.timelineEvents.lastEvents(this._roomId, fragmentId, 1);\n      if (lastEvent) {\n        const lastEventId = lastEvent.event.event_id;\n        const { events } = timeline;\n        const index = events.findIndex((event2) => event2.event_id === lastEventId);\n        if (index !== -1) {\n          log.set(\"overlap_event_id\", lastEventId);\n          return Object.assign({}, timeline, {\n            limited: false,\n            events: events.slice(index + 1)\n          });\n        }\n      }\n    }\n    if (!timeline.limited) {\n      log.set(\"force_limited_without_overlap\", true);\n      return Object.assign({}, timeline, { limited: true });\n    }\n    return timeline;\n  }\n  async writeSync(roomResponse, isRejoin, hasFetchedMembers, txn, log) {\n    let { timeline } = roomResponse;\n    log.set(\"isRejoin\", isRejoin);\n    if (isRejoin) {\n      timeline = await this._handleRejoinOverlap(timeline, txn, log);\n    }\n    let timelineEvents;\n    if (Array.isArray(timeline == null ? void 0 : timeline.events)) {\n      timelineEvents = deduplicateEvents(timeline.events);\n    }\n    const { state } = roomResponse;\n    let stateEvents;\n    if (Array.isArray(state == null ? void 0 : state.events)) {\n      stateEvents = state.events;\n    }\n    const memberSync = this._memberWriter.prepareMemberSync(stateEvents, timelineEvents, hasFetchedMembers);\n    if (stateEvents) {\n      await this._writeStateEvents(stateEvents, txn, log);\n    }\n    const { currentKey, entries, updatedEntries } = await this._writeTimeline(timelineEvents, timeline, memberSync, this._lastLiveKey, txn, log);\n    const memberChanges = await memberSync.write(txn);\n    return { entries, updatedEntries, newLiveKey: currentKey, memberChanges, memberSync };\n  }\n  afterSync(newLiveKey) {\n    this._lastLiveKey = newLiveKey;\n  }\n  get lastMessageKey() {\n    return this._lastLiveKey;\n  }\n}\nclass BaseLRUCache {\n  constructor(limit) {\n    this.limit = limit;\n    this._entries = [];\n  }\n  get size() {\n    return this._entries.length;\n  }\n  _get(findEntryFn) {\n    return this._getByIndexAndMoveUp(this._entries.findIndex(findEntryFn));\n  }\n  _getByIndexAndMoveUp(idx) {\n    if (idx !== -1) {\n      const entry = this._entries[idx];\n      if (idx > 0) {\n        this._entries.splice(idx, 1);\n        this._entries.unshift(entry);\n      }\n      return entry;\n    }\n  }\n  _set(value, findEntryFn) {\n    let indexToRemove = findEntryFn ? this._entries.findIndex(findEntryFn) : -1;\n    this._entries.unshift(value);\n    if (indexToRemove === -1) {\n      if (this._entries.length > this.limit) {\n        indexToRemove = this._entries.length - 1;\n      }\n    } else {\n      indexToRemove += 1;\n    }\n    if (indexToRemove !== -1) {\n      this.onEvictEntry(this._entries[indexToRemove]);\n      this._entries.splice(indexToRemove, 1);\n    }\n  }\n  onEvictEntry(entry) {\n  }\n}\nclass LRUCache extends BaseLRUCache {\n  constructor(limit, keyFn) {\n    super(limit);\n    this._keyFn = keyFn;\n  }\n  get(key) {\n    return this._get((e) => this._keyFn(e) === key);\n  }\n  set(value) {\n    const key = this._keyFn(value);\n    this._set(value, (e) => this._keyFn(e) === key);\n  }\n}\nclass MemberWriter {\n  constructor(roomId) {\n    this._roomId = roomId;\n    this._cache = new LRUCache(5, (member) => member.userId);\n  }\n  prepareMemberSync(stateEvents, timelineEvents, hasFetchedMembers) {\n    return new MemberSync(this, stateEvents, timelineEvents, hasFetchedMembers);\n  }\n  async _writeMember(member, txn) {\n    let existingMember = this._cache.get(member.userId);\n    if (!existingMember) {\n      const memberData = await txn.roomMembers.get(this._roomId, member.userId);\n      if (memberData) {\n        existingMember = new RoomMember(memberData);\n      }\n    }\n    if (!existingMember || !existingMember.equals(member)) {\n      txn.roomMembers.set(member.serialize());\n      this._cache.set(member);\n      return new MemberChange(member, existingMember == null ? void 0 : existingMember.membership);\n    }\n  }\n  async lookupMember(userId, txn) {\n    let member = this._cache.get(userId);\n    if (!member) {\n      const memberData = await txn.roomMembers.get(this._roomId, userId);\n      if (memberData) {\n        member = new RoomMember(memberData);\n        this._cache.set(member);\n      }\n    }\n    return member;\n  }\n}\nclass MemberSync {\n  constructor(memberWriter, stateEvents, timelineEvents, hasFetchedMembers) {\n    this._memberWriter = memberWriter;\n    this._timelineEvents = timelineEvents;\n    this._hasFetchedMembers = hasFetchedMembers;\n    this._newStateMembers = null;\n    if (stateEvents) {\n      this._newStateMembers = this._stateEventsToMembers(stateEvents);\n    }\n  }\n  get _roomId() {\n    return this._memberWriter._roomId;\n  }\n  _stateEventsToMembers(stateEvents) {\n    let members;\n    for (const event2 of stateEvents) {\n      if (event2.type === EVENT_TYPE$1) {\n        const member = RoomMember.fromMemberEvent(this._roomId, event2);\n        if (member) {\n          if (!members) {\n            members = /* @__PURE__ */ new Map();\n          }\n          members.set(member.userId, member);\n        }\n      }\n    }\n    return members;\n  }\n  _timelineEventsToMembers(timelineEvents) {\n    let members;\n    for (let i = timelineEvents.length - 1; i >= 0; i--) {\n      const e = timelineEvents[i];\n      const userId = e.state_key;\n      if (e.type === EVENT_TYPE$1 && !(members == null ? void 0 : members.has(userId))) {\n        const member = RoomMember.fromMemberEvent(this._roomId, e);\n        if (member) {\n          if (!members) {\n            members = /* @__PURE__ */ new Map();\n          }\n          members.set(member.userId, member);\n        }\n      }\n    }\n    return members;\n  }\n  async lookupMemberAtEvent(userId, event2, txn) {\n    var _a;\n    let member;\n    if (this._timelineEvents) {\n      member = this._findPrecedingMemberEventInTimeline(userId, event2);\n      if (member) {\n        return member;\n      }\n    }\n    member = (_a = this._newStateMembers) == null ? void 0 : _a.get(userId);\n    if (member) {\n      return member;\n    }\n    return await this._memberWriter.lookupMember(userId, txn);\n  }\n  async write(txn) {\n    const memberChanges = /* @__PURE__ */ new Map();\n    let newTimelineMembers;\n    if (this._timelineEvents) {\n      newTimelineMembers = this._timelineEventsToMembers(this._timelineEvents);\n    }\n    if (this._newStateMembers) {\n      for (const member of this._newStateMembers.values()) {\n        if (!(newTimelineMembers == null ? void 0 : newTimelineMembers.has(member.userId))) {\n          const memberChange = await this._memberWriter._writeMember(member, txn);\n          if (memberChange) {\n            const maybeLazyLoadingMember = !this._hasFetchedMembers && !memberChange.previousMembership;\n            if (maybeLazyLoadingMember) {\n              memberChange.previousMembership = member.membership;\n            }\n            memberChanges.set(memberChange.userId, memberChange);\n          }\n        }\n      }\n    }\n    if (newTimelineMembers) {\n      for (const member of newTimelineMembers.values()) {\n        const memberChange = await this._memberWriter._writeMember(member, txn);\n        if (memberChange) {\n          memberChanges.set(memberChange.userId, memberChange);\n        }\n      }\n    }\n    return memberChanges;\n  }\n  _findPrecedingMemberEventInTimeline(userId, event2) {\n    let eventIndex = -1;\n    for (let i = this._timelineEvents.length - 1; i >= 0; i--) {\n      const e = this._timelineEvents[i];\n      if (e.event_id === event2.event_id) {\n        eventIndex = i;\n        break;\n      }\n    }\n    for (let i = eventIndex - 1; i >= 0; i--) {\n      const e = this._timelineEvents[i];\n      if (e.type === EVENT_TYPE$1 && e.state_key === userId) {\n        const member = RoomMember.fromMemberEvent(this._roomId, e);\n        if (member) {\n          return member;\n        }\n      }\n    }\n  }\n}\nclass GapWriter {\n  constructor({ roomId, storage, fragmentIdComparer, relationWriter }) {\n    this._roomId = roomId;\n    this._storage = storage;\n    this._fragmentIdComparer = fragmentIdComparer;\n    this._relationWriter = relationWriter;\n  }\n  async _findOverlappingEvents(fragmentEntry, events, txn, log) {\n    const eventIds = events.map((e) => e.event_id);\n    const existingEventKeyMap = await txn.timelineEvents.getEventKeysForIds(this._roomId, eventIds);\n    log.set(\"existingEvents\", existingEventKeyMap.size);\n    const nonOverlappingEvents = events.filter((e) => !existingEventKeyMap.has(e.event_id));\n    log.set(\"nonOverlappingEvents\", nonOverlappingEvents.length);\n    let neighbourFragmentEntry;\n    if (fragmentEntry.hasLinkedFragment) {\n      log.set(\"linkedFragmentId\", fragmentEntry.linkedFragmentId);\n      for (const eventKey of existingEventKeyMap.values()) {\n        if (eventKey.fragmentId === fragmentEntry.linkedFragmentId) {\n          log.set(\"foundLinkedFragment\", true);\n          const neighbourFragment = await txn.timelineFragments.get(this._roomId, fragmentEntry.linkedFragmentId);\n          neighbourFragmentEntry = fragmentEntry.createNeighbourEntry(neighbourFragment);\n          break;\n        }\n      }\n    }\n    return { nonOverlappingEvents, neighbourFragmentEntry };\n  }\n  async _findFragmentEdgeEventKey(fragmentEntry, txn) {\n    const { fragmentId, direction } = fragmentEntry;\n    const event2 = await this._findFragmentEdgeEvent(fragmentId, direction, txn);\n    if (event2) {\n      return new EventKey(event2.fragmentId, event2.eventIndex);\n    } else {\n      return EventKey.defaultFragmentKey(fragmentEntry.fragmentId);\n    }\n  }\n  async _findFragmentEdgeEvent(fragmentId, direction, txn) {\n    if (direction.isBackward) {\n      const [firstEvent] = await txn.timelineEvents.firstEvents(this._roomId, fragmentId, 1);\n      return firstEvent;\n    } else {\n      const [lastEvent] = await txn.timelineEvents.lastEvents(this._roomId, fragmentId, 1);\n      return lastEvent;\n    }\n  }\n  async _storeEvents(events, startKey, direction, state, txn, log) {\n    const entries = [];\n    const updatedEntries = [];\n    let key = startKey;\n    for (let i = 0; i < events.length; ++i) {\n      const event2 = events[i];\n      key = key.nextKeyForDirection(direction);\n      const eventStorageEntry = createEventEntry(key, this._roomId, event2);\n      const member = this._findMember(event2.sender, state, events, i, direction);\n      if (member) {\n        eventStorageEntry.displayName = member.displayName;\n        eventStorageEntry.avatarUrl = member.avatarUrl;\n      }\n      const updatedRelationTargetEntries = await this._relationWriter.writeGapRelation(eventStorageEntry, direction, txn, log);\n      if (updatedRelationTargetEntries) {\n        updatedEntries.push(...updatedRelationTargetEntries);\n      }\n      if (await txn.timelineEvents.tryInsert(eventStorageEntry, log)) {\n        const eventEntry = new EventEntry(eventStorageEntry, this._fragmentIdComparer);\n        directionalAppend(entries, eventEntry, direction);\n      }\n    }\n    return { entries, updatedEntries };\n  }\n  _findMember(userId, state, events, index, direction) {\n    function isOurUser(event2) {\n      return event2.type === EVENT_TYPE$1 && event2.state_key === userId;\n    }\n    const inc = direction.isBackward ? 1 : -1;\n    for (let i = index + inc; i >= 0 && i < events.length; i += inc) {\n      const event2 = events[i];\n      if (isOurUser(event2)) {\n        return RoomMember.fromMemberEvent(this._roomId, event2);\n      }\n    }\n    for (let i = index; i >= 0 && i < events.length; i -= inc) {\n      const event2 = events[i];\n      if (isOurUser(event2)) {\n        return RoomMember.fromReplacingMemberEvent(this._roomId, event2);\n      }\n    }\n    const stateMemberEvent = state == null ? void 0 : state.find(isOurUser);\n    if (stateMemberEvent) {\n      return RoomMember.fromMemberEvent(this._roomId, stateMemberEvent);\n    }\n  }\n  async _updateFragments(fragmentEntry, neighbourFragmentEntry, end, entries, txn, log) {\n    const { direction } = fragmentEntry;\n    const changedFragments = [];\n    directionalAppend(entries, fragmentEntry, direction);\n    if (neighbourFragmentEntry) {\n      log.set(\"closedGapWith\", neighbourFragmentEntry.fragmentId);\n      neighbourFragmentEntry.token = null;\n      fragmentEntry.token = null;\n      txn.timelineFragments.update(neighbourFragmentEntry.fragment);\n      directionalAppend(entries, neighbourFragmentEntry, direction);\n      changedFragments.push(fragmentEntry.fragment);\n      changedFragments.push(neighbourFragmentEntry.fragment);\n    } else {\n      fragmentEntry.token = end;\n    }\n    txn.timelineFragments.update(fragmentEntry.fragment);\n    return changedFragments;\n  }\n  async writeFragmentFill(fragmentEntry, response, fromToken, txn, log) {\n    const { fragmentId, direction } = fragmentEntry;\n    const { chunk, state } = response;\n    let { end } = response;\n    if (!Array.isArray(chunk)) {\n      throw new Error(\"Invalid chunk in response\");\n    }\n    if (typeof end !== \"string\" && typeof end !== \"undefined\") {\n      throw new Error(\"Invalid end token in response\");\n    }\n    const fragment = await txn.timelineFragments.get(this._roomId, fragmentId);\n    if (!fragment) {\n      throw new Error(`Unknown fragment: ${fragmentId}`);\n    }\n    fragmentEntry = fragmentEntry.withUpdatedFragment(fragment);\n    if (fragmentEntry.token !== fromToken) {\n      throw new Error(\"The pagination token has changed locally while fetching messages.\");\n    }\n    if (chunk.length === 0) {\n      fragmentEntry.edgeReached = true;\n      await txn.timelineFragments.update(fragmentEntry.fragment);\n      return { entries: [fragmentEntry], updatedEntries: [], fragments: [] };\n    }\n    let lastKey = await this._findFragmentEdgeEventKey(fragmentEntry, txn);\n    log.set(\"lastKey\", lastKey.toString());\n    const {\n      nonOverlappingEvents,\n      neighbourFragmentEntry\n    } = await this._findOverlappingEvents(fragmentEntry, chunk, txn, log);\n    const { entries, updatedEntries } = await this._storeEvents(nonOverlappingEvents, lastKey, direction, state, txn, log);\n    const fragments = await this._updateFragments(fragmentEntry, neighbourFragmentEntry, end, entries, txn, log);\n    return { entries, updatedEntries, fragments };\n  }\n}\nclass ReaderRequest {\n  constructor(fn, log) {\n    this.decryptRequest = null;\n    this._promise = fn(this, log);\n  }\n  complete() {\n    return this._promise;\n  }\n  dispose() {\n    if (this.decryptRequest) {\n      this.decryptRequest.dispose();\n      this.decryptRequest = null;\n    }\n  }\n}\nasync function readRawTimelineEntriesWithTxn(roomId, eventKey, direction, amount, fragmentIdComparer, txn) {\n  let entries = [];\n  const timelineStore = txn.timelineEvents;\n  const fragmentStore = txn.timelineFragments;\n  while (entries.length < amount && eventKey) {\n    let eventsWithinFragment;\n    if (direction.isForward) {\n      eventsWithinFragment = await timelineStore.eventsAfter(roomId, eventKey, amount);\n    } else {\n      eventsWithinFragment = await timelineStore.eventsBefore(roomId, eventKey, amount);\n    }\n    let eventEntries = eventsWithinFragment.map((e) => new EventEntry(e, fragmentIdComparer));\n    entries = directionalConcat(entries, eventEntries, direction);\n    if (entries.length < amount) {\n      const fragment = await fragmentStore.get(roomId, eventKey.fragmentId);\n      let fragmentEntry = new FragmentBoundaryEntry(fragment, direction.isBackward, fragmentIdComparer);\n      directionalAppend(entries, fragmentEntry, direction);\n      if (!fragmentEntry.token && fragmentEntry.hasLinkedFragment) {\n        const nextFragment = await fragmentStore.get(roomId, fragmentEntry.linkedFragmentId);\n        fragmentIdComparer.add(nextFragment);\n        const nextFragmentEntry = new FragmentBoundaryEntry(nextFragment, direction.isForward, fragmentIdComparer);\n        directionalAppend(entries, nextFragmentEntry, direction);\n        eventKey = nextFragmentEntry.asEventKey();\n      } else {\n        eventKey = null;\n      }\n    }\n  }\n  return entries;\n}\nclass TimelineReader {\n  constructor({ roomId, storage, fragmentIdComparer }) {\n    this._roomId = roomId;\n    this._storage = storage;\n    this._fragmentIdComparer = fragmentIdComparer;\n    this._decryptEntries = null;\n  }\n  enableEncryption(decryptEntries) {\n    this._decryptEntries = decryptEntries;\n  }\n  get readTxnStores() {\n    const stores = [\n      this._storage.storeNames.timelineEvents,\n      this._storage.storeNames.timelineFragments\n    ];\n    if (this._decryptEntries) {\n      stores.push(this._storage.storeNames.inboundGroupSessions);\n    }\n    return stores;\n  }\n  readFrom(eventKey, direction, amount, log) {\n    return new ReaderRequest(async (r, log2) => {\n      const txn = await this._storage.readTxn(this.readTxnStores);\n      return await this._readFrom(eventKey, direction, amount, r, txn, log2);\n    }, log);\n  }\n  readFromEnd(amount, existingTxn = null, log) {\n    return new ReaderRequest(async (r, log2) => {\n      const txn = existingTxn || await this._storage.readTxn(this.readTxnStores);\n      const liveFragment = await txn.timelineFragments.liveFragment(this._roomId);\n      let entries;\n      if (!liveFragment) {\n        entries = [];\n      } else {\n        this._fragmentIdComparer.add(liveFragment);\n        const liveFragmentEntry = FragmentBoundaryEntry.end(liveFragment, this._fragmentIdComparer);\n        const eventKey = liveFragmentEntry.asEventKey();\n        entries = await this._readFrom(eventKey, Direction.Backward, amount, r, txn, log2);\n        entries.unshift(liveFragmentEntry);\n      }\n      return entries;\n    }, log);\n  }\n  async readById(id, log) {\n    let stores = [this._storage.storeNames.timelineEvents];\n    if (this._decryptEntries) {\n      stores.push(this._storage.storeNames.inboundGroupSessions);\n    }\n    const txn = await this._storage.readTxn(stores);\n    const storageEntry = await txn.timelineEvents.getByEventId(this._roomId, id);\n    if (storageEntry) {\n      const entry = new EventEntry(storageEntry, this._fragmentIdComparer);\n      if (this._decryptEntries) {\n        const request = this._decryptEntries([entry], txn, log);\n        await request.complete();\n      }\n      return entry;\n    }\n  }\n  async _readFrom(eventKey, direction, amount, r, txn, log) {\n    const entries = await readRawTimelineEntriesWithTxn(this._roomId, eventKey, direction, amount, this._fragmentIdComparer, txn);\n    if (this._decryptEntries) {\n      r.decryptRequest = this._decryptEntries(entries, txn, log);\n      try {\n        await r.decryptRequest.complete();\n      } finally {\n        r.decryptRequest = null;\n      }\n    }\n    return entries;\n  }\n}\nclass NonPersistedEventEntry extends EventEntry {\n  get fragmentId() {\n    throw new Error(\"Cannot access fragmentId for non-persisted EventEntry\");\n  }\n  get entryIndex() {\n    throw new Error(\"Cannot access entryIndex for non-persisted EventEntry\");\n  }\n  get isNonPersisted() {\n    return true;\n  }\n  get isRedacting() {\n    return false;\n  }\n  get isRedacted() {\n    return super.isRedacting;\n  }\n}\nclass User {\n  constructor(userId) {\n    this._userId = userId;\n  }\n  get id() {\n    return this._userId;\n  }\n}\nclass Timeline {\n  constructor({ roomId, storage, closeCallback, fragmentIdComparer, pendingEvents, clock, powerLevelsObservable, hsApi }) {\n    this._roomId = roomId;\n    this._storage = storage;\n    this._closeCallback = closeCallback;\n    this._fragmentIdComparer = fragmentIdComparer;\n    this._disposables = new Disposables();\n    this._pendingEvents = pendingEvents;\n    this._clock = clock;\n    this._remoteEntries = new SortedArray((a, b) => a.compare(b));\n    this._ownMember = null;\n    this._timelineReader = new TimelineReader({\n      roomId: this._roomId,\n      storage: this._storage,\n      fragmentIdComparer: this._fragmentIdComparer\n    });\n    this._readerRequest = null;\n    this._allEntries = null;\n    this._contextEntriesNotInTimeline = /* @__PURE__ */ new Map();\n    this._decryptEntries = null;\n    this._hsApi = hsApi;\n    this.initializePowerLevels(powerLevelsObservable);\n  }\n  initializePowerLevels(observable) {\n    if (observable) {\n      this._powerLevels = observable.get();\n      this._disposables.track(observable.subscribe((powerLevels) => this._powerLevels = powerLevels));\n    }\n  }\n  async load(user, membership, log) {\n    const txn = await this._storage.readTxn(this._timelineReader.readTxnStores.concat(this._storage.storeNames.roomMembers, this._storage.storeNames.roomState));\n    const memberData = await txn.roomMembers.get(this._roomId, user.id);\n    if (memberData) {\n      this._ownMember = new RoomMember(memberData);\n    } else {\n      this._ownMember = RoomMember.fromUserId(this._roomId, user.id, membership);\n    }\n    const readerRequest = this._disposables.track(this._timelineReader.readFromEnd(20, txn, log));\n    try {\n      const entries = await readerRequest.complete();\n      this._loadContextEntriesWhereNeeded(entries);\n      this._setupEntries(entries);\n    } finally {\n      this._disposables.disposeTracked(readerRequest);\n    }\n  }\n  _setupEntries(timelineEntries) {\n    this._remoteEntries.setManySorted(timelineEntries);\n    if (this._pendingEvents) {\n      this._localEntries = new AsyncMappedList(this._pendingEvents, (pe) => this._mapPendingEventToEntry(pe), (pee, params) => {\n        pee.notifyUpdate(params);\n      }, (pee) => this._applyAndEmitLocalRelationChange(pee, (target) => target.removeLocalRelation(pee)));\n    } else {\n      this._localEntries = new ObservableArray();\n    }\n    this._allEntries = new ConcatList(this._remoteEntries, this._localEntries);\n  }\n  async _mapPendingEventToEntry(pe) {\n    let redactingEntry;\n    if (pe.eventType === REDACTION_TYPE) {\n      redactingEntry = await this._getOrLoadEntry(pe.relatedTxnId, pe.relatedEventId);\n    }\n    const pee = new PendingEventEntry({\n      pendingEvent: pe,\n      member: this._ownMember,\n      clock: this._clock,\n      redactingEntry\n    });\n    this._loadContextEntriesWhereNeeded([pee]);\n    this._applyAndEmitLocalRelationChange(pee, (target) => target.addLocalRelation(pee));\n    return pee;\n  }\n  _applyAndEmitLocalRelationChange(pee, updater) {\n    var _a, _b;\n    const updateOrFalse = (e) => {\n      const params = updater(e);\n      return params ? params : false;\n    };\n    this._findAndUpdateEntryById(pee.pendingEvent.relatedTxnId, pee.relatedEventId, updateOrFalse);\n    if (pee.redactingEntry) {\n      const relatedTxnId = (_a = pee.redactingEntry.pendingEvent) == null ? void 0 : _a.relatedTxnId;\n      this._findAndUpdateEntryById(relatedTxnId, pee.redactingEntry.relatedEventId, updateOrFalse);\n      (_b = pee.redactingEntry.contextForEntries) == null ? void 0 : _b.forEach((e) => this._emitUpdateForEntry(e, \"contextEntry\"));\n    }\n  }\n  _findAndUpdateEntryById(txnId, eventId, updateOrFalse) {\n    let found = false;\n    if (txnId) {\n      found = this._localEntries.findAndUpdate((e) => e.id === txnId, updateOrFalse);\n    }\n    if (!found && eventId) {\n      this._remoteEntries.findAndUpdate((e) => e.id === eventId, updateOrFalse);\n    }\n  }\n  async getOwnAnnotationEntry(targetId, key) {\n    const txn = await this._storage.readWriteTxn([\n      this._storage.storeNames.timelineEvents,\n      this._storage.storeNames.timelineRelations\n    ]);\n    const relations = await txn.timelineRelations.getForTargetAndType(this._roomId, targetId, ANNOTATION_RELATION_TYPE);\n    for (const relation of relations) {\n      const annotation = await txn.timelineEvents.getByEventId(this._roomId, relation.sourceEventId);\n      if (annotation && annotation.event.sender === this._ownMember.userId && getRelation(annotation.event).key === key) {\n        const eventEntry = new EventEntry(annotation, this._fragmentIdComparer);\n        this._addLocalRelationsToNewRemoteEntries([eventEntry]);\n        return eventEntry;\n      }\n    }\n    return null;\n  }\n  updateOwnMember(member) {\n    this._ownMember = member;\n  }\n  _addLocalRelationsToNewRemoteEntries(entries) {\n    var _a;\n    if (!((_a = this._localEntries) == null ? void 0 : _a.hasSubscriptions)) {\n      return;\n    }\n    for (const pee of this._localEntries) {\n      if (pee.relatedEventId) {\n        const relationTarget = entries.find((e) => e.id === pee.relatedEventId);\n        relationTarget == null ? void 0 : relationTarget.addLocalRelation(pee);\n      }\n      if (pee.redactingEntry) {\n        const eventId = pee.redactingEntry.relatedEventId;\n        const relationTarget = entries.find((e) => e.id === eventId);\n        relationTarget == null ? void 0 : relationTarget.addLocalRelation(pee);\n      }\n    }\n  }\n  static _entryUpdater(existingEntry, entry) {\n    var _a;\n    (_a = existingEntry.contextForEntries) == null ? void 0 : _a.forEach((event2) => event2.setContextEntry(entry));\n    entry.updateFrom(existingEntry);\n    return entry;\n  }\n  replaceEntries(entries) {\n    var _a;\n    this._addLocalRelationsToNewRemoteEntries(entries);\n    for (const entry of entries) {\n      try {\n        this._remoteEntries.getAndUpdate(entry, Timeline._entryUpdater);\n        const oldEntry = this._contextEntriesNotInTimeline.get(entry.id);\n        if (oldEntry) {\n          Timeline._entryUpdater(oldEntry, entry);\n          this._contextEntriesNotInTimeline.set(entry.id, entry);\n        }\n        (_a = entry.contextForEntries) == null ? void 0 : _a.forEach((e) => this._emitUpdateForEntry(e, \"contextEntry\"));\n      } catch (err) {\n        if (err.name === \"CompareError\") {\n          continue;\n        } else {\n          throw err;\n        }\n      }\n    }\n  }\n  addEntries(newEntries) {\n    this._addLocalRelationsToNewRemoteEntries(newEntries);\n    this._updateEntriesFetchedFromHomeserver(newEntries);\n    this._moveEntryToRemoteEntries(newEntries);\n    this._loadContextEntriesWhereNeeded(newEntries);\n    this._remoteEntries.setManySorted(newEntries);\n  }\n  _updateEntriesFetchedFromHomeserver(entries) {\n    var _a;\n    for (const entry of entries) {\n      const relatedEntry = this._contextEntriesNotInTimeline.get(entry.relatedEventId);\n      if ((relatedEntry == null ? void 0 : relatedEntry.isNonPersisted) && (relatedEntry == null ? void 0 : relatedEntry.addLocalRelation(entry))) {\n        (_a = relatedEntry.contextForEntries) == null ? void 0 : _a.forEach((e) => this._emitUpdateForEntry(e, \"contextEntry\"));\n      }\n    }\n  }\n  _moveEntryToRemoteEntries(entries) {\n    for (const entry of entries) {\n      const fetchedEntry = this._contextEntriesNotInTimeline.get(entry.id);\n      if (fetchedEntry) {\n        fetchedEntry.contextForEntries.forEach((e) => {\n          e.setContextEntry(entry);\n          this._emitUpdateForEntry(e, \"contextEntry\");\n        });\n        this._contextEntriesNotInTimeline.delete(entry.id);\n      }\n    }\n  }\n  _emitUpdateForEntry(entry, param) {\n    const txnId = entry.isPending ? entry.id : null;\n    const eventId = entry.isPending ? null : entry.id;\n    this._findAndUpdateEntryById(txnId, eventId, () => param);\n  }\n  async _loadContextEntriesWhereNeeded(entries) {\n    for (const entry of entries) {\n      if (!entry.contextEventId) {\n        continue;\n      }\n      const id = entry.contextEventId;\n      let contextEvent = entries.find((e) => e.id === id);\n      if (!contextEvent) {\n        contextEvent = this._findLoadedEventById(id);\n      }\n      if (contextEvent) {\n        entry.setContextEntry(contextEvent);\n      } else {\n        this._loadContextEntryNotInTimeline(entry);\n      }\n    }\n  }\n  async _loadContextEntryNotInTimeline(entry) {\n    const id = entry.contextEventId;\n    let contextEvent = await this._getEventFromStorage(id);\n    if (!contextEvent) {\n      contextEvent = await this._getEventFromHomeserver(id);\n    }\n    if (contextEvent) {\n      this._contextEntriesNotInTimeline.set(id, contextEvent);\n      entry.setContextEntry(contextEvent);\n      this._emitUpdateForEntry(entry, \"contextEntry\");\n    }\n  }\n  _findLoadedEventById(eventId) {\n    var _a;\n    return (_a = this.getByEventId(eventId)) != null ? _a : this._contextEntriesNotInTimeline.get(eventId);\n  }\n  async _getEventFromStorage(eventId) {\n    const entry = await this._timelineReader.readById(eventId);\n    return entry;\n  }\n  async _getEventFromHomeserver(eventId) {\n    const response = await this._hsApi.context(this._roomId, eventId, 0).response();\n    const sender = response.event.sender;\n    const member = response.state.find((e) => e.type === EVENT_TYPE$1 && e.user_id === sender);\n    const entry = {\n      event: response.event,\n      displayName: member.content.displayname,\n      avatarUrl: member.content.avatar_url\n    };\n    const eventEntry = new NonPersistedEventEntry(entry, this._fragmentIdComparer);\n    if (this._decryptEntries) {\n      const request = this._decryptEntries([eventEntry]);\n      await request.complete();\n    }\n    return eventEntry;\n  }\n  async loadAtTop(amount) {\n    if (this._disposables.isDisposed) {\n      return true;\n    }\n    const firstEventEntry = this._remoteEntries.array.find((e) => !!e.eventType);\n    if (!firstEventEntry) {\n      return true;\n    }\n    const readerRequest = this._disposables.track(this._timelineReader.readFrom(firstEventEntry.asEventKey(), Direction.Backward, amount));\n    try {\n      const entries = await readerRequest.complete();\n      this.addEntries(entries);\n      return entries.length < amount;\n    } finally {\n      this._disposables.disposeTracked(readerRequest);\n    }\n  }\n  async _getOrLoadEntry(txnId, eventId) {\n    var _a;\n    if (txnId) {\n      for (const p of this._localEntries) {\n        if (p.id === txnId) {\n          return p;\n        }\n      }\n    }\n    if (eventId) {\n      return (_a = this.getByEventId(eventId)) != null ? _a : await this._getEventFromStorage(eventId);\n    }\n    return null;\n  }\n  getByEventId(eventId) {\n    for (let i = 0; i < this._remoteEntries.length; i += 1) {\n      const entry = this._remoteEntries.get(i);\n      if (entry.id === eventId) {\n        return entry;\n      }\n    }\n    return null;\n  }\n  get entries() {\n    return this._allEntries;\n  }\n  get remoteEntries() {\n    return this._remoteEntries.array;\n  }\n  dispose() {\n    if (this._closeCallback) {\n      this._disposables.dispose();\n      this._closeCallback();\n      this._closeCallback = null;\n    }\n  }\n  enableEncryption(decryptEntries) {\n    this._decryptEntries = decryptEntries;\n    this._timelineReader.enableEncryption(decryptEntries);\n  }\n  get powerLevels() {\n    return this._powerLevels;\n  }\n  get me() {\n    return this._ownMember;\n  }\n}\nasync function loadMembers({ roomId, storage, txn }) {\n  if (!txn) {\n    txn = await storage.readTxn([\n      storage.storeNames.roomMembers\n    ]);\n  }\n  const memberDatas = await txn.roomMembers.getAll(roomId);\n  return memberDatas.map((d) => new RoomMember(d));\n}\nasync function fetchMembers({ summary, syncToken, roomId, hsApi, storage, setChangedMembersMap }, log) {\n  const changedMembersDuringSync = /* @__PURE__ */ new Map();\n  setChangedMembersMap(changedMembersDuringSync);\n  const memberResponse = await hsApi.members(roomId, { at: syncToken }, { log }).response();\n  const txn = await storage.readWriteTxn([\n    storage.storeNames.roomSummary,\n    storage.storeNames.roomMembers\n  ]);\n  let summaryChanges;\n  let members;\n  try {\n    summaryChanges = summary.writeHasFetchedMembers(true, txn);\n    const { roomMembers } = txn;\n    const memberEvents = memberResponse.chunk;\n    if (!Array.isArray(memberEvents)) {\n      throw new Error(\"malformed\");\n    }\n    log.set(\"members\", memberEvents.length);\n    members = await Promise.all(memberEvents.map(async (memberEvent) => {\n      const userId = memberEvent == null ? void 0 : memberEvent.state_key;\n      if (!userId) {\n        throw new Error(\"malformed\");\n      }\n      const changedMember = changedMembersDuringSync.get(userId);\n      if (changedMember) {\n        return changedMember;\n      } else {\n        const member = RoomMember.fromMemberEvent(roomId, memberEvent);\n        if (member) {\n          roomMembers.set(member.serialize());\n        }\n        return member;\n      }\n    }));\n  } catch (err) {\n    txn.abort();\n    throw err;\n  } finally {\n    setChangedMembersMap(null);\n  }\n  await txn.complete();\n  summary.applyChanges(summaryChanges);\n  return members;\n}\nasync function fetchOrLoadMembers(options, logger) {\n  const { summary } = options;\n  if (!summary.data.hasFetchedMembers) {\n    return logger.wrapOrRun(options.log, \"fetchMembers\", (log) => fetchMembers(options, log));\n  } else {\n    return loadMembers(options);\n  }\n}\nasync function fetchOrLoadMember(options, logger) {\n  const member = await loadMember(options);\n  const { summary } = options;\n  if (!summary.data.hasFetchedMembers && !member) {\n    return logger.wrapOrRun(options.log, \"fetchMember\", (log) => fetchMember(options, log));\n  }\n  return member;\n}\nasync function loadMember({ roomId, userId, storage }) {\n  const txn = await storage.readTxn([storage.storeNames.roomMembers]);\n  const member = await txn.roomMembers.get(roomId, userId);\n  return member ? new RoomMember(member) : null;\n}\nasync function fetchMember({ roomId, userId, hsApi, storage }, log) {\n  let memberData;\n  try {\n    memberData = await hsApi.state(roomId, \"m.room.member\", userId, { log }).response();\n  } catch (error) {\n    if (error.name === \"HomeServerError\" && error.errcode === \"M_NOT_FOUND\") {\n      return null;\n    }\n    throw error;\n  }\n  const member = new RoomMember({\n    roomId,\n    userId,\n    membership: memberData.membership,\n    avatarUrl: memberData.avatar_url,\n    displayName: memberData.displayname\n  });\n  const txn = await storage.readWriteTxn([storage.storeNames.roomMembers]);\n  try {\n    txn.roomMembers.set(member.serialize());\n  } catch (e) {\n    txn.abort();\n    throw e;\n  }\n  await txn.complete();\n  return member;\n}\nclass RetainedValue {\n  constructor(freeCallback) {\n    this._retentionCount = 1;\n    this._freeCallback = freeCallback;\n  }\n  retain() {\n    this._retentionCount += 1;\n  }\n  release() {\n    this._retentionCount -= 1;\n    if (this._retentionCount === 0) {\n      this._freeCallback();\n    }\n  }\n}\nclass MemberList extends RetainedValue {\n  constructor({ members, closeCallback }) {\n    super(closeCallback);\n    this._members = new ObservableMap();\n    for (const member of members) {\n      this._members.add(member.userId, member);\n    }\n  }\n  afterSync(memberChanges) {\n    for (const [userId, memberChange] of memberChanges.entries()) {\n      this._members.set(userId, memberChange.member);\n    }\n  }\n  get members() {\n    return this._members;\n  }\n}\nfunction calculateRoomName(sortedMembers, summaryData, log) {\n  const countWithoutMe = summaryData.joinCount + summaryData.inviteCount - 1;\n  if (sortedMembers.length >= countWithoutMe) {\n    if (sortedMembers.length > 1) {\n      const lastMember = sortedMembers[sortedMembers.length - 1];\n      const firstMembers = sortedMembers.slice(0, sortedMembers.length - 1);\n      return firstMembers.map((m) => m.name).join(\", \") + \" and \" + lastMember.name;\n    } else {\n      const otherMember = sortedMembers[0];\n      if (otherMember) {\n        return otherMember.name;\n      } else {\n        log.log({ l: \"could get get other member name\", length: sortedMembers.length, otherMember: !!otherMember, otherMemberMembership: otherMember == null ? void 0 : otherMember.membership });\n        return \"Unknown DM Name\";\n      }\n    }\n  } else if (sortedMembers.length < countWithoutMe) {\n    return sortedMembers.map((m) => m.name).join(\", \") + ` and ${countWithoutMe} others`;\n  } else {\n    return null;\n  }\n}\nclass Heroes {\n  constructor(roomId) {\n    this._roomId = roomId;\n    this._members = /* @__PURE__ */ new Map();\n  }\n  async calculateChanges(newHeroes, memberChanges, txn) {\n    const updatedHeroMembers = /* @__PURE__ */ new Map();\n    const removedUserIds = [];\n    for (const existingUserId of this._members.keys()) {\n      if (newHeroes.indexOf(existingUserId) === -1) {\n        removedUserIds.push(existingUserId);\n      }\n    }\n    for (const [userId, memberChange] of memberChanges.entries()) {\n      if (this._members.has(userId) || newHeroes.indexOf(userId) !== -1) {\n        updatedHeroMembers.set(userId, memberChange.member);\n      }\n    }\n    for (const userId of newHeroes) {\n      if (!this._members.has(userId) && !updatedHeroMembers.has(userId)) {\n        const memberData = await txn.roomMembers.get(this._roomId, userId);\n        if (memberData) {\n          const member = new RoomMember(memberData);\n          updatedHeroMembers.set(member.userId, member);\n        }\n      }\n    }\n    return { updatedHeroMembers: updatedHeroMembers.values(), removedUserIds };\n  }\n  applyChanges({ updatedHeroMembers, removedUserIds }, summaryData, log) {\n    for (const userId of removedUserIds) {\n      this._members.delete(userId);\n    }\n    for (const member of updatedHeroMembers) {\n      if (!removedUserIds.includes(member.userId)) {\n        this._members.set(member.userId, member);\n      }\n    }\n    const sortedMembers = Array.from(this._members.values()).sort((a, b) => a.name.localeCompare(b.name));\n    this._roomName = calculateRoomName(sortedMembers, summaryData, log);\n  }\n  get roomName() {\n    return this._roomName;\n  }\n  get roomAvatarUrl() {\n    if (this._members.size === 1) {\n      for (const member of this._members.values()) {\n        return member.avatarUrl;\n      }\n    }\n    return null;\n  }\n  get roomAvatarColorId() {\n    if (this._members.size === 1) {\n      for (const member of this._members.keys()) {\n        return member;\n      }\n    }\n    return null;\n  }\n}\nclass ObservedEventMap {\n  constructor(notifyEmpty) {\n    this._map = /* @__PURE__ */ new Map();\n    this._notifyEmpty = notifyEmpty;\n  }\n  observe(eventId, eventEntry = null) {\n    let observable = this._map.get(eventId);\n    if (!observable) {\n      observable = new ObservedEvent(this, eventEntry, eventId);\n      this._map.set(eventId, observable);\n    }\n    return observable;\n  }\n  updateEvents(eventEntries) {\n    for (let i = 0; i < eventEntries.length; i += 1) {\n      const entry = eventEntries[i];\n      const observable = this._map.get(entry.id);\n      observable == null ? void 0 : observable.update(entry);\n    }\n  }\n  _remove(id) {\n    this._map.delete(id);\n    if (this._map.size === 0) {\n      this._notifyEmpty();\n    }\n  }\n}\nclass ObservedEvent extends BaseObservableValue$1 {\n  constructor(eventMap, entry, id) {\n    super();\n    this._eventMap = eventMap;\n    this._entry = entry;\n    this._id = id;\n    Promise.resolve().then(() => {\n      if (!this.hasSubscriptions) {\n        this._eventMap._remove(this._id);\n        this._eventMap = null;\n      }\n    });\n  }\n  subscribe(handler) {\n    if (!this._eventMap) {\n      throw new Error(\"ObservedEvent expired, subscribe right after calling room.observeEvent()\");\n    }\n    return super.subscribe(handler);\n  }\n  onUnsubscribeLast() {\n    this._eventMap._remove(this._id);\n    this._eventMap = null;\n    super.onUnsubscribeLast();\n  }\n  update(entry) {\n    this._entry = entry;\n    this.emit(this._entry);\n  }\n  get() {\n    return this._entry;\n  }\n}\nfunction ensureLogItem(logItem) {\n  return logItem || Instance.item;\n}\nconst EVENT_TYPE = \"m.room.power_levels\";\nconst STATE_DEFAULT_POWER_LEVEL = 50;\nclass PowerLevels {\n  constructor({ powerLevelEvent, createEvent, ownUserId, membership }) {\n    this._plEvent = powerLevelEvent;\n    this._createEvent = createEvent;\n    this._ownUserId = ownUserId;\n    this._membership = membership;\n  }\n  canRedactFromSender(userId) {\n    if (userId === this._ownUserId && this._membership === \"join\") {\n      return true;\n    } else {\n      return this.canRedact;\n    }\n  }\n  canSendType(eventType) {\n    return this._myLevel >= this._getEventTypeLevel(eventType);\n  }\n  get canRedact() {\n    return this._myLevel >= this._getActionLevel(\"redact\");\n  }\n  get _myLevel() {\n    if (this._membership !== \"join\") {\n      return Number.MIN_SAFE_INTEGER;\n    }\n    return this.getUserLevel(this._ownUserId);\n  }\n  getUserLevel(userId) {\n    var _a, _b, _c2, _d2;\n    if (this._plEvent) {\n      let userLevel = (_b = (_a = this._plEvent.content) == null ? void 0 : _a.users) == null ? void 0 : _b[userId];\n      if (typeof userLevel !== \"number\") {\n        userLevel = (_c2 = this._plEvent.content) == null ? void 0 : _c2.users_default;\n      }\n      if (typeof userLevel === \"number\") {\n        return userLevel;\n      }\n    } else if (this._createEvent) {\n      if (userId === ((_d2 = this._createEvent.content) == null ? void 0 : _d2.creator)) {\n        return 100;\n      }\n    }\n    return 0;\n  }\n  _getActionLevel(action) {\n    var _a, _b;\n    const level = (_b = (_a = this._plEvent) == null ? void 0 : _a.content) == null ? void 0 : _b[action];\n    if (typeof level === \"number\") {\n      return level;\n    } else {\n      return STATE_DEFAULT_POWER_LEVEL;\n    }\n  }\n  _getEventTypeLevel(eventType) {\n    var _a, _b, _c2, _d2, _e;\n    const level = (_c2 = (_b = (_a = this._plEvent) == null ? void 0 : _a.content) == null ? void 0 : _b.events) == null ? void 0 : _c2[eventType];\n    if (typeof level === \"number\") {\n      return level;\n    } else {\n      const level2 = (_e = (_d2 = this._plEvent) == null ? void 0 : _d2.content) == null ? void 0 : _e.events_default;\n      if (typeof level2 === \"number\") {\n        return level2;\n      } else {\n        return 0;\n      }\n    }\n  }\n}\nclass ObservedStateTypeMap extends ObservableMap {\n  constructor(type) {\n    super();\n    this.type = type;\n  }\n  async load(roomId, txn) {\n    const events = await txn.roomState.getAllForType(roomId, this.type);\n    for (let i = 0; i < events.length; ++i) {\n      const { event: event2 } = events[i];\n      this.add(event2.state_key, event2);\n    }\n  }\n  handleStateEvent(event2) {\n    if (event2.type === this.type) {\n      this.set(event2.state_key, event2);\n    }\n  }\n  setRemoveCallback(callback) {\n    this.removeCallback = callback;\n  }\n  onUnsubscribeLast() {\n    var _a;\n    (_a = this.removeCallback) == null ? void 0 : _a.call(this);\n  }\n}\nclass ObservedStateKeyValue extends BaseObservableValue$1 {\n  constructor(type, stateKey) {\n    super();\n    this.type = type;\n    this.stateKey = stateKey;\n  }\n  async load(roomId, txn) {\n    var _a;\n    this.event = (_a = await txn.roomState.get(roomId, this.type, this.stateKey)) == null ? void 0 : _a.event;\n  }\n  handleStateEvent(event2) {\n    if (event2.type === this.type && event2.state_key === this.stateKey) {\n      this.event = event2;\n      this.emit(this.get());\n    }\n  }\n  get() {\n    return this.event;\n  }\n  setRemoveCallback(callback) {\n    this.removeCallback = callback;\n  }\n  onUnsubscribeLast() {\n    var _a;\n    (_a = this.removeCallback) == null ? void 0 : _a.call(this);\n  }\n}\nconst EVENT_ENCRYPTED_TYPE$1 = \"m.room.encrypted\";\nclass BaseRoom extends EventEmitter {\n  constructor({ roomId, storage, hsApi, mediaRepository, emitCollectionChange, user, createRoomEncryption, getSyncToken, platform }) {\n    super();\n    this._roomId = roomId;\n    this._storage = storage;\n    this._hsApi = hsApi;\n    this._mediaRepository = mediaRepository;\n    this._summary = new RoomSummary(roomId);\n    this._fragmentIdComparer = new FragmentIdComparer([]);\n    this._emitCollectionChange = emitCollectionChange;\n    this._timeline = null;\n    this._openTimelinePromise = null;\n    this._user = user;\n    this._changedMembersDuringSync = null;\n    this._memberList = null;\n    this._createRoomEncryption = createRoomEncryption;\n    this._roomEncryption = null;\n    this._getSyncToken = getSyncToken;\n    this._platform = platform;\n    this._observedEvents = null;\n    this._roomStateObservers = /* @__PURE__ */ new Set();\n    this._powerLevels = null;\n    this._powerLevelLoading = null;\n    this._observedMembers = null;\n  }\n  async observeStateType(type, txn = void 0) {\n    const map = new ObservedStateTypeMap(type);\n    await this._addStateObserver(map, txn);\n    return map;\n  }\n  async observeStateTypeAndKey(type, stateKey, txn = void 0) {\n    const value = new ObservedStateKeyValue(type, stateKey);\n    await this._addStateObserver(value, txn);\n    return value;\n  }\n  async getStateEvent(type, key = \"\") {\n    const txn = await this._storage.readTxn([\"roomState\"]);\n    return txn.roomState.get(this.id, type, key);\n  }\n  async _addStateObserver(stateObserver, txn) {\n    if (!txn) {\n      txn = await this._storage.readTxn([this._storage.storeNames.roomState]);\n    }\n    await stateObserver.load(this.id, txn);\n    this._roomStateObservers.add(stateObserver);\n    stateObserver.setRemoveCallback(() => {\n      this._roomStateObservers.delete(stateObserver);\n    });\n  }\n  async _eventIdsToEntries(eventIds, txn) {\n    const retryEntries = [];\n    await Promise.all(eventIds.map(async (eventId) => {\n      const storageEntry = await txn.timelineEvents.getByEventId(this._roomId, eventId);\n      if (storageEntry) {\n        retryEntries.push(new EventEntry(storageEntry, this._fragmentIdComparer));\n      }\n    }));\n    return retryEntries;\n  }\n  _getAdditionalTimelineRetryEntries(otherRetryEntries, roomKeys) {\n    let retryTimelineEntries = this._roomEncryption.filterUndecryptedEventEntriesForKeys(this._timeline.remoteEntries, roomKeys);\n    const existingIds = otherRetryEntries.reduce((ids, e) => {\n      ids.add(e.id);\n      return ids;\n    }, /* @__PURE__ */ new Set());\n    retryTimelineEntries = retryTimelineEntries.filter((e) => !existingIds.has(e.id));\n    return retryTimelineEntries;\n  }\n  async notifyRoomKey(roomKey, eventIds, log) {\n    var _a;\n    if (!this._roomEncryption) {\n      return;\n    }\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.timelineEvents,\n      this._storage.storeNames.inboundGroupSessions\n    ]);\n    let retryEntries = await this._eventIdsToEntries(eventIds, txn);\n    if (this._timeline) {\n      const retryTimelineEntries = this._getAdditionalTimelineRetryEntries(retryEntries, [roomKey]);\n      retryEntries = retryEntries.concat(retryTimelineEntries);\n    }\n    if (retryEntries.length) {\n      const decryptRequest = this._decryptEntries(DecryptionSource.Retry, retryEntries, txn, log);\n      await decryptRequest.complete();\n      (_a = this._timeline) == null ? void 0 : _a.replaceEntries(retryEntries);\n      const changes = this._summary.data.applyTimelineEntries(retryEntries, false, false);\n      if (await this._summary.writeAndApplyData(changes, this._storage)) {\n        this._emitUpdate();\n      }\n    }\n  }\n  _setEncryption(roomEncryption) {\n    if (roomEncryption && !this._roomEncryption) {\n      this._roomEncryption = roomEncryption;\n      if (this._timeline) {\n        this._timeline.enableEncryption(this._decryptEntries.bind(this, DecryptionSource.Timeline));\n      }\n      return true;\n    }\n    return false;\n  }\n  _decryptEntries(source, entries, inboundSessionTxn, log = null) {\n    const request = new DecryptionRequest(async (r, log2) => {\n      if (!inboundSessionTxn) {\n        inboundSessionTxn = await this._storage.readTxn([this._storage.storeNames.inboundGroupSessions]);\n      }\n      if (r.cancelled)\n        return;\n      const events = entries.filter((entry) => {\n        return entry.eventType === EVENT_ENCRYPTED_TYPE$1;\n      }).map((entry) => entry.event);\n      r.preparation = await this._roomEncryption.prepareDecryptAll(events, null, source, inboundSessionTxn);\n      if (r.cancelled)\n        return;\n      const changes = await r.preparation.decrypt();\n      r.preparation = null;\n      if (r.cancelled)\n        return;\n      const stores = [this._storage.storeNames.groupSessionDecryptions];\n      const isTimelineOpen = this._isTimelineOpen;\n      if (isTimelineOpen) {\n        stores.push(this._storage.storeNames.deviceKeys);\n      }\n      const writeTxn = await this._storage.readWriteTxn(stores);\n      let decryption;\n      try {\n        decryption = await changes.write(writeTxn, log2);\n        if (isTimelineOpen) {\n          await decryption.verifyKnownSenders(writeTxn);\n        }\n      } catch (err) {\n        writeTxn.abort();\n        throw err;\n      }\n      await writeTxn.complete();\n      decryption.applyToEntries(entries);\n      if (this._observedEvents) {\n        this._observedEvents.updateEvents(entries);\n      }\n      if (isTimelineOpen && decryption.hasUnverifiedSenders) {\n        log2.wrapDetached(\"fetch unknown senders keys\", async (log3) => {\n          var _a, _b;\n          const newlyVerifiedDecryption = await decryption.fetchAndVerifyRemainingSenders(this._hsApi, log3);\n          const verifiedEntries = [];\n          newlyVerifiedDecryption.applyToEntries(entries, (entry) => verifiedEntries.push(entry));\n          (_a = this._timeline) == null ? void 0 : _a.replaceEntries(verifiedEntries);\n          (_b = this._observedEvents) == null ? void 0 : _b.updateEvents(verifiedEntries);\n        });\n      }\n    }, ensureLogItem(log));\n    return request;\n  }\n  async _getSyncRetryDecryptEntries(newKeys, roomEncryption, txn) {\n    const entriesPerKey = await Promise.all(newKeys.map(async (key) => {\n      const retryEventIds = await roomEncryption.getEventIdsForMissingKey(key, txn);\n      if (retryEventIds) {\n        return this._eventIdsToEntries(retryEventIds, txn);\n      }\n    }));\n    let retryEntries = entriesPerKey.reduce((allEntries, entries) => entries ? allEntries.concat(entries) : allEntries, []);\n    if (this._timeline) {\n      const retryTimelineEntries = this._getAdditionalTimelineRetryEntries(retryEntries, newKeys);\n      const retryTimelineEntriesCopies = retryTimelineEntries.map((e) => e.clone());\n      retryEntries = retryEntries.concat(retryTimelineEntriesCopies);\n    }\n    return retryEntries;\n  }\n  async load(summary, txn, log) {\n    log.set(\"id\", this.id);\n    try {\n      if (summary) {\n        this._summary.load(summary);\n      }\n      if (this._summary.data.encryption) {\n        const roomEncryption = this._createRoomEncryption(this, this._summary.data.encryption);\n        this._setEncryption(roomEncryption);\n      }\n      if (this._summary.data.needsHeroes) {\n        this._heroes = new Heroes(this._roomId);\n        const changes = await this._heroes.calculateChanges(this._summary.data.heroes, [], txn);\n        this._heroes.applyChanges(changes, this._summary.data, log);\n      }\n    } catch (err) {\n      throw new WrappedError(`Could not load room ${this._roomId}`, err);\n    }\n  }\n  async observeMember(userId) {\n    if (!this._observedMembers) {\n      this._observedMembers = /* @__PURE__ */ new Map();\n    }\n    const mapMember = this._observedMembers.get(userId);\n    if (mapMember) {\n      return mapMember;\n    }\n    const member = await fetchOrLoadMember({\n      summary: this._summary,\n      roomId: this._roomId,\n      userId,\n      storage: this._storage,\n      hsApi: this._hsApi\n    }, this._platform.logger);\n    if (!member) {\n      return null;\n    }\n    const observableMember = new RetainedObservableValue(member, () => this._observedMembers.delete(userId));\n    this._observedMembers.set(userId, observableMember);\n    return observableMember;\n  }\n  async loadMemberList(txn = void 0, log = null) {\n    if (this._memberList) {\n      this._memberList.retain();\n      return this._memberList;\n    } else {\n      const members = await fetchOrLoadMembers({\n        summary: this._summary,\n        roomId: this._roomId,\n        hsApi: this._hsApi,\n        storage: this._storage,\n        txn,\n        syncToken: this._getSyncToken(),\n        setChangedMembersMap: (map) => this._changedMembersDuringSync = map,\n        log\n      }, this._platform.logger);\n      this._memberList = new MemberList({\n        members,\n        closeCallback: () => {\n          this._memberList = null;\n        }\n      });\n      return this._memberList;\n    }\n  }\n  fillGap(fragmentEntry, amount, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"fillGap\", async (log2) => {\n      log2.set(\"id\", this.id);\n      log2.set(\"fragment\", fragmentEntry.fragmentId);\n      log2.set(\"dir\", fragmentEntry.direction.asApiString());\n      if (fragmentEntry.edgeReached) {\n        log2.set(\"edgeReached\", true);\n        return;\n      }\n      const response = await this._hsApi.messages(this._roomId, {\n        from: fragmentEntry.token,\n        dir: fragmentEntry.direction.asApiString(),\n        limit: amount,\n        filter: {\n          lazy_load_members: true,\n          include_redundant_members: true\n        }\n      }, { log: log2 }).response();\n      const txn = await this._storage.readWriteTxn([\n        this._storage.storeNames.pendingEvents,\n        this._storage.storeNames.timelineEvents,\n        this._storage.storeNames.timelineRelations,\n        this._storage.storeNames.timelineFragments\n      ]);\n      let extraGapFillChanges;\n      let gapResult;\n      try {\n        extraGapFillChanges = await this._writeGapFill(response.chunk, txn, log2);\n        const relationWriter = new RelationWriter({\n          roomId: this._roomId,\n          fragmentIdComparer: this._fragmentIdComparer,\n          ownUserId: this._user.id\n        });\n        const gapWriter = new GapWriter({\n          roomId: this._roomId,\n          storage: this._storage,\n          fragmentIdComparer: this._fragmentIdComparer,\n          relationWriter\n        });\n        gapResult = await gapWriter.writeFragmentFill(fragmentEntry, response, fragmentEntry.token, txn, log2);\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n      if (this._roomEncryption) {\n        const decryptRequest = this._decryptEntries(DecryptionSource.Timeline, gapResult.entries, null, log2);\n        await decryptRequest.complete();\n      }\n      for (const fragment of gapResult.fragments) {\n        this._fragmentIdComparer.add(fragment);\n      }\n      if (extraGapFillChanges) {\n        this._applyGapFill(extraGapFillChanges);\n      }\n      if (this._timeline) {\n        this._timeline.replaceEntries(gapResult.updatedEntries);\n        this._timeline.addEntries(gapResult.entries);\n      }\n    });\n  }\n  async _writeGapFill(chunk, txn, log) {\n  }\n  _applyGapFill() {\n  }\n  get name() {\n    if (this._heroes) {\n      return this._heroes.roomName;\n    }\n    const summaryData = this._summary.data;\n    if (summaryData.name) {\n      return summaryData.name;\n    }\n    if (summaryData.canonicalAlias) {\n      return summaryData.canonicalAlias;\n    }\n    return null;\n  }\n  get id() {\n    return this._roomId;\n  }\n  get avatarUrl() {\n    if (this._summary.data.avatarUrl) {\n      return this._summary.data.avatarUrl;\n    } else if (this._heroes) {\n      return this._heroes.roomAvatarUrl;\n    }\n    return null;\n  }\n  get avatarColorId() {\n    return this._roomId;\n  }\n  get type() {\n    var _a;\n    return (_a = this._summary.data.type) != null ? _a : void 0;\n  }\n  get lastMessageTimestamp() {\n    return this._summary.data.lastMessageTimestamp;\n  }\n  get isLowPriority() {\n    const tags = this._summary.data.tags;\n    return !!(tags && tags[\"m.lowpriority\"]);\n  }\n  get isEncrypted() {\n    return !!this._summary.data.encryption;\n  }\n  get isJoined() {\n    return this.membership === \"join\";\n  }\n  get isLeft() {\n    return this.membership === \"leave\";\n  }\n  get canonicalAlias() {\n    return this._summary.data.canonicalAlias;\n  }\n  get joinedMemberCount() {\n    return this._summary.data.joinCount;\n  }\n  get mediaRepository() {\n    return this._mediaRepository;\n  }\n  get membership() {\n    return this._summary.data.membership;\n  }\n  get isDirectMessage() {\n    return this._summary.data.isDirectMessage;\n  }\n  get user() {\n    return this._user;\n  }\n  isDirectMessageForUserId(userId) {\n    if (this._summary.data.dmUserId === userId) {\n      return true;\n    } else {\n      const { heroes, joinCount, inviteCount } = this._summary.data;\n      if (heroes && heroes.includes(userId) && joinCount + inviteCount === 2) {\n        return true;\n      }\n    }\n    return false;\n  }\n  async _loadPowerLevels() {\n    const txn = await this._storage.readTxn([this._storage.storeNames.roomState]);\n    const powerLevelsState = await txn.roomState.get(this._roomId, \"m.room.power_levels\", \"\");\n    if (powerLevelsState) {\n      return new PowerLevels({\n        powerLevelEvent: powerLevelsState.event,\n        ownUserId: this._user.id,\n        membership: this.membership\n      });\n    }\n    const createState = await txn.roomState.get(this._roomId, \"m.room.create\", \"\");\n    if (createState) {\n      return new PowerLevels({\n        createEvent: createState.event,\n        ownUserId: this._user.id,\n        membership: this.membership\n      });\n    } else {\n      const membership = this.membership;\n      return new PowerLevels({ ownUserId: this._user.id, membership });\n    }\n  }\n  async observePowerLevels() {\n    if (this._powerLevelLoading) {\n      await this._powerLevelLoading;\n    }\n    let observable = this._powerLevels;\n    if (!observable) {\n      this._powerLevelLoading = this._loadPowerLevels();\n      const powerLevels = await this._powerLevelLoading;\n      observable = new RetainedObservableValue(powerLevels, () => {\n        this._powerLevels = null;\n      });\n      this._powerLevels = observable;\n      this._powerLevelLoading = null;\n    }\n    return observable;\n  }\n  enableKeyBackup(keyBackup) {\n    var _a;\n    (_a = this._roomEncryption) == null ? void 0 : _a.enableKeyBackup(keyBackup);\n    if (this._timeline && keyBackup) {\n      this._platform.logger.run(\"enableKeyBackup\", (log) => {\n        return this._roomEncryption.restoreMissingSessionsFromBackup(this._timeline.remoteEntries, log);\n      });\n    }\n  }\n  get _isTimelineOpen() {\n    return !!this._timeline;\n  }\n  _emitUpdate() {\n    this.emit(\"change\");\n    this._emitCollectionChange(this);\n  }\n  openTimeline(log = null) {\n    if (this._openTimelinePromise)\n      return this._openTimelinePromise;\n    this._openTimelinePromise = this._platform.logger.wrapOrRun(log, \"open timeline\", async (log2) => {\n      log2.set(\"id\", this.id);\n      if (this._timeline) {\n        throw new Error(\"not dealing with load race here for now\");\n      }\n      this._timeline = new Timeline({\n        roomId: this.id,\n        storage: this._storage,\n        fragmentIdComparer: this._fragmentIdComparer,\n        pendingEvents: this._getPendingEvents(),\n        closeCallback: () => {\n          this._timeline = null;\n          this._openTimelinePromise = null;\n          if (this._roomEncryption) {\n            this._roomEncryption.notifyTimelineClosed();\n          }\n        },\n        clock: this._platform.clock,\n        logger: this._platform.logger,\n        powerLevelsObservable: await this.observePowerLevels(),\n        hsApi: this._hsApi\n      });\n      try {\n        if (this._roomEncryption) {\n          this._timeline.enableEncryption(this._decryptEntries.bind(this, DecryptionSource.Timeline));\n        }\n        await this._timeline.load(this._user, this.membership, log2);\n      } catch (err) {\n        this._timeline.dispose();\n        throw err;\n      }\n      return this._timeline;\n    });\n    return this._openTimelinePromise;\n  }\n  _getPendingEvents() {\n    return null;\n  }\n  observeEvent(eventId) {\n    if (!this._observedEvents) {\n      this._observedEvents = new ObservedEventMap(() => {\n        this._observedEvents = null;\n      });\n    }\n    let entry = null;\n    if (this._timeline) {\n      entry = this._timeline.getByEventId(eventId);\n    }\n    const observable = this._observedEvents.observe(eventId, entry);\n    if (!entry) {\n      this._readEventById(eventId).then((entry2) => {\n        observable.update(entry2);\n      }).catch((err) => {\n        console.warn(`could not load event ${eventId} from storage`, err);\n      });\n    }\n    return observable;\n  }\n  async _readEventById(eventId) {\n    const reader = new TimelineReader({ roomId: this._roomId, storage: this._storage, fragmentIdComparer: this._fragmentIdComparer });\n    const entry = await reader.readById(eventId);\n    return entry;\n  }\n  dispose() {\n    var _a, _b;\n    (_a = this._roomEncryption) == null ? void 0 : _a.dispose();\n    (_b = this._timeline) == null ? void 0 : _b.dispose();\n  }\n}\nclass DecryptionRequest {\n  constructor(decryptFn, log) {\n    this._cancelled = false;\n    this.preparation = null;\n    this._promise = log.wrap(\"decryptEntries\", (log2) => decryptFn(this, log2));\n  }\n  complete() {\n    return this._promise;\n  }\n  get cancelled() {\n    return this._cancelled;\n  }\n  dispose() {\n    this._cancelled = true;\n    if (this.preparation) {\n      this.preparation.dispose();\n    }\n  }\n}\nclass SendQueue {\n  constructor({ roomId, storage, hsApi, pendingEvents }) {\n    pendingEvents = pendingEvents || [];\n    this._roomId = roomId;\n    this._storage = storage;\n    this._hsApi = hsApi;\n    this._pendingEvents = new SortedArray((a, b) => a.queueIndex - b.queueIndex);\n    this._pendingEvents.setManyUnsorted(pendingEvents.map((data) => this._createPendingEvent(data)));\n    this._isSending = false;\n    this._offline = false;\n    this._roomEncryption = null;\n    this._currentQueueIndex = 0;\n  }\n  _createPendingEvent(data, attachments = null) {\n    const pendingEvent = new PendingEvent({\n      data,\n      remove: () => this._removeEvent(pendingEvent),\n      emitUpdate: (params) => this._pendingEvents.update(pendingEvent, params),\n      attachments\n    });\n    return pendingEvent;\n  }\n  enableEncryption(roomEncryption) {\n    this._roomEncryption = roomEncryption;\n  }\n  _sendLoop(log) {\n    this._isSending = true;\n    this._sendLoopLogItem = log.runDetached(\"send queue flush\", async (log2) => {\n      try {\n        for (const pendingEvent of this._pendingEvents) {\n          await log2.wrap(\"send event\", async (log3) => {\n            log3.set(\"queueIndex\", pendingEvent.queueIndex);\n            try {\n              this._currentQueueIndex = pendingEvent.queueIndex;\n              await this._sendEvent(pendingEvent, log3);\n            } catch (err) {\n              if (err instanceof ConnectionError) {\n                this._offline = true;\n                log3.set(\"offline\", true);\n                pendingEvent.setWaiting();\n              } else {\n                log3.catch(err);\n                const isPermanentError = err.name === \"HomeServerError\" && (err.statusCode === 400 || err.statusCode === 403 || err.statusCode === 404);\n                if (isPermanentError) {\n                  log3.set(\"remove\", true);\n                  await pendingEvent.abort();\n                } else {\n                  pendingEvent.setError(err);\n                }\n              }\n            } finally {\n              this._currentQueueIndex = 0;\n            }\n          });\n        }\n      } finally {\n        this._isSending = false;\n        this._sendLoopLogItem = null;\n      }\n    });\n  }\n  async _sendEvent(pendingEvent, log) {\n    if (pendingEvent.needsUpload) {\n      await log.wrap(\"upload attachments\", (log2) => pendingEvent.uploadAttachments(this._hsApi, log2));\n      await this._tryUpdateEvent(pendingEvent);\n    }\n    if (pendingEvent.needsEncryption) {\n      pendingEvent.setEncrypting();\n      const encryptionContent = pendingEvent.contentForEncryption;\n      const { type, content } = await log.wrap(\"encrypt\", (log2) => this._roomEncryption.encrypt(pendingEvent.eventType, encryptionContent, this._hsApi, log2));\n      pendingEvent.setEncrypted(type, content);\n      await this._tryUpdateEvent(pendingEvent);\n    }\n    if (pendingEvent.needsSending) {\n      await pendingEvent.send(this._hsApi, log);\n      const txn = await this._storage.readWriteTxn([this._storage.storeNames.pendingEvents]);\n      try {\n        await this._tryUpdateEventWithTxn(pendingEvent, txn);\n        await this._resolveRemoteIdInPendingRelations(pendingEvent.txnId, pendingEvent.remoteId, txn);\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n    }\n  }\n  async _resolveRemoteIdInPendingRelations(txnId, remoteId, txn) {\n    const relatedEventWithoutRemoteId = this._pendingEvents.array.filter((pe) => {\n      return pe.relatedTxnId === txnId && pe.relatedEventId !== remoteId;\n    });\n    for (const relatedPE of relatedEventWithoutRemoteId) {\n      relatedPE.setRelatedEventId(remoteId);\n      await this._tryUpdateEventWithTxn(relatedPE, txn);\n    }\n    return relatedEventWithoutRemoteId;\n  }\n  async removeRemoteEchos(events, txn, parentLog) {\n    const removed = [];\n    for (const event2 of events) {\n      const txnId = event2.unsigned && event2.unsigned.transaction_id;\n      let idx;\n      if (txnId) {\n        idx = this._pendingEvents.array.findIndex((pe) => pe.txnId === txnId);\n      } else {\n        idx = this._pendingEvents.array.findIndex((pe) => pe.remoteId === event2.event_id);\n      }\n      if (idx !== -1) {\n        const pendingEvent = this._pendingEvents.get(idx);\n        const remoteId = event2.event_id;\n        parentLog.log({ l: \"removeRemoteEcho\", queueIndex: pendingEvent.queueIndex, remoteId, txnId });\n        txn.pendingEvents.remove(pendingEvent.roomId, pendingEvent.queueIndex);\n        removed.push(pendingEvent);\n        await this._resolveRemoteIdInPendingRelations(txnId, remoteId, txn);\n      }\n    }\n    return removed;\n  }\n  async _removeEvent(pendingEvent) {\n    let hasEvent = this._pendingEvents.array.indexOf(pendingEvent) !== -1;\n    if (hasEvent) {\n      const txn = await this._storage.readWriteTxn([this._storage.storeNames.pendingEvents]);\n      try {\n        txn.pendingEvents.remove(pendingEvent.roomId, pendingEvent.queueIndex);\n      } catch (err) {\n        txn.abort();\n      }\n      await txn.complete();\n      const idx = this._pendingEvents.array.indexOf(pendingEvent);\n      if (idx !== -1) {\n        this._pendingEvents.remove(idx);\n      }\n    }\n    pendingEvent.dispose();\n  }\n  emitRemovals(pendingEvents) {\n    for (const pendingEvent of pendingEvents) {\n      const idx = this._pendingEvents.array.indexOf(pendingEvent);\n      if (idx !== -1) {\n        this._pendingEvents.remove(idx);\n      }\n      pendingEvent.dispose();\n    }\n  }\n  resumeSending(parentLog) {\n    this._offline = false;\n    if (this._pendingEvents.length) {\n      parentLog.wrap(\"resumeSending\", (log) => {\n        log.set(\"id\", this._roomId);\n        log.set(\"pendingEvents\", this._pendingEvents.length);\n        if (!this._isSending) {\n          this._sendLoop(log);\n        }\n        if (this._sendLoopLogItem) {\n          log.refDetached(this._sendLoopLogItem);\n        }\n      });\n    }\n  }\n  async enqueueEvent(eventType, content, attachments, log) {\n    const relation = getRelationFromContent(content);\n    let relatedTxnId = null;\n    if (relation) {\n      const relationTarget = getRelationTarget(relation);\n      if (isTxnId(relationTarget)) {\n        relatedTxnId = relationTarget;\n        setRelationTarget(relation, null);\n      }\n      if (relation.rel_type === ANNOTATION_RELATION_TYPE) {\n        const isAlreadyAnnotating = this._pendingEvents.array.some((pe) => {\n          const r = getRelationFromContent(pe.content);\n          return pe.eventType === eventType && r && r.key === relation.key && (pe.relatedTxnId === relatedTxnId || r.event_id === relation.event_id);\n        });\n        if (isAlreadyAnnotating) {\n          log.set(\"already_annotating\", true);\n          return;\n        }\n      }\n    }\n    await this._enqueueEvent(eventType, content, attachments, relatedTxnId, null, log);\n  }\n  async _enqueueEvent(eventType, content, attachments, relatedTxnId, relatedEventId, log) {\n    const pendingEvent = await this._createAndStoreEvent(eventType, content, relatedTxnId, relatedEventId, attachments);\n    this._pendingEvents.set(pendingEvent);\n    log.set(\"queueIndex\", pendingEvent.queueIndex);\n    log.set(\"pendingEvents\", this._pendingEvents.length);\n    if (!this._isSending && !this._offline) {\n      this._sendLoop(log);\n    }\n    if (this._sendLoopLogItem) {\n      log.refDetached(this._sendLoopLogItem);\n    }\n  }\n  async enqueueRedaction(eventIdOrTxnId, reason, log) {\n    const isAlreadyRedacting = this._pendingEvents.array.some((pe) => {\n      return pe.eventType === REDACTION_TYPE && (pe.relatedTxnId === eventIdOrTxnId || pe.relatedEventId === eventIdOrTxnId);\n    });\n    if (isAlreadyRedacting) {\n      log.set(\"already_redacting\", true);\n      return;\n    }\n    let relatedTxnId;\n    let relatedEventId;\n    if (isTxnId(eventIdOrTxnId)) {\n      relatedTxnId = eventIdOrTxnId;\n      const txnId = eventIdOrTxnId;\n      const pe = this._pendingEvents.array.find((pe2) => pe2.txnId === txnId);\n      if (pe && !pe.remoteId && pe.status !== SendStatus.Sending) {\n        log.set(\"remove\", relatedTxnId);\n        await pe.abort();\n        return;\n      } else if (pe) {\n        relatedEventId = pe.remoteId;\n      } else {\n        return;\n      }\n    } else {\n      relatedEventId = eventIdOrTxnId;\n      const pe = this._pendingEvents.array.find((pe2) => pe2.remoteId === relatedEventId);\n      if (pe) {\n        relatedTxnId = pe.txnId;\n      }\n    }\n    log.set(\"relatedTxnId\", relatedTxnId);\n    log.set(\"relatedEventId\", relatedEventId);\n    await this._enqueueEvent(REDACTION_TYPE, { reason }, null, relatedTxnId, relatedEventId, log);\n  }\n  get pendingEvents() {\n    return this._pendingEvents;\n  }\n  async _tryUpdateEvent(pendingEvent) {\n    const txn = await this._storage.readWriteTxn([this._storage.storeNames.pendingEvents]);\n    try {\n      this._tryUpdateEventWithTxn(pendingEvent, txn);\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n  }\n  async _tryUpdateEventWithTxn(pendingEvent, txn) {\n    if (await txn.pendingEvents.exists(pendingEvent.roomId, pendingEvent.queueIndex)) {\n      txn.pendingEvents.update(pendingEvent.data);\n    }\n  }\n  async _createAndStoreEvent(eventType, content, relatedTxnId, relatedEventId, attachments) {\n    const txn = await this._storage.readWriteTxn([this._storage.storeNames.pendingEvents]);\n    let pendingEvent;\n    try {\n      const pendingEventsStore = txn.pendingEvents;\n      const maxStorageQueueIndex = await pendingEventsStore.getMaxQueueIndex(this._roomId) || 0;\n      const maxQueueIndex = Math.max(maxStorageQueueIndex, this._currentQueueIndex);\n      const queueIndex = maxQueueIndex + 1;\n      const needsEncryption = eventType !== REDACTION_TYPE && eventType !== REACTION_TYPE && !!this._roomEncryption;\n      pendingEvent = this._createPendingEvent({\n        roomId: this._roomId,\n        queueIndex,\n        eventType,\n        content,\n        relatedTxnId,\n        relatedEventId,\n        txnId: makeTxnId(),\n        needsEncryption,\n        needsUpload: !!attachments\n      }, attachments);\n      pendingEventsStore.add(pendingEvent.data);\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n    return pendingEvent;\n  }\n  dispose() {\n    for (const pe of this._pendingEvents) {\n      pe.dispose();\n    }\n  }\n}\nclass AttachmentUpload {\n  constructor({ filename, blob, platform }) {\n    this._filename = filename;\n    this._unencryptedBlob = blob;\n    this._transferredBlob = this._unencryptedBlob;\n    this._platform = platform;\n    this._mxcUrl = null;\n    this._encryptionInfo = null;\n    this._uploadRequest = null;\n    this._aborted = false;\n    this._error = null;\n    this._sentBytes = 0;\n  }\n  get size() {\n    return this._transferredBlob.size;\n  }\n  get sentBytes() {\n    return this._sentBytes;\n  }\n  abort() {\n    var _a;\n    (_a = this._uploadRequest) == null ? void 0 : _a.abort();\n  }\n  get localPreview() {\n    return this._unencryptedBlob;\n  }\n  async encrypt() {\n    if (this._encryptionInfo) {\n      throw new Error(\"already encrypted\");\n    }\n    const { info, blob } = await encryptAttachment(this._platform, this._transferredBlob);\n    this._transferredBlob = blob;\n    this._encryptionInfo = info;\n  }\n  async upload(hsApi, progressCallback, log) {\n    this._uploadRequest = hsApi.uploadAttachment(this._transferredBlob, this._filename, {\n      uploadProgress: (sentBytes) => {\n        this._sentBytes = sentBytes;\n        progressCallback();\n      },\n      log\n    });\n    const { content_uri } = await this._uploadRequest.response();\n    this._mxcUrl = content_uri;\n  }\n  applyToContent(urlPath, content) {\n    if (!this._mxcUrl) {\n      throw new Error(\"upload has not finished\");\n    }\n    let prefix2 = urlPath.substr(0, urlPath.lastIndexOf(\"url\"));\n    setPath(`${prefix2}info.size`, content, this._transferredBlob.size);\n    setPath(`${prefix2}info.mimetype`, content, this._unencryptedBlob.mimeType);\n    if (this._encryptionInfo) {\n      setPath(`${prefix2}file`, content, Object.assign(this._encryptionInfo, {\n        mimetype: this._unencryptedBlob.mimeType,\n        url: this._mxcUrl\n      }));\n    } else {\n      setPath(`${prefix2}url`, content, this._mxcUrl);\n    }\n  }\n  dispose() {\n    this._unencryptedBlob.dispose();\n    this._transferredBlob.dispose();\n  }\n}\nfunction setPath(path, content, value) {\n  const parts = path.split(\".\");\n  let obj = content;\n  for (let i = 0; i < parts.length - 1; i += 1) {\n    const key = parts[i];\n    if (!obj[key]) {\n      obj[key] = {};\n    }\n    obj = obj[key];\n  }\n  const propKey = parts[parts.length - 1];\n  obj[propKey] = value;\n}\nconst EVENT_ENCRYPTED_TYPE = \"m.room.encrypted\";\nclass Room extends BaseRoom {\n  constructor(options) {\n    super(options);\n    this._roomStateHandler = options.roomStateHandler;\n    const { pendingEvents } = options;\n    const relationWriter = new RelationWriter({\n      roomId: this.id,\n      fragmentIdComparer: this._fragmentIdComparer,\n      ownUserId: this._user.id\n    });\n    this._syncWriter = new SyncWriter({\n      roomId: this.id,\n      fragmentIdComparer: this._fragmentIdComparer,\n      relationWriter,\n      memberWriter: new MemberWriter(this.id)\n    });\n    this._sendQueue = new SendQueue({ roomId: this.id, storage: this._storage, hsApi: this._hsApi, pendingEvents });\n  }\n  _setEncryption(roomEncryption) {\n    if (super._setEncryption(roomEncryption)) {\n      this._sendQueue.enableEncryption(this._roomEncryption);\n      return true;\n    }\n    return false;\n  }\n  async prepareSync(roomResponse, membership, newKeys, txn, log) {\n    var _a;\n    log.set(\"id\", this.id);\n    if (newKeys) {\n      log.set(\"newKeys\", newKeys.length);\n    }\n    let summaryChanges = this._summary.data.applySyncResponse(roomResponse, membership, this._user.id);\n    let roomEncryption = this._roomEncryption;\n    if (!roomEncryption && summaryChanges.encryption) {\n      log.set(\"enableEncryption\", true);\n      roomEncryption = this._createRoomEncryption(this, summaryChanges.encryption);\n    }\n    let retryEntries;\n    let decryptPreparation;\n    if (roomEncryption) {\n      let eventsToDecrypt = ((_a = roomResponse == null ? void 0 : roomResponse.timeline) == null ? void 0 : _a.events) || [];\n      if (newKeys) {\n        retryEntries = await this._getSyncRetryDecryptEntries(newKeys, roomEncryption, txn);\n        if (retryEntries.length) {\n          log.set(\"retry\", retryEntries.length);\n          eventsToDecrypt = eventsToDecrypt.concat(retryEntries.map((entry) => entry.event));\n        }\n      }\n      eventsToDecrypt = eventsToDecrypt.filter((event2) => {\n        return (event2 == null ? void 0 : event2.type) === EVENT_ENCRYPTED_TYPE;\n      });\n      if (eventsToDecrypt.length) {\n        decryptPreparation = await roomEncryption.prepareDecryptAll(eventsToDecrypt, newKeys, DecryptionSource.Sync, txn);\n      }\n    }\n    return {\n      roomEncryption,\n      summaryChanges,\n      decryptPreparation,\n      decryptChanges: null,\n      retryEntries\n    };\n  }\n  async afterPrepareSync(preparation, parentLog) {\n    if (preparation.decryptPreparation) {\n      await parentLog.wrap(\"decrypt\", async (log) => {\n        log.set(\"id\", this.id);\n        preparation.decryptChanges = await preparation.decryptPreparation.decrypt();\n        preparation.decryptPreparation = null;\n      }, parentLog.level.Detail);\n    }\n  }\n  async writeSync(roomResponse, isInitialSync, { summaryChanges, decryptChanges, roomEncryption, retryEntries }, txn, log) {\n    var _a;\n    log.set(\"id\", this.id);\n    const isRejoin = summaryChanges.isNewJoin(this._summary.data);\n    if (isRejoin) {\n      txn.roomState.removeAllForRoom(this.id);\n      txn.roomMembers.removeAllForRoom(this.id);\n    }\n    const { entries: newEntries, updatedEntries, newLiveKey, memberChanges, memberSync } = await log.wrap(\"syncWriter\", (log2) => this._syncWriter.writeSync(roomResponse, isRejoin, summaryChanges.hasFetchedMembers, txn, log2), log.level.Detail);\n    let decryption;\n    if (decryptChanges) {\n      decryption = await log.wrap(\"decryptChanges\", (log2) => decryptChanges.write(txn, log2));\n      log.set(\"decryptionResults\", decryption.results.size);\n      log.set(\"decryptionErrors\", decryption.errors.size);\n      if (this._isTimelineOpen) {\n        await decryption.verifyKnownSenders(txn);\n      }\n      decryption.applyToEntries(newEntries);\n      if (retryEntries == null ? void 0 : retryEntries.length) {\n        decryption.applyToEntries(retryEntries);\n        updatedEntries.push(...retryEntries);\n      }\n    }\n    log.set(\"newEntries\", newEntries.length);\n    log.set(\"updatedEntries\", updatedEntries.length);\n    let encryptionChanges;\n    if (roomEncryption) {\n      encryptionChanges = await roomEncryption.writeSync(roomResponse, memberChanges, txn, log);\n      log.set(\"shouldFlushKeyShares\", encryptionChanges.shouldFlush);\n    }\n    const allEntries = newEntries.concat(updatedEntries);\n    summaryChanges = summaryChanges.applyTimelineEntries(allEntries, isInitialSync, !this._isTimelineOpen, this._user.id);\n    if (summaryChanges.membership !== \"join\") {\n      txn.roomSummary.remove(this.id);\n    } else {\n      summaryChanges = this._summary.writeData(summaryChanges, txn);\n    }\n    if (summaryChanges) {\n      log.set(\"summaryChanges\", summaryChanges.changedKeys(this._summary.data));\n    }\n    let heroChanges;\n    if (summaryChanges == null ? void 0 : summaryChanges.needsHeroes) {\n      if (!this._heroes) {\n        this._heroes = new Heroes(this._roomId);\n      }\n      heroChanges = await this._heroes.calculateChanges(summaryChanges.heroes, memberChanges, txn);\n    }\n    let removedPendingEvents;\n    if (Array.isArray((_a = roomResponse.timeline) == null ? void 0 : _a.events)) {\n      removedPendingEvents = await this._sendQueue.removeRemoteEchos(roomResponse.timeline.events, txn, log);\n    }\n    const powerLevelsEvent = this._getPowerLevelsEvent(roomResponse);\n    await this._runRoomStateHandlers(roomResponse, memberSync, txn, log);\n    return {\n      roomResponse,\n      summaryChanges,\n      roomEncryption,\n      newEntries,\n      updatedEntries,\n      newLiveKey,\n      removedPendingEvents,\n      memberChanges,\n      heroChanges,\n      powerLevelsEvent,\n      encryptionChanges,\n      decryption\n    };\n  }\n  afterSync(changes, log) {\n    const {\n      summaryChanges,\n      newEntries,\n      updatedEntries,\n      newLiveKey,\n      removedPendingEvents,\n      memberChanges,\n      powerLevelsEvent,\n      heroChanges,\n      roomEncryption,\n      roomResponse,\n      encryptionChanges\n    } = changes;\n    log.set(\"id\", this.id);\n    this._syncWriter.afterSync(newLiveKey);\n    this._setEncryption(roomEncryption);\n    if (this._roomEncryption) {\n      this._roomEncryption.afterSync(encryptionChanges);\n    }\n    if (memberChanges.size) {\n      if (this._changedMembersDuringSync) {\n        for (const [userId, memberChange] of memberChanges.entries()) {\n          this._changedMembersDuringSync.set(userId, memberChange.member);\n        }\n      }\n      if (this._memberList) {\n        this._memberList.afterSync(memberChanges);\n      }\n      this._roomStateHandler.updateRoomMembers(this, memberChanges);\n      if (this._observedMembers) {\n        this._updateObservedMembers(memberChanges);\n      }\n      if (this._timeline) {\n        for (const [userId, memberChange] of memberChanges.entries()) {\n          if (userId === this._user.id) {\n            this._timeline.updateOwnMember(memberChange.member);\n            break;\n          }\n        }\n      }\n    }\n    let emitChange = false;\n    if (summaryChanges) {\n      this._summary.applyChanges(summaryChanges);\n      if (!this._summary.data.needsHeroes) {\n        this._heroes = null;\n      }\n      emitChange = true;\n    }\n    if (this._heroes && heroChanges) {\n      const oldName = this.name;\n      this._heroes.applyChanges(heroChanges, this._summary.data, log);\n      if (oldName !== this.name) {\n        emitChange = true;\n      }\n    }\n    if (powerLevelsEvent) {\n      this._updatePowerLevels(powerLevelsEvent);\n    }\n    if (emitChange) {\n      this._emitUpdate();\n    }\n    if (this._timeline) {\n      this._timeline.replaceEntries(updatedEntries);\n      this._timeline.addEntries(newEntries);\n    }\n    if (this._observedEvents) {\n      this._observedEvents.updateEvents(updatedEntries);\n      this._observedEvents.updateEvents(newEntries);\n    }\n    if (removedPendingEvents) {\n      this._sendQueue.emitRemovals(removedPendingEvents);\n    }\n    this._emitSyncRoomState(roomResponse);\n  }\n  _updateObservedMembers(memberChanges) {\n    for (const [userId, memberChange] of memberChanges) {\n      const observableMember = this._observedMembers.get(userId);\n      if (observableMember) {\n        observableMember.set(memberChange.member);\n      }\n    }\n  }\n  _getPowerLevelsEvent(roomResponse) {\n    let powerLevelEvent;\n    iterateResponseStateEvents(roomResponse, (event2) => {\n      if (event2.state_key === \"\" && event2.type === EVENT_TYPE) {\n        powerLevelEvent = event2;\n      }\n    });\n    return powerLevelEvent;\n  }\n  _updatePowerLevels(powerLevelEvent) {\n    if (this._powerLevels) {\n      const newPowerLevels = new PowerLevels({\n        powerLevelEvent,\n        ownUserId: this._user.id,\n        membership: this.membership\n      });\n      this._powerLevels.set(newPowerLevels);\n    }\n  }\n  async afterSyncCompleted({ encryptionChanges, decryption, newEntries, updatedEntries }, log) {\n    const shouldFlushKeys = encryptionChanges == null ? void 0 : encryptionChanges.shouldFlush;\n    const shouldFetchUnverifiedSenders = this._isTimelineOpen && (decryption == null ? void 0 : decryption.hasUnverifiedSenders);\n    if (shouldFlushKeys || shouldFetchUnverifiedSenders) {\n      await log.wrap({ l: \"room\", id: this.id }, async (log2) => {\n        const promises = [];\n        if (shouldFlushKeys) {\n          promises.push(this._roomEncryption.flushPendingRoomKeyShares(this._hsApi, null, log2));\n        }\n        if (shouldFetchUnverifiedSenders) {\n          const promise = log2.wrap(\"verify senders\", async (log3) => {\n            var _a, _b;\n            const newlyVerifiedDecryption = await decryption.fetchAndVerifyRemainingSenders(this._hsApi, log3);\n            const verifiedEntries = [];\n            const updateCallback = (entry) => verifiedEntries.push(entry);\n            newlyVerifiedDecryption.applyToEntries(newEntries, updateCallback);\n            newlyVerifiedDecryption.applyToEntries(updatedEntries, updateCallback);\n            log3.set(\"verifiedEntries\", verifiedEntries.length);\n            (_a = this._timeline) == null ? void 0 : _a.replaceEntries(verifiedEntries);\n            (_b = this._observedEvents) == null ? void 0 : _b.updateEvents(verifiedEntries);\n          });\n          promises.push(promise);\n        }\n        await Promise.all(promises);\n      });\n    }\n  }\n  start(pendingOperations, parentLog) {\n    if (this._roomEncryption) {\n      const roomKeyShares = pendingOperations == null ? void 0 : pendingOperations.get(\"share_room_key\");\n      if (roomKeyShares) {\n        parentLog.wrapDetached(\"flush room keys\", (log) => {\n          log.set(\"id\", this.id);\n          return this._roomEncryption.flushPendingRoomKeyShares(this._hsApi, roomKeyShares, log);\n        });\n      }\n    }\n    this._sendQueue.resumeSending(parentLog);\n  }\n  async load(summary, txn, log) {\n    try {\n      await super.load(summary, txn, log);\n      await this._syncWriter.load(txn, log);\n    } catch (err) {\n      throw new WrappedError(`Could not load room ${this._roomId}`, err);\n    }\n  }\n  async _writeGapFill(gapChunk, txn, log) {\n    const removedPendingEvents = await this._sendQueue.removeRemoteEchos(gapChunk, txn, log);\n    return removedPendingEvents;\n  }\n  _applyGapFill(removedPendingEvents) {\n    this._sendQueue.emitRemovals(removedPendingEvents);\n  }\n  sendEvent(eventType, content, attachments, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"send\", (log2) => {\n      log2.set(\"id\", this.id);\n      return this._sendQueue.enqueueEvent(eventType, content, attachments, log2);\n    });\n  }\n  sendRedaction(eventIdOrTxnId, reason, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"redact\", (log2) => {\n      log2.set(\"id\", this.id);\n      return this._sendQueue.enqueueRedaction(eventIdOrTxnId, reason, log2);\n    });\n  }\n  async ensureMessageKeyIsShared(log = null) {\n    if (!this._roomEncryption) {\n      return;\n    }\n    return this._platform.logger.wrapOrRun(log, \"ensureMessageKeyIsShared\", (log2) => {\n      log2.set(\"id\", this.id);\n      return this._roomEncryption.ensureMessageKeyIsShared(this._hsApi, log2);\n    });\n  }\n  get avatarColorId() {\n    var _a;\n    return ((_a = this._heroes) == null ? void 0 : _a.roomAvatarColorId) || this._roomId;\n  }\n  get isUnread() {\n    return this._summary.data.isUnread;\n  }\n  get notificationCount() {\n    return this._summary.data.notificationCount;\n  }\n  get highlightCount() {\n    return this._summary.data.highlightCount;\n  }\n  get isTrackingMembers() {\n    return this._summary.data.isTrackingMembers;\n  }\n  async _getLastEventId() {\n    var _a;\n    const lastKey = this._syncWriter.lastMessageKey;\n    if (lastKey) {\n      const txn = await this._storage.readTxn([\n        this._storage.storeNames.timelineEvents\n      ]);\n      const eventEntry = await txn.timelineEvents.get(this._roomId, lastKey);\n      return (_a = eventEntry == null ? void 0 : eventEntry.event) == null ? void 0 : _a.event_id;\n    }\n  }\n  async clearUnread(log = null) {\n    if (this.isUnread || this.notificationCount) {\n      return await this._platform.logger.wrapOrRun(log, \"clearUnread\", async (log2) => {\n        log2.set(\"id\", this.id);\n        const txn = await this._storage.readWriteTxn([\n          this._storage.storeNames.roomSummary\n        ]);\n        let data;\n        try {\n          data = this._summary.writeClearUnread(txn);\n        } catch (err) {\n          txn.abort();\n          throw err;\n        }\n        await txn.complete();\n        this._summary.applyChanges(data);\n        this._emitUpdate();\n        try {\n          const lastEventId = await this._getLastEventId();\n          if (lastEventId) {\n            await this._hsApi.receipt(this._roomId, \"m.read\", lastEventId);\n          }\n        } catch (err) {\n          if (err.name !== \"ConnectionError\") {\n            throw err;\n          }\n        }\n      });\n    }\n  }\n  leave(log = null) {\n    return this._platform.logger.wrapOrRun(log, \"leave room\", async (log2) => {\n      log2.set(\"id\", this.id);\n      await this._hsApi.leave(this.id, { log: log2 }).response();\n    });\n  }\n  _getPendingEvents() {\n    return this._sendQueue.pendingEvents;\n  }\n  _runRoomStateHandlers(roomResponse, memberSync, txn, log) {\n    const promises = [];\n    iterateResponseStateEvents(roomResponse, (event2) => {\n      promises.push(this._roomStateHandler.handleRoomState(this, event2, memberSync, txn, log));\n    });\n    return Promise.all(promises);\n  }\n  _emitSyncRoomState(roomResponse) {\n    iterateResponseStateEvents(roomResponse, (event2) => {\n      for (const handler of this._roomStateObservers) {\n        handler.handleStateEvent(event2);\n      }\n    });\n  }\n  writeIsTrackingMembers(value, txn) {\n    return this._summary.writeIsTrackingMembers(value, txn);\n  }\n  applyIsTrackingMembersChanges(changes) {\n    this._summary.applyChanges(changes);\n  }\n  createAttachment(blob, filename) {\n    return new AttachmentUpload({ blob, filename, platform: this._platform });\n  }\n  dispose() {\n    super.dispose();\n    this._sendQueue.dispose();\n  }\n}\nclass ArchivedRoom extends BaseRoom {\n  constructor(options) {\n    super(options);\n    this._releaseCallback = options.releaseCallback;\n    this._forgetCallback = options.forgetCallback;\n    this._retentionCount = 1;\n    this._kickDetails = null;\n    this._kickedBy = null;\n  }\n  retain() {\n    this._retentionCount += 1;\n  }\n  release() {\n    this._retentionCount -= 1;\n    if (this._retentionCount === 0) {\n      this._releaseCallback();\n    }\n  }\n  async _getKickAuthor(sender, txn) {\n    const senderMember = await txn.roomMembers.get(this.id, sender);\n    if (senderMember) {\n      return new RoomMember(senderMember);\n    } else {\n      return RoomMember.fromUserId(this.id, sender, \"join\");\n    }\n  }\n  async load(archivedRoomSummary, txn, log) {\n    const { summary, kickDetails } = archivedRoomSummary;\n    this._kickDetails = kickDetails;\n    if (this._kickDetails) {\n      this._kickedBy = await this._getKickAuthor(this._kickDetails.sender, txn);\n    }\n    return super.load(summary, txn, log);\n  }\n  async writeSync(joinedSummaryData, roomResponse, membership, txn, log) {\n    log.set(\"id\", this.id);\n    if (membership === \"leave\") {\n      const newKickDetails = findKickDetails(roomResponse, this._user.id);\n      if (newKickDetails || joinedSummaryData) {\n        const kickDetails = newKickDetails || this._kickDetails;\n        let kickedBy;\n        if (newKickDetails) {\n          kickedBy = await this._getKickAuthor(newKickDetails.sender, txn);\n        }\n        const summaryData = joinedSummaryData || this._summary.data;\n        txn.archivedRoomSummary.set({\n          summary: summaryData.serialize(),\n          kickDetails\n        });\n        return { kickDetails, kickedBy, summaryData };\n      }\n    } else if (membership === \"join\") {\n      txn.archivedRoomSummary.remove(this.id);\n    }\n    return {};\n  }\n  afterSync({ summaryData, kickDetails, kickedBy }, log) {\n    log.set(\"id\", this.id);\n    if (summaryData) {\n      this._summary.applyChanges(summaryData);\n    }\n    if (kickDetails) {\n      this._kickDetails = kickDetails;\n    }\n    if (kickedBy) {\n      this._kickedBy = kickedBy;\n    }\n    this._emitUpdate();\n  }\n  get isKicked() {\n    var _a;\n    return ((_a = this._kickDetails) == null ? void 0 : _a.membership) === \"leave\";\n  }\n  get isBanned() {\n    var _a;\n    return ((_a = this._kickDetails) == null ? void 0 : _a.membership) === \"ban\";\n  }\n  get kickedBy() {\n    return this._kickedBy;\n  }\n  get kickReason() {\n    var _a;\n    return (_a = this._kickDetails) == null ? void 0 : _a.reason;\n  }\n  isArchived() {\n    return true;\n  }\n  forget(log = null) {\n    return this._platform.logger.wrapOrRun(log, \"forget room\", async (log2) => {\n      log2.set(\"id\", this.id);\n      await this._hsApi.forget(this.id, { log: log2 }).response();\n      const storeNames = this._storage.storeNames;\n      const txn = await this._storage.readWriteTxn([\n        storeNames.roomState,\n        storeNames.archivedRoomSummary,\n        storeNames.roomMembers,\n        storeNames.timelineEvents,\n        storeNames.timelineFragments,\n        storeNames.timelineRelations,\n        storeNames.pendingEvents,\n        storeNames.inboundGroupSessions,\n        storeNames.groupSessionDecryptions,\n        storeNames.operations\n      ]);\n      txn.roomState.removeAllForRoom(this.id);\n      txn.archivedRoomSummary.remove(this.id);\n      txn.roomMembers.removeAllForRoom(this.id);\n      txn.timelineEvents.removeAllForRoom(this.id);\n      txn.timelineFragments.removeAllForRoom(this.id);\n      txn.timelineRelations.removeAllForRoom(this.id);\n      txn.pendingEvents.removeAllForRoom(this.id);\n      txn.inboundGroupSessions.removeAllForRoom(this.id);\n      txn.groupSessionDecryptions.removeAllForRoom(this.id);\n      await txn.operations.removeAllForScope(this.id);\n      await txn.complete();\n      this._retentionCount = 0;\n      this._releaseCallback();\n      this._forgetCallback(this.id);\n    });\n  }\n  join(log = null) {\n    return this._platform.logger.wrapOrRun(log, \"rejoin archived room\", async (log2) => {\n      await this._hsApi.join(this.id, { log: log2 }).response();\n    });\n  }\n}\nfunction findKickDetails(roomResponse, ownUserId) {\n  var _a, _b;\n  let kickEvent;\n  iterateResponseStateEvents(roomResponse, (event2) => {\n    if (event2.type === EVENT_TYPE$1) {\n      if (event2.state_key === ownUserId && event2.sender !== event2.state_key) {\n        kickEvent = event2;\n      }\n    }\n  });\n  if (kickEvent) {\n    return {\n      membership: (_a = kickEvent.content) == null ? void 0 : _a.membership,\n      reason: (_b = kickEvent.content) == null ? void 0 : _b.reason,\n      sender: kickEvent.sender\n    };\n  }\n}\nasync function loadProfiles(userIds, hsApi, log) {\n  const profiles = await Promise.all(userIds.map(async (userId) => {\n    const response = await hsApi.profile(userId, { log }).response();\n    return new Profile(userId, response.displayname, response.avatar_url);\n  }));\n  profiles.sort((a, b) => a.name.localeCompare(b.name));\n  return profiles;\n}\nclass Profile {\n  constructor(userId, displayName, avatarUrl) {\n    this.userId = userId;\n    this.displayName = displayName;\n    this.avatarUrl = avatarUrl;\n  }\n  get name() {\n    return this.displayName || this.userId;\n  }\n}\nclass UserIdProfile {\n  constructor(userId) {\n    this.userId = userId;\n  }\n  get displayName() {\n    return void 0;\n  }\n  get name() {\n    return this.userId;\n  }\n  get avatarUrl() {\n    return void 0;\n  }\n}\nfunction defaultE2EEStatusForType(type) {\n  switch (type) {\n    case RoomVisibility.DirectMessage:\n    case RoomVisibility.Private:\n      return true;\n    case RoomVisibility.Public:\n      return false;\n  }\n}\nfunction presetForType(type) {\n  switch (type) {\n    case RoomVisibility.DirectMessage:\n      return \"trusted_private_chat\";\n    case RoomVisibility.Private:\n      return \"private_chat\";\n    case RoomVisibility.Public:\n      return \"public_chat\";\n  }\n}\nclass RoomBeingCreated extends EventEmitter {\n  constructor(id, options, updateCallback, mediaRepository, platform, log) {\n    var _a;\n    super();\n    this.id = id;\n    this.options = options;\n    this.updateCallback = updateCallback;\n    this.mediaRepository = mediaRepository;\n    this.platform = platform;\n    this.profiles = [];\n    this._isCancelled = false;\n    this.isEncrypted = options.isEncrypted === void 0 ? defaultE2EEStatusForType(options.visibility) : options.isEncrypted;\n    if (options.name) {\n      this._calculatedName = options.name;\n    } else {\n      const summaryData = {\n        joinCount: 1,\n        inviteCount: ((_a = options.invites) == null ? void 0 : _a.length) || 0\n      };\n      const userIdProfiles = (options.invites || []).map((userId) => new UserIdProfile(userId));\n      this._calculatedName = calculateRoomName(userIdProfiles, summaryData, log);\n    }\n  }\n  async create(hsApi, log) {\n    try {\n      let avatarEventContent;\n      if (this.options.avatar) {\n        const { avatar } = this.options;\n        avatarEventContent = {\n          info: avatar.info\n        };\n        if (\"blob\" in avatar) {\n          const attachment = new AttachmentUpload({ filename: avatar.name, blob: avatar.blob, platform: this.platform });\n          await attachment.upload(hsApi, () => {\n          }, log);\n          attachment.applyToContent(\"url\", avatarEventContent);\n        } else {\n          avatarEventContent.url = avatar.url;\n        }\n      }\n      const createOptions = {\n        is_direct: this.options.visibility === RoomVisibility.DirectMessage,\n        preset: presetForType(this.options.visibility),\n        initial_state: []\n      };\n      if (this.options.name) {\n        createOptions.name = this.options.name;\n      }\n      if (this.options.topic) {\n        createOptions.topic = this.options.topic;\n      }\n      if (this.options.invites) {\n        createOptions.invite = this.options.invites;\n      }\n      if (this.options.alias) {\n        createOptions.room_alias_name = this.options.alias;\n      }\n      if (this.options.type !== void 0) {\n        let type = void 0;\n        if (this.options.type === RoomType.World)\n          type = \"org.matrix.msc3815.world\";\n        if (this.options.type === RoomType.Profile)\n          type = \"org.matrix.msc3815.profile\";\n        createOptions.creation_content = { type };\n      }\n      if (this.options.isFederationDisabled === true) {\n        if (createOptions.creation_content === void 0)\n          createOptions.creation_content = {};\n        createOptions.creation_content[\"m.federate\"] = false;\n      }\n      if (this.isEncrypted) {\n        createOptions.initial_state.push(createRoomEncryptionEvent());\n      }\n      if (avatarEventContent) {\n        createOptions.initial_state.push({\n          type: \"m.room.avatar\",\n          state_key: \"\",\n          content: avatarEventContent\n        });\n      }\n      if (this.options.powerLevelContentOverride) {\n        createOptions.power_level_content_override = this.options.powerLevelContentOverride;\n      }\n      if (this.options.initialState) {\n        createOptions.initial_state.push(...this.options.initialState);\n      }\n      const response = await hsApi.createRoom(createOptions, { log }).response();\n      this._roomId = response[\"room_id\"];\n    } catch (err) {\n      this._error = err;\n    }\n    this.emitChange();\n  }\n  async loadProfiles(hsApi, log) {\n    try {\n      if (!this.options.name && this.options.invites) {\n        this.profiles = await loadProfiles(this.options.invites, hsApi, log);\n        const summaryData = {\n          joinCount: 1,\n          inviteCount: this.options.invites.length\n        };\n        this._calculatedName = calculateRoomName(this.profiles, summaryData, log);\n        this.emitChange();\n      }\n    } catch (err) {\n    }\n  }\n  emitChange(params) {\n    this.updateCallback(this, params);\n    this.emit(\"change\");\n  }\n  get avatarColorId() {\n    var _a, _b, _c2;\n    return (_c2 = (_b = (_a = this.options.invites) == null ? void 0 : _a[0]) != null ? _b : this._roomId) != null ? _c2 : this.id;\n  }\n  get avatarUrl() {\n    var _a, _b;\n    return (_b = (_a = this.profiles) == null ? void 0 : _a[0]) == null ? void 0 : _b.avatarUrl;\n  }\n  get avatarBlobUrl() {\n    const avatar = this.options.avatar;\n    if (!avatar || !(\"blob\" in avatar)) {\n      return void 0;\n    }\n    return avatar.blob.url;\n  }\n  get roomId() {\n    return this._roomId;\n  }\n  get name() {\n    return this._calculatedName;\n  }\n  get isBeingCreated() {\n    return true;\n  }\n  get error() {\n    return this._error;\n  }\n  cancel() {\n    if (!this._isCancelled) {\n      this.dispose();\n      this._isCancelled = true;\n      this.emitChange(\"isCancelled\");\n    }\n  }\n  get isCancelled() {\n    return this._isCancelled;\n  }\n  dispose() {\n    if (this.options.avatar && \"blob\" in this.options.avatar) {\n      this.options.avatar.blob.dispose();\n    }\n  }\n  async adjustDirectMessageMapIfNeeded(user, storage, hsApi, log) {\n    if (!this.options.invites || this.options.visibility !== RoomVisibility.DirectMessage) {\n      return;\n    }\n    const userId = this.options.invites[0];\n    const DM_MAP_TYPE = \"m.direct\";\n    await log.wrap(\"set \" + DM_MAP_TYPE, async (log2) => {\n      try {\n        const txn = await storage.readWriteTxn([storage.storeNames.accountData]);\n        let mapEntry;\n        try {\n          mapEntry = await txn.accountData.get(DM_MAP_TYPE);\n          if (!mapEntry) {\n            mapEntry = { type: DM_MAP_TYPE, content: {} };\n          }\n          const map = mapEntry.content;\n          let userRooms = map[userId];\n          if (!userRooms) {\n            map[userId] = userRooms = [];\n          }\n          userRooms.push(this._roomId);\n          txn.accountData.set(mapEntry);\n          await txn.complete();\n        } catch (err) {\n          txn.abort();\n          throw err;\n        }\n        await hsApi.setAccountData(user.id, DM_MAP_TYPE, mapEntry.content, { log: log2 }).response();\n      } catch (err) {\n        log2.catch(err);\n      }\n    });\n  }\n}\nclass Invite extends EventEmitter {\n  constructor({ roomId, user, hsApi, mediaRepository, emitCollectionRemove, emitCollectionUpdate, platform }) {\n    super();\n    this._roomId = roomId;\n    this._user = user;\n    this._hsApi = hsApi;\n    this._emitCollectionRemove = emitCollectionRemove;\n    this._emitCollectionUpdate = emitCollectionUpdate;\n    this._mediaRepository = mediaRepository;\n    this._platform = platform;\n    this._inviteData = null;\n    this._accepting = false;\n    this._rejecting = false;\n    this._accepted = false;\n    this._rejected = false;\n  }\n  get isInvite() {\n    return true;\n  }\n  get id() {\n    return this._roomId;\n  }\n  get name() {\n    return this._inviteData.name || this._inviteData.canonicalAlias;\n  }\n  get isDirectMessage() {\n    return this._inviteData.isDirectMessage;\n  }\n  get avatarUrl() {\n    return this._inviteData.avatarUrl;\n  }\n  get avatarColorId() {\n    return this._inviteData.avatarColorId || this.id;\n  }\n  get type() {\n    var _a;\n    return (_a = this._inviteData.type) != null ? _a : void 0;\n  }\n  get timestamp() {\n    return this._inviteData.timestamp;\n  }\n  get isEncrypted() {\n    return this._inviteData.isEncrypted;\n  }\n  get inviter() {\n    return this._inviter;\n  }\n  isDirectMessageForUserId(userId) {\n    return this.isDirectMessage && this._inviter.userId === userId;\n  }\n  get isPublic() {\n    return this._inviteData.joinRule === \"public\";\n  }\n  get canonicalAlias() {\n    return this._inviteData.canonicalAlias;\n  }\n  async accept(log = null) {\n    await this._platform.logger.wrapOrRun(log, \"acceptInvite\", async (log2) => {\n      var _a;\n      this._accepting = true;\n      this._emitChange(\"accepting\");\n      await this._hsApi.joinIdOrAlias((_a = this.canonicalAlias) != null ? _a : this._roomId, { log: log2 }).response();\n    });\n  }\n  async reject(log = null) {\n    await this._platform.logger.wrapOrRun(log, \"rejectInvite\", async (log2) => {\n      this._rejecting = true;\n      this._emitChange(\"rejecting\");\n      await this._hsApi.leave(this._roomId, { log: log2 }).response();\n    });\n  }\n  get accepting() {\n    return this._accepting;\n  }\n  get accepted() {\n    return this._accepted;\n  }\n  get rejecting() {\n    return this._rejecting;\n  }\n  get rejected() {\n    return this._rejected;\n  }\n  get mediaRepository() {\n    return this._mediaRepository;\n  }\n  _emitChange(params) {\n    this.emit(\"change\");\n    this._emitCollectionUpdate(this, params);\n  }\n  load(inviteData, log) {\n    log.set(\"id\", this.id);\n    this._inviteData = inviteData;\n    this._inviter = inviteData.inviter ? new RoomMember(inviteData.inviter) : null;\n  }\n  async writeSync(membership, roomResponse, txn, log) {\n    var _a;\n    if (membership === \"invite\") {\n      log.set(\"id\", this.id);\n      log.set(\"add\", true);\n      const inviteState = (_a = roomResponse[\"invite_state\"]) == null ? void 0 : _a.events;\n      if (!Array.isArray(inviteState)) {\n        return null;\n      }\n      const summaryData = this._createSummaryData(inviteState);\n      let heroes;\n      if (!summaryData.name && !summaryData.canonicalAlias) {\n        heroes = await this._createHeroes(inviteState, log);\n      }\n      const myInvite = this._getMyInvite(inviteState);\n      if (!myInvite) {\n        return null;\n      }\n      const inviter = this._getInviter(myInvite, inviteState);\n      const inviteData = this._createData(inviteState, myInvite, inviter, summaryData, heroes);\n      txn.invites.set(inviteData);\n      return { inviteData, inviter };\n    } else {\n      log.set(\"id\", this.id);\n      log.set(\"membership\", membership);\n      txn.invites.remove(this.id);\n      return { removed: true, membership };\n    }\n  }\n  afterSync(changes, log) {\n    log.set(\"id\", this.id);\n    if (changes) {\n      if (changes.removed) {\n        this._accepting = false;\n        this._rejecting = false;\n        if (changes.membership === \"join\") {\n          this._accepted = true;\n        } else {\n          this._rejected = true;\n        }\n        this.emit(\"change\");\n      } else {\n        this._inviteData = changes.inviteData;\n        this._inviter = changes.inviter;\n      }\n    }\n  }\n  _createData(inviteState, myInvite, inviter, summaryData, heroes) {\n    const name = heroes ? heroes.roomName : summaryData.name;\n    const avatarUrl = heroes ? heroes.roomAvatarUrl : summaryData.avatarUrl;\n    const avatarColorId = (heroes == null ? void 0 : heroes.roomAvatarColorId) || this.id;\n    return {\n      roomId: this.id,\n      isEncrypted: !!summaryData.encryption,\n      isDirectMessage: summaryData.isDirectMessage,\n      type: summaryData.type,\n      name,\n      avatarUrl,\n      avatarColorId,\n      canonicalAlias: summaryData.canonicalAlias,\n      timestamp: this._platform.clock.now(),\n      joinRule: this._getJoinRule(inviteState),\n      inviter: inviter == null ? void 0 : inviter.serialize()\n    };\n  }\n  _createSummaryData(inviteState) {\n    return inviteState.reduce((data, event2) => processStateEvent(data, event2, this._user.id), new SummaryData(null, this.id));\n  }\n  async _createHeroes(inviteState, log) {\n    const members = inviteState.filter((e) => e.type === EVENT_TYPE$1);\n    const otherMembers = members.filter((e) => e.state_key !== this._user.id);\n    const memberChanges = otherMembers.reduce((map, e) => {\n      const member = RoomMember.fromMemberEvent(this.id, e);\n      map.set(member.userId, new MemberChange(member, null));\n      return map;\n    }, /* @__PURE__ */ new Map());\n    const otherUserIds = otherMembers.map((e) => e.state_key);\n    const heroes = new Heroes(this.id);\n    const changes = await heroes.calculateChanges(otherUserIds, memberChanges, null);\n    const countSummary = new SummaryData(null, this.id);\n    countSummary.joinCount = members.reduce((sum, e) => {\n      var _a;\n      return sum + (((_a = e.content) == null ? void 0 : _a.membership) === \"join\" ? 1 : 0);\n    }, 0);\n    countSummary.inviteCount = members.reduce((sum, e) => {\n      var _a;\n      return sum + (((_a = e.content) == null ? void 0 : _a.membership) === \"invite\" ? 1 : 0);\n    }, 0);\n    heroes.applyChanges(changes, countSummary, log);\n    return heroes;\n  }\n  _getMyInvite(inviteState) {\n    return inviteState.find((e) => e.type === EVENT_TYPE$1 && e.state_key === this._user.id);\n  }\n  _getInviter(myInvite, inviteState) {\n    const inviterMemberEvent = inviteState.find((e) => e.type === EVENT_TYPE$1 && e.state_key === myInvite.sender);\n    if (inviterMemberEvent) {\n      return RoomMember.fromMemberEvent(this.id, inviterMemberEvent);\n    }\n  }\n  _getJoinRule(inviteState) {\n    var _a;\n    const event2 = inviteState.find((e) => e.type === \"m.room.join_rules\");\n    if (event2) {\n      return (_a = event2.content) == null ? void 0 : _a.join_rule;\n    }\n    return null;\n  }\n}\nclass Pusher {\n  constructor(description) {\n    this._description = description;\n  }\n  static httpPusher(host2, appId, pushkey, data) {\n    return new Pusher({\n      kind: \"http\",\n      append: true,\n      data: Object.assign({}, data, { url: host2 + \"/_matrix/push/v1/notify\" }),\n      pushkey,\n      app_id: appId,\n      app_display_name: \"Hydrogen\",\n      device_display_name: \"Hydrogen\",\n      lang: \"en\"\n    });\n  }\n  static createDefaultPayload(sessionId) {\n    return { session_id: sessionId };\n  }\n  async enable(hsApi, log) {\n    try {\n      log.set(\"endpoint\", new URL(this._description.data.endpoint).host);\n    } catch {\n      log.set(\"endpoint\", null);\n    }\n    await hsApi.setPusher(this._description, { log }).response();\n  }\n  async disable(hsApi, log) {\n    const deleteDescription = Object.assign({}, this._description, { kind: null });\n    await hsApi.setPusher(deleteDescription, { log }).response();\n  }\n  serialize() {\n    return this._description;\n  }\n  equals(pusher) {\n    if (this._description.app_id !== pusher._description.app_id) {\n      return false;\n    }\n    if (this._description.pushkey !== pusher._description.pushkey) {\n      return false;\n    }\n    return JSON.stringify(this._description.data) === JSON.stringify(pusher._description.data);\n  }\n}\nclass DeviceMessageHandler extends EventEmitter {\n  constructor({ storage, callHandler }) {\n    super();\n    this._storage = storage;\n    this._olmDecryption = null;\n    this._megolmDecryption = null;\n    this._callHandler = callHandler;\n    this._senderDeviceCache = new LRUCache(10, (di) => di.curve25519Key);\n  }\n  enableEncryption({ olmDecryption, megolmDecryption }) {\n    this._olmDecryption = olmDecryption;\n    this._megolmDecryption = megolmDecryption;\n  }\n  obtainSyncLock(toDeviceEvents) {\n    var _a;\n    return (_a = this._olmDecryption) == null ? void 0 : _a.obtainDecryptionLock(toDeviceEvents);\n  }\n  async prepareSync(toDeviceEvents, lock, txn, log) {\n    log.set(\"messageTypes\", countBy(toDeviceEvents, (e) => e.type));\n    const encryptedEvents = toDeviceEvents.filter((e) => e.type === \"m.room.encrypted\");\n    this._emitUnencryptedEvents(toDeviceEvents);\n    if (!this._olmDecryption) {\n      log.log(\"can't decrypt, encryption not enabled\", log.level.Warn);\n      return;\n    }\n    const olmEvents = encryptedEvents.filter((e) => {\n      var _a;\n      return ((_a = e.content) == null ? void 0 : _a.algorithm) === OLM_ALGORITHM;\n    });\n    if (olmEvents.length) {\n      const olmDecryptChanges = await this._olmDecryption.decryptAll(olmEvents, lock, txn);\n      log.set(\"decryptedTypes\", countBy(olmDecryptChanges.results, (r) => {\n        var _a;\n        return (_a = r.event) == null ? void 0 : _a.type;\n      }));\n      for (const err of olmDecryptChanges.errors) {\n        log.child(\"decrypt_error\").catch(err);\n      }\n      const newRoomKeys = this._megolmDecryption.roomKeysFromDeviceMessages(olmDecryptChanges.results, log);\n      return new SyncPreparation(olmDecryptChanges, newRoomKeys);\n    }\n  }\n  async writeSync(prep, txn) {\n    prep.olmDecryptChanges.write(txn);\n    const didWriteValues = await Promise.all(prep.newRoomKeys.map((key) => this._megolmDecryption.writeRoomKey(key, txn)));\n    const hasNewRoomKeys = didWriteValues.some((didWrite) => !!didWrite);\n    return {\n      hasNewRoomKeys,\n      decryptionResults: prep.olmDecryptChanges.results\n    };\n  }\n  async afterSyncCompleted(decryptionResults, deviceTracker, hsApi, log) {\n    this._emitEncryptedEvents(decryptionResults);\n    if (this._callHandler) {\n      const callMessages = decryptionResults.filter((dr) => {\n        var _a;\n        return this._callHandler.handlesDeviceMessageEventType((_a = dr.event) == null ? void 0 : _a.type);\n      });\n      if (callMessages.length) {\n        await log.wrap(\"process call signalling messages\", async (log2) => {\n          for (const dr of callMessages) {\n            const device = await deviceTracker.deviceForId(dr.event.sender, dr.event.content.device_id, hsApi, log2);\n            dr.setDevice(device);\n            if (dr.isVerified) {\n              this._callHandler.handleDeviceMessage(dr.event, dr.userId, dr.deviceId, log2);\n            } else {\n              log2.log({\n                l: \"could not verify olm fingerprint key matches, ignoring\",\n                ed25519Key: dr.device.ed25519Key,\n                claimedEd25519Key: dr.claimedEd25519Key,\n                deviceId: device.deviceId,\n                userId: device.userId\n              });\n            }\n          }\n        });\n      }\n    }\n  }\n  _emitUnencryptedEvents(toDeviceEvents) {\n    const unencryptedEvents = toDeviceEvents.filter((e) => e.type !== \"m.room.encrypted\");\n    for (const event2 of unencryptedEvents) {\n      this.emit(\"message\", { unencrypted: event2 });\n    }\n  }\n  _emitEncryptedEvents(decryptionResults) {\n  }\n}\nclass SyncPreparation {\n  constructor(olmDecryptChanges, newRoomKeys) {\n    this.olmDecryptChanges = olmDecryptChanges;\n    this.newRoomKeys = newRoomKeys;\n    this.newKeysByRoom = groupBy(newRoomKeys, (r) => r.roomId);\n  }\n}\nconst ACCOUNT_SESSION_KEY = SESSION_E2EE_KEY_PREFIX + \"olmAccount\";\nconst DEVICE_KEY_FLAG_SESSION_KEY = SESSION_E2EE_KEY_PREFIX + \"areDeviceKeysUploaded\";\nconst SERVER_OTK_COUNT_SESSION_KEY = SESSION_E2EE_KEY_PREFIX + \"serverOTKCount\";\nasync function initiallyStoreAccount(account, pickleKey, areDeviceKeysUploaded, serverOTKCount, storage) {\n  const pickledAccount = account.pickle(pickleKey);\n  const txn = await storage.readWriteTxn([\n    storage.storeNames.session\n  ]);\n  try {\n    txn.session.add(ACCOUNT_SESSION_KEY, pickledAccount);\n    txn.session.add(DEVICE_KEY_FLAG_SESSION_KEY, areDeviceKeysUploaded);\n    txn.session.add(SERVER_OTK_COUNT_SESSION_KEY, serverOTKCount);\n  } catch (err) {\n    txn.abort();\n    throw err;\n  }\n  await txn.complete();\n}\nclass Account {\n  static async load({ olm, pickleKey, hsApi, userId, deviceId, olmWorker, txn }) {\n    const pickledAccount = await txn.session.get(ACCOUNT_SESSION_KEY);\n    if (pickledAccount) {\n      const account = new olm.Account();\n      const areDeviceKeysUploaded = await txn.session.get(DEVICE_KEY_FLAG_SESSION_KEY);\n      account.unpickle(pickleKey, pickledAccount);\n      const serverOTKCount = await txn.session.get(SERVER_OTK_COUNT_SESSION_KEY);\n      return new Account({\n        pickleKey,\n        hsApi,\n        account,\n        userId,\n        deviceId,\n        areDeviceKeysUploaded,\n        serverOTKCount,\n        olm,\n        olmWorker\n      });\n    }\n  }\n  static async adoptDehydratedDevice({ olm, dehydratedDevice, pickleKey, hsApi, userId, olmWorker, storage }) {\n    const account = dehydratedDevice.adoptUnpickledOlmAccount();\n    const oneTimeKeys = JSON.parse(account.one_time_keys());\n    const oneTimeKeysEntries = Object.entries(oneTimeKeys.curve25519);\n    const serverOTKCount = oneTimeKeysEntries.length;\n    const areDeviceKeysUploaded = true;\n    await initiallyStoreAccount(account, pickleKey, areDeviceKeysUploaded, serverOTKCount, storage);\n    return new Account({\n      pickleKey,\n      hsApi,\n      account,\n      userId,\n      deviceId: dehydratedDevice.deviceId,\n      areDeviceKeysUploaded,\n      serverOTKCount,\n      olm,\n      olmWorker\n    });\n  }\n  static async create({ olm, pickleKey, hsApi, userId, deviceId, olmWorker, storage }) {\n    const account = new olm.Account();\n    if (olmWorker) {\n      await olmWorker.createAccountAndOTKs(account, account.max_number_of_one_time_keys());\n    } else {\n      account.create();\n      account.generate_one_time_keys(account.max_number_of_one_time_keys());\n    }\n    const areDeviceKeysUploaded = false;\n    const serverOTKCount = 0;\n    if (storage) {\n      await initiallyStoreAccount(account, pickleKey, areDeviceKeysUploaded, serverOTKCount, storage);\n    }\n    return new Account({\n      pickleKey,\n      hsApi,\n      account,\n      userId,\n      deviceId,\n      areDeviceKeysUploaded,\n      serverOTKCount,\n      olm,\n      olmWorker\n    });\n  }\n  constructor({ pickleKey, hsApi, account, userId, deviceId, areDeviceKeysUploaded, serverOTKCount, olm, olmWorker }) {\n    this._olm = olm;\n    this._pickleKey = pickleKey;\n    this._hsApi = hsApi;\n    this._account = account;\n    this._userId = userId;\n    this._deviceId = deviceId;\n    this._areDeviceKeysUploaded = areDeviceKeysUploaded;\n    this._serverOTKCount = serverOTKCount;\n    this._olmWorker = olmWorker;\n    this._identityKeys = JSON.parse(this._account.identity_keys());\n  }\n  get identityKeys() {\n    return this._identityKeys;\n  }\n  setDeviceId(deviceId) {\n    this._deviceId = deviceId;\n  }\n  async uploadKeys(storage, isDehydratedDevice, log) {\n    var _a;\n    const oneTimeKeys = JSON.parse(this._account.one_time_keys());\n    const oneTimeKeysEntries = Object.entries(oneTimeKeys.curve25519);\n    if (oneTimeKeysEntries.length || !this._areDeviceKeysUploaded) {\n      const payload = {};\n      if (!this._areDeviceKeysUploaded) {\n        log.set(\"identity\", true);\n        const identityKeys = JSON.parse(this._account.identity_keys());\n        payload.device_keys = this._deviceKeysPayload(identityKeys);\n      }\n      if (oneTimeKeysEntries.length) {\n        log.set(\"otks\", true);\n        payload.one_time_keys = this._oneTimeKeysPayload(oneTimeKeysEntries);\n      }\n      const dehydratedDeviceId = isDehydratedDevice ? this._deviceId : void 0;\n      const response = await this._hsApi.uploadKeys(dehydratedDeviceId, payload, { log }).response();\n      this._serverOTKCount = (_a = response == null ? void 0 : response.one_time_key_counts) == null ? void 0 : _a.signed_curve25519;\n      log.set(\"serverOTKCount\", this._serverOTKCount);\n      await this._updateSessionStorage(storage, (sessionStore) => {\n        if (oneTimeKeysEntries.length) {\n          this._account.mark_keys_as_published();\n          sessionStore == null ? void 0 : sessionStore.set(ACCOUNT_SESSION_KEY, this._account.pickle(this._pickleKey));\n          sessionStore == null ? void 0 : sessionStore.set(SERVER_OTK_COUNT_SESSION_KEY, this._serverOTKCount);\n        }\n        if (!this._areDeviceKeysUploaded) {\n          this._areDeviceKeysUploaded = true;\n          sessionStore == null ? void 0 : sessionStore.set(DEVICE_KEY_FLAG_SESSION_KEY, this._areDeviceKeysUploaded);\n        }\n      });\n    }\n  }\n  async generateOTKsIfNeeded(storage, log) {\n    const maxOTKs = this._account.max_number_of_one_time_keys();\n    const keyLimit = Math.floor(maxOTKs / 2);\n    if (this._serverOTKCount < keyLimit) {\n      const oneTimeKeys = JSON.parse(this._account.one_time_keys());\n      const oneTimeKeysEntries = Object.entries(oneTimeKeys.curve25519);\n      const unpublishedOTKCount = oneTimeKeysEntries.length;\n      const newKeyCount = keyLimit - unpublishedOTKCount - this._serverOTKCount;\n      if (newKeyCount > 0) {\n        await log.wrap(\"generate otks\", (log2) => {\n          log2.set(\"max\", maxOTKs);\n          log2.set(\"server\", this._serverOTKCount);\n          log2.set(\"unpublished\", unpublishedOTKCount);\n          log2.set(\"new\", newKeyCount);\n          log2.set(\"limit\", keyLimit);\n          this._account.generate_one_time_keys(newKeyCount);\n          this._updateSessionStorage(storage, (sessionStore) => {\n            sessionStore.set(ACCOUNT_SESSION_KEY, this._account.pickle(this._pickleKey));\n          });\n        });\n      }\n      return true;\n    }\n    return false;\n  }\n  createInboundOlmSession(senderKey, body) {\n    const newSession = new this._olm.Session();\n    try {\n      newSession.create_inbound_from(this._account, senderKey, body);\n      return newSession;\n    } catch (err) {\n      newSession.free();\n      throw err;\n    }\n  }\n  async createOutboundOlmSession(theirIdentityKey, theirOneTimeKey) {\n    const newSession = new this._olm.Session();\n    try {\n      if (this._olmWorker) {\n        await this._olmWorker.createOutboundOlmSession(this._account, newSession, theirIdentityKey, theirOneTimeKey);\n      } else {\n        newSession.create_outbound(this._account, theirIdentityKey, theirOneTimeKey);\n      }\n      return newSession;\n    } catch (err) {\n      newSession.free();\n      throw err;\n    }\n  }\n  writeRemoveOneTimeKey(session, txn) {\n    this._account.remove_one_time_keys(session);\n    txn.session.set(ACCOUNT_SESSION_KEY, this._account.pickle(this._pickleKey));\n  }\n  writeSync(deviceOneTimeKeysCount, txn, log) {\n    const otkCount = deviceOneTimeKeysCount.signed_curve25519;\n    if (Number.isSafeInteger(otkCount) && otkCount !== this._serverOTKCount) {\n      txn.session.set(SERVER_OTK_COUNT_SESSION_KEY, otkCount);\n      log.set(\"otkCount\", otkCount);\n      return otkCount;\n    }\n  }\n  afterSync(otkCount) {\n    if (Number.isSafeInteger(otkCount)) {\n      this._serverOTKCount = otkCount;\n    }\n  }\n  _keysAsSignableObject(identityKeys) {\n    const obj = {\n      user_id: this._userId,\n      device_id: this._deviceId,\n      algorithms: [OLM_ALGORITHM, MEGOLM_ALGORITHM],\n      keys: {}\n    };\n    for (const [algorithm2, pubKey] of Object.entries(identityKeys)) {\n      obj.keys[`${algorithm2}:${this._deviceId}`] = pubKey;\n    }\n    return obj;\n  }\n  getUnsignedDeviceKey() {\n    const identityKeys = JSON.parse(this._account.identity_keys());\n    return this._keysAsSignableObject(identityKeys);\n  }\n  _deviceKeysPayload(identityKeys) {\n    const obj = this._keysAsSignableObject(identityKeys);\n    this.signObject(obj);\n    return obj;\n  }\n  _oneTimeKeysPayload(oneTimeKeysEntries) {\n    const obj = {};\n    for (const [keyId, pubKey] of oneTimeKeysEntries) {\n      const keyObj = {\n        key: pubKey\n      };\n      this.signObject(keyObj);\n      obj[`signed_curve25519:${keyId}`] = keyObj;\n    }\n    return obj;\n  }\n  async _updateSessionStorage(storage, callback) {\n    if (storage) {\n      const txn = await storage.readWriteTxn([\n        storage.storeNames.session\n      ]);\n      try {\n        await callback(txn.session);\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n    } else {\n      await callback(void 0);\n    }\n  }\n  signObject(obj) {\n    const sigs = obj.signatures || {};\n    const unsigned = obj.unsigned;\n    delete obj.signatures;\n    delete obj.unsigned;\n    sigs[this._userId] = sigs[this._userId] || {};\n    sigs[this._userId][\"ed25519:\" + this._deviceId] = this._account.sign(anotherjson.stringify(obj));\n    obj.signatures = sigs;\n    if (unsigned !== void 0) {\n      obj.unsigned = unsigned;\n    }\n  }\n  pickleWithKey(key) {\n    return this._account.pickle(key);\n  }\n  dispose() {\n    this._account.free();\n    this._account = void 0;\n  }\n}\nconst DEHYDRATION_LIBOLM_PICKLE_ALGORITHM = \"org.matrix.msc2697.v1.olm.libolm_pickle\";\nasync function getDehydratedDevice(hsApi, olm, platform, log) {\n  try {\n    const response = await hsApi.getDehydratedDevice({ log }).response();\n    if (response.device_data.algorithm === DEHYDRATION_LIBOLM_PICKLE_ALGORITHM) {\n      return new EncryptedDehydratedDevice(response, olm, platform);\n    }\n  } catch (err) {\n    if (err.name !== \"HomeServerError\") {\n      log.error = err;\n    }\n    return void 0;\n  }\n}\nasync function uploadAccountAsDehydratedDevice(account, hsApi, key, deviceDisplayName, log) {\n  var _a;\n  const response = await hsApi.createDehydratedDevice({\n    device_data: {\n      algorithm: DEHYDRATION_LIBOLM_PICKLE_ALGORITHM,\n      account: account.pickleWithKey(key.binaryKey.slice()),\n      passphrase: ((_a = key.description) == null ? void 0 : _a.passphraseParams) || {}\n    },\n    initial_device_display_name: deviceDisplayName\n  }).response();\n  const deviceId = response.device_id;\n  account.setDeviceId(deviceId);\n  await account.uploadKeys(void 0, true, log);\n  return deviceId;\n}\nclass EncryptedDehydratedDevice {\n  constructor(dehydratedDevice, olm, platform) {\n    this._dehydratedDevice = dehydratedDevice;\n    this._olm = olm;\n    this._platform = platform;\n  }\n  async decrypt(keyType, credential) {\n    const keyDescription = new KeyDescription(\"dehydrated_device\", this._dehydratedDevice.device_data.passphrase);\n    const key = await keyFromCredentialAndDescription(keyType, credential, keyDescription, this._platform, this._olm);\n    const account = new this._olm.Account();\n    try {\n      const pickledAccount = this._dehydratedDevice.device_data.account;\n      account.unpickle(key.binaryKey.slice(), pickledAccount);\n      return new DehydratedDevice(this._dehydratedDevice, account, key);\n    } catch (err) {\n      account.free();\n      if (err.message === \"OLM.BAD_ACCOUNT_KEY\") {\n        return void 0;\n      } else {\n        throw err;\n      }\n    }\n  }\n  get deviceId() {\n    return this._dehydratedDevice.device_id;\n  }\n}\nclass DehydratedDevice {\n  constructor(dehydratedDevice, account, key) {\n    this._dehydratedDevice = dehydratedDevice;\n    this._account = account;\n    this._key = key;\n  }\n  async claim(hsApi, log) {\n    try {\n      const response = await hsApi.claimDehydratedDevice(this.deviceId, { log }).response();\n      return response.success;\n    } catch (err) {\n      return false;\n    }\n  }\n  adoptUnpickledOlmAccount() {\n    const account = this._account;\n    this._account = void 0;\n    return account;\n  }\n  get deviceId() {\n    return this._dehydratedDevice.device_id;\n  }\n  get key() {\n    return this._key;\n  }\n  dispose() {\n    var _a;\n    (_a = this._account) == null ? void 0 : _a.free();\n    this._account = void 0;\n  }\n}\nclass Lock {\n  tryTake() {\n    if (!this._promise) {\n      this._promise = new Promise((resolve) => {\n        this._resolve = resolve;\n      });\n      return true;\n    }\n    return false;\n  }\n  async take() {\n    while (!this.tryTake()) {\n      await this.released();\n    }\n  }\n  get isTaken() {\n    return !!this._promise;\n  }\n  release() {\n    if (this._resolve) {\n      this._promise = void 0;\n      const resolve = this._resolve;\n      this._resolve = void 0;\n      resolve();\n    }\n  }\n  released() {\n    return this._promise;\n  }\n}\nclass MultiLock {\n  constructor(locks) {\n    this.locks = locks;\n  }\n  release() {\n    for (const lock of this.locks) {\n      lock.release();\n    }\n  }\n}\nfunction createSessionEntry(olmSession, senderKey, timestamp, pickleKey) {\n  return {\n    session: olmSession.pickle(pickleKey),\n    sessionId: olmSession.session_id(),\n    senderKey,\n    lastUsed: timestamp\n  };\n}\nclass Session$1 {\n  constructor(data, pickleKey, olm, isNew = false) {\n    this.data = data;\n    this.pickleKey = pickleKey;\n    this.olm = olm;\n    this.isNew = isNew;\n    this.isModified = isNew;\n  }\n  static create(senderKey, olmSession, olm, pickleKey, timestamp) {\n    const data = createSessionEntry(olmSession, senderKey, timestamp, pickleKey);\n    return new Session$1(data, pickleKey, olm, true);\n  }\n  get id() {\n    return this.data.sessionId;\n  }\n  load() {\n    const session = new this.olm.Session();\n    session.unpickle(this.pickleKey, this.data.session);\n    return session;\n  }\n  unload(olmSession) {\n    olmSession.free();\n  }\n  save(olmSession) {\n    this.data.session = olmSession.pickle(this.pickleKey);\n    this.isModified = true;\n  }\n}\nclass DecryptionResult {\n  constructor(event2, senderCurve25519Key, claimedEd25519Key, encryptedEvent) {\n    this.event = event2;\n    this.senderCurve25519Key = senderCurve25519Key;\n    this.claimedEd25519Key = claimedEd25519Key;\n    this.encryptedEvent = encryptedEvent;\n  }\n  setDevice(device) {\n    this.device = device;\n  }\n  get isVerified() {\n    if (this.device) {\n      const comesFromDevice = getDeviceEd25519Key(this.device) === this.claimedEd25519Key;\n      return comesFromDevice;\n    }\n    return false;\n  }\n  get isUnverified() {\n    if (this.device) {\n      return !this.isVerified;\n    } else {\n      return true;\n    }\n  }\n  get userId() {\n    var _a;\n    return (_a = this.device) == null ? void 0 : _a.user_id;\n  }\n  get deviceId() {\n    var _a;\n    return (_a = this.device) == null ? void 0 : _a.device_id;\n  }\n  get isVerificationUnknown() {\n    return !this.device;\n  }\n}\nvar OlmPayloadType = /* @__PURE__ */ ((OlmPayloadType2) => {\n  OlmPayloadType2[OlmPayloadType2[\"PreKey\"] = 0] = \"PreKey\";\n  OlmPayloadType2[OlmPayloadType2[\"Normal\"] = 1] = \"Normal\";\n  return OlmPayloadType2;\n})(OlmPayloadType || {});\nconst SESSION_LIMIT_PER_SENDER_KEY = 4;\nfunction sortSessions(sessions) {\n  sessions.sort((a, b) => {\n    return b.data.lastUsed - a.data.lastUsed;\n  });\n}\nclass Decryption$1 {\n  constructor(account, pickleKey, now, ownUserId, olm, senderKeyLock) {\n    this.account = account;\n    this.pickleKey = pickleKey;\n    this.now = now;\n    this.ownUserId = ownUserId;\n    this.olm = olm;\n    this.senderKeyLock = senderKeyLock;\n  }\n  async obtainDecryptionLock(events) {\n    var _a;\n    const senderKeys = /* @__PURE__ */ new Set();\n    for (const event2 of events) {\n      const senderKey = (_a = event2.content) == null ? void 0 : _a[\"sender_key\"];\n      if (senderKey) {\n        senderKeys.add(senderKey);\n      }\n    }\n    const locks = await Promise.all(Array.from(senderKeys).map((senderKey) => {\n      return this.senderKeyLock.takeLock(senderKey);\n    }));\n    return new MultiLock(locks);\n  }\n  async decryptAll(events, lock, txn) {\n    try {\n      const eventsPerSenderKey = groupBy(events, (event2) => {\n        var _a;\n        return (_a = event2.content) == null ? void 0 : _a[\"sender_key\"];\n      });\n      const timestamp = this.now();\n      const senderKeyOperations = await Promise.all(Array.from(eventsPerSenderKey.entries()).map(([senderKey, events2]) => {\n        return this._decryptAllForSenderKey(senderKey, events2, timestamp, txn);\n      }));\n      const results = senderKeyOperations.reduce((all, r) => all.concat(r.results), []);\n      const errors = senderKeyOperations.reduce((all, r) => all.concat(r.errors), []);\n      const senderKeyDecryptions = senderKeyOperations.map((r) => r.senderKeyDecryption);\n      return new DecryptionChanges$2(senderKeyDecryptions, results, errors, this.account, lock);\n    } catch (err) {\n      lock.release();\n      throw err;\n    }\n  }\n  async _decryptAllForSenderKey(senderKey, events, timestamp, readSessionsTxn) {\n    const sessions = await this._getSessions(senderKey, readSessionsTxn);\n    const senderKeyDecryption = new SenderKeyDecryption(senderKey, sessions, timestamp);\n    const results = [];\n    const errors = [];\n    for (const event2 of events) {\n      try {\n        const result = this._decryptForSenderKey(senderKeyDecryption, event2, timestamp);\n        results.push(result);\n      } catch (err) {\n        errors.push(err);\n      }\n    }\n    return { results, errors, senderKeyDecryption };\n  }\n  _decryptForSenderKey(senderKeyDecryption, event2, timestamp) {\n    const senderKey = senderKeyDecryption.senderKey;\n    const message = this._getMessageAndValidateEvent(event2);\n    let plaintext;\n    try {\n      plaintext = senderKeyDecryption.decrypt(message);\n    } catch (err) {\n      throw new DecryptionError$1(\"OLM_BAD_ENCRYPTED_MESSAGE\", event2, { senderKey, error: err.message });\n    }\n    if (typeof plaintext !== \"string\" && message.type === OlmPayloadType.PreKey) {\n      let createResult;\n      try {\n        createResult = this._createSessionAndDecrypt(senderKey, message, timestamp);\n      } catch (error) {\n        throw new DecryptionError$1(`Could not create inbound olm session: ${error.message}`, event2, { senderKey, error });\n      }\n      senderKeyDecryption.addNewSession(createResult.session);\n      plaintext = createResult.plaintext;\n    }\n    if (typeof plaintext === \"string\") {\n      let payload;\n      try {\n        payload = JSON.parse(plaintext);\n      } catch (error) {\n        throw new DecryptionError$1(\"PLAINTEXT_NOT_JSON\", event2, { plaintext, error });\n      }\n      this._validatePayload(payload, event2);\n      return new DecryptionResult(payload, senderKey, payload.keys.ed25519);\n    } else {\n      throw new DecryptionError$1(\"OLM_NO_MATCHING_SESSION\", event2, { knownSessionIds: senderKeyDecryption.sessions.map((s) => s.id) });\n    }\n  }\n  _createSessionAndDecrypt(senderKey, message, timestamp) {\n    let plaintext;\n    const olmSession = this.account.createInboundOlmSession(senderKey, message.body);\n    try {\n      plaintext = olmSession.decrypt(message.type, message.body);\n      const session = Session$1.create(senderKey, olmSession, this.olm, this.pickleKey, timestamp);\n      session.unload(olmSession);\n      return { session, plaintext };\n    } catch (err) {\n      olmSession.free();\n      throw err;\n    }\n  }\n  _getMessageAndValidateEvent(event2) {\n    var _a;\n    const ciphertext = (_a = event2.content) == null ? void 0 : _a.ciphertext;\n    if (!ciphertext) {\n      throw new DecryptionError$1(\"OLM_MISSING_CIPHERTEXT\", event2);\n    }\n    const message = ciphertext == null ? void 0 : ciphertext[this.account.identityKeys.curve25519];\n    if (!message) {\n      throw new DecryptionError$1(\"OLM_NOT_INCLUDED_IN_RECIPIENTS\", event2);\n    }\n    return message;\n  }\n  async _getSessions(senderKey, txn) {\n    const sessionEntries = await txn.olmSessions.getAll(senderKey);\n    const sessions = sessionEntries.map((s) => new Session$1(s, this.pickleKey, this.olm));\n    sortSessions(sessions);\n    return sessions;\n  }\n  _validatePayload(payload, event2) {\n    var _a, _b, _c2;\n    if (payload.sender !== event2.sender) {\n      throw new DecryptionError$1(\"OLM_FORWARDED_MESSAGE\", event2, { sentBy: event2.sender, encryptedBy: payload.sender });\n    }\n    if (payload.recipient !== this.ownUserId) {\n      throw new DecryptionError$1(\"OLM_BAD_RECIPIENT\", event2, { recipient: payload.recipient });\n    }\n    if (((_a = payload.recipient_keys) == null ? void 0 : _a.ed25519) !== this.account.identityKeys.ed25519) {\n      throw new DecryptionError$1(\"OLM_BAD_RECIPIENT_KEY\", event2, { key: (_b = payload.recipient_keys) == null ? void 0 : _b.ed25519 });\n    }\n    if (!payload.type) {\n      throw new DecryptionError$1(\"missing type on payload\", event2, { payload });\n    }\n    if (typeof ((_c2 = payload.keys) == null ? void 0 : _c2.ed25519) !== \"string\") {\n      throw new DecryptionError$1(\"Missing or invalid claimed ed25519 key on payload\", event2, { payload });\n    }\n  }\n}\nclass SenderKeyDecryption {\n  constructor(senderKey, sessions, timestamp) {\n    this.senderKey = senderKey;\n    this.sessions = sessions;\n    this.timestamp = timestamp;\n  }\n  addNewSession(session) {\n    this.sessions.unshift(session);\n  }\n  decrypt(message) {\n    for (const session of this.sessions) {\n      const plaintext = this.decryptWithSession(session, message);\n      if (typeof plaintext === \"string\") {\n        sortSessions(this.sessions);\n        return plaintext;\n      }\n    }\n  }\n  getModifiedSessions() {\n    return this.sessions.filter((session) => session.isModified);\n  }\n  get hasNewSessions() {\n    return this.sessions.some((session) => session.isNew);\n  }\n  decryptWithSession(session, message) {\n    if (message.type === void 0 || message.body === void 0) {\n      throw new Error(\"Invalid message without type or body\");\n    }\n    const olmSession = session.load();\n    try {\n      if (message.type === OlmPayloadType.PreKey && !olmSession.matches_inbound(message.body)) {\n        return;\n      }\n      try {\n        const plaintext = olmSession.decrypt(message.type, message.body);\n        session.save(olmSession);\n        session.data.lastUsed = this.timestamp;\n        return plaintext;\n      } catch (err) {\n        if (message.type === OlmPayloadType.PreKey) {\n          throw new Error(`Error decrypting prekey message with existing session id ${session.id}: ${err.message}`);\n        }\n        return;\n      }\n    } finally {\n      session.unload(olmSession);\n    }\n  }\n}\nclass DecryptionChanges$2 {\n  constructor(senderKeyDecryptions, results, errors, account, lock) {\n    this.senderKeyDecryptions = senderKeyDecryptions;\n    this.results = results;\n    this.errors = errors;\n    this.account = account;\n    this.lock = lock;\n  }\n  get hasNewSessions() {\n    return this.senderKeyDecryptions.some((skd) => skd.hasNewSessions);\n  }\n  write(txn) {\n    try {\n      for (const senderKeyDecryption of this.senderKeyDecryptions) {\n        for (const session of senderKeyDecryption.getModifiedSessions()) {\n          txn.olmSessions.set(session.data);\n          if (session.isNew) {\n            const olmSession = session.load();\n            try {\n              this.account.writeRemoveOneTimeKey(olmSession, txn);\n            } finally {\n              session.unload(olmSession);\n            }\n          }\n        }\n        if (senderKeyDecryption.sessions.length > SESSION_LIMIT_PER_SENDER_KEY) {\n          const { senderKey, sessions } = senderKeyDecryption;\n          for (let i = sessions.length - 1; i >= SESSION_LIMIT_PER_SENDER_KEY; i -= 1) {\n            const session = sessions[i];\n            txn.olmSessions.remove(senderKey, session.id);\n          }\n        }\n      }\n    } finally {\n      this.lock.release();\n    }\n  }\n}\nfunction findFirstSessionId(sessionIds) {\n  return sessionIds.reduce((first, sessionId) => {\n    if (!first || sessionId < first) {\n      return sessionId;\n    } else {\n      return first;\n    }\n  }, null);\n}\nconst OTK_ALGORITHM = \"signed_curve25519\";\nconst MAX_BATCH_SIZE = 20;\nclass Encryption$1 {\n  constructor(account, pickleKey, olm, storage, now, ownUserId, olmUtil, senderKeyLock) {\n    this.account = account;\n    this.pickleKey = pickleKey;\n    this.olm = olm;\n    this.storage = storage;\n    this.now = now;\n    this.ownUserId = ownUserId;\n    this.olmUtil = olmUtil;\n    this.senderKeyLock = senderKeyLock;\n    this._batchLocks = new Array(MAX_BATCH_SIZE);\n    for (let i = 0; i < MAX_BATCH_SIZE; i += 1) {\n      this._batchLocks[i] = new Lock();\n    }\n  }\n  async _takeBatchLock(amount) {\n    const locks = this._batchLocks.filter((l) => !l.isTaken).slice(0, amount);\n    if (locks.length < amount) {\n      const takenLocks = this._batchLocks.filter((l) => l.isTaken).slice(0, amount - locks.length);\n      locks.push(...takenLocks);\n    }\n    await Promise.all(locks.map((l) => l.take()));\n    return new MultiLock(locks);\n  }\n  async encrypt(type, content, devices, hsApi, log) {\n    let messages = [];\n    for (let i = 0; i < devices.length; i += MAX_BATCH_SIZE) {\n      const batchDevices = devices.slice(i, i + MAX_BATCH_SIZE);\n      const batchLock = await this._takeBatchLock(batchDevices.length);\n      try {\n        const batchMessages = await this._encryptForMaxDevices(type, content, batchDevices, hsApi, log);\n        messages = messages.concat(batchMessages);\n      } finally {\n        batchLock.release();\n      }\n    }\n    return messages;\n  }\n  async _encryptForMaxDevices(type, content, devices, hsApi, log) {\n    const locks = await Promise.all(devices.map((device) => {\n      return this.senderKeyLock.takeLock(getDeviceCurve25519Key(device));\n    }));\n    try {\n      const {\n        devicesWithoutSession,\n        existingEncryptionTargets\n      } = await this._findExistingSessions(devices);\n      const timestamp = this.now();\n      let encryptionTargets = [];\n      try {\n        if (devicesWithoutSession.length) {\n          const newEncryptionTargets = await log.wrap(\"create sessions\", (log2) => this._createNewSessions(devicesWithoutSession, hsApi, timestamp, log2));\n          encryptionTargets = encryptionTargets.concat(newEncryptionTargets);\n        }\n        await this._loadSessions(existingEncryptionTargets);\n        encryptionTargets = encryptionTargets.concat(existingEncryptionTargets);\n        const encryptLog = { l: \"encrypt\", targets: encryptionTargets.length };\n        const messages = log.wrap(encryptLog, () => encryptionTargets.map((target) => {\n          const encryptedContent = this._encryptForDevice(type, content, target);\n          return new EncryptedMessage(encryptedContent, target.device);\n        }));\n        await this._storeSessions(encryptionTargets, timestamp);\n        return messages;\n      } finally {\n        for (const target of encryptionTargets) {\n          target.dispose();\n        }\n      }\n    } finally {\n      for (const lock of locks) {\n        lock.release();\n      }\n    }\n  }\n  async _findExistingSessions(devices) {\n    const txn = await this.storage.readTxn([this.storage.storeNames.olmSessions]);\n    const sessionIdsForDevice = await Promise.all(devices.map(async (device) => {\n      return await txn.olmSessions.getSessionIds(getDeviceCurve25519Key(device));\n    }));\n    const devicesWithoutSession = devices.filter((_, i) => {\n      const sessionIds = sessionIdsForDevice[i];\n      return !(sessionIds == null ? void 0 : sessionIds.length);\n    });\n    const existingEncryptionTargets = devices.map((device, i) => {\n      const sessionIds = sessionIdsForDevice[i];\n      if ((sessionIds == null ? void 0 : sessionIds.length) > 0) {\n        const sessionId = findFirstSessionId(sessionIds);\n        return EncryptionTarget.fromSessionId(device, sessionId);\n      }\n    }).filter((target) => !!target);\n    return { devicesWithoutSession, existingEncryptionTargets };\n  }\n  _encryptForDevice(type, content, target) {\n    const { session, device } = target;\n    const plaintext = JSON.stringify(this._buildPlainTextMessageForDevice(type, content, device));\n    const message = session.encrypt(plaintext);\n    const encryptedContent = {\n      algorithm: OLM_ALGORITHM,\n      sender_key: this.account.identityKeys.curve25519,\n      ciphertext: {\n        [getDeviceCurve25519Key(device)]: message\n      }\n    };\n    return encryptedContent;\n  }\n  _buildPlainTextMessageForDevice(type, content, device) {\n    return {\n      keys: {\n        \"ed25519\": this.account.identityKeys.ed25519\n      },\n      recipient_keys: {\n        \"ed25519\": getDeviceEd25519Key(device)\n      },\n      recipient: device.user_id,\n      sender: this.ownUserId,\n      content,\n      type\n    };\n  }\n  async _createNewSessions(devicesWithoutSession, hsApi, timestamp, log) {\n    const newEncryptionTargets = await log.wrap(\"claim\", (log2) => this._claimOneTimeKeys(hsApi, devicesWithoutSession, log2));\n    try {\n      for (const target of newEncryptionTargets) {\n        const { device, oneTimeKey } = target;\n        target.session = await this.account.createOutboundOlmSession(getDeviceCurve25519Key(device), oneTimeKey);\n      }\n      await this._storeSessions(newEncryptionTargets, timestamp);\n    } catch (err) {\n      for (const target of newEncryptionTargets) {\n        target.dispose();\n      }\n      throw err;\n    }\n    return newEncryptionTargets;\n  }\n  async _claimOneTimeKeys(hsApi, deviceIdentities, log) {\n    const devicesByUser = groupByWithCreator(deviceIdentities, (device) => device.user_id, () => /* @__PURE__ */ new Map(), (deviceMap, device) => deviceMap.set(device.device_id, device));\n    const oneTimeKeys = Array.from(devicesByUser.entries()).reduce((usersObj, [userId, deviceMap]) => {\n      usersObj[userId] = Array.from(deviceMap.values()).reduce((devicesObj, device) => {\n        devicesObj[device.device_id] = OTK_ALGORITHM;\n        return devicesObj;\n      }, {});\n      return usersObj;\n    }, {});\n    const claimResponse = await hsApi.claimKeys({\n      timeout: 1e4,\n      one_time_keys: oneTimeKeys\n    }, { log }).response();\n    if (Object.keys(claimResponse.failures).length) {\n      log.log({ l: \"failures\", servers: Object.keys(claimResponse.failures) }, log.level.Warn);\n    }\n    const userKeyMap = claimResponse == null ? void 0 : claimResponse[\"one_time_keys\"];\n    return this._verifyAndCreateOTKTargets(userKeyMap, devicesByUser, log);\n  }\n  _verifyAndCreateOTKTargets(userKeyMap, devicesByUser, log) {\n    var _a;\n    const verifiedEncryptionTargets = [];\n    for (const [userId, userSection] of Object.entries(userKeyMap)) {\n      for (const [deviceId, deviceSection] of Object.entries(userSection)) {\n        const [firstPropName, keySection] = Object.entries(deviceSection)[0];\n        const [keyAlgorithm] = firstPropName.split(\":\");\n        if (keyAlgorithm === OTK_ALGORITHM) {\n          const device = (_a = devicesByUser.get(userId)) == null ? void 0 : _a.get(deviceId);\n          if (device) {\n            const isValidSignature = verifyEd25519Signature(this.olmUtil, userId, deviceId, getDeviceEd25519Key(device), keySection, log) === SignatureVerification.Valid;\n            if (isValidSignature) {\n              const target = EncryptionTarget.fromOTK(device, keySection.key);\n              verifiedEncryptionTargets.push(target);\n            }\n          }\n        }\n      }\n    }\n    return verifiedEncryptionTargets;\n  }\n  async _loadSessions(encryptionTargets) {\n    const txn = await this.storage.readTxn([this.storage.storeNames.olmSessions]);\n    let failed = false;\n    try {\n      await Promise.all(encryptionTargets.map(async (encryptionTarget) => {\n        const sessionEntry = await txn.olmSessions.get(getDeviceCurve25519Key(encryptionTarget.device), encryptionTarget.sessionId);\n        if (sessionEntry && !failed) {\n          const olmSession = new this.olm.Session();\n          olmSession.unpickle(this.pickleKey, sessionEntry.session);\n          encryptionTarget.session = olmSession;\n        }\n      }));\n    } catch (err) {\n      failed = true;\n      for (const target of encryptionTargets) {\n        target.dispose();\n      }\n      throw err;\n    }\n  }\n  async _storeSessions(encryptionTargets, timestamp) {\n    const txn = await this.storage.readWriteTxn([this.storage.storeNames.olmSessions]);\n    try {\n      for (const target of encryptionTargets) {\n        const sessionEntry = createSessionEntry(target.session, getDeviceCurve25519Key(target.device), timestamp, this.pickleKey);\n        txn.olmSessions.set(sessionEntry);\n      }\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n  }\n}\nclass EncryptionTarget {\n  constructor(device, oneTimeKey, sessionId) {\n    this.device = device;\n    this.oneTimeKey = oneTimeKey;\n    this.sessionId = sessionId;\n    this.session = null;\n  }\n  static fromOTK(device, oneTimeKey) {\n    return new EncryptionTarget(device, oneTimeKey, null);\n  }\n  static fromSessionId(device, sessionId) {\n    return new EncryptionTarget(device, null, sessionId);\n  }\n  dispose() {\n    if (this.session) {\n      this.session.free();\n    }\n  }\n}\nclass EncryptedMessage {\n  constructor(content, device) {\n    this.content = content;\n    this.device = device;\n  }\n}\nclass DecryptionChanges$1 {\n  constructor(roomId, results, errors, replayEntries) {\n    this._roomId = roomId;\n    this._results = results;\n    this._errors = errors;\n    this._replayEntries = replayEntries;\n  }\n  async write(txn) {\n    await Promise.all(this._replayEntries.map(async (replayEntry) => {\n      try {\n        this._handleReplayAttack(this._roomId, replayEntry, txn);\n      } catch (err) {\n        this._errors.set(replayEntry.eventId, err);\n      }\n    }));\n    return {\n      results: this._results,\n      errors: this._errors\n    };\n  }\n  async _handleReplayAttack(roomId, replayEntry, txn) {\n    const { messageIndex, sessionId, eventId, timestamp } = replayEntry;\n    const decryption = await txn.groupSessionDecryptions.get(roomId, sessionId, messageIndex);\n    if (decryption && decryption.eventId !== eventId) {\n      const decryptedEventIsBad = decryption.timestamp < timestamp;\n      const badEventId = decryptedEventIsBad ? eventId : decryption.eventId;\n      this._results.delete(eventId);\n      throw new DecryptionError$1(\"MEGOLM_REPLAYED_INDEX\", event, {\n        messageIndex,\n        badEventId,\n        otherEventId: decryption.eventId\n      });\n    }\n    if (!decryption) {\n      txn.groupSessionDecryptions.set(roomId, sessionId, messageIndex, {\n        eventId,\n        timestamp\n      });\n    }\n  }\n}\nfunction mergeMap(src2, dst) {\n  if (src2) {\n    for (const [key, value] of src2.entries()) {\n      dst.set(key, value);\n    }\n  }\n}\nclass DecryptionPreparation$1 {\n  constructor(roomId, sessionDecryptions, errors) {\n    this._roomId = roomId;\n    this._sessionDecryptions = sessionDecryptions;\n    this._initialErrors = errors;\n  }\n  async decrypt() {\n    try {\n      const errors = this._initialErrors;\n      const results = /* @__PURE__ */ new Map();\n      const replayEntries = [];\n      await Promise.all(this._sessionDecryptions.map(async (sessionDecryption) => {\n        const sessionResult = await sessionDecryption.decryptAll();\n        mergeMap(sessionResult.errors, errors);\n        mergeMap(sessionResult.results, results);\n        replayEntries.push(...sessionResult.replayEntries);\n      }));\n      return new DecryptionChanges$1(this._roomId, results, errors, replayEntries);\n    } finally {\n      this.dispose();\n    }\n  }\n  dispose() {\n    for (const sd of this._sessionDecryptions) {\n      sd.dispose();\n    }\n  }\n}\nclass ReplayDetectionEntry {\n  constructor(sessionId, messageIndex, event2) {\n    this.sessionId = sessionId;\n    this.messageIndex = messageIndex;\n    this.event = event2;\n  }\n  get eventId() {\n    return this.event.event_id;\n  }\n  get timestamp() {\n    return this.event.origin_server_ts;\n  }\n}\nclass SessionDecryption {\n  constructor(key, events, olmWorker, keyLoader) {\n    this.key = key;\n    this.events = events;\n    this.olmWorker = olmWorker;\n    this.keyLoader = keyLoader;\n    this.decryptionRequests = olmWorker ? [] : void 0;\n  }\n  async decryptAll() {\n    const replayEntries = [];\n    const results = /* @__PURE__ */ new Map();\n    let errors;\n    await this.keyLoader.useKey(this.key, async (session) => {\n      for (const event2 of this.events) {\n        try {\n          const ciphertext = event2.content.ciphertext;\n          let decryptionResult;\n          if (this.olmWorker) {\n            const request = this.olmWorker.megolmDecrypt(session, ciphertext);\n            this.decryptionRequests.push(request);\n            decryptionResult = await request.response();\n          } else {\n            decryptionResult = session.decrypt(ciphertext);\n          }\n          const { plaintext } = decryptionResult;\n          let payload;\n          try {\n            payload = JSON.parse(plaintext);\n          } catch (err) {\n            throw new DecryptionError$1(\"PLAINTEXT_NOT_JSON\", event2, { plaintext, err });\n          }\n          if (payload.room_id !== this.key.roomId) {\n            throw new DecryptionError$1(\"MEGOLM_WRONG_ROOM\", event2, { encryptedRoomId: payload.room_id, eventRoomId: this.key.roomId });\n          }\n          replayEntries.push(new ReplayDetectionEntry(this.key.sessionId, decryptionResult.message_index, event2));\n          const result = new DecryptionResult(payload, this.key.senderKey, this.key.claimedEd25519Key, event2);\n          results.set(event2.event_id, result);\n        } catch (err) {\n          if (err.name === \"AbortError\") {\n            return;\n          }\n          if (!errors) {\n            errors = /* @__PURE__ */ new Map();\n          }\n          errors.set(event2.event_id, err);\n        }\n      }\n    });\n    return { results, errors, replayEntries };\n  }\n  dispose() {\n    if (this.decryptionRequests) {\n      for (const r of this.decryptionRequests) {\n        r.abort();\n      }\n    }\n  }\n}\nfunction getSenderKey(event2) {\n  var _a;\n  return (_a = event2.content) == null ? void 0 : _a[\"sender_key\"];\n}\nfunction getSessionId(event2) {\n  var _a;\n  return (_a = event2.content) == null ? void 0 : _a[\"session_id\"];\n}\nfunction getCiphertext(event2) {\n  var _a;\n  return (_a = event2.content) == null ? void 0 : _a.ciphertext;\n}\nfunction validateEvent(event2) {\n  return typeof getSenderKey(event2) === \"string\" && typeof getSessionId(event2) === \"string\" && typeof getCiphertext(event2) === \"string\";\n}\nclass SessionKeyGroup {\n  constructor() {\n    this.events = [];\n  }\n  get senderKey() {\n    return getSenderKey(this.events[0]);\n  }\n  get sessionId() {\n    return getSessionId(this.events[0]);\n  }\n}\nfunction groupEventsBySession(events) {\n  return groupByWithCreator(events, (event2) => `${getSenderKey(event2)}|${getSessionId(event2)}`, () => new SessionKeyGroup(), (group, event2) => group.events.push(event2));\n}\nclass RoomKey {\n  isForSession(roomId, senderKey, sessionId) {\n    return this.roomId === roomId && this.senderKey === senderKey && this.sessionId === sessionId;\n  }\n  get isBetter() {\n    return this._isBetter;\n  }\n  set isBetter(value) {\n    this._isBetter = value;\n  }\n}\nfunction isBetterThan(newSession, existingSession) {\n  return newSession.first_known_index() < existingSession.first_known_index();\n}\nclass IncomingRoomKey extends RoomKey {\n  checkBetterThanKeyInStorage(loader, txn) {\n    return this._checkBetterThanKeyInStorage(loader, void 0, txn);\n  }\n  async write(loader, txn) {\n    let pickledSession;\n    if (this.isBetter === void 0) {\n      await this._checkBetterThanKeyInStorage(loader, (session, pickleKey) => {\n        pickledSession = session.pickle(pickleKey);\n      }, txn);\n    }\n    if (this.isBetter === false) {\n      return false;\n    }\n    if (!pickledSession) {\n      pickledSession = await loader.useKey(this, (session, pickleKey) => session.pickle(pickleKey));\n    }\n    const sessionEntry = {\n      roomId: this.roomId,\n      senderKey: this.senderKey,\n      sessionId: this.sessionId,\n      session: pickledSession,\n      backup: this.backupStatus,\n      source: this.keySource,\n      claimedKeys: { \"ed25519\": this.claimedEd25519Key }\n    };\n    txn.inboundGroupSessions.set(sessionEntry);\n    return true;\n  }\n  get eventIds() {\n    return this._eventIds;\n  }\n  async _checkBetterThanKeyInStorage(loader, callback, txn) {\n    if (this.isBetter !== void 0) {\n      return this.isBetter;\n    }\n    let existingKey = loader.getCachedKey(this.roomId, this.senderKey, this.sessionId);\n    if (!existingKey) {\n      const storageKey = await keyFromStorage(this.roomId, this.senderKey, this.sessionId, txn);\n      if (storageKey) {\n        if (storageKey.hasSession) {\n          existingKey = storageKey;\n        } else if (storageKey.eventIds) {\n          this._eventIds = storageKey.eventIds;\n        }\n      }\n    }\n    if (existingKey) {\n      const key = existingKey;\n      await loader.useKey(this, async (newSession) => {\n        await loader.useKey(key, (existingSession, pickleKey) => {\n          this.isBetter = isBetterThan(newSession, existingSession);\n          key.isBetter = !this.isBetter;\n          if (this.isBetter && callback) {\n            callback(newSession, pickleKey);\n          }\n        });\n      });\n    } else {\n      this.isBetter = true;\n    }\n    return this.isBetter;\n  }\n  get backupStatus() {\n    return BackupStatus.NotBackedUp;\n  }\n}\nclass DeviceMessageRoomKey extends IncomingRoomKey {\n  constructor(decryptionResult) {\n    super();\n    this._decryptionResult = decryptionResult;\n  }\n  get roomId() {\n    var _a;\n    return (_a = this._decryptionResult.event.content) == null ? void 0 : _a[\"room_id\"];\n  }\n  get senderKey() {\n    return this._decryptionResult.senderCurve25519Key;\n  }\n  get sessionId() {\n    var _a;\n    return (_a = this._decryptionResult.event.content) == null ? void 0 : _a[\"session_id\"];\n  }\n  get claimedEd25519Key() {\n    return this._decryptionResult.claimedEd25519Key;\n  }\n  get serializationKey() {\n    var _a;\n    return (_a = this._decryptionResult.event.content) == null ? void 0 : _a[\"session_key\"];\n  }\n  get serializationType() {\n    return \"create\";\n  }\n  get keySource() {\n    return KeySource.DeviceMessage;\n  }\n  loadInto(session) {\n    session.create(this.serializationKey);\n  }\n}\nclass OutboundRoomKey extends IncomingRoomKey {\n  constructor(_roomId, outboundSession, identityKeys) {\n    super();\n    this._roomId = _roomId;\n    this.outboundSession = outboundSession;\n    this.identityKeys = identityKeys;\n    this.isBetter = true;\n    this._sessionKey = this.outboundSession.session_key();\n  }\n  get roomId() {\n    return this._roomId;\n  }\n  get senderKey() {\n    return this.identityKeys.curve25519;\n  }\n  get sessionId() {\n    return this.outboundSession.session_id();\n  }\n  get claimedEd25519Key() {\n    return this.identityKeys.ed25519;\n  }\n  get serializationKey() {\n    return this._sessionKey;\n  }\n  get serializationType() {\n    return \"create\";\n  }\n  get keySource() {\n    return KeySource.Outbound;\n  }\n  loadInto(session) {\n    session.create(this.serializationKey);\n  }\n}\nclass BackupRoomKey extends IncomingRoomKey {\n  constructor(_roomId, _sessionId, _backupInfo) {\n    super();\n    this._roomId = _roomId;\n    this._sessionId = _sessionId;\n    this._backupInfo = _backupInfo;\n  }\n  get roomId() {\n    return this._roomId;\n  }\n  get senderKey() {\n    return this._backupInfo[\"sender_key\"];\n  }\n  get sessionId() {\n    return this._sessionId;\n  }\n  get claimedEd25519Key() {\n    var _a;\n    return (_a = this._backupInfo[\"sender_claimed_keys\"]) == null ? void 0 : _a[\"ed25519\"];\n  }\n  get serializationKey() {\n    return this._backupInfo[\"session_key\"];\n  }\n  get serializationType() {\n    return \"import_session\";\n  }\n  get keySource() {\n    return KeySource.Backup;\n  }\n  loadInto(session) {\n    session.import_session(this.serializationKey);\n  }\n  get backupStatus() {\n    return BackupStatus.BackedUp;\n  }\n}\nclass StoredRoomKey extends RoomKey {\n  constructor(storageEntry) {\n    super();\n    this.isBetter = true;\n    this.storageEntry = storageEntry;\n  }\n  get roomId() {\n    return this.storageEntry.roomId;\n  }\n  get senderKey() {\n    return this.storageEntry.senderKey;\n  }\n  get sessionId() {\n    return this.storageEntry.sessionId;\n  }\n  get claimedEd25519Key() {\n    return this.storageEntry.claimedKeys[\"ed25519\"];\n  }\n  get eventIds() {\n    return this.storageEntry.eventIds;\n  }\n  get serializationKey() {\n    return this.storageEntry.session || \"\";\n  }\n  get serializationType() {\n    return \"unpickle\";\n  }\n  loadInto(session, pickleKey) {\n    session.unpickle(pickleKey, this.serializationKey);\n  }\n  get hasSession() {\n    return !!this.serializationKey;\n  }\n}\nfunction keyFromDeviceMessage(dr) {\n  var _a;\n  const sessionKey = (_a = dr.event.content) == null ? void 0 : _a[\"session_key\"];\n  const key = new DeviceMessageRoomKey(dr);\n  if (typeof key.roomId === \"string\" && typeof key.sessionId === \"string\" && typeof key.senderKey === \"string\" && typeof sessionKey === \"string\") {\n    return key;\n  }\n}\nfunction keyFromBackup(roomId, sessionId, backupInfo) {\n  var _a;\n  const sessionKey = backupInfo[\"session_key\"];\n  const senderKey = backupInfo[\"sender_key\"];\n  const claimedEd25519Key = (_a = backupInfo[\"sender_claimed_keys\"]) == null ? void 0 : _a[\"ed25519\"];\n  if (typeof roomId === \"string\" && typeof sessionId === \"string\" && typeof senderKey === \"string\" && typeof sessionKey === \"string\" && typeof claimedEd25519Key === \"string\") {\n    return new BackupRoomKey(roomId, sessionId, backupInfo);\n  }\n}\nasync function keyFromStorage(roomId, senderKey, sessionId, txn) {\n  const existingSessionEntry = await txn.inboundGroupSessions.get(roomId, senderKey, sessionId);\n  if (existingSessionEntry) {\n    return new StoredRoomKey(existingSessionEntry);\n  }\n  return;\n}\nclass Decryption {\n  constructor(keyLoader, olmWorker) {\n    this.keyLoader = keyLoader;\n    this.olmWorker = olmWorker;\n  }\n  async addMissingKeyEventIds(roomId, senderKey, sessionId, eventIds, txn) {\n    let sessionEntry = await txn.inboundGroupSessions.get(roomId, senderKey, sessionId);\n    if (sessionEntry == null ? void 0 : sessionEntry.session) {\n      return;\n    }\n    if (sessionEntry) {\n      const uniqueEventIds = new Set(sessionEntry.eventIds);\n      for (const id of eventIds) {\n        uniqueEventIds.add(id);\n      }\n      sessionEntry.eventIds = Array.from(uniqueEventIds);\n    } else {\n      sessionEntry = { roomId, senderKey, sessionId, eventIds };\n    }\n    txn.inboundGroupSessions.set(sessionEntry);\n  }\n  async getEventIdsForMissingKey(roomId, senderKey, sessionId, txn) {\n    const sessionEntry = await txn.inboundGroupSessions.get(roomId, senderKey, sessionId);\n    if (sessionEntry && !sessionEntry.session) {\n      return sessionEntry.eventIds;\n    }\n  }\n  async hasSession(roomId, senderKey, sessionId, txn) {\n    const sessionEntry = await txn.inboundGroupSessions.get(roomId, senderKey, sessionId);\n    const isValidSession = typeof (sessionEntry == null ? void 0 : sessionEntry.session) === \"string\";\n    return isValidSession;\n  }\n  async prepareDecryptAll(roomId, events, newKeys, txn) {\n    const errors = /* @__PURE__ */ new Map();\n    const validEvents = [];\n    for (const event2 of events) {\n      if (validateEvent(event2)) {\n        validEvents.push(event2);\n      } else {\n        errors.set(event2.event_id, new DecryptionError$1(\"MEGOLM_INVALID_EVENT\", event2));\n      }\n    }\n    const eventsBySession = groupEventsBySession(validEvents);\n    const sessionDecryptions = [];\n    await Promise.all(Array.from(eventsBySession.values()).map(async (group) => {\n      const key = await this.getRoomKey(roomId, group.senderKey, group.sessionId, newKeys, txn);\n      if (key) {\n        sessionDecryptions.push(new SessionDecryption(key, group.events, this.olmWorker, this.keyLoader));\n      } else {\n        for (const event2 of group.events) {\n          errors.set(event2.event_id, new DecryptionError$1(\"MEGOLM_NO_SESSION\", event2));\n        }\n      }\n    }));\n    return new DecryptionPreparation$1(roomId, sessionDecryptions, errors);\n  }\n  async getRoomKey(roomId, senderKey, sessionId, newKeys, txn) {\n    if (newKeys) {\n      const key = newKeys.find((k) => k.isForSession(roomId, senderKey, sessionId));\n      if (key && await key.checkBetterThanKeyInStorage(this.keyLoader, txn)) {\n        return key;\n      }\n    }\n    const cachedKey = this.keyLoader.getCachedKey(roomId, senderKey, sessionId);\n    if (cachedKey) {\n      return cachedKey;\n    }\n    const storageKey = await keyFromStorage(roomId, senderKey, sessionId, txn);\n    if (storageKey && storageKey.serializationKey) {\n      return storageKey;\n    }\n  }\n  writeRoomKey(key, txn) {\n    return key.write(this.keyLoader, txn);\n  }\n  roomKeysFromDeviceMessages(decryptionResults, log) {\n    var _a, _b;\n    const keys = [];\n    for (const dr of decryptionResults) {\n      if (((_a = dr.event) == null ? void 0 : _a.type) !== \"m.room_key\" || ((_b = dr.event.content) == null ? void 0 : _b.algorithm) !== MEGOLM_ALGORITHM) {\n        continue;\n      }\n      log.wrap(\"room_key\", (log2) => {\n        const key = keyFromDeviceMessage(dr);\n        if (key) {\n          log2.set(\"roomId\", key.roomId);\n          log2.set(\"id\", key.sessionId);\n          keys.push(key);\n        } else {\n          log2.logLevel = log2.level.Warn;\n          log2.set(\"invalid\", true);\n        }\n      }, log.level.Detail);\n    }\n    return keys;\n  }\n  roomKeyFromBackup(roomId, sessionId, sessionInfo) {\n    return keyFromBackup(roomId, sessionId, sessionInfo);\n  }\n  dispose() {\n    this.keyLoader.dispose();\n  }\n}\nclass KeyLoader extends BaseLRUCache {\n  constructor(olm, pickleKey, limit) {\n    super(limit);\n    this.pickleKey = pickleKey;\n    this.olm = olm;\n  }\n  getCachedKey(roomId, senderKey, sessionId) {\n    const idx = this.findCachedKeyIndex(roomId, senderKey, sessionId);\n    if (idx !== -1) {\n      return this._getByIndexAndMoveUp(idx).key;\n    }\n  }\n  async useKey(key, callback) {\n    const keyOp = await this.allocateOperation(key);\n    try {\n      return await callback(keyOp.session, this.pickleKey);\n    } finally {\n      this.releaseOperation(keyOp);\n    }\n  }\n  get running() {\n    return this._entries.some((op) => op.refCount !== 0);\n  }\n  dispose() {\n    for (let i = 0; i < this._entries.length; i += 1) {\n      this._entries[i].dispose();\n    }\n    this._entries.splice(0, this._entries.length);\n  }\n  async allocateOperation(key) {\n    let idx;\n    while ((idx = this.findIndexForAllocation(key)) === -1) {\n      await this.operationBecomesUnused();\n    }\n    if (idx < this.size) {\n      const op = this._getByIndexAndMoveUp(idx);\n      if (op.isForKey(key)) {\n        op.refCount += 1;\n        return op;\n      } else {\n        op.refCount = 1;\n        op.key = key;\n        key.loadInto(op.session, this.pickleKey);\n      }\n      return op;\n    } else {\n      const session = new this.olm.InboundGroupSession();\n      key.loadInto(session, this.pickleKey);\n      const op = new KeyOperation(key, session);\n      this._set(op);\n      return op;\n    }\n  }\n  releaseOperation(op) {\n    op.refCount -= 1;\n    if (op.refCount <= 0 && this.resolveUnusedOperation) {\n      this.resolveUnusedOperation();\n      this.operationBecomesUnusedPromise = this.resolveUnusedOperation = void 0;\n    }\n  }\n  operationBecomesUnused() {\n    if (!this.operationBecomesUnusedPromise) {\n      this.operationBecomesUnusedPromise = new Promise((resolve) => {\n        this.resolveUnusedOperation = resolve;\n      });\n    }\n    return this.operationBecomesUnusedPromise;\n  }\n  findIndexForAllocation(key) {\n    let idx = this.findIndexSameKey(key);\n    if (idx === -1) {\n      if (this.size < this.limit) {\n        idx = this.size;\n      } else {\n        idx = this.findIndexSameSessionUnused(key);\n        if (idx === -1) {\n          idx = this.findIndexOldestUnused();\n        }\n      }\n    }\n    return idx;\n  }\n  findCachedKeyIndex(roomId, senderKey, sessionId) {\n    return this._entries.reduce((bestIdx, op, i, arr) => {\n      const bestOp = bestIdx === -1 ? void 0 : arr[bestIdx];\n      if (op.isBest === true && op.isForSameSession(roomId, senderKey, sessionId)) {\n        if (!bestOp || op.isBetter(bestOp)) {\n          return i;\n        }\n      }\n      return bestIdx;\n    }, -1);\n  }\n  findIndexSameKey(key) {\n    return this._entries.findIndex((op) => {\n      return op.isForSameSession(key.roomId, key.senderKey, key.sessionId) && op.isForKey(key);\n    });\n  }\n  findIndexSameSessionUnused(key) {\n    return this._entries.reduce((worstIdx, op, i, arr) => {\n      const worst = worstIdx === -1 ? void 0 : arr[worstIdx];\n      if (op.refCount === 0 && op.isForSameSession(key.roomId, key.senderKey, key.sessionId)) {\n        if (!worst || !op.isBetter(worst)) {\n          return i;\n        }\n      }\n      return worstIdx;\n    }, -1);\n  }\n  findIndexOldestUnused() {\n    for (let i = this._entries.length - 1; i >= 0; i -= 1) {\n      const op = this._entries[i];\n      if (op.refCount === 0) {\n        return i;\n      }\n    }\n    return -1;\n  }\n}\nclass KeyOperation {\n  constructor(key, session) {\n    this.key = key;\n    this.session = session;\n    this.refCount = 1;\n  }\n  isForSameSession(roomId, senderKey, sessionId) {\n    return this.key.roomId === roomId && this.key.senderKey === senderKey && this.key.sessionId === sessionId;\n  }\n  isBetter(other) {\n    return isBetterThan(this.session, other.session);\n  }\n  isForKey(key) {\n    return this.key.serializationKey === key.serializationKey && this.key.serializationType === key.serializationType;\n  }\n  dispose() {\n    this.session.free();\n    this.session = void 0;\n  }\n  get isBest() {\n    return this.key.isBetter;\n  }\n}\nconst Algorithm = \"m.megolm_backup.v1.curve25519-aes-sha2\";\nclass BackupEncryption {\n  constructor(encryption, decryption) {\n    this.encryption = encryption;\n    this.decryption = decryption;\n  }\n  static fromAuthData(authData, privateKey, olm) {\n    const expectedPubKey = authData.public_key;\n    const decryption = new olm.PkDecryption();\n    const encryption = new olm.PkEncryption();\n    try {\n      const pubKey = decryption.init_with_private_key(privateKey);\n      if (pubKey !== expectedPubKey) {\n        throw new Error(`Bad backup key, public key does not match. Calculated ${pubKey} but expected ${expectedPubKey}`);\n      }\n      encryption.set_recipient_key(pubKey);\n    } catch (err) {\n      decryption.free();\n      encryption.free();\n      throw err;\n    }\n    return new BackupEncryption(encryption, decryption);\n  }\n  decryptRoomKey(sessionData) {\n    const sessionInfo = this.decryption.decrypt(sessionData.ephemeral, sessionData.mac, sessionData.ciphertext);\n    return JSON.parse(sessionInfo);\n  }\n  encryptRoomKey(key, sessionKey) {\n    const sessionInfo = {\n      algorithm: MEGOLM_ALGORITHM,\n      sender_key: key.senderKey,\n      sender_claimed_keys: { ed25519: key.claimedEd25519Key },\n      forwarding_curve25519_key_chain: [],\n      session_key: sessionKey\n    };\n    return this.encryption.encrypt(JSON.stringify(sessionInfo));\n  }\n  dispose() {\n    var _a, _b;\n    (_a = this.decryption) == null ? void 0 : _a.free();\n    this.decryption = void 0;\n    (_b = this.encryption) == null ? void 0 : _b.free();\n    this.encryption = void 0;\n  }\n}\nconst KEYS_PER_REQUEST = 200;\nclass BackupConfig {\n  constructor(info, crypto2) {\n    this.info = info;\n    this.crypto = crypto2;\n  }\n}\nclass KeyBackup extends EventEmitter {\n  constructor(hsApi, olm, keyLoader, storage, platform, maxDelay = 1e4) {\n    super();\n    this.hsApi = hsApi;\n    this.olm = olm;\n    this.keyLoader = keyLoader;\n    this.storage = storage;\n    this.platform = platform;\n    this.maxDelay = maxDelay;\n    this._stopped = false;\n    this._needsNewKey = false;\n    this._hasBackedUpAllKeys = false;\n    this.backupConfigDeferred = new Deferred();\n    this.backupConfigDeferred = new Deferred();\n  }\n  get hasStopped() {\n    return this._stopped;\n  }\n  get error() {\n    return this._error;\n  }\n  get version() {\n    var _a, _b;\n    return (_b = (_a = this.backupConfigDeferred.value) == null ? void 0 : _a.info) == null ? void 0 : _b.version;\n  }\n  get needsNewKey() {\n    return this._needsNewKey;\n  }\n  get hasBackedUpAllKeys() {\n    return this._hasBackedUpAllKeys;\n  }\n  get operationInProgress() {\n    return this._operationInProgress;\n  }\n  async getRoomKey(roomId, sessionId, log) {\n    if (this.needsNewKey) {\n      return;\n    }\n    const backupConfig = await this.backupConfigDeferred.promise;\n    if (!backupConfig) {\n      return;\n    }\n    const sessionResponse = await this.hsApi.roomKeyForRoomAndSession(backupConfig.info.version, roomId, sessionId, { log }).response();\n    if (!sessionResponse.session_data) {\n      return;\n    }\n    const sessionKeyInfo = backupConfig.crypto.decryptRoomKey(sessionResponse.session_data);\n    if ((sessionKeyInfo == null ? void 0 : sessionKeyInfo.algorithm) === MEGOLM_ALGORITHM) {\n      return keyFromBackup(roomId, sessionId, sessionKeyInfo);\n    } else if (sessionKeyInfo == null ? void 0 : sessionKeyInfo.algorithm) {\n      log.set(\"unknown algorithm\", sessionKeyInfo.algorithm);\n    }\n  }\n  markAllForBackup(txn) {\n    return txn.inboundGroupSessions.markAllAsNotBackedUp();\n  }\n  async load(secretStorage, log) {\n    const base64PrivateKey = await secretStorage.readSecret(\"m.megolm_backup.v1\");\n    if (base64PrivateKey) {\n      this.privateKey = new Uint8Array(this.platform.encoding.base64.decode(base64PrivateKey));\n      return true;\n    } else {\n      this.backupConfigDeferred.resolve(void 0);\n      return false;\n    }\n  }\n  async start(log) {\n    await log.wrap(\"KeyBackup.start\", async (log2) => {\n      if (this.privateKey && !this.backupInfoRequest) {\n        let backupInfo;\n        try {\n          this.backupInfoRequest = this.hsApi.roomKeysVersion(void 0, { log: log2 });\n          backupInfo = await this.backupInfoRequest.response();\n        } catch (err) {\n          if (err.name === \"AbortError\") {\n            log2.set(\"aborted\", true);\n            return;\n          } else {\n            throw err;\n          }\n        } finally {\n          this.backupInfoRequest = void 0;\n        }\n        if (backupInfo.algorithm === Algorithm) {\n          const crypto2 = BackupEncryption.fromAuthData(backupInfo.auth_data, this.privateKey, this.olm);\n          this.backupConfigDeferred.resolve(new BackupConfig(backupInfo, crypto2));\n          this.emit(\"change\");\n        } else {\n          this.backupConfigDeferred.resolve(void 0);\n          log2.log({ l: `Unknown backup algorithm`, algorithm: backupInfo.algorithm });\n        }\n        this.privateKey = void 0;\n      }\n      this.flush(log2);\n    });\n  }\n  flush(log) {\n    if (!this._operationInProgress) {\n      log.wrapDetached(\"flush key backup\", async (log2) => {\n        if (this._needsNewKey) {\n          log2.set(\"needsNewKey\", this._needsNewKey);\n          return;\n        }\n        this._stopped = false;\n        this._error = void 0;\n        this._hasBackedUpAllKeys = false;\n        const operation = this._runFlushOperation(log2);\n        this._operationInProgress = operation;\n        this.emit(\"change\");\n        try {\n          await operation.result;\n          this._hasBackedUpAllKeys = true;\n        } catch (err) {\n          this._stopped = true;\n          if (err.name === \"HomeServerError\" && (err.errcode === \"M_WRONG_ROOM_KEYS_VERSION\" || err.errcode === \"M_NOT_FOUND\")) {\n            log2.set(\"wrong_version\", true);\n            this._needsNewKey = true;\n          } else {\n            if (err.name !== \"AbortError\" || err.name === \"StorageError\" && err.errcode === \"AbortError\") {\n              this._error = err;\n            }\n          }\n          log2.catch(err);\n        }\n        this._operationInProgress = void 0;\n        this.emit(\"change\");\n      });\n    }\n  }\n  _runFlushOperation(log) {\n    return new AbortableOperation(async (setAbortable, setProgress) => {\n      const backupConfig = await this.backupConfigDeferred.promise;\n      if (!backupConfig) {\n        return;\n      }\n      let total = 0;\n      let amountFinished = 0;\n      while (true) {\n        const waitMs = this.platform.random() * this.maxDelay;\n        const timeout = this.platform.clock.createTimeout(waitMs);\n        setAbortable(timeout);\n        await timeout.elapsed();\n        const txn = await this.storage.readTxn([StoreNames.inboundGroupSessions]);\n        setAbortable(txn);\n        total = amountFinished + await txn.inboundGroupSessions.countNonBackedUpSessions();\n        setProgress(new Progress(total, amountFinished));\n        const keysNeedingBackup = (await txn.inboundGroupSessions.getFirstNonBackedUpSessions(KEYS_PER_REQUEST)).map((entry) => new StoredRoomKey(entry));\n        if (keysNeedingBackup.length === 0) {\n          log.set(\"total\", total);\n          return;\n        }\n        const payload = await this.encodeKeysForBackup(keysNeedingBackup, backupConfig.crypto);\n        const uploadRequest = this.hsApi.uploadRoomKeysToBackup(backupConfig.info.version, payload, { log });\n        setAbortable(uploadRequest);\n        await uploadRequest.response();\n        await this.markKeysAsBackedUp(keysNeedingBackup, setAbortable);\n        amountFinished += keysNeedingBackup.length;\n        setProgress(new Progress(total, amountFinished));\n      }\n    });\n  }\n  async encodeKeysForBackup(roomKeys, crypto2) {\n    const payload = { rooms: {} };\n    const payloadRooms = payload.rooms;\n    for (const key of roomKeys) {\n      let roomPayload = payloadRooms[key.roomId];\n      if (!roomPayload) {\n        roomPayload = payloadRooms[key.roomId] = { sessions: {} };\n      }\n      roomPayload.sessions[key.sessionId] = await this.encodeRoomKey(key, crypto2);\n    }\n    return payload;\n  }\n  async markKeysAsBackedUp(roomKeys, setAbortable) {\n    const txn = await this.storage.readWriteTxn([\n      StoreNames.inboundGroupSessions\n    ]);\n    setAbortable(txn);\n    try {\n      await Promise.all(roomKeys.map((key) => {\n        return txn.inboundGroupSessions.markAsBackedUp(key.roomId, key.senderKey, key.sessionId);\n      }));\n    } catch (err) {\n      txn.abort();\n      throw err;\n    }\n    await txn.complete();\n  }\n  async encodeRoomKey(roomKey, crypto2) {\n    return await this.keyLoader.useKey(roomKey, (session) => {\n      const firstMessageIndex = session.first_known_index();\n      const sessionKey = session.export_session(firstMessageIndex);\n      return {\n        first_message_index: firstMessageIndex,\n        forwarded_count: 0,\n        is_verified: false,\n        session_data: crypto2.encryptRoomKey(roomKey, sessionKey)\n      };\n    });\n  }\n  dispose() {\n    var _a, _b, _c2;\n    (_a = this.backupInfoRequest) == null ? void 0 : _a.abort();\n    (_c2 = (_b = this.backupConfigDeferred.value) == null ? void 0 : _b.crypto) == null ? void 0 : _c2.dispose();\n  }\n}\nclass Progress {\n  constructor(total, finished) {\n    this.total = total;\n    this.finished = finished;\n  }\n}\nclass Encryption {\n  constructor({ pickleKey, olm, account, keyLoader, storage, now, ownDeviceId }) {\n    this._pickleKey = pickleKey;\n    this._olm = olm;\n    this._account = account;\n    this._keyLoader = keyLoader;\n    this._storage = storage;\n    this._now = now;\n    this._ownDeviceId = ownDeviceId;\n  }\n  discardOutboundSession(roomId, txn) {\n    txn.outboundGroupSessions.remove(roomId);\n  }\n  async createRoomKeyMessage(roomId, txn) {\n    let sessionEntry = await txn.outboundGroupSessions.get(roomId);\n    if (sessionEntry) {\n      const session = new this._olm.OutboundGroupSession();\n      try {\n        session.unpickle(this._pickleKey, sessionEntry.session);\n        return this._createRoomKeyMessage(session, roomId);\n      } finally {\n        session.free();\n      }\n    }\n  }\n  createWithheldMessage(roomMessage, code, reason) {\n    return {\n      algorithm: roomMessage.algorithm,\n      code,\n      reason,\n      room_id: roomMessage.room_id,\n      sender_key: this._account.identityKeys.curve25519,\n      session_id: roomMessage.session_id\n    };\n  }\n  async ensureOutboundSession(roomId, encryptionParams) {\n    let session = new this._olm.OutboundGroupSession();\n    try {\n      const txn = await this._storage.readWriteTxn([\n        this._storage.storeNames.inboundGroupSessions,\n        this._storage.storeNames.outboundGroupSessions\n      ]);\n      let roomKeyMessage;\n      try {\n        let sessionEntry = await txn.outboundGroupSessions.get(roomId);\n        roomKeyMessage = await this._readOrCreateSession(session, sessionEntry, roomId, encryptionParams, txn);\n        if (roomKeyMessage) {\n          this._writeSession(this._now(), session, roomId, txn);\n        }\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n      return roomKeyMessage;\n    } finally {\n      session.free();\n    }\n  }\n  async _readOrCreateSession(session, sessionEntry, roomId, encryptionParams, txn) {\n    if (sessionEntry) {\n      session.unpickle(this._pickleKey, sessionEntry.session);\n    }\n    if (!sessionEntry || this._needsToRotate(session, sessionEntry.createdAt, encryptionParams)) {\n      if (sessionEntry) {\n        session.free();\n        session = new this._olm.OutboundGroupSession();\n      }\n      session.create();\n      const roomKeyMessage = this._createRoomKeyMessage(session, roomId);\n      const roomKey = new OutboundRoomKey(roomId, session, this._account.identityKeys);\n      await roomKey.write(this._keyLoader, txn);\n      return roomKeyMessage;\n    }\n  }\n  _writeSession(createdAt, session, roomId, txn) {\n    txn.outboundGroupSessions.set({\n      roomId,\n      session: session.pickle(this._pickleKey),\n      createdAt\n    });\n  }\n  async encrypt(roomId, type, content, encryptionParams) {\n    let session = new this._olm.OutboundGroupSession();\n    try {\n      const txn = await this._storage.readWriteTxn([\n        this._storage.storeNames.inboundGroupSessions,\n        this._storage.storeNames.outboundGroupSessions\n      ]);\n      let roomKeyMessage;\n      let encryptedContent;\n      try {\n        let sessionEntry = await txn.outboundGroupSessions.get(roomId);\n        roomKeyMessage = await this._readOrCreateSession(session, sessionEntry, roomId, encryptionParams, txn);\n        encryptedContent = this._encryptContent(roomId, session, type, content);\n        const createdAt = roomKeyMessage ? this._now() : sessionEntry.createdAt;\n        this._writeSession(createdAt, session, roomId, txn);\n      } catch (err) {\n        txn.abort();\n        throw err;\n      }\n      await txn.complete();\n      return new EncryptionResult(encryptedContent, roomKeyMessage);\n    } finally {\n      if (session) {\n        session.free();\n      }\n    }\n  }\n  _needsToRotate(session, createdAt, encryptionParams) {\n    let rotationPeriodMs = 6048e5;\n    if (Number.isSafeInteger(encryptionParams == null ? void 0 : encryptionParams.rotation_period_ms)) {\n      rotationPeriodMs = encryptionParams == null ? void 0 : encryptionParams.rotation_period_ms;\n    }\n    let rotationPeriodMsgs = 100;\n    if (Number.isSafeInteger(encryptionParams == null ? void 0 : encryptionParams.rotation_period_msgs)) {\n      rotationPeriodMsgs = encryptionParams == null ? void 0 : encryptionParams.rotation_period_msgs;\n    }\n    if (this._now() > createdAt + rotationPeriodMs) {\n      return true;\n    }\n    if (session.message_index() >= rotationPeriodMsgs) {\n      return true;\n    }\n  }\n  _encryptContent(roomId, session, type, content) {\n    const plaintext = JSON.stringify({\n      room_id: roomId,\n      type,\n      content\n    });\n    const ciphertext = session.encrypt(plaintext);\n    const encryptedContent = {\n      algorithm: MEGOLM_ALGORITHM,\n      sender_key: this._account.identityKeys.curve25519,\n      ciphertext,\n      session_id: session.session_id(),\n      device_id: this._ownDeviceId\n    };\n    return encryptedContent;\n  }\n  _createRoomKeyMessage(session, roomId) {\n    return {\n      room_id: roomId,\n      session_id: session.session_id(),\n      session_key: session.session_key(),\n      algorithm: MEGOLM_ALGORITHM,\n      chain_index: session.message_index()\n    };\n  }\n}\nclass EncryptionResult {\n  constructor(content, roomKeyMessage) {\n    this.content = content;\n    this.roomKeyMessage = roomKeyMessage;\n  }\n}\nconst ENCRYPTED_TYPE = \"m.room.encrypted\";\nconst ROOM_HISTORY_VISIBILITY_TYPE = \"m.room.history_visibility\";\nconst MIN_PRESHARE_INTERVAL = 60 * 1e3;\nclass RoomEncryption {\n  constructor({ room, deviceTracker, olmEncryption, megolmEncryption, megolmDecryption, encryptionParams, storage, keyBackup, notifyMissingMegolmSession, clock }) {\n    this._room = room;\n    this._deviceTracker = deviceTracker;\n    this._olmEncryption = olmEncryption;\n    this._megolmEncryption = megolmEncryption;\n    this._megolmDecryption = megolmDecryption;\n    this._encryptionParams = encryptionParams;\n    this._senderDeviceCache = /* @__PURE__ */ new Map();\n    this._storage = storage;\n    this._keyBackup = keyBackup;\n    this._notifyMissingMegolmSession = notifyMissingMegolmSession;\n    this._clock = clock;\n    this._isFlushingRoomKeyShares = false;\n    this._lastKeyPreShareTime = null;\n    this._keySharePromise = null;\n    this._historyVisibility = void 0;\n    this._disposed = false;\n  }\n  enableKeyBackup(keyBackup) {\n    if (this._keyBackup && !!keyBackup) {\n      return;\n    }\n    this._keyBackup = keyBackup;\n  }\n  async restoreMissingSessionsFromBackup(entries, log) {\n    const events = entries.filter((e) => e.isEncrypted && !e.isDecrypted && e.event).map((e) => e.event);\n    const eventsBySession = groupEventsBySession(events);\n    const groups = Array.from(eventsBySession.values());\n    const txn = await this._storage.readTxn([this._storage.storeNames.inboundGroupSessions]);\n    const hasSessions = await Promise.all(groups.map(async (group) => {\n      return this._megolmDecryption.hasSession(this._room.id, group.senderKey, group.sessionId, txn);\n    }));\n    const missingSessions = groups.filter((_, i2) => !hasSessions[i2]);\n    if (missingSessions.length) {\n      for (var i = missingSessions.length - 1; i >= 0; i--) {\n        const session = missingSessions[i];\n        await log.wrap(\"session\", (log2) => this._requestMissingSessionFromBackup(session.senderKey, session.sessionId, log2));\n      }\n    }\n  }\n  notifyTimelineClosed() {\n    this._senderDeviceCache = /* @__PURE__ */ new Map();\n  }\n  async writeSync(roomResponse, memberChanges, txn, log) {\n    let historyVisibility = await this._loadHistoryVisibilityIfNeeded(this._historyVisibility, txn);\n    const addedMembers = [];\n    const removedMembers = [];\n    await iterateResponseStateEvents(roomResponse, (event2) => {\n      var _a;\n      if (event2.state_key === \"\" && event2.type === ROOM_HISTORY_VISIBILITY_TYPE) {\n        const newHistoryVisibility = (_a = event2 == null ? void 0 : event2.content) == null ? void 0 : _a.history_visibility;\n        if (newHistoryVisibility !== historyVisibility) {\n          return log.wrap({\n            l: \"history_visibility changed\",\n            from: historyVisibility,\n            to: newHistoryVisibility\n          }, async (log2) => {\n            historyVisibility = newHistoryVisibility;\n            const result = await this._deviceTracker.writeHistoryVisibility(this._room, historyVisibility, txn, log2);\n            addedMembers.push(...result.added);\n            removedMembers.push(...result.removed);\n          });\n        }\n      }\n    });\n    if (memberChanges.size) {\n      const result = await this._deviceTracker.writeMemberChanges(this._room, memberChanges, historyVisibility, txn);\n      addedMembers.push(...result.added);\n      removedMembers.push(...result.removed);\n    }\n    if (removedMembers.length) {\n      log.log({\n        l: \"discardOutboundSession\",\n        leftUsers: removedMembers\n      });\n      this._megolmEncryption.discardOutboundSession(this._room.id, txn);\n    }\n    let shouldFlush = false;\n    if (addedMembers.length) {\n      shouldFlush = await this._addShareRoomKeyOperationForMembers(addedMembers, txn, log);\n    }\n    return { shouldFlush, historyVisibility };\n  }\n  afterSync({ historyVisibility }) {\n    this._historyVisibility = historyVisibility;\n  }\n  async _loadHistoryVisibilityIfNeeded(historyVisibility, txn = void 0) {\n    var _a, _b;\n    if (!historyVisibility) {\n      if (!txn) {\n        txn = await this._storage.readTxn([this._storage.storeNames.roomState]);\n      }\n      const visibilityEntry = await txn.roomState.get(this._room.id, ROOM_HISTORY_VISIBILITY_TYPE, \"\");\n      if (visibilityEntry) {\n        return (_b = (_a = visibilityEntry.event) == null ? void 0 : _a.content) == null ? void 0 : _b.history_visibility;\n      }\n    }\n    return historyVisibility;\n  }\n  async prepareDecryptAll(events, newKeys, source, txn) {\n    var _a, _b, _c2;\n    const errors = /* @__PURE__ */ new Map();\n    const validEvents = [];\n    for (const event2 of events) {\n      if (event2.redacted_because || ((_a = event2.unsigned) == null ? void 0 : _a.redacted_because)) {\n        continue;\n      }\n      if (((_b = event2.content) == null ? void 0 : _b.algorithm) !== MEGOLM_ALGORITHM) {\n        errors.set(event2.event_id, new Error(\"Unsupported algorithm: \" + ((_c2 = event2.content) == null ? void 0 : _c2.algorithm)));\n      }\n      validEvents.push(event2);\n    }\n    const preparation = await this._megolmDecryption.prepareDecryptAll(this._room.id, validEvents, newKeys, txn);\n    return new DecryptionPreparation(preparation, errors, source, this, events);\n  }\n  async _processDecryptionResults(events, results, errors, source, txn, log) {\n    const missingSessionEvents = events.filter((event2) => {\n      const error = errors.get(event2.event_id);\n      return (error == null ? void 0 : error.code) === \"MEGOLM_NO_SESSION\";\n    });\n    if (!missingSessionEvents.length) {\n      return;\n    }\n    const missingEventsBySession = groupEventsBySession(missingSessionEvents);\n    if (source === DecryptionSource.Sync) {\n      await Promise.all(Array.from(missingEventsBySession.values()).map(async (group) => {\n        const eventIds = group.events.map((e) => e.event_id);\n        return this._megolmDecryption.addMissingKeyEventIds(this._room.id, group.senderKey, group.sessionId, eventIds, txn);\n      }));\n    }\n    if (!this._keyBackup) {\n      return;\n    }\n    log.wrapDetached(\"check key backup\", async (log2) => {\n      log2.set(\"source\", source);\n      log2.set(\"events\", missingSessionEvents.length);\n      log2.set(\"sessions\", missingEventsBySession.size);\n      if (source === DecryptionSource.Sync) {\n        await this._clock.createTimeout(1e4).elapsed();\n        if (this._disposed) {\n          return;\n        }\n        const txn2 = await this._storage.readTxn([this._storage.storeNames.inboundGroupSessions]);\n        await Promise.all(Array.from(missingEventsBySession).map(async ([key, group]) => {\n          if (await this._megolmDecryption.hasSession(this._room.id, group.senderKey, group.sessionId, txn2)) {\n            missingEventsBySession.delete(key);\n          }\n        }));\n      }\n      await Promise.all(Array.from(missingEventsBySession.values()).map((group) => {\n        return log2.wrap(\"session\", (log3) => this._requestMissingSessionFromBackup(group.senderKey, group.sessionId, log3));\n      }));\n    });\n  }\n  async _verifyDecryptionResults(results, txn) {\n    await Promise.all(results.map(async (result) => {\n      let device = this._senderDeviceCache.get(result.senderCurve25519Key);\n      if (!device) {\n        device = await this._deviceTracker.getDeviceByCurve25519Key(result.senderCurve25519Key, txn);\n        this._senderDeviceCache.set(result.senderCurve25519Key, device);\n      }\n      if (device) {\n        result.setDevice(device);\n      }\n    }));\n  }\n  async _fetchKeyAndVerifyDecryptionResults(results, hsApi, log) {\n    const resultsWithoutDevice = results.filter((r) => r.isVerificationUnknown);\n    if (resultsWithoutDevice.length) {\n      return log.wrap(\"fetch unverified senders\", async (log2) => {\n        const sendersWithoutDevice = Array.from(resultsWithoutDevice.reduce((senders, r) => {\n          return senders.add(r.encryptedEvent.sender);\n        }, /* @__PURE__ */ new Set()));\n        log2.set(\"senders\", sendersWithoutDevice);\n        await this._deviceTracker.devicesForUsers(sendersWithoutDevice, hsApi, log2);\n        const txn = await this._storage.readTxn([this._storage.storeNames.deviceKeys]);\n        await this._verifyDecryptionResults(resultsWithoutDevice, txn);\n        const resultsWithFoundDevice = resultsWithoutDevice.filter((r) => !r.isVerificationUnknown);\n        const resultsToEventIdMap = resultsWithFoundDevice.reduce((map, r) => {\n          map.set(r.encryptedEvent.event_id, r);\n          return map;\n        }, /* @__PURE__ */ new Map());\n        return new BatchDecryptionResult(resultsToEventIdMap, /* @__PURE__ */ new Map(), this);\n      });\n    }\n    return new BatchDecryptionResult(/* @__PURE__ */ new Map(), /* @__PURE__ */ new Map(), this);\n  }\n  async _requestMissingSessionFromBackup(senderKey, sessionId, log) {\n    if (!this._keyBackup) {\n      log.set(\"enabled\", false);\n      this._notifyMissingMegolmSession();\n      return;\n    }\n    log.set(\"id\", sessionId);\n    log.set(\"senderKey\", senderKey);\n    try {\n      const roomKey = await this._keyBackup.getRoomKey(this._room.id, sessionId, log);\n      if (roomKey) {\n        if (roomKey.senderKey !== senderKey) {\n          log.set(\"wrong_sender_key\", roomKey.senderKey);\n          log.logLevel = log.level.Warn;\n          return;\n        }\n        let keyIsBestOne = false;\n        let retryEventIds;\n        const txn = await this._storage.readWriteTxn([this._storage.storeNames.inboundGroupSessions]);\n        try {\n          keyIsBestOne = await this._megolmDecryption.writeRoomKey(roomKey, txn);\n          log.set(\"isBetter\", keyIsBestOne);\n          if (keyIsBestOne) {\n            retryEventIds = roomKey.eventIds;\n          }\n        } catch (err) {\n          txn.abort();\n          throw err;\n        }\n        await txn.complete();\n        if (keyIsBestOne) {\n          await log.wrap(\"retryDecryption\", (log2) => this._room.notifyRoomKey(roomKey, retryEventIds || [], log2));\n        }\n      }\n    } catch (err) {\n      if (!(err.name === \"HomeServerError\" && err.errcode === \"M_NOT_FOUND\")) {\n        log.set(\"not_found\", true);\n      } else {\n        log.error = err;\n        log.logLevel = log.level.Error;\n      }\n    }\n  }\n  getEventIdsForMissingKey(roomKey, txn) {\n    return this._megolmDecryption.getEventIdsForMissingKey(this._room.id, roomKey.senderKey, roomKey.sessionId, txn);\n  }\n  async ensureMessageKeyIsShared(hsApi, log) {\n    var _a;\n    if (((_a = this._lastKeyPreShareTime) == null ? void 0 : _a.measure()) < MIN_PRESHARE_INTERVAL) {\n      return;\n    }\n    this._lastKeyPreShareTime = this._clock.createMeasure();\n    try {\n      this._keySharePromise = (async () => {\n        var _a2;\n        const roomKeyMessage = await this._megolmEncryption.ensureOutboundSession(this._room.id, this._encryptionParams);\n        if (roomKeyMessage) {\n          (_a2 = this._keyBackup) == null ? void 0 : _a2.flush(log);\n          await log.wrap(\"share key\", (log2) => this._shareNewRoomKey(roomKeyMessage, hsApi, log2));\n        }\n      })();\n      await this._keySharePromise;\n    } finally {\n      this._keySharePromise = null;\n    }\n  }\n  async encrypt(type, content, hsApi, log) {\n    var _a;\n    if (this._keySharePromise) {\n      log.set(\"waitForRunningKeyShare\", true);\n      await this._keySharePromise;\n    }\n    const megolmResult = await log.wrap(\"megolm encrypt\", () => this._megolmEncryption.encrypt(this._room.id, type, content, this._encryptionParams));\n    if (megolmResult.roomKeyMessage) {\n      (_a = this._keyBackup) == null ? void 0 : _a.flush(log);\n      await log.wrap(\"share key\", (log2) => this._shareNewRoomKey(megolmResult.roomKeyMessage, hsApi, log2));\n    }\n    return {\n      type: ENCRYPTED_TYPE,\n      content: megolmResult.content\n    };\n  }\n  needsToShareKeys(memberChanges) {\n    for (const m of memberChanges.values()) {\n      if (m.hasJoined) {\n        return true;\n      }\n    }\n    return false;\n  }\n  async _shareNewRoomKey(roomKeyMessage, hsApi, log) {\n    this._historyVisibility = await this._loadHistoryVisibilityIfNeeded(this._historyVisibility);\n    await this._deviceTracker.trackRoom(this._room, this._historyVisibility, log);\n    const devices = await this._deviceTracker.devicesForTrackedRoom(this._room.id, hsApi, log);\n    const userIds = Array.from(devices.reduce((set, device) => set.add(device.user_id), /* @__PURE__ */ new Set()));\n    let writeOpTxn = await this._storage.readWriteTxn([this._storage.storeNames.operations]);\n    let operation;\n    try {\n      operation = this._writeRoomKeyShareOperation(roomKeyMessage, userIds, writeOpTxn);\n    } catch (err) {\n      writeOpTxn.abort();\n      throw err;\n    }\n    await this._processShareRoomKeyOperation(operation, hsApi, log);\n  }\n  async _addShareRoomKeyOperationForMembers(userIds, txn, log) {\n    const roomKeyMessage = await this._megolmEncryption.createRoomKeyMessage(this._room.id, txn);\n    if (roomKeyMessage) {\n      log.log({\n        l: \"share key for new members\",\n        userIds,\n        id: roomKeyMessage.session_id,\n        chain_index: roomKeyMessage.chain_index\n      });\n      this._writeRoomKeyShareOperation(roomKeyMessage, userIds, txn);\n      return true;\n    }\n    return false;\n  }\n  async flushPendingRoomKeyShares(hsApi, operations, log) {\n    if (this._isFlushingRoomKeyShares) {\n      return;\n    }\n    this._isFlushingRoomKeyShares = true;\n    try {\n      if (!operations) {\n        const txn = await this._storage.readTxn([this._storage.storeNames.operations]);\n        operations = await txn.operations.getAllByTypeAndScope(\"share_room_key\", this._room.id);\n      }\n      for (const operation of operations) {\n        if (operation.type !== \"share_room_key\") {\n          continue;\n        }\n        await log.wrap(\"operation\", (log2) => this._processShareRoomKeyOperation(operation, hsApi, log2));\n      }\n    } finally {\n      this._isFlushingRoomKeyShares = false;\n    }\n  }\n  _writeRoomKeyShareOperation(roomKeyMessage, userIds, txn) {\n    const id = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString();\n    const operation = {\n      id,\n      type: \"share_room_key\",\n      scope: this._room.id,\n      userIds,\n      roomKeyMessage\n    };\n    txn.operations.add(operation);\n    return operation;\n  }\n  async _processShareRoomKeyOperation(operation, hsApi, log) {\n    log.set(\"id\", operation.id);\n    this._historyVisibility = await this._loadHistoryVisibilityIfNeeded(this._historyVisibility);\n    await this._deviceTracker.trackRoom(this._room, this._historyVisibility, log);\n    const devices = await this._deviceTracker.devicesForRoomMembers(this._room.id, operation.userIds, hsApi, log);\n    const messages = await log.wrap(\"olm encrypt\", (log2) => this._olmEncryption.encrypt(\"m.room_key\", operation.roomKeyMessage, devices, hsApi, log2));\n    const missingDevices = devices.filter((d) => !messages.some((m) => m.device === d));\n    await log.wrap(\"send\", (log2) => this._sendMessagesToDevices(ENCRYPTED_TYPE, messages, hsApi, log2));\n    if (missingDevices.length) {\n      await log.wrap(\"missingDevices\", async (log2) => {\n        log2.set(\"devices\", missingDevices.map((d) => d.device_id));\n        const unsentUserIds = operation.userIds.filter((userId) => missingDevices.some((d) => d.user_id === userId));\n        log2.set(\"unsentUserIds\", unsentUserIds);\n        operation.userIds = unsentUserIds;\n        await this._updateOperationsStore((operations) => operations.update(operation));\n        const withheldMessage = this._megolmEncryption.createWithheldMessage(operation.roomKeyMessage, \"m.no_olm\", \"OTKs exhausted\");\n        await this._sendSharedMessageToDevices(\"org.matrix.room_key.withheld\", withheldMessage, missingDevices, hsApi, log2);\n      });\n    }\n    await this._updateOperationsStore((operations) => operations.remove(operation.id));\n  }\n  async _updateOperationsStore(callback) {\n    const writeTxn = await this._storage.readWriteTxn([this._storage.storeNames.operations]);\n    try {\n      callback(writeTxn.operations);\n    } catch (err) {\n      writeTxn.abort();\n      throw err;\n    }\n    await writeTxn.complete();\n  }\n  async _sendSharedMessageToDevices(type, message, devices, hsApi, log) {\n    const devicesByUser = groupBy(devices, (device) => device.user_id);\n    const payload = {\n      messages: Array.from(devicesByUser.entries()).reduce((userMap, [userId, devices2]) => {\n        userMap[userId] = devices2.reduce((deviceMap, device) => {\n          deviceMap[device.device_id] = message;\n          return deviceMap;\n        }, {});\n        return userMap;\n      }, {})\n    };\n    const txnId = makeTxnId();\n    await hsApi.sendToDevice(type, payload, txnId, { log }).response();\n  }\n  async _sendMessagesToDevices(type, messages, hsApi, log) {\n    log.set(\"messages\", messages.length);\n    const payload = formatToDeviceMessagesPayload(messages);\n    const txnId = makeTxnId();\n    await hsApi.sendToDevice(type, payload, txnId, { log }).response();\n  }\n  filterUndecryptedEventEntriesForKeys(entries, keys) {\n    return entries.filter((entry) => {\n      var _a, _b;\n      if (entry.isEncrypted && !entry.isDecrypted) {\n        const { event: event2 } = entry;\n        if (event2) {\n          const senderKey = (_a = event2.content) == null ? void 0 : _a[\"sender_key\"];\n          const sessionId = (_b = event2.content) == null ? void 0 : _b[\"session_id\"];\n          return keys.some((key) => senderKey === key.senderKey && sessionId === key.sessionId);\n        }\n      }\n      return false;\n    });\n  }\n  dispose() {\n    this._disposed = true;\n  }\n}\nclass DecryptionPreparation {\n  constructor(megolmDecryptionPreparation, extraErrors, source, roomEncryption, events) {\n    this._megolmDecryptionPreparation = megolmDecryptionPreparation;\n    this._extraErrors = extraErrors;\n    this._source = source;\n    this._roomEncryption = roomEncryption;\n    this._events = events;\n  }\n  async decrypt() {\n    return new DecryptionChanges(await this._megolmDecryptionPreparation.decrypt(), this._extraErrors, this._source, this._roomEncryption, this._events);\n  }\n  dispose() {\n    this._megolmDecryptionPreparation.dispose();\n  }\n}\nclass DecryptionChanges {\n  constructor(megolmDecryptionChanges, extraErrors, source, roomEncryption, events) {\n    this._megolmDecryptionChanges = megolmDecryptionChanges;\n    this._extraErrors = extraErrors;\n    this._source = source;\n    this._roomEncryption = roomEncryption;\n    this._events = events;\n  }\n  async write(txn, log) {\n    const { results, errors } = await this._megolmDecryptionChanges.write(txn);\n    mergeMap(this._extraErrors, errors);\n    await this._roomEncryption._processDecryptionResults(this._events, results, errors, this._source, txn, log);\n    return new BatchDecryptionResult(results, errors, this._roomEncryption);\n  }\n}\nclass BatchDecryptionResult {\n  constructor(results, errors, roomEncryption) {\n    this.results = results;\n    this.errors = errors;\n    this._roomEncryption = roomEncryption;\n  }\n  applyToEntries(entries, callback = void 0) {\n    for (const entry of entries) {\n      const result = this.results.get(entry.id);\n      if (result) {\n        entry.setDecryptionResult(result);\n        callback == null ? void 0 : callback(entry);\n      } else {\n        const error = this.errors.get(entry.id);\n        if (error) {\n          entry.setDecryptionError(error);\n          callback == null ? void 0 : callback(entry);\n        }\n      }\n    }\n  }\n  verifyKnownSenders(txn) {\n    return this._roomEncryption._verifyDecryptionResults(Array.from(this.results.values()), txn);\n  }\n  get hasUnverifiedSenders() {\n    for (const r of this.results.values()) {\n      if (r.isVerificationUnknown) {\n        return true;\n      }\n    }\n    return false;\n  }\n  fetchAndVerifyRemainingSenders(hsApi, log) {\n    return this._roomEncryption._fetchKeyAndVerifyDecryptionResults(Array.from(this.results.values()), hsApi, log);\n  }\n}\nclass LockMap {\n  constructor() {\n    this._map = /* @__PURE__ */ new Map();\n  }\n  async takeLock(key) {\n    let lock = this._map.get(key);\n    if (lock) {\n      await lock.take();\n    } else {\n      lock = new Lock();\n      lock.tryTake();\n      this._map.set(key, lock);\n    }\n    lock.released().then(() => {\n      Promise.resolve().then(() => {\n        if (!lock.isTaken) {\n          this._map.delete(key);\n        }\n      });\n    });\n    return lock;\n  }\n}\nclass DecryptionError extends Error {\n  constructor(msg, reason) {\n    super(msg);\n    this.reason = reason;\n  }\n}\nclass SecretStorage {\n  constructor({ key, platform, storage }) {\n    this._key = key;\n    this._platform = platform;\n    this._storage = storage;\n  }\n  async hasValidKeyForAnyAccountData() {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.accountData\n    ]);\n    const allAccountData = await txn.accountData.getAll();\n    for (const accountData of allAccountData) {\n      try {\n        const secret = await this._decryptAccountData(accountData);\n        return true;\n      } catch (err) {\n        if (err instanceof DecryptionError && err.reason !== 0) {\n          throw err;\n        } else {\n          continue;\n        }\n      }\n    }\n    return false;\n  }\n  async readSecret(name) {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.accountData\n    ]);\n    const accountData = await txn.accountData.get(name);\n    if (!accountData) {\n      return;\n    }\n    return await this._decryptAccountData(accountData);\n  }\n  async _decryptAccountData(accountData) {\n    var _a, _b;\n    const encryptedData = (_b = (_a = accountData == null ? void 0 : accountData.content) == null ? void 0 : _a.encrypted) == null ? void 0 : _b[this._key.id];\n    if (!encryptedData) {\n      throw new DecryptionError(`Secret ${accountData.type} is not encrypted for key ${this._key.id}`, 0);\n    }\n    if (this._key.algorithm === \"m.secret_storage.v1.aes-hmac-sha2\") {\n      return await this._decryptAESSecret(accountData.type, encryptedData);\n    } else {\n      throw new DecryptionError(`Unsupported algorithm for key ${this._key.id}: ${this._key.algorithm}`, 2);\n    }\n  }\n  async _decryptAESSecret(type, encryptedData) {\n    const { base64: base642, utf8 } = this._platform.encoding;\n    const hkdfKey = await this._platform.crypto.derive.hkdf(this._key.binaryKey, new Uint8Array(8).buffer, utf8.encode(type), \"SHA-256\", 512);\n    const aesKey = hkdfKey.slice(0, 32);\n    const hmacKey = hkdfKey.slice(32);\n    const ciphertextBytes = base642.decode(encryptedData.ciphertext);\n    const isVerified = await this._platform.crypto.hmac.verify(hmacKey, base642.decode(encryptedData.mac), ciphertextBytes, \"SHA-256\");\n    if (!isVerified) {\n      throw new DecryptionError(\"Bad MAC\", 1);\n    }\n    const plaintextBytes = await this._platform.crypto.aes.decryptCTR({\n      key: aesKey,\n      iv: base642.decode(encryptedData.iv),\n      data: ciphertextBytes\n    });\n    return utf8.decode(plaintextBytes);\n  }\n}\nfunction recursivelyAssign(target, source, ignoreNullish = false) {\n  for (const [sourceKey, sourceValue] of Object.entries(source)) {\n    if (target[sourceKey] instanceof Object && sourceValue) {\n      recursivelyAssign(target[sourceKey], sourceValue);\n      continue;\n    }\n    if (sourceValue !== null && sourceValue !== void 0 || !ignoreNullish) {\n      target[sourceKey] = sourceValue;\n      continue;\n    }\n  }\n  return target;\n}\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar TrackKind = /* @__PURE__ */ ((TrackKind2) => {\n  TrackKind2[\"Video\"] = \"video\";\n  TrackKind2[\"Audio\"] = \"audio\";\n  return TrackKind2;\n})(TrackKind || {});\nfunction getStreamAudioTrack(stream) {\n  return stream == null ? void 0 : stream.getAudioTracks()[0];\n}\nfunction getStreamVideoTrack(stream) {\n  return stream == null ? void 0 : stream.getVideoTracks()[0];\n}\nfunction mute(localMedia, localMuteSettings, log) {\n  return log.wrap(\"mute\", (log2) => {\n    log2.set(\"cameraMuted\", localMuteSettings.camera);\n    log2.set(\"microphoneMuted\", localMuteSettings.microphone);\n    const userMediaAudio = getStreamAudioTrack(localMedia.userMedia);\n    if (userMediaAudio) {\n      const enabled = !localMuteSettings.microphone;\n      log2.set(\"microphone enabled\", enabled);\n      userMediaAudio.enabled = enabled;\n    }\n    const userMediaVideo = getStreamVideoTrack(localMedia.userMedia);\n    if (userMediaVideo) {\n      const enabled = !localMuteSettings.camera;\n      log2.set(\"camera enabled\", enabled);\n      userMediaVideo.enabled = enabled;\n    }\n  });\n}\nclass MuteSettings {\n  constructor(isMicrophoneMuted = false, isCameraMuted = false, hasMicrophoneTrack = false, hasCameraTrack = false) {\n    this.isMicrophoneMuted = isMicrophoneMuted;\n    this.isCameraMuted = isCameraMuted;\n    this.hasMicrophoneTrack = hasMicrophoneTrack;\n    this.hasCameraTrack = hasCameraTrack;\n  }\n  updateTrackInfo(userMedia) {\n    this.hasMicrophoneTrack = !!getStreamAudioTrack(userMedia);\n    this.hasCameraTrack = !!getStreamVideoTrack(userMedia);\n  }\n  get microphone() {\n    return !this.hasMicrophoneTrack || this.isMicrophoneMuted;\n  }\n  get camera() {\n    return !this.hasCameraTrack || this.isCameraMuted;\n  }\n  toggleCamera() {\n    return new MuteSettings(this.microphone, !this.camera, this.hasMicrophoneTrack, this.hasCameraTrack);\n  }\n  toggleMicrophone() {\n    return new MuteSettings(!this.microphone, this.camera, this.hasMicrophoneTrack, this.hasCameraTrack);\n  }\n  equals(other) {\n    return this.microphone === other.microphone && this.camera === other.camera;\n  }\n}\nconst CALL_LOG_TYPE = \"call\";\nconst CALL_MEMBER_VALIDITY_PERIOD_MS = 3600 * 1e3;\nvar IncomingMessageAction = /* @__PURE__ */ ((IncomingMessageAction2) => {\n  IncomingMessageAction2[IncomingMessageAction2[\"InviteGlare\"] = 0] = \"InviteGlare\";\n  IncomingMessageAction2[IncomingMessageAction2[\"Handle\"] = 1] = \"Handle\";\n  IncomingMessageAction2[IncomingMessageAction2[\"Ignore\"] = 2] = \"Ignore\";\n  return IncomingMessageAction2;\n})(IncomingMessageAction || {});\nclass RemoteMedia {\n  constructor(userMedia, screenShare) {\n    this.userMedia = userMedia;\n    this.screenShare = screenShare;\n  }\n}\nclass PeerCall {\n  constructor(callId, options, logItem) {\n    this.callId = callId;\n    this.options = options;\n    this.logItem = logItem;\n    this._state = CallState.Fledgling;\n    this.candidateSendQueue = [];\n    this.remoteCandidateBuffer = /* @__PURE__ */ new Map();\n    this.disposables = new Disposables();\n    this.statePromiseMap = /* @__PURE__ */ new Map();\n    this._remoteTrackToStreamId = /* @__PURE__ */ new Map();\n    this._remoteStreams = /* @__PURE__ */ new Map();\n    this.makingOffer = false;\n    this.ignoreOffer = false;\n    this.sentEndOfCandidates = false;\n    this._remoteMuteSettings = new MuteSettings();\n    this.onIceConnectionStateChange = async (state, log) => {\n      var _a, _b;\n      if (this._state === CallState.Ended) {\n        return;\n      }\n      let logStats = false;\n      if (state == \"connected\") {\n        (_a = this.iceDisconnectedTimeout) == null ? void 0 : _a.abort();\n        this.iceDisconnectedTimeout = void 0;\n        this.setState(CallState.Connected, log);\n      } else if (state == \"failed\") {\n        logStats = true;\n        (_b = this.iceDisconnectedTimeout) == null ? void 0 : _b.abort();\n        this.iceDisconnectedTimeout = void 0;\n        await this._hangup(CallErrorCode.IceFailed, log);\n      } else if (state == \"disconnected\") {\n        logStats = true;\n        this.iceDisconnectedTimeout = this.options.createTimeout(30 * 1e3);\n        try {\n          await this.iceDisconnectedTimeout.elapsed();\n          await this._hangup(CallErrorCode.IceFailed, log);\n        } catch (e) {\n          if (!(e instanceof AbortError)) {\n            throw e;\n          }\n        }\n      }\n      if (logStats) {\n        const stats = await this.peerConnection.getStats();\n        const statsObj = {};\n        stats.forEach((value, key) => {\n          statsObj[key] = value;\n        });\n        log.set(\"peerConnectionStats\", statsObj);\n      }\n    };\n    logItem.log({ l: \"create PeerCall\", id: callId });\n    this._remoteMedia = new RemoteMedia();\n    this.peerConnection = options.webRTC.createPeerConnection(this.options.forceTURN, [this.options.turnServer.get()], 0);\n    this.disposables.track(this.options.turnServer.subscribe((turnServer) => {\n      this.logItem.log({ l: \"updating turn server\", turnServer });\n      this.peerConnection.setConfiguration({ iceServers: [turnServer] });\n    }));\n    const listen = (type, listener, options2) => {\n      const newListener = (e) => {\n        this.options.errorBoundary.try(() => listener(e));\n      };\n      this.peerConnection.addEventListener(type, newListener);\n      const dispose = () => {\n        this.peerConnection.removeEventListener(type, newListener);\n      };\n      this.disposables.track(dispose);\n    };\n    listen(\"iceconnectionstatechange\", async () => {\n      const state = this.peerConnection.iceConnectionState;\n      await logItem.wrap({ l: \"onIceConnectionStateChange\", status: state }, async (log) => {\n        await this.onIceConnectionStateChange(state, log);\n      });\n    });\n    listen(\"icecandidate\", async (event2) => {\n      await logItem.wrap(\"onLocalIceCandidate\", async (log) => {\n        if (event2.candidate) {\n          await this.handleLocalIceCandidate(event2.candidate, log);\n        }\n      });\n    });\n    listen(\"icegatheringstatechange\", async () => {\n      const state = this.peerConnection.iceGatheringState;\n      await logItem.wrap({ l: \"onIceGatheringStateChange\", status: state }, async (log) => {\n        await this.handleIceGatheringState(state, log);\n      });\n    });\n    listen(\"track\", (event2) => {\n      logItem.wrap(\"onRemoteTrack\", (log) => {\n        this.onRemoteTrack(event2.track, event2.streams, log);\n      });\n    });\n    listen(\"datachannel\", (event2) => {\n      logItem.wrap(\"onRemoteDataChannel\", (log) => {\n        this._dataChannel = event2.channel;\n        this.options.emitUpdate(this, void 0, log);\n      });\n    });\n    listen(\"negotiationneeded\", () => {\n      var _a, _b;\n      const signalingState = this.peerConnection.signalingState;\n      const promiseCreator = () => {\n        return logItem.wrap({ l: \"onNegotiationNeeded\", signalingState }, (log) => {\n          return this.handleNegotiation(log);\n        });\n      };\n      this.responsePromiseChain = (_b = (_a = this.responsePromiseChain) == null ? void 0 : _a.then(promiseCreator)) != null ? _b : promiseCreator();\n      this.responsePromiseChain.catch((e) => this.options.errorBoundary.reportError(e));\n    });\n  }\n  get dataChannel() {\n    return this._dataChannel;\n  }\n  get state() {\n    return this._state;\n  }\n  get hangupReason() {\n    return this._hangupReason;\n  }\n  get remoteMedia() {\n    return this._remoteMedia;\n  }\n  get remoteMuteSettings() {\n    return this._remoteMuteSettings;\n  }\n  call(localMedia, localMuteSettings, log) {\n    return log.wrap(\"call\", async (log2) => {\n      var _a;\n      if (this._state !== CallState.Fledgling) {\n        return;\n      }\n      log2.set(\"signalingState\", this.peerConnection.signalingState);\n      this.direction = CallDirection.Outbound;\n      this.setState(CallState.CreateOffer, log2);\n      this.localMuteSettings = localMuteSettings;\n      await this.updateLocalMedia(localMedia, log2);\n      if ((_a = this.localMedia) == null ? void 0 : _a.dataChannelOptions) {\n        this._dataChannel = this.peerConnection.createDataChannel(\"channel\", this.localMedia.dataChannelOptions);\n      }\n      await this.waitForState([CallState.InviteSent, CallState.CreateAnswer]);\n    });\n  }\n  answer(localMedia, localMuteSettings, log) {\n    return log.wrap(\"answer\", async (log2) => {\n      if (this._state !== CallState.Ringing) {\n        return;\n      }\n      this.setState(CallState.CreateAnswer, log2);\n      this.localMuteSettings = localMuteSettings;\n      await this.updateLocalMedia(localMedia, log2);\n      let myAnswer;\n      try {\n        myAnswer = await this.peerConnection.createAnswer();\n      } catch (err) {\n        await log2.wrap(`Failed to create answer`, (log3) => {\n          log3.catch(err);\n          this.terminate(CallParty.Local, CallErrorCode.CreateAnswer, log3);\n        });\n        return;\n      }\n      try {\n        await this.peerConnection.setLocalDescription(myAnswer);\n        this.setState(CallState.Connecting, log2);\n      } catch (err) {\n        await log2.wrap(`Error setting local description!`, (log3) => {\n          log3.catch(err);\n          this.terminate(CallParty.Local, CallErrorCode.SetLocalDescription, log3);\n        });\n        return;\n      }\n      try {\n        await this.delay(200);\n      } catch (err) {\n        return;\n      }\n      await this.sendAnswer(log2);\n    });\n  }\n  setMedia(localMedia, log) {\n    return log.wrap(\"setMedia\", async (log2) => {\n      log2.set(\"userMedia_audio\", !!getStreamAudioTrack(localMedia.userMedia));\n      log2.set(\"userMedia_video\", !!getStreamVideoTrack(localMedia.userMedia));\n      log2.set(\"screenShare_video\", !!getStreamVideoTrack(localMedia.screenShare));\n      log2.set(\"datachannel\", !!localMedia.dataChannelOptions);\n      await this.updateLocalMedia(localMedia, log2);\n      const content = {\n        call_id: this.callId,\n        version: 1,\n        [SDPStreamMetadataKey]: this.getSDPMetadata()\n      };\n      await this.sendSignallingMessage({ type: EventType.SDPStreamMetadataChangedPrefix, content }, log2);\n    });\n  }\n  setMuted(localMuteSettings, log) {\n    return log.wrap(\"setMuted\", async (log2) => {\n      this.localMuteSettings = localMuteSettings;\n      log2.set(\"cameraMuted\", localMuteSettings.camera);\n      log2.set(\"microphoneMuted\", localMuteSettings.microphone);\n      if (this.localMedia) {\n        mute(this.localMedia, localMuteSettings, log2);\n        const content = {\n          call_id: this.callId,\n          version: 1,\n          [SDPStreamMetadataKey]: this.getSDPMetadata()\n        };\n        await this.sendSignallingMessage({ type: EventType.SDPStreamMetadataChangedPrefix, content }, log2);\n      }\n    });\n  }\n  hangup(errorCode, log) {\n    return log.wrap(\"hangup\", (log2) => {\n      return this._hangup(errorCode, log2);\n    });\n  }\n  async _hangup(errorCode, log) {\n    if (this._state === CallState.Ended || this._state === CallState.Ending) {\n      return;\n    }\n    this.setState(CallState.Ending, log);\n    await this.sendHangupWithCallId(this.callId, errorCode, log);\n    this.terminate(CallParty.Local, errorCode, log);\n  }\n  getMessageAction(message) {\n    const callIdMatches = this.callId === message.content.call_id;\n    if (message.type === EventType.Invite && !callIdMatches) {\n      return 0;\n    }\n    if (callIdMatches) {\n      return 1;\n    } else {\n      return 2;\n    }\n  }\n  handleIncomingSignallingMessage(message, partyId, log) {\n    let logItem;\n    log.wrap({\n      l: \"receive signalling message\",\n      type: message.type,\n      callId: message.content.call_id,\n      payload: message.content\n    }, async (log2) => {\n      var _a;\n      logItem = log2;\n      if (this.getMessageAction(message) !== 1) {\n        log2.set(\"wrongCallId\", true);\n        return;\n      }\n      switch (message.type) {\n        case EventType.Invite:\n          await this.handleFirstInvite(message.content, partyId, log2);\n          break;\n        case EventType.Answer:\n          await this.handleAnswer(message.content, partyId, log2);\n          break;\n        case EventType.Negotiate:\n          await this.onNegotiateReceived(message.content, log2);\n          break;\n        case EventType.Candidates:\n          await this.handleRemoteIceCandidates(message.content, partyId, log2);\n          break;\n        case EventType.SDPStreamMetadataChanged:\n        case EventType.SDPStreamMetadataChangedPrefix:\n          this.updateRemoteSDPStreamMetadata(message.content[SDPStreamMetadataKey], log2);\n          break;\n        case EventType.Hangup:\n          log2.set(\"reason\", message.content.reason);\n          this.terminate(CallParty.Remote, (_a = message.content.reason) != null ? _a : CallErrorCode.UserHangup, log2);\n          break;\n        default:\n          log2.log(`Unknown event type for call: ${message.type}`);\n          break;\n      }\n    });\n    return logItem;\n  }\n  sendHangupWithCallId(callId, reason, log) {\n    const content = {\n      call_id: callId,\n      version: 1\n    };\n    if (reason) {\n      content[\"reason\"] = reason;\n    }\n    return this.sendSignallingMessage({\n      type: EventType.Hangup,\n      content\n    }, log);\n  }\n  async handleNegotiation(log) {\n    this.makingOffer = true;\n    try {\n      try {\n        await this.peerConnection.setLocalDescription();\n      } catch (err) {\n        log.log(`Error setting local description!`).catch(err);\n        this.terminate(CallParty.Local, CallErrorCode.SetLocalDescription, log);\n        return;\n      }\n      if (this.peerConnection.iceGatheringState === \"gathering\") {\n        try {\n          await this.delay(200);\n        } catch (err) {\n          return;\n        }\n      }\n      if (this._state === CallState.Ended) {\n        return;\n      }\n      const offer = this.peerConnection.localDescription;\n      log.set(\"includedCandidates\", this.candidateSendQueue.length);\n      this.candidateSendQueue = [];\n      if (this._state === CallState.CreateOffer) {\n        const content = {\n          call_id: this.callId,\n          offer,\n          [SDPStreamMetadataKey]: this.getSDPMetadata(),\n          version: 1,\n          lifetime: CALL_TIMEOUT_MS\n        };\n        await this.sendSignallingMessage({ type: EventType.Invite, content }, log);\n        this.setState(CallState.InviteSent, log);\n      } else if (this._state === CallState.Connected || this._state === CallState.Connecting) {\n        const content = {\n          call_id: this.callId,\n          description: offer,\n          [SDPStreamMetadataKey]: this.getSDPMetadata(),\n          version: 1,\n          lifetime: CALL_TIMEOUT_MS\n        };\n        await this.sendSignallingMessage({ type: EventType.Negotiate, content }, log);\n      }\n    } finally {\n      this.makingOffer = false;\n    }\n    this.sendCandidateQueue(log);\n    if (this._state === CallState.InviteSent) {\n      const timeoutLog = this.logItem.child(\"invite timeout\");\n      log.refDetached(timeoutLog);\n      await timeoutLog.run(async (log2) => {\n        try {\n          await this.delay(CALL_TIMEOUT_MS);\n        } catch (err) {\n          return;\n        }\n        if (this._state === CallState.InviteSent) {\n          await this._hangup(CallErrorCode.InviteTimeout, log2);\n        }\n      });\n    }\n  }\n  handleInviteGlare(message, partyId, log) {\n    if (message.type !== EventType.Invite) {\n      return { shouldReplace: false };\n    }\n    const { content } = message;\n    const newCallId = content.call_id;\n    const shouldReplace = this.callId > newCallId;\n    let logItem;\n    log.wrap(\"handling call glare\", async (log2) => {\n      logItem = log2;\n      if (shouldReplace) {\n        log2.log(\"Glare detected: answering incoming call \" + newCallId + \" and canceling outgoing call \");\n        if (this._state !== CallState.Fledgling && this._state !== CallState.CreateOffer) {\n          await this.sendHangupWithCallId(this.callId, CallErrorCode.Replaced, log2);\n        }\n        this.close(CallErrorCode.Replaced, log2);\n        this.dispose();\n      } else {\n        log2.log(\"Glare detected: rejecting incoming call \" + newCallId + \" and keeping outgoing call \");\n        await this.sendHangupWithCallId(newCallId, CallErrorCode.Replaced, log2);\n      }\n    });\n    return { shouldReplace, log: logItem };\n  }\n  handleHangupReceived(content, log) {\n    this.terminate(CallParty.Remote, content.reason || CallErrorCode.UserHangup, log);\n  }\n  async handleFirstInvite(content, partyId, log) {\n    if (this._state !== CallState.Fledgling || this.opponentPartyId !== void 0) {\n      return;\n    }\n    await this.handleInvite(content, partyId, log);\n  }\n  async handleInvite(content, partyId, log) {\n    var _a;\n    this.opponentPartyId = partyId;\n    this.direction = CallDirection.Inbound;\n    const sdpStreamMetadata = content[SDPStreamMetadataKey];\n    if (sdpStreamMetadata) {\n      this.updateRemoteSDPStreamMetadata(sdpStreamMetadata, log);\n    } else {\n      log.log(`Call did not get any SDPStreamMetadata! Can not send/receive multiple streams`);\n    }\n    try {\n      await this.peerConnection.setRemoteDescription(content.offer);\n      await this.addBufferedIceCandidates(log);\n    } catch (e) {\n      await log.wrap(`Call failed to set remote description`, async (log2) => {\n        log2.catch(e);\n        return this.terminate(CallParty.Local, CallErrorCode.SetRemoteDescription, log2);\n      });\n      return;\n    }\n    if (this.peerConnection.getReceivers().length === 0) {\n      await log.wrap(`Call no remote stream or no tracks after setting remote description!`, async (log2) => {\n        return this.terminate(CallParty.Local, CallErrorCode.SetRemoteDescription, log2);\n      });\n      return;\n    }\n    this.setState(CallState.Ringing, log);\n    try {\n      await this.delay((_a = content.lifetime) != null ? _a : CALL_TIMEOUT_MS);\n    } catch (err) {\n      return;\n    }\n    if (this._state === CallState.Ringing) {\n      log.log(`Invite has expired. Hanging up.`);\n      this.hangupParty = CallParty.Remote;\n      this.setState(CallState.Ended, log);\n      if (this.peerConnection.signalingState != \"closed\") {\n        this.peerConnection.close();\n      }\n    }\n  }\n  async handleAnswer(content, partyId, log) {\n    if (this._state === CallState.Ended) {\n      log.log(`Ignoring answer because call has ended`);\n      return;\n    }\n    if (this.opponentPartyId !== void 0) {\n      log.log(`Ignoring answer: we already have an answer/reject from ${this.opponentPartyId}`);\n      return;\n    }\n    this.opponentPartyId = partyId;\n    await this.addBufferedIceCandidates(log);\n    this.setState(CallState.Connecting, log);\n    const sdpStreamMetadata = content[SDPStreamMetadataKey];\n    if (sdpStreamMetadata) {\n      this.updateRemoteSDPStreamMetadata(sdpStreamMetadata, log);\n    } else {\n      log.log(`Did not get any SDPStreamMetadata! Can not send/receive multiple streams`);\n    }\n    try {\n      await this.peerConnection.setRemoteDescription(content.answer);\n    } catch (e) {\n      await log.wrap(`Failed to set remote description`, (log2) => {\n        log2.catch(e);\n        this.terminate(CallParty.Local, CallErrorCode.SetRemoteDescription, log2);\n      });\n      return;\n    }\n  }\n  async handleIceGatheringState(state, log) {\n    if (state === \"complete\" && !this.sentEndOfCandidates) {\n      const c = {\n        candidate: \"\"\n      };\n      await this.queueCandidate(c, log);\n      this.sentEndOfCandidates = true;\n    }\n  }\n  async handleLocalIceCandidate(candidate, log) {\n    log.set(\"sdpMid\", candidate.sdpMid);\n    log.set(\"candidate\", candidate.candidate);\n    if (this._state === CallState.Ended) {\n      return;\n    }\n    if (candidate.candidate !== \"\" || !this.sentEndOfCandidates) {\n      await this.queueCandidate(candidate, log);\n      if (candidate.candidate === \"\") {\n        this.sentEndOfCandidates = true;\n      }\n    }\n  }\n  async handleRemoteIceCandidates(content, partyId, log) {\n    if (this.state === CallState.Ended) {\n      log.log(\"Ignoring remote ICE candidate because call has ended\");\n      return;\n    }\n    const candidates = content.candidates;\n    if (!candidates) {\n      log.log(`Ignoring candidates event with no candidates!`);\n      return;\n    }\n    const fromPartyId = content.version === 0 ? null : partyId || null;\n    if (this.opponentPartyId === void 0) {\n      log.log(`Buffering ${candidates.length} candidates until we pick an opponent`);\n      const bufferedCandidates = this.remoteCandidateBuffer.get(fromPartyId) || [];\n      bufferedCandidates.push(...candidates);\n      this.remoteCandidateBuffer.set(fromPartyId, bufferedCandidates);\n      return;\n    }\n    if (this.opponentPartyId !== partyId) {\n      log.log(`Ignoring candidates from party ID ${partyId}: we have chosen party ID ${this.opponentPartyId}`);\n      return;\n    }\n    await this.addIceCandidates(candidates, log);\n  }\n  async onNegotiateReceived(content, log) {\n    const description = content.description;\n    if (!description || !description.sdp || !description.type) {\n      log.log(`Ignoring invalid m.call.negotiate event`);\n      return;\n    }\n    const polite = this.direction === CallDirection.Inbound;\n    const offerCollision = description.type === \"offer\" && (this.makingOffer || this.peerConnection.signalingState !== \"stable\");\n    this.ignoreOffer = !polite && offerCollision;\n    if (this.ignoreOffer) {\n      log.log(`Ignoring colliding negotiate event because we're impolite`);\n      return;\n    }\n    const sdpStreamMetadata = content[SDPStreamMetadataKey];\n    if (sdpStreamMetadata) {\n      this.updateRemoteSDPStreamMetadata(sdpStreamMetadata, log);\n    } else {\n      log.log(`Received negotiation event without SDPStreamMetadata!`);\n    }\n    try {\n      await this.peerConnection.setRemoteDescription(description);\n      if (description.type === \"offer\") {\n        await this.peerConnection.setLocalDescription();\n        const content2 = {\n          call_id: this.callId,\n          description: this.peerConnection.localDescription,\n          [SDPStreamMetadataKey]: this.getSDPMetadata(),\n          version: 1,\n          lifetime: CALL_TIMEOUT_MS\n        };\n        await this.sendSignallingMessage({ type: EventType.Negotiate, content: content2 }, log);\n      }\n    } catch (err) {\n      log.log(`Failed to complete negotiation`).catch(err);\n    }\n  }\n  async sendAnswer(log) {\n    const localDescription = this.peerConnection.localDescription;\n    const answerContent = {\n      call_id: this.callId,\n      version: 1,\n      answer: {\n        sdp: localDescription.sdp,\n        type: localDescription.type\n      },\n      [SDPStreamMetadataKey]: this.getSDPMetadata()\n    };\n    log.log(`Discarding ${this.candidateSendQueue.length} candidates that will be sent in answer`);\n    this.candidateSendQueue = [];\n    try {\n      await this.sendSignallingMessage({ type: EventType.Answer, content: answerContent }, log);\n    } catch (error) {\n      this.terminate(CallParty.Local, CallErrorCode.SendAnswer, log);\n      throw error;\n    }\n    this.sendCandidateQueue(log);\n  }\n  async queueCandidate(content, log) {\n    var _a;\n    this.candidateSendQueue.push(content);\n    if (this._state === CallState.Ringing)\n      return;\n    this.flushCandidatesLog = (_a = this.flushCandidatesLog) != null ? _a : this.logItem.child(\"flush candidate queue\");\n    log.refDetached(this.flushCandidatesLog);\n    const { flushCandidatesLog } = this;\n    try {\n      await this.delay(this.direction === CallDirection.Inbound ? 500 : 2e3);\n    } catch (err) {\n      return;\n    }\n    this.sendCandidateQueue(flushCandidatesLog);\n    this.flushCandidatesLog = void 0;\n  }\n  async sendCandidateQueue(log) {\n    if (this.candidateSendQueue.length === 0 || this._state === CallState.Ended) {\n      return;\n    }\n    const candidates = this.candidateSendQueue;\n    this.candidateSendQueue = [];\n    return log.wrap({ l: \"send candidates\", size: candidates.length }, async (log2) => {\n      try {\n        await this.sendSignallingMessage({\n          type: EventType.Candidates,\n          content: {\n            call_id: this.callId,\n            version: 1,\n            candidates\n          }\n        }, log2);\n        await this.sendCandidateQueue(log2);\n      } catch (error) {\n        log2.catch(error);\n        this.terminate(CallParty.Local, CallErrorCode.SignallingFailed, log2);\n      }\n    });\n  }\n  updateRemoteSDPStreamMetadata(metadata, log) {\n    this.remoteSDPStreamMetadata = recursivelyAssign(this.remoteSDPStreamMetadata || {}, metadata, true);\n    this.updateRemoteMedia(log);\n  }\n  async addBufferedIceCandidates(log) {\n    if (this.remoteCandidateBuffer && this.opponentPartyId) {\n      const bufferedCandidates = this.remoteCandidateBuffer.get(this.opponentPartyId);\n      if (bufferedCandidates) {\n        log.log(`Adding ${bufferedCandidates.length} buffered candidates for opponent ${this.opponentPartyId}`);\n        await this.addIceCandidates(bufferedCandidates, log);\n      }\n      this.remoteCandidateBuffer = void 0;\n    }\n  }\n  async addIceCandidates(candidates, log) {\n    for (const candidate of candidates) {\n      let logItem;\n      if ((candidate.sdpMid === null || candidate.sdpMid === void 0) && (candidate.sdpMLineIndex === null || candidate.sdpMLineIndex === void 0)) {\n        logItem = log.log(`Got remote end-of-ICE candidates`);\n      } else {\n        logItem = log.log(`Adding remote ICE ${candidate.sdpMid} candidate: ${candidate.candidate}`);\n      }\n      try {\n        await this.peerConnection.addIceCandidate(candidate);\n      } catch (err) {\n        if (!this.ignoreOffer) {\n          logItem.catch(err);\n        }\n      }\n    }\n  }\n  setState(state, log) {\n    if (state !== this._state) {\n      log.log({ l: \"change state\", status: state, oldState: this._state });\n      this._state;\n      this._state = state;\n      let deferred = this.statePromiseMap.get(state);\n      if (deferred) {\n        deferred.resolve();\n        this.statePromiseMap.delete(state);\n      }\n      this.options.emitUpdate(this, void 0, log);\n    }\n  }\n  waitForState(states) {\n    return Promise.race(states.map((state) => {\n      let deferred = this.statePromiseMap.get(state);\n      if (!deferred) {\n        let resolve;\n        const promise = new Promise((r) => {\n          resolve = r;\n        });\n        deferred = { resolve, promise };\n        this.statePromiseMap.set(state, deferred);\n      }\n      return deferred.promise;\n    }));\n  }\n  terminate(hangupParty, hangupReason, log) {\n    if (this._state === CallState.Ended) {\n      return;\n    }\n    this.hangupParty = hangupParty;\n    this._hangupReason = hangupReason;\n    this.setState(CallState.Ended, log);\n    this.localMedia = void 0;\n    if (this.peerConnection && this.peerConnection.signalingState !== \"closed\") {\n      this.peerConnection.close();\n    }\n  }\n  getSDPMetadata() {\n    var _a, _b, _c2, _d2, _e, _f;\n    const metadata = {};\n    if ((_a = this.localMedia) == null ? void 0 : _a.userMedia) {\n      const streamId = this.localMedia.userMedia.id;\n      metadata[streamId] = {\n        purpose: SDPStreamMetadataPurpose.Usermedia,\n        audio_muted: (_c2 = (_b = this.localMuteSettings) == null ? void 0 : _b.microphone) != null ? _c2 : false,\n        video_muted: (_e = (_d2 = this.localMuteSettings) == null ? void 0 : _d2.camera) != null ? _e : false\n      };\n    }\n    if ((_f = this.localMedia) == null ? void 0 : _f.screenShare) {\n      const streamId = this.localMedia.screenShare.id;\n      metadata[streamId] = {\n        purpose: SDPStreamMetadataPurpose.Screenshare\n      };\n    }\n    return metadata;\n  }\n  findReceiverForStream(kind, streamId) {\n    return this.peerConnection.getReceivers().find((r) => {\n      return r.track.kind === kind && this._remoteTrackToStreamId.get(r.track.id) === streamId;\n    });\n  }\n  findTransceiverForTrack(track) {\n    return this.peerConnection.getTransceivers().find((t) => {\n      var _a;\n      return ((_a = t.sender.track) == null ? void 0 : _a.id) === track.id;\n    });\n  }\n  onRemoteTrack(track, streams, log) {\n    log.set(\"kind\", track.kind);\n    log.set(\"id\", track.id);\n    log.set(\"streams\", streams.map((s) => s.id));\n    if (streams.length === 0) {\n      log.log({ l: `ignoring ${track.kind} streamless track`, id: track.id });\n      return;\n    }\n    const stream = streams[0];\n    this._remoteTrackToStreamId.set(track.id, stream.id);\n    if (!this._remoteStreams.has(stream.id)) {\n      const listener = (event2) => {\n        this.logItem.wrap({ l: \"removetrack\", id: event2.track.id }, (log2) => {\n          const streamId = this._remoteTrackToStreamId.get(event2.track.id);\n          if (streamId) {\n            this._remoteTrackToStreamId.delete(event2.track.id);\n            const streamDetails = this._remoteStreams.get(streamId);\n            if (streamDetails && streamDetails.stream.getTracks().length === 0) {\n              this.disposables.disposeTracked(disposeListener);\n              this._remoteStreams.delete(stream.id);\n              this.updateRemoteMedia(log2);\n            }\n          }\n        });\n      };\n      stream.addEventListener(\"removetrack\", listener);\n      const disposeListener = () => {\n        stream.removeEventListener(\"removetrack\", listener);\n      };\n      this.disposables.track(disposeListener);\n      this._remoteStreams.set(stream.id, {\n        disposeListener,\n        stream\n      });\n    }\n    this.updateRemoteMedia(log);\n  }\n  updateRemoteMedia(log) {\n    log.wrap(\"reevaluating remote media\", (log2) => {\n      var _a, _b;\n      this._remoteMedia.userMedia = void 0;\n      this._remoteMedia.screenShare = void 0;\n      if (this.remoteSDPStreamMetadata) {\n        for (const streamDetails of this._remoteStreams.values()) {\n          const { stream } = streamDetails;\n          const metaData = this.remoteSDPStreamMetadata[stream.id];\n          if (metaData) {\n            if (metaData.purpose === SDPStreamMetadataPurpose.Usermedia) {\n              this._remoteMedia.userMedia = stream;\n              const audioReceiver = this.findReceiverForStream(TrackKind.Audio, stream.id);\n              if (audioReceiver) {\n                audioReceiver.track.enabled = !metaData.audio_muted;\n              }\n              const videoReceiver = this.findReceiverForStream(TrackKind.Video, stream.id);\n              if (videoReceiver) {\n                videoReceiver.track.enabled = !metaData.video_muted;\n              }\n              this._remoteMuteSettings = new MuteSettings((_a = metaData.audio_muted) != null ? _a : false, (_b = metaData.video_muted) != null ? _b : false, !!(audioReceiver == null ? void 0 : audioReceiver.track), !!(videoReceiver == null ? void 0 : videoReceiver.track));\n              log2.log({\n                l: \"setting userMedia\",\n                micMuted: this._remoteMuteSettings.microphone,\n                cameraMuted: this._remoteMuteSettings.camera\n              });\n            } else if (metaData.purpose === SDPStreamMetadataPurpose.Screenshare) {\n              this._remoteMedia.screenShare = stream;\n              log2.log(\"setting screenShare\");\n            }\n          } else {\n            log2.log({ l: \"no metadata yet for stream, ignoring for now\", id: stream.id });\n          }\n        }\n      }\n      this.options.emitUpdate(this, void 0, log2);\n    });\n  }\n  updateLocalMedia(localMedia, logItem) {\n    return logItem.wrap(\"updateLocalMedia\", async (log) => {\n      var _a, _b;\n      const senders = this.peerConnection.getSenders();\n      const applyStream = async (oldStream, stream, streamPurpose) => {\n        const applyTrack = async (oldTrack, newTrack) => {\n          const oldSender = senders.find((s) => s.track === oldTrack);\n          const streamToKeep = oldStream != null ? oldStream : stream;\n          if (streamToKeep !== stream) {\n            if (oldTrack) {\n              streamToKeep.removeTrack(oldTrack);\n              oldTrack.stop();\n            }\n            if (newTrack) {\n              streamToKeep.addTrack(newTrack);\n            }\n          }\n          if (newTrack && oldSender) {\n            try {\n              await log.wrap(`attempting to replace ${streamPurpose} ${newTrack.kind} track`, (log2) => {\n                return oldSender.replaceTrack(newTrack);\n              });\n              return;\n            } catch (err) {\n            }\n          }\n          if (oldSender) {\n            log.wrap(`removing ${streamPurpose} ${oldSender.track.kind} track`, (log2) => {\n              this.peerConnection.removeTrack(oldSender);\n            });\n          }\n          if (newTrack) {\n            log.wrap(`adding ${streamPurpose} ${newTrack.kind} track`, (log2) => {\n              const newSender = this.peerConnection.addTrack(newTrack, streamToKeep);\n              this.options.webRTC.prepareSenderForPurpose(this.peerConnection, newSender, streamPurpose);\n            });\n          }\n        };\n        if (!oldStream && !stream) {\n          return;\n        }\n        await applyTrack(getStreamAudioTrack(oldStream), getStreamAudioTrack(stream));\n        await applyTrack(getStreamVideoTrack(oldStream), getStreamVideoTrack(stream));\n      };\n      await applyStream((_a = this.localMedia) == null ? void 0 : _a.userMedia, localMedia == null ? void 0 : localMedia.userMedia, SDPStreamMetadataPurpose.Usermedia);\n      await applyStream((_b = this.localMedia) == null ? void 0 : _b.screenShare, localMedia == null ? void 0 : localMedia.screenShare, SDPStreamMetadataPurpose.Screenshare);\n      if (!this.localMedia) {\n        this.localMedia = localMedia;\n      }\n    });\n  }\n  async delay(timeoutMs) {\n    const timeout = this.disposables.track(this.options.createTimeout(timeoutMs));\n    try {\n      await timeout.elapsed();\n    } finally {\n      this.disposables.untrack(timeout);\n    }\n  }\n  sendSignallingMessage(message, log) {\n    return log.wrap({ l: \"send\", id: message.type }, async (log2) => {\n      return this.options.sendSignallingMessage(message, log2);\n    });\n  }\n  dispose() {\n    var _a;\n    this.disposables.dispose();\n    (_a = this.iceDisconnectedTimeout) == null ? void 0 : _a.abort();\n    this.peerConnection.close();\n    this.options.emitUpdate = (_, __, log) => {\n      log.log(\"emitting update from PeerCall after disposal\", this.logItem.level.Error);\n    };\n  }\n  close(reason, log) {\n    if (reason === void 0) {\n      reason = CallErrorCode.UserHangup;\n    }\n    this.terminate(CallParty.Local, reason, log);\n  }\n}\nvar CallParty = /* @__PURE__ */ ((CallParty2) => {\n  CallParty2[\"Local\"] = \"local\";\n  CallParty2[\"Remote\"] = \"remote\";\n  return CallParty2;\n})(CallParty || {});\nvar CallState = /* @__PURE__ */ ((CallState2) => {\n  CallState2[\"Fledgling\"] = \"fledgling\";\n  CallState2[\"CreateOffer\"] = \"create_offer\";\n  CallState2[\"InviteSent\"] = \"invite_sent\";\n  CallState2[\"CreateAnswer\"] = \"create_answer\";\n  CallState2[\"Connecting\"] = \"connecting\";\n  CallState2[\"Connected\"] = \"connected\";\n  CallState2[\"Ringing\"] = \"ringing\";\n  CallState2[\"Ending\"] = \"ending\";\n  CallState2[\"Ended\"] = \"ended\";\n  return CallState2;\n})(CallState || {});\nvar CallDirection = /* @__PURE__ */ ((CallDirection2) => {\n  CallDirection2[\"Inbound\"] = \"inbound\";\n  CallDirection2[\"Outbound\"] = \"outbound\";\n  return CallDirection2;\n})(CallDirection || {});\nconst CALL_TIMEOUT_MS = 6e4;\nfunction handlesEventType(eventType) {\n  return eventType === EventType.Invite || eventType === EventType.Candidates || eventType === EventType.Answer || eventType === EventType.Hangup || eventType === EventType.SDPStreamMetadataChanged || eventType === EventType.SDPStreamMetadataChangedPrefix || eventType === EventType.Negotiate;\n}\nclass ErrorBoundary {\n  constructor(errorCallback) {\n    this.errorCallback = errorCallback;\n  }\n  try(callback, errorValue) {\n    try {\n      let result = callback();\n      if (result instanceof Promise) {\n        result = result.catch((err) => {\n          this._error = err;\n          this.reportError(err);\n          return errorValue;\n        });\n      }\n      return result;\n    } catch (err) {\n      this._error = err;\n      this.reportError(err);\n      return errorValue;\n    }\n  }\n  reportError(err) {\n    try {\n      this.errorCallback(err);\n    } catch (err2) {\n      console.error(\"error in ErrorBoundary callback\", err2);\n    }\n  }\n  get error() {\n    return this._error;\n  }\n}\nconst errorCodesWithoutRetry = [\n  CallErrorCode.UserHangup,\n  CallErrorCode.AnsweredElsewhere,\n  CallErrorCode.Replaced,\n  CallErrorCode.UserBusy,\n  CallErrorCode.Transfered,\n  CallErrorCode.NewSession\n];\nclass MemberConnection {\n  constructor(localMedia, localMuteSettings, turnServer, logItem) {\n    this.localMedia = localMedia;\n    this.localMuteSettings = localMuteSettings;\n    this.turnServer = turnServer;\n    this.logItem = logItem;\n    this.retryCount = 0;\n    this.queuedSignallingMessages = [];\n    this.outboundSeqCounter = 0;\n  }\n  get canDequeueNextSignallingMessage() {\n    if (this.queuedSignallingMessages.length === 0) {\n      return false;\n    }\n    const first = this.queuedSignallingMessages[0];\n    const firstSeq = first.content.seq;\n    if (this.lastIgnoredSeqNr !== void 0 && firstSeq === this.lastIgnoredSeqNr + 1) {\n      return true;\n    }\n    if (this.lastProcessedSeqNr === void 0) {\n      return firstSeq === 0;\n    }\n    return firstSeq <= this.lastProcessedSeqNr + 1;\n  }\n  dispose() {\n    var _a;\n    (_a = this.peerCall) == null ? void 0 : _a.dispose();\n    this.localMedia.dispose();\n    this.logItem.finish();\n  }\n}\nclass Member {\n  constructor(member, callDeviceMembership, _deviceIndex, _eventTimestamp, options, updateMemberLog) {\n    this.member = member;\n    this.callDeviceMembership = callDeviceMembership;\n    this._deviceIndex = _deviceIndex;\n    this._eventTimestamp = _eventTimestamp;\n    this.options = options;\n    this.errorBoundary = new ErrorBoundary((err) => {\n      this.emitMemberUpdate(this, \"error\");\n      if (this.connection) {\n        this.connection.logItem.log(\"error at boundary\").catch(err);\n      }\n    });\n    this.emitUpdateFromPeerCall = async (peerCall, params, log) => {\n      const connection = this.connection;\n      if (peerCall.state === CallState.Ringing) {\n        connection.logItem.wrap(\"ringing, answer peercall\", (answerLog) => {\n          log.refDetached(answerLog);\n          return peerCall.answer(connection.localMedia, connection.localMuteSettings, answerLog);\n        });\n      } else if (peerCall.state === CallState.Ended) {\n        const hangupReason = peerCall.hangupReason;\n        peerCall.dispose();\n        connection.peerCall = void 0;\n        if (hangupReason && !errorCodesWithoutRetry.includes(hangupReason)) {\n          connection.retryCount += 1;\n          const { retryCount } = connection;\n          await connection.logItem.wrap({ l: \"retry connection\", retryCount }, async (retryLog) => {\n            log.refDetached(retryLog);\n            if (retryCount <= 3) {\n              await this.callIfNeeded(retryLog);\n            } else {\n              const disconnectLogItem = await this.disconnect(false);\n              if (disconnectLogItem) {\n                retryLog.refDetached(disconnectLogItem);\n              }\n            }\n          });\n        }\n      }\n      this.emitMemberUpdate(this, params);\n    };\n    this.sendSignallingMessage = async (message, log) => {\n      const groupMessage = message;\n      groupMessage.content.seq = this.connection.outboundSeqCounter++;\n      groupMessage.content.conf_id = this.options.confId;\n      groupMessage.content.device_id = this.options.ownDeviceId;\n      groupMessage.content.party_id = this.options.ownDeviceId;\n      groupMessage.content.sender_session_id = this.options.sessionId;\n      groupMessage.content.dest_session_id = this.sessionId;\n      let payload;\n      let type = message.type;\n      const encryptedMessages = await this.options.encryptDeviceMessage(this.member.userId, this.deviceId, groupMessage, log);\n      if (encryptedMessages) {\n        payload = formatToDeviceMessagesPayload(encryptedMessages);\n        type = \"m.room.encrypted\";\n      } else {\n        payload = formatToDeviceMessagesPayload([{ content: groupMessage.content, device: this }]);\n      }\n      log.set(\"payload\", groupMessage.content);\n      const request = this.options.hsApi.sendToDevice(type, payload, makeTxnId(), { log });\n      await request.response();\n    };\n    this.emitMemberUpdate = this.options.emitUpdate;\n    this._renewExpireTimeout(updateMemberLog);\n  }\n  get error() {\n    return this.errorBoundary.error;\n  }\n  get usesFoci() {\n    const activeFoci = this.callDeviceMembership[\"m.foci.active\"];\n    return Array.isArray(activeFoci) && activeFoci.length > 0;\n  }\n  _renewExpireTimeout(log) {\n    var _a;\n    (_a = this.expireTimeout) == null ? void 0 : _a.dispose();\n    this.expireTimeout = void 0;\n    const expiresAt = memberExpiresAt(this.callDeviceMembership);\n    if (typeof expiresAt !== \"number\") {\n      return;\n    }\n    const expiresFromNow = Math.max(0, expiresAt - this.options.clock.now());\n    log == null ? void 0 : log.set(\"expiresIn\", expiresFromNow);\n    this.expireTimeout = this.options.clock.createTimeout(expiresFromNow + 10);\n    this.expireTimeout.elapsed().then(() => {\n      this.emitMemberUpdate(this, \"isExpired\");\n    }, (err) => {\n    });\n  }\n  get logItem() {\n    var _a;\n    return (_a = this.connection) == null ? void 0 : _a.logItem;\n  }\n  get remoteMedia() {\n    var _a, _b;\n    return (_b = (_a = this.connection) == null ? void 0 : _a.peerCall) == null ? void 0 : _b.remoteMedia;\n  }\n  get isExpired() {\n    return !this.isConnected && isMemberExpired(this.callDeviceMembership, this.options.clock.now());\n  }\n  get remoteMuteSettings() {\n    var _a, _b;\n    return (_b = (_a = this.connection) == null ? void 0 : _a.peerCall) == null ? void 0 : _b.remoteMuteSettings;\n  }\n  get isConnected() {\n    var _a, _b;\n    return ((_b = (_a = this.connection) == null ? void 0 : _a.peerCall) == null ? void 0 : _b.state) === CallState.Connected;\n  }\n  get userId() {\n    return this.member.userId;\n  }\n  get deviceId() {\n    return this.callDeviceMembership.device_id;\n  }\n  get user_id() {\n    return this.userId;\n  }\n  get device_id() {\n    return this.deviceId;\n  }\n  get sessionId() {\n    return this.callDeviceMembership.session_id;\n  }\n  get dataChannel() {\n    var _a, _b;\n    return (_b = (_a = this.connection) == null ? void 0 : _a.peerCall) == null ? void 0 : _b.dataChannel;\n  }\n  get deviceIndex() {\n    return this._deviceIndex;\n  }\n  get eventTimestamp() {\n    return this._eventTimestamp;\n  }\n  connect(localMedia, localMuteSettings, turnServer, memberLogItem) {\n    return this.errorBoundary.try(async () => {\n      if (this.connection) {\n        return;\n      }\n      const connection = new MemberConnection(localMedia.clone(), localMuteSettings, turnServer, memberLogItem);\n      this.connection = connection;\n      let connectLogItem;\n      await connection.logItem.wrap(\"connect\", async (log) => {\n        connectLogItem = log;\n        await this.callIfNeeded(log);\n      });\n      return connectLogItem;\n    });\n  }\n  callIfNeeded(log) {\n    return log.wrap(\"callIfNeeded\", async (log2) => {\n      let shouldInitiateCall;\n      if (this.member.userId === this.options.ownUserId) {\n        shouldInitiateCall = this.deviceId > this.options.ownDeviceId;\n      } else {\n        shouldInitiateCall = this.member.userId > this.options.ownUserId;\n      }\n      if (shouldInitiateCall) {\n        const connection = this.connection;\n        connection.peerCall = this._createPeerCall(makeId(\"c\"));\n        await connection.peerCall.call(connection.localMedia, connection.localMuteSettings, log2);\n      } else {\n        log2.set(\"wait_for_invite\", true);\n      }\n    });\n  }\n  disconnect(hangup) {\n    return this.errorBoundary.try(async () => {\n      const { connection } = this;\n      if (!connection) {\n        return;\n      }\n      let disconnectLogItem;\n      await connection.logItem.wrap(\"disconnect\", async (log) => {\n        disconnectLogItem = log;\n        if (hangup && connection.peerCall) {\n          await connection.peerCall.hangup(CallErrorCode.UserHangup, log);\n        }\n      });\n      connection.dispose();\n      this.connection = void 0;\n      return disconnectLogItem;\n    });\n  }\n  updateCallInfo(callDeviceMembership, deviceIndex, eventTimestamp, causeItem) {\n    this.errorBoundary.try(() => {\n      this.callDeviceMembership = callDeviceMembership;\n      this._deviceIndex = deviceIndex;\n      this._eventTimestamp = eventTimestamp;\n      this._renewExpireTimeout(causeItem);\n      if (this.connection) {\n        this.connection.logItem.refDetached(causeItem);\n      }\n    });\n  }\n  updateRoomMember(roomMember) {\n    this.member = roomMember;\n    this.emitMemberUpdate(this);\n  }\n  handleDeviceMessage(message, syncLog) {\n    this.errorBoundary.try(() => {\n      var _a;\n      syncLog.wrap({ l: \"Member.handleDeviceMessage\", type: message.type, seq: (_a = message.content) == null ? void 0 : _a.seq }, (log) => {\n        const { connection } = this;\n        if (connection) {\n          const destSessionId = message.content.dest_session_id;\n          if (destSessionId !== this.options.sessionId) {\n            const logItem = connection.logItem.log({ l: \"ignoring to_device event with wrong session_id\", destSessionId, type: message.type });\n            log.refDetached(logItem);\n            return;\n          }\n          if (connection.peerCall) {\n            const action = connection.peerCall.getMessageAction(message);\n            if (action === IncomingMessageAction.InviteGlare) {\n              const { shouldReplace, log: log2 } = connection.peerCall.handleInviteGlare(message, this.deviceId, connection.logItem);\n              if (log2) {\n                log2.refDetached(log2);\n              }\n              if (shouldReplace) {\n                connection.peerCall.dispose();\n                connection.peerCall = void 0;\n              }\n            }\n          }\n          if (message.type === EventType.Invite && !connection.peerCall) {\n            connection.peerCall = this._createPeerCall(message.content.call_id);\n          }\n          const idx = sortedIndex(connection.queuedSignallingMessages, message, (a, b) => a.content.seq - b.content.seq);\n          connection.queuedSignallingMessages.splice(idx, 0, message);\n          let hasNewMessageBeenDequeued = false;\n          if (connection.peerCall) {\n            hasNewMessageBeenDequeued = this.dequeueSignallingMessages(connection, connection.peerCall, message, log);\n          }\n          if (!hasNewMessageBeenDequeued) {\n            log.refDetached(connection.logItem.log({ l: \"queued message\", type: message.type, seq: message.content.seq, idx }));\n          }\n        } else {\n          syncLog.log({ l: \"member not connected\", userId: this.userId, deviceId: this.deviceId });\n        }\n      });\n    });\n  }\n  dequeueSignallingMessages(connection, peerCall, newMessage, syncLog) {\n    let hasNewMessageBeenDequeued = false;\n    while (connection.canDequeueNextSignallingMessage) {\n      const message = connection.queuedSignallingMessages.shift();\n      const isNewMsg = message === newMessage;\n      hasNewMessageBeenDequeued = hasNewMessageBeenDequeued || isNewMsg;\n      syncLog.wrap(isNewMsg ? \"process message\" : \"dequeue message\", (log) => {\n        var _a;\n        const seq = (_a = message.content) == null ? void 0 : _a.seq;\n        log.set(\"seq\", seq);\n        log.set(\"type\", message.type);\n        const action = peerCall.getMessageAction(message);\n        if (action === IncomingMessageAction.Handle) {\n          const item = peerCall.handleIncomingSignallingMessage(message, this.deviceId, connection.logItem);\n          log.refDetached(item);\n          connection.lastProcessedSeqNr = seq;\n        } else {\n          log.set(\"ignored\", true);\n          connection.lastIgnoredSeqNr = seq;\n        }\n      });\n    }\n    return hasNewMessageBeenDequeued;\n  }\n  async setMedia(localMedia, previousMedia) {\n    return this.errorBoundary.try(async () => {\n      var _a;\n      const { connection } = this;\n      if (connection) {\n        connection.localMedia = localMedia.replaceClone(connection.localMedia, previousMedia);\n        await ((_a = connection.peerCall) == null ? void 0 : _a.setMedia(connection.localMedia, connection.logItem));\n      }\n    });\n  }\n  async setMuted(muteSettings) {\n    return this.errorBoundary.try(async () => {\n      var _a;\n      const { connection } = this;\n      if (connection) {\n        connection.localMuteSettings = muteSettings;\n        await ((_a = connection.peerCall) == null ? void 0 : _a.setMuted(muteSettings, connection.logItem));\n      }\n    });\n  }\n  _createPeerCall(callId) {\n    const connection = this.connection;\n    return new PeerCall(callId, Object.assign({}, this.options, {\n      errorBoundary: this.errorBoundary,\n      emitUpdate: this.emitUpdateFromPeerCall,\n      sendSignallingMessage: this.sendSignallingMessage,\n      turnServer: connection.turnServer\n    }), connection.logItem);\n  }\n  dispose() {\n    var _a, _b;\n    (_a = this.connection) == null ? void 0 : _a.dispose();\n    this.connection = void 0;\n    (_b = this.expireTimeout) == null ? void 0 : _b.dispose();\n    this.expireTimeout = void 0;\n    this.emitMemberUpdate = () => {\n    };\n  }\n}\nfunction memberExpiresAt(callDeviceMembership) {\n  const expiresAt = callDeviceMembership[\"expires_ts\"];\n  if (Number.isSafeInteger(expiresAt)) {\n    return expiresAt;\n  }\n}\nfunction isMemberExpired(callDeviceMembership, now, margin = 0) {\n  const expiresAt = memberExpiresAt(callDeviceMembership);\n  return typeof expiresAt === \"number\" ? expiresAt + margin <= now : true;\n}\nfunction getMemberKey(userId, deviceId) {\n  return JSON.stringify(userId) + `,` + JSON.stringify(deviceId);\n}\nfunction memberKeyIsForUser(key, userId) {\n  return key.startsWith(JSON.stringify(userId) + `,`);\n}\nfunction getDeviceFromMemberKey(key) {\n  return JSON.parse(`[${key}]`)[1];\n}\nclass JoinedData {\n  constructor(logItem, membersLogItem, localMedia, localPreviewMedia, localMuteSettings, turnServer) {\n    this.logItem = logItem;\n    this.membersLogItem = membersLogItem;\n    this.localMedia = localMedia;\n    this.localPreviewMedia = localPreviewMedia;\n    this.localMuteSettings = localMuteSettings;\n    this.turnServer = turnServer;\n  }\n  dispose() {\n    var _a;\n    this.localMedia.dispose();\n    this.localPreviewMedia.dispose();\n    this.logItem.finish();\n    (_a = this.renewMembershipTimeout) == null ? void 0 : _a.dispose();\n  }\n}\nclass GroupCall extends EventEmitter {\n  constructor(id, isLoadedFromStorage, newCall, startTime, callContent, roomId, options) {\n    super();\n    this.id = id;\n    this.isLoadedFromStorage = isLoadedFromStorage;\n    this.startTime = startTime;\n    this.callContent = callContent;\n    this.roomId = roomId;\n    this.options = options;\n    this._members = new ObservableMap();\n    this.bufferedDeviceMessages = /* @__PURE__ */ new Map();\n    this.errorBoundary = new ErrorBoundary((err) => {\n      this.emitChange();\n      if (this.joinedData) {\n        this.joinedData.logItem.log(\"error at boundary\").catch(err);\n        console.error(err);\n      }\n    });\n    this._state = newCall ? \"fledgling\" : \"created\";\n    this._memberOptions = Object.assign({}, options, {\n      confId: this.id,\n      emitUpdate: (member) => {\n        var _a;\n        const memberKey = getMemberKey(member.userId, member.deviceId);\n        if (member.isExpired && !member.isConnected) {\n          const logItem = this.options.logger.log({\n            l: \"removing expired member from call\",\n            memberKey,\n            callId: this.id\n          });\n          (_a = member.logItem) == null ? void 0 : _a.refDetached(logItem);\n          member.dispose();\n          this._members.remove(memberKey);\n        } else {\n          this._members.update(memberKey);\n        }\n      },\n      encryptDeviceMessage: (userId, deviceId, message, log) => {\n        return this.options.encryptDeviceMessage(this.roomId, userId, deviceId, message, log);\n      }\n    });\n  }\n  get localMedia() {\n    var _a;\n    return (_a = this.joinedData) == null ? void 0 : _a.localMedia;\n  }\n  get localPreviewMedia() {\n    var _a;\n    return (_a = this.joinedData) == null ? void 0 : _a.localPreviewMedia;\n  }\n  get members() {\n    return this._members;\n  }\n  get isTerminated() {\n    var _a;\n    return !!((_a = this.callContent) == null ? void 0 : _a[\"m.terminated\"]);\n  }\n  get usesFoci() {\n    for (const member of this._members.values()) {\n      if (member.usesFoci) {\n        return true;\n      }\n    }\n    return false;\n  }\n  get duration() {\n    if (typeof this.startTime === \"number\") {\n      return this.options.clock.now() - this.startTime;\n    }\n  }\n  get isRinging() {\n    return this._state === \"created\" && this.intent === \"m.ring\" && !this.isMember(this.options.ownUserId);\n  }\n  get name() {\n    var _a;\n    return (_a = this.callContent) == null ? void 0 : _a[\"m.name\"];\n  }\n  get intent() {\n    var _a;\n    return (_a = this.callContent) == null ? void 0 : _a[\"m.intent\"];\n  }\n  get deviceIndex() {\n    return this._deviceIndex;\n  }\n  get eventTimestamp() {\n    return this._eventTimestamp;\n  }\n  get type() {\n    var _a;\n    return (_a = this.callContent) == null ? void 0 : _a[\"m.type\"];\n  }\n  get logItem() {\n    var _a;\n    return (_a = this.joinedData) == null ? void 0 : _a.logItem;\n  }\n  get error() {\n    return this.errorBoundary.error;\n  }\n  join(localMedia, log) {\n    return this.options.logger.wrapOrRun(log, \"Call.join\", async (joinLog) => {\n      if (this._state !== \"created\" || this.joinedData || this.usesFoci) {\n        localMedia.dispose();\n        return;\n      }\n      const logItem = this.options.logger.child({\n        l: \"Call.connection\",\n        t: CALL_LOG_TYPE,\n        id: this.id,\n        ownSessionId: this.options.sessionId\n      });\n      const turnServer = await this.options.turnServerSource.getSettings(logItem);\n      const membersLogItem = logItem.child(\"member connections\");\n      const localMuteSettings = new MuteSettings();\n      localMuteSettings.updateTrackInfo(localMedia.userMedia);\n      const localPreviewMedia = localMedia.asPreview();\n      const joinedData = new JoinedData(logItem, membersLogItem, localMedia, localPreviewMedia, localMuteSettings, turnServer);\n      this.joinedData = joinedData;\n      await joinedData.logItem.wrap(\"join\", async (log2) => {\n        joinLog.refDetached(log2);\n        this._state = \"joining\";\n        this.emitChange();\n        await log2.wrap(\"update member state\", async (log3) => {\n          const memberContent = await this._createMemberPayload(true);\n          log3.set(\"payload\", memberContent);\n          const request = this.options.hsApi.sendState(this.roomId, EventType.GroupCallMember, this.options.ownUserId, memberContent, { log: log3 });\n          await request.response();\n          this.emitChange();\n        });\n        for (const member of this._members.values()) {\n          this.connectToMember(member, joinedData, log2);\n        }\n      });\n    });\n  }\n  async setMedia(localMedia) {\n    var _a;\n    if ((this._state === \"joining\" || this._state === \"joined\") && this.joinedData) {\n      const oldMedia = this.joinedData.localMedia;\n      this.joinedData.localMedia = localMedia;\n      (_a = this.joinedData.localPreviewMedia) == null ? void 0 : _a.dispose();\n      this.joinedData.localPreviewMedia = localMedia.asPreview();\n      this.joinedData.localMuteSettings.updateTrackInfo(localMedia.userMedia);\n      this.emitChange();\n      await Promise.all(Array.from(this._members.values()).map((m) => {\n        return m.setMedia(localMedia, oldMedia);\n      }));\n      oldMedia == null ? void 0 : oldMedia.dispose();\n    }\n  }\n  async setMuted(muteSettings) {\n    const { joinedData } = this;\n    if (!joinedData) {\n      return;\n    }\n    const prevMuteSettings = joinedData.localMuteSettings;\n    muteSettings.updateTrackInfo(joinedData.localMedia.userMedia);\n    joinedData.localMuteSettings = muteSettings;\n    if (!prevMuteSettings.equals(muteSettings)) {\n      if (this.localPreviewMedia) {\n        mute(this.localPreviewMedia, muteSettings, this.joinedData.logItem);\n      }\n      if (this.localMedia) {\n        mute(this.localMedia, muteSettings, this.joinedData.logItem);\n      }\n      await Promise.all(Array.from(this._members.values()).map((m) => {\n        return m.setMuted(joinedData.localMuteSettings);\n      }));\n      this.emitChange();\n    }\n  }\n  get muteSettings() {\n    var _a;\n    return (_a = this.joinedData) == null ? void 0 : _a.localMuteSettings;\n  }\n  get hasJoined() {\n    return this._state === \"joining\" || this._state === \"joined\";\n  }\n  async leave(log) {\n    await this.options.logger.wrapOrRun(log, \"Call.leave\", async (log2) => {\n      var _a;\n      const { joinedData } = this;\n      if (!joinedData) {\n        return;\n      }\n      try {\n        (_a = joinedData.renewMembershipTimeout) == null ? void 0 : _a.dispose();\n        joinedData.renewMembershipTimeout = void 0;\n        const memberContent = await this._createMemberPayload(false);\n        if (memberContent) {\n          const request = this.options.hsApi.sendState(this.roomId, EventType.GroupCallMember, this.options.ownUserId, memberContent, { log: log2 });\n          await request.response();\n          if ((this.intent === CallIntent.Ring || this.intent === CallIntent.Prompt) && this._members.size === 0) {\n            await this.terminate(log2);\n          }\n        } else {\n          log2.set(\"already_left\", true);\n        }\n      } finally {\n        if (!this.disconnect(log2)) {\n          throw this.errorBoundary.error;\n        }\n      }\n    });\n  }\n  terminate(log) {\n    return this.options.logger.wrapOrRun(log, { l: \"terminate call\", t: CALL_LOG_TYPE }, async (log2) => {\n      if (this._state === \"fledgling\") {\n        return;\n      }\n      const request = this.options.hsApi.sendState(this.roomId, EventType.GroupCall, this.id, Object.assign({}, this.callContent, {\n        \"m.terminated\": true\n      }), { log: log2 });\n      await request.response();\n    });\n  }\n  create(type, log) {\n    return log.wrap({ l: \"create call\", t: CALL_LOG_TYPE }, async (log2) => {\n      if (this._state !== \"fledgling\") {\n        return;\n      }\n      this._state = \"creating\";\n      this.emitChange();\n      this.callContent = Object.assign({\n        \"m.type\": type\n      }, this.callContent);\n      const request = this.options.hsApi.sendState(this.roomId, EventType.GroupCall, this.id, this.callContent, { log: log2 });\n      await request.response();\n      this._state = \"created\";\n      this.emitChange();\n    });\n  }\n  updateCallEvent(event2, syncLog) {\n    this.errorBoundary.try(() => {\n      syncLog.wrap({ l: \"update call\", t: CALL_LOG_TYPE, id: this.id }, (log) => {\n        if (typeof this.startTime !== \"number\") {\n          this.startTime = event2.origin_server_ts;\n        }\n        this.callContent = event2.content;\n        if (this._state === \"creating\") {\n          this._state = \"created\";\n        }\n        log.set(\"status\", this._state);\n        this.emitChange();\n      });\n    });\n  }\n  updateRoomMembers(memberChanges) {\n    this.errorBoundary.try(() => {\n      for (const change of memberChanges.values()) {\n        const { member } = change;\n        for (const callMember of this._members.values()) {\n          if (callMember.userId === member.userId) {\n            callMember.updateRoomMember(member);\n          }\n        }\n      }\n    });\n  }\n  updateMembership(userId, roomMember, callMembership, eventTimestamp, syncLog) {\n    this.errorBoundary.try(async () => {\n      await syncLog.wrap({ l: \"update call membership\", t: CALL_LOG_TYPE, id: this.id, userId }, async (log) => {\n        const now = this.options.clock.now();\n        const devices = callMembership[\"m.devices\"];\n        const previousDeviceIds = this.getDeviceIdsForUserId(userId);\n        for (let deviceIndex = 0; deviceIndex < devices.length; deviceIndex++) {\n          const device = devices[deviceIndex];\n          const deviceId = device.device_id;\n          const memberKey = getMemberKey(userId, deviceId);\n          if (userId === this.options.ownUserId && deviceId === this.options.ownDeviceId) {\n            this._deviceIndex = deviceIndex;\n            this._eventTimestamp = eventTimestamp;\n            log.wrap(\"update own membership\", (log2) => {\n              if (this.hasJoined) {\n                if (this.joinedData) {\n                  this.joinedData.logItem.refDetached(log2);\n                }\n                this._setupRenewMembershipTimeout(device, log2);\n              }\n              if (this._state === \"joining\") {\n                log2.set(\"joined\", true);\n                this._state = \"joined\";\n                this.emitChange();\n              }\n            });\n          } else {\n            await log.wrap({ l: \"update device membership\", id: memberKey, sessionId: device.session_id }, async (log2) => {\n              if (isMemberExpired(device, now)) {\n                log2.set(\"expired\", true);\n                const member2 = this._members.get(memberKey);\n                if (member2) {\n                  member2.dispose();\n                  this._members.remove(memberKey);\n                  log2.set(\"removed\", true);\n                } else {\n                  log2.discard();\n                }\n                return;\n              }\n              let member = this._members.get(memberKey);\n              const sessionIdChanged = member && member.sessionId !== device.session_id;\n              if (member && !sessionIdChanged) {\n                log2.set(\"update\", true);\n                member.updateCallInfo(device, deviceIndex, eventTimestamp, log2);\n              } else {\n                if (member && sessionIdChanged) {\n                  log2.set(\"removedSessionId\", member.sessionId);\n                  const disconnectLogItem = await member.disconnect(false);\n                  if (disconnectLogItem) {\n                    log2.refDetached(disconnectLogItem);\n                  }\n                  member.dispose();\n                  this._members.remove(memberKey);\n                  member = void 0;\n                }\n                log2.set(\"add\", true);\n                member = new Member(roomMember, device, deviceIndex, eventTimestamp, this._memberOptions, log2);\n                this._members.add(memberKey, member);\n                if (this.joinedData) {\n                  this.connectToMember(member, this.joinedData, log2);\n                }\n              }\n              this.flushPendingIncomingDeviceMessages(member, log2);\n            });\n          }\n        }\n        const newDeviceIds = new Set(devices.map((call) => call.device_id));\n        for (const previousDeviceId of previousDeviceIds) {\n          if (!newDeviceIds.has(previousDeviceId)) {\n            this.removeMemberDevice(userId, previousDeviceId, log);\n          }\n        }\n        if (userId === this.options.ownUserId && !newDeviceIds.has(this.options.ownDeviceId)) {\n          this.removeOwnDevice(log);\n        }\n      });\n    });\n  }\n  removeMembership(userId, syncLog) {\n    this.errorBoundary.try(() => {\n      const deviceIds = this.getDeviceIdsForUserId(userId);\n      syncLog.wrap({\n        l: \"remove call member\",\n        t: CALL_LOG_TYPE,\n        id: this.id,\n        userId\n      }, (log) => {\n        for (const deviceId of deviceIds) {\n          this.removeMemberDevice(userId, deviceId, log);\n        }\n        if (userId === this.options.ownUserId) {\n          this.removeOwnDevice(log);\n        }\n      });\n    });\n  }\n  flushPendingIncomingDeviceMessages(member, log) {\n    const memberKey = getMemberKey(member.userId, member.deviceId);\n    const bufferedMessages = this.bufferedDeviceMessages.get(memberKey);\n    if (bufferedMessages) {\n      for (const message of bufferedMessages) {\n        if (message.content.sender_session_id === member.sessionId) {\n          member.handleDeviceMessage(message, log);\n          bufferedMessages.delete(message);\n        }\n      }\n      if (bufferedMessages.size === 0) {\n        this.bufferedDeviceMessages.delete(memberKey);\n      }\n    }\n  }\n  getDeviceIdsForUserId(userId) {\n    return Array.from(this._members.keys()).filter((key) => memberKeyIsForUser(key, userId)).map((key) => getDeviceFromMemberKey(key));\n  }\n  isMember(userId) {\n    return Array.from(this._members.keys()).some((key) => memberKeyIsForUser(key, userId));\n  }\n  removeOwnDevice(log) {\n    log.wrap(\"remove own membership\", (log2) => {\n      this.disconnect(log2);\n    });\n  }\n  disconnect(log) {\n    return this.errorBoundary.try(async () => {\n      var _a;\n      if (this.hasJoined) {\n        for (const member of this._members.values()) {\n          const disconnectLogItem = await member.disconnect(true);\n          if (disconnectLogItem) {\n            log.refDetached(disconnectLogItem);\n          }\n        }\n        this._state = \"created\";\n      }\n      (_a = this.joinedData) == null ? void 0 : _a.dispose();\n      this.joinedData = void 0;\n      this.emitChange();\n    }, false) || true;\n  }\n  async removeMemberDevice(userId, deviceId, log) {\n    const memberKey = getMemberKey(userId, deviceId);\n    await log.wrap({ l: \"remove device member\", id: memberKey }, async (log2) => {\n      const member = this._members.get(memberKey);\n      if (member) {\n        log2.set(\"leave\", true);\n        const disconnectLogItem = await member.disconnect(false);\n        if (disconnectLogItem) {\n          log2.refDetached(disconnectLogItem);\n        }\n        member.dispose();\n        this._members.remove(memberKey);\n      }\n    });\n  }\n  handleDeviceMessage(message, userId, deviceId, syncLog) {\n    this.errorBoundary.try(() => {\n      const key = getMemberKey(userId, deviceId);\n      let member = this._members.get(key);\n      if (member && message.content.sender_session_id === member.sessionId) {\n        member.handleDeviceMessage(message, syncLog);\n      } else {\n        syncLog.log({\n          l: \"call: buffering to_device message, member not found\",\n          t: CALL_LOG_TYPE,\n          id: this.id,\n          userId,\n          deviceId,\n          sessionId: message.content.sender_session_id,\n          type: message.type\n        });\n        let messages = this.bufferedDeviceMessages.get(key);\n        if (!messages) {\n          messages = /* @__PURE__ */ new Set();\n          this.bufferedDeviceMessages.set(key, messages);\n        }\n        messages.add(message);\n      }\n    });\n  }\n  async _createMemberPayload(includeOwn) {\n    var _a, _b;\n    const { storage } = this.options;\n    const txn = await storage.readTxn([storage.storeNames.roomState]);\n    const stateEvent = await txn.roomState.get(this.roomId, EventType.GroupCallMember, this.options.ownUserId);\n    const stateContent = (_b = (_a = stateEvent == null ? void 0 : stateEvent.event) == null ? void 0 : _a.content) != null ? _b : {\n      [\"m.calls\"]: []\n    };\n    let callsInfo = stateContent[\"m.calls\"];\n    let callInfo = callsInfo.find((c) => c[\"m.call_id\"] === this.id);\n    if (!callInfo) {\n      callInfo = {\n        [\"m.call_id\"]: this.id,\n        [\"m.devices\"]: []\n      };\n      callsInfo.push(callInfo);\n    }\n    const now = this.options.clock.now();\n    callInfo[\"m.devices\"] = callInfo[\"m.devices\"].filter((d) => {\n      if (d[\"device_id\"] === this.options.ownDeviceId) {\n        return false;\n      }\n      if (memberExpiresAt(d) === void 0 || isMemberExpired(d, now, CALL_MEMBER_VALIDITY_PERIOD_MS)) {\n        return false;\n      }\n      return true;\n    });\n    if (includeOwn) {\n      callInfo[\"m.devices\"].push({\n        [\"device_id\"]: this.options.ownDeviceId,\n        [\"session_id\"]: this.options.sessionId,\n        [\"expires_ts\"]: now + CALL_MEMBER_VALIDITY_PERIOD_MS,\n        feeds: [{ purpose: \"m.usermedia\" }]\n      });\n      this._deviceIndex = callInfo[\"m.devices\"].length;\n      this._eventTimestamp = Date.now();\n    }\n    stateContent[\"m.calls\"] = callsInfo.filter((c) => c[\"m.devices\"].length !== 0);\n    return stateContent;\n  }\n  async connectToMember(member, joinedData, log) {\n    const memberKey = getMemberKey(member.userId, member.deviceId);\n    const logItem = joinedData.membersLogItem.child({\n      l: \"member\",\n      id: memberKey,\n      sessionId: member.sessionId\n    });\n    await log.wrap({ l: \"connect\", id: memberKey }, async (log2) => {\n      const connectItem = await member.connect(joinedData.localMedia, joinedData.localMuteSettings, joinedData.turnServer, logItem);\n      if (connectItem) {\n        log2.refDetached(connectItem);\n      }\n    });\n  }\n  emitChange() {\n    this.emit(\"change\");\n    this.options.emitUpdate(this);\n  }\n  _setupRenewMembershipTimeout(callDeviceMembership, log) {\n    var _a;\n    const { joinedData } = this;\n    if (!joinedData) {\n      return;\n    }\n    (_a = joinedData.renewMembershipTimeout) == null ? void 0 : _a.dispose();\n    joinedData.renewMembershipTimeout = void 0;\n    const expiresAt = memberExpiresAt(callDeviceMembership);\n    if (typeof expiresAt !== \"number\") {\n      return;\n    }\n    const expiresFromNow = expiresAt - this.options.clock.now();\n    const timeToRenewBeforeExpiration = Math.max(1e4, Math.ceil((0.2 + this.options.random() * 0.8) * (0.08333 * CALL_MEMBER_VALIDITY_PERIOD_MS)));\n    const renewFromNow = Math.max(0, expiresFromNow - timeToRenewBeforeExpiration);\n    log.set(\"expiresIn\", expiresFromNow);\n    log.set(\"renewIn\", renewFromNow);\n    joinedData.renewMembershipTimeout = this.options.clock.createTimeout(renewFromNow);\n    joinedData.renewMembershipTimeout.elapsed().then(() => {\n      joinedData.logItem.wrap(\"renew membership\", async (log2) => {\n        const memberContent = await this._createMemberPayload(true);\n        log2.set(\"payload\", memberContent);\n        const request = this.options.hsApi.sendState(this.roomId, EventType.GroupCallMember, this.options.ownUserId, memberContent, { log: log2 });\n        await request.response();\n      });\n    }, () => {\n    });\n  }\n  dispose() {\n    var _a;\n    (_a = this.joinedData) == null ? void 0 : _a.dispose();\n    for (const member of this._members.values()) {\n      member.dispose();\n    }\n  }\n}\nconst DEFAULT_TTL = 5 * 60;\nconst DEFAULT_SETTINGS = {\n  urls: [\"stun:turn.matrix.org\"],\n  username: \"\",\n  credential: \"\"\n};\nclass TurnServerSource {\n  constructor(hsApi, clock, defaultSettings = DEFAULT_SETTINGS) {\n    this.hsApi = hsApi;\n    this.clock = clock;\n    this.defaultSettings = defaultSettings;\n    this.isPolling = false;\n  }\n  getSettings(log) {\n    return log.wrap(\"get turn server\", async (log2) => {\n      if (!this.isPolling) {\n        const settings = await this.doRequest(log2);\n        const iceServer = settings ? toIceServer(settings) : this.defaultSettings;\n        log2.set(\"iceServer\", iceServer);\n        if (this.currentObservable) {\n          this.currentObservable.set(iceServer);\n        } else {\n          this.currentObservable = new RetainedObservableValue(iceServer, () => {\n            this.stopPollLoop();\n          }, () => {\n            var _a;\n            this.runLoop((_a = settings == null ? void 0 : settings.ttl) != null ? _a : DEFAULT_TTL);\n          });\n        }\n      }\n      return this.currentObservable;\n    });\n  }\n  async runLoop(initialTtl) {\n    let ttl = initialTtl;\n    this.isPolling = true;\n    while (this.isPolling) {\n      try {\n        this.pollTimeout = this.clock.createTimeout(ttl * 1e3);\n        await this.pollTimeout.elapsed();\n        this.pollTimeout = void 0;\n        const settings = await this.doRequest(void 0);\n        if (settings) {\n          const iceServer = toIceServer(settings);\n          if (shouldUpdate(this.currentObservable, iceServer)) {\n            this.currentObservable.set(iceServer);\n          }\n          if (settings.ttl > 0) {\n            ttl = settings.ttl;\n          } else {\n            this.stopPollLoop();\n          }\n        } else {\n          ttl = DEFAULT_TTL;\n        }\n      } catch (err) {\n        if (err.name === \"AbortError\")\n          ;\n      }\n    }\n  }\n  async doRequest(log) {\n    try {\n      this.pollRequest = this.hsApi.getTurnServer({ log });\n      const settings = await this.pollRequest.response();\n      return settings;\n    } catch (err) {\n      if (err.name === \"HomeServerError\") {\n        return void 0;\n      }\n      throw err;\n    } finally {\n      this.pollRequest = void 0;\n    }\n  }\n  stopPollLoop() {\n    var _a, _b;\n    this.isPolling = false;\n    this.currentObservable = void 0;\n    (_a = this.pollTimeout) == null ? void 0 : _a.dispose();\n    this.pollTimeout = void 0;\n    (_b = this.pollRequest) == null ? void 0 : _b.abort();\n    this.pollRequest = void 0;\n  }\n  dispose() {\n    this.stopPollLoop();\n  }\n}\nfunction shouldUpdate(observable, settings) {\n  const currentSettings = observable.get();\n  if (!currentSettings) {\n    return true;\n  }\n  const currentUrls = Array.isArray(currentSettings.urls) ? currentSettings.urls : [currentSettings.urls];\n  const newUrls = Array.isArray(settings.urls) ? settings.urls : [settings.urls];\n  const arraysEqual = currentUrls.length === newUrls.length && !newUrls.some((uri) => !currentUrls.includes(uri));\n  return !arraysEqual || settings.username !== currentSettings.username || settings.credential !== currentSettings.credential;\n}\nfunction toIceServer(settings) {\n  return {\n    urls: settings.uris,\n    username: settings.username,\n    credential: settings.password,\n    credentialType: \"password\"\n  };\n}\nfunction getRoomMemberKey(roomId, userId) {\n  return JSON.stringify(roomId) + `,` + JSON.stringify(userId);\n}\nclass CallHandler {\n  constructor(options) {\n    this.options = options;\n    this._calls = new ObservableMap();\n    this.roomMemberToCallIds = /* @__PURE__ */ new Map();\n    this.sessionId = makeId(\"s\");\n    this.groupCallOptions = Object.assign({}, this.options, {\n      turnServerSource: new TurnServerSource(this.options.hsApi, this.options.clock),\n      emitUpdate: (groupCall, params) => this._calls.update(groupCall.id, params),\n      createTimeout: this.options.clock.createTimeout,\n      sessionId: this.sessionId\n    });\n  }\n  loadCalls(intent, log) {\n    return this.options.logger.wrapOrRun(log, \"CallHandler.loadCalls\", async (log2) => {\n      if (!intent) {\n        intent = CallIntent.Ring;\n      }\n      log2.set(\"intent\", intent);\n      const txn = await this._getLoadTxn();\n      const callEntries = await txn.calls.getByIntent(intent);\n      await this._loadCallEntries(callEntries, txn, log2);\n    });\n  }\n  loadCallsForRoom(intent, roomId, log) {\n    return this.options.logger.wrapOrRun(log, \"CallHandler.loadCallsForRoom\", async (log2) => {\n      log2.set(\"intent\", intent);\n      log2.set(\"roomId\", roomId);\n      const txn = await this._getLoadTxn();\n      const callEntries = await txn.calls.getByIntentAndRoom(intent, roomId);\n      await this._loadCallEntries(callEntries, txn, log2);\n    });\n  }\n  async _getLoadTxn() {\n    const names = this.options.storage.storeNames;\n    const txn = await this.options.storage.readTxn([\n      names.calls,\n      names.roomState\n    ]);\n    return txn;\n  }\n  async _loadCallEntries(callEntries, txn, log) {\n    log.set(\"entries\", callEntries.length);\n    await Promise.all(callEntries.map(async (callEntry) => {\n      if (this._calls.get(callEntry.callId)) {\n        return;\n      }\n      const event2 = await txn.roomState.get(callEntry.roomId, EventType.GroupCall, callEntry.callId);\n      if (event2) {\n        const call = new GroupCall(event2.event.state_key, true, false, callEntry.timestamp, event2.event.content, event2.roomId, this.groupCallOptions);\n        this._calls.set(call.id, call);\n      }\n    }));\n    const roomIds = Array.from(new Set(callEntries.map((e) => e.roomId)));\n    await Promise.all(roomIds.map(async (roomId) => {\n      const callsMemberEvents = await txn.roomState.getAllForType(roomId, EventType.GroupCallMember);\n      await Promise.all(callsMemberEvents.map(async (entry) => {\n        const userId = entry.event.sender;\n        const roomMemberState = await txn.roomState.get(roomId, EVENT_TYPE$1, userId);\n        let roomMember;\n        if (roomMemberState) {\n          roomMember = RoomMember.fromMemberEvent(roomMemberState.event);\n        }\n        if (!roomMember) {\n          roomMember = RoomMember.fromUserId(roomId, userId, \"join\");\n        }\n        this.handleCallMemberEvent(entry.event, roomMember, roomId, log);\n      }));\n    }));\n    log.set(\"newSize\", this._calls.size);\n  }\n  createCall(roomId, type, name, intent, log) {\n    return this.options.logger.wrapOrRun(log, \"CallHandler.createCall\", async (log2) => {\n      if (!intent) {\n        intent = CallIntent.Ring;\n      }\n      const call = new GroupCall(makeId(\"conf-\"), false, true, void 0, { \"m.name\": name, \"m.intent\": intent }, roomId, this.groupCallOptions);\n      this._calls.set(call.id, call);\n      try {\n        await call.create(type, log2);\n        const txn = await this.options.storage.readWriteTxn([this.options.storage.storeNames.calls]);\n        txn.calls.add({\n          intent: call.intent,\n          callId: call.id,\n          timestamp: this.options.clock.now(),\n          roomId\n        });\n        await txn.complete();\n      } catch (err) {\n        this._calls.remove(call.id);\n        throw err;\n      }\n      return call;\n    });\n  }\n  get calls() {\n    return this._calls;\n  }\n  async handleRoomState(room, event2, memberSync, txn, log) {\n    if (event2.type === EventType.GroupCall) {\n      this.handleCallEvent(event2, room.id, txn, log);\n    }\n    if (event2.type === EventType.GroupCallMember) {\n      let member = await memberSync.lookupMemberAtEvent(event2.sender, event2, txn);\n      if (!member) {\n        member = RoomMember.fromUserId(room.id, event2.sender, \"join\");\n      }\n      this.handleCallMemberEvent(event2, member, room.id, log);\n    }\n  }\n  updateRoomMembers(room, memberChanges) {\n    for (const call of this._calls.values()) {\n      if (call.roomId === room.id) {\n        call.updateRoomMembers(memberChanges);\n      }\n    }\n  }\n  handlesDeviceMessageEventType(eventType) {\n    return handlesEventType(eventType);\n  }\n  handleDeviceMessage(message, userId, deviceId, log) {\n    const call = this._calls.get(message.content.conf_id);\n    call == null ? void 0 : call.handleDeviceMessage(message, userId, deviceId, log);\n  }\n  handleCallEvent(event2, roomId, txn, log) {\n    const callId = event2.state_key;\n    let call = this._calls.get(callId);\n    if (call) {\n      call.updateCallEvent(event2, log);\n      if (call.isTerminated) {\n        call.disconnect(log);\n        this._calls.remove(call.id);\n        txn.calls.remove(call.intent, roomId, call.id);\n      }\n    } else if (!event2.content[\"m.terminated\"]) {\n      call = new GroupCall(event2.state_key, false, false, event2.origin_server_ts, event2.content, roomId, this.groupCallOptions);\n      this._calls.set(call.id, call);\n      txn.calls.add({\n        intent: call.intent,\n        callId: call.id,\n        timestamp: event2.origin_server_ts,\n        roomId\n      });\n    }\n  }\n  handleCallMemberEvent(event2, member, roomId, log) {\n    var _a;\n    const userId = event2.state_key;\n    const roomMemberKey = getRoomMemberKey(roomId, userId);\n    const calls = (_a = event2.content[\"m.calls\"]) != null ? _a : [];\n    const eventTimestamp = event2.origin_server_ts;\n    for (const call of calls) {\n      const callId = call[\"m.call_id\"];\n      const groupCall = this._calls.get(callId);\n      groupCall == null ? void 0 : groupCall.updateMembership(userId, member, call, eventTimestamp, log);\n    }\n    const newCallIdsMemberOf = new Set(calls.map((call) => call[\"m.call_id\"]));\n    let previousCallIdsMemberOf = this.roomMemberToCallIds.get(roomMemberKey);\n    if (previousCallIdsMemberOf) {\n      for (const previousCallId of previousCallIdsMemberOf) {\n        if (!newCallIdsMemberOf.has(previousCallId)) {\n          const groupCall = this._calls.get(previousCallId);\n          groupCall == null ? void 0 : groupCall.removeMembership(userId, log);\n        }\n      }\n    }\n    if (newCallIdsMemberOf.size === 0) {\n      this.roomMemberToCallIds.delete(roomMemberKey);\n    } else {\n      this.roomMemberToCallIds.set(roomMemberKey, newCallIdsMemberOf);\n    }\n  }\n  dispose() {\n    this.groupCallOptions.turnServerSource.dispose();\n    for (const call of this._calls.values()) {\n      call.dispose();\n    }\n  }\n}\nclass RoomStateHandlerSet extends BaseObservable {\n  async handleRoomState(room, stateEvent, memberSync, txn, log) {\n    const promises = [];\n    for (let h of this._handlers) {\n      promises.push(h.handleRoomState(room, stateEvent, memberSync, txn, log));\n    }\n    await Promise.all(promises);\n  }\n  updateRoomMembers(room, memberChanges) {\n    for (let h of this._handlers) {\n      h.updateRoomMembers(room, memberChanges);\n    }\n  }\n}\nconst PICKLE_KEY = \"DEFAULT_KEY\";\nconst PUSHER_KEY = \"pusher\";\nclass Session {\n  constructor({ storage, hsApi, sessionInfo, olm, olmWorker, platform, mediaRepository, features }) {\n    this._platform = platform;\n    this._storage = storage;\n    this._hsApi = hsApi;\n    this._mediaRepository = mediaRepository;\n    this._features = features;\n    this._syncInfo = null;\n    this._sessionInfo = sessionInfo;\n    this._rooms = new ObservableMap();\n    this._roomUpdateCallback = (room, params) => this._rooms.update(room.id, params);\n    this._activeArchivedRooms = /* @__PURE__ */ new Map();\n    this._invites = new ObservableMap();\n    this._inviteUpdateCallback = (invite, params) => this._invites.update(invite.id, params);\n    this._roomsBeingCreatedUpdateCallback = (rbc, params) => {\n      if (rbc.isCancelled) {\n        this._roomsBeingCreated.remove(rbc.id);\n      } else {\n        this._roomsBeingCreated.update(rbc.id, params);\n      }\n    };\n    this._roomsBeingCreated = new ObservableMap();\n    this._user = new User(sessionInfo.userId);\n    this._roomStateHandler = new RoomStateHandlerSet();\n    if (features.calls) {\n      this._setupCallHandler();\n    }\n    this._deviceMessageHandler = new DeviceMessageHandler({ storage, callHandler: this._callHandler });\n    this._olm = olm;\n    this._olmUtil = null;\n    this._e2eeAccount = null;\n    this._deviceTracker = null;\n    this._olmEncryption = null;\n    this._keyLoader = null;\n    this._megolmEncryption = null;\n    this._megolmDecryption = null;\n    this._getSyncToken = () => this.syncToken;\n    this._olmWorker = olmWorker;\n    this._keyBackup = new ObservableValue$1(void 0);\n    this._crossSigning = new ObservableValue$1(void 0);\n    this._observedRoomStatus = /* @__PURE__ */ new Map();\n    if (olm) {\n      this._olmUtil = new olm.Utility();\n      this._deviceTracker = new DeviceTracker({\n        storage,\n        getSyncToken: this._getSyncToken,\n        olmUtil: this._olmUtil,\n        ownUserId: sessionInfo.userId,\n        ownDeviceId: sessionInfo.deviceId\n      });\n    }\n    this._createRoomEncryption = this._createRoomEncryption.bind(this);\n    this._forgetArchivedRoom = this._forgetArchivedRoom.bind(this);\n    this.needsKeyBackup = new ObservableValue$1(false);\n  }\n  get hsApi() {\n    return this._hsApi;\n  }\n  get sessionInfo() {\n    return this._sessionInfo;\n  }\n  get fingerprintKey() {\n    var _a;\n    return (_a = this._e2eeAccount) == null ? void 0 : _a.identityKeys.ed25519;\n  }\n  get hasSecretStorageKey() {\n    return this._hasSecretStorageKey;\n  }\n  get deviceId() {\n    return this._sessionInfo.deviceId;\n  }\n  get userId() {\n    return this._sessionInfo.userId;\n  }\n  get callHandler() {\n    return this._callHandler;\n  }\n  _setupCallHandler() {\n    this._callHandler = new CallHandler({\n      clock: this._platform.clock,\n      random: this._platform.random,\n      hsApi: this._hsApi,\n      encryptDeviceMessage: async (roomId, userId, deviceId, message, log) => {\n        if (!this._deviceTracker || !this._olmEncryption) {\n          log.set(\"encryption_disabled\", true);\n          return;\n        }\n        const device = await log.wrap(\"get device key\", async (log2) => {\n          const device2 = this._deviceTracker.deviceForId(userId, deviceId, this._hsApi, log2);\n          if (!device2) {\n            log2.set(\"not_found\", true);\n          }\n          return device2;\n        });\n        if (device) {\n          const encryptedMessages = await this._olmEncryption.encrypt(message.type, message.content, [device], this._hsApi, log);\n          return encryptedMessages;\n        }\n      },\n      storage: this._storage,\n      webRTC: this._platform.webRTC,\n      ownDeviceId: this._sessionInfo.deviceId,\n      ownUserId: this._sessionInfo.userId,\n      logger: this._platform.logger,\n      forceTURN: false\n    });\n    this.observeRoomState(this._callHandler);\n  }\n  _setupEncryption() {\n    const senderKeyLock = new LockMap();\n    const olmDecryption = new Decryption$1(this._e2eeAccount, PICKLE_KEY, this._platform.clock.now, this._user.id, this._olm, senderKeyLock);\n    this._olmEncryption = new Encryption$1(this._e2eeAccount, PICKLE_KEY, this._olm, this._storage, this._platform.clock.now, this._user.id, this._olmUtil, senderKeyLock);\n    this._keyLoader = new KeyLoader(this._olm, PICKLE_KEY, 20);\n    this._megolmEncryption = new Encryption({\n      account: this._e2eeAccount,\n      pickleKey: PICKLE_KEY,\n      olm: this._olm,\n      storage: this._storage,\n      keyLoader: this._keyLoader,\n      now: this._platform.clock.now,\n      ownDeviceId: this._sessionInfo.deviceId\n    });\n    this._megolmDecryption = new Decryption(this._keyLoader, this._olmWorker);\n    this._deviceMessageHandler.enableEncryption({ olmDecryption, megolmDecryption: this._megolmDecryption });\n  }\n  _createRoomEncryption(room, encryptionParams) {\n    var _a;\n    if (!this._olmEncryption) {\n      throw new Error(\"creating room encryption before encryption got globally enabled\");\n    }\n    if (encryptionParams.algorithm !== MEGOLM_ALGORITHM) {\n      return null;\n    }\n    return new RoomEncryption({\n      room,\n      deviceTracker: this._deviceTracker,\n      olmEncryption: this._olmEncryption,\n      megolmEncryption: this._megolmEncryption,\n      megolmDecryption: this._megolmDecryption,\n      storage: this._storage,\n      keyBackup: (_a = this._keyBackup) == null ? void 0 : _a.get(),\n      encryptionParams,\n      notifyMissingMegolmSession: () => {\n        if (!this._keyBackup.get()) {\n          this.needsKeyBackup.set(true);\n        }\n      },\n      clock: this._platform.clock\n    });\n  }\n  enableSecretStorage(type, credential, log = void 0) {\n    return this._platform.logger.wrapOrRun(log, \"enable secret storage\", async (log2) => {\n      var _a, _b;\n      if (!this._olm) {\n        throw new Error(\"olm required\");\n      }\n      if (this._keyBackup.get()) {\n        this._keyBackup.get().dispose();\n        this._keyBackup.set(void 0);\n      }\n      const crossSigning = this._crossSigning.get();\n      if (crossSigning) {\n        crossSigning.dispose();\n        this._crossSigning.set(void 0);\n      }\n      const key = await keyFromCredential(type, credential, this._storage, this._platform, this._olm);\n      if (await this._tryLoadSecretStorage(key, log2)) {\n        await this._writeSSSSKey(key, log2);\n        await ((_a = this._keyBackup.get()) == null ? void 0 : _a.start(log2));\n        await ((_b = this._crossSigning.get()) == null ? void 0 : _b.start(log2));\n        return key;\n      } else {\n        throw new Error(\"Could not read key backup with the given key\");\n      }\n    });\n  }\n  async _writeSSSSKey(key, log) {\n    const keyBackup = this._keyBackup.get();\n    if (!keyBackup) {\n      return;\n    }\n    const backupVersion = keyBackup.version;\n    const writeTxn = await this._storage.readWriteTxn([\n      this._storage.storeNames.session,\n      this._storage.storeNames.inboundGroupSessions\n    ]);\n    try {\n      const previousBackupVersion = await writeKey(key, backupVersion, writeTxn);\n      log.set(\"previousBackupVersion\", previousBackupVersion);\n      log.set(\"backupVersion\", backupVersion);\n      if (!!previousBackupVersion && previousBackupVersion !== backupVersion) {\n        const amountMarked = await keyBackup.markAllForBackup(writeTxn);\n        log.set(\"amountMarkedForBackup\", amountMarked);\n      }\n    } catch (err) {\n      writeTxn.abort();\n      throw err;\n    }\n    await writeTxn.complete();\n  }\n  async disableSecretStorage() {\n    const writeTxn = await this._storage.readWriteTxn([\n      this._storage.storeNames.session\n    ]);\n    try {\n      removeKey(writeTxn);\n    } catch (err) {\n      writeTxn.abort();\n      throw err;\n    }\n    await writeTxn.complete();\n    if (this._keyBackup.get()) {\n      for (const room of this._rooms.values()) {\n        if (room.isEncrypted) {\n          room.enableKeyBackup(void 0);\n        }\n      }\n      this._keyBackup.get().dispose();\n      this._keyBackup.set(void 0);\n    }\n    const crossSigning = this._crossSigning.get();\n    if (crossSigning) {\n      crossSigning.dispose();\n      this._crossSigning.set(void 0);\n    }\n  }\n  _tryLoadSecretStorage(ssssKey, log) {\n    return log.wrap(\"enable secret storage\", async (log2) => {\n      const secretStorage = new SecretStorage({ key: ssssKey, platform: this._platform, storage: this._storage });\n      const isValid = await secretStorage.hasValidKeyForAnyAccountData();\n      log2.set(\"isValid\", isValid);\n      if (isValid) {\n        await this._loadSecretStorageServices(secretStorage, log2);\n      }\n      return isValid;\n    });\n  }\n  async _loadSecretStorageServices(secretStorage, log) {\n    try {\n      await log.wrap(\"enable key backup\", async (log2) => {\n        const keyBackup = new KeyBackup(this._hsApi, this._olm, this._keyLoader, this._storage, this._platform);\n        if (await keyBackup.load(secretStorage, log2)) {\n          for (const room of this._rooms.values()) {\n            if (room.isEncrypted) {\n              room.enableKeyBackup(keyBackup);\n            }\n          }\n          this._keyBackup.set(keyBackup);\n          return true;\n        } else {\n          log2.set(\"no_backup\", true);\n        }\n      });\n      if (this._features.crossSigning) {\n        await log.wrap(\"enable cross-signing\", async (log2) => {\n          const crossSigning = new CrossSigning({\n            storage: this._storage,\n            secretStorage,\n            platform: this._platform,\n            olm: this._olm,\n            olmUtil: this._olmUtil,\n            deviceTracker: this._deviceTracker,\n            deviceMessageHandler: this._deviceMessageHandler,\n            hsApi: this._hsApi,\n            ownUserId: this.userId,\n            e2eeAccount: this._e2eeAccount,\n            deviceId: this.deviceId\n          });\n          if (await crossSigning.load(log2)) {\n            this._crossSigning.set(crossSigning);\n          } else {\n            crossSigning.dispose();\n          }\n        });\n      }\n    } catch (err) {\n      log.catch(err);\n    }\n  }\n  get keyBackup() {\n    return this._keyBackup;\n  }\n  get crossSigning() {\n    return this._crossSigning;\n  }\n  get hasIdentity() {\n    return !!this._e2eeAccount;\n  }\n  async createIdentity(log) {\n    if (this._olm) {\n      if (!this._e2eeAccount) {\n        this._e2eeAccount = await this._createNewAccount(this._sessionInfo.deviceId, this._storage);\n        log.set(\"keys\", this._e2eeAccount.identityKeys);\n        this._setupEncryption();\n      }\n      await this._e2eeAccount.generateOTKsIfNeeded(this._storage, log);\n      await log.wrap(\"uploadKeys\", (log2) => this._e2eeAccount.uploadKeys(this._storage, false, log2));\n    }\n  }\n  async dehydrateIdentity(dehydratedDevice, log) {\n    log.set(\"deviceId\", dehydratedDevice.deviceId);\n    if (!this._olm) {\n      log.set(\"no_olm\", true);\n      return false;\n    }\n    if (dehydratedDevice.deviceId !== this.deviceId) {\n      log.set(\"wrong_device\", true);\n      return false;\n    }\n    if (this._e2eeAccount) {\n      log.set(\"account_already_setup\", true);\n      return false;\n    }\n    if (!await dehydratedDevice.claim(this._hsApi, log)) {\n      log.set(\"already_claimed\", true);\n      return false;\n    }\n    this._e2eeAccount = await Account.adoptDehydratedDevice({\n      dehydratedDevice,\n      hsApi: this._hsApi,\n      olm: this._olm,\n      pickleKey: PICKLE_KEY,\n      userId: this._sessionInfo.userId,\n      olmWorker: this._olmWorker,\n      deviceId: this.deviceId,\n      storage: this._storage\n    });\n    log.set(\"keys\", this._e2eeAccount.identityKeys);\n    this._setupEncryption();\n    return true;\n  }\n  _createNewAccount(deviceId, storage = void 0) {\n    return Account.create({\n      hsApi: this._hsApi,\n      olm: this._olm,\n      pickleKey: PICKLE_KEY,\n      userId: this._sessionInfo.userId,\n      olmWorker: this._olmWorker,\n      deviceId,\n      storage\n    });\n  }\n  setupDehydratedDevice(key, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"setupDehydratedDevice\", async (log2) => {\n      const dehydrationAccount = await this._createNewAccount(\"temp-device-id\");\n      try {\n        const deviceId = await uploadAccountAsDehydratedDevice(dehydrationAccount, this._hsApi, key, \"Dehydrated device\", log2);\n        log2.set(\"deviceId\", deviceId);\n        return deviceId;\n      } finally {\n        dehydrationAccount.dispose();\n      }\n    });\n  }\n  async load(log) {\n    const txn = await this._storage.readTxn([\n      this._storage.storeNames.session,\n      this._storage.storeNames.roomSummary,\n      this._storage.storeNames.invites,\n      this._storage.storeNames.roomMembers,\n      this._storage.storeNames.timelineEvents,\n      this._storage.storeNames.timelineFragments,\n      this._storage.storeNames.pendingEvents,\n      this._storage.storeNames.accountData,\n      this._storage.storeNames.crossSigningKeys\n    ]);\n    this._syncInfo = await txn.session.get(\"sync\");\n    if (this._olm) {\n      this._e2eeAccount = await Account.load({\n        hsApi: this._hsApi,\n        olm: this._olm,\n        pickleKey: PICKLE_KEY,\n        userId: this._sessionInfo.userId,\n        deviceId: this._sessionInfo.deviceId,\n        olmWorker: this._olmWorker,\n        txn\n      });\n      if (this._e2eeAccount) {\n        log.set(\"keys\", this._e2eeAccount.identityKeys);\n      }\n      this._setupEncryption();\n    }\n    const pendingEventsByRoomId = await this._getPendingEventsByRoom(txn);\n    const invites = await txn.invites.getAll();\n    const inviteLoadPromise = Promise.all(invites.map(async (inviteData) => {\n      const invite = this.createInvite(inviteData.roomId);\n      log.wrap(\"invite\", (log2) => invite.load(inviteData, log2));\n      this._invites.add(invite.id, invite);\n    }));\n    const rooms = await txn.roomSummary.getAll();\n    const roomLoadPromise = Promise.all(rooms.map(async (summary) => {\n      const room = this.createJoinedRoom(summary.roomId, pendingEventsByRoomId.get(summary.roomId));\n      await log.wrap(\"room\", (log2) => room.load(summary, txn, log2));\n      this._rooms.add(room.id, room);\n    }));\n    await Promise.all([inviteLoadPromise, roomLoadPromise]);\n    for (const [roomId, invite] of this.invites) {\n      const room = this.rooms.get(roomId);\n      if (room) {\n        room.setInvite(invite);\n      }\n    }\n    if (this._olm && this._e2eeAccount) {\n      const ssssKey = await readKey(txn);\n      if (ssssKey) {\n        await this._tryLoadSecretStorage(ssssKey, log);\n      }\n    }\n  }\n  dispose() {\n    var _a, _b, _c2, _d2, _e, _f;\n    (_a = this._olmWorker) == null ? void 0 : _a.dispose();\n    this._olmWorker = void 0;\n    (_b = this._keyBackup.get()) == null ? void 0 : _b.dispose();\n    this._keyBackup.set(void 0);\n    (_c2 = this._megolmDecryption) == null ? void 0 : _c2.dispose();\n    this._megolmDecryption = void 0;\n    (_d2 = this._e2eeAccount) == null ? void 0 : _d2.dispose();\n    this._e2eeAccount = void 0;\n    (_e = this._callHandler) == null ? void 0 : _e.dispose();\n    this._callHandler = void 0;\n    (_f = this._crossSigning.get()) == null ? void 0 : _f.dispose();\n    for (const room of this._rooms.values()) {\n      room.dispose();\n    }\n    this._rooms = void 0;\n  }\n  async start(lastVersionResponse, dehydratedDevice, log) {\n    var _a, _b;\n    if (lastVersionResponse) {\n      const txn = await this._storage.readWriteTxn([\n        this._storage.storeNames.session\n      ]);\n      txn.session.set(\"serverVersions\", lastVersionResponse);\n      await txn.complete();\n    }\n    if (dehydratedDevice) {\n      await log.wrap(\"SSSSKeyFromDehydratedDeviceKey\", async (log2) => {\n        const ssssKey = await keyFromDehydratedDeviceKey(dehydratedDevice.key, this._storage, this._platform);\n        if (ssssKey) {\n          if (await this._tryLoadSecretStorage(ssssKey, log2)) {\n            log2.set(\"success\", true);\n            await this._writeSSSSKey(ssssKey);\n          }\n        }\n      });\n    }\n    await ((_a = this._keyBackup.get()) == null ? void 0 : _a.start(log));\n    await ((_b = this._crossSigning.get()) == null ? void 0 : _b.start(log));\n    const opsTxn = await this._storage.readWriteTxn([\n      this._storage.storeNames.operations\n    ]);\n    const operations = await opsTxn.operations.getAll();\n    const operationsByScope = groupBy(operations, (o) => o.scope);\n    for (const room of this._rooms.values()) {\n      let roomOperationsByType;\n      const roomOperations = operationsByScope.get(room.id);\n      if (roomOperations) {\n        roomOperationsByType = groupBy(roomOperations, (r) => r.type);\n      }\n      room.start(roomOperationsByType, log);\n    }\n  }\n  async _getPendingEventsByRoom(txn) {\n    const pendingEvents = await txn.pendingEvents.getAll();\n    return pendingEvents.reduce((groups, pe) => {\n      const group = groups.get(pe.roomId);\n      if (group) {\n        group.push(pe);\n      } else {\n        groups.set(pe.roomId, [pe]);\n      }\n      return groups;\n    }, /* @__PURE__ */ new Map());\n  }\n  get rooms() {\n    return this._rooms;\n  }\n  findDirectMessageForUserId(userId) {\n    for (const [, room] of this._rooms) {\n      if (room.isDirectMessageForUserId(userId)) {\n        return room;\n      }\n    }\n    for (const [, invite] of this._invites) {\n      if (invite.isDirectMessageForUserId(userId)) {\n        return invite;\n      }\n    }\n  }\n  createJoinedRoom(roomId, pendingEvents) {\n    return new Room({\n      roomId,\n      getSyncToken: this._getSyncToken,\n      storage: this._storage,\n      emitCollectionChange: this._roomUpdateCallback,\n      hsApi: this._hsApi,\n      mediaRepository: this._mediaRepository,\n      pendingEvents,\n      user: this._user,\n      createRoomEncryption: this._createRoomEncryption,\n      platform: this._platform,\n      roomStateHandler: this._roomStateHandler\n    });\n  }\n  _createArchivedRoom(roomId) {\n    const room = new ArchivedRoom({\n      roomId,\n      getSyncToken: this._getSyncToken,\n      storage: this._storage,\n      emitCollectionChange: () => {\n      },\n      releaseCallback: () => this._activeArchivedRooms.delete(roomId),\n      forgetCallback: this._forgetArchivedRoom,\n      hsApi: this._hsApi,\n      mediaRepository: this._mediaRepository,\n      user: this._user,\n      createRoomEncryption: this._createRoomEncryption,\n      platform: this._platform\n    });\n    this._activeArchivedRooms.set(roomId, room);\n    return room;\n  }\n  get invites() {\n    return this._invites;\n  }\n  createInvite(roomId) {\n    return new Invite({\n      roomId,\n      hsApi: this._hsApi,\n      emitCollectionUpdate: this._inviteUpdateCallback,\n      mediaRepository: this._mediaRepository,\n      user: this._user,\n      platform: this._platform\n    });\n  }\n  get roomsBeingCreated() {\n    return this._roomsBeingCreated;\n  }\n  createRoom(options) {\n    let roomBeingCreated;\n    this._platform.logger.runDetached(\"create room\", async (log) => {\n      const id = `local-${Math.floor(this._platform.random() * Number.MAX_SAFE_INTEGER)}`;\n      roomBeingCreated = new RoomBeingCreated(id, options, this._roomsBeingCreatedUpdateCallback, this._mediaRepository, this._platform, log);\n      this._roomsBeingCreated.set(id, roomBeingCreated);\n      const promises = [roomBeingCreated.create(this._hsApi, log)];\n      const loadProfiles2 = options.loadProfiles !== false;\n      if (loadProfiles2) {\n        promises.push(roomBeingCreated.loadProfiles(this._hsApi, log));\n      }\n      await Promise.all(promises);\n      if (roomBeingCreated.roomId) {\n        if (this.rooms.get(roomBeingCreated.roomId)) {\n          this._tryReplaceRoomBeingCreated(roomBeingCreated.roomId, log);\n        }\n        await roomBeingCreated.adjustDirectMessageMapIfNeeded(this._user, this._storage, this._hsApi, log);\n      }\n    });\n    return roomBeingCreated;\n  }\n  async obtainSyncLock(syncResponse) {\n    var _a;\n    const toDeviceEvents = (_a = syncResponse.to_device) == null ? void 0 : _a.events;\n    if (Array.isArray(toDeviceEvents) && toDeviceEvents.length) {\n      return await this._deviceMessageHandler.obtainSyncLock(toDeviceEvents);\n    }\n  }\n  async prepareSync(syncResponse, lock, txn, log) {\n    var _a;\n    const toDeviceEvents = (_a = syncResponse.to_device) == null ? void 0 : _a.events;\n    if (Array.isArray(toDeviceEvents) && toDeviceEvents.length) {\n      return await log.wrap(\"deviceMsgs\", (log2) => this._deviceMessageHandler.prepareSync(toDeviceEvents, lock, txn, log2));\n    }\n  }\n  async writeSync(syncResponse, syncFilterId, preparation, txn, log) {\n    const changes = {\n      syncInfo: null,\n      e2eeAccountChanges: null,\n      hasNewRoomKeys: false,\n      deviceMessageDecryptionResults: null\n    };\n    const syncToken = syncResponse.next_batch;\n    if (syncToken !== this.syncToken) {\n      const syncInfo = { token: syncToken, filterId: syncFilterId };\n      txn.session.set(\"sync\", syncInfo);\n      changes.syncInfo = syncInfo;\n    }\n    const deviceOneTimeKeysCount = syncResponse.device_one_time_keys_count;\n    if (this._e2eeAccount && deviceOneTimeKeysCount) {\n      changes.e2eeAccountChanges = this._e2eeAccount.writeSync(deviceOneTimeKeysCount, txn, log);\n    }\n    const deviceLists = syncResponse.device_lists;\n    if (this._deviceTracker && Array.isArray(deviceLists == null ? void 0 : deviceLists.changed) && deviceLists.changed.length) {\n      await log.wrap(\"deviceLists\", (log2) => this._deviceTracker.writeDeviceChanges(deviceLists.changed, txn, log2));\n    }\n    if (preparation) {\n      const { hasNewRoomKeys, decryptionResults } = await log.wrap(\"deviceMsgs\", (log2) => this._deviceMessageHandler.writeSync(preparation, txn, log2));\n      changes.hasNewRoomKeys = hasNewRoomKeys;\n      changes.deviceMessageDecryptionResults = decryptionResults;\n    }\n    const accountData = syncResponse[\"account_data\"];\n    if (Array.isArray(accountData == null ? void 0 : accountData.events)) {\n      for (const event2 of accountData.events) {\n        if (typeof event2.type === \"string\") {\n          txn.accountData.set(event2);\n        }\n      }\n    }\n    return changes;\n  }\n  afterSync({ syncInfo, e2eeAccountChanges }) {\n    if (syncInfo) {\n      this._syncInfo = syncInfo;\n    }\n    if (this._e2eeAccount) {\n      this._e2eeAccount.afterSync(e2eeAccountChanges);\n    }\n  }\n  async afterSyncCompleted(changes, isCatchupSync, log) {\n    var _a;\n    if (this._e2eeAccount && !isCatchupSync) {\n      const needsToUploadOTKs = await this._e2eeAccount.generateOTKsIfNeeded(this._storage, log);\n      if (needsToUploadOTKs) {\n        await log.wrap(\"uploadKeys\", (log2) => this._e2eeAccount.uploadKeys(this._storage, false, log2));\n      }\n    }\n    if (changes.hasNewRoomKeys) {\n      (_a = this._keyBackup.get()) == null ? void 0 : _a.flush(log);\n    }\n    if (changes.deviceMessageDecryptionResults) {\n      await this._deviceMessageHandler.afterSyncCompleted(changes.deviceMessageDecryptionResults, this._deviceTracker, this._hsApi, log);\n    }\n  }\n  _tryReplaceRoomBeingCreated(roomId, log) {\n    for (const [, roomBeingCreated] of this._roomsBeingCreated) {\n      if (roomBeingCreated.roomId === roomId) {\n        const observableStatus = this._observedRoomStatus.get(roomBeingCreated.id);\n        if (observableStatus) {\n          log.log(`replacing room being created`).set(\"localId\", roomBeingCreated.id).set(\"roomId\", roomBeingCreated.roomId);\n          observableStatus.set(observableStatus.get() | RoomStatus.Replaced);\n        }\n        roomBeingCreated.dispose();\n        this._roomsBeingCreated.remove(roomBeingCreated.id);\n        return;\n      }\n    }\n  }\n  async applyRoomCollectionChangesAfterSync(inviteStates, roomStates, archivedRoomStates, log) {\n    var _a, _b;\n    for (const rs of roomStates) {\n      if (rs.shouldAdd) {\n        this._rooms.add(rs.id, rs.room);\n        this._tryReplaceRoomBeingCreated(rs.id, log);\n      } else if (rs.shouldRemove) {\n        this._rooms.remove(rs.id);\n      }\n    }\n    for (const is of inviteStates) {\n      if (is.shouldAdd) {\n        this._invites.add(is.id, is.invite);\n      } else if (is.shouldRemove) {\n        this._invites.remove(is.id);\n      }\n    }\n    if (this._observedRoomStatus.size !== 0) {\n      for (const ars of archivedRoomStates) {\n        if (ars.shouldAdd) {\n          (_a = this._observedRoomStatus.get(ars.id)) == null ? void 0 : _a.set(RoomStatus.Archived);\n        }\n      }\n      for (const rs of roomStates) {\n        if (rs.shouldAdd) {\n          (_b = this._observedRoomStatus.get(rs.id)) == null ? void 0 : _b.set(RoomStatus.Joined);\n        }\n      }\n      for (const is of inviteStates) {\n        const statusObservable = this._observedRoomStatus.get(is.id);\n        if (statusObservable) {\n          const withInvited = statusObservable.get() | RoomStatus.Invited;\n          if (is.shouldAdd) {\n            statusObservable.set(withInvited);\n          } else if (is.shouldRemove) {\n            const withoutInvited = withInvited ^ RoomStatus.Invited;\n            statusObservable.set(withoutInvited);\n          }\n        }\n      }\n    }\n  }\n  _forgetArchivedRoom(roomId) {\n    const statusObservable = this._observedRoomStatus.get(roomId);\n    if (statusObservable) {\n      statusObservable.set((statusObservable.get() | RoomStatus.Archived) ^ RoomStatus.Archived);\n    }\n  }\n  get syncToken() {\n    var _a;\n    return (_a = this._syncInfo) == null ? void 0 : _a.token;\n  }\n  get syncFilterId() {\n    var _a;\n    return (_a = this._syncInfo) == null ? void 0 : _a.filterId;\n  }\n  get user() {\n    return this._user;\n  }\n  get mediaRepository() {\n    return this._mediaRepository;\n  }\n  enablePushNotifications(enable) {\n    if (enable) {\n      return this._enablePush();\n    } else {\n      return this._disablePush();\n    }\n  }\n  async _enablePush() {\n    return this._platform.logger.run(\"enablePush\", async (log) => {\n      const defaultPayload = Pusher.createDefaultPayload(this._sessionInfo.id);\n      const pusher = await this._platform.notificationService.enablePush(Pusher, defaultPayload);\n      if (!pusher) {\n        log.set(\"no_pusher\", true);\n        return false;\n      }\n      await pusher.enable(this._hsApi, log);\n      const txn = await this._storage.readWriteTxn([this._storage.storeNames.session]);\n      txn.session.set(PUSHER_KEY, pusher.serialize());\n      await txn.complete();\n      return true;\n    });\n  }\n  async _disablePush() {\n    return this._platform.logger.run(\"disablePush\", async (log) => {\n      await this._platform.notificationService.disablePush();\n      const readTxn = await this._storage.readTxn([this._storage.storeNames.session]);\n      const pusherData = await readTxn.session.get(PUSHER_KEY);\n      if (!pusherData) {\n        return true;\n      }\n      const pusher = new Pusher(pusherData);\n      await pusher.disable(this._hsApi, log);\n      const txn = await this._storage.readWriteTxn([this._storage.storeNames.session]);\n      txn.session.remove(PUSHER_KEY);\n      await txn.complete();\n      return true;\n    });\n  }\n  async arePushNotificationsEnabled() {\n    if (!await this._platform.notificationService.isPushEnabled()) {\n      return false;\n    }\n    const readTxn = await this._storage.readTxn([this._storage.storeNames.session]);\n    const pusherData = await readTxn.session.get(PUSHER_KEY);\n    return !!pusherData;\n  }\n  async checkPusherEnabledOnHomeserver() {\n    const readTxn = await this._storage.readTxn([this._storage.storeNames.session]);\n    const pusherData = await readTxn.session.get(PUSHER_KEY);\n    if (!pusherData) {\n      return false;\n    }\n    const myPusher = new Pusher(pusherData);\n    const serverPushersData = await this._hsApi.getPushers().response();\n    const serverPushers = ((serverPushersData == null ? void 0 : serverPushersData.pushers) || []).map((data) => new Pusher(data));\n    return serverPushers.some((p) => p.equals(myPusher));\n  }\n  async getRoomStatus(roomId) {\n    const isBeingCreated = !!this._roomsBeingCreated.get(roomId);\n    if (isBeingCreated) {\n      return RoomStatus.BeingCreated;\n    }\n    const isJoined = !!this._rooms.get(roomId);\n    if (isJoined) {\n      return RoomStatus.Joined;\n    } else {\n      const isInvited = !!this._invites.get(roomId);\n      const txn = await this._storage.readTxn([this._storage.storeNames.archivedRoomSummary]);\n      const isArchived = await txn.archivedRoomSummary.has(roomId);\n      if (isInvited && isArchived) {\n        return RoomStatus.Invited | RoomStatus.Archived;\n      } else if (isInvited) {\n        return RoomStatus.Invited;\n      } else if (isArchived) {\n        return RoomStatus.Archived;\n      } else {\n        return RoomStatus.None;\n      }\n    }\n  }\n  async observeRoomStatus(roomId) {\n    let observable = this._observedRoomStatus.get(roomId);\n    if (!observable) {\n      let status = void 0;\n      observable = new RetainedObservableValue(status, () => {\n        this._observedRoomStatus.delete(roomId);\n      });\n      this._observedRoomStatus.set(roomId, observable);\n      status = await this.getRoomStatus(roomId);\n      if (observable.get() === void 0) {\n        observable.set(status);\n      }\n    }\n    return observable;\n  }\n  observeRoomState(roomStateHandler) {\n    return this._roomStateHandler.subscribe(roomStateHandler);\n  }\n  async setAccountData(type, content) {\n    const txn = await this._storage.readWriteTxn([this._storage.storeNames.accountData]);\n    if (txn) {\n      txn.accountData.set({ type, content });\n      await txn.complete();\n    }\n    await this.hsApi.setAccountData(this.userId, type, content).response();\n  }\n  async getAccountData(type) {\n    const txn = await this._storage.readWriteTxn([this._storage.storeNames.accountData]);\n    const entry = await txn.accountData.get(type);\n    if (entry) {\n      await txn.complete();\n      return entry.content;\n    } else {\n      try {\n        const content = await this.hsApi.accountData(this.userId, type).response();\n        if (content) {\n          txn.accountData.set({ type, content });\n          await txn.complete();\n        }\n        return content;\n      } catch (error) {\n        txn.abort();\n        return void 0;\n      }\n    }\n  }\n  createOrGetArchivedRoomForSync(roomId) {\n    let archivedRoom = this._activeArchivedRooms.get(roomId);\n    if (archivedRoom) {\n      archivedRoom.retain();\n    } else {\n      archivedRoom = this._createArchivedRoom(roomId);\n    }\n    return archivedRoom;\n  }\n  loadArchivedRoom(roomId, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"loadArchivedRoom\", async (log2) => {\n      log2.set(\"id\", roomId);\n      const activeArchivedRoom = this._activeArchivedRooms.get(roomId);\n      if (activeArchivedRoom) {\n        activeArchivedRoom.retain();\n        return activeArchivedRoom;\n      }\n      const txn = await this._storage.readTxn([\n        this._storage.storeNames.archivedRoomSummary,\n        this._storage.storeNames.roomMembers\n      ]);\n      const summary = await txn.archivedRoomSummary.get(roomId);\n      if (summary) {\n        const room = this._createArchivedRoom(roomId);\n        await room.load(summary, txn, log2);\n        return room;\n      }\n    });\n  }\n  joinRoom(roomIdOrAlias, log = null) {\n    return this._platform.logger.wrapOrRun(log, \"joinRoom\", async (log2) => {\n      const body = await this._hsApi.joinIdOrAlias(roomIdOrAlias, { log: log2 }).response();\n      return body.room_id;\n    });\n  }\n}\nclass PasswordLoginMethod {\n  constructor({ username, password, homeserver }) {\n    this._username = username;\n    this._password = password;\n    this.homeserver = homeserver;\n  }\n  async login(hsApi, deviceName, log) {\n    return await hsApi.passwordLogin(this._username, this._password, deviceName, { log }).response();\n  }\n}\nclass TokenLoginMethod {\n  constructor({ homeserver, loginToken }) {\n    this.homeserver = homeserver;\n    this._loginToken = loginToken;\n  }\n  async login(hsApi, deviceName, log) {\n    return await hsApi.tokenLogin(this._loginToken, makeTxnId(), deviceName, { log }).response();\n  }\n}\nclass SSOLoginHelper {\n  constructor(homeserver) {\n    this._homeserver = homeserver;\n  }\n  get homeserver() {\n    return this._homeserver;\n  }\n  createSSORedirectURL(returnURL) {\n    return `${this._homeserver}/_matrix/client/r0/login/sso/redirect?redirectUrl=${encodeURIComponent(returnURL)}`;\n  }\n}\nclass BaseRegistrationStage {\n  constructor(session, params) {\n    this._session = session;\n    this._params = params;\n  }\n  setNextStage(stage) {\n    this._nextStage = stage;\n  }\n  get nextStage() {\n    return this._nextStage;\n  }\n}\nclass DummyAuth extends BaseRegistrationStage {\n  generateAuthenticationData() {\n    return {\n      session: this._session,\n      type: this.type\n    };\n  }\n  get type() {\n    return \"m.login.dummy\";\n  }\n}\nclass TermsAuth extends BaseRegistrationStage {\n  generateAuthenticationData() {\n    return {\n      session: this._session,\n      type: this.type\n    };\n  }\n  get type() {\n    return \"m.login.terms\";\n  }\n  get privacyPolicy() {\n    var _a;\n    return (_a = this._params) == null ? void 0 : _a.policies[\"privacy_policy\"];\n  }\n  get termsOfService() {\n    var _a;\n    return (_a = this._params) == null ? void 0 : _a.policies[\"terms_of_service\"];\n  }\n}\nclass TokenAuth extends BaseRegistrationStage {\n  constructor(session, params, type) {\n    super(session, params);\n    this._type = type;\n  }\n  generateAuthenticationData() {\n    if (!this._token) {\n      throw new Error(\"No token provided for TokenAuth\");\n    }\n    return {\n      session: this._session,\n      type: this._type,\n      token: this._token\n    };\n  }\n  setToken(token) {\n    this._token = token;\n  }\n  get type() {\n    return this._type;\n  }\n}\nclass Registration {\n  constructor(homeserver, hsApi, accountDetails, flowSelector) {\n    this.homeserver = homeserver;\n    this._hsApi = hsApi;\n    this._accountDetails = accountDetails;\n    this._flowSelector = flowSelector != null ? flowSelector : (flows) => flows[0];\n  }\n  async start() {\n    const response = await this._hsApi.register(this._accountDetails.username, this._accountDetails.password, this._accountDetails.initialDeviceDisplayName, void 0, this._accountDetails.inhibitLogin).response();\n    return this.parseStagesFromResponse(response);\n  }\n  async submitStage(stage) {\n    const auth = stage.generateAuthenticationData();\n    const { username, password, initialDeviceDisplayName, inhibitLogin } = this._accountDetails;\n    const request = this._hsApi.register(username, password, initialDeviceDisplayName, auth, inhibitLogin);\n    const response = await request.response();\n    const status = await request.responseCode();\n    const registrationResponse = __spreadProps(__spreadValues({}, response), { status });\n    return this.parseRegistrationResponse(registrationResponse, stage);\n  }\n  parseStagesFromResponse(response) {\n    const { session, params } = response;\n    const flow = this._flowSelector(response.flows);\n    if (!flow) {\n      throw new Error(\"flowSelector did not return any flow!\");\n    }\n    let firstStage;\n    let lastStage;\n    for (const stage of flow.stages) {\n      const registrationStage = this._createRegistrationStage(stage, session, params);\n      if (!firstStage) {\n        firstStage = registrationStage;\n        lastStage = registrationStage;\n      } else {\n        lastStage.setNextStage(registrationStage);\n        lastStage = registrationStage;\n      }\n    }\n    return firstStage;\n  }\n  async parseRegistrationResponse(response, currentStage) {\n    var _a;\n    switch (response.status) {\n      case 200:\n        this._registerResponse = response;\n        return void 0;\n      case 401:\n        if ((_a = response.completed) == null ? void 0 : _a.includes(currentStage.type)) {\n          return currentStage.nextStage;\n        } else {\n          throw new Error(\"This stage could not be completed!\");\n        }\n    }\n  }\n  _createRegistrationStage(type, session, params) {\n    switch (type) {\n      case \"m.login.dummy\":\n        return new DummyAuth(session, params == null ? void 0 : params[type]);\n      case \"m.login.terms\":\n        return new TermsAuth(session, params == null ? void 0 : params[type]);\n      case \"org.matrix.msc3231.login.registration_token\":\n      case \"m.login.registration_token\":\n        return new TokenAuth(session, params == null ? void 0 : params[type], type);\n      default:\n        throw new Error(`Unknown stage: ${type}`);\n    }\n  }\n  get authData() {\n    if (this._registerResponse) {\n      return {\n        accessToken: this._registerResponse.access_token,\n        homeserver: this.homeserver,\n        userId: this._registerResponse.user_id,\n        deviceId: this._registerResponse.device_id\n      };\n    }\n  }\n}\nconst LoadStatus = createEnum(\"NotLoading\", \"Login\", \"LoginFailed\", \"QueryAccount\", \"AccountSetup\", \"Loading\", \"SessionSetup\", \"Migrating\", \"FirstSync\", \"Error\", \"Ready\");\nconst LoginFailure = createEnum(\"Connection\", \"Credentials\", \"Unknown\");\nclass Client {\n  constructor(platform, features = new FeatureSet(0), options = {}) {\n    this._platform = platform;\n    this._sessionStartedByReconnector = false;\n    this._status = new ObservableValue$1(LoadStatus.NotLoading);\n    this._error = null;\n    this._loginFailure = null;\n    this._reconnector = null;\n    this._session = null;\n    this._sync = null;\n    this._sessionId = null;\n    this._storage = null;\n    this._requestScheduler = null;\n    this._olmPromise = platform.loadOlm();\n    this._workerPromise = platform.loadOlmWorker();\n    this._accountSetup = void 0;\n    this._deviceName = (options == null ? void 0 : options.deviceName) || \"Hydrogen\";\n    this._features = features;\n  }\n  createNewSessionId() {\n    return Math.floor(this._platform.random() * Number.MAX_SAFE_INTEGER).toString();\n  }\n  get sessionId() {\n    return this._sessionId;\n  }\n  async startWithExistingSession(sessionId) {\n    if (this._status.get() !== LoadStatus.NotLoading) {\n      return;\n    }\n    this._status.set(LoadStatus.Loading);\n    await this._platform.logger.run(\"load session\", async (log) => {\n      log.set(\"id\", sessionId);\n      try {\n        const sessionInfo = await this._platform.sessionInfoStorage.get(sessionId);\n        if (!sessionInfo) {\n          throw new Error(\"Invalid session id: \" + sessionId);\n        }\n        await this._loadSessionInfo(sessionInfo, null, log);\n        log.set(\"status\", this._status.get());\n      } catch (err) {\n        log.catch(err);\n        this._error = err;\n        this._status.set(LoadStatus.Error);\n      }\n    });\n  }\n  _parseLoginOptions(options, homeserver) {\n    const flows = options.flows;\n    const result = { homeserver };\n    for (const flow of flows) {\n      if (flow.type === \"m.login.password\") {\n        result.password = (username, password) => new PasswordLoginMethod({ homeserver, username, password });\n      } else if (flow.type === \"m.login.sso\" && flows.find((flow2) => flow2.type === \"m.login.token\")) {\n        result.sso = new SSOLoginHelper(homeserver);\n      } else if (flow.type === \"m.login.token\") {\n        result.token = (loginToken) => new TokenLoginMethod({ homeserver, loginToken });\n      }\n    }\n    return result;\n  }\n  queryLogin(initialHomeserver) {\n    return new AbortableOperation(async (setAbortable) => {\n      const { homeserver, issuer, account } = await lookupHomeserver(initialHomeserver, (url, options) => {\n        return setAbortable(this._platform.request(url, options));\n      });\n      if (issuer) {\n        try {\n          const oidcApi = new OidcApi({\n            issuer,\n            request: this._platform.request,\n            encoding: this._platform.encoding,\n            crypto: this._platform.crypto,\n            staticClients: this._platform.config[\"staticOidcClients\"]\n          });\n          await oidcApi.validate();\n          const guestAvailable = await oidcApi.isGuestAvailable();\n          return {\n            homeserver,\n            oidc: { issuer, account, guestAvailable }\n          };\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      const hsApi = new HomeServerApi({ homeserver, request: this._platform.request });\n      const response = await setAbortable(hsApi.getLoginFlows()).response();\n      return this._parseLoginOptions(response, homeserver);\n    });\n  }\n  async startRegistration(homeserver, username, password, initialDeviceDisplayName, flowSelector) {\n    const request = this._platform.request;\n    const hsApi = new HomeServerApi({ homeserver, request });\n    const registration = new Registration(homeserver, hsApi, {\n      username,\n      password,\n      initialDeviceDisplayName\n    }, flowSelector);\n    return registration;\n  }\n  async startWithAuthData({ accessToken, deviceId, userId, homeserver }) {\n    await this._platform.logger.run(\"startWithAuthData\", async (log) => {\n      await this._createSessionAfterAuth({ accessToken, deviceId, userId, homeserver }, true, log);\n    });\n  }\n  async startWithLogin(loginMethod, { inspectAccountSetup } = {}) {\n    const currentStatus = this._status.get();\n    if (currentStatus !== LoadStatus.LoginFailed && currentStatus !== LoadStatus.NotLoading && currentStatus !== LoadStatus.Error) {\n      return;\n    }\n    this._resetStatus();\n    await this._platform.logger.run(\"login\", async (log) => {\n      this._status.set(LoadStatus.Login);\n      this._platform.clock;\n      let sessionInfo;\n      try {\n        const request = this._platform.request;\n        const hsApi = new HomeServerApi({ homeserver: loginMethod.homeserver, request });\n        const loginData = await loginMethod.login(hsApi, this._deviceName, log);\n        const sessionId = this.createNewSessionId();\n        sessionInfo = {\n          deviceId: loginData.device_id,\n          userId: loginData.user_id,\n          homeserver: loginMethod.homeserver,\n          accessToken: loginData.access_token\n        };\n        if (loginData.refresh_token) {\n          sessionInfo.refreshToken = loginData.refresh_token;\n        }\n        if (loginData.expires_in) {\n          sessionInfo.expiresIn = loginData.expires_in;\n        }\n        if (loginData.id_token) {\n          sessionInfo.idToken = loginData.id_token;\n        }\n        if (loginData.oidc_issuer) {\n          sessionInfo.oidcIssuer = loginData.oidc_issuer;\n          sessionInfo.oidcClientId = loginData.oidc_client_id;\n          sessionInfo.accountManagementUrl = loginData.oidc_account_management_url;\n        }\n      } catch (err) {\n        this._error = err;\n        if (err.name === \"HomeServerError\") {\n          if (err.errcode === \"M_FORBIDDEN\") {\n            this._loginFailure = LoginFailure.Credentials;\n          } else {\n            this._loginFailure = LoginFailure.Unknown;\n          }\n          log.set(\"loginFailure\", this._loginFailure);\n          this._status.set(LoadStatus.LoginFailed);\n        } else if (err.name === \"ConnectionError\") {\n          this._loginFailure = LoginFailure.Connection;\n          this._status.set(LoadStatus.LoginFailed);\n        } else {\n          this._status.set(LoadStatus.Error);\n        }\n        return;\n      }\n      await this._createSessionAfterAuth(sessionInfo, inspectAccountSetup, log);\n    });\n  }\n  async _createSessionAfterAuth({ deviceId, userId, accessToken, refreshToken, homeserver, expiresIn, idToken, oidcIssuer, oidcClientId, accountManagementUrl }, inspectAccountSetup, log) {\n    const id = this.createNewSessionId();\n    const lastUsed = this._platform.clock.now();\n    const sessionInfo = {\n      id,\n      deviceId,\n      userId,\n      homeServer: homeserver,\n      homeserver,\n      accessToken,\n      lastUsed,\n      refreshToken,\n      oidcIssuer,\n      oidcClientId,\n      accountManagementUrl,\n      idToken\n    };\n    if (expiresIn) {\n      sessionInfo.accessTokenExpiresAt = lastUsed + expiresIn * 1e3;\n    }\n    let dehydratedDevice;\n    if (inspectAccountSetup) {\n      dehydratedDevice = await this._inspectAccountAfterLogin(sessionInfo, log);\n      if (dehydratedDevice) {\n        sessionInfo.deviceId = dehydratedDevice.deviceId;\n      }\n    }\n    log.set(\"id\", id);\n    await this._platform.sessionInfoStorage.add(sessionInfo);\n    try {\n      await this._loadSessionInfo(sessionInfo, dehydratedDevice, log);\n      log.set(\"status\", this._status.get());\n    } catch (err) {\n      log.catch(err);\n      dehydratedDevice == null ? void 0 : dehydratedDevice.dispose();\n      this._error = err;\n      this._status.set(LoadStatus.Error);\n    }\n  }\n  async _loadSessionInfo(sessionInfo, dehydratedDevice, log) {\n    log.set(\"appVersion\", this._platform.version);\n    const clock = this._platform.clock;\n    this._sessionStartedByReconnector = false;\n    this._status.set(LoadStatus.Loading);\n    this._reconnector = new Reconnector({\n      onlineStatus: this._platform.onlineStatus,\n      retryDelay: new ExponentialRetryDelay(clock.createTimeout),\n      createMeasure: clock.createMeasure\n    });\n    let accessToken;\n    if (sessionInfo.oidcIssuer) {\n      const oidcApi = new OidcApi({\n        issuer: sessionInfo.oidcIssuer,\n        staticClients: this._platform.config[\"staticOidcClients\"],\n        clientId: sessionInfo.oidcClientId,\n        request: this._platform.request,\n        encoding: this._platform.encoding,\n        crypto: this._platform.crypto\n      });\n      this._tokenRefresher = new TokenRefresher({\n        oidcApi,\n        clock: this._platform.clock,\n        accessToken: sessionInfo.accessToken,\n        accessTokenExpiresAt: sessionInfo.accessTokenExpiresAt,\n        refreshToken: sessionInfo.refreshToken,\n        anticipation: 30 * 1e3\n      });\n      this._tokenRefresher.token.subscribe((t) => {\n        this._platform.sessionInfoStorage.updateToken(sessionInfo.id, t.accessToken, t.accessTokenExpiresAt, t.refreshToken);\n      });\n      await this._tokenRefresher.start();\n      accessToken = this._tokenRefresher.accessToken;\n    } else {\n      accessToken = new ObservableValue$1(sessionInfo.accessToken);\n    }\n    const hsApi = new HomeServerApi({\n      homeserver: sessionInfo.homeServer,\n      accessToken,\n      request: this._platform.request,\n      reconnector: this._reconnector\n    });\n    this._sessionId = sessionInfo.id;\n    this._storage = await this._platform.storageFactory.create(sessionInfo.id, log);\n    const filteredSessionInfo = {\n      id: sessionInfo.id,\n      deviceId: sessionInfo.deviceId,\n      userId: sessionInfo.userId,\n      homeserver: sessionInfo.homeServer\n    };\n    if (sessionInfo.accountManagementUrl) {\n      filteredSessionInfo.accountManagementUrl = sessionInfo.accountManagementUrl;\n    }\n    const olm = await this._olmPromise;\n    let olmWorker = null;\n    if (this._workerPromise) {\n      olmWorker = await this._workerPromise;\n    }\n    this._requestScheduler = new RequestScheduler({ hsApi, clock });\n    this._requestScheduler.start();\n    const mediaRepository = new MediaRepository({\n      homeserver: sessionInfo.homeServer,\n      platform: this._platform\n    });\n    this._session = new Session({\n      storage: this._storage,\n      sessionInfo: filteredSessionInfo,\n      hsApi: this._requestScheduler.hsApi,\n      olm,\n      olmWorker,\n      mediaRepository,\n      platform: this._platform,\n      features: this._features\n    });\n    await this._session.load(log);\n    if (dehydratedDevice) {\n      await log.wrap(\"dehydrateIdentity\", (log2) => this._session.dehydrateIdentity(dehydratedDevice, log2));\n      await this._session.setupDehydratedDevice(dehydratedDevice.key, log);\n    } else if (!this._session.hasIdentity) {\n      this._status.set(LoadStatus.SessionSetup);\n      await log.wrap(\"createIdentity\", (log2) => this._session.createIdentity(log2));\n    }\n    this._sync = new Sync({ hsApi: this._requestScheduler.hsApi, storage: this._storage, session: this._session, logger: this._platform.logger });\n    this._reconnectSubscription = this._reconnector.connectionStatus.subscribe((state) => {\n      if (state === ConnectionStatus.Online) {\n        this._platform.logger.runDetached(\"reconnect\", async (log2) => {\n          this._requestScheduler.start();\n          this._sync.start();\n          this._sessionStartedByReconnector = true;\n          const d = dehydratedDevice;\n          dehydratedDevice = void 0;\n          await log2.wrap(\"session start\", (log3) => this._session.start(this._reconnector.lastVersionsResponse, d, log3));\n        });\n      }\n    });\n    await log.wrap(\"wait first sync\", () => this._waitForFirstSync());\n    if (this._isDisposed) {\n      return;\n    }\n    this._status.set(LoadStatus.Ready);\n    if (!this._sessionStartedByReconnector) {\n      const lastVersionsResponse = await hsApi.versions({ timeout: 1e4, log }).response();\n      if (this._isDisposed) {\n        return;\n      }\n      const d = dehydratedDevice;\n      dehydratedDevice = void 0;\n      await log.wrap(\"session start\", (log2) => this._session.start(lastVersionsResponse, d, log2));\n    }\n  }\n  async _waitForFirstSync() {\n    this._sync.start();\n    this._status.set(LoadStatus.FirstSync);\n    this._waitForFirstSyncHandle = this._sync.status.waitFor((s) => {\n      var _a;\n      if (s === SyncStatus.Stopped) {\n        return ((_a = this._sync.error) == null ? void 0 : _a.name) !== \"ConnectionError\";\n      }\n      return s === SyncStatus.Syncing;\n    });\n    try {\n      await this._waitForFirstSyncHandle.promise;\n      if (this._sync.status.get() === SyncStatus.Stopped && this._sync.error) {\n        throw this._sync.error;\n      }\n    } catch (err) {\n      if (err.name === \"AbortError\") {\n        return;\n      }\n      throw err;\n    } finally {\n      this._waitForFirstSyncHandle = null;\n    }\n  }\n  _inspectAccountAfterLogin(sessionInfo, log) {\n    return log.wrap(\"inspectAccount\", async (log2) => {\n      var _a;\n      this._status.set(LoadStatus.QueryAccount);\n      const hsApi = new HomeServerApi({\n        homeserver: sessionInfo.homeServer,\n        accessToken: sessionInfo.accessToken,\n        request: this._platform.request\n      });\n      const olm = await this._olmPromise;\n      let encryptedDehydratedDevice;\n      try {\n        encryptedDehydratedDevice = await getDehydratedDevice(hsApi, olm, this._platform, log2);\n      } catch (err) {\n        if (err.name === \"HomeServerError\") {\n          log2.set(\"not_supported\", true);\n        } else {\n          throw err;\n        }\n      }\n      if (encryptedDehydratedDevice) {\n        let resolveStageFinish;\n        const promiseStageFinish = new Promise((r) => resolveStageFinish = r);\n        this._accountSetup = new AccountSetup(encryptedDehydratedDevice, resolveStageFinish);\n        this._status.set(LoadStatus.AccountSetup);\n        await promiseStageFinish;\n        const dehydratedDevice = (_a = this._accountSetup) == null ? void 0 : _a._dehydratedDevice;\n        this._accountSetup = null;\n        return dehydratedDevice;\n      }\n    });\n  }\n  get accountSetup() {\n    return this._accountSetup;\n  }\n  get loadStatus() {\n    return this._status;\n  }\n  get loadError() {\n    return this._error;\n  }\n  get loginFailure() {\n    return this._loginFailure;\n  }\n  get sync() {\n    return this._sync;\n  }\n  get session() {\n    return this._session;\n  }\n  get reconnector() {\n    return this._reconnector;\n  }\n  get _isDisposed() {\n    return !this._reconnector;\n  }\n  startLogout(sessionId, urlRouter) {\n    return this._platform.logger.run(\"logout\", async (log) => {\n      this._sessionId = sessionId;\n      log.set(\"id\", this._sessionId);\n      const sessionInfo = await this._platform.sessionInfoStorage.get(this._sessionId);\n      if (!sessionInfo) {\n        throw new Error(`Could not find session for id ${this._sessionId}`);\n      }\n      let endSessionRedirectEndpoint;\n      try {\n        if (sessionInfo.oidcClientId) {\n          const oidcApi = new OidcApi({\n            issuer: sessionInfo.oidcIssuer,\n            staticClients: this._platform.config[\"staticOidcClients\"],\n            clientId: sessionInfo.oidcClientId,\n            request: this._platform.request,\n            encoding: this._platform.encoding,\n            crypto: this._platform.crypto,\n            urlRouter\n          });\n          await oidcApi.revokeToken({ token: sessionInfo.accessToken, type: \"access\" });\n          if (sessionInfo.refreshToken) {\n            await oidcApi.revokeToken({ token: sessionInfo.refreshToken, type: \"refresh\" });\n          }\n          endSessionRedirectEndpoint = await oidcApi.endSessionEndpoint({\n            idTokenHint: sessionInfo.idToken,\n            logoutHint: sessionInfo.userId\n          });\n        } else {\n          const hsApi = new HomeServerApi({\n            homeserver: sessionInfo.homeServer,\n            accessToken: sessionInfo.accessToken,\n            request: this._platform.request\n          });\n          await hsApi.logout({ log }).response();\n        }\n      } catch (err) {\n        console.error(err);\n      }\n      await this.deleteSession(log);\n      if (endSessionRedirectEndpoint) {\n        this._platform.openUrl(endSessionRedirectEndpoint);\n      }\n    });\n  }\n  startForcedLogout(sessionId) {\n    return this._platform.logger.run(\"forced-logout\", async (log) => {\n      this._sessionId = sessionId;\n      log.set(\"id\", this._sessionId);\n      await this.deleteSession(log);\n    });\n  }\n  dispose() {\n    if (this._reconnectSubscription) {\n      this._reconnectSubscription();\n      this._reconnectSubscription = null;\n    }\n    this._reconnector = null;\n    if (this._requestScheduler) {\n      this._requestScheduler.stop();\n      this._requestScheduler = null;\n    }\n    if (this._sync) {\n      this._sync.stop();\n      this._sync = null;\n    }\n    if (this._tokenRefresher) {\n      this._tokenRefresher.stop();\n      this._tokenRefresher = null;\n    }\n    if (this._session) {\n      this._session.dispose();\n      this._session = null;\n    }\n    if (this._waitForFirstSyncHandle) {\n      this._waitForFirstSyncHandle.dispose();\n      this._waitForFirstSyncHandle = null;\n    }\n    if (this._storage) {\n      this._storage.close();\n      this._storage = null;\n    }\n  }\n  async deleteSession(log) {\n    if (this._sessionId) {\n      this.dispose();\n      await Promise.all([\n        log.wrap(\"storageFactory\", () => this._platform.storageFactory.delete(this._sessionId)),\n        log.wrap(\"sessionInfoStorage\", () => this._platform.sessionInfoStorage.delete(this._sessionId))\n      ]);\n      this._sessionId = null;\n    }\n  }\n  _resetStatus() {\n    this._status.set(LoadStatus.NotLoading);\n    this._error = null;\n    this._loginFailure = null;\n  }\n}\nclass AccountSetup {\n  constructor(encryptedDehydratedDevice, finishStage) {\n    this._encryptedDehydratedDevice = encryptedDehydratedDevice;\n    this._dehydratedDevice = void 0;\n    this._finishStage = finishStage;\n  }\n  get encryptedDehydratedDevice() {\n    return this._encryptedDehydratedDevice;\n  }\n  finish(dehydratedDevice) {\n    this._dehydratedDevice = dehydratedDevice;\n    this._finishStage();\n  }\n}\nclass OIDCLoginMethod {\n  constructor({\n    nonce,\n    codeVerifier,\n    code,\n    homeserver,\n    redirectUri,\n    oidcApi,\n    accountManagementUrl\n  }) {\n    this._oidcApi = oidcApi;\n    this._code = code;\n    this._codeVerifier = codeVerifier;\n    this._nonce = nonce;\n    this._redirectUri = redirectUri;\n    this.homeserver = homeserver;\n    this._accountManagementUrl = accountManagementUrl;\n  }\n  async login(hsApi, _deviceName, log) {\n    const { access_token, refresh_token, expires_in, id_token } = await this._oidcApi.completeAuthorizationCodeGrant({\n      code: this._code,\n      codeVerifier: this._codeVerifier,\n      redirectUri: this._redirectUri\n    });\n    const { user_id, device_id } = await hsApi.whoami({\n      log,\n      accessTokenOverride: access_token\n    }).response();\n    const oidc_issuer = this._oidcApi.issuer;\n    const oidc_client_id = await this._oidcApi.clientId();\n    return { oidc_issuer, oidc_client_id, access_token, refresh_token, expires_in, id_token, user_id, device_id, oidc_account_management_url: this._accountManagementUrl };\n  }\n}\nasync function submitLogsToRageshakeServer(data, logsBlob, submitUrl, request) {\n  const formData = /* @__PURE__ */ new Map();\n  if (data.text) {\n    formData.set(\"text\", data.text);\n  }\n  formData.set(\"user_agent\", data.userAgent);\n  formData.set(\"app\", data.app);\n  formData.set(\"version\", data.version);\n  if (data.label) {\n    formData.set(\"label\", data.label);\n  }\n  formData.set(\"file\", { name: \"logs.json\", blob: logsBlob });\n  const headers = /* @__PURE__ */ new Map();\n  headers.set(\"Accept\", \"application/json\");\n  const result = request(submitUrl, {\n    method: \"POST\",\n    body: formData,\n    headers\n  });\n  let response;\n  try {\n    response = await result.response();\n  } catch (err) {\n    throw new Error(`Could not submit logs to ${submitUrl}, got error ${err.message}`);\n  }\n  const { status, body } = response;\n  if (status < 200 || status >= 300) {\n    throw new Error(`Could not submit logs to ${submitUrl}, got status code ${status} with body ${body}`);\n  }\n}\nasync function submitLogsFromSessionToDefaultServer(session, platform) {\n  const { bugReportEndpointUrl } = platform.config;\n  if (!bugReportEndpointUrl) {\n    throw new Error(\"no server configured to submit logs\");\n  }\n  const logReporters = platform.logger.reporters;\n  const exportReporter = logReporters.find((r) => !!r[\"export\"]);\n  if (!exportReporter) {\n    throw new Error(\"No logger that can export configured\");\n  }\n  const logExport = await exportReporter.export();\n  await submitLogsToRageshakeServer({\n    app: \"hydrogen\",\n    userAgent: platform.description,\n    version: platform.version,\n    text: `Submit logs from settings for user ${session.userId} on device ${session.deviceId}`\n  }, logExport.asBlob(), bugReportEndpointUrl, platform.request);\n}\nclass Navigation {\n  constructor(allowsChild2) {\n    this._observables = /* @__PURE__ */ new Map();\n    this._allowsChild = allowsChild2;\n    this._path = new Path([], allowsChild2);\n    this._pathObservable = new ObservableValue$1(this._path);\n  }\n  get pathObservable() {\n    return this._pathObservable;\n  }\n  get path() {\n    return this._path;\n  }\n  push(type, ...value) {\n    const newPath = this.path.with(new Segment(type, ...value));\n    if (newPath) {\n      this.applyPath(newPath);\n    }\n  }\n  applyPath(path) {\n    const oldPath = this._path;\n    this._path = path;\n    for (let i = oldPath.segments.length - 1; i >= 0; i -= 1) {\n      const segment = oldPath.segments[i];\n      if (!this._path.get(segment.type)) {\n        const observable = this._observables.get(segment.type);\n        observable == null ? void 0 : observable.emitIfChanged();\n      }\n    }\n    for (const segment of this._path.segments) {\n      const observable = this._observables.get(segment.type);\n      observable == null ? void 0 : observable.emitIfChanged();\n    }\n    this._pathObservable.set(this._path);\n  }\n  observe(type) {\n    let observable = this._observables.get(type);\n    if (!observable) {\n      observable = new SegmentObservable(this, type);\n      this._observables.set(type, observable);\n    }\n    return observable;\n  }\n  pathFrom(segments) {\n    let parent;\n    let i;\n    for (i = 0; i < segments.length; i += 1) {\n      if (!this._allowsChild(parent, segments[i])) {\n        return new Path(segments.slice(0, i), this._allowsChild);\n      }\n      parent = segments[i];\n    }\n    return new Path(segments, this._allowsChild);\n  }\n  segment(type, ...value) {\n    return new Segment(type, ...value);\n  }\n}\nfunction segmentValueEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    const len = Math.max(a.length, b.length);\n    for (let i = 0; i < len; i += 1) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\nclass Segment {\n  constructor(type, ...value) {\n    this.type = type;\n    this.value = value[0] === void 0 ? true : value[0];\n  }\n}\nclass Path {\n  constructor(segments = [], allowsChild2) {\n    this._segments = segments;\n    this._allowsChild = allowsChild2;\n  }\n  clone() {\n    return new Path(this._segments.slice(), this._allowsChild);\n  }\n  with(segment) {\n    let index = this._segments.length - 1;\n    do {\n      if (this._allowsChild(this._segments[index], segment)) {\n        const newSegments = this._segments.slice(0, index + 1);\n        newSegments.push(segment);\n        return new Path(newSegments, this._allowsChild);\n      }\n      index -= 1;\n    } while (index >= -1);\n    return void 0;\n  }\n  until(type) {\n    const index = this._segments.findIndex((s) => s.type === type);\n    if (index !== -1) {\n      return new Path(this._segments.slice(0, index + 1), this._allowsChild);\n    }\n    return new Path([], this._allowsChild);\n  }\n  get(type) {\n    return this._segments.find((s) => s.type === type);\n  }\n  replace(segment) {\n    const index = this._segments.findIndex((s) => s.type === segment.type);\n    if (index !== -1) {\n      const parent = this._segments[index - 1];\n      if (this._allowsChild(parent, segment)) {\n        const child = this._segments[index + 1];\n        if (!child || this._allowsChild(segment, child)) {\n          const newSegments = this._segments.slice();\n          newSegments[index] = segment;\n          return new Path(newSegments, this._allowsChild);\n        }\n      }\n    }\n    return void 0;\n  }\n  get segments() {\n    return this._segments;\n  }\n}\nclass SegmentObservable extends BaseObservableValue$1 {\n  constructor(navigation, type) {\n    var _a;\n    super();\n    this._navigation = navigation;\n    this._type = type;\n    this._lastSetValue = (_a = navigation.path.get(type)) == null ? void 0 : _a.value;\n  }\n  get() {\n    const path = this._navigation.path;\n    const segment = path.get(this._type);\n    const value = segment == null ? void 0 : segment.value;\n    return value;\n  }\n  emitIfChanged() {\n    const newValue = this.get();\n    if (!segmentValueEqual(newValue, this._lastSetValue)) {\n      this._lastSetValue = newValue;\n      this.emit(newValue);\n    }\n  }\n}\nclass URLRouter {\n  constructor(history, navigation, parseUrlPath2, stringifyPath2) {\n    this._isApplyingUrl = false;\n    this._history = history;\n    this._navigation = navigation;\n    this._parseUrlPath = parseUrlPath2;\n    this._stringifyPath = stringifyPath2;\n    this._defaultSessionId = this._getLastSessionId();\n  }\n  _getLastSessionId() {\n    var _a;\n    const navPath = this._urlAsNavPath(this._history.getLastSessionUrl() || \"\");\n    const sessionId = (_a = navPath.get(\"session\")) == null ? void 0 : _a.value;\n    if (typeof sessionId === \"string\") {\n      return sessionId;\n    }\n    return void 0;\n  }\n  attach() {\n    this._subscription = this._history.subscribe((url) => this._applyUrl(url));\n    this._pathSubscription = this._navigation.pathObservable.subscribe((path) => this._applyNavPathToHistory(path));\n    this._applyUrl(this._history.get());\n  }\n  dispose() {\n    if (this._subscription) {\n      this._subscription = this._subscription();\n    }\n    if (this._pathSubscription) {\n      this._pathSubscription = this._pathSubscription();\n    }\n  }\n  _applyNavPathToHistory(path) {\n    const url = this.urlForPath(path);\n    if (url !== this._history.get()) {\n      if (this._isApplyingUrl) {\n        this._history.replaceUrlSilently(url);\n      } else {\n        this._history.pushUrlSilently(url);\n      }\n    }\n  }\n  _applyNavPathToNavigation(navPath) {\n    this._isApplyingUrl = true;\n    this._navigation.applyPath(navPath);\n    this._isApplyingUrl = false;\n  }\n  _urlAsNavPath(url) {\n    const urlPath = this._history.urlAsPath(url);\n    return this._navigation.pathFrom(this._parseUrlPath(urlPath, this._navigation.path, this._defaultSessionId));\n  }\n  _applyUrl(url) {\n    const navPath = this._urlAsNavPath(url);\n    this._applyNavPathToNavigation(navPath);\n  }\n  pushUrl(url) {\n    this._history.pushUrl(url);\n  }\n  tryRestoreLastUrl() {\n    const lastNavPath = this._urlAsNavPath(this._history.getLastSessionUrl() || \"\");\n    if (lastNavPath.segments.length !== 0) {\n      this._applyNavPathToNavigation(lastNavPath);\n      return true;\n    }\n    return false;\n  }\n  urlForSegments(segments) {\n    let path = this._navigation.path;\n    for (const segment of segments) {\n      path = path.with(segment);\n      if (!path) {\n        return;\n      }\n    }\n    return this.urlForPath(path);\n  }\n  urlForSegment(type, ...value) {\n    return this.urlForSegments([this._navigation.segment(type, ...value)]);\n  }\n  urlUntilSegment(type) {\n    return this.urlForPath(this._navigation.path.until(type));\n  }\n  urlForPath(path) {\n    return this._history.pathAsUrl(this._stringifyPath(path));\n  }\n  openRoomActionUrl(roomId) {\n    const urlPath = `${this._stringifyPath(this._navigation.path.until(\"session\"))}/open-room/${encodeURIComponent(roomId)}`;\n    return this._history.pathAsUrl(urlPath);\n  }\n  createSSOCallbackURL() {\n    return window.location.origin;\n  }\n  createOIDCRedirectURL() {\n    return window.location.origin;\n  }\n  createOIDCPostLogoutRedirectURL() {\n    return window.location.origin;\n  }\n  absoluteAppUrl() {\n    return window.location.origin;\n  }\n  absoluteUrlForAsset(asset) {\n    return new URL(\"/assets/\" + asset, window.location.origin).toString();\n  }\n  normalizeUrl() {\n    this._history.replaceUrlSilently(`${window.location.origin}/${window.location.hash}`);\n  }\n}\nfunction createNavigation() {\n  return new Navigation(allowsChild);\n}\nfunction createRouter({ history, navigation }) {\n  return new URLRouter(history, navigation, parseUrlPath, stringifyPath);\n}\nfunction allowsChild(parent, child) {\n  const { type } = child;\n  switch (parent == null ? void 0 : parent.type) {\n    case void 0:\n      return type === \"login\" || type === \"session\" || type === \"sso\" || type === \"logout\" || type === \"oidc\";\n    case \"session\":\n      return type === \"room\" || type === \"rooms\" || type === \"settings\" || type === \"create-room\" || type === \"join-room\" || type === \"device-verification\";\n    case \"rooms\":\n      return type === \"room\" || type === \"empty-grid-tile\";\n    case \"room\":\n      return type === \"lightbox\" || type === \"right-panel\";\n    case \"right-panel\":\n      return type === \"details\" || type === \"members\" || type === \"member\";\n    case \"logout\":\n      return type === \"forced\";\n    default:\n      return false;\n  }\n}\nfunction roomsSegmentWithRoom(rooms, roomId, path) {\n  if (!rooms.value.includes(roomId)) {\n    const emptyGridTile = path.get(\"empty-grid-tile\");\n    const oldRoom = path.get(\"room\");\n    let index = 0;\n    if (emptyGridTile) {\n      index = emptyGridTile.value;\n    } else if (oldRoom) {\n      index = rooms.value.indexOf(oldRoom.value);\n    }\n    const roomIds = rooms.value.slice();\n    roomIds[index] = roomId;\n    return new Segment(\"rooms\", roomIds);\n  } else {\n    return rooms;\n  }\n}\nfunction pushRightPanelSegment(array, segment, ...value) {\n  array.push(new Segment(\"right-panel\"));\n  array.push(new Segment(segment, ...value));\n}\nfunction addPanelIfNeeded(navigation, path) {\n  const segments = navigation.path.segments;\n  const i = segments.findIndex((segment) => segment.type === \"right-panel\");\n  let _path = path;\n  if (i !== -1) {\n    _path = path.until(\"room\");\n    _path = _path.with(segments[i]);\n    _path = _path.with(segments[i + 1]);\n  }\n  return _path;\n}\nfunction parseUrlPath(urlPath, currentNavPath, defaultSessionId) {\n  const segments = [];\n  if (urlPath.includes(\"state\")) {\n    const params = new URLSearchParams(urlPath);\n    const state = params.get(\"state\");\n    const code = params.get(\"code\");\n    const error = params.get(\"error\");\n    if (state) {\n      if (code) {\n        segments.push(new Segment(\"oidc\", {\n          success: true,\n          state,\n          code\n        }));\n        return segments;\n      } else if (error) {\n        segments.push(new Segment(\"oidc\", {\n          state,\n          success: false,\n          error,\n          errorDescription: params.get(\"error_description\"),\n          errorUri: params.get(\"error_uri\")\n        }));\n        return segments;\n      }\n    }\n  }\n  const parts = urlPath.substring(1).split(\"/\");\n  const iterator = parts[Symbol.iterator]();\n  let next;\n  while (!(next = iterator.next()).done) {\n    const type = next.value;\n    if (type === \"rooms\") {\n      const roomsValue = iterator.next().value;\n      if (roomsValue === void 0) {\n        break;\n      }\n      const roomIds = roomsValue.split(\",\").map((id) => decodeURIComponent(id));\n      segments.push(new Segment(type, roomIds));\n      const selectedIndex = parseInt(iterator.next().value || \"0\", 10);\n      const roomId = roomIds[selectedIndex];\n      if (roomId) {\n        segments.push(new Segment(\"room\", roomId));\n      } else {\n        segments.push(new Segment(\"empty-grid-tile\", selectedIndex));\n      }\n    } else if (type === \"open-room\") {\n      let roomId = iterator.next().value;\n      if (!roomId) {\n        break;\n      }\n      roomId = decodeURIComponent(roomId);\n      const rooms = currentNavPath.get(\"rooms\");\n      if (rooms) {\n        segments.push(roomsSegmentWithRoom(rooms, roomId, currentNavPath));\n      }\n      segments.push(new Segment(\"room\", roomId));\n      const openRoomPartIndex = parts.findIndex((part) => part === \"open-room\");\n      const hasOnlyRoomIdAfterPart = openRoomPartIndex >= parts.length - 2;\n      if (hasOnlyRoomIdAfterPart) {\n        const previousSegments = currentNavPath.segments;\n        const i = previousSegments.findIndex((s) => s.type === \"right-panel\");\n        if (i !== -1) {\n          segments.push(...previousSegments.slice(i));\n        }\n      }\n    } else if (type === \"last-session\") {\n      let sessionSegment = currentNavPath.get(\"session\");\n      if (typeof (sessionSegment == null ? void 0 : sessionSegment.value) !== \"string\" && defaultSessionId) {\n        sessionSegment = new Segment(\"session\", defaultSessionId);\n      }\n      if (sessionSegment) {\n        segments.push(sessionSegment);\n      }\n    } else if (type === \"details\" || type === \"members\") {\n      pushRightPanelSegment(segments, type);\n    } else if (type === \"member\") {\n      let userId = iterator.next().value;\n      if (!userId) {\n        break;\n      }\n      userId = decodeURIComponent(userId);\n      pushRightPanelSegment(segments, type, userId);\n    } else if (type.includes(\"loginToken\")) {\n      const loginToken = type.split(\"=\").pop();\n      segments.push(new Segment(\"sso\", loginToken));\n    } else {\n      let value = iterator.next().value;\n      if (value) {\n        value = decodeURIComponent(value);\n      }\n      segments.push(new Segment(type, value));\n    }\n  }\n  return segments;\n}\nfunction stringifyPath(path) {\n  let urlPath = \"\";\n  let prevSegment;\n  for (const segment of path.segments) {\n    if (segment.type === \"oidc\") {\n      continue;\n    }\n    const encodedSegmentValue = encodeSegmentValue(segment.value);\n    switch (segment.type) {\n      case \"rooms\":\n        urlPath += `/rooms/${encodedSegmentValue}`;\n        break;\n      case \"empty-grid-tile\":\n        urlPath += `/${encodedSegmentValue}`;\n        break;\n      case \"room\":\n        if ((prevSegment == null ? void 0 : prevSegment.type) === \"rooms\") {\n          const index = prevSegment.value.indexOf(segment.value);\n          urlPath += `/${index}`;\n        } else {\n          urlPath += `/${segment.type}/${encodedSegmentValue}`;\n        }\n        break;\n      case \"right-panel\":\n      case \"sso\":\n      case \"oidc-callback\":\n      case \"oidc-error\":\n        continue;\n      default:\n        urlPath += `/${segment.type}`;\n        if (encodedSegmentValue) {\n          urlPath += `/${encodedSegmentValue}`;\n        }\n    }\n    prevSegment = segment;\n  }\n  return urlPath;\n}\nfunction encodeSegmentValue(value) {\n  if (value === true) {\n    return \"\";\n  } else if (Array.isArray(value)) {\n    return value.map((v) => encodeURIComponent(v)).join(\",\");\n  } else {\n    return encodeURIComponent(value);\n  }\n}\nfunction avatarInitials(name) {\n  let firstChar = name.charAt(0);\n  if (firstChar === \"!\" || firstChar === \"@\" || firstChar === \"#\") {\n    firstChar = name.charAt(1);\n  }\n  return firstChar.toUpperCase();\n}\nfunction hashCode(str) {\n  let hash = 0;\n  let i;\n  let chr;\n  if (str.length === 0) {\n    return hash;\n  }\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0;\n  }\n  return Math.abs(hash);\n}\nfunction getIdentifierColorNumber(id) {\n  return hashCode(id) % 8 + 1;\n}\nfunction getAvatarHttpUrl(avatarUrl, cssSize, platform, mediaRepository) {\n  if (avatarUrl) {\n    const imageSize = cssSize * platform.devicePixelRatio;\n    return mediaRepository.mxcUrlThumbnail(avatarUrl, imageSize, imageSize, \"crop\");\n  }\n  return void 0;\n}\nconst KIND_ORDER = [\"roomBeingCreated\", \"invite\", \"room\"];\nclass BaseTileViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._isOpen = false;\n    this._hidden = false;\n  }\n  get hidden() {\n    return this._hidden;\n  }\n  set hidden(value) {\n    if (value !== this._hidden) {\n      this._hidden = value;\n      this.emitChange(\"hidden\");\n    }\n  }\n  close() {\n    if (this._isOpen) {\n      this._isOpen = false;\n      this.emitChange(\"isOpen\");\n    }\n  }\n  open() {\n    if (!this._isOpen) {\n      this._isOpen = true;\n      this.emitChange(\"isOpen\");\n    }\n  }\n  get isOpen() {\n    return this._isOpen;\n  }\n  compare(other) {\n    if (other.kind !== this.kind) {\n      return KIND_ORDER.indexOf(this.kind) - KIND_ORDER.indexOf(other.kind);\n    }\n    return 0;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._avatarSource.avatarColorId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._avatarSource.avatarUrl, size, this.platform, this._avatarSource.mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n}\nclass RoomTileViewModel extends BaseTileViewModel {\n  constructor(options) {\n    super(options);\n    const { room } = options;\n    this._room = room;\n    this._url = this.urlRouter.openRoomActionUrl(this._room.id);\n  }\n  get kind() {\n    return \"room\";\n  }\n  get url() {\n    return this._url;\n  }\n  compare(other) {\n    const parentComparison = super.compare(other);\n    if (parentComparison !== 0) {\n      return parentComparison;\n    }\n    const myRoom = this._room;\n    const theirRoom = other._room;\n    if (myRoom.isLowPriority !== theirRoom.isLowPriority) {\n      if (myRoom.isLowPriority) {\n        return 1;\n      }\n      return -1;\n    }\n    const myTimestamp = myRoom.lastMessageTimestamp;\n    const theirTimestamp = theirRoom.lastMessageTimestamp;\n    const myTimestampValid = Number.isSafeInteger(myTimestamp);\n    const theirTimestampValid = Number.isSafeInteger(theirTimestamp);\n    if (myTimestampValid !== theirTimestampValid) {\n      if (!theirTimestampValid) {\n        return -1;\n      }\n      return 1;\n    }\n    const timeDiff = theirTimestamp - myTimestamp;\n    if (timeDiff === 0 || !theirTimestampValid || !myTimestampValid) {\n      const nameCmp = this.name.localeCompare(other.name);\n      if (nameCmp === 0) {\n        return this._room.id.localeCompare(other._room.id);\n      }\n      return nameCmp;\n    }\n    return timeDiff;\n  }\n  get isUnread() {\n    return this._room.isUnread;\n  }\n  get name() {\n    return this._room.name || this.i18n`Empty Room`;\n  }\n  get badgeCount() {\n    return this._room.notificationCount;\n  }\n  get isHighlighted() {\n    return this._room.highlightCount !== 0;\n  }\n  get _avatarSource() {\n    return this._room;\n  }\n}\nfunction comparePrimitive(a, b) {\n  if (a === b) {\n    return 0;\n  } else {\n    return a < b ? -1 : 1;\n  }\n}\nclass InviteTileViewModel extends BaseTileViewModel {\n  constructor(options) {\n    super(options);\n    const { invite } = options;\n    this._invite = invite;\n    this._url = this.urlRouter.openRoomActionUrl(this._invite.id);\n  }\n  get busy() {\n    return this._invite.accepting || this._invite.rejecting;\n  }\n  get kind() {\n    return \"invite\";\n  }\n  get url() {\n    return this._url;\n  }\n  get name() {\n    return this._invite.name;\n  }\n  get isHighlighted() {\n    return true;\n  }\n  get isUnread() {\n    return true;\n  }\n  get badgeCount() {\n    return this.i18n`!`;\n  }\n  get _avatarSource() {\n    return this._invite;\n  }\n  compare(other) {\n    const parentComparison = super.compare(other);\n    if (parentComparison !== 0) {\n      return parentComparison;\n    }\n    const timeDiff = other._invite.timestamp - this._invite.timestamp;\n    if (timeDiff !== 0) {\n      return timeDiff;\n    }\n    return comparePrimitive(this._invite.id, other._invite.id);\n  }\n}\nclass RoomBeingCreatedTileViewModel extends BaseTileViewModel {\n  constructor(options) {\n    super(options);\n    const { roomBeingCreated } = options;\n    this._roomBeingCreated = roomBeingCreated;\n    this._url = this.urlRouter.openRoomActionUrl(this._roomBeingCreated.id);\n  }\n  get busy() {\n    return !this._roomBeingCreated.error;\n  }\n  get kind() {\n    return \"roomBeingCreated\";\n  }\n  get isHighlighted() {\n    return !this.busy;\n  }\n  get badgeCount() {\n    return !this.busy && this.i18n`Failed`;\n  }\n  get url() {\n    return this._url;\n  }\n  get name() {\n    return this._roomBeingCreated.name;\n  }\n  get _avatarSource() {\n    return this._roomBeingCreated;\n  }\n  compare(other) {\n    const parentCmp = super.compare(other);\n    if (parentCmp !== 0) {\n      return parentCmp;\n    }\n    const nameCmp = comparePrimitive(this.name, other.name);\n    if (nameCmp === 0) {\n      return comparePrimitive(this._roomBeingCreated.id, other._roomBeingCreated.id);\n    } else {\n      return nameCmp;\n    }\n  }\n  avatarUrl(size) {\n    var _a;\n    return (_a = this._roomBeingCreated.avatarBlobUrl) != null ? _a : super.avatarUrl(size);\n  }\n}\nclass RoomFilter {\n  constructor(query) {\n    this._parts = query.split(\" \").map((s) => s.toLowerCase().trim());\n  }\n  matches(roomTileVM) {\n    const name = roomTileVM.name.toLowerCase();\n    return this._parts.every((p) => name.includes(p));\n  }\n}\nclass LeftPanelViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { session } = options;\n    this._tileViewModelsMap = this._mapTileViewModels(session.roomsBeingCreated, session.invites, session.rooms);\n    this._tileViewModelsFilterMap = new ApplyMap(this._tileViewModelsMap);\n    this._tileViewModels = this._tileViewModelsFilterMap.sortValues((a, b) => a.compare(b));\n    this._currentTileVM = null;\n    this._setupNavigation();\n    this._closeUrl = this.urlRouter.urlForSegment(\"session\");\n    this._settingsUrl = this.urlRouter.urlForSegment(\"settings\");\n  }\n  _mapTileViewModels(roomsBeingCreated, invites, rooms) {\n    const allTiles = invites.join(roomsBeingCreated, rooms).mapValues((item, emitChange) => {\n      var _a;\n      let vm;\n      if (item.isBeingCreated) {\n        vm = new RoomBeingCreatedTileViewModel(this.childOptions({ roomBeingCreated: item, emitChange }));\n      } else if (item.isInvite) {\n        vm = new InviteTileViewModel(this.childOptions({ invite: item, emitChange }));\n      } else {\n        vm = new RoomTileViewModel(this.childOptions({ room: item, emitChange }));\n      }\n      const isOpen = ((_a = this.navigation.path.get(\"room\")) == null ? void 0 : _a.value) === item.id;\n      if (isOpen) {\n        vm.open();\n        this._updateCurrentVM(vm);\n      }\n      return vm;\n    });\n    return allTiles;\n  }\n  _updateCurrentVM(vm) {\n    var _a;\n    (_a = this._currentTileVM) == null ? void 0 : _a.close();\n    this._currentTileVM = vm;\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  get settingsUrl() {\n    return this._settingsUrl;\n  }\n  showCreateRoomView() {\n    this.navigation.push(\"create-room\");\n  }\n  showJoinRoomView() {\n    this.navigation.push(\"join-room\");\n  }\n  _setupNavigation() {\n    const roomObservable = this.navigation.observe(\"room\");\n    this.track(roomObservable.subscribe((roomId) => this._open(roomId)));\n    const gridObservable = this.navigation.observe(\"rooms\");\n    this.gridEnabled = !!gridObservable.get();\n    this.track(gridObservable.subscribe((roomIds) => {\n      const changed = this.gridEnabled ^ !!roomIds;\n      this.gridEnabled = !!roomIds;\n      if (changed) {\n        this.emitChange(\"gridEnabled\");\n      }\n    }));\n  }\n  _open(roomId) {\n    var _a, _b;\n    (_a = this._currentTileVM) == null ? void 0 : _a.close();\n    this._currentTileVM = null;\n    if (roomId) {\n      this._currentTileVM = this._tileViewModelsMap.get(roomId);\n      (_b = this._currentTileVM) == null ? void 0 : _b.open();\n    }\n  }\n  toggleGrid() {\n    const room = this.navigation.path.get(\"room\");\n    let path = this.navigation.path.until(\"session\");\n    if (this.gridEnabled) {\n      if (room) {\n        path = path.with(room);\n        path = addPanelIfNeeded(this.navigation, path);\n      }\n    } else {\n      if (room) {\n        path = path.with(this.navigation.segment(\"rooms\", [room.value]));\n        path = path.with(room);\n        path = addPanelIfNeeded(this.navigation, path);\n      } else {\n        path = path.with(this.navigation.segment(\"rooms\", []));\n        path = path.with(this.navigation.segment(\"empty-grid-tile\", 0));\n      }\n    }\n    this.navigation.applyPath(path);\n  }\n  get tileViewModels() {\n    return this._tileViewModels;\n  }\n  clearFilter() {\n    this._tileViewModelsFilterMap.setApply(null);\n    this._tileViewModelsFilterMap.applyOnce((roomId, vm) => vm.hidden = false);\n  }\n  setFilter(query) {\n    query = query.trim();\n    if (query.length === 0) {\n      this.clearFilter();\n      return false;\n    } else {\n      const startFiltering = !this._tileViewModelsFilterMap.hasApply();\n      const filter = new RoomFilter(query);\n      this._tileViewModelsFilterMap.setApply((roomId, vm) => {\n        vm.hidden = !filter.matches(vm);\n      });\n      return startFiltering;\n    }\n  }\n}\nclass UpdateAction {\n  constructor(remove, update, replace, updateParams) {\n    this._remove = remove;\n    this._update = update;\n    this._replace = replace;\n    this._updateParams = updateParams;\n  }\n  get shouldReplace() {\n    return this._replace;\n  }\n  get shouldRemove() {\n    return this._remove;\n  }\n  get shouldUpdate() {\n    return this._update;\n  }\n  get updateParams() {\n    return this._updateParams;\n  }\n  static Remove() {\n    return new UpdateAction(true, false, false, null);\n  }\n  static Update(newParams) {\n    return new UpdateAction(false, true, false, newParams);\n  }\n  static Nothing() {\n    return new UpdateAction(false, false, false, null);\n  }\n  static Replace(params) {\n    return new UpdateAction(false, false, true, params);\n  }\n}\nclass TilesCollection extends BaseObservableList {\n  constructor(entries, tileOptions) {\n    super();\n    this._entries = entries;\n    this._tiles = null;\n    this._entrySubscription = null;\n    this._tileOptions = tileOptions;\n    this._emitSpontanousUpdate = this._emitSpontanousUpdate.bind(this);\n  }\n  _createTile(entry) {\n    const Tile = this._tileOptions.tileClassForEntry(entry, this._tileOptions);\n    if (Tile) {\n      return new Tile(entry, this._tileOptions);\n    }\n  }\n  _emitSpontanousUpdate(tile, params) {\n    const entry = tile.lowerEntry;\n    const tileIdx = this._findTileIdx(entry);\n    this.emitUpdate(tileIdx, tile, params);\n  }\n  onSubscribeFirst() {\n    this._entrySubscription = this._entries.subscribe(this);\n    this._populateTiles();\n  }\n  _populateTiles() {\n    this._silent = true;\n    this._tiles = [];\n    let currentTile = null;\n    for (let entry of this._entries) {\n      if (!currentTile || !currentTile.tryIncludeEntry(entry)) {\n        currentTile = this._createTile(entry);\n        if (currentTile) {\n          this._tiles.push(currentTile);\n        }\n      }\n    }\n    let prevTile = null;\n    for (let tile of this._tiles) {\n      if (prevTile) {\n        prevTile.updateNextSibling(tile);\n      }\n      tile.updatePreviousSibling(prevTile);\n      prevTile = tile;\n    }\n    if (prevTile) {\n      prevTile.updateNextSibling(null);\n    }\n    for (let idx = 0; idx < this._tiles.length; idx += 1) {\n      const tile = this._tiles[idx];\n      if (tile.needsDateSeparator) {\n        this._addTileAt(idx, tile.createDateSeparator(), true);\n        idx += 1;\n      }\n    }\n    for (const tile of this._tiles) {\n      tile.setUpdateEmit(this._emitSpontanousUpdate);\n    }\n    this._silent = false;\n  }\n  _findTileIdx(entry) {\n    return sortedIndex(this._tiles, entry, (entry2, tile) => {\n      return -tile.compareEntry(entry2);\n    });\n  }\n  _findTileAtIdx(entry, idx) {\n    const tile = this._getTileAtIdx(idx);\n    if (tile && tile.compareEntry(entry) === 0) {\n      return tile;\n    }\n  }\n  _getTileAtIdx(tileIdx) {\n    if (tileIdx >= 0 && tileIdx < this._tiles.length) {\n      return this._tiles[tileIdx];\n    }\n    return null;\n  }\n  onUnsubscribeLast() {\n    this._entrySubscription = this._entrySubscription();\n    for (let i = 0; i < this._tiles.length; i += 1) {\n      this._tiles[i].dispose();\n    }\n    this._tiles = null;\n  }\n  onReset() {\n    this._buildInitialTiles();\n    this.emitReset();\n  }\n  onAdd(index, entry) {\n    const tileIdx = this._findTileIdx(entry);\n    const prevTile = this._getTileAtIdx(tileIdx - 1);\n    if (prevTile && prevTile.tryIncludeEntry(entry)) {\n      this.emitUpdate(tileIdx - 1, prevTile);\n      return;\n    }\n    const nextTile = this._getTileAtIdx(tileIdx);\n    if (nextTile && nextTile.tryIncludeEntry(entry)) {\n      this.emitUpdate(tileIdx, nextTile);\n      return;\n    }\n    const newTile = this._createTile(entry);\n    if (newTile) {\n      this._addTileAt(tileIdx, newTile);\n      this._evaluateDateHeaderAtIdx(tileIdx);\n    }\n  }\n  _evaluateDateHeaderAtIdx(tileIdx) {\n    for (let i = 0; i < 3; i += 1) {\n      const idx = tileIdx + i;\n      if (idx >= this._tiles.length) {\n        break;\n      }\n      const tile = this._tiles[idx];\n      const prevTile = idx > 0 ? this._tiles[idx - 1] : void 0;\n      const hasDateSeparator = (prevTile == null ? void 0 : prevTile.shape) === TileShape.DateHeader;\n      if (tile.needsDateSeparator && !hasDateSeparator) {\n        tileIdx += 1;\n        this._addTileAt(idx, tile.createDateSeparator());\n      } else if (!tile.needsDateSeparator && hasDateSeparator) {\n        this._removeTile(idx - 1, prevTile);\n      }\n    }\n  }\n  _addTileAt(idx, newTile, silent = false) {\n    const prevTile = idx > 0 ? this._tiles[idx - 1] : void 0;\n    const nextTile = this._tiles[idx];\n    prevTile == null ? void 0 : prevTile.updateNextSibling(newTile);\n    newTile.updatePreviousSibling(prevTile);\n    newTile.updateNextSibling(nextTile);\n    nextTile == null ? void 0 : nextTile.updatePreviousSibling(newTile);\n    this._tiles.splice(idx, 0, newTile);\n    if (!silent) {\n      this.emitAdd(idx, newTile);\n    }\n    newTile.setUpdateEmit(this._emitSpontanousUpdate);\n  }\n  onUpdate(index, entry, params) {\n    if (!this._tiles) {\n      return;\n    }\n    const tileIdx = this._findTileIdx(entry);\n    const tile = this._findTileAtIdx(entry, tileIdx);\n    if (tile) {\n      const action = tile.updateEntry(entry, params);\n      if (action.shouldReplace) {\n        const newTile = this._createTile(entry);\n        if (newTile) {\n          this._replaceTile(tileIdx, tile, newTile, action.updateParams);\n          newTile.setUpdateEmit(this._emitSpontanousUpdate);\n        } else {\n          this._removeTile(tileIdx, tile);\n        }\n      }\n      if (action.shouldRemove) {\n        this._removeTile(tileIdx, tile);\n      }\n      if (action.shouldUpdate) {\n        this.emitUpdate(tileIdx, tile, action.updateParams);\n      }\n    }\n  }\n  _replaceTile(tileIdx, existingTile, newTile, updateParams) {\n    existingTile.dispose();\n    const prevTile = this._getTileAtIdx(tileIdx - 1);\n    const nextTile = this._getTileAtIdx(tileIdx + 1);\n    this._tiles[tileIdx] = newTile;\n    prevTile == null ? void 0 : prevTile.updateNextSibling(newTile);\n    newTile.updatePreviousSibling(prevTile);\n    newTile.updateNextSibling(nextTile);\n    nextTile == null ? void 0 : nextTile.updatePreviousSibling(newTile);\n    this.emitUpdate(tileIdx, newTile, updateParams);\n  }\n  _removeTile(tileIdx, tile) {\n    const prevTile = this._getTileAtIdx(tileIdx - 1);\n    const nextTile = this._getTileAtIdx(tileIdx + 1);\n    this._tiles.splice(tileIdx, 1);\n    tile.dispose();\n    this.emitRemove(tileIdx, tile);\n    prevTile == null ? void 0 : prevTile.updateNextSibling(nextTile);\n    nextTile == null ? void 0 : nextTile.updatePreviousSibling(prevTile);\n    if (prevTile && prevTile.shape === TileShape.DateHeader && (!nextTile || !nextTile.needsDateSeparator)) {\n      this._removeTile(tileIdx - 1, prevTile);\n    }\n  }\n  onRemove(index, entry) {\n    const tileIdx = this._findTileIdx(entry);\n    const tile = this._findTileAtIdx(entry, tileIdx);\n    if (tile) {\n      const removeTile = tile.removeEntry(entry);\n      if (removeTile) {\n        this._removeTile(tileIdx, tile);\n      } else {\n        this.emitUpdate(tileIdx, tile);\n      }\n    }\n  }\n  onMove() {\n  }\n  [Symbol.iterator]() {\n    return this._tiles.values();\n  }\n  get length() {\n    return this._tiles.length;\n  }\n  getFirst() {\n    return this._tiles[0];\n  }\n  getTileIndex(searchTile) {\n    const idx = sortedIndex(this._tiles, searchTile, (searchTile2, tile) => {\n      return searchTile2.compare(tile);\n    });\n    const foundTile = this._tiles[idx];\n    if ((foundTile == null ? void 0 : foundTile.compare(searchTile)) === 0) {\n      return idx;\n    }\n    return -1;\n  }\n  sliceIterator(start, end) {\n    return this._tiles.slice(start, end)[Symbol.iterator]();\n  }\n}\nclass TimelineViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { timeline, tileOptions } = options;\n    this._timeline = this.track(timeline);\n    this._tiles = new TilesCollection(timeline.entries, tileOptions);\n    this._startTile = null;\n    this._endTile = null;\n    this._topLoadingPromise = null;\n    this._requestedStartTile = null;\n    this._requestedEndTile = null;\n    this._requestScheduled = false;\n    this._showJumpDown = false;\n  }\n  setVisibleTileRange(startTile, endTile) {\n    this._requestedStartTile = startTile;\n    this._requestedEndTile = endTile;\n    if (!this._requestScheduled) {\n      Promise.resolve().then(() => {\n        this._setVisibleTileRange(this._requestedStartTile, this._requestedEndTile);\n        this._requestScheduled = false;\n      });\n      this._requestScheduled = true;\n    }\n  }\n  _setVisibleTileRange(startTile, endTile) {\n    let loadTop;\n    if (startTile && endTile) {\n      this._startTile = startTile;\n      this._endTile = endTile;\n      const startIndex = this._tiles.getTileIndex(this._startTile);\n      const endIndex = this._tiles.getTileIndex(this._endTile);\n      for (const tile of this._tiles.sliceIterator(startIndex, endIndex + 1)) {\n        tile.notifyVisible();\n      }\n      loadTop = startIndex < 10;\n      this._setShowJumpDown(endIndex < this._tiles.length - 1);\n    } else {\n      loadTop = true;\n      this._setShowJumpDown(false);\n    }\n    if (loadTop && !this._topLoadingPromise) {\n      this._topLoadingPromise = this._timeline.loadAtTop(10).then((hasReachedEnd) => {\n        this._topLoadingPromise = null;\n        if (!hasReachedEnd) {\n          this.setVisibleTileRange(this._requestedStartTile, this._requestedEndTile);\n        }\n      });\n    }\n  }\n  get tiles() {\n    return this._tiles;\n  }\n  _setShowJumpDown(show) {\n    if (this._showJumpDown !== show) {\n      this._showJumpDown = show;\n      this.emitChange(\"showJumpDown\");\n    }\n  }\n  get showJumpDown() {\n    return this._showJumpDown;\n  }\n}\nclass ComposerViewModel extends ViewModel {\n  constructor(roomVM) {\n    super(roomVM.options);\n    this._roomVM = roomVM;\n    this._isEmpty = true;\n    this._replyVM = null;\n  }\n  setReplyingTo(entry) {\n    var _a;\n    const changed = new Boolean(entry) !== new Boolean(this._replyVM) || !((_a = this._replyVM) == null ? void 0 : _a.id.equals(entry.asEventKey()));\n    if (changed) {\n      this._replyVM = this.disposeTracked(this._replyVM);\n      if (entry) {\n        this._replyVM = this.track(this._roomVM._createTile(entry));\n        this._replyVM.notifyVisible();\n      }\n      this.emitChange(\"replyViewModel\");\n      this.emit(\"focus\");\n    }\n  }\n  clearReplyingTo() {\n    this.setReplyingTo(null);\n  }\n  get replyViewModel() {\n    return this._replyVM;\n  }\n  get isEncrypted() {\n    return this._roomVM.isEncrypted;\n  }\n  async sendMessage(message) {\n    const success = await this._roomVM._sendMessage(message, this._replyVM);\n    if (success) {\n      this._isEmpty = true;\n      this.emitChange(\"canSend\");\n      this.clearReplyingTo();\n    }\n    return success;\n  }\n  sendPicture() {\n    this._roomVM._pickAndSendPicture();\n  }\n  sendFile() {\n    this._roomVM._pickAndSendFile();\n  }\n  sendVideo() {\n    this._roomVM._pickAndSendVideo();\n  }\n  get canSend() {\n    return !this._isEmpty;\n  }\n  async setInput(text2) {\n    const wasEmpty = this._isEmpty;\n    this._isEmpty = text2.length === 0;\n    if (wasEmpty && !this._isEmpty) {\n      this._roomVM._room.ensureMessageKeyIsShared();\n    }\n    if (wasEmpty !== this._isEmpty) {\n      this.emitChange(\"canSend\");\n    }\n  }\n  get kind() {\n    return \"composer\";\n  }\n}\nclass ErrorViewModel extends ViewModel {\n  get message() {\n    return this.error.message;\n  }\n  get error() {\n    return this.getOption(\"error\");\n  }\n  close() {\n    this.getOption(\"onClose\")();\n  }\n  async submitLogs() {\n    try {\n      await submitLogsFromSessionToDefaultServer(this.getOption(\"session\"), this.platform);\n      return true;\n    } catch (err) {\n      return false;\n    }\n  }\n}\nclass ErrorReportViewModel extends ViewModel {\n  get errorViewModel() {\n    return this._errorViewModel;\n  }\n  reportError(error) {\n    var _a;\n    if (((_a = this._errorViewModel) == null ? void 0 : _a.error) === error) {\n      return;\n    }\n    this.disposeTracked(this._errorViewModel);\n    this._errorViewModel = this.track(new ErrorViewModel(this.childOptions({\n      error,\n      onClose: () => {\n        this._errorViewModel = this.disposeTracked(this._errorViewModel);\n        this.emitChange(\"errorViewModel\");\n      }\n    })));\n    this.emitChange(\"errorViewModel\");\n  }\n  logAndCatch(labelOrValues, callback, errorValue = void 0) {\n    try {\n      let result = this.logger.run(labelOrValues, callback);\n      if (result instanceof Promise) {\n        result = result.catch((err) => {\n          this.reportError(err);\n          return errorValue;\n        });\n      }\n      return result;\n    } catch (err) {\n      this.reportError(err);\n      return errorValue;\n    }\n  }\n}\nclass CallViewModel extends ErrorReportViewModel {\n  constructor(options) {\n    super(options);\n    const callObservable = new EventObservableValue(this.call, \"change\");\n    this.track(callObservable.subscribe(() => this.onUpdate()));\n    const ownMemberViewModelMap = new ObservableValueMap(\"self\", callObservable).mapValues((call, emitChange) => new OwnMemberViewModel(this.childOptions({ call, emitChange })), () => {\n    });\n    const otherMemberViewModels = this.call.members.filterValues((member) => member.isConnected).mapValues((member, emitChange) => new CallMemberViewModel(this.childOptions({\n      member,\n      emitChange,\n      mediaRepository: this.getOption(\"room\").mediaRepository\n    })), (param, vm) => vm == null ? void 0 : vm.onUpdate());\n    this.memberViewModels = otherMemberViewModels.join(ownMemberViewModelMap).sortValues((a, b) => a.compare(b));\n    this.track(this.memberViewModels.subscribe({\n      onRemove: () => {\n        this.emitChange();\n      },\n      onAdd: () => {\n        this.emitChange();\n      },\n      onUpdate: () => {\n      },\n      onReset: () => {\n      },\n      onMove: () => {\n      }\n    }));\n  }\n  get isCameraMuted() {\n    var _a, _b;\n    return (_b = (_a = this.call.muteSettings) == null ? void 0 : _a.camera) != null ? _b : true;\n  }\n  get isMicrophoneMuted() {\n    var _a, _b;\n    return (_b = (_a = this.call.muteSettings) == null ? void 0 : _a.microphone) != null ? _b : true;\n  }\n  get memberCount() {\n    return this.memberViewModels.length;\n  }\n  get name() {\n    return this.call.name;\n  }\n  get id() {\n    return this.call.id;\n  }\n  get call() {\n    return this.getOption(\"call\");\n  }\n  onUpdate() {\n    if (this.call.error) {\n      this.reportError(this.call.error);\n    }\n  }\n  async hangup() {\n    this.logAndCatch(\"CallViewModel.hangup\", async (log) => {\n      if (this.call.hasJoined) {\n        await this.call.leave(log);\n      }\n    });\n  }\n  async toggleCamera() {\n    this.logAndCatch(\"Call.toggleCamera\", async (log) => {\n      const { localMedia, muteSettings } = this.call;\n      if (muteSettings && localMedia) {\n        if (muteSettings.camera && !getStreamVideoTrack(localMedia.userMedia)) {\n          const stream = await this.platform.mediaDevices.getMediaTracks(!muteSettings.microphone, true);\n          await this.call.setMedia(localMedia.withUserMedia(stream));\n        } else {\n          await this.call.setMuted(muteSettings.toggleCamera());\n        }\n        this.emitChange();\n      }\n    });\n  }\n  async toggleMicrophone() {\n    this.logAndCatch(\"Call.toggleMicrophone\", async (log) => {\n      const { localMedia, muteSettings } = this.call;\n      if (muteSettings && localMedia) {\n        if (muteSettings.microphone && !getStreamAudioTrack(localMedia.userMedia)) {\n          const stream = await this.platform.mediaDevices.getMediaTracks(true, !muteSettings.camera);\n          await this.call.setMedia(localMedia.withUserMedia(stream));\n        } else {\n          await this.call.setMuted(muteSettings.toggleMicrophone());\n        }\n        this.emitChange();\n      }\n    });\n  }\n}\nclass OwnMemberViewModel extends ErrorReportViewModel {\n  constructor(options) {\n    super(options);\n    this.init();\n  }\n  async init() {\n    const room = this.getOption(\"room\");\n    this.memberObservable = await room.observeMember(room.user.id);\n    this.track(this.memberObservable.subscribe(() => {\n      this.emitChange(void 0);\n    }));\n  }\n  get errorViewModel() {\n    return void 0;\n  }\n  get stream() {\n    var _a;\n    return (_a = this.call.localPreviewMedia) == null ? void 0 : _a.userMedia;\n  }\n  get call() {\n    return this.getOption(\"call\");\n  }\n  get isCameraMuted() {\n    var _a, _b;\n    return (_b = (_a = this.call.muteSettings) == null ? void 0 : _a.camera) != null ? _b : true;\n  }\n  get isMicrophoneMuted() {\n    var _a, _b;\n    return (_b = (_a = this.call.muteSettings) == null ? void 0 : _a.microphone) != null ? _b : true;\n  }\n  get avatarLetter() {\n    var _a;\n    const member = (_a = this.memberObservable) == null ? void 0 : _a.get();\n    if (member) {\n      return avatarInitials(member.name);\n    } else {\n      return this.getOption(\"room\").user.id;\n    }\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.getOption(\"room\").user.id);\n  }\n  avatarUrl(size) {\n    var _a;\n    const member = (_a = this.memberObservable) == null ? void 0 : _a.get();\n    if (member) {\n      return getAvatarHttpUrl(member.avatarUrl, size, this.platform, this.getOption(\"room\").mediaRepository);\n    }\n  }\n  get avatarTitle() {\n    var _a;\n    const member = (_a = this.memberObservable) == null ? void 0 : _a.get();\n    if (member) {\n      return member.name;\n    } else {\n      return this.getOption(\"room\").user.id;\n    }\n  }\n  compare(other) {\n    return -1;\n  }\n}\nclass CallMemberViewModel extends ErrorReportViewModel {\n  get stream() {\n    var _a;\n    return (_a = this.member.remoteMedia) == null ? void 0 : _a.userMedia;\n  }\n  get member() {\n    return this.getOption(\"member\");\n  }\n  get isCameraMuted() {\n    var _a, _b;\n    return (_b = (_a = this.member.remoteMuteSettings) == null ? void 0 : _a.camera) != null ? _b : true;\n  }\n  get isMicrophoneMuted() {\n    var _a, _b;\n    return (_b = (_a = this.member.remoteMuteSettings) == null ? void 0 : _a.microphone) != null ? _b : true;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.member.member.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.member.userId);\n  }\n  avatarUrl(size) {\n    const { avatarUrl } = this.member.member;\n    const mediaRepository = this.getOption(\"mediaRepository\");\n    return getAvatarHttpUrl(avatarUrl, size, this.platform, mediaRepository);\n  }\n  get avatarTitle() {\n    return this.member.member.name;\n  }\n  onUpdate() {\n    this.mapMemberSyncErrorIfNeeded();\n  }\n  mapMemberSyncErrorIfNeeded() {\n    if (this.member.error) {\n      this.reportError(this.member.error);\n    }\n  }\n  compare(other) {\n    if (other instanceof CallMemberViewModel) {\n      const myUserId = this.member.member.userId;\n      const otherUserId = other.member.member.userId;\n      if (myUserId === otherUserId) {\n        return 0;\n      }\n      return myUserId < otherUserId ? -1 : 1;\n    } else {\n      return -other.compare(this);\n    }\n  }\n}\nfunction imageToInfo(image) {\n  return {\n    w: image.width,\n    h: image.height,\n    mimetype: image.blob.mimeType,\n    size: image.blob.size\n  };\n}\nclass LocalMedia {\n  constructor(userMedia, screenShare, dataChannelOptions) {\n    this.userMedia = userMedia;\n    this.screenShare = screenShare;\n    this.dataChannelOptions = dataChannelOptions;\n  }\n  withUserMedia(stream) {\n    var _a;\n    return new LocalMedia(stream, (_a = this.screenShare) == null ? void 0 : _a.clone(), this.dataChannelOptions);\n  }\n  withScreenShare(stream) {\n    var _a;\n    return new LocalMedia((_a = this.userMedia) == null ? void 0 : _a.clone(), stream, this.dataChannelOptions);\n  }\n  withDataChannel(options) {\n    var _a, _b;\n    return new LocalMedia((_a = this.userMedia) == null ? void 0 : _a.clone(), (_b = this.screenShare) == null ? void 0 : _b.clone(), options);\n  }\n  asPreview() {\n    const media = this.clone();\n    const userMedia = media.userMedia;\n    if (userMedia && userMedia.getVideoTracks().length > 0) {\n      const audioTrack = getStreamAudioTrack(userMedia);\n      if (audioTrack) {\n        audioTrack.stop();\n        userMedia.removeTrack(audioTrack);\n      }\n    }\n    return media;\n  }\n  replaceClone(oldClone, oldOriginal) {\n    const cloneOrAdoptStream = (oldOriginalStream, oldCloneStream, newStream) => {\n      if ((oldOriginalStream == null ? void 0 : oldOriginalStream.id) === (newStream == null ? void 0 : newStream.id)) {\n        return oldCloneStream;\n      } else {\n        return newStream == null ? void 0 : newStream.clone();\n      }\n    };\n    return new LocalMedia(cloneOrAdoptStream(oldOriginal == null ? void 0 : oldOriginal.userMedia, oldClone == null ? void 0 : oldClone.userMedia, this.userMedia), cloneOrAdoptStream(oldOriginal == null ? void 0 : oldOriginal.screenShare, oldClone == null ? void 0 : oldClone.screenShare, this.screenShare), this.dataChannelOptions);\n  }\n  clone() {\n    var _a, _b;\n    return new LocalMedia((_a = this.userMedia) == null ? void 0 : _a.clone(), (_b = this.screenShare) == null ? void 0 : _b.clone(), this.dataChannelOptions);\n  }\n  dispose() {\n    var _a, _b, _c2;\n    (_a = getStreamAudioTrack(this.userMedia)) == null ? void 0 : _a.stop();\n    (_b = getStreamVideoTrack(this.userMedia)) == null ? void 0 : _b.stop();\n    (_c2 = getStreamVideoTrack(this.screenShare)) == null ? void 0 : _c2.stop();\n  }\n}\nclass DateTile extends ViewModel {\n  constructor(_firstTileInDay, options) {\n    super(options);\n    this._firstTileInDay = _firstTileInDay;\n  }\n  setUpdateEmit(emitUpdate) {\n    this._emitUpdate = emitUpdate;\n  }\n  get upperEntry() {\n    return this.refEntry;\n  }\n  get lowerEntry() {\n    return this.refEntry;\n  }\n  get refEntry() {\n    return this._firstTileInDay.lowerEntry;\n  }\n  compare(tile) {\n    return this.compareEntry(tile.upperEntry);\n  }\n  get relativeDate() {\n    if (!this._dateString) {\n      this._dateString = this.timeFormatter.formatRelativeDate(new Date(this.refEntry.timestamp));\n    }\n    return this._dateString;\n  }\n  get machineReadableDate() {\n    if (!this._machineReadableString) {\n      this._machineReadableString = this.timeFormatter.formatMachineReadableDate(new Date(this.refEntry.timestamp));\n    }\n    return this._machineReadableString;\n  }\n  get shape() {\n    return TileShape.DateHeader;\n  }\n  get needsDateSeparator() {\n    return false;\n  }\n  createDateSeparator() {\n    return void 0;\n  }\n  compareEntry(entry) {\n    const result = this.refEntry.compare(entry);\n    if (result === 0) {\n      return -1;\n    }\n    return result;\n  }\n  updateEntry(entry, param) {\n    return UpdateAction.Nothing();\n  }\n  removeEntry(entry) {\n    return false;\n  }\n  tryIncludeEntry() {\n    return false;\n  }\n  get comparisonIsNotCommutative() {\n    return true;\n  }\n  updatePreviousSibling(prev) {\n    this._firstTileInDay.updatePreviousSibling(prev);\n  }\n  updateNextSibling(next) {\n    var _a;\n    if (!next) {\n      return;\n    }\n    this._firstTileInDay = next;\n    const prevDateString = this._dateString;\n    this._dateString = void 0;\n    this._machineReadableString = void 0;\n    if (prevDateString && prevDateString !== this.relativeDate) {\n      (_a = this._emitUpdate) == null ? void 0 : _a.call(this, this, \"relativeDate\");\n    }\n  }\n  notifyVisible() {\n  }\n  dispose() {\n  }\n}\nclass SimpleTile extends ErrorReportViewModel {\n  constructor(entry, options) {\n    super(options);\n    this._entry = entry;\n    this._date = this._entry.timestamp ? new Date(this._entry.timestamp) : void 0;\n    this._needsDateSeparator = false;\n    this._emitUpdate = void 0;\n  }\n  get shape() {\n    return null;\n  }\n  get isContinuation() {\n    return false;\n  }\n  get needsDateSeparator() {\n    return this._needsDateSeparator;\n  }\n  createDateSeparator() {\n    return new DateTile(this, this.childOptions({}));\n  }\n  _updateDateSeparator(prev) {\n    if (prev && prev._date && this._date) {\n      this._needsDateSeparator = prev._date.getFullYear() !== this._date.getFullYear() || prev._date.getMonth() !== this._date.getMonth() || prev._date.getDate() !== this._date.getDate();\n    } else {\n      this._needsDateSeparator = !!this._date;\n    }\n  }\n  get id() {\n    return this._entry.asEventKey();\n  }\n  get eventId() {\n    return this._entry.id;\n  }\n  get isPending() {\n    return this._entry.isPending;\n  }\n  get isUnsent() {\n    return this._entry.isPending && this._entry.pendingEvent.status !== SendStatus.Sent;\n  }\n  get canAbortSending() {\n    return this._entry.isPending && !this._entry.pendingEvent.hasStartedSending;\n  }\n  abortSending() {\n    var _a;\n    (_a = this._entry.pendingEvent) == null ? void 0 : _a.abort();\n  }\n  setUpdateEmit(emitUpdate) {\n    this._emitUpdate = emitUpdate;\n  }\n  emitChange(changedProps) {\n    if (this._emitUpdate) {\n      this._emitUpdate(this, changedProps);\n    }\n    super.emitChange(changedProps);\n  }\n  get upperEntry() {\n    return this._entry;\n  }\n  get lowerEntry() {\n    return this._entry;\n  }\n  get comparisonIsNotCommutative() {\n    return false;\n  }\n  compare(tile) {\n    if (tile.comparisonIsNotCommutative) {\n      return -tile.compare(this);\n    } else {\n      return this.upperEntry.compare(tile.upperEntry);\n    }\n  }\n  compareEntry(entry) {\n    return this._entry.compare(entry);\n  }\n  updateEntry(entry, param) {\n    const renderedAsRedacted = this.shape === \"redacted\";\n    if (!entry.isGap && entry.isRedacted !== renderedAsRedacted) {\n      return UpdateAction.Replace(\"shape\");\n    } else {\n      this._entry = entry;\n      return UpdateAction.Update(param);\n    }\n  }\n  removeEntry() {\n    return true;\n  }\n  tryIncludeEntry() {\n    return false;\n  }\n  updatePreviousSibling(prev) {\n    if ((prev == null ? void 0 : prev.shape) !== TileShape.DateHeader) {\n      this._updateDateSeparator(prev);\n    }\n  }\n  updateNextSibling() {\n  }\n  notifyVisible() {\n  }\n  dispose() {\n    this.setUpdateEmit(null);\n    super.dispose();\n  }\n  get _room() {\n    return this._roomVM.room;\n  }\n  get _roomVM() {\n    return this._options.roomVM;\n  }\n  get _timeline() {\n    return this._options.timeline;\n  }\n  get _powerLevels() {\n    return this._timeline.powerLevels;\n  }\n  get _ownMember() {\n    return this._options.timeline.me;\n  }\n  get displayName() {\n    return this._entry.displayName || this.sender;\n  }\n  get sender() {\n    return this._entry.sender;\n  }\n}\nclass GapTile extends SimpleTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._loading = false;\n    this._waitingForConnection = false;\n    this._isAtTop = true;\n    this._siblingChanged = false;\n  }\n  get needsDateSeparator() {\n    return false;\n  }\n  async fill(isRetrying = false) {\n    if (!this._loading && !this._entry.edgeReached) {\n      this._loading = true;\n      this.emitChange(\"isLoading\");\n      try {\n        await this._room.fillGap(this._entry, 10);\n      } catch (err) {\n        if (err instanceof ConnectionError) {\n          await this._waitForReconnection();\n          if (!isRetrying) {\n            return await this.fill(true);\n          } else {\n            return false;\n          }\n        } else {\n          this.reportError(err);\n          return false;\n        }\n      } finally {\n        this._loading = false;\n        this.emitChange(\"isLoading\");\n      }\n      return true;\n    }\n    return false;\n  }\n  async notifyVisible() {\n    if (this.errorViewModel) {\n      return;\n    }\n    let depth = 0;\n    let canFillMore;\n    this._siblingChanged = false;\n    do {\n      canFillMore = await this.fill();\n      depth = depth + 1;\n    } while (depth < 10 && !this._siblingChanged && canFillMore && !this.isDisposed);\n  }\n  get isAtTop() {\n    return this._isAtTop;\n  }\n  updatePreviousSibling(prev) {\n    super.updatePreviousSibling(prev);\n    const isAtTop = !prev;\n    if (this._isAtTop !== isAtTop) {\n      this._isAtTop = isAtTop;\n      this.emitChange(\"isAtTop\");\n    }\n    this._siblingChanged = true;\n  }\n  updateNextSibling() {\n    this._siblingChanged = true;\n  }\n  updateEntry(entry, params) {\n    super.updateEntry(entry, params);\n    if (!entry.isGap) {\n      return UpdateAction.Remove();\n    } else {\n      return UpdateAction.Nothing();\n    }\n  }\n  async _waitForReconnection() {\n    this._waitingForConnection = true;\n    this.emitUpdate(\"status\");\n    await this.options.client.reconnector.connectionStatus.waitFor((status) => status === ConnectionStatus.Online).promise;\n    this._waitingForConnection = false;\n    this.emitUpdate(\"status\");\n  }\n  get shape() {\n    return \"gap\";\n  }\n  get isLoading() {\n    return this._loading;\n  }\n  get showSpinner() {\n    return this.isLoading || this._waitingForConnection;\n  }\n  get status() {\n    const dir = this._entry.prev_batch ? \"previous\" : \"next\";\n    if (this._waitingForConnection) {\n      return \"Waiting for connection\\u2026\";\n    } else if (this.errorViewModel) {\n      return `Could not load ${dir} messages`;\n    } else if (this.isLoading) {\n      return \"Loading more messages\\u2026\";\n    } else {\n      return \"Gave up loading more messages\";\n    }\n  }\n}\nclass ReactionsViewModel {\n  constructor(parentTile) {\n    this._parentTile = parentTile;\n    this._map = new ObservableMap();\n    this._reactions = this._map.sortValues((a, b) => a._compare(b));\n  }\n  update(annotations, pendingAnnotations) {\n    if (annotations) {\n      for (const key in annotations) {\n        if (annotations.hasOwnProperty(key)) {\n          const annotation = annotations[key];\n          const reaction = this._map.get(key);\n          if (reaction) {\n            if (reaction._tryUpdate(annotation)) {\n              this._map.update(key);\n            }\n          } else {\n            this._map.add(key, new ReactionViewModel(key, annotation, null, this._parentTile));\n          }\n        }\n      }\n    }\n    if (pendingAnnotations) {\n      for (const [key, annotation] of pendingAnnotations.entries()) {\n        const reaction = this._map.get(key);\n        if (reaction) {\n          reaction._tryUpdatePending(annotation);\n          this._map.update(key);\n        } else {\n          this._map.add(key, new ReactionViewModel(key, null, annotation, this._parentTile));\n        }\n      }\n    }\n    for (const existingKey of this._map.keys()) {\n      const hasPending = pendingAnnotations == null ? void 0 : pendingAnnotations.has(existingKey);\n      const hasRemote = annotations == null ? void 0 : annotations.hasOwnProperty(existingKey);\n      if (!hasRemote && !hasPending) {\n        this._map.remove(existingKey);\n      } else if (!hasRemote) {\n        if (this._map.get(existingKey)._tryUpdate(null)) {\n          this._map.update(existingKey);\n        }\n      } else if (!hasPending) {\n        if (this._map.get(existingKey)._tryUpdatePending(null)) {\n          this._map.update(existingKey);\n        }\n      }\n    }\n  }\n  get reactions() {\n    return this._reactions;\n  }\n  getReaction(key) {\n    return this._map.get(key);\n  }\n}\nclass ReactionViewModel {\n  constructor(key, annotation, pending, parentTile) {\n    this._key = key;\n    this._annotation = annotation;\n    this._pending = pending;\n    this._parentTile = parentTile;\n    this._isToggling = false;\n  }\n  _tryUpdate(annotation) {\n    const oneSetAndOtherNot = !!this._annotation !== !!annotation;\n    const bothSet = this._annotation && annotation;\n    const areDifferent = bothSet && (annotation.me !== this._annotation.me || annotation.count !== this._annotation.count || annotation.firstTimestamp !== this._annotation.firstTimestamp);\n    if (oneSetAndOtherNot || areDifferent) {\n      this._annotation = annotation;\n      return true;\n    }\n    return false;\n  }\n  _tryUpdatePending(pending) {\n    if (!pending && !this._pending) {\n      return false;\n    }\n    this._pending = pending;\n    return true;\n  }\n  get key() {\n    return this._key;\n  }\n  get count() {\n    var _a, _b;\n    return (((_a = this._pending) == null ? void 0 : _a.count) || 0) + (((_b = this._annotation) == null ? void 0 : _b.count) || 0);\n  }\n  get isPending() {\n    return this._pending !== null;\n  }\n  get isActive() {\n    var _a;\n    return ((_a = this._annotation) == null ? void 0 : _a.me) || this.isPending;\n  }\n  get firstTimestamp() {\n    let ts = Number.MAX_SAFE_INTEGER;\n    if (this._annotation) {\n      ts = Math.min(ts, this._annotation.firstTimestamp);\n    }\n    if (this._pending) {\n      ts = Math.min(ts, this._pending.firstTimestamp);\n    }\n    return ts;\n  }\n  _compare(other) {\n    if (other === this) {\n      return 0;\n    }\n    if (this.count !== other.count) {\n      return other.count - this.count;\n    } else {\n      const cmp = this.firstTimestamp - other.firstTimestamp;\n      if (cmp === 0) {\n        return this.key < other.key ? -1 : 1;\n      }\n      return cmp;\n    }\n  }\n  async toggle(log = null) {\n    if (this._isToggling) {\n      console.log(\"busy toggling reaction already\");\n      return;\n    }\n    this._isToggling = true;\n    try {\n      await this._parentTile.toggleReaction(this.key, log);\n    } finally {\n      this._isToggling = false;\n    }\n  }\n}\nclass BaseMessageTile extends SimpleTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._isContinuation = false;\n    this._reactions = null;\n    this._replyTile = null;\n    if (this._entry.annotations || this._entry.pendingAnnotations) {\n      this._updateReactions();\n    }\n    this._updateReplyTileIfNeeded(void 0);\n  }\n  notifyVisible() {\n    var _a;\n    super.notifyVisible();\n    (_a = this._replyTile) == null ? void 0 : _a.notifyVisible();\n  }\n  get _mediaRepository() {\n    return this._room.mediaRepository;\n  }\n  get permaLink() {\n    return `https://matrix.to/#/${encodeURIComponent(this._room.id)}/${encodeURIComponent(this._entry.id)}`;\n  }\n  copyPermalink() {\n    this.platform.copyPlaintext(this.permaLink);\n  }\n  get senderProfileLink() {\n    return `https://matrix.to/#/${encodeURIComponent(this.sender)}`;\n  }\n  get memberPanelLink() {\n    return `${this.urlRouter.urlUntilSegment(\"room\")}/member/${this.sender}`;\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._entry.sender);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._entry.avatarUrl, size, this.platform, this._mediaRepository);\n  }\n  get avatarLetter() {\n    return avatarInitials(this.sender);\n  }\n  get avatarTitle() {\n    return this.sender;\n  }\n  get time() {\n    return this._date && this.timeFormatter.formatTime(this._date);\n  }\n  get isOwn() {\n    return this._entry.sender === this._ownMember.userId;\n  }\n  get isContinuation() {\n    return this._isContinuation;\n  }\n  get isUnverified() {\n    return this._entry.isUnverified;\n  }\n  get isReply() {\n    return this._entry.isReply;\n  }\n  _getContent() {\n    return this._entry.content;\n  }\n  updatePreviousSibling(prev) {\n    super.updatePreviousSibling(prev);\n    let isContinuation = false;\n    if (prev && prev instanceof BaseMessageTile && prev.sender === this.sender) {\n      const myTimestamp = this._entry.timestamp;\n      const otherTimestamp = prev._entry.timestamp;\n      isContinuation = myTimestamp - otherTimestamp < 5 * 60 * 1e3;\n    }\n    if (isContinuation !== this._isContinuation) {\n      this._isContinuation = isContinuation;\n      this.emitChange(\"isContinuation\");\n    }\n  }\n  updateEntry(entry, param) {\n    const action = super.updateEntry(entry, param);\n    if (action.shouldUpdate) {\n      this._updateReactions();\n    }\n    this._updateReplyTileIfNeeded(param);\n    return action;\n  }\n  _updateReplyTileIfNeeded(param) {\n    var _a, _b;\n    const replyEntry = this._entry.contextEntry;\n    if (replyEntry) {\n      const action = (_a = this._replyTile) == null ? void 0 : _a.updateEntry(replyEntry, param);\n      if ((action == null ? void 0 : action.shouldReplace) || !this._replyTile) {\n        this.disposeTracked(this._replyTile);\n        const tileClassForEntry2 = this._options.tileClassForEntry;\n        const ReplyTile = tileClassForEntry2(replyEntry, this._options);\n        if (ReplyTile) {\n          this._replyTile = new ReplyTile(replyEntry, this._options);\n        }\n      }\n      if (action == null ? void 0 : action.shouldUpdate) {\n        (_b = this._replyTile) == null ? void 0 : _b.emitChange();\n      }\n    }\n  }\n  startReply() {\n    this._roomVM.startReply(this._entry);\n  }\n  createReplyContent(msgtype, body) {\n    return this._entry.createReplyContent(msgtype, body);\n  }\n  redact(reason, log) {\n    return this._room.sendRedaction(this._entry.id, reason, log);\n  }\n  get canRedact() {\n    return this._powerLevels.canRedactFromSender(this._entry.sender);\n  }\n  get reactions() {\n    if (this.shape !== \"redacted\") {\n      return this._reactions;\n    }\n    return null;\n  }\n  get canReact() {\n    return this._powerLevels.canSendType(\"m.reaction\");\n  }\n  react(key, log = null) {\n    return this.logger.wrapOrRun(log, \"react\", async (log2) => {\n      var _a, _b;\n      if (!this.canReact) {\n        log2.set(\"powerlevel_lacking\", true);\n        return;\n      }\n      if (this._entry.haveAnnotation(key)) {\n        log2.set(\"already_reacted\", true);\n        return;\n      }\n      const redaction = (_b = (_a = this._entry.pendingAnnotations) == null ? void 0 : _a.get(key)) == null ? void 0 : _b.redactionEntry;\n      if (redaction && !redaction.pendingEvent.hasStartedSending) {\n        log2.set(\"abort_redaction\", true);\n        await redaction.pendingEvent.abort();\n      } else {\n        await this._room.sendEvent(\"m.reaction\", this._entry.annotate(key), null, log2);\n      }\n    });\n  }\n  redactReaction(key, log = null) {\n    return this.logger.wrapOrRun(log, \"redactReaction\", async (log2) => {\n      var _a, _b;\n      if (!this._powerLevels.canRedactFromSender(this._ownMember.userId)) {\n        log2.set(\"powerlevel_lacking\", true);\n        return;\n      }\n      if (!this._entry.haveAnnotation(key)) {\n        log2.set(\"not_yet_reacted\", true);\n        return;\n      }\n      let entry = (_b = (_a = this._entry.pendingAnnotations) == null ? void 0 : _a.get(key)) == null ? void 0 : _b.annotationEntry;\n      if (!entry) {\n        entry = await this._timeline.getOwnAnnotationEntry(this._entry.id, key);\n      }\n      if (entry) {\n        await this._room.sendRedaction(entry.id, null, log2);\n      } else {\n        log2.set(\"no_reaction\", true);\n      }\n    });\n  }\n  toggleReaction(key, log = null) {\n    return this.logger.wrapOrRun(log, \"toggleReaction\", async (log2) => {\n      if (this._entry.haveAnnotation(key)) {\n        await this.redactReaction(key, log2);\n      } else {\n        await this.react(key, log2);\n      }\n    });\n  }\n  _updateReactions() {\n    const { annotations, pendingAnnotations } = this._entry;\n    if (!annotations && !pendingAnnotations) {\n      if (this._reactions) {\n        this._reactions = null;\n      }\n    } else {\n      if (!this._reactions) {\n        this._reactions = new ReactionsViewModel(this);\n      }\n      this._reactions.update(annotations, pendingAnnotations);\n    }\n  }\n  get replyTile() {\n    if (!this._entry.contextEventId) {\n      return null;\n    }\n    return this._replyTile;\n  }\n}\nconst scheme = \"(?:https|http|ftp):\\\\/\\\\/\";\nconst noSpaceNorPunctuation = \"[^\\\\s.,?!)]\";\nconst hostCharacter = \"[a-zA-Z0-9:.\\\\[\\\\]-]\";\nconst host = `${hostCharacter}*(?=${hostCharacter})${noSpaceNorPunctuation}`;\nconst pathOrFragment = `(?:[\\\\/#](?:[^\\\\s]*${noSpaceNorPunctuation})?)`;\nconst urlRegex = `${scheme}${host}${pathOrFragment}?`;\nconst regex = new RegExp(urlRegex, \"gi\");\nfunction linkify(text2, callback) {\n  const matches = text2.matchAll(regex);\n  let curr = 0;\n  for (let match of matches) {\n    const precedingText = text2.slice(curr, match.index);\n    callback(precedingText, false);\n    callback(match[0], true);\n    const len = match[0].length;\n    curr = match.index + len;\n  }\n  const remainingText = text2.slice(curr);\n  callback(remainingText, false);\n}\nfunction parsePlainBody(body) {\n  const parts = [];\n  const lines = body.split(\"\\n\");\n  const linkifyCallback = (text2, isLink) => {\n    if (isLink) {\n      parts.push(new LinkPart(text2, [new TextPart(text2)]));\n    } else {\n      parts.push(new TextPart(text2));\n    }\n  };\n  for (let i = 0; i < lines.length; i += 1) {\n    const line = lines[i];\n    if (line.length) {\n      linkify(line, linkifyCallback);\n    }\n    const isLastLine = i >= lines.length - 1;\n    if (!isLastLine) {\n      parts.push(new NewLinePart());\n    }\n  }\n  return new MessageBody(body, parts);\n}\nfunction stringAsBody(body) {\n  return new MessageBody(body, [new TextPart(body)]);\n}\nclass HeaderBlock {\n  constructor(level, inlines) {\n    this.level = level;\n    this.inlines = inlines;\n  }\n  get type() {\n    return \"header\";\n  }\n}\nclass CodeBlock {\n  constructor(language, text2) {\n    this.language = language;\n    this.text = text2;\n  }\n  get type() {\n    return \"codeblock\";\n  }\n}\nclass ListBlock {\n  constructor(startOffset, items) {\n    this.items = items;\n    this.startOffset = startOffset;\n  }\n  get type() {\n    return \"list\";\n  }\n}\nclass TableBlock {\n  constructor(head, body) {\n    this.head = head;\n    this.body = body;\n  }\n  get type() {\n    return \"table\";\n  }\n}\nclass RulePart {\n  get type() {\n    return \"rule\";\n  }\n}\nclass NewLinePart {\n  get type() {\n    return \"newline\";\n  }\n}\nclass FormatPart {\n  constructor(format, children) {\n    this.format = format.toLowerCase();\n    this.children = children;\n  }\n  get type() {\n    return \"format\";\n  }\n}\nclass ImagePart {\n  constructor(src2, width, height, alt, title) {\n    this.src = src2;\n    this.width = width;\n    this.height = height;\n    this.alt = alt;\n    this.title = title;\n  }\n  get type() {\n    return \"image\";\n  }\n}\nclass PillPart {\n  constructor(id, href, children) {\n    this.id = id;\n    this.href = href;\n    this.children = children;\n  }\n  get type() {\n    return \"pill\";\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.id);\n  }\n  get avatarInitials() {\n    return avatarInitials(this.id);\n  }\n}\nclass LinkPart {\n  constructor(url, inlines) {\n    this.url = url;\n    this.inlines = inlines;\n  }\n  get type() {\n    return \"link\";\n  }\n}\nclass TextPart {\n  constructor(text2) {\n    this.text = text2;\n  }\n  get type() {\n    return \"text\";\n  }\n}\nfunction isBlockquote(part) {\n  return part.type === \"format\" && part.format === \"blockquote\";\n}\nclass MessageBody {\n  constructor(sourceString, parts) {\n    this.sourceString = sourceString;\n    this.parts = parts;\n  }\n  insertEmote(string) {\n    let i = 0;\n    for (; i < this.parts.length && isBlockquote(this.parts[i]); i++)\n      ;\n    this.parts.splice(i, 0, new TextPart(string));\n  }\n}\nconst BodyFormat = createEnum(\"Plain\", \"Html\");\nclass BaseTextTile extends BaseMessageTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._messageBody = null;\n    this._format = null;\n  }\n  get shape() {\n    return \"message\";\n  }\n  _parseBody(body) {\n    return stringAsBody(body);\n  }\n  _getBodyFormat() {\n    return BodyFormat.Plain;\n  }\n  get body() {\n    const body = this._getBody();\n    const format = this._getBodyFormat();\n    if (!this._messageBody || this._messageBody.sourceString !== body || this._format !== format) {\n      this._messageBody = this._parseBody(body, format);\n      this._format = format;\n    }\n    return this._messageBody;\n  }\n}\nconst basicInline = [\"EM\", \"STRONG\", \"CODE\", \"DEL\", \"SPAN\"];\nconst basicBlock = [\"DIV\", \"BLOCKQUOTE\"];\nconst safeSchemas = [\"https\", \"http\", \"ftp\", \"mailto\", \"magnet\"].map((name) => `${name}://`);\nconst baseUrl = \"https://matrix.to\";\nconst linkPrefix = `${baseUrl}/#/`;\nclass Deserializer {\n  constructor(result, mediaRepository) {\n    this.result = result;\n    this.mediaRepository = mediaRepository;\n  }\n  parsePillLink(link) {\n    if (!link.startsWith(linkPrefix)) {\n      return null;\n    }\n    const contents = link.substring(linkPrefix.length);\n    if (contents[0] === \"@\") {\n      return contents;\n    }\n    return null;\n  }\n  parseLink(node, children) {\n    const href = this.result.getAttributeValue(node, \"href\");\n    const lcUrl = href == null ? void 0 : href.toLowerCase();\n    if (!lcUrl || !safeSchemas.some((schema2) => lcUrl.startsWith(schema2))) {\n      return new FormatPart(\"span\", children);\n    }\n    const pillId = this.parsePillLink(href);\n    if (pillId) {\n      return new PillPart(pillId, href, children);\n    }\n    return new LinkPart(href, children);\n  }\n  parseList(node) {\n    const result = this.result;\n    let start = null;\n    if (result.getNodeElementName(node) === \"OL\") {\n      start = parseInt(result.getAttributeValue(node, \"start\")) || 1;\n    }\n    const items = [];\n    for (const child of result.getChildNodes(node)) {\n      if (result.getNodeElementName(child) !== \"LI\") {\n        continue;\n      }\n      const item = this.parseAnyNodes(result.getChildNodes(child));\n      items.push(item);\n    }\n    return new ListBlock(start, items);\n  }\n  _ensureElement(node, tag2) {\n    return node && this.result.isElementNode(node) && this.result.getNodeElementName(node) === tag2;\n  }\n  parseCodeBlock(node) {\n    const result = this.result;\n    let codeNode;\n    for (const child of result.getChildNodes(node)) {\n      codeNode = child;\n      break;\n    }\n    let language = null;\n    if (!this._ensureElement(codeNode, \"CODE\")) {\n      return new CodeBlock(language, this.result.getNodeText(node));\n    }\n    const cl = result.getAttributeValue(codeNode, \"class\") || \"\";\n    for (const clname of cl.split(\" \")) {\n      if (clname.startsWith(\"language-\") && !clname.startsWith(\"language-_\")) {\n        language = clname.substring(9);\n        break;\n      }\n    }\n    return new CodeBlock(language, this.result.getNodeText(codeNode));\n  }\n  parseImage(node) {\n    const result = this.result;\n    const src2 = result.getAttributeValue(node, \"src\") || \"\";\n    const url = this.mediaRepository.mxcUrl(src2);\n    if (!url) {\n      return null;\n    }\n    const width = parseInt(result.getAttributeValue(node, \"width\")) || null;\n    const height = parseInt(result.getAttributeValue(node, \"height\")) || null;\n    const alt = result.getAttributeValue(node, \"alt\");\n    const title = result.getAttributeValue(node, \"title\");\n    return new ImagePart(url, width, height, alt, title);\n  }\n  parseTableRow(row, tag2) {\n    const cells = [];\n    for (const node of this.result.getChildNodes(row)) {\n      if (!this._ensureElement(node, tag2)) {\n        continue;\n      }\n      const children = this.result.getChildNodes(node);\n      const inlines = this.parseInlineNodes(children);\n      cells.push(inlines);\n    }\n    return cells;\n  }\n  parseTableHead(head) {\n    let headRow = null;\n    for (const node of this.result.getChildNodes(head)) {\n      headRow = node;\n      break;\n    }\n    if (this._ensureElement(headRow, \"TR\")) {\n      return this.parseTableRow(headRow, \"TH\");\n    }\n    return null;\n  }\n  parseTableBody(body) {\n    const rows = [];\n    for (const node of this.result.getChildNodes(body)) {\n      if (!this._ensureElement(node, \"TR\")) {\n        continue;\n      }\n      rows.push(this.parseTableRow(node, \"TD\"));\n    }\n    return rows;\n  }\n  parseTable(node) {\n    const children = Array.from(this.result.getChildNodes(node));\n    let head, body;\n    if (this._ensureElement(children[0], \"THEAD\") && this._ensureElement(children[1], \"TBODY\")) {\n      head = this.parseTableHead(children[0]);\n      body = this.parseTableBody(children[1]);\n    } else if (this._ensureElement(children[0], \"TBODY\")) {\n      head = null;\n      body = this.parseTableBody(children[0]);\n    }\n    return new TableBlock(head, body);\n  }\n  parseInlineElement(node) {\n    const result = this.result;\n    const tag2 = result.getNodeElementName(node);\n    const children = result.getChildNodes(node);\n    switch (tag2) {\n      case \"A\": {\n        const inlines = this.parseInlineNodes(children);\n        return this.parseLink(node, inlines);\n      }\n      case \"BR\":\n        return new NewLinePart();\n      default: {\n        if (!basicInline.includes(tag2)) {\n          return null;\n        }\n        const inlines = this.parseInlineNodes(children);\n        return new FormatPart(tag2, inlines);\n      }\n    }\n  }\n  parseInlineNode(node) {\n    if (this.result.isElementNode(node)) {\n      return this.parseInlineElement(node);\n    }\n    return null;\n  }\n  parseBlockElement(node) {\n    const result = this.result;\n    const tag2 = result.getNodeElementName(node);\n    const children = result.getChildNodes(node);\n    switch (tag2) {\n      case \"H1\":\n      case \"H2\":\n      case \"H3\":\n      case \"H4\":\n      case \"H5\":\n      case \"H6\": {\n        const inlines = this.parseInlineNodes(children);\n        return new HeaderBlock(parseInt(tag2[1]), inlines);\n      }\n      case \"UL\":\n      case \"OL\":\n        return this.parseList(node);\n      case \"PRE\":\n        return this.parseCodeBlock(node);\n      case \"HR\":\n        return new RulePart();\n      case \"IMG\":\n        return this.parseImage(node);\n      case \"P\": {\n        const inlines = this.parseInlineNodes(children);\n        return new FormatPart(tag2, inlines);\n      }\n      case \"TABLE\":\n        return this.parseTable(node);\n      default: {\n        if (!basicBlock.includes(tag2)) {\n          return null;\n        }\n        const blocks = this.parseAnyNodes(children);\n        return new FormatPart(tag2, blocks);\n      }\n    }\n  }\n  parseBlockNode(node) {\n    if (this.result.isElementNode(node)) {\n      return this.parseBlockElement(node);\n    }\n    return null;\n  }\n  _parseTextParts(node, into) {\n    if (!this.result.isTextNode(node)) {\n      return false;\n    }\n    const linkifyCallback = (text2, isLink) => {\n      if (isLink) {\n        into.push(new LinkPart(text2, [new TextPart(text2)]));\n      } else {\n        into.push(new TextPart(text2));\n      }\n    };\n    linkify(this.result.getNodeText(node), linkifyCallback);\n    return true;\n  }\n  _isAllowedNode(node) {\n    return !this._ensureElement(node, \"MX-REPLY\");\n  }\n  _parseInlineNodes(nodes, into) {\n    for (const htmlNode of nodes) {\n      if (this._parseTextParts(htmlNode, into)) {\n        continue;\n      }\n      const node = this.parseInlineNode(htmlNode);\n      if (node) {\n        into.push(node);\n        continue;\n      }\n      if (this._isAllowedNode(htmlNode)) {\n        this._parseInlineNodes(this.result.getChildNodes(htmlNode), into);\n      }\n    }\n  }\n  parseInlineNodes(nodes) {\n    const into = [];\n    this._parseInlineNodes(nodes, into);\n    return into;\n  }\n  _parseAnyNodes(nodes, into) {\n    for (const htmlNode of nodes) {\n      if (this._parseTextParts(htmlNode, into)) {\n        continue;\n      }\n      const node = this.parseInlineNode(htmlNode) || this.parseBlockNode(htmlNode);\n      if (node) {\n        into.push(node);\n        continue;\n      }\n      if (this._isAllowedNode(htmlNode)) {\n        this._parseAnyNodes(this.result.getChildNodes(htmlNode), into);\n      }\n    }\n  }\n  parseAnyNodes(nodes) {\n    const into = [];\n    this._parseAnyNodes(nodes, into);\n    return into;\n  }\n}\nfunction parseHTMLBody(platform, mediaRepository, html) {\n  const parseResult = platform.parseHTML(html);\n  const deserializer = new Deserializer(parseResult, mediaRepository);\n  const parts = deserializer.parseAnyNodes(parseResult.rootNodes);\n  return new MessageBody(html, parts);\n}\nclass TextTile extends BaseTextTile {\n  _getContentString(key) {\n    var _a;\n    return ((_a = this._getContent()) == null ? void 0 : _a[key]) || \"\";\n  }\n  _getPlainBody() {\n    return this._getContentString(\"body\");\n  }\n  _getFormattedBody() {\n    return this._getContentString(\"formatted_body\");\n  }\n  _getBody() {\n    if (this._getBodyFormat() === BodyFormat.Html) {\n      return this._getFormattedBody();\n    } else {\n      return this._getPlainBody();\n    }\n  }\n  _getBodyFormat() {\n    var _a;\n    if (((_a = this._getContent()) == null ? void 0 : _a.format) === \"org.matrix.custom.html\") {\n      return BodyFormat.Html;\n    } else {\n      return BodyFormat.Plain;\n    }\n  }\n  _parseBody(body, format) {\n    var _a;\n    let messageBody;\n    if (format === BodyFormat.Html) {\n      messageBody = parseHTMLBody(this.platform, this._mediaRepository, body);\n    } else {\n      messageBody = parsePlainBody(body);\n    }\n    if (((_a = this._getContent()) == null ? void 0 : _a.msgtype) === \"m.emote\") {\n      messageBody.insertEmote(`* ${this.displayName} `);\n    }\n    return messageBody;\n  }\n}\nclass RedactedTile extends BaseMessageTile {\n  get shape() {\n    return \"redacted\";\n  }\n  get description() {\n    const { redactionReason } = this._entry;\n    if (this.isRedacting) {\n      if (redactionReason) {\n        return this.i18n`This message is being deleted (${redactionReason})…`;\n      } else {\n        return this.i18n`This message is being deleted…`;\n      }\n    } else {\n      if (redactionReason) {\n        return this.i18n`This message has been deleted (${redactionReason}).`;\n      } else {\n        return this.i18n`This message has been deleted.`;\n      }\n    }\n  }\n  get isRedacting() {\n    return this._entry.isRedacting;\n  }\n  get canRedact() {\n    return false;\n  }\n  abortPendingRedaction() {\n    return this._entry.abortPendingRedaction();\n  }\n}\nconst MAX_HEIGHT = 300;\nconst MAX_WIDTH = 400;\nclass BaseMediaTile extends BaseMessageTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._decryptedThumbnail = null;\n    this._decryptedFile = null;\n    this._isVisible = false;\n    this._error = null;\n    this._downloading = false;\n    this._downloadError = null;\n  }\n  async downloadMedia() {\n    if (this._downloading || this.isPending) {\n      return;\n    }\n    const content = this._getContent();\n    const filename = content.body;\n    this._downloading = true;\n    this.emitChange(\"status\");\n    let blob;\n    try {\n      blob = await this._mediaRepository.downloadAttachment(content);\n      this.platform.saveFileAs(blob, filename);\n    } catch (err) {\n      this._downloadError = err;\n    } finally {\n      blob == null ? void 0 : blob.dispose();\n      this._downloading = false;\n    }\n    this.emitChange(\"status\");\n  }\n  get isUploading() {\n    return this.isPending && this._entry.pendingEvent.status === SendStatus.UploadingAttachments;\n  }\n  get uploadPercentage() {\n    const { pendingEvent } = this._entry;\n    return pendingEvent && Math.round(pendingEvent.attachmentsSentBytes / pendingEvent.attachmentsTotalBytes * 100);\n  }\n  get status() {\n    const { pendingEvent } = this._entry;\n    switch (pendingEvent == null ? void 0 : pendingEvent.status) {\n      case SendStatus.Waiting:\n        return this.i18n`Waiting…`;\n      case SendStatus.EncryptingAttachments:\n      case SendStatus.Encrypting:\n        return this.i18n`Encrypting…`;\n      case SendStatus.UploadingAttachments:\n        return this.i18n`Uploading…`;\n      case SendStatus.Sending:\n        return this.i18n`Sending…`;\n      case SendStatus.Error:\n        return this.i18n`Error: ${pendingEvent.error.message}`;\n      default:\n        if (this._downloadError) {\n          return `Download failed`;\n        }\n        if (this._downloading) {\n          return this.i18n`Downloading…`;\n        }\n        return \"\";\n    }\n  }\n  get thumbnailUrl() {\n    var _a, _b;\n    if (!this._isVisible) {\n      return \"\";\n    }\n    if (this._decryptedThumbnail) {\n      return this._decryptedThumbnail.url;\n    } else {\n      const thumbnailMxc = (_a = this._getContent().info) == null ? void 0 : _a.thumbnail_url;\n      if (thumbnailMxc) {\n        return this._mediaRepository.mxcUrlThumbnail(thumbnailMxc, this.width, this.height, \"scale\");\n      }\n    }\n    if (this._entry.isPending) {\n      const attachment = this._entry.pendingEvent.getAttachment(\"info.thumbnail_url\");\n      return attachment && attachment.localPreview.url;\n    }\n    if (this._isMainResourceImage()) {\n      if (this._decryptedFile) {\n        return this._decryptedFile.url;\n      } else {\n        const mxcUrl = (_b = this._getContent()) == null ? void 0 : _b.url;\n        if (typeof mxcUrl === \"string\") {\n          return this._mediaRepository.mxcUrlThumbnail(mxcUrl, this.width, this.height, \"scale\");\n        }\n      }\n    }\n    return \"\";\n  }\n  notifyVisible() {\n    super.notifyVisible();\n    this._isVisible = true;\n    this.emitChange(\"thumbnailUrl\");\n    if (!this.isPending) {\n      this._tryLoadEncryptedThumbnail();\n    }\n  }\n  get width() {\n    var _a;\n    const info = (_a = this._getContent()) == null ? void 0 : _a.info;\n    return Math.round((info == null ? void 0 : info.w) * this._scaleFactor());\n  }\n  get height() {\n    var _a;\n    const info = (_a = this._getContent()) == null ? void 0 : _a.info;\n    return Math.round((info == null ? void 0 : info.h) * this._scaleFactor());\n  }\n  get mimeType() {\n    var _a;\n    const info = (_a = this._getContent()) == null ? void 0 : _a.info;\n    return info == null ? void 0 : info.mimetype;\n  }\n  get label() {\n    return this._getContent().body;\n  }\n  get error() {\n    if (this._error) {\n      return `Could not load media: ${this._error.message}`;\n    }\n    return null;\n  }\n  setViewError(err) {\n    this._error = err;\n    this.emitChange(\"error\");\n  }\n  async _loadEncryptedFile(file) {\n    const blob = await this._mediaRepository.downloadEncryptedFile(file, true);\n    if (this.isDisposed) {\n      blob.dispose();\n      return;\n    }\n    return this.track(blob);\n  }\n  async _tryLoadEncryptedThumbnail() {\n    var _a;\n    try {\n      const thumbnailFile = (_a = this._getContent().info) == null ? void 0 : _a.thumbnail_file;\n      const file = this._getContent().file;\n      if (thumbnailFile) {\n        this._decryptedThumbnail = await this._loadEncryptedFile(thumbnailFile);\n        this.emitChange(\"thumbnailUrl\");\n      } else if (file && this._isMainResourceImage()) {\n        this._decryptedFile = await this._loadEncryptedFile(file);\n        this.emitChange(\"thumbnailUrl\");\n      }\n    } catch (err) {\n      this._error = err;\n      this.emitChange(\"error\");\n    }\n  }\n  _scaleFactor() {\n    var _a;\n    const info = (_a = this._getContent()) == null ? void 0 : _a.info;\n    const scaleHeightFactor = MAX_HEIGHT / (info == null ? void 0 : info.h);\n    const scaleWidthFactor = MAX_WIDTH / (info == null ? void 0 : info.w);\n    return Math.min(scaleWidthFactor, scaleHeightFactor, 1);\n  }\n  _isMainResourceImage() {\n    return true;\n  }\n}\nclass ImageTile extends BaseMediaTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._lightboxUrl = this.urlRouter.urlForSegments([\n      this.navigation.segment(\"room\", this._room.id),\n      this.navigation.segment(\"lightbox\", this._entry.id)\n    ]);\n  }\n  get lightboxUrl() {\n    if (!this.isPending) {\n      return this._lightboxUrl;\n    }\n    return \"\";\n  }\n  get shape() {\n    return \"image\";\n  }\n}\nclass VideoTile extends BaseMediaTile {\n  async loadVideo() {\n    const file = this._getContent().file;\n    if (file && !this._decryptedFile) {\n      this._decryptedFile = await this._loadEncryptedFile(file);\n      this.emitChange(\"videoUrl\");\n    }\n  }\n  get videoUrl() {\n    var _a;\n    if (this._decryptedFile) {\n      return this._decryptedFile.url;\n    }\n    const mxcUrl = (_a = this._getContent()) == null ? void 0 : _a.url;\n    if (typeof mxcUrl === \"string\") {\n      return this._mediaRepository.mxcUrl(mxcUrl);\n    }\n    return \"\";\n  }\n  get shape() {\n    return \"video\";\n  }\n  _isMainResourceImage() {\n    return false;\n  }\n}\nfunction formatSize(size, decimals = 2) {\n  if (Number.isSafeInteger(size)) {\n    const base2 = Math.min(3, Math.floor(Math.log(size) / Math.log(1024)));\n    const formattedSize = Math.round(size / Math.pow(1024, base2)).toFixed(decimals);\n    switch (base2) {\n      case 0:\n        return `${formattedSize} bytes`;\n      case 1:\n        return `${formattedSize} KB`;\n      case 2:\n        return `${formattedSize} MB`;\n      case 3:\n        return `${formattedSize} GB`;\n    }\n  }\n  return \"\";\n}\nclass FileTile extends BaseMessageTile {\n  constructor(entry, options) {\n    super(entry, options);\n    this._downloadError = null;\n    this._downloading = false;\n  }\n  async download() {\n    if (this._downloading || this.isPending) {\n      return;\n    }\n    const content = this._getContent();\n    const filename = content.body;\n    this._downloading = true;\n    this.emitChange(\"label\");\n    let blob;\n    try {\n      blob = await this._mediaRepository.downloadAttachment(content);\n      this.platform.saveFileAs(blob, filename);\n    } catch (err) {\n      this._downloadError = err;\n    } finally {\n      blob == null ? void 0 : blob.dispose();\n      this._downloading = false;\n    }\n    this.emitChange(\"label\");\n  }\n  get label() {\n    var _a;\n    if (this._downloadError) {\n      return `Could not download file: ${this._downloadError.message}`;\n    }\n    const content = this._getContent();\n    const filename = content.body;\n    if (this._entry.isPending) {\n      const { pendingEvent } = this._entry;\n      switch (pendingEvent == null ? void 0 : pendingEvent.status) {\n        case SendStatus.Waiting:\n          return this.i18n`Waiting to send ${filename}…`;\n        case SendStatus.EncryptingAttachments:\n        case SendStatus.Encrypting:\n          return this.i18n`Encrypting ${filename}…`;\n        case SendStatus.UploadingAttachments: {\n          const percent = Math.round(pendingEvent.attachmentsSentBytes / pendingEvent.attachmentsTotalBytes * 100);\n          return this.i18n`Uploading ${filename}: ${percent}%`;\n        }\n        case SendStatus.Sending:\n        case SendStatus.Sent:\n          return this.i18n`Sending ${filename}…`;\n        case SendStatus.Error:\n          return this.i18n`Error: could not send ${filename}: ${pendingEvent.error.message}`;\n        default:\n          return `Unknown send status for ${filename}`;\n      }\n    } else {\n      const size = formatSize((_a = this._getContent().info) == null ? void 0 : _a.size);\n      if (this._downloading) {\n        return this.i18n`Downloading ${filename} (${size})…`;\n      } else {\n        return this.i18n`Download ${filename} (${size})`;\n      }\n    }\n  }\n  get shape() {\n    return \"file\";\n  }\n}\nclass LocationTile extends BaseMessageTile {\n  get shape() {\n    return \"location\";\n  }\n  get mapsLink() {\n    try {\n      const url = new URL(this._getContent().geo_uri);\n      if (url.protocol !== \"geo:\") {\n        return \"\";\n      }\n      const [locationStr, ...namedParams] = url.pathname.split(\";\");\n      const [latStr, longStr] = locationStr.split(\",\");\n      const lat = parseFloat(latStr);\n      const long = parseFloat(longStr);\n      let uncertainty;\n      for (const namedParam of namedParams) {\n        const [name, value] = namedParam.split(\"=\");\n        if (name === \"u\") {\n          uncertainty = parseFloat(value);\n        }\n      }\n      if (this.platform.isIOS) {\n        return `http://maps.apple.com/?ll=${lat},${long}`;\n      } else {\n        let uri = `geo:${lat},${long}`;\n        if (uncertainty) {\n          uri = uri + `;u=${uncertainty}`;\n        }\n        return uri;\n      }\n    } catch {\n      return \"\";\n    }\n  }\n  get label() {\n    return this.i18n`${this.displayName} sent their location`;\n  }\n}\nclass RoomNameTile extends SimpleTile {\n  get shape() {\n    return \"announcement\";\n  }\n  get announcement() {\n    const content = this._entry.content;\n    return `${this._entry.displayName || this._entry.sender} named the room \"${content == null ? void 0 : content.name}\"`;\n  }\n}\nclass RoomMemberTile extends SimpleTile {\n  get shape() {\n    return \"announcement\";\n  }\n  get announcement() {\n    var _a, _b;\n    const { sender, content, prevContent, stateKey } = this._entry;\n    const senderName = this._entry.displayName || sender;\n    const targetName = sender === stateKey ? senderName : ((_a = this._entry.content) == null ? void 0 : _a.displayname) || stateKey;\n    const membership = content && content.membership;\n    const prevMembership = prevContent && prevContent.membership;\n    if (prevMembership === \"join\" && membership === \"join\") {\n      if (content.avatar_url !== prevContent.avatar_url) {\n        return `${senderName} changed their avatar`;\n      } else if (content.displayname !== prevContent.displayname) {\n        if (!content.displayname) {\n          return `${stateKey} removed their name (${prevContent.displayname})`;\n        }\n        return `${(_b = prevContent.displayname) != null ? _b : stateKey} changed their name to ${content.displayname}`;\n      }\n    } else if (membership === \"join\") {\n      return `${targetName} joined the room`;\n    } else if (membership === \"invite\") {\n      return `${targetName} was invited to the room by ${senderName}`;\n    } else if (prevMembership === \"invite\") {\n      if (membership === \"join\") {\n        return `${targetName} accepted the invitation to join the room`;\n      } else if (membership === \"leave\") {\n        return `${targetName} declined the invitation to join the room`;\n      }\n    } else if (membership === \"leave\") {\n      if (stateKey === sender) {\n        return `${targetName} left the room`;\n      } else {\n        const reason = content.reason;\n        return `${targetName} was kicked from the room by ${senderName}${reason ? `: ${reason}` : \"\"}`;\n      }\n    } else if (membership === \"ban\") {\n      return `${targetName} was banned from the room by ${senderName}`;\n    }\n    return `${sender} membership changed to ${content.membership}`;\n  }\n}\nclass EncryptedEventTile extends BaseTextTile {\n  updateEntry(entry, params) {\n    const parentResult = super.updateEntry(entry, params);\n    if (entry.eventType !== \"m.room.encrypted\") {\n      return UpdateAction.Replace(\"shape\");\n    } else {\n      return parentResult;\n    }\n  }\n  get shape() {\n    return \"message-status\";\n  }\n  _getBody() {\n    const decryptionError = this._entry.decryptionError;\n    const code = decryptionError == null ? void 0 : decryptionError.code;\n    let string;\n    if (code === \"MEGOLM_NO_SESSION\") {\n      string = this.i18n`The sender hasn't sent us the key for this message yet.`;\n    } else {\n      string = (decryptionError == null ? void 0 : decryptionError.message) || this.i18n`Could not decrypt message because of unknown reason.`;\n    }\n    return string;\n  }\n}\nclass EncryptionEnabledTile extends SimpleTile {\n  get shape() {\n    return \"announcement\";\n  }\n  get announcement() {\n    const senderName = this._entry.displayName || this._entry.sender;\n    return this.i18n`${senderName} has enabled end-to-end encryption`;\n  }\n}\nclass MissingAttachmentTile extends BaseMessageTile {\n  get shape() {\n    return \"missing-attachment\";\n  }\n  get label() {\n    const name = this._getContent().body;\n    const msgtype = this._getContent().msgtype;\n    if (msgtype === \"m.image\") {\n      return this.i18n`The image ${name} wasn't fully sent previously and could not be recovered.`;\n    } else {\n      return this.i18n`The file ${name} wasn't fully sent previously and could not be recovered.`;\n    }\n  }\n}\nclass CallTile extends SimpleTile {\n  constructor(entry, options) {\n    super(entry, options);\n    const calls = this.getOption(\"session\").callHandler.calls;\n    this._callSubscription = void 0;\n    this._memberSizeSubscription = void 0;\n    const call = calls.get(this._entry.stateKey);\n    if (call && !call.isTerminated) {\n      this._call = call;\n      this.memberViewModels = this._setupMembersList(this._call);\n      this._callSubscription = this.track(this._call.disposableOn(\"change\", () => {\n        this._onCallUpdate();\n      }));\n      this._memberSizeSubscription = this.track(this._call.members.observeSize().subscribe(() => {\n        this.emitChange(\"memberCount\");\n      }));\n      this._onCallUpdate();\n    }\n  }\n  _onCallUpdate() {\n    if (this._call.isTerminated) {\n      this._durationInterval = this.disposeTracked(this._durationInterval);\n      this._callSubscription = this.disposeTracked(this._callSubscription);\n      this._call = void 0;\n    } else if (!this._durationInterval) {\n      this._durationInterval = this.track(this.platform.clock.createInterval(() => {\n        this.emitChange(\"duration\");\n      }, 1e3));\n    }\n    this.emitChange();\n  }\n  _setupMembersList(call) {\n    return call.members.mapValues((member, emitChange) => new MemberAvatarViewModel(this.childOptions({\n      member,\n      emitChange,\n      mediaRepository: this.getOption(\"room\").mediaRepository\n    }))).sortValues((a, b) => a.userId.localeCompare(b.userId));\n  }\n  get memberCount() {\n    if (this._call) {\n      return this._call.members.size;\n    }\n    return 0;\n  }\n  get confId() {\n    return this._entry.stateKey;\n  }\n  get duration() {\n    if (this._call && this._call.duration) {\n      return this.timeFormatter.formatDuration(this._call.duration);\n    } else {\n      return \"\";\n    }\n  }\n  get shape() {\n    return \"call\";\n  }\n  get canJoin() {\n    return this._call && !this._call.hasJoined && !this._call.usesFoci;\n  }\n  get canLeave() {\n    return this._call && this._call.hasJoined;\n  }\n  get title() {\n    if (this._call) {\n      if (this.type === CallType.Video) {\n        return `${this.displayName} started a video call`;\n      } else {\n        return `${this.displayName} started a voice call`;\n      }\n    } else {\n      if (this.type === CallType.Video) {\n        return `Video call ended`;\n      } else {\n        return `Voice call ended`;\n      }\n    }\n  }\n  get typeLabel() {\n    if (this._call && this._call.usesFoci) {\n      return `This call uses a stream-forwarding unit, which isn't supported yet, so you can't join this call.`;\n    }\n    if (this.type === CallType.Video) {\n      return `Video call`;\n    } else {\n      return `Voice call`;\n    }\n  }\n  get type() {\n    return this._entry.event.content[\"m.type\"];\n  }\n  async join() {\n    await this.logAndCatch(\"CallTile.join\", async (log) => {\n      if (this.canJoin) {\n        const stream = await this.platform.mediaDevices.getMediaTracks(false, true);\n        const localMedia = new LocalMedia().withUserMedia(stream);\n        await this._call.join(localMedia, log);\n      }\n    });\n  }\n  async leave() {\n    await this.logAndCatch(\"CallTile.leave\", async (log) => {\n      if (this.canLeave) {\n        await this._call.leave(log);\n      }\n    });\n  }\n}\nclass MemberAvatarViewModel extends ViewModel {\n  get _member() {\n    return this.getOption(\"member\");\n  }\n  get userId() {\n    return this._member.userId;\n  }\n  get avatarLetter() {\n    return avatarInitials(this._member.member.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._member.userId);\n  }\n  avatarUrl(size) {\n    const { avatarUrl } = this._member.member;\n    const mediaRepository = this.getOption(\"mediaRepository\");\n    return getAvatarHttpUrl(avatarUrl, size, this.platform, mediaRepository);\n  }\n  get avatarTitle() {\n    return this._member.member.name;\n  }\n}\nfunction tileClassForEntry(entry, options) {\n  if (entry.isGap) {\n    return GapTile;\n  } else if (entry.isPending && entry.pendingEvent.isMissingAttachments) {\n    return MissingAttachmentTile;\n  } else if (entry.eventType) {\n    switch (entry.eventType) {\n      case \"m.room.message\": {\n        if (entry.isRedacted) {\n          return RedactedTile;\n        }\n        const content = entry.content;\n        const msgtype = content && content.msgtype;\n        switch (msgtype) {\n          case \"m.text\":\n          case \"m.notice\":\n          case \"m.emote\":\n            return TextTile;\n          case \"m.image\":\n            return ImageTile;\n          case \"m.video\":\n            return VideoTile;\n          case \"m.file\":\n            return FileTile;\n          case \"m.location\":\n            return LocationTile;\n          default:\n            return void 0;\n        }\n      }\n      case \"m.room.name\":\n        return RoomNameTile;\n      case \"m.room.member\":\n        return RoomMemberTile;\n      case \"m.room.encrypted\":\n        if (entry.isRedacted) {\n          return RedactedTile;\n        }\n        return EncryptedEventTile;\n      case \"m.room.encryption\":\n        return EncryptionEnabledTile;\n      case \"org.matrix.msc3401.call\": {\n        if (options.features.calls && entry.stateKey && !entry.prevContent) {\n          return CallTile;\n        }\n        return void 0;\n      }\n      default:\n        return void 0;\n    }\n  }\n}\nasync function joinRoom(roomId, session) {\n  var _a, _b, _c2, _d2;\n  try {\n    const internalRoomId = await session.joinRoom(roomId);\n    const roomStatusObservable = await session.observeRoomStatus(internalRoomId);\n    await roomStatusObservable.waitFor((status) => status === RoomStatus.Joined);\n    return internalRoomId;\n  } catch (e) {\n    if (((_a = e.statusCode) != null ? _a : e.status) === 400) {\n      throw new Error(`'${roomId}' is not a legal room ID or alias`);\n    } else if (((_b = e.statusCode) != null ? _b : e.status) === 404 || ((_c2 = e.statusCode) != null ? _c2 : e.status) === 502 || e.message == \"Internal Server eor\") {\n      throw new Error(`Room '${roomId}' could not be found`);\n    } else if (((_d2 = e.statusCode) != null ? _d2 : e.status) === 403) {\n      throw new Error(`You are not invited to join '${roomId}'`);\n    } else {\n      throw e;\n    }\n  }\n}\nclass RoomViewModel extends ErrorReportViewModel {\n  constructor(options) {\n    super(options);\n    const { room, tileClassForEntry: tileClassForEntry$1 } = options;\n    this._room = room;\n    this._timelineVM = null;\n    this._tileClassForEntry = tileClassForEntry$1 != null ? tileClassForEntry$1 : tileClassForEntry;\n    this._tileOptions = void 0;\n    this._onRoomChange = this._onRoomChange.bind(this);\n    this._composerVM = null;\n    if (room.isArchived) {\n      this._composerVM = this.track(new ArchivedViewModel(this.childOptions({ archivedRoom: room })));\n    } else {\n      this._recreateComposerOnPowerLevelChange();\n    }\n    this._clearUnreadTimout = null;\n    this._closeUrl = this.urlRouter.urlUntilSegment(\"session\");\n    this._setupCallViewModel();\n  }\n  _setupCallViewModel() {\n    if (!this.features.calls) {\n      return;\n    }\n    const calls = this.getOption(\"session\").callHandler.calls;\n    this._callObservable = new PickMapObservableValue(calls.filterValues((c) => {\n      return c.roomId === this._room.id && c.hasJoined;\n    }));\n    this._callViewModel = void 0;\n    this.track(this._callObservable.subscribe((call2) => {\n      if (call2 && this._callViewModel && call2.id === this._callViewModel.id) {\n        return;\n      }\n      this._callViewModel = this.disposeTracked(this._callViewModel);\n      if (call2) {\n        this._callViewModel = this.track(new CallViewModel(this.childOptions({ call: call2, room: this._room })));\n      }\n      this.emitChange(\"callViewModel\");\n    }));\n    const call = this._callObservable.get();\n    if (call) {\n      this._callViewModel = this.track(new CallViewModel(this.childOptions({ call, room: this._room })));\n    }\n  }\n  async load() {\n    this.logAndCatch(\"RoomViewModel.load\", async (log) => {\n      this._room.on(\"change\", this._onRoomChange);\n      const timeline = await this._room.openTimeline(log);\n      this._tileOptions = this.childOptions({\n        session: this.getOption(\"session\"),\n        roomVM: this,\n        timeline,\n        tileClassForEntry: this._tileClassForEntry\n      });\n      this._timelineVM = this.track(new TimelineViewModel(this.childOptions({\n        tileOptions: this._tileOptions,\n        timeline\n      })));\n      this.emitChange(\"timelineViewModel\");\n      await this._clearUnreadAfterDelay(log);\n    });\n  }\n  async _recreateComposerOnPowerLevelChange() {\n    const powerLevelObservable = await this._room.observePowerLevels();\n    const canSendMessage = () => powerLevelObservable.get().canSendType(\"m.room.message\");\n    let oldCanSendMessage = canSendMessage();\n    const recreateComposer = (newCanSendMessage) => {\n      this._composerVM = this.disposeTracked(this._composerVM);\n      if (newCanSendMessage) {\n        this._composerVM = this.track(new ComposerViewModel(this));\n      } else {\n        this._composerVM = this.track(new LowerPowerLevelViewModel(this.childOptions()));\n      }\n      this.emitChange(\"powerLevelObservable\");\n    };\n    this.track(powerLevelObservable.subscribe(() => {\n      const newCanSendMessage = canSendMessage();\n      if (oldCanSendMessage !== newCanSendMessage) {\n        recreateComposer(newCanSendMessage);\n        oldCanSendMessage = newCanSendMessage;\n      }\n    }));\n    recreateComposer(oldCanSendMessage);\n  }\n  async _clearUnreadAfterDelay(log) {\n    if (this._room.isArchived || this._clearUnreadTimout) {\n      return;\n    }\n    this._clearUnreadTimout = this.clock.createTimeout(2e3);\n    try {\n      await this._clearUnreadTimout.elapsed();\n      await this._room.clearUnread(log);\n      this._clearUnreadTimout = null;\n    } catch (err) {\n      if (err.name === \"AbortError\") {\n        log.set(\"clearUnreadCancelled\", true);\n      } else {\n        throw err;\n      }\n    }\n  }\n  focus() {\n    this.logAndCatch(\"RoomViewModel.focus\", async (log) => {\n      this._clearUnreadAfterDelay(log);\n    });\n  }\n  dispose() {\n    super.dispose();\n    this._room.off(\"change\", this._onRoomChange);\n    if (this._room.isArchived) {\n      this._room.release();\n    }\n    if (this._clearUnreadTimout) {\n      this._clearUnreadTimout.abort();\n      this._clearUnreadTimout = null;\n    }\n  }\n  _onRoomChange() {\n    var _a;\n    (_a = this._composerVM) == null ? void 0 : _a.emitChange();\n    this.emitChange();\n  }\n  get kind() {\n    return \"room\";\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  get name() {\n    return this._room.name || this.i18n`Empty Room`;\n  }\n  get id() {\n    return this._room.id;\n  }\n  get timelineViewModel() {\n    return this._timelineVM;\n  }\n  get isEncrypted() {\n    return this._room.isEncrypted;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._room.avatarColorId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._room.avatarUrl, size, this.platform, this._room.mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n  get canLeave() {\n    return this._room.isJoined;\n  }\n  leaveRoom() {\n    this._room.leave();\n  }\n  get canForget() {\n    return this._room.isArchived;\n  }\n  forgetRoom() {\n    this._room.forget();\n  }\n  get canRejoin() {\n    return this._room.isArchived;\n  }\n  rejoinRoom() {\n    this._room.join();\n  }\n  _createTile(entry) {\n    if (this._tileOptions) {\n      const Tile = this._tileOptions.tileClassForEntry(entry, this._tileOptions);\n      if (Tile) {\n        return new Tile(entry, this._tileOptions);\n      }\n    }\n  }\n  _sendMessage(message, replyingTo) {\n    return this.logAndCatch(\"RoomViewModel.sendMessage\", async (log) => {\n      let success = false;\n      if (!this._room.isArchived && message) {\n        let msgtype = \"m.text\";\n        if (message.startsWith(\"//\")) {\n          message = message.substring(1).trim();\n        } else if (message.startsWith(\"/\")) {\n          const result = await this._processCommand(message);\n          msgtype = result.msgtype;\n          message = result.message;\n        }\n        let content;\n        if (replyingTo) {\n          log.set(\"replyingTo\", replyingTo.eventId);\n          content = await replyingTo.createReplyContent(msgtype, message);\n        } else {\n          content = { msgtype, body: message };\n        }\n        await this._room.sendEvent(\"m.room.message\", content, void 0, log);\n        success = true;\n      }\n      log.set(\"success\", success);\n      return success;\n    }, false);\n  }\n  async _processCommandJoin(roomName) {\n    try {\n      const session = this._options.client.session;\n      const roomId = await joinRoom(roomName, session);\n      this.navigation.push(\"room\", roomId);\n    } catch (err) {\n      this.reportError(err);\n    }\n  }\n  async _processCommand(message) {\n    let msgtype;\n    const [commandName, ...args] = message.substring(1).split(\" \");\n    switch (commandName) {\n      case \"me\":\n        message = args.join(\" \");\n        msgtype = \"m.emote\";\n        break;\n      case \"join\":\n        if (args.length === 1) {\n          const roomName = args[0];\n          await this._processCommandJoin(roomName);\n        } else {\n          this.reportError(new Error(\"join syntax: /join <room-id>\"));\n        }\n        break;\n      case \"shrug\":\n        message = \"\\xAF\\\\_(\\u30C4)_/\\xAF \" + args.join(\" \");\n        msgtype = \"m.text\";\n        break;\n      case \"tableflip\":\n        message = \"(\\u256F\\xB0\\u25A1\\xB0\\uFF09\\u256F\\uFE35 \\u253B\\u2501\\u253B \" + args.join(\" \");\n        msgtype = \"m.text\";\n        break;\n      case \"unflip\":\n        message = \"\\u252C\\u2500\\u2500\\u252C \\u30CE( \\u309C-\\u309C\\u30CE) \" + args.join(\" \");\n        msgtype = \"m.text\";\n        break;\n      case \"lenny\":\n        message = \"( \\u0361\\xB0 \\u035C\\u0296 \\u0361\\xB0) \" + args.join(\" \");\n        msgtype = \"m.text\";\n        break;\n      default:\n        this.reportError(new Error(`no command name \"${commandName}\". To send the message instead of executing, please type \"/${message}\"`));\n        message = void 0;\n    }\n    return { msgtype, message };\n  }\n  _pickAndSendFile() {\n    return this.logAndCatch(\"RoomViewModel.sendFile\", async (log) => {\n      const file = await this.platform.openFile();\n      if (!file) {\n        log.set(\"cancelled\", true);\n        return;\n      }\n      return this._sendFile(file, log);\n    });\n  }\n  async _sendFile(file, log) {\n    const content = {\n      body: file.name,\n      msgtype: \"m.file\"\n    };\n    await this._room.sendEvent(\"m.room.message\", content, {\n      \"url\": this._room.createAttachment(file.blob, file.name)\n    }, log);\n  }\n  _pickAndSendVideo() {\n    return this.logAndCatch(\"RoomViewModel.sendVideo\", async (log) => {\n      if (!this.platform.hasReadPixelPermission()) {\n        throw new Error(\"Please allow canvas image data access, so we can scale your images down.\");\n      }\n      const file = await this.platform.openFile(\"video/*\");\n      if (!file) {\n        return;\n      }\n      if (!file.blob.mimeType.startsWith(\"video/\")) {\n        return this._sendFile(file, log);\n      }\n      let video;\n      try {\n        video = await this.platform.loadVideo(file.blob);\n      } catch (err) {\n        if (err instanceof window.MediaError && err.code === 4) {\n          throw new Error(`this browser does not support videos of type ${file == null ? void 0 : file.blob.mimeType}.`);\n        } else {\n          throw err;\n        }\n      }\n      const content = {\n        body: file.name,\n        msgtype: \"m.video\",\n        info: videoToInfo(video)\n      };\n      const attachments = {\n        \"url\": this._room.createAttachment(video.blob, file.name)\n      };\n      const limit = await this.platform.settingsStorage.getInt(\"sentImageSizeLimit\");\n      const maxDimension = limit || Math.min(video.maxDimension, 800);\n      const thumbnail = await video.scale(maxDimension);\n      content.info.thumbnail_info = imageToInfo(thumbnail);\n      attachments[\"info.thumbnail_url\"] = this._room.createAttachment(thumbnail.blob, file.name);\n      await this._room.sendEvent(\"m.room.message\", content, attachments, log);\n    });\n  }\n  async _pickAndSendPicture() {\n    this.logAndCatch(\"RoomViewModel.sendPicture\", async (log) => {\n      if (!this.platform.hasReadPixelPermission()) {\n        alert(\"Please allow canvas image data access, so we can scale your images down.\");\n        return;\n      }\n      const file = await this.platform.openFile(\"image/*\");\n      if (!file) {\n        log.set(\"cancelled\", true);\n        return;\n      }\n      if (!file.blob.mimeType.startsWith(\"image/\")) {\n        return this._sendFile(file, log);\n      }\n      let image = await this.platform.loadImage(file.blob);\n      const limit = await this.platform.settingsStorage.getInt(\"sentImageSizeLimit\");\n      if (limit && image.maxDimension > limit) {\n        const scaledImage = await image.scale(limit);\n        image.dispose();\n        image = scaledImage;\n      }\n      const content = {\n        body: file.name,\n        msgtype: \"m.image\",\n        info: imageToInfo(image)\n      };\n      const attachments = {\n        \"url\": this._room.createAttachment(image.blob, file.name)\n      };\n      if (image.maxDimension > 600) {\n        const thumbnail = await image.scale(400);\n        content.info.thumbnail_info = imageToInfo(thumbnail);\n        attachments[\"info.thumbnail_url\"] = this._room.createAttachment(thumbnail.blob, file.name);\n      }\n      await this._room.sendEvent(\"m.room.message\", content, attachments, log);\n    });\n  }\n  get room() {\n    return this._room;\n  }\n  get composerViewModel() {\n    return this._composerVM;\n  }\n  get callViewModel() {\n    return this._callViewModel;\n  }\n  openDetailsPanel() {\n    let path = this.navigation.path.until(\"room\");\n    path = path.with(this.navigation.segment(\"right-panel\", true));\n    path = path.with(this.navigation.segment(\"details\", true));\n    this.navigation.applyPath(path);\n  }\n  startReply(entry) {\n    if (!this._room.isArchived) {\n      this._composerVM.setReplyingTo(entry);\n    }\n  }\n  startCall() {\n    return this.logAndCatch(\"RoomViewModel.startCall\", async (log) => {\n      if (!this.features.calls) {\n        log.set(\"feature_disbled\", true);\n        return;\n      }\n      log.set(\"roomId\", this._room.id);\n      let localMedia;\n      try {\n        const stream = await this.platform.mediaDevices.getMediaTracks(false, true);\n        localMedia = new LocalMedia().withUserMedia(stream);\n      } catch (err) {\n        throw new Error(`Could not get local audio and/or video stream: ${err.message}`);\n      }\n      const session = this.getOption(\"session\");\n      let call;\n      try {\n        call = await session.callHandler.createCall(this._room.id, \"m.video\", \"A call \" + Math.round(this.platform.random() * 100), void 0, log);\n      } catch (err) {\n        throw new Error(`Could not create call: ${err.message}`);\n      }\n      try {\n        await call.join(localMedia, log);\n      } catch (err) {\n        throw new Error(`Could not join call: ${err.message}`);\n      }\n    });\n  }\n}\nfunction videoToInfo(video) {\n  const info = imageToInfo(video);\n  info.duration = video.duration;\n  return info;\n}\nclass ArchivedViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._archivedRoom = options.archivedRoom;\n  }\n  get description() {\n    if (this._archivedRoom.isKicked) {\n      if (this._archivedRoom.kickReason) {\n        return this.i18n`You were kicked from the room by ${this._archivedRoom.kickedBy.name} because: ${this._archivedRoom.kickReason}`;\n      } else {\n        return this.i18n`You were kicked from the room by ${this._archivedRoom.kickedBy.name}.`;\n      }\n    } else if (this._archivedRoom.isBanned) {\n      if (this._archivedRoom.kickReason) {\n        return this.i18n`You were banned from the room by ${this._archivedRoom.kickedBy.name} because: ${this._archivedRoom.kickReason}`;\n      } else {\n        return this.i18n`You were banned from the room by ${this._archivedRoom.kickedBy.name}.`;\n      }\n    } else {\n      return this.i18n`You left this room`;\n    }\n  }\n  get kind() {\n    return \"disabled\";\n  }\n}\nclass LowerPowerLevelViewModel extends ViewModel {\n  get description() {\n    return this.i18n`You do not have the powerlevel necessary to send messages`;\n  }\n  get kind() {\n    return \"disabled\";\n  }\n}\nclass UnknownRoomViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { roomIdOrAlias, session } = options;\n    this._session = session;\n    this.roomIdOrAlias = roomIdOrAlias;\n    this._error = null;\n    this._busy = false;\n  }\n  get error() {\n    var _a;\n    return (_a = this._error) == null ? void 0 : _a.message;\n  }\n  async join() {\n    this._busy = true;\n    this.emitChange(\"busy\");\n    try {\n      const roomId = await this._session.joinRoom(this.roomIdOrAlias);\n      this.navigation.push(\"room\", roomId);\n    } catch (err) {\n      this._error = err;\n      this._busy = false;\n      this.emitChange(\"error\");\n    }\n  }\n  get busy() {\n    return this._busy;\n  }\n  get kind() {\n    return \"unknown\";\n  }\n}\nclass InviteViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { invite, mediaRepository } = options;\n    this._invite = invite;\n    this._mediaRepository = mediaRepository;\n    this._onInviteChange = this._onInviteChange.bind(this);\n    this._error = null;\n    this._closeUrl = this.urlRouter.urlUntilSegment(\"session\");\n    this._invite.on(\"change\", this._onInviteChange);\n    this._inviter = null;\n    if (this._invite.inviter) {\n      this._inviter = new RoomMemberViewModel(this._invite.inviter, mediaRepository, this.platform);\n    }\n    this._roomDescription = this._createRoomDescription();\n  }\n  get kind() {\n    return \"invite\";\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  get name() {\n    return this._invite.name;\n  }\n  get id() {\n    return this._invite.id;\n  }\n  get isEncrypted() {\n    return this._invite.isEncrypted;\n  }\n  get isDirectMessage() {\n    return this._invite.isDirectMessage;\n  }\n  get inviter() {\n    return this._inviter;\n  }\n  get busy() {\n    return this._invite.accepting || this._invite.rejecting;\n  }\n  get error() {\n    if (this._error) {\n      return `Something went wrong: ${this._error.message}`;\n    }\n    return \"\";\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._invite.avatarColorId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._invite.avatarUrl, size, this.platform, this._mediaRepository);\n  }\n  _createRoomDescription() {\n    const parts = [];\n    if (this._invite.isPublic) {\n      parts.push(\"Public room\");\n    } else {\n      parts.push(\"Private room\");\n    }\n    if (this._invite.canonicalAlias) {\n      parts.push(this._invite.canonicalAlias);\n    }\n    return parts.join(\" \\u2022 \");\n  }\n  get roomDescription() {\n    return this._roomDescription;\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n  focus() {\n  }\n  async accept() {\n    try {\n      await this._invite.accept();\n    } catch (err) {\n      this._error = err;\n      this.emitChange(\"error\");\n    }\n  }\n  async reject() {\n    try {\n      await this._invite.reject();\n    } catch (err) {\n      this._error = err;\n      this.emitChange(\"error\");\n    }\n  }\n  _onInviteChange() {\n    this.emitChange();\n  }\n  dispose() {\n    super.dispose();\n    this._invite.off(\"change\", this._onInviteChange);\n  }\n}\nclass RoomMemberViewModel {\n  constructor(member, mediaRepository, platform) {\n    this._member = member;\n    this._mediaRepository = mediaRepository;\n    this._platform = platform;\n  }\n  get id() {\n    return this._member.userId;\n  }\n  get name() {\n    return this._member.name;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._member.userId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._member.avatarUrl, size, this._platform, this._mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n}\nclass RoomBeingCreatedViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { roomBeingCreated, mediaRepository } = options;\n    this._roomBeingCreated = roomBeingCreated;\n    this._mediaRepository = mediaRepository;\n    this._onRoomChange = this._onRoomChange.bind(this);\n    this._closeUrl = this.urlRouter.urlUntilSegment(\"session\");\n    this._roomBeingCreated.on(\"change\", this._onRoomChange);\n  }\n  get kind() {\n    return \"roomBeingCreated\";\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  get name() {\n    return this._roomBeingCreated.name;\n  }\n  get id() {\n    return this._roomBeingCreated.id;\n  }\n  get isEncrypted() {\n    return this._roomBeingCreated.isEncrypted;\n  }\n  get error() {\n    const { error } = this._roomBeingCreated;\n    if (error) {\n      if (error.name === \"ConnectionError\") {\n        return this.i18n`You seem to be offline`;\n      } else {\n        return error.message;\n      }\n    }\n    return \"\";\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._roomBeingCreated.avatarColorId);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n  avatarUrl(size) {\n    var _a;\n    return (_a = this._roomBeingCreated.avatarBlobUrl) != null ? _a : getAvatarHttpUrl(this._roomBeingCreated.avatarUrl, size, this.platform, this._mediaRepository);\n  }\n  focus() {\n  }\n  _onRoomChange() {\n    this.emitChange();\n  }\n  cancel() {\n    this._roomBeingCreated.cancel();\n    this.navigation.applyPath(this.navigation.path.until(\"session\"));\n  }\n  dispose() {\n    super.dispose();\n    this._roomBeingCreated.off(\"change\", this._onRoomChange);\n  }\n}\nclass LightboxViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._eventId = options.eventId;\n    this._unencryptedImageUrl = null;\n    this._decryptedImage = null;\n    this._closeUrl = this.urlRouter.urlUntilSegment(\"room\");\n    this._date = null;\n    this._subscribeToEvent(options.room, options.eventId);\n  }\n  _subscribeToEvent(room, eventId) {\n    const eventObservable = room.observeEvent(eventId);\n    this.track(eventObservable.subscribe((eventEntry) => {\n      this._loadEvent(room, eventEntry);\n    }));\n    this._loadEvent(room, eventObservable.get());\n  }\n  async _loadEvent(room, eventEntry) {\n    if (!eventEntry) {\n      return;\n    }\n    const { mediaRepository } = room;\n    this._eventEntry = eventEntry;\n    const { content } = this._eventEntry;\n    this._date = this._eventEntry.timestamp ? new Date(this._eventEntry.timestamp) : null;\n    if (content.url) {\n      this._unencryptedImageUrl = mediaRepository.mxcUrl(content.url);\n      this.emitChange(\"imageUrl\");\n    } else if (content.file) {\n      this._decryptedImage = this.track(await mediaRepository.downloadEncryptedFile(content.file));\n      this.emitChange(\"imageUrl\");\n    }\n  }\n  get imageWidth() {\n    var _a, _b, _c2;\n    return (_c2 = (_b = (_a = this._eventEntry) == null ? void 0 : _a.content) == null ? void 0 : _b.info) == null ? void 0 : _c2.w;\n  }\n  get imageHeight() {\n    var _a, _b, _c2;\n    return (_c2 = (_b = (_a = this._eventEntry) == null ? void 0 : _a.content) == null ? void 0 : _b.info) == null ? void 0 : _c2.h;\n  }\n  get name() {\n    var _a, _b;\n    return (_b = (_a = this._eventEntry) == null ? void 0 : _a.content) == null ? void 0 : _b.body;\n  }\n  get sender() {\n    var _a;\n    return (_a = this._eventEntry) == null ? void 0 : _a.displayName;\n  }\n  get imageUrl() {\n    if (this._decryptedImage) {\n      return this._decryptedImage.url;\n    } else if (this._unencryptedImageUrl) {\n      return this._unencryptedImageUrl;\n    } else {\n      return \"\";\n    }\n  }\n  get date() {\n    return this._date && this._date.toLocaleDateString({}, { weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\" });\n  }\n  get time() {\n    return this._date && this._date.toLocaleTimeString({}, { hour: \"numeric\", minute: \"2-digit\" });\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  close() {\n    this.platform.history.pushUrl(this.closeUrl);\n  }\n}\nconst SessionStatus = createEnum(\"Disconnected\", \"Connecting\", \"FirstSync\", \"Sending\", \"Syncing\", \"SyncError\");\nclass SessionStatusViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { sync, reconnector, session } = options;\n    this._sync = sync;\n    this._reconnector = reconnector;\n    this._status = this._calculateState(reconnector.connectionStatus.get(), sync.status.get());\n    this._session = session;\n    this._setupKeyBackupUrl = this.urlRouter.urlForSegment(\"settings\");\n    this._dismissSecretStorage = false;\n  }\n  start() {\n    const update = () => this._updateStatus();\n    this.track(this._sync.status.subscribe(update));\n    this.track(this._reconnector.connectionStatus.subscribe(update));\n    this.track(this._session.needsKeyBackup.subscribe(() => {\n      this.emitChange();\n    }));\n  }\n  get setupKeyBackupUrl() {\n    return this._setupKeyBackupUrl;\n  }\n  get isShown() {\n    return this._session.needsKeyBackup.get() && !this._dismissSecretStorage || this._status !== SessionStatus.Syncing;\n  }\n  get statusLabel() {\n    switch (this._status) {\n      case SessionStatus.Disconnected: {\n        const retryIn = Math.round(this._reconnector.retryIn / 1e3);\n        return this.i18n`Disconnected, trying to reconnect in ${retryIn}s…`;\n      }\n      case SessionStatus.Connecting:\n        return this.i18n`Trying to reconnect now…`;\n      case SessionStatus.FirstSync:\n        return this.i18n`Catching up with your conversations…`;\n      case SessionStatus.SyncError:\n        return this.i18n`Sync failed because of ${this._sync.error}`;\n    }\n    if (this._session.needsKeyBackup.get()) {\n      return this.i18n`Set up session backup to decrypt older messages.`;\n    }\n    return \"\";\n  }\n  get isWaiting() {\n    switch (this._status) {\n      case SessionStatus.Connecting:\n      case SessionStatus.FirstSync:\n        return true;\n      default:\n        return false;\n    }\n  }\n  _updateStatus() {\n    const newStatus = this._calculateState(this._reconnector.connectionStatus.get(), this._sync.status.get());\n    if (newStatus !== this._status) {\n      if (newStatus === SessionStatus.Disconnected) {\n        this._retryTimer = this.track(this.clock.createInterval(() => {\n          this.emitChange(\"statusLabel\");\n        }, 1e3));\n      } else {\n        this._retryTimer = this.disposeTracked(this._retryTimer);\n      }\n      this._status = newStatus;\n      this.emitChange();\n    }\n  }\n  _calculateState(connectionStatus, syncStatus) {\n    if (connectionStatus !== ConnectionStatus.Online) {\n      switch (connectionStatus) {\n        case ConnectionStatus.Reconnecting:\n          return SessionStatus.Connecting;\n        case ConnectionStatus.Waiting:\n          return SessionStatus.Disconnected;\n      }\n    } else if (syncStatus !== SyncStatus.Syncing) {\n      switch (syncStatus) {\n        case SyncStatus.InitialSync:\n        case SyncStatus.CatchupSync:\n          return SessionStatus.FirstSync;\n        case SyncStatus.Stopped:\n          return SessionStatus.SyncError;\n      }\n    } else {\n      return SessionStatus.Syncing;\n    }\n  }\n  get isConnectNowShown() {\n    return this._status === SessionStatus.Disconnected;\n  }\n  get isSecretStorageShown() {\n    return this._status === SessionStatus.Syncing && this._session.needsKeyBackup.get() && !this._dismissSecretStorage;\n  }\n  get canDismiss() {\n    return this.isSecretStorageShown;\n  }\n  dismiss() {\n    if (this.isSecretStorageShown) {\n      this._dismissSecretStorage = true;\n      this.emitChange();\n    }\n  }\n  connectNow() {\n    if (this.isConnectNowShown) {\n      this._reconnector.tryNow();\n    }\n  }\n}\nfunction dedupeSparse(roomIds) {\n  return roomIds.map((id, idx) => {\n    if (roomIds.slice(0, idx).includes(id)) {\n      return void 0;\n    } else {\n      return id;\n    }\n  });\n}\nclass RoomGridViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._width = options.width;\n    this._height = options.height;\n    this._createRoomViewModelObservable = options.createRoomViewModelObservable;\n    this._selectedIndex = 0;\n    this._viewModelsObservables = [];\n    this._setupNavigation();\n  }\n  _setupNavigation() {\n    const focusTileIndex = this.navigation.observe(\"empty-grid-tile\");\n    this.track(focusTileIndex.subscribe((index) => {\n      if (typeof index === \"number\") {\n        this._setFocusIndex(index);\n      }\n    }));\n    if (typeof focusTileIndex.get() === \"number\") {\n      this._selectedIndex = focusTileIndex.get();\n    }\n    const focusedRoom = this.navigation.observe(\"room\");\n    this.track(focusedRoom.subscribe((roomId) => {\n      if (roomId) {\n        this._setFocusRoom(roomId);\n      }\n    }));\n  }\n  roomViewModelAt(i) {\n    var _a;\n    return (_a = this._viewModelsObservables[i]) == null ? void 0 : _a.get();\n  }\n  get focusIndex() {\n    return this._selectedIndex;\n  }\n  get width() {\n    return this._width;\n  }\n  get height() {\n    return this._height;\n  }\n  _switchToRoom(roomId) {\n    let path = this.navigation.path.until(\"rooms\");\n    path = path.with(this.navigation.segment(\"room\", roomId));\n    path = addPanelIfNeeded(this.navigation, path);\n    this.navigation.applyPath(path);\n  }\n  focusTile(index) {\n    if (index === this._selectedIndex) {\n      return;\n    }\n    const vmo = this._viewModelsObservables[index];\n    if (vmo) {\n      this._switchToRoom(vmo.id);\n    } else {\n      this.navigation.push(\"empty-grid-tile\", index);\n    }\n  }\n  initializeRoomIdsAndTransferVM(roomIds, existingRoomVM) {\n    roomIds = dedupeSparse(roomIds);\n    let transfered = false;\n    if (existingRoomVM) {\n      const index = roomIds.indexOf(existingRoomVM.id);\n      if (index !== -1) {\n        this._viewModelsObservables[index] = this.track(existingRoomVM);\n        existingRoomVM.subscribe((viewModel) => this._refreshRoomViewModel(viewModel));\n        transfered = true;\n      }\n    }\n    this.setRoomIds(roomIds);\n    const focusedRoom = this.navigation.path.get(\"room\");\n    if (focusedRoom) {\n      const index = this._viewModelsObservables.findIndex((vmo) => vmo && vmo.id === focusedRoom.value);\n      if (index !== -1) {\n        this._selectedIndex = index;\n      }\n    }\n    return transfered;\n  }\n  setRoomIds(roomIds) {\n    roomIds = dedupeSparse(roomIds);\n    let changed = false;\n    const len = this._height * this._width;\n    for (let i = 0; i < len; i += 1) {\n      const newId = roomIds[i];\n      const vmo = this._viewModelsObservables[i];\n      if (!vmo && newId || vmo && vmo.id !== newId) {\n        if (vmo) {\n          this._viewModelsObservables[i] = this.disposeTracked(vmo);\n        }\n        if (newId) {\n          const vmo2 = this._createRoomViewModelObservable(newId);\n          this._viewModelsObservables[i] = this.track(vmo2);\n          vmo2.subscribe((viewModel) => this._refreshRoomViewModel(viewModel));\n          vmo2.initialize();\n        }\n        changed = true;\n      }\n    }\n    if (changed) {\n      this.emitChange();\n    }\n    return changed;\n  }\n  _refreshRoomViewModel(viewModel) {\n    this.emitChange();\n    viewModel == null ? void 0 : viewModel.focus();\n  }\n  releaseRoomViewModel(roomId) {\n    const index = this._viewModelsObservables.findIndex((vmo) => vmo && vmo.id === roomId);\n    if (index !== -1) {\n      const vmo = this._viewModelsObservables[index];\n      this.untrack(vmo);\n      vmo.unsubscribeAll();\n      this._viewModelsObservables[index] = null;\n      return vmo;\n    }\n  }\n  _setFocusIndex(idx) {\n    var _a;\n    if (idx === this._selectedIndex || idx >= this._width * this._height) {\n      return;\n    }\n    this._selectedIndex = idx;\n    const vmo = this._viewModelsObservables[this._selectedIndex];\n    (_a = vmo == null ? void 0 : vmo.get()) == null ? void 0 : _a.focus();\n    this.emitChange(\"focusIndex\");\n  }\n  _setFocusRoom(roomId) {\n    const index = this._viewModelsObservables.findIndex((vmo) => (vmo == null ? void 0 : vmo.id) === roomId);\n    if (index >= 0) {\n      this._setFocusIndex(index);\n    }\n  }\n}\nclass FeaturesViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this.featureViewModels = [\n      new FeatureViewModel(this.childOptions({\n        name: this.i18n`Audio/video calls`,\n        description: this.i18n`Allows starting and participating in A/V calls compatible with Element Call (MSC3401). Look for the start call option in the room menu ((...) in the right corner) to start a call.`,\n        feature: FeatureFlag.Calls\n      })),\n      new FeatureViewModel(this.childOptions({\n        name: this.i18n`Cross-Signing`,\n        description: this.i18n`Allows verifying the identity of people you chat with. This feature is still evolving constantly, expect things to break.`,\n        feature: FeatureFlag.CrossSigning\n      }))\n    ];\n  }\n}\nclass FeatureViewModel extends ViewModel {\n  get enabled() {\n    return this.features.isFeatureEnabled(this.getOption(\"feature\"));\n  }\n  async enableFeature(enabled) {\n    let newFeatures;\n    if (enabled) {\n      newFeatures = this.features.withFeature(this.getOption(\"feature\"));\n    } else {\n      newFeatures = this.features.withoutFeature(this.getOption(\"feature\"));\n    }\n    await newFeatures.store(this.platform.settingsStorage);\n    this.platform.restart();\n  }\n  get id() {\n    return `${this.getOption(\"feature\")}`;\n  }\n  get name() {\n    return this.getOption(\"name\");\n  }\n  get description() {\n    return this.getOption(\"description\");\n  }\n}\nclass PushNotificationStatus {\n  constructor() {\n    this.supported = null;\n    this.enabled = false;\n    this.updating = false;\n    this.enabledOnServer = null;\n    this.serverError = null;\n  }\n}\nfunction formatKey(key) {\n  const partLength = 4;\n  const partCount = Math.ceil(key.length / partLength);\n  let formattedKey = \"\";\n  for (let i = 0; i < partCount; i += 1) {\n    formattedKey += (formattedKey.length ? \" \" : \"\") + key.slice(i * partLength, (i + 1) * partLength);\n  }\n  return formattedKey;\n}\nclass SettingsViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._updateService = options.updateService;\n    const { client } = options;\n    this._client = client;\n    this._keyBackupViewModel = this.track(new KeyBackupViewModel(this.childOptions({ session: this._session })));\n    this._closeUrl = this.urlRouter.urlUntilSegment(\"session\");\n    this._estimate = null;\n    this.sentImageSizeLimit = null;\n    this.minSentImageSizeLimit = 400;\n    this.maxSentImageSizeLimit = 4e3;\n    this.pushNotifications = new PushNotificationStatus();\n    this._activeTheme = void 0;\n    this._logsFeedbackMessage = void 0;\n    this._accountManagementUrl = null;\n    this._featuresViewModel = new FeaturesViewModel(this.childOptions());\n    this._accountManagementUrl = null;\n  }\n  get _session() {\n    return this._client.session;\n  }\n  async logout() {\n    this.navigation.push(\"logout\", this._client.sessionId);\n  }\n  setSentImageSizeLimit(size) {\n    if (size > this.maxSentImageSizeLimit || size < this.minSentImageSizeLimit) {\n      this.sentImageSizeLimit = null;\n      this.platform.settingsStorage.remove(\"sentImageSizeLimit\");\n    } else {\n      this.sentImageSizeLimit = Math.round(size);\n      this.platform.settingsStorage.setInt(\"sentImageSizeLimit\", size);\n    }\n    this.emitChange(\"sentImageSizeLimit\");\n  }\n  async load() {\n    this._estimate = await this.platform.estimateStorageUsage();\n    this.sentImageSizeLimit = await this.platform.settingsStorage.getInt(\"sentImageSizeLimit\");\n    this.pushNotifications.supported = await this.platform.notificationService.supportsPush();\n    this.pushNotifications.enabled = await this._session.arePushNotificationsEnabled();\n    {\n      this._activeTheme = await this.platform.themeLoader.getActiveTheme();\n    }\n    const { accountManagementUrl } = await this.platform.sessionInfoStorage.get(this._client._sessionId);\n    this._accountManagementUrl = accountManagementUrl;\n    this.emitChange(\"\");\n  }\n  get accountManagementUrl() {\n    return this._accountManagementUrl;\n  }\n  get closeUrl() {\n    return this._closeUrl;\n  }\n  get fingerprintKey() {\n    const key = this._session.fingerprintKey;\n    if (!key) {\n      return null;\n    }\n    return formatKey(key);\n  }\n  get deviceId() {\n    return this._session.deviceId;\n  }\n  get userId() {\n    return this._session.userId;\n  }\n  get version() {\n    const { updateService } = this.platform;\n    if (updateService) {\n      return `${updateService.version} (${updateService.buildHash})`;\n    }\n    return this.i18n`development version`;\n  }\n  checkForUpdate() {\n    var _a;\n    (_a = this.platform.updateService) == null ? void 0 : _a.checkForUpdate();\n  }\n  get showUpdateButton() {\n    return !!this.platform.updateService;\n  }\n  get keyBackupViewModel() {\n    return this._keyBackupViewModel;\n  }\n  get featuresViewModel() {\n    return this._featuresViewModel;\n  }\n  get storageQuota() {\n    var _a;\n    return this._formatBytes((_a = this._estimate) == null ? void 0 : _a.quota);\n  }\n  get storageUsage() {\n    var _a;\n    return this._formatBytes((_a = this._estimate) == null ? void 0 : _a.usage);\n  }\n  get themeMapping() {\n    return this.platform.themeLoader.themeMapping;\n  }\n  get activeTheme() {\n    return this._activeTheme;\n  }\n  _formatBytes(n) {\n    if (typeof n === \"number\") {\n      return Math.round(n / (1024 * 1024)).toFixed(1) + \" MB\";\n    } else {\n      return this.i18n`unknown`;\n    }\n  }\n  async exportLogs() {\n    const logs = await this.exportLogsBlob();\n    this.platform.saveFileAs(logs, `hydrogen-logs-${this.platform.clock.now()}.json`);\n  }\n  async exportLogsBlob() {\n    const persister = this.logger.reporters.find((r) => typeof r.export === \"function\");\n    const logExport = await persister.export();\n    return logExport.asBlob();\n  }\n  get canSendLogsToServer() {\n    return !!this.platform.config.bugReportEndpointUrl;\n  }\n  get logsServer() {\n    const { bugReportEndpointUrl } = this.platform.config;\n    try {\n      if (bugReportEndpointUrl) {\n        return new URL(bugReportEndpointUrl).hostname;\n      }\n    } catch (e) {\n    }\n    return \"\";\n  }\n  async sendLogsToServer() {\n    this._logsFeedbackMessage = this.i18n`Sending logs…`;\n    try {\n      await submitLogsFromSessionToDefaultServer(this._session, this.platform);\n      this._logsFeedbackMessage = this.i18n`Logs sent succesfully!`;\n    } catch (err) {\n      this._logsFeedbackMessage = err.message;\n      this.emitChange();\n    }\n  }\n  get logsFeedbackMessage() {\n    return this._logsFeedbackMessage;\n  }\n  async togglePushNotifications() {\n    this.pushNotifications.updating = true;\n    this.pushNotifications.enabledOnServer = null;\n    this.pushNotifications.serverError = null;\n    this.emitChange(\"pushNotifications.updating\");\n    try {\n      if (await this._session.enablePushNotifications(!this.pushNotifications.enabled)) {\n        this.pushNotifications.enabled = !this.pushNotifications.enabled;\n        if (this.pushNotifications.enabled) {\n          this.platform.notificationService.showNotification(this.i18n`Push notifications are now enabled`);\n        }\n      }\n    } finally {\n      this.pushNotifications.updating = false;\n      this.emitChange(\"pushNotifications.updating\");\n    }\n  }\n  async checkPushEnabledOnServer() {\n    this.pushNotifications.enabledOnServer = null;\n    this.pushNotifications.serverError = null;\n    try {\n      this.pushNotifications.enabledOnServer = await this._session.checkPusherEnabledOnHomeserver();\n      this.emitChange(\"pushNotifications.enabledOnServer\");\n    } catch (err) {\n      this.pushNotifications.serverError = err;\n      this.emitChange(\"pushNotifications.serverError\");\n    }\n  }\n  changeThemeOption(themeName, themeVariant) {\n    this.platform.themeLoader.setTheme(themeName, themeVariant);\n    this.emitChange(\"themeOption\");\n  }\n}\nclass CreateRoomViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { session } = options;\n    this._session = session;\n    this._name = void 0;\n    this._topic = void 0;\n    this._roomAlias = void 0;\n    this._isPublic = false;\n    this._isEncrypted = true;\n    this._isAdvancedShown = false;\n    this._isFederationDisabled = false;\n    this._avatarScaledBlob = void 0;\n    this._avatarFileName = void 0;\n    this._avatarInfo = void 0;\n  }\n  get isPublic() {\n    return this._isPublic;\n  }\n  get isEncrypted() {\n    return this._isEncrypted;\n  }\n  get canCreate() {\n    return !!this._name;\n  }\n  avatarUrl() {\n    return this._avatarScaledBlob.url;\n  }\n  get avatarTitle() {\n    return this._name;\n  }\n  get avatarLetter() {\n    return \"\";\n  }\n  get avatarColorNumber() {\n    return 0;\n  }\n  get hasAvatar() {\n    return !!this._avatarScaledBlob;\n  }\n  get isFederationDisabled() {\n    return this._isFederationDisabled;\n  }\n  get isAdvancedShown() {\n    return this._isAdvancedShown;\n  }\n  setName(name) {\n    this._name = name;\n    this.emitChange(\"canCreate\");\n  }\n  setRoomAlias(roomAlias) {\n    this._roomAlias = roomAlias;\n  }\n  setTopic(topic) {\n    this._topic = topic;\n  }\n  setPublic(isPublic) {\n    this._isPublic = isPublic;\n    this.emitChange(\"isPublic\");\n  }\n  setEncrypted(isEncrypted) {\n    this._isEncrypted = isEncrypted;\n    this.emitChange(\"isEncrypted\");\n  }\n  setFederationDisabled(disable) {\n    this._isFederationDisabled = disable;\n    this.emitChange(\"isFederationDisabled\");\n  }\n  toggleAdvancedShown() {\n    this._isAdvancedShown = !this._isAdvancedShown;\n    this.emitChange(\"isAdvancedShown\");\n  }\n  create() {\n    var _a, _b;\n    let avatar;\n    if (this._avatarScaledBlob) {\n      avatar = {\n        info: this._avatarInfo,\n        name: this._avatarFileName,\n        blob: this._avatarScaledBlob\n      };\n    }\n    const roomBeingCreated = this._session.createRoom({\n      type: this.isPublic ? RoomVisibility.Public : RoomVisibility.Private,\n      name: (_a = this._name) != null ? _a : void 0,\n      topic: (_b = this._topic) != null ? _b : void 0,\n      isEncrypted: !this.isPublic && this._isEncrypted,\n      isFederationDisabled: this._isFederationDisabled,\n      alias: this.isPublic ? ensureAliasIsLocalPart(this._roomAlias) : void 0,\n      avatar\n    });\n    this.navigation.push(\"room\", roomBeingCreated.id);\n  }\n  async selectAvatar() {\n    if (!this.platform.hasReadPixelPermission()) {\n      alert(\"Please allow canvas image data access, so we can scale your images down.\");\n      return;\n    }\n    if (this._avatarScaledBlob) {\n      this._avatarScaledBlob.dispose();\n    }\n    this._avatarScaledBlob = void 0;\n    this._avatarFileName = void 0;\n    this._avatarInfo = void 0;\n    const file = await this.platform.openFile(\"image/*\");\n    if (!file || !file.blob.mimeType.startsWith(\"image/\")) {\n      this.emitChange(\"hasAvatar\");\n      return;\n    }\n    let image = await this.platform.loadImage(file.blob);\n    const limit = 800;\n    if (image.maxDimension > limit) {\n      const scaledImage = await image.scale(limit);\n      image.dispose();\n      image = scaledImage;\n    }\n    this._avatarScaledBlob = image.blob;\n    this._avatarInfo = imageToInfo(image);\n    this._avatarFileName = file.name;\n    this.emitChange(\"hasAvatar\");\n  }\n}\nfunction ensureAliasIsLocalPart(roomAliasLocalPart) {\n  if (roomAliasLocalPart.startsWith(\"#\")) {\n    roomAliasLocalPart = roomAliasLocalPart.substr(1);\n  }\n  const colonIdx = roomAliasLocalPart.indexOf(\":\");\n  if (colonIdx !== -1) {\n    roomAliasLocalPart = roomAliasLocalPart.substr(0, colonIdx);\n  }\n  return roomAliasLocalPart;\n}\nclass JoinRoomViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._joinInProgress = false;\n    this._session = options.session;\n  }\n  async join(roomId) {\n    this._error = void 0;\n    this._joinInProgress = true;\n    this.emitChange(\"joinInProgress\");\n    try {\n      const id = await joinRoom(roomId, this._session);\n      this.navigation.push(\"room\", id);\n    } catch (e) {\n      this._error = e;\n      this._joinInProgress = false;\n      this.emitChange(\"error\");\n    }\n  }\n  get joinInProgress() {\n    return this._joinInProgress;\n  }\n  get status() {\n    if (this._error) {\n      return this._error.message;\n    } else if (this._joinInProgress) {\n      return \"Joining room\";\n    }\n  }\n}\nclass WaitingForOtherUserViewModel extends ViewModel {\n  async cancel() {\n    await this.options.sas.abort();\n  }\n  get kind() {\n    return \"waiting-for-user\";\n  }\n}\nclass VerificationCancelledViewModel extends ViewModel {\n  get cancelCode() {\n    return this.options.cancellation.code;\n  }\n  get isCancelledByUs() {\n    return this.options.cancellation.cancelledByUs;\n  }\n  gotoSettings() {\n    this.navigation.push(\"settings\", true);\n  }\n  get kind() {\n    return \"verification-cancelled\";\n  }\n}\nclass SelectMethodViewModel extends ErrorReportViewModel {\n  constructor() {\n    super(...arguments);\n    this.hasProceeded = false;\n  }\n  async proceed() {\n    await this.logAndCatch(\"SelectMethodViewModel.proceed\", async (log) => {\n      await this.options.stage.selectEmojiMethod(log);\n      this.hasProceeded = true;\n      this.emitChange(\"hasProceeded\");\n    });\n  }\n  async cancel() {\n    await this.logAndCatch(\"SelectMethodViewModel.cancel\", async () => {\n      await this.options.sas.abort();\n    });\n  }\n  get deviceName() {\n    return this.options.stage.otherDeviceName;\n  }\n  get kind() {\n    return \"select-method\";\n  }\n}\nclass VerifyEmojisViewModel extends ErrorReportViewModel {\n  constructor() {\n    super(...arguments);\n    this._isWaiting = false;\n  }\n  async setEmojiMatch(match) {\n    await this.logAndCatch(\"VerifyEmojisViewModel.setEmojiMatch\", async () => {\n      await this.options.stage.setEmojiMatch(match);\n      this._isWaiting = true;\n      this.emitChange(\"isWaiting\");\n    });\n  }\n  get emojis() {\n    return this.options.stage.emoji;\n  }\n  get kind() {\n    return \"verify-emojis\";\n  }\n  get isWaiting() {\n    return this._isWaiting;\n  }\n}\nclass VerificationCompleteViewModel extends ErrorReportViewModel {\n  get otherDeviceId() {\n    return this.options.deviceId;\n  }\n  gotoSettings() {\n    this.navigation.push(\"settings\", true);\n  }\n  get kind() {\n    return \"verification-completed\";\n  }\n}\nclass DeviceVerificationViewModel extends ErrorReportViewModel {\n  constructor(options) {\n    super(options);\n    const sasRequest = options.request;\n    if (options.request) {\n      this.start(sasRequest);\n    } else {\n      this.start(this.getOption(\"session\").userId);\n    }\n  }\n  async start(requestOrUserId) {\n    await this.logAndCatch(\"DeviceVerificationViewModel.start\", (log) => {\n      const crossSigning = this.getOption(\"session\").crossSigning.get();\n      this.sas = crossSigning.startVerification(requestOrUserId, log);\n      this.addEventListeners();\n      if (typeof requestOrUserId === \"string\") {\n        this.updateCurrentStageViewModel(new WaitingForOtherUserViewModel(this.childOptions({ sas: this.sas })));\n      }\n      return this.sas.start();\n    });\n  }\n  addEventListeners() {\n    this.track(this.sas.disposableOn(\"SelectVerificationStage\", (stage) => {\n      this.updateCurrentStageViewModel(new SelectMethodViewModel(this.childOptions({ sas: this.sas, stage })));\n    }));\n    this.track(this.sas.disposableOn(\"EmojiGenerated\", (stage) => {\n      this.updateCurrentStageViewModel(new VerifyEmojisViewModel(this.childOptions({ stage })));\n    }));\n    this.track(this.sas.disposableOn(\"VerificationCancelled\", (cancellation) => {\n      this.updateCurrentStageViewModel(new VerificationCancelledViewModel(this.childOptions({ cancellation })));\n    }));\n    this.track(this.sas.disposableOn(\"VerificationCompleted\", (deviceId) => {\n      this.updateCurrentStageViewModel(new VerificationCompleteViewModel(this.childOptions({ deviceId })));\n    }));\n  }\n  updateCurrentStageViewModel(vm) {\n    this._currentStageViewModel = this.disposeTracked(this._currentStageViewModel);\n    this._currentStageViewModel = this.track(vm);\n    this.emitChange(\"currentStageViewModel\");\n  }\n  dispose() {\n    if (!this.sas.finished) {\n      this.sas.abort().catch(() => {\n      });\n    }\n    super.dispose();\n  }\n  get currentStageViewModel() {\n    return this._currentStageViewModel;\n  }\n}\nclass RoomViewModelObservable extends ObservableValue$1 {\n  constructor(sessionViewModel, roomIdOrLocalId) {\n    super(null);\n    this._statusSubscription = null;\n    this._sessionViewModel = sessionViewModel;\n    this.id = roomIdOrLocalId;\n  }\n  async initialize() {\n    const { session } = this._sessionViewModel._client;\n    const statusObservable = await session.observeRoomStatus(this.id);\n    this.set(await this._statusToViewModel(statusObservable.get()));\n    this._statusSubscription = statusObservable.subscribe(async (status) => {\n      var _a;\n      (_a = this.get()) == null ? void 0 : _a.dispose();\n      this.set(await this._statusToViewModel(status));\n    });\n  }\n  async _statusToViewModel(status) {\n    if (status & RoomStatus.Replaced) {\n      if (status & RoomStatus.BeingCreated) {\n        const { session } = this._sessionViewModel._client;\n        const roomBeingCreated = session.roomsBeingCreated.get(this.id);\n        this._sessionViewModel.notifyRoomReplaced(roomBeingCreated.id, roomBeingCreated.roomId);\n      } else {\n        throw new Error(\"Don't know how to replace a room with this status: \" + (status ^ RoomStatus.Replaced));\n      }\n    } else if (status & RoomStatus.BeingCreated) {\n      return this._sessionViewModel._createRoomBeingCreatedViewModel(this.id);\n    } else if (status & RoomStatus.Invited) {\n      return this._sessionViewModel._createInviteViewModel(this.id);\n    } else if (status & RoomStatus.Joined) {\n      return this._sessionViewModel._createRoomViewModelInstance(this.id);\n    } else if (status & RoomStatus.Archived) {\n      return await this._sessionViewModel._createArchivedRoomViewModel(this.id);\n    } else {\n      return this._sessionViewModel._createUnknownRoomViewModel(this.id);\n    }\n  }\n  dispose() {\n    var _a;\n    if (this._statusSubscription) {\n      this._statusSubscription = this._statusSubscription();\n    }\n    this.unsubscribeAll();\n    (_a = this.get()) == null ? void 0 : _a.dispose();\n  }\n}\nclass RoomDetailsViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._room = options.room;\n    this._onRoomChange = this._onRoomChange.bind(this);\n    this._room.on(\"change\", this._onRoomChange);\n  }\n  get type() {\n    return \"room-details\";\n  }\n  get shouldShowBackButton() {\n    return false;\n  }\n  get previousSegmentName() {\n    return false;\n  }\n  get roomId() {\n    return this._room.id;\n  }\n  get canonicalAlias() {\n    return this._room.canonicalAlias;\n  }\n  get name() {\n    return this._room.name;\n  }\n  get isEncrypted() {\n    return !!this._room.isEncrypted;\n  }\n  get memberCount() {\n    return this._room.joinedMemberCount;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._room.avatarColorId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._room.avatarUrl, size, this.platform, this._room.mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n  _onRoomChange() {\n    this.emitChange();\n  }\n  dispose() {\n    super.dispose();\n    this._room.off(\"change\", this._onRoomChange);\n  }\n  openPanel(segment) {\n    let path = this.navigation.path.until(\"room\");\n    path = path.with(this.navigation.segment(\"right-panel\", true));\n    path = path.with(this.navigation.segment(segment, true));\n    this.navigation.applyPath(path);\n  }\n}\nclass MemberTileViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._member = this._options.member;\n    this._mediaRepository = options.mediaRepository;\n    this._previousName = null;\n    this._nameChanged = true;\n  }\n  get name() {\n    return `${this._member.name}${this._disambiguationPart}`;\n  }\n  get _disambiguationPart() {\n    return this._disambiguate ? ` (${this.userId})` : \"\";\n  }\n  get userId() {\n    return this._member.userId;\n  }\n  get previousName() {\n    return this._previousName;\n  }\n  get nameChanged() {\n    return this._nameChanged;\n  }\n  get detailsUrl() {\n    const roomId = this.navigation.path.get(\"room\").value;\n    return `${this.urlRouter.openRoomActionUrl(roomId)}/member/${encodeURIComponent(this._member.userId)}`;\n  }\n  _updatePreviousName(newName) {\n    const currentName = this._member.name;\n    if (currentName !== newName) {\n      this._previousName = currentName;\n      this._nameChanged = true;\n    } else {\n      this._nameChanged = false;\n    }\n  }\n  setDisambiguation(status) {\n    this._disambiguate = status;\n    this.emitChange();\n  }\n  updateFrom(newMember) {\n    this._updatePreviousName(newMember.name);\n    this._member = newMember;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.userId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._member.avatarUrl, size, this.platform, this._mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n}\nfunction createMemberComparator(powerLevels) {\n  const collator = new Intl.Collator();\n  const removeCharacter = (string) => string.charAt(0) === \"@\" ? string.slice(1) : string;\n  return function comparator(member, otherMember) {\n    const p1 = powerLevels.getUserLevel(member.userId);\n    const p2 = powerLevels.getUserLevel(otherMember.userId);\n    if (p1 !== p2) {\n      return p2 - p1;\n    }\n    const name = removeCharacter(member.name);\n    const otherName = removeCharacter(otherMember.name);\n    return collator.compare(name, otherName);\n  };\n}\nclass Disambiguator {\n  constructor() {\n    this._map = /* @__PURE__ */ new Map();\n  }\n  _unDisambiguate(vm, array) {\n    const idx = array.indexOf(vm);\n    if (idx !== -1) {\n      const [removed] = array.splice(idx, 1);\n      removed.setDisambiguation(false);\n    }\n  }\n  _handlePreviousName(vm) {\n    const previousName = vm.previousName;\n    if (typeof previousName !== \"string\") {\n      return;\n    }\n    const value = this._map.get(previousName);\n    if (Array.isArray(value)) {\n      this._unDisambiguate(vm, value);\n      if (value.length === 1) {\n        const vm2 = value[0];\n        vm2.setDisambiguation(false);\n        this._map.set(previousName, vm2);\n      }\n    } else {\n      this._map.delete(previousName);\n    }\n  }\n  _updateMap(vm) {\n    const name = vm.name;\n    const value = this._map.get(name);\n    if (value) {\n      if (Array.isArray(value)) {\n        if (value.findIndex((member) => member.userId === vm.userId) !== -1) {\n          return;\n        }\n        value.push(vm);\n        return value;\n      } else if (vm.userId !== value.userId) {\n        const array = [value, vm];\n        this._map.set(name, array);\n        return array;\n      }\n    } else {\n      this._map.set(name, vm);\n    }\n  }\n  disambiguate(vm) {\n    if (!vm.nameChanged) {\n      return;\n    }\n    this._handlePreviousName(vm);\n    const value = this._updateMap(vm);\n    value == null ? void 0 : value.forEach((vm2) => vm2.setDisambiguation(true));\n  }\n}\nclass MemberListViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const list = options.members;\n    const powerLevelsObservable = options.powerLevelsObservable;\n    this.track(powerLevelsObservable.subscribe(() => {\n    }));\n    const powerLevels = powerLevelsObservable.get();\n    this.memberTileViewModels = this._mapTileViewModels(list.members.filterValues((member) => member.membership === \"join\")).sortValues(createMemberComparator(powerLevels));\n    this.nameDisambiguator = new Disambiguator();\n    this.mediaRepository = options.mediaRepository;\n  }\n  get type() {\n    return \"member-list\";\n  }\n  get shouldShowBackButton() {\n    return true;\n  }\n  get previousSegmentName() {\n    return \"details\";\n  }\n  _mapTileViewModels(members) {\n    const mapper = (member, emitChange) => {\n      const mediaRepository = this.mediaRepository;\n      const vm = new MemberTileViewModel(this.childOptions({ member, emitChange, mediaRepository }));\n      this.nameDisambiguator.disambiguate(vm);\n      return vm;\n    };\n    const updater = (params, vm, newMember) => {\n      vm.updateFrom(newMember);\n      this.nameDisambiguator.disambiguate(vm);\n    };\n    return members.mapValues(mapper, updater);\n  }\n}\nclass MemberDetailsViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._observableMember = options.observableMember;\n    this._mediaRepository = options.mediaRepository;\n    this._member = this._observableMember.get();\n    this._isEncrypted = options.isEncrypted;\n    this._powerLevelsObservable = options.powerLevelsObservable;\n    this._session = options.session;\n    this.track(this._powerLevelsObservable.subscribe(() => this._onPowerLevelsChange()));\n    this.track(this._observableMember.subscribe(() => this._onMemberChange()));\n    this._userTrust = void 0;\n    this._userTrustSubscription = void 0;\n    if (this.features.crossSigning) {\n      this.track(this._session.crossSigning.subscribe(() => {\n        this._onCrossSigningChange();\n      }));\n    }\n    this._onCrossSigningChange();\n  }\n  get name() {\n    return this._member.name;\n  }\n  get userId() {\n    return this._member.userId;\n  }\n  get trustDescription() {\n    var _a;\n    switch ((_a = this._userTrust) == null ? void 0 : _a.get()) {\n      case UserTrust.Trusted:\n        return this.i18n`You have verified this user. This user has verified all of their sessions.`;\n      case UserTrust.UserNotSigned:\n        return this.i18n`You have not verified this user.`;\n      case UserTrust.UserSignatureMismatch:\n        return this.i18n`You appear to have signed this user, but the signature is invalid.`;\n      case UserTrust.UserDeviceNotSigned:\n        return this.i18n`You have verified this user, but they have one or more unverified sessions.`;\n      case UserTrust.UserDeviceSignatureMismatch:\n        return this.i18n`This user has a session signature that is invalid.`;\n      case UserTrust.UserSetupError:\n        return this.i18n`This user hasn't set up cross-signing correctly`;\n      case UserTrust.OwnSetupError:\n        return this.i18n`Cross-signing wasn't set up correctly on your side.`;\n      case void 0:\n      default:\n        return this.i18n`Please wait…`;\n    }\n  }\n  get trustShieldColor() {\n    var _a;\n    if (!this._isEncrypted) {\n      return \"\";\n    }\n    switch ((_a = this._userTrust) == null ? void 0 : _a.get()) {\n      case void 0:\n      case UserTrust.OwnSetupError:\n        return \"\";\n      case UserTrust.Trusted:\n        return \"green\";\n      case UserTrust.UserNotSigned:\n        return \"black\";\n      default:\n        return \"red\";\n    }\n  }\n  get type() {\n    return \"member-details\";\n  }\n  get shouldShowBackButton() {\n    return true;\n  }\n  get previousSegmentName() {\n    return \"members\";\n  }\n  get role() {\n    if (this.powerLevel >= 100) {\n      return this.i18n`Admin`;\n    } else if (this.powerLevel >= 50) {\n      return this.i18n`Moderator`;\n    } else if (this.powerLevel === 0) {\n      return this.i18n`Default`;\n    } else {\n      return this.i18n`Custom (${this.powerLevel})`;\n    }\n  }\n  _onMemberChange() {\n    this._member = this._observableMember.get();\n    this.emitChange(\"member\");\n  }\n  _onPowerLevelsChange() {\n    this.emitChange(\"role\");\n  }\n  async signUser() {\n    const crossSigning = this._session.crossSigning.get();\n    if (crossSigning) {\n      await this.logger.run(\"MemberDetailsViewModel.signUser\", async (log) => {\n        await crossSigning.signUser(this.userId, log);\n      });\n    }\n  }\n  get avatarLetter() {\n    return avatarInitials(this.name);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.userId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this._member.avatarUrl, size, this.platform, this._mediaRepository);\n  }\n  get avatarTitle() {\n    return this.name;\n  }\n  get isEncrypted() {\n    return this._isEncrypted;\n  }\n  get powerLevel() {\n    var _a;\n    return (_a = this._powerLevelsObservable.get()) == null ? void 0 : _a.getUserLevel(this._member.userId);\n  }\n  get linkToUser() {\n    return `https://matrix.to/#/${encodeURIComponent(this._member.userId)}`;\n  }\n  async openDirectMessage() {\n    const room = this._session.findDirectMessageForUserId(this.userId);\n    let roomId = room == null ? void 0 : room.id;\n    if (!roomId) {\n      const roomBeingCreated = await this._session.createRoom({\n        type: RoomVisibility.DirectMessage,\n        invites: [this.userId]\n      });\n      roomId = roomBeingCreated.id;\n    }\n    this.navigation.push(\"room\", roomId);\n  }\n  _onCrossSigningChange() {\n    const crossSigning = this._session.crossSigning.get();\n    this._userTrustSubscription = this.disposeTracked(this._userTrustSubscription);\n    this._userTrust = void 0;\n    if (crossSigning) {\n      this.logger.run(\"MemberDetailsViewModel.observeUserTrust\", (log) => {\n        this._userTrust = crossSigning.observeUserTrust(this.userId, log);\n        this._userTrustSubscription = this.track(this._userTrust.subscribe(() => {\n          this.emitChange(\"trustShieldColor\");\n        }));\n      });\n    }\n    this.emitChange(\"trustShieldColor\");\n  }\n}\nclass RightPanelViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._room = options.room;\n    this._session = options.session;\n    this._members = null;\n    this._setupNavigation();\n  }\n  get activeViewModel() {\n    return this._activeViewModel;\n  }\n  async _getMemberListArguments() {\n    if (!this._members) {\n      this._members = await this._room.loadMemberList();\n      this.track(() => this._members.release());\n    }\n    const room = this._room;\n    const powerLevelsObservable = await this._room.observePowerLevels();\n    return { members: this._members, powerLevelsObservable, mediaRepository: room.mediaRepository };\n  }\n  async _getMemberDetailsArguments() {\n    const segment = this.navigation.path.get(\"member\");\n    const userId = segment.value;\n    const observableMember = await this._room.observeMember(userId);\n    if (!observableMember) {\n      return false;\n    }\n    const isEncrypted = this._room.isEncrypted;\n    const powerLevelsObservable = await this._room.observePowerLevels();\n    return {\n      observableMember,\n      isEncrypted,\n      powerLevelsObservable,\n      mediaRepository: this._room.mediaRepository,\n      session: this._session\n    };\n  }\n  _setupNavigation() {\n    this._hookUpdaterToSegment(\"details\", RoomDetailsViewModel, () => {\n      return { room: this._room };\n    });\n    this._hookUpdaterToSegment(\"members\", MemberListViewModel, () => this._getMemberListArguments());\n    this._hookUpdaterToSegment(\"member\", MemberDetailsViewModel, () => this._getMemberDetailsArguments(), () => {\n      const url = `${this.urlRouter.urlUntilSegment(\"room\")}/members`;\n      this.urlRouter.pushUrl(url);\n    });\n  }\n  _hookUpdaterToSegment(segment, viewmodel, argCreator, failCallback) {\n    const observable = this.navigation.observe(segment);\n    const updater = this._setupUpdater(segment, viewmodel, argCreator, failCallback);\n    this.track(observable.subscribe(updater));\n  }\n  _setupUpdater(segment, viewmodel, argCreator, failCallback) {\n    const updater = async (skipDispose = false) => {\n      var _a;\n      if (!skipDispose) {\n        this._activeViewModel = this.disposeTracked(this._activeViewModel);\n      }\n      const enable = !!((_a = this.navigation.path.get(segment)) == null ? void 0 : _a.value);\n      if (enable) {\n        const args = await argCreator();\n        if (!args && failCallback) {\n          failCallback();\n          return;\n        }\n        this._activeViewModel = this.track(new viewmodel(this.childOptions(args)));\n      }\n      this.emitChange(\"activeViewModel\");\n    };\n    updater(true);\n    return updater;\n  }\n  closePanel() {\n    const path = this.navigation.path.until(\"room\");\n    this.navigation.applyPath(path);\n  }\n  showPreviousPanel() {\n    const segmentName = this.activeViewModel.previousSegmentName;\n    if (segmentName) {\n      let path = this.navigation.path.until(\"room\");\n      path = path.with(this.navigation.segment(\"right-panel\", true));\n      path = path.with(this.navigation.segment(segmentName, true));\n      this.navigation.applyPath(path);\n    }\n  }\n}\nclass BaseToastNotificationViewModel extends ErrorReportViewModel {\n  constructor(options) {\n    super(options);\n  }\n  dismiss() {\n    this.getOption(\"dismiss\")();\n  }\n}\nclass CallToastNotificationViewModel extends BaseToastNotificationViewModel {\n  constructor(options) {\n    super(options);\n    this.track(this.call.members.observeSize().subscribe(() => {\n      this.emitChange(\"memberCount\");\n    }));\n    this.track(this.navigation.observe(\"room\").subscribe((roomId) => {\n      if (roomId === this.call.roomId) {\n        this.dismiss();\n      }\n    }));\n  }\n  get kind() {\n    return \"calls\";\n  }\n  async join() {\n    await this.logAndCatch(\"CallToastNotificationViewModel.join\", async (log) => {\n      const stream = await this.platform.mediaDevices.getMediaTracks(false, true);\n      const localMedia = new LocalMedia().withUserMedia(stream);\n      await this.call.join(localMedia, log);\n      const url = this.urlRouter.openRoomActionUrl(this.call.roomId);\n      this.urlRouter.pushUrl(url);\n    });\n  }\n  get call() {\n    return this.getOption(\"call\");\n  }\n  get room() {\n    return this.getOption(\"room\");\n  }\n  get roomName() {\n    return this.room.name;\n  }\n  get memberCount() {\n    return this.call.members.size;\n  }\n  get avatarLetter() {\n    return avatarInitials(this.roomName);\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this.room.avatarColorId);\n  }\n  avatarUrl(size) {\n    return getAvatarHttpUrl(this.room.avatarUrl, size, this.platform, this.room.mediaRepository);\n  }\n  get avatarTitle() {\n    return this.roomName;\n  }\n}\nclass CallToastCollectionViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this.toastViewModels = new ObservableArray();\n    const session = this.getOption(\"session\");\n    if (this.features.calls) {\n      const callsObservableMap = session.callHandler.calls;\n      this.track(callsObservableMap.subscribe(this));\n    }\n  }\n  async onAdd(_, call) {\n    if (this._shouldShowNotification(call)) {\n      const room = await this._findRoomForCall(call);\n      const dismiss = () => {\n        const idx = this.toastViewModels.array.findIndex((vm) => vm.call === call);\n        if (idx !== -1) {\n          this.toastViewModels.remove(idx);\n        }\n      };\n      this.toastViewModels.append(new CallToastNotificationViewModel(this.childOptions({ call, room, dismiss })));\n    }\n  }\n  onRemove(_, call) {\n    const idx = this.toastViewModels.array.findIndex((vm) => vm.call === call);\n    if (idx !== -1) {\n      this.toastViewModels.remove(idx);\n    }\n  }\n  onUpdate(_, call) {\n    const idx = this.toastViewModels.array.findIndex((vm) => vm.call === call);\n    if (idx !== -1) {\n      this.toastViewModels.update(idx, this.toastViewModels.at(idx));\n    }\n  }\n  onReset() {\n    for (let i = 0; i < this.toastViewModels.length; ++i) {\n      this.toastViewModels.remove(i);\n    }\n  }\n  async _findRoomForCall(call) {\n    const id = call.roomId;\n    const session = this.getOption(\"session\");\n    const rooms = session.rooms;\n    const observable = await session.observeRoomStatus(id);\n    await observable.waitFor((s) => s === RoomStatus.Joined).promise;\n    const room = rooms.get(id);\n    return room;\n  }\n  _shouldShowNotification(call) {\n    var _a;\n    const currentlyOpenedRoomId = (_a = this.navigation.path.get(\"room\")) == null ? void 0 : _a.value;\n    if (!call.isLoadedFromStorage && call.roomId !== currentlyOpenedRoomId && !call.usesFoci) {\n      return true;\n    }\n    return false;\n  }\n}\nclass VerificationToastNotificationViewModel extends BaseToastNotificationViewModel {\n  constructor(options) {\n    super(options);\n  }\n  get kind() {\n    return \"verification\";\n  }\n  get request() {\n    return this.getOption(\"request\");\n  }\n  get otherDeviceId() {\n    return this.request.deviceId;\n  }\n  accept() {\n    this.navigation.push(\"device-verification\", this.request.id);\n    this.dismiss();\n  }\n}\nclass VerificationToastCollectionViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this.toastViewModels = new ObservableArray();\n    this.subscribeToSASRequests();\n  }\n  async subscribeToSASRequests() {\n    await this.getOption(\"session\").crossSigning.waitFor((v) => !!v).promise;\n    const crossSigning = this.getOption(\"session\").crossSigning.get();\n    this.track(crossSigning.receivedSASVerifications.subscribe(this));\n  }\n  async onAdd(_, request) {\n    const dismiss = () => {\n      const idx = this.toastViewModels.array.findIndex((vm) => vm.request.id === request.id);\n      if (idx !== -1) {\n        this.toastViewModels.remove(idx);\n      }\n    };\n    this.toastViewModels.append(this.track(new VerificationToastNotificationViewModel(this.childOptions({ request, dismiss }))));\n  }\n  onRemove(_, request) {\n    const idx = this.toastViewModels.array.findIndex((vm) => vm.request.id === request.id);\n    if (idx !== -1) {\n      this.toastViewModels.remove(idx);\n    }\n  }\n  onUpdate(_, request) {\n    const idx = this.toastViewModels.array.findIndex((vm) => vm.request.id === request.id);\n    if (idx !== -1) {\n      this.toastViewModels.update(idx, this.toastViewModels.at(idx));\n    }\n  }\n  onReset() {\n    for (let i = 0; i < this.toastViewModels.length; ++i) {\n      this.toastViewModels.remove(i);\n    }\n  }\n}\nclass ToastCollectionViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const session = this.getOption(\"session\");\n    const collectionVms = [];\n    if (this.features.calls) {\n      collectionVms.push(this.track(new CallToastCollectionViewModel(this.childOptions({ session }))));\n    }\n    if (this.features.crossSigning) {\n      collectionVms.push(this.track(new VerificationToastCollectionViewModel(this.childOptions({ session }))));\n    }\n    const vms = collectionVms.map((vm) => vm.toastViewModels);\n    if (vms.length !== 0) {\n      this.toastViewModels = new ConcatList(...vms);\n    }\n  }\n}\nclass SessionViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { client } = options;\n    this._client = this.track(client);\n    this._sessionStatusViewModel = this.track(new SessionStatusViewModel(this.childOptions({\n      sync: client.sync,\n      reconnector: client.reconnector,\n      session: client.session\n    })));\n    this._leftPanelViewModel = this.track(new LeftPanelViewModel(this.childOptions({ session: this._client.session })));\n    this._settingsViewModel = null;\n    this._roomViewModelObservable = null;\n    this._gridViewModel = null;\n    this._createRoomViewModel = null;\n    this._joinRoomViewModel = null;\n    this._verificationViewModel = null;\n    this._toastCollectionViewModel = this.track(new ToastCollectionViewModel(this.childOptions({\n      session: this._client.session\n    })));\n    this._setupNavigation();\n    this._setupForcedLogoutOnAccessTokenInvalidation();\n  }\n  _setupNavigation() {\n    const gridRooms = this.navigation.observe(\"rooms\");\n    this.track(gridRooms.subscribe((roomIds) => {\n      this._updateGrid(roomIds);\n    }));\n    if (gridRooms.get()) {\n      this._updateGrid(gridRooms.get());\n    }\n    const currentRoomId = this.navigation.observe(\"room\");\n    this.track(currentRoomId.subscribe((roomId) => {\n      if (!this._gridViewModel) {\n        this._updateRoom(roomId);\n      }\n      this._updateRightPanel();\n    }));\n    if (!this._gridViewModel) {\n      this._updateRoom(currentRoomId.get());\n    }\n    const settings = this.navigation.observe(\"settings\");\n    this.track(settings.subscribe((settingsOpen) => {\n      this._updateSettings(settingsOpen);\n    }));\n    this._updateSettings(settings.get());\n    const createRoom = this.navigation.observe(\"create-room\");\n    this.track(createRoom.subscribe((createRoomOpen) => {\n      this._updateCreateRoom(createRoomOpen);\n    }));\n    this._updateCreateRoom(createRoom.get());\n    const joinRoom2 = this.navigation.observe(\"join-room\");\n    this.track(joinRoom2.subscribe((joinRoomOpen) => {\n      this._updateJoinRoom(joinRoomOpen);\n    }));\n    this._updateJoinRoom(joinRoom2.get());\n    if (this.features.crossSigning) {\n      const verification = this.navigation.observe(\"device-verification\");\n      this.track(verification.subscribe((txnId) => {\n        this._updateVerification(txnId);\n      }));\n      this._updateVerification(verification.get());\n    }\n    const lightbox = this.navigation.observe(\"lightbox\");\n    this.track(lightbox.subscribe((eventId) => {\n      this._updateLightbox(eventId);\n    }));\n    this._updateLightbox(lightbox.get());\n    const rightpanel = this.navigation.observe(\"right-panel\");\n    this.track(rightpanel.subscribe(() => this._updateRightPanel()));\n    this._updateRightPanel();\n  }\n  _setupForcedLogoutOnAccessTokenInvalidation() {\n    this.track(this._client.sync.status.subscribe((status) => {\n      if (status === SyncStatus.Stopped) {\n        const error = this._client.sync.error;\n        if ((error == null ? void 0 : error.errcode) === \"M_UNKNOWN_TOKEN\") {\n          const segments = [\n            this.navigation.segment(\"logout\", this.id),\n            this.navigation.segment(\"forced\", true)\n          ];\n          const path = this.navigation.pathFrom(segments);\n          this.navigation.applyPath(path);\n        }\n      }\n    }));\n  }\n  get id() {\n    return this._client.sessionId;\n  }\n  start() {\n    this._sessionStatusViewModel.start();\n    if (this.features.calls) {\n      this._client.session.callHandler.loadCalls(\"m.ring\");\n      this._client.session.callHandler.loadCalls(\"m.prompt\");\n    }\n  }\n  get activeMiddleViewModel() {\n    var _a;\n    return ((_a = this._roomViewModelObservable) == null ? void 0 : _a.get()) || this._gridViewModel || this._settingsViewModel || this._createRoomViewModel || this._joinRoomViewModel || this._verificationViewModel;\n  }\n  get roomGridViewModel() {\n    return this._gridViewModel;\n  }\n  get leftPanelViewModel() {\n    return this._leftPanelViewModel;\n  }\n  get sessionStatusViewModel() {\n    return this._sessionStatusViewModel;\n  }\n  get settingsViewModel() {\n    return this._settingsViewModel;\n  }\n  get currentRoomViewModel() {\n    var _a;\n    return (_a = this._roomViewModelObservable) == null ? void 0 : _a.get();\n  }\n  get rightPanelViewModel() {\n    return this._rightPanelViewModel;\n  }\n  get createRoomViewModel() {\n    return this._createRoomViewModel;\n  }\n  get joinRoomViewModel() {\n    return this._joinRoomViewModel;\n  }\n  get verificationViewModel() {\n    return this._verificationViewModel;\n  }\n  get toastCollectionViewModel() {\n    return this._toastCollectionViewModel;\n  }\n  _updateGrid(roomIds) {\n    var _a;\n    const changed = !(this._gridViewModel && roomIds);\n    const currentRoomId = this.navigation.path.get(\"room\");\n    if (roomIds) {\n      if (!this._gridViewModel) {\n        this._gridViewModel = this.track(new RoomGridViewModel(this.childOptions({\n          width: 3,\n          height: 2,\n          createRoomViewModelObservable: (roomId) => new RoomViewModelObservable(this, roomId)\n        })));\n        (_a = this._roomViewModelObservable) == null ? void 0 : _a.unsubscribeAll();\n        if (this._gridViewModel.initializeRoomIdsAndTransferVM(roomIds, this._roomViewModelObservable)) {\n          this._roomViewModelObservable = this.untrack(this._roomViewModelObservable);\n        } else if (this._roomViewModelObservable) {\n          this._roomViewModelObservable = this.disposeTracked(this._roomViewModelObservable);\n        }\n      } else {\n        this._gridViewModel.setRoomIds(roomIds);\n      }\n    } else if (this._gridViewModel && !roomIds) {\n      if (currentRoomId) {\n        const vmo = this._gridViewModel.releaseRoomViewModel(currentRoomId.value);\n        if (vmo) {\n          this._roomViewModelObservable = this.track(vmo);\n          this._roomViewModelObservable.subscribe(() => {\n            this.emitChange(\"activeMiddleViewModel\");\n          });\n        }\n      }\n      this._gridViewModel = this.disposeTracked(this._gridViewModel);\n    }\n    if (changed) {\n      this.emitChange(\"activeMiddleViewModel\");\n    }\n  }\n  _createRoomViewModelInstance(roomId) {\n    const room = this._client.session.rooms.get(roomId);\n    if (room) {\n      const roomVM = new RoomViewModel(this.childOptions({ room, session: this._client.session }));\n      roomVM.load();\n      return roomVM;\n    }\n    return null;\n  }\n  _createUnknownRoomViewModel(roomIdOrAlias) {\n    return new UnknownRoomViewModel(this.childOptions({\n      roomIdOrAlias,\n      session: this._client.session\n    }));\n  }\n  async _createArchivedRoomViewModel(roomId) {\n    const room = await this._client.session.loadArchivedRoom(roomId);\n    if (room) {\n      const roomVM = new RoomViewModel(this.childOptions({ room, session: this._client.session }));\n      roomVM.load();\n      return roomVM;\n    }\n    return null;\n  }\n  _createInviteViewModel(roomId) {\n    const invite = this._client.session.invites.get(roomId);\n    if (invite) {\n      return new InviteViewModel(this.childOptions({\n        invite,\n        mediaRepository: this._client.session.mediaRepository\n      }));\n    }\n    return null;\n  }\n  _createRoomBeingCreatedViewModel(localId) {\n    const roomBeingCreated = this._client.session.roomsBeingCreated.get(localId);\n    if (roomBeingCreated) {\n      return new RoomBeingCreatedViewModel(this.childOptions({\n        roomBeingCreated,\n        mediaRepository: this._client.session.mediaRepository\n      }));\n    }\n    return null;\n  }\n  _updateRoom(roomId) {\n    var _a;\n    if (((_a = this._roomViewModelObservable) == null ? void 0 : _a.id) === roomId) {\n      return;\n    }\n    if (this._roomViewModelObservable) {\n      this._roomViewModelObservable = this.disposeTracked(this._roomViewModelObservable);\n    }\n    if (!roomId) {\n      this.emitChange(\"activeMiddleViewModel\");\n      return;\n    }\n    const vmo = new RoomViewModelObservable(this, roomId);\n    this._roomViewModelObservable = this.track(vmo);\n    this._roomViewModelObservable.subscribe(() => {\n      this.emitChange(\"activeMiddleViewModel\");\n    });\n    vmo.initialize();\n  }\n  _updateSettings(settingsOpen) {\n    if (this._settingsViewModel) {\n      this._settingsViewModel = this.disposeTracked(this._settingsViewModel);\n    }\n    if (settingsOpen) {\n      this._settingsViewModel = this.track(new SettingsViewModel(this.childOptions({\n        client: this._client\n      })));\n      this._settingsViewModel.load();\n    }\n    this.emitChange(\"activeMiddleViewModel\");\n  }\n  _updateCreateRoom(createRoomOpen) {\n    if (this._createRoomViewModel) {\n      this._createRoomViewModel = this.disposeTracked(this._createRoomViewModel);\n    }\n    if (createRoomOpen) {\n      this._createRoomViewModel = this.track(new CreateRoomViewModel(this.childOptions({ session: this._client.session })));\n    }\n    this.emitChange(\"activeMiddleViewModel\");\n  }\n  _updateJoinRoom(joinRoomOpen) {\n    if (this._joinRoomViewModel) {\n      this._joinRoomViewModel = this.disposeTracked(this._joinRoomViewModel);\n    }\n    if (joinRoomOpen) {\n      this._joinRoomViewModel = this.track(new JoinRoomViewModel(this.childOptions({ session: this._client.session })));\n    }\n    this.emitChange(\"activeMiddleViewModel\");\n  }\n  _updateVerification(txnId) {\n    var _a;\n    if (this._verificationViewModel) {\n      this._verificationViewModel = this.disposeTracked(this._verificationViewModel);\n    }\n    if (txnId) {\n      const request = (_a = this._client.session.crossSigning.get()) == null ? void 0 : _a.receivedSASVerifications.get(txnId);\n      this._verificationViewModel = this.track(new DeviceVerificationViewModel(this.childOptions({ session: this._client.session, request })));\n    }\n    this.emitChange(\"activeMiddleViewModel\");\n  }\n  _updateLightbox(eventId) {\n    if (this._lightboxViewModel) {\n      this._lightboxViewModel = this.disposeTracked(this._lightboxViewModel);\n    }\n    if (eventId) {\n      const room = this._roomFromNavigation();\n      this._lightboxViewModel = this.track(new LightboxViewModel(this.childOptions({ eventId, room })));\n    }\n    this.emitChange(\"lightboxViewModel\");\n  }\n  get lightboxViewModel() {\n    return this._lightboxViewModel;\n  }\n  _roomFromNavigation() {\n    var _a;\n    const roomId = (_a = this.navigation.path.get(\"room\")) == null ? void 0 : _a.value;\n    const room = this._client.session.rooms.get(roomId);\n    return room;\n  }\n  _updateRightPanel() {\n    var _a;\n    this._rightPanelViewModel = this.disposeTracked(this._rightPanelViewModel);\n    const enable = !!((_a = this.navigation.path.get(\"right-panel\")) == null ? void 0 : _a.value);\n    if (enable) {\n      const room = this._roomFromNavigation();\n      this._rightPanelViewModel = this.track(new RightPanelViewModel(this.childOptions({ room, session: this._client.session })));\n    }\n    this.emitChange(\"rightPanelViewModel\");\n  }\n  notifyRoomReplaced(oldId, newId) {\n    this.navigation.push(\"room\", newId);\n  }\n}\nclass AccountSetupViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._accountSetup = options.accountSetup;\n    this._dehydratedDevice = void 0;\n    this._decryptDehydratedDeviceViewModel = void 0;\n    if (this._accountSetup.encryptedDehydratedDevice) {\n      this._decryptDehydratedDeviceViewModel = new DecryptDehydratedDeviceViewModel(this, (dehydratedDevice) => {\n        this._dehydratedDevice = dehydratedDevice;\n        this._decryptDehydratedDeviceViewModel = void 0;\n        this.emitChange(\"deviceDecrypted\");\n      });\n    }\n  }\n  get decryptDehydratedDeviceViewModel() {\n    return this._decryptDehydratedDeviceViewModel;\n  }\n  get deviceDecrypted() {\n    return !!this._dehydratedDevice;\n  }\n  get dehydratedDeviceId() {\n    return this._accountSetup.encryptedDehydratedDevice.deviceId;\n  }\n  finish() {\n    this._accountSetup.finish(this._dehydratedDevice);\n  }\n}\nclass DecryptDehydratedDeviceViewModel extends ViewModel {\n  constructor(accountSetupViewModel, decryptedCallback) {\n    super(accountSetupViewModel.options);\n    this._accountSetupViewModel = accountSetupViewModel;\n    this._isBusy = false;\n    this._status = Status.SetupKey;\n    this._error = void 0;\n    this._decryptedCallback = decryptedCallback;\n  }\n  get decryptAction() {\n    return this.i18n`Restore`;\n  }\n  get purpose() {\n    return this.i18n`claim your dehydrated device`;\n  }\n  get offerDehydratedDeviceSetup() {\n    return false;\n  }\n  get dehydratedDeviceId() {\n    var _a;\n    return (_a = this._accountSetupViewModel._dehydratedDevice) == null ? void 0 : _a.deviceId;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  get backupVersion() {\n    return 0;\n  }\n  get status() {\n    return this._status;\n  }\n  get error() {\n    var _a;\n    return (_a = this._error) == null ? void 0 : _a.message;\n  }\n  showPhraseSetup() {\n    if (this._status === Status.SetupKey) {\n      this._status = Status.SetupPhrase;\n      this.emitChange(\"status\");\n    }\n  }\n  showKeySetup() {\n    if (this._status === Status.SetupPhrase) {\n      this._status = Status.SetupKey;\n      this.emitChange(\"status\");\n    }\n  }\n  async _enterCredentials(keyType, credential) {\n    if (credential) {\n      try {\n        this._isBusy = true;\n        this.emitChange(\"isBusy\");\n        const { encryptedDehydratedDevice } = this._accountSetupViewModel._accountSetup;\n        const dehydratedDevice = await encryptedDehydratedDevice.decrypt(keyType, credential);\n        this._decryptedCallback(dehydratedDevice);\n      } catch (err) {\n        console.error(err);\n        this._error = err;\n        this.emitChange(\"error\");\n      } finally {\n        this._isBusy = false;\n        this.emitChange(\"\");\n      }\n    }\n  }\n  enterSecurityPhrase(passphrase) {\n    this._enterCredentials(KeyType.Passphrase, passphrase);\n  }\n  enterSecurityKey(securityKey) {\n    this._enterCredentials(KeyType.RecoveryKey, securityKey);\n  }\n  disable() {\n  }\n}\nclass SessionLoadViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const { client, ready, homeserver, deleteSessionOnCancel } = options;\n    this._client = client;\n    this._ready = ready;\n    this._homeserver = homeserver;\n    this._deleteSessionOnCancel = deleteSessionOnCancel;\n    this._loading = false;\n    this._error = null;\n    this.backUrl = this.urlRouter.urlForSegment(\"session\", true);\n    this._accountSetupViewModel = void 0;\n  }\n  async start() {\n    if (this._loading) {\n      return;\n    }\n    try {\n      this._loading = true;\n      this.emitChange(\"loading\");\n      this._waitHandle = this._client.loadStatus.waitFor((s) => {\n        if (s === LoadStatus.AccountSetup) {\n          this._accountSetupViewModel = new AccountSetupViewModel(this.childOptions({ accountSetup: this._client.accountSetup }));\n        } else {\n          this._accountSetupViewModel = void 0;\n        }\n        this.emitChange(\"loadLabel\");\n        const isCatchupSync = s === LoadStatus.FirstSync && this._client.sync.status.get() === SyncStatus.CatchupSync;\n        return isCatchupSync || s === LoadStatus.LoginFailed || s === LoadStatus.Error || s === LoadStatus.Ready;\n      });\n      try {\n        await this._waitHandle.promise;\n      } catch (err) {\n        return;\n      }\n      const loadStatus = this._client.loadStatus.get();\n      const loadError = this._client.loadError;\n      if (loadStatus === LoadStatus.FirstSync || loadStatus === LoadStatus.Ready) {\n        const client = this._client;\n        this._client = null;\n        this._ready(client);\n      }\n      if (loadError) {\n        console.error(\"session load error\", loadError.stack);\n      }\n    } catch (err) {\n      this._error = err;\n      console.error(\"error thrown during session load\", err.stack);\n    } finally {\n      this._loading = false;\n      this.emitChange(\"loading\");\n    }\n  }\n  dispose() {\n    if (this._client) {\n      this._client.dispose();\n      this._client = null;\n    }\n    if (this._waitHandle) {\n      this._waitHandle.dispose();\n      this._waitHandle = null;\n    }\n  }\n  get loading() {\n    const client = this._client;\n    if (client && client.loadStatus.get() === LoadStatus.AccountSetup) {\n      return false;\n    }\n    return this._loading;\n  }\n  get loadLabel() {\n    const client = this._client;\n    const error = this._getError();\n    if (error || client && client.loadStatus.get() === LoadStatus.Error) {\n      return `Something went wrong: ${error && error.message}.`;\n    }\n    if (client) {\n      switch (client.loadStatus.get()) {\n        case LoadStatus.QueryAccount:\n          return `Querying account encryption setup\\u2026`;\n        case LoadStatus.AccountSetup:\n          return \"\";\n        case LoadStatus.SessionSetup:\n          return `Setting up your encryption keys\\u2026`;\n        case LoadStatus.Loading:\n          return `Loading your conversations\\u2026`;\n        case LoadStatus.FirstSync:\n          return `Getting your conversations from the server\\u2026`;\n        default:\n          return this._client.loadStatus.get();\n      }\n    }\n    return `Preparing\\u2026`;\n  }\n  _getError() {\n    var _a;\n    return this._error || ((_a = this._client) == null ? void 0 : _a.loadError);\n  }\n  get hasError() {\n    return !!this._getError();\n  }\n  async exportLogs() {\n    const logExport = await this.logger.export();\n    this.platform.saveFileAs(logExport.asBlob(), `hydrogen-logs-${this.platform.clock.now()}.json`);\n  }\n  async logout() {\n    var _a;\n    await this._client.startLogout((_a = this.navigation.path.get(\"session\")) == null ? void 0 : _a.value, this.urlRouter);\n    this.navigation.push(\"session\", true);\n  }\n  get accountSetupViewModel() {\n    return this._accountSetupViewModel;\n  }\n}\nclass PasswordLoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._isBusy = false;\n    this._errorMessage = \"\";\n    const { loginOptions, attemptLogin } = options;\n    this._loginOptions = loginOptions;\n    this._attemptLogin = attemptLogin;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  get errorMessage() {\n    return this._errorMessage;\n  }\n  setBusy(status) {\n    this._isBusy = status;\n    this.emitChange(\"isBusy\");\n  }\n  _showError(message) {\n    this._errorMessage = message;\n    this.emitChange(\"errorMessage\");\n  }\n  async login(username, password) {\n    this._errorMessage = \"\";\n    this.emitChange(\"errorMessage\");\n    const status = await this._attemptLogin(this._loginOptions.password(username, password));\n    let error = \"\";\n    switch (status) {\n      case LoginFailure.Credentials:\n        error = this.i18n`Your username and/or password don't seem to be correct.`;\n        break;\n      case LoginFailure.Connection:\n        error = this.i18n`Can't connect to ${this._loginOptions.homeserver}.`;\n        break;\n      case LoginFailure.Unknown:\n        error = this.i18n`Something went wrong while checking your login and password.`;\n        break;\n    }\n    if (error) {\n      this._showError(error);\n    }\n  }\n}\nclass StartSSOLoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._isBusy = false;\n    this._sso = options.loginOptions.sso;\n    this._isBusy = false;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  setBusy(status) {\n    this._isBusy = status;\n    this.emitChange(\"isBusy\");\n  }\n  async startSSOLogin() {\n    await this.platform.settingsStorage.setString(\"sso_ongoing_login_homeserver\", this._sso.homeserver);\n    const link = this._sso.createSSORedirectURL(this.urlRouter.createSSOCallbackURL());\n    this.platform.openUrl(link);\n  }\n}\nclass CompleteSSOLoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._errorMessage = \"\";\n    const {\n      loginToken,\n      client,\n      attemptLogin\n    } = options;\n    this._loginToken = loginToken;\n    this._client = client;\n    this._attemptLogin = attemptLogin;\n    this._errorMessage = \"\";\n    void this.performSSOLoginCompletion();\n  }\n  get errorMessage() {\n    return this._errorMessage;\n  }\n  _showError(message) {\n    this._errorMessage = message;\n    this.emitChange(\"errorMessage\");\n  }\n  async performSSOLoginCompletion() {\n    if (!this._loginToken) {\n      return;\n    }\n    const homeserver = await this.platform.settingsStorage.getString(\"sso_ongoing_login_homeserver\");\n    let loginOptions;\n    try {\n      loginOptions = await this._client.queryLogin(homeserver).result;\n    } catch (err) {\n      this._showError(err.message);\n      return;\n    }\n    if (!loginOptions.token) {\n      this.navigation.push(\"session\");\n      return;\n    }\n    const status = await this._attemptLogin(loginOptions.token(this._loginToken));\n    let error = \"\";\n    switch (status) {\n      case LoginFailure.Credentials:\n        error = this.i18n`Your login token is invalid.`;\n        break;\n      case LoginFailure.Connection:\n        error = this.i18n`Can't connect to ${homeserver}.`;\n        break;\n      case LoginFailure.Unknown:\n        error = this.i18n`Something went wrong while checking your login token.`;\n        break;\n    }\n    if (error) {\n      this._showError(error);\n    }\n  }\n}\nclass StartOIDCLoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._isBusy = true;\n    this._issuer = options.loginOptions.oidc.issuer;\n    this._accountManagementUrl = options.loginOptions.oidc.account;\n    this._homeserver = options.loginOptions.homeserver;\n    this._api = new OidcApi({\n      issuer: this._issuer,\n      request: this.platform.request,\n      encoding: this.platform.encoding,\n      crypto: this.platform.crypto,\n      urlRouter: this.urlRouter,\n      staticClients: this.platform.config[\"staticOidcClients\"]\n    });\n    this._asGuest = options.asGuest;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  setBusy(status) {\n    this._isBusy = status;\n    this.emitChange(\"isBusy\");\n  }\n  async discover() {\n    try {\n      await this._api.metadata();\n    } catch (err) {\n      this.logger.log(\"Failed to discover OIDC metadata: \" + err);\n      throw new Error(\"Failed to discover OIDC metadata: \" + err.message);\n    }\n    try {\n      await this._api.registration();\n    } catch (err) {\n      this.logger.log(\"Failed to register OIDC client: \" + err);\n      throw new Error(\"Failed to register OIDC client: \" + err.message);\n    }\n  }\n  async startOIDCLogin() {\n    const deviceScope = this._api.generateDeviceScope();\n    const p = this._api.generateParams({\n      scope: `openid urn:matrix:org.matrix.msc2967.client:api:${this._asGuest ? \"guest\" : \"*\"} ${deviceScope}`,\n      redirectUri: this.urlRouter.createOIDCRedirectURL()\n    });\n    const clientId = await this._api.clientId();\n    await Promise.all([\n      this.platform.settingsStorage.setInt(`oidc_${p.state}_started_at`, Date.now()),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_nonce`, p.nonce),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_code_verifier`, p.codeVerifier),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_redirect_uri`, p.redirectUri),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_homeserver`, this._homeserver),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_issuer`, this._issuer),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_client_id`, clientId),\n      this.platform.settingsStorage.setString(`oidc_${p.state}_account_management_url`, this._accountManagementUrl)\n    ]);\n    const link = await this._api.authorizationEndpoint(p);\n    this.platform.openUrl(link);\n  }\n}\nclass CompleteOIDCLoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    const {\n      state,\n      code,\n      attemptLogin\n    } = options;\n    this._request = options.platform.request;\n    this._encoding = options.platform.encoding;\n    this._crypto = options.platform.crypto;\n    this._state = state;\n    this._code = code;\n    this._attemptLogin = attemptLogin;\n    this._errorMessage = \"\";\n    this.performOIDCLoginCompletion();\n  }\n  get errorMessage() {\n    return this._errorMessage;\n  }\n  _showError(message) {\n    this._errorMessage = message;\n    this.emitChange(\"errorMessage\");\n  }\n  async performOIDCLoginCompletion() {\n    if (!this._state || !this._code) {\n      return;\n    }\n    const code = this._code;\n    const [startedAt, nonce, codeVerifier, redirectUri, homeserver, issuer, clientId, accountManagementUrl] = await Promise.all([\n      this.platform.settingsStorage.getInt(`oidc_${this._state}_started_at`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_nonce`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_code_verifier`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_redirect_uri`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_homeserver`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_issuer`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_client_id`),\n      this.platform.settingsStorage.getString(`oidc_${this._state}_account_management_url`)\n    ]);\n    const oidcApi = new OidcApi({\n      issuer,\n      clientId,\n      request: this._request,\n      encoding: this._encoding,\n      crypto: this._crypto\n    });\n    const method = new OIDCLoginMethod({ oidcApi, nonce, codeVerifier, code, homeserver, startedAt, redirectUri, accountManagementUrl });\n    const status = await this._attemptLogin(method);\n    let error = \"\";\n    switch (status) {\n      case LoginFailure.Credentials:\n        error = this.i18n`Your login token is invalid.`;\n        break;\n      case LoginFailure.Connection:\n        error = this.i18n`Can't connect to ${homeserver}.`;\n        break;\n      case LoginFailure.Unknown:\n        error = this.i18n`Something went wrong while checking your login token.`;\n        break;\n    }\n    if (error) {\n      this._showError(error);\n    }\n  }\n}\nclass LoginViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._hideHomeserver = false;\n    this._isBusy = false;\n    this._errorMessage = \"\";\n    const { ready, defaultHomeserver, loginToken, oidc } = options;\n    this._ready = ready;\n    this._loginToken = loginToken;\n    this._oidc = oidc;\n    this._client = new Client(this.platform, this.features);\n    this._oidc = oidc;\n    this._homeserver = defaultHomeserver;\n    this._initViewModels();\n  }\n  get passwordLoginViewModel() {\n    return this._passwordLoginViewModel;\n  }\n  get startSSOLoginViewModel() {\n    return this._startSSOLoginViewModel;\n  }\n  get completeSSOLoginViewModel() {\n    return this._completeSSOLoginViewModel;\n  }\n  get startOIDCLoginViewModel() {\n    return this._startOIDCLoginViewModel;\n  }\n  get startOIDCGuestLoginViewModel() {\n    return this._startOIDCGuestLoginViewModel;\n  }\n  get completeOIDCLoginViewModel() {\n    return this._completeOIDCLoginViewModel;\n  }\n  get homeserver() {\n    return this._homeserver;\n  }\n  get resolvedHomeserver() {\n    var _a;\n    return (_a = this._loginOptions) == null ? void 0 : _a.homeserver;\n  }\n  get errorMessage() {\n    return this._errorMessage;\n  }\n  get showHomeserver() {\n    return !this._hideHomeserver;\n  }\n  get loadViewModel() {\n    return this._loadViewModel;\n  }\n  get isBusy() {\n    return this._isBusy;\n  }\n  get isFetchingLoginOptions() {\n    return !!this._abortQueryOperation;\n  }\n  goBack() {\n    this.navigation.push(\"session\");\n  }\n  _initViewModels() {\n    var _a, _b, _c2;\n    if (this._loginToken) {\n      this._hideHomeserver = true;\n      this._completeSSOLoginViewModel = this.track(new CompleteSSOLoginViewModel(this.childOptions({\n        client: this._client,\n        attemptLogin: (loginMethod) => this.attemptLogin(loginMethod),\n        loginToken: this._loginToken\n      })));\n      this.emitChange(\"completeSSOLoginViewModel\");\n    } else if (((_a = this._oidc) == null ? void 0 : _a.success) === true) {\n      this._hideHomeserver = true;\n      this._completeOIDCLoginViewModel = this.track(new CompleteOIDCLoginViewModel(this.childOptions({\n        client: this._client,\n        attemptLogin: (loginMethod) => this.attemptLogin(loginMethod),\n        state: this._oidc.state,\n        code: this._oidc.code\n      })));\n      this.emitChange(\"completeOIDCLoginViewModel\");\n    } else if (((_b = this._oidc) == null ? void 0 : _b.success) === false) {\n      this._hideHomeserver = false;\n      this._showError(`Sign in failed: ${(_c2 = this._oidc.errorDescription) != null ? _c2 : this._oidc.error} `);\n    } else {\n      void this.queryHomeserver();\n    }\n  }\n  _showPasswordLogin() {\n    this._passwordLoginViewModel = this.track(new PasswordLoginViewModel(this.childOptions({\n      loginOptions: this._loginOptions,\n      attemptLogin: (loginMethod) => this.attemptLogin(loginMethod)\n    })));\n    this.emitChange(\"passwordLoginViewModel\");\n  }\n  _showSSOLogin() {\n    this._startSSOLoginViewModel = this.track(new StartSSOLoginViewModel(this.childOptions({ loginOptions: this._loginOptions })));\n    this.emitChange(\"startSSOLoginViewModel\");\n  }\n  async _showOIDCLogin() {\n    this._startOIDCLoginViewModel = this.track(new StartOIDCLoginViewModel(this.childOptions({ loginOptions: this._loginOptions, asGuest: false })));\n    this.emitChange(\"startOIDCLoginViewModel\");\n    try {\n      await this._startOIDCLoginViewModel.discover();\n    } catch (err) {\n      this._showError(err.message);\n      this._disposeViewModels();\n    }\n  }\n  async _showOIDCGuestLogin() {\n    this._startOIDCGuestLoginViewModel = this.track(new StartOIDCLoginViewModel(this.childOptions({ loginOptions: this._loginOptions, asGuest: true })));\n    this.emitChange(\"startOIDCGuestLoginViewModel\");\n    try {\n      await this._startOIDCLoginViewModel.discover();\n    } catch (err) {\n      this._showError(err.message);\n      this._disposeViewModels();\n    }\n  }\n  _showError(message) {\n    this._errorMessage = message;\n    this.emitChange(\"errorMessage\");\n  }\n  _setBusy(status) {\n    var _a, _b, _c2, _d2;\n    this._isBusy = status;\n    (_a = this._passwordLoginViewModel) == null ? void 0 : _a.setBusy(status);\n    (_b = this._startSSOLoginViewModel) == null ? void 0 : _b.setBusy(status);\n    (_c2 = this._startOIDCLoginViewModel) == null ? void 0 : _c2.setBusy(status);\n    (_d2 = this._startOIDCGuestLoginViewModel) == null ? void 0 : _d2.setBusy(status);\n    this.emitChange(\"isBusy\");\n  }\n  async attemptLogin(loginMethod) {\n    this._setBusy(true);\n    void this._client.startWithLogin(loginMethod, { inspectAccountSetup: true });\n    const loadStatus = this._client.loadStatus;\n    const handle = loadStatus.waitFor((status2) => status2 !== LoadStatus.Login);\n    await handle.promise;\n    this._setBusy(false);\n    const status = loadStatus.get();\n    if (status === LoadStatus.LoginFailed) {\n      return this._client.loginFailure;\n    }\n    this._hideHomeserver = true;\n    this.emitChange(\"hideHomeserver\");\n    this._disposeViewModels();\n    void this._createLoadViewModel();\n    return null;\n  }\n  _createLoadViewModel() {\n    this._loadViewModelSubscription = this.disposeTracked(this._loadViewModelSubscription);\n    this._loadViewModel = this.disposeTracked(this._loadViewModel);\n    this._loadViewModel = this.track(new SessionLoadViewModel(this.childOptions({\n      ready: (client) => {\n        this._client = null;\n        this._ready(client);\n      },\n      client: this._client,\n      homeserver: this._homeserver\n    })));\n    void this._loadViewModel.start();\n    this.emitChange(\"loadViewModel\");\n    this._loadViewModelSubscription = this.track(this._loadViewModel.disposableOn(\"change\", () => {\n      if (!this._loadViewModel.loading) {\n        this._loadViewModelSubscription = this.disposeTracked(this._loadViewModelSubscription);\n      }\n      this._setBusy(false);\n    }));\n  }\n  _disposeViewModels() {\n    this._startSSOLoginViewModel = this.disposeTracked(this._startSSOLoginViewModel);\n    this._passwordLoginViewModel = this.disposeTracked(this._passwordLoginViewModel);\n    this._completeSSOLoginViewModel = this.disposeTracked(this._completeSSOLoginViewModel);\n    this._startOIDCLoginViewModel = this.disposeTracked(this._startOIDCLoginViewModel);\n    this._startOIDCGuestLoginViewModel = this.disposeTracked(this._startOIDCGuestLoginViewModel);\n    this.emitChange(\"disposeViewModels\");\n  }\n  async setHomeserver(newHomeserver) {\n    this._homeserver = newHomeserver;\n    this._loginOptions = void 0;\n    this._queriedHomeserver = void 0;\n    this._showError(\"\");\n    this._disposeViewModels();\n    this._abortQueryOperation = this.disposeTracked(this._abortQueryOperation);\n    this.emitChange(\"loginViewModels\");\n    this.disposeTracked(this._abortHomeserverQueryTimeout);\n    const timeout = this.clock.createTimeout(1e3);\n    this._abortHomeserverQueryTimeout = this.track(() => timeout.abort());\n    try {\n      await timeout.elapsed();\n    } catch (err) {\n      if (err.name === \"AbortError\") {\n        return;\n      } else {\n        throw err;\n      }\n    }\n    this._abortHomeserverQueryTimeout = this.disposeTracked(this._abortHomeserverQueryTimeout);\n    void this.queryHomeserver();\n  }\n  async queryHomeserver() {\n    var _a;\n    if (this._homeserver === this._queriedHomeserver || this._homeserver === \"\") {\n      return;\n    }\n    this._queriedHomeserver = this._homeserver;\n    this._abortHomeserverQueryTimeout = this.disposeTracked(this._abortHomeserverQueryTimeout);\n    this._abortQueryOperation = this.disposeTracked(this._abortQueryOperation);\n    try {\n      const queryOperation = this._client.queryLogin(this._homeserver);\n      this._abortQueryOperation = this.track(() => queryOperation.abort());\n      this.emitChange(\"isFetchingLoginOptions\");\n      this._loginOptions = await queryOperation.result;\n      this.emitChange(\"resolvedHomeserver\");\n    } catch (e) {\n      if (e.name === \"AbortError\") {\n        return;\n      } else {\n        this._loginOptions = void 0;\n      }\n    } finally {\n      this._abortQueryOperation = this.disposeTracked(this._abortQueryOperation);\n      this.emitChange(\"isFetchingLoginOptions\");\n    }\n    if (this._loginOptions) {\n      if (this._loginOptions.sso) {\n        this._showSSOLogin();\n      }\n      if (this._loginOptions.password) {\n        this._showPasswordLogin();\n      }\n      if (this._loginOptions.oidc) {\n        this._showOIDCLogin();\n      }\n      if ((_a = this._loginOptions.oidc) == null ? void 0 : _a.guestAvailable) {\n        this._showOIDCGuestLogin();\n      }\n      if (!this._loginOptions.sso && !this._loginOptions.password && !this._loginOptions.oidc) {\n        this._showError(\"This homeserver supports neither SSO nor password based login flows or has a usable OIDC Provider\");\n      }\n    } else {\n      this._showError(`Could not query login methods supported by ${this.homeserver}`);\n    }\n  }\n  dispose() {\n    super.dispose();\n    if (this._client) {\n      void this._client.deleteSession();\n    }\n  }\n}\nclass LogoutViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._sessionId = options.sessionId;\n    this._busy = false;\n    this._showConfirm = true;\n    this._error = void 0;\n  }\n  get showConfirm() {\n    return this._showConfirm;\n  }\n  get busy() {\n    return this._busy;\n  }\n  get cancelUrl() {\n    return this.urlRouter.urlForSegment(\"session\", true);\n  }\n  async logout() {\n    this._busy = true;\n    this._showConfirm = false;\n    this.emitChange(\"busy\");\n    try {\n      const client = new Client(this.platform);\n      await client.startLogout(this._sessionId, this.urlRouter);\n      this.navigation.push(\"session\", true);\n    } catch (err) {\n      this._error = err;\n      this._busy = false;\n      this.emitChange(\"busy\");\n    }\n  }\n  get status() {\n    if (this._error) {\n      return this.i18n`Could not log out of device: ${this._error.message}`;\n    } else {\n      return this.i18n`Logging out… Please don't close the app.`;\n    }\n  }\n}\nclass ForcedLogoutViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._showStatus = false;\n    this._showSpinner = false;\n    this._sessionId = options.sessionId;\n    this._logoutPromise = this.forceLogout();\n  }\n  async forceLogout() {\n    try {\n      const client = new Client(this.platform);\n      await client.startForcedLogout(this._sessionId);\n    } catch (err) {\n      this._error = err;\n      this._showSpinner = false;\n      this._showStatus = true;\n      this.emitChange(\"error\");\n    }\n  }\n  async proceed() {\n    this._showSpinner = true;\n    this._showStatus = true;\n    this.emitChange(\"showStatus\");\n    await this._logoutPromise;\n    if (!this._error) {\n      this.navigation.push(\"login\", true);\n    }\n  }\n  get status() {\n    if (this._error) {\n      return this.i18n`Could not log out of device: ${this._error.message}`;\n    } else {\n      return this.i18n`Logging out… Please don't close the app.`;\n    }\n  }\n  get showStatus() {\n    return this._showStatus;\n  }\n  get showSpinner() {\n    return this._showSpinner;\n  }\n}\nclass SessionItemViewModel extends ViewModel {\n  constructor(options, pickerVM) {\n    super(options);\n    this._pickerVM = pickerVM;\n    this._sessionInfo = options.sessionInfo;\n    this._isDeleting = false;\n    this._isClearing = false;\n    this._error = null;\n    this._exportDataUrl = null;\n  }\n  get error() {\n    return this._error && this._error.message;\n  }\n  get id() {\n    return this._sessionInfo.id;\n  }\n  get openUrl() {\n    return this.urlRouter.urlForSegment(\"session\", this.id);\n  }\n  get label() {\n    const { userId, comment } = this._sessionInfo;\n    if (comment) {\n      return `${userId} (${comment})`;\n    } else {\n      return userId;\n    }\n  }\n  get sessionInfo() {\n    return this._sessionInfo;\n  }\n  get exportDataUrl() {\n    return this._exportDataUrl;\n  }\n  get avatarColorNumber() {\n    return getIdentifierColorNumber(this._sessionInfo.userId);\n  }\n  get avatarInitials() {\n    return avatarInitials(this._sessionInfo.userId);\n  }\n}\nclass SessionPickerViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._sessions = new SortedArray((s1, s2) => s1.id.localeCompare(s2.id));\n    this._loadViewModel = null;\n    this._error = null;\n  }\n  async load() {\n    const sessions = await this.platform.sessionInfoStorage.getAll();\n    this._sessions.setManyUnsorted(sessions.map((s) => {\n      return new SessionItemViewModel(this.childOptions({ sessionInfo: s }), this);\n    }));\n  }\n  get loadViewModel() {\n    return this._loadViewModel;\n  }\n  get sessions() {\n    return this._sessions;\n  }\n  get cancelUrl() {\n    return this.urlRouter.urlForSegment(\"login\");\n  }\n}\nclass RootViewModel extends ViewModel {\n  constructor(options) {\n    super(options);\n    this._error = null;\n    this._sessionPickerViewModel = null;\n    this._sessionLoadViewModel = null;\n    this._loginViewModel = null;\n    this._logoutViewModel = null;\n    this._forcedLogoutViewModel = null;\n    this._sessionViewModel = null;\n    this._pendingClient = null;\n  }\n  async load() {\n    this.track(this.navigation.observe(\"login\").subscribe(() => this._applyNavigation()));\n    this.track(this.navigation.observe(\"session\").subscribe(() => this._applyNavigation()));\n    this.track(this.navigation.observe(\"sso\").subscribe(() => this._applyNavigation()));\n    this.track(this.navigation.observe(\"logout\").subscribe(() => this._applyNavigation()));\n    this.track(this.navigation.observe(\"oidc\").subscribe(() => this._applyNavigation()));\n    this._applyNavigation(true);\n  }\n  async _applyNavigation(shouldRestoreLastUrl) {\n    var _a, _b, _c2, _d2, _e;\n    const isLogin = this.navigation.path.get(\"login\");\n    const logoutSessionId = (_a = this.navigation.path.get(\"logout\")) == null ? void 0 : _a.value;\n    const isForcedLogout = (_b = this.navigation.path.get(\"forced\")) == null ? void 0 : _b.value;\n    const sessionId = (_c2 = this.navigation.path.get(\"session\")) == null ? void 0 : _c2.value;\n    const loginToken = (_d2 = this.navigation.path.get(\"sso\")) == null ? void 0 : _d2.value;\n    const oidcCallback = (_e = this.navigation.path.get(\"oidc\")) == null ? void 0 : _e.value;\n    if (isLogin) {\n      if (this.activeSection !== \"login\") {\n        this._showLogin();\n      }\n    } else if (logoutSessionId && isForcedLogout) {\n      if (this.activeSection !== \"forced-logout\") {\n        this._showForcedLogout(logoutSessionId);\n      }\n    } else if (logoutSessionId) {\n      if (this.activeSection !== \"logout\") {\n        this._showLogout(logoutSessionId);\n      }\n    } else if (sessionId === true) {\n      if (this.activeSection !== \"picker\") {\n        this._showPicker();\n      }\n    } else if (sessionId) {\n      if (!this._sessionViewModel || this._sessionViewModel.id !== sessionId) {\n        if (this._pendingClient && this._pendingClient.sessionId === sessionId) {\n          const client = this._pendingClient;\n          this._pendingClient = null;\n          this._showSession(client);\n        } else {\n          if (this._pendingClient) {\n            this._pendingClient.dispose();\n            this._pendingClient = null;\n          }\n          this._showSessionLoader(sessionId);\n        }\n      }\n    } else if (loginToken) {\n      this.urlRouter.normalizeUrl();\n      if (this.activeSection !== \"login\") {\n        this._showLogin({ loginToken });\n      }\n    } else if (oidcCallback) {\n      this.urlRouter.normalizeUrl();\n      if (this.activeSection !== \"login\") {\n        this._showLogin({\n          oidc: oidcCallback\n        });\n      }\n    } else {\n      try {\n        if (!(shouldRestoreLastUrl && this.urlRouter.tryRestoreLastUrl())) {\n          const sessionInfos = await this.platform.sessionInfoStorage.getAll();\n          if (sessionInfos.length === 0) {\n            this.navigation.push(\"login\");\n          } else if (sessionInfos.length === 1) {\n            this.navigation.push(\"session\", sessionInfos[0].id);\n          } else {\n            this.navigation.push(\"session\");\n          }\n        }\n      } catch (err) {\n        this._setSection(() => this._error = err);\n      }\n    }\n  }\n  async _showPicker() {\n    this._setSection(() => {\n      this._sessionPickerViewModel = new SessionPickerViewModel(this.childOptions());\n    });\n    try {\n      await this._sessionPickerViewModel.load();\n    } catch (err) {\n      this._setSection(() => this._error = err);\n    }\n  }\n  _showLogin({ loginToken, oidc } = {}) {\n    this._setSection(() => {\n      this._loginViewModel = new LoginViewModel(this.childOptions({\n        defaultHomeserver: this.platform.config[\"defaultHomeServer\"],\n        ready: (client) => {\n          this._pendingClient = client;\n          this.navigation.push(\"session\", client.sessionId);\n        },\n        loginToken,\n        oidc\n      }));\n    });\n  }\n  _showLogout(sessionId) {\n    this._setSection(() => {\n      this._logoutViewModel = new LogoutViewModel(this.childOptions({ sessionId }));\n    });\n  }\n  _showForcedLogout(sessionId) {\n    this._setSection(() => {\n      this._forcedLogoutViewModel = new ForcedLogoutViewModel(this.childOptions({ sessionId }));\n    });\n  }\n  _showSession(client) {\n    this._setSection(() => {\n      this._sessionViewModel = new SessionViewModel(this.childOptions({ client }));\n      this._sessionViewModel.start();\n    });\n  }\n  _showSessionLoader(sessionId) {\n    const client = new Client(this.platform, this.features);\n    client.startWithExistingSession(sessionId);\n    this._setSection(() => {\n      this._sessionLoadViewModel = new SessionLoadViewModel(this.childOptions({\n        client,\n        ready: (client2) => this._showSession(client2)\n      }));\n      this._sessionLoadViewModel.start();\n    });\n  }\n  get activeSection() {\n    if (this._error) {\n      return \"error\";\n    } else if (this._sessionViewModel) {\n      return \"session\";\n    } else if (this._loginViewModel) {\n      return \"login\";\n    } else if (this._logoutViewModel) {\n      return \"logout\";\n    } else if (this._forcedLogoutViewModel) {\n      return \"forced-logout\";\n    } else if (this._sessionPickerViewModel) {\n      return \"picker\";\n    } else if (this._sessionLoadViewModel) {\n      return \"loading\";\n    } else {\n      return \"redirecting\";\n    }\n  }\n  _setSection(setter) {\n    this._error = null;\n    this._sessionPickerViewModel = this.disposeTracked(this._sessionPickerViewModel);\n    this._sessionLoadViewModel = this.disposeTracked(this._sessionLoadViewModel);\n    this._loginViewModel = this.disposeTracked(this._loginViewModel);\n    this._logoutViewModel = this.disposeTracked(this._logoutViewModel);\n    this._forcedLogoutViewModel = this.disposeTracked(this._forcedLogoutViewModel);\n    this._sessionViewModel = this.disposeTracked(this._sessionViewModel);\n    setter();\n    this._sessionPickerViewModel && this.track(this._sessionPickerViewModel);\n    this._sessionLoadViewModel && this.track(this._sessionLoadViewModel);\n    this._loginViewModel && this.track(this._loginViewModel);\n    this._logoutViewModel && this.track(this._logoutViewModel);\n    this._forcedLogoutViewModel && this.track(this._forcedLogoutViewModel);\n    this._sessionViewModel && this.track(this._sessionViewModel);\n    this.emitChange(\"activeSection\");\n  }\n  get error() {\n    return this._error;\n  }\n  get sessionViewModel() {\n    return this._sessionViewModel;\n  }\n  get loginViewModel() {\n    return this._loginViewModel;\n  }\n  get logoutViewModel() {\n    return this._logoutViewModel;\n  }\n  get forcedLogoutViewModel() {\n    return this._forcedLogoutViewModel;\n  }\n  get sessionPickerViewModel() {\n    return this._sessionPickerViewModel;\n  }\n  get sessionLoadViewModel() {\n    return this._sessionLoadViewModel;\n  }\n}\nexport { AnnouncementView, AsyncMappedList, AttachmentUpload, AvatarView, BaseMediaView, BaseMessageView, BaseObservableValue$1 as BaseObservableValue, BlobHandle, CallIntent, Client, ComposerViewModel, ConcatList, ConsoleReporter, Disposables, EncryptedEventTile, EncryptionEnabledTile, EventEmitter, FeatureFlag, FeatureSet, FileTile, FileView, GapTile, GapView, IDBLogPersister, ImageTile, ImageView, LoadStatus, LoadingView, LocalMedia, LocationTile, LocationView, Logger, LoginFailure, MappedList, MessageComposer, MissingAttachmentTile, MissingAttachmentView, Navigation, OIDCLoginMethod, ObservableArray, ObservableMap, ObservableValue$1 as ObservableValue, OidcApi, Platform, PowerLevels, ReactionsView, RedactedTile, RedactedView, ReplyPreviewView, RetainedObservableValue, RoomMemberTile, RoomNameTile, RoomStatus, RoomType, RoomView, RoomViewModel, RoomVisibility, RootView, RootViewModel, SessionView, SessionViewModel, SimpleTile, SortedArray, TemplateView, TextMessageView, TextTile, TimelineView, TimelineViewModel, VideoTile, VideoView, ViewModel, createNavigation, createRouter, makeTxnId, submitLogsToRageshakeServer, tileClassForEntry, viewClassForTile };\n","export default \"__VITE_ASSET__5c11960b__\"","export default \"__VITE_ASSET__58417e0f__\"","export default \"__VITE_ASSET__4c9381ab__\"","export default \"__VITE_ASSET__bcff2064__\"","export default \"__VITE_ASSET__80a6036a__\"","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import { ReactNode, CSSProperties } from \"react\";\nimport classNames from \"classnames\";\nimport \"./Text.css\";\n\nexport type textColor =\n  | \"surface\"\n  | \"surface-low\"\n  | \"world\"\n  | \"primary\"\n  | \"on-primary\"\n  | \"secondary\"\n  | \"on-secondary\"\n  | \"danger\"\n  | \"on-danger\"\n  | \"tooltip\"\n  | \"link\";\n\ninterface IText {\n  id?: string;\n  className?: string;\n  style?: CSSProperties;\n  variant?: \"h1\" | \"h2\" | \"s1\" | \"s2\" | \"c1\" | \"b1\" | \"b2\" | \"b3\";\n  color?: textColor;\n  weight?: \"light\" | \"regular\" | \"medium\" | \"semi-bold\" | \"bold\";\n  type?: undefined | \"span\" | \"label\" | \"div\";\n  htmlFor?: string;\n  children: ReactNode;\n}\n\nexport function Text({\n  id,\n  className,\n  style,\n  variant = \"b1\",\n  color = \"surface\",\n  weight = \"regular\",\n  type,\n  htmlFor,\n  children,\n}: IText) {\n  const textClass = classNames(`Text Text-${variant} Text--${color} Text--${weight}`, className);\n\n  const props = {\n    id,\n    className: textClass,\n    style,\n    htmlFor,\n  };\n\n  if (type === \"span\") return <span {...props}>{children}</span>;\n  if (type === \"label\") return <label {...props}>{children}</label>;\n  if (type === \"div\") return <div {...props}>{children}</div>;\n  if (variant === \"h1\") return <h1 {...props}>{children}</h1>;\n  if (variant === \"h2\") return <h2 {...props}>{children}</h2>;\n  if (variant === \"s1\") return <h4 {...props}>{children}</h4>;\n  return <p {...props}>{children}</p>;\n}\n","import {\n  Platform,\n  Navigation,\n  Client,\n  Session,\n  ILogger,\n  URLRouter,\n  Room,\n  ILoginMethod,\n} from \"@thirdroom/hydrogen-view-sdk\";\nimport { createContext, useContext } from \"react\";\n\nexport interface HydrogenContext {\n  client: Client;\n  navigation: Navigation;\n  platform: Platform;\n  session?: Session;\n  profileRoom?: Room;\n  logger: ILogger;\n  urlRouter: URLRouter;\n  login: (loginMethod: ILoginMethod) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nexport interface AuthenticatedHydrogenContext extends HydrogenContext {\n  session: Session;\n  profileRoom: Room;\n}\n\nexport const HydrogenContext = createContext<HydrogenContext | undefined>(undefined);\n\nexport const HydrogenContextProvider = HydrogenContext.Provider;\n\nexport function useHydrogen(ensureAuth: true): AuthenticatedHydrogenContext;\nexport function useHydrogen(ensureAuth: false): HydrogenContext;\nexport function useHydrogen(ensureAuth?: boolean): HydrogenContext;\nexport function useHydrogen(ensureAuth = false): HydrogenContext | AuthenticatedHydrogenContext {\n  const context = useContext(HydrogenContext);\n\n  if (!context) {\n    throw new Error(\"HydrogenContext not initialized\");\n  }\n\n  if (ensureAuth && !context.session) {\n    throw new Error(\"Must be authenticated to access authenticated hydrogen context\");\n  }\n\n  return context;\n}\n","import { useCallback, useState } from \"react\";\n\nexport type UseAsyncCallbackState<T> =\n  | {\n      loading: boolean;\n      error?: Error | undefined;\n      value?: T | undefined;\n    }\n  | {\n      loading: true;\n      error: undefined;\n      value: undefined;\n    }\n  | {\n      loading: false;\n      error: Error;\n      value: undefined;\n    }\n  | {\n      loading: false;\n      error: undefined;\n      value: T;\n    };\n\nexport type UseAsyncCallbackReturn<C extends (...args: unknown[]) => Promise<T>, T> = UseAsyncCallbackState<T> & {\n  callback: (...args: Parameters<C>) => Promise<T | undefined>;\n};\n\nexport function useAsyncCallback<C extends (...args: any[]) => Promise<T>, T>(\n  callback: C,\n  deps: unknown[]\n): UseAsyncCallbackReturn<C, T> {\n  const [state, setState] = useState<UseAsyncCallbackState<T>>({\n    loading: false,\n    error: undefined,\n    value: undefined,\n  });\n\n  const onCallback = useCallback(async (...args: Parameters<C>) => {\n    setState({\n      loading: true,\n      error: undefined,\n      value: undefined,\n    });\n\n    let value: T | undefined;\n\n    try {\n      value = await callback(...args);\n\n      setState({\n        loading: false,\n        error: undefined,\n        value,\n      });\n    } catch (error: any) {\n      setState({\n        loading: false,\n        error,\n        value: undefined,\n      });\n    }\n\n    return value;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n\n  return {\n    callback: onCallback,\n    ...state,\n  };\n}\n","import classNames from \"classnames\";\n\nimport { textColor } from \"../text/Text\";\n\nimport \"./Dots.css\";\ninterface DotsProps {\n  className?: string;\n  color?: textColor;\n  size?: \"sm\" | \"md\" | \"lg\";\n  paused?: boolean;\n}\n\nexport function Dots({ className, color = \"surface\", size = \"md\", paused = false }: DotsProps) {\n  return (\n    <div className={classNames(\"Dots\", `Dots--${color}`, `Dots--${size}`, { \"Dots--paused\": paused }, className)}>\n      <span />\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport classNames from \"classnames\";\n\nimport \"./CoverScreen.css\";\n\ninterface CoverScreenProps {\n  className?: string;\n  children: ReactNode;\n}\n\nexport function CoverScreen({ className, children }: CoverScreenProps) {\n  return (\n    <div className={classNames(\"CoverScreen flex flex-column justify-center items-center\", className)}>{children}</div>\n  );\n}\n","import classNames from \"classnames\";\n\nimport { Dots } from \"../../../atoms/loading/Dots\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport { CoverScreen } from \"../cover-screen/CoverScreen\";\n\ninterface LoadingScreenProps {\n  className?: string;\n  message?: string;\n}\n\nexport function LoadingScreen({ className, message }: LoadingScreenProps) {\n  return (\n    <CoverScreen className={classNames(\"gap-md\", className)}>\n      <Dots size=\"lg\" />\n      <Text variant=\"b3\" weight=\"semi-bold\">\n        {message ? message : \"Loading\"}\n      </Text>\n    </CoverScreen>\n  );\n}\n","import { ReactNode, MouseEvent, CSSProperties } from \"react\";\nimport classNames from \"classnames\";\n\nimport { Text } from \"../text/Text\";\n\nimport \"./Button.css\";\nexport type ButtonVariant = \"primary\" | \"secondary\" | \"danger\";\nexport type ButtonFill = \"solid\" | \"outline\" | \"none\";\nexport type ButtonSize = \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\ninterface IButton {\n  className?: string;\n  style?: CSSProperties;\n  variant?: ButtonVariant;\n  fill?: ButtonFill;\n  size?: ButtonSize;\n  type?: \"button\" | \"submit\" | \"reset\";\n  onClick?: (event: MouseEvent<HTMLButtonElement>) => void;\n  children: ReactNode;\n  disabled?: boolean;\n  id?: string;\n}\n\nexport function Button({\n  className,\n  style,\n  variant = \"primary\",\n  fill = \"solid\",\n  size = \"md\",\n  type = \"button\",\n  onClick,\n  children,\n  disabled = false,\n  id,\n}: IButton) {\n  const btnClass = classNames(`Button Button--${variant} Button--${fill} Button--${size}`, className);\n  const textColor: \"primary\" | \"on-primary\" | \"secondary\" | \"on-secondary\" | \"danger\" | \"on-danger\" =\n    fill === \"solid\" ? `on-${variant}` : variant;\n\n  let renderChild;\n\n  const getText = (text: string, key?: number | string) => (\n    <Text key={key} variant={size === \"xs\" ? \"b3\" : \"b2\"} color={textColor} weight=\"semi-bold\">\n      {text}\n    </Text>\n  );\n\n  if (typeof children === \"string\") {\n    renderChild = getText(children);\n  } else if (Array.isArray(children)) {\n    renderChild = children.map((child, index) => {\n      if (typeof child === \"string\") return getText(child, index);\n      else return child;\n    });\n  } else renderChild = children;\n\n  return (\n    <button id={id} className={btnClass} style={style} type={type} onClick={onClick} disabled={disabled}>\n      {renderChild}\n    </button>\n  );\n}\n","import {\n  Room,\n  ObservableMap,\n  HomeServerApi,\n  RoomBeingCreated,\n  Session,\n  GroupCall,\n  BaseObservableMap,\n  StateEvent,\n  IHomeServerRequest,\n  IBlobHandle,\n} from \"@thirdroom/hydrogen-view-sdk\";\n\nexport const MX_PATH_PREFIX = \"/_matrix/client/r0\";\n\nexport function getMxIdDomain(mxId: string) {\n  return mxId.slice(mxId.indexOf(\":\") + 1);\n}\n\nexport function getMxIdUsername(mxId: string) {\n  return mxId.slice(1, mxId.indexOf(\":\"));\n}\n\nexport async function resolveRoomAlias(\n  homeserver: string,\n  alias: string\n): Promise<{\n  roomId?: string;\n  servers?: string[];\n  errcode?: string;\n  error?: string;\n}> {\n  const path = `${MX_PATH_PREFIX}/directory/room/${encodeURIComponent(alias)}`;\n  try {\n    const response = await fetch(`${homeserver}${path}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\",\n      },\n      credentials: \"same-origin\",\n    });\n    const result = await response.json();\n    if (result.room_id) {\n      return {\n        roomId: result.room_id,\n        servers: result.servers,\n      };\n    }\n    return result;\n  } catch {\n    return {\n      errcode: \"ERROR\",\n      error: \"Failed to resolve\",\n    };\n  }\n}\n\nexport async function isRoomAliasAvailable(homeserver: string, alias: string): Promise<boolean> {\n  const result = await resolveRoomAlias(homeserver, alias);\n  if (result?.errcode === \"M_NOT_FOUND\") return true;\n  return false;\n}\n\nexport function aliasToRoomId(rooms: ObservableMap<string, Room>, alias: string) {\n  for (const room of rooms.values()) {\n    if (room.canonicalAlias === alias) return room.id;\n  }\n}\n\nexport function roomIdToAlias(rooms: ObservableMap<string, Room>, roomId: string) {\n  return rooms.get(roomId)?.canonicalAlias ?? undefined;\n}\n\nexport function getProfileRoom(rooms: ObservableMap<string, Room>) {\n  const type = \"org.matrix.msc3815.profile\";\n  for (const room of rooms.values()) {\n    if (room.type === type) return room;\n  }\n}\nexport async function updateWorldProfile(session: Session, world: Room) {\n  const profileRoom = getProfileRoom(session.rooms);\n\n  if (profileRoom) {\n    const profileEvent = await profileRoom.getStateEvent(\"org.matrix.msc3815.world.profile\", \"\");\n\n    if (profileEvent && profileEvent.event.content.avatar_url) {\n      await session.hsApi.sendState(world.id, \"org.matrix.msc3815.world.member\", session.userId, {\n        avatar_url: profileEvent.event.content.avatar_url,\n      });\n    }\n  }\n}\n\nexport async function isValidUserId(hsApi: HomeServerApi, userId: string) {\n  if (!userId.match(/^@\\S+:\\S+$/)) return false;\n\n  try {\n    await hsApi.profile(userId).response();\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport function isValidRoomId(roomId: string) {\n  return roomId.match(/^!\\S+:\\S+$/) !== null;\n}\n\nexport async function waitToCreateRoom(\n  session: Session,\n  roomBeingCreated: RoomBeingCreated\n): Promise<Room | undefined> {\n  return new Promise((resolve) => {\n    const unSubs = roomBeingCreated.disposableOn(\"change\", () => {\n      unSubs();\n      if (!roomBeingCreated.roomId) return resolve(undefined);\n      const room = session.rooms.get(roomBeingCreated.roomId);\n      resolve(room);\n    });\n  });\n}\n\nexport async function uploadAttachment(\n  hsApi: HomeServerApi,\n  blob: IBlobHandle,\n  onRequest?: (request: IHomeServerRequest) => void,\n  onProgress?: (sentBytes: number, totalBytes: number) => void\n): Promise<string> {\n  const uploadRequest = await hsApi.uploadAttachment(blob, blob.nativeBlob.name, {\n    uploadProgress: (sentBytes) => {\n      onProgress?.(sentBytes, blob.size);\n    },\n  });\n  onRequest?.(uploadRequest);\n\n  const { content_uri: url, errcode, error } = await uploadRequest.response();\n  if (errcode) {\n    throw new Error(error ?? \"Error Uploading file.\");\n  }\n  return url;\n}\n\nexport interface ParsedMatrixURI {\n  protocol: \"matrix:\";\n  authority?: string;\n  mxid1: string;\n  mxid2?: string;\n}\n\nconst SegmentToSigil: { [key: string]: string } = {\n  u: \"@\",\n  user: \"@\",\n  r: \"#\",\n  room: \"#\",\n  roomid: \"!\",\n};\n\n// https://github.com/matrix-org/matrix-spec-proposals/blob/main/proposals/2312-matrix-uri.md\nexport function parseMatrixUri(uri: string): ParsedMatrixURI | URL {\n  const url = new URL(uri, window.location.href);\n\n  if (url.protocol === \"matrix:\") {\n    const matches = url.pathname.match(/^(\\/\\/.+\\/)?(.+)$/);\n\n    let authority = undefined;\n    let path = undefined;\n\n    if (matches) {\n      if (matches.length == 3) {\n        authority = matches[1];\n        path = matches[2];\n      } else if (matches.length === 2) {\n        path = matches[1];\n      }\n    }\n\n    if (!path) {\n      throw new Error(`Invalid matrix uri \"${uri}\": No path provided`);\n    }\n\n    const segments = path.split(\"/\");\n\n    if (segments.length !== 2 && segments.length !== 4) {\n      throw new Error(`Invalid matrix uri \"${uri}\": Invalid number of segments`);\n    }\n\n    const sigil1 = SegmentToSigil[segments[0]];\n\n    if (!sigil1) {\n      throw new Error(`Invalid matrix uri \"${uri}\": Invalid segment ${segments[0]}`);\n    }\n\n    if (!segments[1]) {\n      throw new Error(`Invalid matrix uri \"${uri}\": Empty segment`);\n    }\n\n    const mxid1 = `${sigil1}${segments[1]}`;\n\n    let mxid2: string | undefined = undefined;\n\n    if (segments.length === 4) {\n      if ((sigil1 === \"!\" || sigil1 === \"#\") && (segments[2] === \"e\" || segments[2] === \"event\") && segments[3]) {\n        mxid2 = `$${segments[3]}`;\n      } else {\n        throw new Error(`Invalid matrix uri \"${uri}\": Invalid segment ${segments[2]}`);\n      }\n    }\n\n    return { protocol: \"matrix:\", authority, mxid1, mxid2 };\n  }\n\n  return url;\n}\n\nexport function parsedMatrixUriToString(uri: ParsedMatrixURI | URL) {\n  return uri instanceof URL ? uri.href : uri.mxid1;\n}\n\nexport function getRoomCall(calls: Map<string, GroupCall> | BaseObservableMap<string, GroupCall>, roomId?: string) {\n  if (!roomId) return undefined;\n  const roomCalls = Array.from(calls).flatMap(([_callId, call]) => (call.roomId === roomId ? call : []));\n  return roomCalls.length ? roomCalls[0] : undefined;\n}\n\nexport function eventByOrderKey(ev1: StateEvent, ev2: StateEvent) {\n  const o1 = ev1.content.order;\n  const o2 = ev2.content.order;\n  if (o1 === undefined && o2 === undefined) {\n    const ts1 = ev1.origin_server_ts;\n    const ts2 = ev2.origin_server_ts;\n\n    if (ts1 === ts2) return 0;\n    return ts1 > ts2 ? -1 : 1;\n  }\n  if (o1 === undefined) return 1;\n  if (o2 === undefined) return -1;\n  return o1 < o2 ? -1 : 1;\n}\n\nexport async function setPowerLevel(session: Session, roomId: string, userId: string, powerLevel: number) {\n  const content = await session.hsApi.state(roomId, \"m.room.power_levels\", \"\").response();\n  await session.hsApi\n    .sendState(roomId, \"m.room.power_levels\", \"\", {\n      ...content,\n      users: {\n        ...content.users,\n        [userId]: powerLevel,\n      },\n    })\n    .response();\n}\n","import { useCallback, useEffect, useRef } from \"react\";\n\nexport function useIsMounted() {\n  const isMounted = useRef(false);\n\n  useEffect(() => {\n    isMounted.current = true;\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return useCallback(() => isMounted.current, []);\n}\n","import { atom } from \"jotai\";\n\ninterface UserProfileState {\n  userId: string;\n  displayName: string;\n  avatarUrl?: string;\n}\n\nconst baseUserProfileAtom = atom<UserProfileState>({\n  userId: \"@dummy:server.xyz\",\n  displayName: \"dummy\",\n  avatarUrl: undefined,\n});\n\nexport const userProfileAtom = atom<UserProfileState, [UserProfileState], void>(\n  (get) => get(baseUserProfileAtom),\n  (get, set, update) => {\n    const { userId, displayName, avatarUrl } = get(baseUserProfileAtom);\n    if (userId === update.userId && avatarUrl === update.avatarUrl && displayName === update.displayName) return;\n    set(baseUserProfileAtom, update);\n  }\n);\n","import { useCallback, useEffect, useState } from \"react\";\nimport { Session, Client, SyncStatus, Room, RoomVisibility, RoomType } from \"@thirdroom/hydrogen-view-sdk\";\nimport { useSetAtom } from \"jotai\";\n\nimport { getMxIdUsername, getProfileRoom, waitToCreateRoom } from \"../utils/matrixUtils\";\nimport { useIsMounted } from \"./useIsMounted\";\nimport { userProfileAtom } from \"../state/userProfile\";\n\nexport function useUserProfile(client: Client, session?: Session) {\n  const setUserProfile = useSetAtom(userProfileAtom);\n  const isMounted = useIsMounted();\n  const [profileRoom, setProfileRoom] = useState<Room>();\n\n  const updateProfile = useCallback(\n    (userId: string, displayName?: string, avatarUrl?: string) => {\n      setUserProfile({\n        userId,\n        displayName: displayName || getMxIdUsername(userId),\n        avatarUrl,\n      });\n    },\n    [setUserProfile]\n  );\n\n  const updateFromServer = useCallback(\n    (session: Session) => {\n      session.hsApi\n        .profile(session.userId)\n        .response()\n        .then((data) => {\n          if (!isMounted()) return;\n          updateProfile(session.userId, data.displayname, data.avatar_url);\n        })\n        .catch(() => {\n          // Silence error since not all users have profile routes\n        });\n    },\n    [isMounted, updateProfile]\n  );\n\n  const listenProfileChange = useCallback(\n    async (session: Session, profileRoom: Room) => {\n      setProfileRoom(profileRoom);\n      const memberObserver = await profileRoom.observeMember(session.userId);\n\n      const unSubs = memberObserver?.subscribe((member) => {\n        if (member.membership !== \"join\") unSubs?.();\n\n        const { avatarUrl, displayName } = member;\n        updateProfile(session.userId, avatarUrl, displayName);\n      });\n    },\n    [updateProfile, setProfileRoom]\n  );\n\n  const initProfileRoom = useCallback(\n    async (session: Session) => {\n      const profileRoom = getProfileRoom(session.rooms);\n\n      if (profileRoom) {\n        listenProfileChange(session, profileRoom);\n      } else {\n        const roomBeingCreated = session.createRoom({\n          type: RoomType.Profile,\n          visibility: RoomVisibility.Private,\n          name: \"Third Room - Profile\",\n          topic: \"This room contain profile information.\",\n          isEncrypted: false,\n          isFederationDisabled: false,\n          powerLevelContentOverride: {\n            invite: 100,\n            kick: 100,\n            ban: 100,\n            redact: 100,\n            state_default: 100,\n            events_default: 100,\n            users_default: 0,\n            users: {\n              [session.userId]: 100,\n            },\n          },\n        });\n\n        const profileRoom = await waitToCreateRoom(session, roomBeingCreated);\n        if (!profileRoom) {\n          window.setTimeout(() => window.location.reload());\n          return;\n        }\n        listenProfileChange(session, profileRoom);\n      }\n    },\n    [listenProfileChange]\n  );\n\n  useEffect(() => {\n    let unSubs: () => void;\n    const { sync } = client;\n    if (!session) {\n      setProfileRoom(undefined);\n      return;\n    }\n\n    updateProfile(session.userId);\n    updateFromServer(session);\n\n    // Make sure catchup sync has completed\n    // so we don't create redundant profile room.\n    if (sync.status.get() === \"Syncing\" || getProfileRoom(session.rooms)) {\n      initProfileRoom(session);\n    } else {\n      let prevStatus: SyncStatus = sync.status.get();\n      unSubs = sync.status.subscribe((syncStatus) => {\n        if (prevStatus === syncStatus) return;\n        prevStatus = syncStatus;\n        if (syncStatus === \"Syncing\") {\n          initProfileRoom(session);\n          unSubs?.();\n        }\n      });\n    }\n    return () => {\n      unSubs?.();\n      updateProfile(\"@dummy:server.xyz\");\n    };\n  }, [client, session, updateProfile, updateFromServer, initProfileRoom]);\n\n  return profileRoom;\n}\n","export function registerThirdroomGlobalFn(key: string, fn: (...args: any[]) => any) {\n  const global = window as unknown as any;\n\n  if (!global.thirdroom) {\n    global.thirdroom = {};\n  }\n\n  global.thirdroom[key] = fn;\n\n  return () => {\n    if (global.thirdroom) {\n      global.thirdroom[key] = () => {};\n    }\n  };\n}\n\nexport function registerThirdroomGlobalVar(key: string, value: any) {\n  const global = window as unknown as any;\n\n  if (!global.thirdroom) {\n    global.thirdroom = {};\n  }\n\n  global.thirdroom[key] = value;\n\n  return () => {\n    if (global.thirdroom) {\n      global.thirdroom[key] = undefined;\n    }\n  };\n}\n","export function downloadFile(buffer: ArrayBuffer | string, fileName: string, mimeType: string) {\n  const blob = new Blob([buffer], { type: mimeType });\n  const el = document.createElement(\"a\");\n  el.style.display = \"none\";\n  document.body.appendChild(el);\n  el.href = URL.createObjectURL(blob);\n  el.download = fileName;\n  el.click();\n  document.body.removeChild(el);\n}\n","// @refresh reset\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Navigate, Outlet, useLocation, useMatch, useNavigate } from \"react-router-dom\";\nimport {\n  Platform,\n  Segment,\n  Navigation,\n  Client,\n  Session,\n  LoadStatus,\n  URLRouter,\n  CallIntent,\n  ILogger,\n  LoginFailure,\n  OidcApi,\n  OIDCLoginMethod,\n  ILoginMethod,\n  ISessionInfo,\n  FeatureSet,\n  FeatureFlag,\n} from \"@thirdroom/hydrogen-view-sdk\";\nimport downloadSandboxPath from \"@thirdroom/hydrogen-view-sdk/download-sandbox.html?url\";\nimport workerPath from \"@thirdroom/hydrogen-view-sdk/main.js?url\";\nimport olmWasmPath from \"@matrix-org/olm/olm.wasm?url\";\nimport olmJsPath from \"@matrix-org/olm/olm.js?url\";\nimport olmLegacyJsPath from \"@matrix-org/olm/olm_legacy.js?url\";\n\nimport { Text } from \"../atoms/text/Text\";\nimport { HydrogenContext, HydrogenContextProvider } from \"../hooks/useHydrogen\";\nimport { useAsyncCallback } from \"../hooks/useAsyncCallback\";\nimport { LoadingScreen } from \"./components/loading-screen/LoadingScreen\";\nimport { Button } from \"../atoms/button/Button\";\nimport { useUserProfile } from \"../hooks/useUserProfile\";\nimport { registerThirdroomGlobalFn, registerThirdroomGlobalVar } from \"../../engine/utils/registerThirdroomGlobal\";\nimport { CoverScreen } from \"./components/cover-screen/CoverScreen\";\nimport { downloadFile } from \"../../engine/utils/downloadFile\";\nimport configData from \"../../../config.json\";\n\nfunction allowsChild(parent: Segment, child: Segment) {\n  const parentType = parent.type;\n\n  if (parentType === undefined) return [\"session\", \"login\"].includes(child.type);\n  if (parentType === \"session\") return [\"left-panel\"].includes(child.type);\n  if (parentType === \"left-panel\") return [\"room\"].includes(child.type);\n  return false;\n}\n\nenum SyncStatus {\n  InitialSync = \"InitialSync\",\n  CatchupSync = \"CatchupSync\",\n  Syncing = \"Syncing\",\n  Stopped = \"Stopped\",\n}\n\nclass MockRouter {\n  attach() {}\n\n  dispose() {}\n\n  pushUrl(url: string) {}\n\n  tryRestoreLastUrl() {\n    return false;\n  }\n\n  urlForSegments(segments: string[]) {\n    return \"\";\n  }\n\n  urlForSegment(type: string, value: any) {\n    return \"\";\n  }\n\n  urlUntilSegment(type: string) {\n    return \"\";\n  }\n\n  urlForPath(path: string) {\n    return \"\";\n  }\n\n  openRoomActionUrl(roomId: string) {\n    return \"\";\n  }\n\n  createSSOCallbackURL() {\n    return \"\";\n  }\n\n  createOIDCRedirectURL() {\n    return window.location.origin;\n  }\n\n  absoluteAppUrl() {\n    return window.location.origin;\n  }\n\n  absoluteUrlForAsset(asset: string) {\n    return new URL(\"/assets/\" + asset, window.location.origin).toString();\n  }\n\n  normalizeUrl() {}\n}\n\ninterface HydrogenInstance {\n  client: Client;\n  platform: Platform;\n  navigation: Navigation;\n  containerEl: HTMLElement;\n  urlRouter: URLRouter;\n  logger: ILogger;\n}\n\nlet hydrogenInstance: HydrogenInstance;\n\nfunction initHydrogen() {\n  if (hydrogenInstance) {\n    return hydrogenInstance;\n  }\n\n  // Container element used by Hydrogen for downloads etc.\n  const container = document.createElement(\"div\");\n  container.id = \"hydrogen-root\";\n  document.body.append(container);\n\n  const assetPaths = {\n    downloadSandbox: downloadSandboxPath,\n    worker: workerPath,\n    olm: {\n      wasm: olmWasmPath,\n      legacyBundle: olmLegacyJsPath,\n      wasmBundle: olmJsPath,\n    },\n  };\n\n  const oidcClientId = document.location.hostname === \"thirdroom.io\" ? \"thirdroom\" : \"thirdroom_dev\";\n\n  const config = { ...configData };\n  config.staticOidcClients[\"https://id.thirdroom.io/realms/thirdroom/\"] = {\n    client_id: oidcClientId,\n    guestKeycloakIdpHint: \"guest\",\n  };\n\n  const options = {\n    development: false, //import.meta.env.DEV,\n  };\n\n  const platform = new Platform({ container, assetPaths, config, options });\n  const features = new FeatureSet(FeatureFlag.Calls);\n\n  const navigation = new Navigation(allowsChild);\n  platform.setNavigation(navigation);\n\n  const client = new Client(platform, features, { deviceName: \"Third Room\" });\n\n  hydrogenInstance = {\n    client,\n    platform,\n    navigation,\n    containerEl: container,\n    urlRouter: new MockRouter() as unknown as URLRouter,\n    logger: platform.logger,\n  };\n\n  registerThirdroomGlobalVar(\"hydrogen\", hydrogenInstance);\n  registerThirdroomGlobalFn(\"openCallLogs\", () => {\n    const logViewer = window.open(\"/logviewer\", \"__blank\");\n\n    function onReady() {\n      window.removeEventListener(\"log-viewer-ready\", onReady);\n\n      logViewer?.postMessage({\n        hydrogenLogs: JSON.parse(\n          JSON.stringify({\n            items: Array.from((platform.logger as any)._openItems).map((i: any) =>\n              i.serialize(undefined, undefined, false)\n            ),\n          })\n        ),\n      });\n    }\n\n    window.addEventListener(\"log-viewer-ready\", onReady);\n  });\n  registerThirdroomGlobalFn(\"downloadCallLogs\", () => {\n    const logs = JSON.stringify({\n      items: Array.from((platform.logger as any)._openItems).map((i: any) => i.serialize(undefined, undefined, false)),\n    });\n    downloadFile(logs, \"thirdroom-call-logs.json\", \"application/json\");\n  });\n\n  return hydrogenInstance;\n}\n\nfunction getSessionInfo(): ISessionInfo | undefined {\n  const sessionsJson = localStorage.getItem(\"hydrogen_sessions_v1\");\n  if (sessionsJson) {\n    const sessions = JSON.parse(sessionsJson);\n    if (Array.isArray(sessions)) {\n      return sessions[0];\n    }\n  }\n  return undefined;\n}\n\nasync function waitToLoadClient(client: Client) {\n  await client.loadStatus.waitFor((loadStatus: LoadStatus) => {\n    const isCatchupSync = loadStatus === LoadStatus.FirstSync && client.sync.status.get() === SyncStatus.CatchupSync;\n\n    return (\n      isCatchupSync ||\n      loadStatus === LoadStatus.LoginFailed ||\n      loadStatus === LoadStatus.Error ||\n      loadStatus === LoadStatus.Ready\n    );\n  });\n\n  const loadStatus = client.loadStatus.get();\n\n  if (loadStatus === LoadStatus.Error || loadStatus === LoadStatus.LoginFailed) {\n    throw new Error(loginFailureToMsg(client.loginFailure));\n  }\n}\n\nfunction loginFailureToMsg(loginFailure: LoginFailure) {\n  if (loginFailure === LoginFailure.Connection) return \"Connection timeout. Please try again.\";\n  if (loginFailure === LoginFailure.Credentials) return \"Invalid credentials. Please try again.\";\n  if (loginFailure === LoginFailure.Unknown) return \"Unknown error. Please try again.\";\n}\n\nasync function loadClient(client: Client, sessionId: string): Promise<Session | undefined> {\n  try {\n    await waitToLoadClient(client);\n    if (client.session) {\n      await client.session.callHandler.loadCalls(\"m.room\" as CallIntent);\n      return client.session;\n    }\n    await client.startLogout(sessionId);\n    localStorage.clear();\n  } catch (error) {\n    localStorage.clear();\n    throw error;\n  }\n  return undefined;\n}\n\nasync function getOidcLoginMethod(platform: Platform, urlCreator: URLRouter, state: string, code: string) {\n  const { settingsStorage } = platform;\n  const storageKeys = [\n    `oidc_${state}_nonce`,\n    `oidc_${state}_code_verifier`,\n    `oidc_${state}_redirect_uri`,\n    `oidc_${state}_homeserver`,\n    `oidc_${state}_issuer`,\n    `oidc_${state}_client_id`,\n    `oidc_${state}_account_management_url`,\n  ];\n  const [nonce, codeVerifier, redirectUri, homeserver, issuer, clientId, accountManagementUrl] = await Promise.all(\n    storageKeys.map((key) => settingsStorage.getString(key))\n  );\n  settingsStorage.remove(`oidc_${state}_started_at`);\n  storageKeys.forEach((key) => settingsStorage.remove(key));\n\n  if (!nonce || !codeVerifier || !redirectUri || !homeserver || !issuer || !clientId || !accountManagementUrl) {\n    return;\n  }\n\n  return new OIDCLoginMethod({\n    oidcApi: new OidcApi({\n      issuer,\n      staticClients: platform.config.staticOidcClients,\n      clientId,\n      urlCreator,\n      request: platform.request,\n      encoding: platform.encoding,\n      crypto: platform.crypto,\n    }),\n    nonce,\n    codeVerifier,\n    code,\n    homeserver,\n    redirectUri,\n    accountManagementUrl,\n  });\n}\n\nfunction useOidcComplete(\n  platform: Platform,\n  urlRouter: URLRouter,\n  login: (loginMethod: ILoginMethod) => Promise<void>\n) {\n  const navigate = useNavigate();\n  const completeOidc = async (state: string, code: string) => {\n    const loginMethod = await getOidcLoginMethod(platform, urlRouter, state, code);\n    if (!loginMethod) return;\n    login(loginMethod);\n    navigate(\"/\");\n  };\n  const location = useLocation();\n\n  if (location.hash !== \"\") {\n    const params = new URLSearchParams(location.hash.slice(1));\n    const code = params.get(\"code\");\n    const state = params.get(\"state\");\n    if (params.get(\"error\")) {\n      return params.get(\"error_description\");\n    }\n    if (code && state) {\n      completeOidc(state, code);\n    }\n  }\n  return null;\n}\nfunction useSession(client: Client, platform: Platform, urlRouter: URLRouter) {\n  const sessionRef = useRef<Session>();\n  const session = sessionRef.current ?? undefined;\n\n  const {\n    loading: loadingInitialSession,\n    error: initialSessionLoadError,\n    callback: loadInitialSession,\n  } = useAsyncCallback(\n    async (sessionInfo: ISessionInfo) => {\n      await client.startWithExistingSession(sessionInfo.id);\n      sessionRef.current = await loadClient(client, sessionInfo.id);\n    },\n    [platform, client]\n  );\n\n  const {\n    loading: loggingIn,\n    error: errorLoggingIn,\n    callback: login,\n  } = useAsyncCallback<(loginMethod: ILoginMethod) => Promise<void>, void>(\n    async (loginMethod) => {\n      await client.startWithLogin(loginMethod);\n      sessionRef.current = await loadClient(client, client.sessionId);\n    },\n    [client]\n  );\n\n  const {\n    loading: loggingOut,\n    error: errorLoggingOut,\n    callback: logout,\n  } = useAsyncCallback<() => Promise<void>, void>(async () => {\n    if (client && client.session) {\n      const availSessions = await platform.sessionInfoStorage.getAll();\n      const logoutChain = availSessions.map((session) => client.startLogout(session.id));\n      try {\n        await Promise.allSettled(logoutChain);\n      } catch (err) {\n        console.error(err);\n      }\n      localStorage.clear();\n\n      client.loadStatus.set(LoadStatus.NotLoading);\n      sessionRef.current = undefined;\n    }\n  }, [client, session]);\n\n  const oidcCompleteError = useOidcComplete(platform, urlRouter, login);\n  const profileRoom = useUserProfile(client, session);\n\n  const loading = loadingInitialSession || loggingIn || loggingOut || (session && !profileRoom);\n  const error = initialSessionLoadError || errorLoggingIn || errorLoggingOut;\n  const errorMsg = oidcCompleteError ?? error?.message;\n\n  return {\n    session,\n    profileRoom,\n    loadInitialSession,\n    login,\n    logout,\n    loading,\n    errorMsg,\n  };\n}\n\nexport function HydrogenRootView() {\n  const sessionInfo = getSessionInfo();\n\n  const [{ client, containerEl, platform, navigation, urlRouter, logger }] = useState(initHydrogen);\n\n  const { session, profileRoom, loadInitialSession, login, logout, loading, errorMsg } = useSession(\n    client,\n    platform,\n    urlRouter\n  );\n\n  useEffect(() => {\n    return () => {\n      client.dispose();\n      containerEl.remove();\n    };\n  }, [client, containerEl]);\n\n  const context = useMemo<HydrogenContext>(\n    () => ({\n      client,\n      platform,\n      navigation,\n      containerEl,\n      urlRouter,\n      logger,\n      session,\n      profileRoom,\n      login,\n      logout,\n    }),\n    [client, platform, navigation, containerEl, urlRouter, logger, session, profileRoom, login, logout]\n  );\n\n  const landingPath = useMatch({ path: \"/landing\" });\n  const loginPath = useMatch({ path: \"/login\" });\n\n  const href = window.location.href;\n  const WORLD_PATH_REG = /^\\S+(\\/world\\/(!|#)\\S+:\\S+)$/;\n\n  if (href.match(WORLD_PATH_REG) && !sessionInfo) {\n    localStorage.setItem(\"on_login_redirect_uri\", href);\n  }\n\n  if (sessionInfo && !loading && !session && !landingPath) {\n    loadInitialSession(sessionInfo);\n  }\n\n  if (loading) {\n    return <LoadingScreen />;\n  }\n\n  if (errorMsg) {\n    return (\n      <CoverScreen className=\"gap-md\">\n        <Text variant=\"b1\" weight=\"semi-bold\">\n          {errorMsg}\n        </Text>\n        <Button onClick={() => window.location.reload()}>Refresh</Button>\n      </CoverScreen>\n    );\n  }\n\n  if (!session && !sessionInfo && href.match(WORLD_PATH_REG)) {\n    return <Navigate to=\"/login\" replace={true} />;\n  }\n\n  if (!landingPath && !loginPath && !session && !sessionInfo) {\n    return <Navigate to=\"/landing\" replace={true} />;\n  }\n\n  const onLoginRedirectPath = localStorage.getItem(\"on_login_redirect_uri\")?.match(WORLD_PATH_REG)?.[1];\n  if (sessionInfo && !landingPath && onLoginRedirectPath) {\n    localStorage.removeItem(\"on_login_redirect_uri\");\n    return <Navigate to={onLoginRedirectPath} />;\n  }\n\n  if (loginPath && sessionInfo) {\n    return <Navigate to=\"/\" replace={true} />;\n  }\n\n  return (\n    <HydrogenContextProvider value={context}>\n      <Outlet />\n    </HydrogenContextProvider>\n  );\n}\n","export default \"__VITE_ASSET__379d8364__\"","import LogoFullSVG from \"../../../../../res/svg/logo-full.svg\";\nimport { CoverScreen } from \"../cover-screen/CoverScreen\";\n\nexport function SplashScreen() {\n  return (\n    <CoverScreen>\n      <img src={LogoFullSVG} alt=\"Third Room\" />\n    </CoverScreen>\n  );\n}\n","import { useNavigate } from \"react-router-dom\";\n\nimport { Button } from \"../../../atoms/button/Button\";\nimport { Text } from \"../../../atoms/text/Text\";\nimport { CoverScreen } from \"../cover-screen/CoverScreen\";\n\nexport function PageNotFound() {\n  const navigate = useNavigate();\n  return (\n    <CoverScreen className=\"gap-lg\">\n      <div className=\"flex flex-column items-center gap-xs\">\n        <Text variant=\"h2\" weight=\"bold\">\n          Page not found\n        </Text>\n        <Text color=\"surface-low\">Sorry, the page you're looking for doesn't exist.</Text>\n      </div>\n      <Button onClick={() => navigate(\"/\")}>Go to Homepage</Button>\n    </CoverScreen>\n  );\n}\n","import { lazy, Suspense, useEffect } from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport { useFocusVisible } from \"@react-aria/interactions\";\nimport { serviceWorkerFile } from \"virtual:vite-plugin-service-worker\";\nimport * as Sentry from \"@sentry/react\";\nimport { Provider as JotaiProvider } from \"jotai\";\n\nimport \"./App.css\";\nimport \"@fontsource/inter/variable.css\";\nimport \"@fontsource/noto-serif/latin.css\";\n\nimport { HydrogenRootView } from \"./views/HydrogenRootView\";\nimport { SplashScreen } from \"./views/components/splash-screen/SplashScreen\";\nimport { PageNotFound } from \"./views/components/page-not-found/PageNotFound\";\nimport { LoadingScreen } from \"./views/components/loading-screen/LoadingScreen\";\n\nconst SentryRoutes = Sentry.withSentryReactRouterV6Routing(Routes);\n\nwindow.onload = () => {\n  if (navigator.serviceWorker) {\n    navigator.serviceWorker.register(serviceWorkerFile, { type: \"module\" }).then((reg) => {\n      console.log(\"Service worker is registered.\");\n    });\n  }\n};\n\nfunction FocusOutlineManager() {\n  const { isFocusVisible } = useFocusVisible();\n  useEffect(() => {\n    document.body.style.setProperty(\"--focus-outline\", isFocusVisible ? \"var(--tc-surface) solid 2px\" : \"none\");\n  }, [isFocusVisible]);\n  return <></>;\n}\n\nconst LandingPage = lazy(() => import(\"./site/LandingPage\"));\nconst PreviewBlog = lazy(() => import(\"./site/PreviewBlog\"));\nconst LoginView = lazy(() => import(\"./views/login/LoginView\"));\nconst GLTFViewer = lazy(() => import(\"./views/gltf-viewer/GLTFViewer\"));\nconst AssetPipeline = lazy(() => import(\"./views/asset-pipeline/AssetPipeline\"));\nconst SessionView = lazy(() => import(\"./views/session/SessionView\"));\nconst WorldRootView = lazy(() => import(\"./views/session/world/WorldRootView\"));\nconst MainMenuRootView = lazy(() => import(\"./views/session/world/MainMenuRootView\"));\n\nexport function App() {\n  return (\n    <JotaiProvider>\n      <FocusOutlineManager />\n      <SentryRoutes>\n        <Route element={<HydrogenRootView />}>\n          <Route\n            path=\"/landing\"\n            element={\n              <Suspense fallback={<SplashScreen />}>\n                <LandingPage />\n              </Suspense>\n            }\n          />\n          <Route\n            path=\"/login\"\n            element={\n              <Suspense fallback={<LoadingScreen />}>\n                <LoginView />\n              </Suspense>\n            }\n          />\n          <Route\n            element={\n              <Suspense fallback={<LoadingScreen />}>\n                <SessionView />\n              </Suspense>\n            }\n          >\n            {/* enter world by id */}\n            <Route\n              path=\"world/:worldId\"\n              element={\n                <Suspense fallback={<></>}>\n                  <WorldRootView />\n                </Suspense>\n              }\n            />\n            {/* enter world by alias */}\n            <Route\n              path=\"world/\"\n              element={\n                <Suspense fallback={<></>}>\n                  <WorldRootView />\n                </Suspense>\n              }\n            />\n            <Route\n              path=\"/\"\n              element={\n                <Suspense fallback={<></>}>\n                  <MainMenuRootView />\n                </Suspense>\n              }\n            />\n          </Route>\n          <Route\n            path=\"/scene-preview\"\n            element={\n              <Suspense fallback={<></>}>\n                <GLTFViewer />\n              </Suspense>\n            }\n          />\n        </Route>\n        <Route\n          path=\"/preview\"\n          element={\n            <Suspense fallback={<SplashScreen />}>\n              <PreviewBlog />\n            </Suspense>\n          }\n        />\n        <Route\n          path=\"/viewer\"\n          element={\n            <Suspense fallback={<SplashScreen />}>\n              <GLTFViewer />\n            </Suspense>\n          }\n        />\n        <Route\n          path=\"/pipeline\"\n          element={\n            <Suspense fallback={<SplashScreen />}>\n              <AssetPipeline />\n            </Suspense>\n          }\n        />\n        <Route path=\"*\" element={<PageNotFound />} />\n      </SentryRoutes>\n    </JotaiProvider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, useLocation, useNavigationType, createRoutesFromChildren, matchRoutes } from \"react-router-dom\";\nimport { enableMapSet } from \"immer\";\nimport * as Sentry from \"@sentry/react\";\nimport { BrowserTracing } from \"@sentry/tracing\";\n\nimport { App } from \"./ui/App\";\n\nSentry.init({\n  dsn: import.meta.env.VITE_SENTRY_DSN as string,\n  environment: (import.meta.env.VITE_SENTRY_ENVIRONMENT as string) ?? \"development\",\n  release: import.meta.env.VITE_SENTRY_RELEASE as string,\n  integrations: [\n    new BrowserTracing({\n      routingInstrumentation: Sentry.reactRouterV6Instrumentation(\n        React.useEffect,\n        useLocation,\n        useNavigationType,\n        createRoutesFromChildren,\n        matchRoutes\n      ),\n    }),\n  ],\n  tracesSampleRate: 1.0,\n});\n\nenableMapSet();\nconst rootId = \"root\";\nconst rootEl = document.getElementById(rootId);\n\nif (!rootEl) {\n  throw new Error(`Can not find root element with id: ${rootId}`);\n}\n\nReactDOM.render(\n  // <React.StrictMode>\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  // </React.StrictMode>,\n  rootEl\n);\n"],"file":"assets/main.cc7980d7.js"}