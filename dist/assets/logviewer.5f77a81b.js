import"./modulepreload-polyfill-3cfb730f.js";function R(e){return typeof e!="object"||!!e.nodeType||Array.isArray(e)}function q(e,t){return Object.entries(e).reduce((n,[o,r])=>(typeof r=="function"&&(r=r(t)),r?n+(n.length?" ":"")+o:n),"")}function V(e,t,n){t==="className"&&(t="class"),n===!1?e.removeAttribute(t):(n===!0&&(n=t),e.setAttribute(t,n))}function P(e,t,n,o){n&&R(n)&&(o=n,n=null);const r=document.createElementNS(e,t);if(n)for(let[s,l]of Object.entries(n))s==="className"&&typeof l=="object"&&l!==null&&(l=q(l)),V(r,s,l);if(o){Array.isArray(o)||(o=[o]);for(let s of o)s.nodeType||(s=H(s)),r.appendChild(s)}return r}function H(e){return document.createTextNode(e)}const G="http://www.w3.org/1999/xhtml",J="http://www.w3.org/2000/svg",W={[G]:["br","a","ol","ul","li","div","h1","h2","h3","h4","h5","h6","p","strong","em","span","img","section","main","article","aside","pre","button","time","input","textarea","label","form","progress","output"],[J]:["svg","circle"]},i={};for(const[e,t]of Object.entries(W))for(const n of t)i[n]=function(o,r){return P(e,n,o,r)};function z(e=null){const t=document.createElement("input");t.setAttribute("type","file"),t.className="hidden",e&&t.setAttribute("accept",e);const n=new Promise((o,r)=>{const s=()=>{t.removeEventListener("change",s,!0);const l=t.files[0];document.body.removeChild(t),l?o(l):r(new Error("no file picked"))};t.addEventListener("change",s,!0)});return document.body.appendChild(t),t.click(),n}function K(e){const t=new FileReader,n=new Promise((o,r)=>{t.addEventListener("load",s=>o(s.target.result)),t.addEventListener("error",s=>r(s.target.error))});return t.readAsText(e),n}const C=document.querySelector("main");let g,N,m;const Q=[void 0,"All","Debug","Detail","Info","Warn","Error","Fatal","Off"];C.addEventListener("click",e=>{if(e.target.classList.contains("toggleExpanded"))e.target.parentElement.parentElement.classList.toggle("expanded");else{if(e.target.tagName==="A"&&!e.target.classList.contains("item"))return;const t=e.target.closest(".item");t&&(e.preventDefault(),M(t),history.pushState(null,null,`#${t.id}`))}});window.addEventListener("hashchange",()=>{const e=window.location.hash.substr(1),t=document.getElementById(e);t&&t.closest("main")&&(M(t),t.scrollIntoView({behavior:"smooth",block:"nearest"}))});function M(e){g&&g.classList.remove("selected"),g=e,g.classList.add("selected");let t=N,n;const o=g.id.split("/").map(r=>parseInt(r,10));for(const r of o)n=t,t=c(t)[r];Y(t,n,g)}function U(e){return typeof e=="object"&&e!==null?JSON.stringify(e,void 0,2):e+""}function Y(e,t,n){const o=u(t)?`${u(e)-u(t)}ms`:"none",r=i.button("Expand recursively");r.addEventListener("click",()=>O(n.parentElement.parentElement));const s=u(e),l=i.aside([i.h3(y(e)),i.p([i.strong("Log level: "),Q[D(e)]]),i.p([i.strong("Error: "),d(e)?`${d(e).name} ${d(e).stack}`:"none"]),i.p([i.strong("Parent offset: "),o]),i.p([i.strong("Start: "),new Date(s).toString(),` (${s})`]),i.p([i.strong("Duration: "),`${k(e)}ms`]),i.p([i.strong("Child count: "),c(e)?`${c(e).length}`:"none"]),i.p([i.strong("Forced finish: "),(te(e)||!1)+""]),i.p(i.strong("Values:")),i.ul({class:"values"},Object.entries(f(e)).map(([a,S])=>{let E;if(a==="ref"){const $=m.get(S);$?E=i.a({href:`#${$.id}`},y($)):E=`unknown ref ${S}`}else E=U(S);return i.li([i.span({className:"key"},oe(a)),i.span({className:"value"},E)])})),i.p(r)]);document.querySelector("aside").replaceWith(l)}function O(e){e.classList.add("expanded");const t=e.querySelector("ol");if(t){const n=t.children.length;for(let o=0;o<n;o+=1)O(t.children[o])}}document.getElementById("openFile").addEventListener("click",Z);function X(e,t){if(e){const n=u(t)-ee(e);return n>=0?`+ ${b(n)}`:-n>=k(t)?"ran entirely in parallel with":`ran ${b(-n)} in parallel with`}else return new Date(u(t)).toString()}async function Z(){const e=await z(),t=await K(e),n=JSON.parse(t);T(n)}function T(e){e.items.sort((n,o)=>u(n)-u(o)),N={c:e.items},m=new Map,B(N,null,m,[]);const t=e.items.reduce((n,o,r,s)=>{const l=r===0?null:s[r-1];return n.appendChild(i.section([i.h2(X(l,o)),i.div({className:"timeline"},i.ol(_(o)))])),n},document.createDocumentFragment());C.replaceChildren(t)}function B(e,t,n,o){if(e.s=((t==null?void 0:t.s)||0)+e.s,F(e)&&n.set(F(e),e),c(e))for(let r=0;r<c(e).length;r+=1){const s=c(e)[r],l=o.concat(r);s.id=l.join("/"),B(s,e,n,l)}}const A=1e3,L=A*60,w=L*60,I=w*24;function b(e){let t="";if(e>I){const n=Math.floor(e/I);e-=n*I,t+=`${n}d`}if(e>w){const n=Math.floor(e/w);e-=n*w,t+=`${n}h`}if(e>L){const n=Math.floor(e/L);e-=n*L,t+=`${n}m`}if(e>A){const n=e/A;t+=`${n.toFixed(2)}s`}else(e>0||!t.length)&&(t+=`${e}ms`);return t}function c(e){return e.c}function u(e){return e.s}function ee(e){return e.s+e.d}function k(e){return e.d}function f(e){return e.v}function D(e){return e.l}function h(e){var t;return(t=e.v)==null?void 0:t.l}function v(e){var t;return(t=e.v)==null?void 0:t.t}function d(e){return e.e}function te(e){return e.f}function p(e){var t;return(t=e.v)==null?void 0:t.ref}function F(e){var t;return(t=e.v)==null?void 0:t.refId}function ne(e){if(d(e)){const t=d(e);return t.name||t.stack.substr(0,t.stack.indexOf(`
`))}}function y(e){var t,n,o,r;if(v(e)==="network")return`${(t=f(e))==null?void 0:t.method} ${(n=f(e))==null?void 0:n.url}`;if(h(e)&&((o=f(e))!=null&&o.id))return`${h(e)} ${f(e).id}`;if(h(e)&&((r=f(e))!=null&&r.status))return`${h(e)} (${f(e).status})`;if(h(e)&&d(e))return`${h(e)} (${ne(e)})`;if(p(e)){const s=m.get(p(e));return s?`ref "${y(s)}"`:`unknown ref ${p(e)}`}else return h(e)||v(e)}function oe(e){switch(e){case"t":return"type";case"l":return"label";default:return e}}function _(e){var l;const t=!!((l=c(e))!=null&&l.length),n={item:!0,"has-children":t,error:d(e),[`type-${v(e)}`]:!!v(e),[`level-${D(e)}`]:!0},o=e.id;let r;if(p(e)){const a=m.get(p(e));a&&(r=["ref ",i.a({href:`#${a.id}`},y(a))])}r||(r=y(e));const s=i.li([i.div([t?i.button({className:"toggleExpanded"}):"",i.a({className:n,id:o,href:`#${o}`},[i.span({class:"caption"},r),i.span({class:"duration"},`(${b(k(e))})`)])])]);return c(e)&&c(e).length&&s.appendChild(i.ol(c(e).map(a=>_(a)))),s}const re=document.getElementById("highlightForm");re.addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("highlightMatches"),n=document.getElementById("highlight").value;if(n){t.innerText="Searchingâ€¦";let o=0;j(N,r=>{let s=document.getElementById(r.id);if(se(r,n))for(o+=1,s.classList.add("highlighted"),s=s.parentElement;s.nodeName!=="SECTION";)s.nodeName==="LI"&&s.classList.add("expanded"),s=s.parentElement;else s.classList.remove("highlighted")}),t.innerText=`${o} matches`}else{for(const o of document.querySelectorAll(".highlighted"))o.classList.remove("highlighted");t.innerText=""}});function se(e,t){return d(e)&&x(d(e),t)?!0:x(f(e),t)}function x(e,t){if(typeof e=="string")return e.includes(t);if(typeof e=="object"&&e!==null){for(const n in e)if(e.hasOwnProperty(n)&&x(e[n],t))return!0}else if(typeof e=="number")return e.toString().includes(t);return!1}function j(e,t,n){if(e.id&&t(e,n),c(e))for(let o=0;o<c(e).length;o+=1){const r=c(e)[o];j(r,t,e)}}document.getElementById("collapseAll").addEventListener("click",()=>{for(const e of document.querySelectorAll(".expanded"))e.classList.remove("expanded")});document.getElementById("hideCollapsed").addEventListener("click",()=>{for(const e of document.querySelectorAll("section > div.timeline > ol > li:not(.expanded)"))e.closest("section").classList.add("hidden")});document.getElementById("hideHighlightedSiblings").addEventListener("click",()=>{for(const e of document.querySelectorAll(".highlighted")){const t=e.closest("ol"),n=Array.from(t.querySelectorAll("li > div > a:not(.highlighted)")).map(o=>o.closest("li"));for(const o of n)o.classList.contains("expanded")||o.classList.add("hidden")}});document.getElementById("showAll").addEventListener("click",()=>{for(const e of document.querySelectorAll(".hidden"))e.classList.remove("hidden")});window.addEventListener("message",e=>{e.data.hydrogenLogs&&T(e.data.hydrogenLogs)});window.opener.dispatchEvent(new Event("log-viewer-ready"));
//# sourceMappingURL=logviewer.5f77a81b.js.map
