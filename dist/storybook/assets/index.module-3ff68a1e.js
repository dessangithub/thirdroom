import{r}from"./index-f2bd0723.js";import{u as D}from"./index.module-a2f32e93.js";import{S as j}from"./index.module-3f7deb99.js";import{_ as x}from"./extends-98964cd2.js";import{a as q}from"./index.module-97271be0.js";import{u as z}from"./index.module-b8f4923b.js";let N=0;function ie(){r.useEffect(()=>{var e,o;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=t[0])!==null&&e!==void 0?e:K()),document.body.insertAdjacentElement("beforeend",(o=t[1])!==null&&o!==void 0?o:K()),N++,()=>{N===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),N--}},[])}function K(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const G=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,o)=>({...e,[o]:r.forwardRef((t,n)=>{const{asChild:c,...b}=t,E=c?j:o;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(E,x({},b,{ref:n}))})}),{});function J(...e){return o=>e.forEach(t=>function(n,c){typeof n=="function"?n(c):n!=null&&(n.current=c)}(t,o))}function Q(...e){return r.useCallback(J(...e),e)}const k={bubbles:!1,cancelable:!0},ae=r.forwardRef((e,o)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:c,onUnmountAutoFocus:b,...E}=e,[s,T]=r.useState(null),d=D(c),l=D(b),F=r.useRef(null),R=Q(o,i=>T(i)),y=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect(()=>{if(n){let i=function(a){if(y.paused||!s)return;const p=a.target;s.contains(p)?F.current=p:S(F.current,{select:!0})},m=function(a){!y.paused&&s&&(s.contains(a.relatedTarget)||S(F.current,{select:!0}))};return document.addEventListener("focusin",i),document.addEventListener("focusout",m),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",m)}}},[n,s,y.paused]),r.useEffect(()=>{if(s){M.add(y);const m=document.activeElement;if(!s.contains(m)){const a=new Event("focusScope.autoFocusOnMount",k);s.addEventListener("focusScope.autoFocusOnMount",d),s.dispatchEvent(a),a.defaultPrevented||(function(p,{select:h=!1}={}){const w=document.activeElement;for(const L of p)if(S(L,{select:h}),document.activeElement!==w)return}((i=W(s),i.filter(p=>p.tagName!=="A")),{select:!0}),document.activeElement===m&&S(s))}return()=>{s.removeEventListener("focusScope.autoFocusOnMount",d),setTimeout(()=>{const a=new Event("focusScope.autoFocusOnUnmount",k);s.addEventListener("focusScope.autoFocusOnUnmount",l),s.dispatchEvent(a),a.defaultPrevented||S(m??document.body,{select:!0}),s.removeEventListener("focusScope.autoFocusOnUnmount",l),M.remove(y)},0)}}var i},[s,d,l,y]);const P=r.useCallback(i=>{if(!t&&!n||y.paused)return;const m=i.key==="Tab"&&!i.altKey&&!i.ctrlKey&&!i.metaKey,a=document.activeElement;if(m&&a){const p=i.currentTarget,[h,w]=function(L){const u=W(L),v=B(u,L),f=B(u.reverse(),L);return[v,f]}(p);h&&w?i.shiftKey||a!==w?i.shiftKey&&a===h&&(i.preventDefault(),t&&S(w,{select:!0})):(i.preventDefault(),t&&S(h,{select:!0})):a===p&&i.preventDefault()}},[t,n,y.paused]);return r.createElement(G.div,x({tabIndex:-1},E,{ref:R,onKeyDown:P}))});function W(e){const o=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const c=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||c?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)o.push(t.currentNode);return o}function B(e,o){for(const t of e)if(!V(t,{upTo:o}))return t}function V(e,{upTo:o}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o!==void 0&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function S(e,{select:o=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&function(n){return n instanceof HTMLInputElement&&"select"in n}(e)&&o&&e.select()}}const M=function(){let e=[];return{add(o){const t=e[0];o!==t&&(t==null||t.pause()),e=_(e,o),e.unshift(o)},remove(o){var t;e=_(e,o),(t=e[0])===null||t===void 0||t.resume()}}}();function _(e,o){const t=[...e],n=t.indexOf(o);return n!==-1&&t.splice(n,1),t}let $,O=0;function X({disabled:e}){const o=r.useRef(!1);z(()=>{if(e){let t=function(){O--,O===0&&(document.body.style.pointerEvents=$)},n=function(c){o.current=c.pointerType!=="mouse"};return O===0&&($=document.body.style.pointerEvents),document.body.style.pointerEvents="none",O++,document.addEventListener("pointerup",n),()=>{o.current?document.addEventListener("click",t,{once:!0}):t(),document.removeEventListener("pointerup",n)}}},[e])}function Y(...e){return o=>e.forEach(t=>function(n,c){typeof n=="function"?n(c):n!=null&&(n.current=c)}(t,o))}function Z(...e){return r.useCallback(Y(...e),e)}const ee=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,o)=>({...e,[o]:r.forwardRef((t,n)=>{const{asChild:c,...b}=t,E=c?j:o;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(E,x({},b,{ref:n}))})}),{});function I(e,o,{checkForDefaultPrevented:t=!0}={}){return function(n){if(e==null||e(n),t===!1||!n.defaultPrevented)return o==null?void 0:o(n)}}const te=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),de=r.forwardRef((e,o)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:c,onFocusOutside:b,onInteractOutside:E,onDismiss:s,...T}=e,d=r.useContext(te),[l,F]=r.useState(null),[,R]=r.useState({}),y=Z(o,u=>F(u)),P=Array.from(d.layers),[i]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),m=P.indexOf(i),a=l?P.indexOf(l):-1,p=d.layersWithOutsidePointerEventsDisabled.size>0,h=a>=m,w=function(u){const v=D(u),f=r.useRef(!1);return r.useEffect(()=>{const C=A=>{A.target&&!f.current&&H("dismissableLayer.pointerDownOutside",v,{originalEvent:A}),f.current=!1},g=window.setTimeout(()=>{document.addEventListener("pointerdown",C)},0);return()=>{window.clearTimeout(g),document.removeEventListener("pointerdown",C)}},[v]),{onPointerDownCapture:()=>f.current=!0}}(u=>{const v=u.target,f=[...d.branches].some(C=>C.contains(v));h&&!f&&(c==null||c(u),E==null||E(u),u.defaultPrevented||s==null||s())}),L=function(u){const v=D(u),f=r.useRef(!1);return r.useEffect(()=>{const C=g=>{g.target&&!f.current&&H("dismissableLayer.focusOutside",v,{originalEvent:g})};return document.addEventListener("focusin",C),()=>document.removeEventListener("focusin",C)},[v]),{onFocusCapture:()=>f.current=!0,onBlurCapture:()=>f.current=!1}}(u=>{const v=u.target;[...d.branches].some(f=>f.contains(v))||(b==null||b(u),E==null||E(u),u.defaultPrevented||s==null||s())});return q(u=>{a===d.layers.size-1&&(n==null||n(u),u.defaultPrevented||s==null||s())}),X({disabled:t}),r.useEffect(()=>{l&&(t&&d.layersWithOutsidePointerEventsDisabled.add(l),d.layers.add(l),U())},[l,t,d]),r.useEffect(()=>()=>{l&&(d.layers.delete(l),d.layersWithOutsidePointerEventsDisabled.delete(l),U())},[l,d]),r.useEffect(()=>{const u=()=>R({});return document.addEventListener("dismissableLayer.update",u),()=>document.removeEventListener("dismissableLayer.update",u)},[]),r.createElement(ee.div,x({},T,{ref:y,style:{pointerEvents:p?h?"auto":"none":void 0,...e.style},onFocusCapture:I(e.onFocusCapture,L.onFocusCapture),onBlurCapture:I(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:I(e.onPointerDownCapture,w.onPointerDownCapture)}))});function U(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function H(e,o,t){const n=t.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});return o&&n.addEventListener(e,o,{once:!0}),!n.dispatchEvent(c)}export{de as D,ae as F,ie as u};
//# sourceMappingURL=index.module-3ff68a1e.js.map
